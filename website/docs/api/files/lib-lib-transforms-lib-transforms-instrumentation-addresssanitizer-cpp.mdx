---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AddressSanitizer.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DepthFirstIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallPtrSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Statistic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Twine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/twine-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/GlobalsModRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/MemoryBuiltins.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/memorybuiltins-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/StackSafetyAnalysis.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/stacksafetyanalysis-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/TargetLibraryInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/ValueTracking.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/BinaryFormat/MachO.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/binaryformat/macho-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Demangle/Demangle.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/demangle/demangle-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Argument.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Attributes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/BasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Comdat.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/comdat-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constant.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constants.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DIBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/dibuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DataLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugInfoMetadata.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfometadata-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugLoc.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debugloc-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DerivedTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/EHPersonalities.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/ehpersonalities-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Function.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/function-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalAlias.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalalias-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalValue.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalVariable.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InlineAsm.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstVisitor.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstrTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instruction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instructions.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicInst.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Intrinsics.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/LLVMContext.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/MDBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Metadata.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/metadata-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Module.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/module-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Type.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/type-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Use.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/use-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Value.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/value-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/MCSectionMachO.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/mcsectionmacho-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Casting.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/casting-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MathExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/TargetParser/Triple.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizerCommon.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizercommon-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizerOptions.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizeroptions-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/ASanStackFrameLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/asanstackframelayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/BasicBlockUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Instrumentation.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Local.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/ModuleUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/PromoteMemToReg.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/promotememtoreg-h"
  isLocal="true" />
<IncludesListItem
  filePath="algorithm"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstddef"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="iomanip"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="limits"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="sstream"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="tuple"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-addresssanitizer-cpp-">anonymous&#123;AddressSanitizer.cpp&#125;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a></>}>
This struct defines the shadow mapping using the rule: shadow = (mem &gt;&gt; Scale) ADD-or-OR Offset. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a></>}>
Helper RAII class to post-process inserted asan runtime calls during a pass on a single <a href="/docs/api/classes/llvm/function">Function</a>. <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a></>}>
<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a>: instrument the code in module to find memory bugs. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/functionstateraii">FunctionStateRAII</a></>}>
Helper to cleanup per-function state. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/functionstateraii/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer">ModuleAddressSanitizer</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner">FunctionStackPoisoner</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a></>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a> (AddressSanitizer &#42;Pass, Instruction &#42;I, Instruction &#42;InsertBefore, Value &#42;Addr, MaybeAlign Alignment, unsigned Granularity, TypeSize TypeStoreSize, bool IsWrite, Value &#42;SizeArgument, bool UseCalls, uint32&#95;t Exp, RuntimeCallInserter &amp;RTCI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a> (AddressSanitizer &amp;ASan, Instruction &amp;InsBefore, SmallVectorImpl&lt; Instruction &#42; &gt; &amp;InitInsts)</>}>
Collect instructions in the entry block after <code>InsBefore</code> which initialize permanent storage for a function argument. <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/twine">Twine</a></>}
  name={<><a href="#a2cd6efecbc36daba036d332c2556b668">genName</a> (StringRef suffix)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a> (Triple &amp;TargetTriple)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a> (int MappingScale)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="ShadowMapping"
  name={<><a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a> (const Triple &amp;TargetTriple, int LongSize, bool IsKasan)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a> (GlobalVariable &#42;G)</>}>
<a href="/docs/api/namespaces/llvm/check">Check</a> if <code>G</code> has been created by a trusted compiler pass. <a href="#a74f90b5c14043cd0038dc90723eab4c2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a84925f563ac5648b7a5c359d835cc947">isPointerOperand</a> (Value &#42;V)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a> (Value &#42;Addr)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="int"
  name={<><a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a> (uint64&#95;t LocalStackSize)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a70700f8036b11342dbf363f4f81f529f">STATISTIC</a> (NumInstrumentedReads, &quot;Number of instrumented reads&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a8910bcb5acc6a97247337ab859f77190">STATISTIC</a> (NumInstrumentedWrites, &quot;Number of instrumented writes&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a53ff0da5ad7ad5f867f88b745a5afd21">STATISTIC</a> (NumOptimizedAccessesToGlobalVar, &quot;Number of optimized accesses to global vars&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#aabbeec619cf71418f7195e062894d2dc">STATISTIC</a> (NumOptimizedAccessesToStackVar, &quot;Number of optimized accesses to stack vars&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a> (uint32&#95;t TypeSize)</>}>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> &gt;</>}
  name={<><a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#afcea04380058a94008cda9fc41056a16">ClDebug</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> &gt;</>}
  name={<><a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> &gt;</>}
  name={<><a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#af9d879b52ddf70fb1fe578bd5d1c508e">ClUseStackSafety</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 36</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a> = 0xf</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a> = 1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> = 32</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a> = &quot;llvm.amdgcn.is.private&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a> = &quot;llvm.amdgcn.is.shared&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a> = &quot;llvm.amdgcn.ballot.i64&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a> = &quot;llvm.amdgcn.unreachable&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a> = &quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a> = &quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a> = 1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a> = 50</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a> = &quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a> = &quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a> = &quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a> = &quot;&#95;&#95;asan&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a> = &quot;asan.module&#95;ctor&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a> = &quot;asan.module&#95;dtor&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a> =
    &quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a> = &quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a> = &quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a> = &quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a> = &quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> = &quot;&#95;&#95;asan&#95;report&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a> = &quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a> =
    &quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a> = &quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a> =
    &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a> = &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a> = &quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a> = &quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a> = &quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a> = &quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a> =
    &quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a> = &quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a> = 0x1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uintptr&#95;t</>}
  name={<><a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a> = 0x41B58AB3</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a> = 1ULL &lt;&lt; 29</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a> = 1ULL &lt;&lt; 44</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a> = 3</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a> =
    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 47</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a> = 0xdffff7c000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a> = 0x1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a> = 5</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a> = 0xdffffc0000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> int</>}
  name={<><a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> = 10</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a> = 1 &lt;&lt; 16</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> = 1 &lt;&lt; 6</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a> = 1ULL &lt;&lt; 29</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a> = 0x0aaa0000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 37</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a> = 0xdfff900000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a> = &quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 44</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 40</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uintptr&#95;t</>}
  name={<><a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a> = 0x45E0360E</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a> = &quot;&#95;&#95;sancov&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> = ~0xFFFULL</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> = 0x7FFFFFFF</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 52</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a> = 3ULL &lt;&lt; 28</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;asan&quot;</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Functions

### doInstrumentAddress() {#a01b9989f797101a150d7a960255adfec}

<MemberDefinition
  prototype={<>static void doInstrumentAddress (AddressSanitizer &#42; Pass, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Addr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, unsigned Granularity, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, bool IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42; SizeArgument, bool UseCalls, uint32&#95;t Exp, RuntimeCallInserter &amp; RTCI)</>}
  labels = {["static"]}>

Definition at line <a href="#l01604">1604</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### findStoresToUninstrumentedArgAllocas() {#a0050ea5bb47a2b75ed9e8239bcd469a6}

<MemberDefinition
  prototype={<>static void findStoresToUninstrumentedArgAllocas (AddressSanitizer &amp; ASan, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; InsBefore, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; InitInsts)</>}
  labels = {["static"]}>
Collect instructions in the entry block after <code>InsBefore</code> which initialize permanent storage for a function argument.

These instructions must remain in the entry block so that uninitialized values do not appear in backtraces. An added benefit is that this conserves spill slots. This does not move stores before instrumented / &quot;interesting&quot; allocas.

Definition at line <a href="#l03347">3347</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### genName() {#a2cd6efecbc36daba036d332c2556b668}

<MemberDefinition
  prototype={<>static Twine genName (<a href="/docs/api/classes/llvm/stringref">StringRef</a> suffix)</>}
  labels = {["static"]}>

Definition at line <a href="#l00645">645</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### GetCtorAndDtorPriority() {#a30ad890949cdfd6777919b71f4d09dfe}

<MemberDefinition
  prototype={<>static uint64&#95;t GetCtorAndDtorPriority (<a href="/docs/api/classes/llvm/triple">Triple</a> &amp; TargetTriple)</>}
  labels = {["static"]}>

Definition at line <a href="#l00637">637</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### getRedzoneSizeForScale() {#a4ae843502b417fca05b0d9b1ccd9df94}

<MemberDefinition
  prototype={<>static uint64&#95;t getRedzoneSizeForScale (int MappingScale)</>}
  labels = {["static"]}>

Definition at line <a href="#l00631">631</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### getShadowMapping() {#ac4b45ab450a043187e92eaace7d62018}

<MemberDefinition
  prototype={<>static ShadowMapping getShadowMapping (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp; TargetTriple, int LongSize, bool IsKasan)</>}
  labels = {["static"]}>

Definition at line <a href="#l00478">478</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### GlobalWasGeneratedByCompiler() {#a74f90b5c14043cd0038dc90723eab4c2}

<MemberDefinition
  prototype={<>static bool GlobalWasGeneratedByCompiler (<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42; G)</>}
  labels = {["static"]}>
<a href="/docs/api/namespaces/llvm/check">Check</a> if <code>G</code> has been created by a trusted compiler pass.

Definition at line <a href="#l01301">1301</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isInterestingPointerComparison() {#a8d829e3f1a798c5c559b716ba05a4d7d}

<MemberDefinition
  prototype={<>static bool isInterestingPointerComparison (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}
  labels = {["static"]}>

Definition at line <a href="#l01554">1554</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isInterestingPointerSubtraction() {#a1e0c09290631b1be732e7387c75aca09}

<MemberDefinition
  prototype={<>static bool isInterestingPointerSubtraction (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}
  labels = {["static"]}>

Definition at line <a href="#l01568">1568</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isPointerOperand() {#a84925f563ac5648b7a5c359d835cc947}

<MemberDefinition
  prototype={<>static bool isPointerOperand (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V)</>}
  labels = {["static"]}>

Definition at line <a href="#l01547">1547</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isUnsupportedAMDGPUAddrspace() {#a66fb0770ddf5f596079ee32ca4b8b599}

<MemberDefinition
  prototype={<>static bool isUnsupportedAMDGPUAddrspace (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Addr)</>}
  labels = {["static"]}>

Definition at line <a href="#l01319">1319</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### StackMallocSizeClass() {#a956c8ddbdae78e48e5a76c33430a4ef6}

<MemberDefinition
  prototype={<>static int StackMallocSizeClass (uint64&#95;t LocalStackSize)</>}
  labels = {["static"]}>

Definition at line <a href="#l03241">3241</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a70700f8036b11342dbf363f4f81f529f}

<MemberDefinition
  prototype={<>STATISTIC (NumInstrumentedReads, &quot;Number of instrumented reads&quot;)</>}>

Definition at line <a href="#l00455">455</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a8910bcb5acc6a97247337ab859f77190}

<MemberDefinition
  prototype={<>STATISTIC (NumInstrumentedWrites, &quot;Number of instrumented writes&quot;)</>}>

Definition at line <a href="#l00456">456</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a53ff0da5ad7ad5f867f88b745a5afd21}

<MemberDefinition
  prototype={<>STATISTIC (NumOptimizedAccessesToGlobalVar, &quot;Number of optimized accesses to global vars&quot;)</>}>

Definition at line <a href="#l00457">457</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#aabbeec619cf71418f7195e062894d2dc}

<MemberDefinition
  prototype={<>STATISTIC (NumOptimizedAccessesToStackVar, &quot;Number of optimized accesses to stack vars&quot;)</>}>

Definition at line <a href="#l00459">459</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### TypeStoreSizeToSizeIndex() {#adcdff5e32d9b4d801f187d48b106e579}

<MemberDefinition
  prototype={<>static size&#95;t TypeStoreSizeToSizeIndex (uint32&#95;t TypeSize)</>}
  labels = {["static"]}>

Definition at line <a href="#l01294">1294</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### ClAlwaysSlowPath {#acfc2efa648ba005caa42cf6f28d82757}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClAlwaysSlowPath(&quot;asan-always-slow-path&quot;, cl::desc(&quot;use instrumentation with slow path for all accesses&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00234">234</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClConstructorKind {#aca33036eb9649523a6345787acc33d29}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanCtorKind &gt; ClConstructorKind(&quot;asan-constructor-kind&quot;, cl::desc(&quot;Sets the ASan constructor kind&quot;), cl::values(clEnumValN(AsanCtorKind::None, &quot;none&quot;, &quot;No constructors&quot;), clEnumValN(AsanCtorKind::Global, &quot;global&quot;, &quot;Use global constructors&quot;)), cl::init(AsanCtorKind::Global), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00354">354</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebug {#afcea04380058a94008cda9fc41056a16}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebug(&quot;asan-debug&quot;, cl::desc(&quot;debug&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00440">440</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugFunc {#aa14af85369bdb6b331cd00f499d4cf63}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; ClDebugFunc(&quot;asan-debug-func&quot;, cl::Hidden, cl::desc(&quot;Debug func&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00446">446</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugMax {#a8052781b69a1a9e2f58c190a15b67628}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugMax(&quot;asan-debug-max&quot;, cl::desc(&quot;Debug max inst&quot;), cl::Hidden, cl::init(-1))</>}
  labels = {["static"]}>

Definition at line <a href="#l00452">452</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugMin {#a0dd632512536154ac3d012e7065f2bcf}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugMin(&quot;asan-debug-min&quot;, cl::desc(&quot;Debug min inst&quot;), cl::Hidden, cl::init(-1))</>}
  labels = {["static"]}>

Definition at line <a href="#l00449">449</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugStack {#a635e0541e4c0f8a4c5faba9e9c94aebc}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugStack(&quot;asan-debug-stack&quot;, cl::desc(&quot;debug stack&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00443">443</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDynamicAllocaStack {#ab65506fece0b5302fe804c49e6580446}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClDynamicAllocaStack(&quot;asan-stack-dynamic-alloca&quot;, cl::desc(&quot;Use dynamic alloca to represent stack variables&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00396">396</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClEnableKasan {#aa09777d1507554d2873581bb83442022}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClEnableKasan(&quot;asan-kernel&quot;, cl::desc(&quot;Enable KernelAddressSanitizer instrumentation&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00196">196</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClForceDynamicShadow {#a25d1ca975f48d54e4290d63829f35a95}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClForceDynamicShadow(&quot;asan-force-dynamic-shadow&quot;, cl::desc(&quot;Load shadow address into a local variable for each function&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00239">239</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClForceExperiment {#a8769662e83dc63443d2cfa743cd8407b}

<MemberDefinition
  prototype={<>cl::opt&lt; uint32&#95;t &gt; ClForceExperiment(&quot;asan-force-experiment&quot;, cl::desc(&quot;Force optimization experiment (for testing)&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00401">401</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClGlobals {#a37e75a212ee37baa76869a8d0195d9e6}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClGlobals(&quot;asan-globals&quot;, cl::desc(&quot;Handle global objects&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00299">299</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInitializers {#ad7ffe665351fede3f8025e2cb84ccc83}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInitializers(&quot;asan-initialization-order&quot;, cl::desc(&quot;Handle C++ initializer order&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00303">303</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInsertVersionCheck {#a2a1656d1f4ddeb386daf49396b178ab3}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInsertVersionCheck(&quot;asan-guard-against-version-mismatch&quot;, cl::desc(&quot;Guard against compiler/runtime version mismatch.&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00205">205</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentationWithCallsThreshold {#a7b6dcf17e1b173746a4939b677ca1fb0}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClInstrumentationWithCallsThreshold(&quot;asan-instrumentation-with-call-threshold&quot;, cl::desc(&quot;If the function being instrumented contains more than &quot; &quot;this number of memory accesses, use callbacks instead of &quot; &quot;inline checks (-1 means never use callbacks).&quot;), cl::Hidden, cl::init(7000))</>}
  labels = {["static"]}>

Definition at line <a href="#l00327">327</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentAtomics {#a98491b92a3cd11f11c29f752625b136d}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentAtomics(&quot;asan-instrument-atomics&quot;, cl::desc(&quot;instrument atomic instructions (rmw, cmpxchg)&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00224">224</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentByval {#a33190b8a2d49613b79d5374db635dd0a}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentByval(&quot;asan-instrument-byval&quot;, cl::desc(&quot;instrument byval call arguments&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00230">230</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentDynamicAllocas {#aacabf2f74c684a07a8d7b499d252f8c9}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentDynamicAllocas(&quot;asan-instrument-dynamic-allocas&quot;, cl::desc(&quot;instrument dynamic allocas&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00345">345</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentReads {#adc5cd4695253418937546218dbe26922}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentReads(&quot;asan-instrument-reads&quot;, cl::desc(&quot;instrument read instructions&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00211">211</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentWrites {#a2df764565c5764a2af608a819cfa2540}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentWrites(&quot;asan-instrument-writes&quot;, cl::desc(&quot;instrument write instructions&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00215">215</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerCmp {#a7988b8281b1972c35eb5833f8c23a1a3}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerCmp(&quot;asan-detect-invalid-pointer-cmp&quot;, cl::desc(&quot;Instrument &lt;, &lt;=, &gt;, &gt;= with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00312">312</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerPairs {#afe56a2bdf58d01cf437e1abba61e2830}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerPairs(&quot;asan-detect-invalid-pointer-pair&quot;, cl::desc(&quot;Instrument &lt;, &lt;=, &gt;, &gt;=, - with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00307">307</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerSub {#a8398c67027004edc3649be6b6db60eab}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerSub(&quot;asan-detect-invalid-pointer-sub&quot;, cl::desc(&quot;Instrument - operations with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00317">317</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClKasanMemIntrinCallbackPrefix {#ae49da4e77feeb6c094e35e7c86f5613e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClKasanMemIntrinCallbackPrefix(&quot;asan-kernel-mem-intrinsic-prefix&quot;, cl::desc(&quot;Use prefix for memory intrinsics in KASAN mode&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00339">339</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMappingOffset {#aebb74a0c8e6baa32b77d0782e9e911dc}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClMappingOffset(&quot;asan-mapping-offset&quot;, cl::desc(&quot;offset of asan shadow mapping &#91;EXPERIMENTAL&#93;&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00370">370</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMappingScale {#a9d0c59216cf72992129adb73dc73ec65}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClMappingScale(&quot;asan-mapping-scale&quot;, cl::desc(&quot;scale of asan shadow mapping&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00365">365</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMaxInlinePoisoningSize {#a96c36d2e9698f2974735d30dfea6893c}

<MemberDefinition
  prototype={<>cl::opt&lt; uint32&#95;t &gt; ClMaxInlinePoisoningSize(&quot;asan-max-inline-poisoning-size&quot;, cl::desc( &quot;Inline shadow poisoning for blocks up to the given size in bytes.&quot;), cl::Hidden, cl::init(64))</>}
  labels = {["static"]}>

Definition at line <a href="#l00268">268</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMaxInsnsToInstrumentPerBB {#af7099fa6660e94761e7f5b525b330bb2}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClMaxInsnsToInstrumentPerBB(&quot;asan-max-ins-per-bb&quot;, cl::init(10000), cl::desc(&quot;maximal number of instructions to instrument in any given BB&quot;), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00260">260</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMemoryAccessCallbackPrefix {#a27774720f5060297840f5e603fba95f1}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; ClMemoryAccessCallbackPrefix(&quot;asan-memory-access-callback-prefix&quot;, cl::desc(&quot;Prefix for memory access callbacks&quot;), cl::Hidden, cl::init(&quot;&#95;&#95;asan&#95;&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00334">334</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOpt {#a6d7586f09e72a8d0b38a7b28ce03068c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOpt(&quot;asan-opt&quot;, cl::desc(&quot;Optimize instrumentation&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00377">377</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptGlobals {#abd03cce0a222ad0e49b3074b9258f894}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptGlobals(&quot;asan-opt-globals&quot;, cl::desc(&quot;Don&#39;t instrument scalar globals&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00388">388</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptimizeCallbacks {#a53fdfe303964c0943c25d294cd1cf193}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptimizeCallbacks(&quot;asan-optimize-callbacks&quot;, cl::desc(&quot;Optimize callbacks&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00380">380</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptSameTemp {#ab320a8dd5d6290c1e021de274df4c809}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptSameTemp(&quot;asan-opt-same-temp&quot;, cl::desc(&quot;Instrument the same temp just once&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00384">384</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptStack {#ab6e8695312b588ef5a110f33c9beb09c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptStack(&quot;asan-opt-stack&quot;, cl::desc(&quot;Don&#39;t instrument scalar stack variables&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00392">392</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOverrideDestructorKind {#a2ca87f4ce47405a2ebd8d6e0ab259d65}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanDtorKind &gt; ClOverrideDestructorKind(&quot;asan-destructor-kind&quot;, cl::desc(&quot;Sets the ASan destructor kind. The default is to use the value &quot; &quot;provided to the pass constructor&quot;), cl::values(clEnumValN(AsanDtorKind::None, &quot;none&quot;, &quot;No destructors&quot;), clEnumValN(AsanDtorKind::Global, &quot;global&quot;, &quot;Use global destructors&quot;)), cl::init(AsanDtorKind::Invalid), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00429">429</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRealignStack {#adbb45684e8c1f7cc79db81a276e70471}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ClRealignStack(&quot;asan-realign-stack&quot;, cl::desc(&quot;Realign stack to the value of this flag (power of two)&quot;), cl::Hidden, cl::init(32))</>}
  labels = {["static"]}>

Definition at line <a href="#l00322">322</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRecover {#ab07c89b5ab3621d59817baefdae128cb}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClRecover(&quot;asan-recover&quot;, cl::desc(&quot;Enable recovery mode (continue-after-error).&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00200">200</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRedzoneByvalArgs {#a3ad807be99d9d4ce4b6a2038719b015c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClRedzoneByvalArgs(&quot;asan-redzone-byval-args&quot;, cl::desc(&quot;Create redzones for byval &quot; &quot;arguments (extra copy &quot; &quot;required)&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00288">288</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClSkipPromotableAllocas {#aeff4047a82cefd8108f2bc7263e924fa}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClSkipPromotableAllocas(&quot;asan-skip-promotable-allocas&quot;, cl::desc(&quot;Do not instrument promotable allocas&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00349">349</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClStack {#a9123bbb6c01ba4b0e0ef3547a5132cd1}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClStack(&quot;asan-stack&quot;, cl::desc(&quot;Handle stack memory&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00266">266</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseAfterReturn {#ab96ca2732f7eaecb2e762c9c754f7b37}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanDetectStackUseAfterReturnMode &gt; ClUseAfterReturn(&quot;asan-use-after-return&quot;, cl::desc(&quot;Sets the mode of detection for stack-use-after-return.&quot;), cl::values( clEnumValN(AsanDetectStackUseAfterReturnMode::Never, &quot;never&quot;, &quot;Never detect stack use after return.&quot;), clEnumValN( AsanDetectStackUseAfterReturnMode::Runtime, &quot;runtime&quot;, &quot;Detect stack use after return if &quot; &quot;binary flag &#39;ASAN&#95;OPTIONS=detect&#95;stack&#95;use&#95;after&#95;return&#39; is set.&quot;), clEnumValN(AsanDetectStackUseAfterReturnMode::Always, &quot;always&quot;, &quot;Always detect stack use after return.&quot;)), cl::Hidden, cl::init(AsanDetectStackUseAfterReturnMode::Runtime))</>}
  labels = {["static"]}>

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseAfterScope {#a9a4fc66faeab43a236796f382e142af4}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseAfterScope(&quot;asan-use-after-scope&quot;, cl::desc(&quot;Check stack-use-after-scope&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00294">294</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseGlobalsGC {#aa612bd13cbe0dc1e574383f4eddc0760}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseGlobalsGC(&quot;asan-globals-live-support&quot;, cl::desc(&quot;Use linker features to support dead &quot; &quot;code stripping of globals&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00417">417</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseOdrIndicator {#a7499c29bb36dd906803322453ac406ad}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseOdrIndicator(&quot;asan-use-odr-indicator&quot;, cl::desc(&quot;Use odr indicators to improve ODR reporting&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00412">412</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUsePrivateAlias {#a108a44e27f64b25d5be99eab0c12b840}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUsePrivateAlias(&quot;asan-use-private-alias&quot;, cl::desc(&quot;Use private aliases for global variables&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00407">407</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseStackSafety {#af9d879b52ddf70fb1fe578bd5d1c508e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseStackSafety(&quot;asan-use-stack-safety&quot;, cl::Hidden, cl::init(true), cl::Hidden, cl::desc(&quot;Use Stack Safety analysis results&quot;), cl::Optional)</>}
  labels = {["static"]}>

Definition at line <a href="#l00220">220</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithComdat {#aeded18588e9deea14f9c30eb995da5bb}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithComdat(&quot;asan-with-comdat&quot;, cl::desc(&quot;Place ASan constructors in comdat sections&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00425">425</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithIfunc {#ae3d5d96c349d9c866c3641bbadc0554b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithIfunc(&quot;asan-with-ifunc&quot;, cl::desc(&quot;Access dynamic shadow through an ifunc global on &quot; &quot;platforms that support this&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00245">245</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithIfuncSuppressRemat {#a63147f939444e77f3a294dc59c2939ba}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithIfuncSuppressRemat(&quot;asan-with-ifunc-suppress-remat&quot;, cl::desc(&quot;Suppress rematerialization of dynamic shadow address by passing &quot; &quot;it through inline asm in prologue.&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00250">250</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAArch64&#95;ShadowOffset64 {#afe1c55791cd733a93d250395352569df}

<MemberDefinition
  prototype={<>const uint64&#95;t kAArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 36</>}
  labels = {["static"]}>

Definition at line <a href="#l00109">109</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAccessSizeIndexMask {#a095b4c60115113ef59a28ffb3a817422}

<MemberDefinition
  prototype={<>size&#95;t kAccessSizeIndexMask = 0xf</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00190">190</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAccessSizeIndexShift {#a9bd091ccb08f4fcaef69d6c5f956572a}

<MemberDefinition
  prototype={<>size&#95;t kAccessSizeIndexShift = 1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00189">189</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAllocaRzSize {#a6da7b2b680f4518d9d5545432e701ba1}

<MemberDefinition
  prototype={<>const uint64&#95;t kAllocaRzSize = 32</>}
  labels = {["static"]}>

Definition at line <a href="#l00184">184</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUAddressPrivateName {#ae6098b64cdbf4d809b1f3f86a866c56a}

<MemberDefinition
  prototype={<>const char kAMDGPUAddressPrivateName&#91;&#93; = &quot;llvm.amdgcn.is.private&quot;</>}>

Definition at line <a href="#l00177">177</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUAddressSharedName {#a2121416d2692ea7ec2c9522291600a19}

<MemberDefinition
  prototype={<>const char kAMDGPUAddressSharedName&#91;&#93; = &quot;llvm.amdgcn.is.shared&quot;</>}>

Definition at line <a href="#l00176">176</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUBallotName {#ae7f00801ef2ef87699661f1dca513b52}

<MemberDefinition
  prototype={<>const char kAMDGPUBallotName&#91;&#93; = &quot;llvm.amdgcn.ballot.i64&quot;</>}>

Definition at line <a href="#l00178">178</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUUnreachableName {#a0942316ad508b030eec9f8ac3104b964}

<MemberDefinition
  prototype={<>const char kAMDGPUUnreachableName&#91;&#93; = &quot;llvm.amdgcn.unreachable&quot;</>}>

Definition at line <a href="#l00179">179</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanAllocaPoison {#addbdc1734f12bc122f2b204052f426df}

<MemberDefinition
  prototype={<>const char kAsanAllocaPoison&#91;&#93; = &quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</>}>

Definition at line <a href="#l00173">173</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanAllocasUnpoison {#afd65995ac50736f33beadc3c0549ce0b}

<MemberDefinition
  prototype={<>const char kAsanAllocasUnpoison&#91;&#93; = &quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</>}>

Definition at line <a href="#l00174">174</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanCtorAndDtorPriority {#a602962e4e3026aa808d7a026ef6b300f}

<MemberDefinition
  prototype={<>const uint64&#95;t kAsanCtorAndDtorPriority = 1</>}
  labels = {["static"]}>

Definition at line <a href="#l00133">133</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanEmscriptenCtorAndDtorPriority {#a79c217bbf91742b02797b0c426674dfe}

<MemberDefinition
  prototype={<>const uint64&#95;t kAsanEmscriptenCtorAndDtorPriority = 50</>}
  labels = {["static"]}>

Definition at line <a href="#l00135">135</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanGenPrefix {#a476e7801fbfecbea19d62de9a27e71ae}

<MemberDefinition
  prototype={<>const char kAsanGenPrefix&#91;&#93; = &quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00156">156</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanGlobalsRegisteredFlagName {#aae785da38ce552b3ab47791e9abb9fd9}

<MemberDefinition
  prototype={<>const char kAsanGlobalsRegisteredFlagName&#91;&#93; = &quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</>}>

Definition at line <a href="#l00165">165</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanHandleNoReturnName {#afa4db1804122bafade11f423f5a483f5}

<MemberDefinition
  prototype={<>const char kAsanHandleNoReturnName&#91;&#93; = &quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</>}>

Definition at line <a href="#l00150">150</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanInitName {#a361b5f11d7b296279f45007be01c2913}

<MemberDefinition
  prototype={<>const char kAsanInitName&#91;&#93; = &quot;&#95;&#95;asan&#95;init&quot;</>}>

Definition at line <a href="#l00146">146</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanModuleCtorName {#aad3e6eabecd50c9664b21071407c2267}

<MemberDefinition
  prototype={<>const char kAsanModuleCtorName&#91;&#93; = &quot;asan.module&#95;ctor&quot;</>}>

Definition at line <a href="#l00131">131</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanModuleDtorName {#a8bcb2cf7d004c924b63f1a9d0dfa2847}

<MemberDefinition
  prototype={<>const char kAsanModuleDtorName&#91;&#93; = &quot;asan.module&#95;dtor&quot;</>}>

Definition at line <a href="#l00132">132</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanOptionDetectUseAfterReturn {#a27766fe2066043a2c55cc0becdcdd9f1}

<MemberDefinition
  prototype={<>const char kAsanOptionDetectUseAfterReturn&#91;&#93; =
    &quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</>}>

Definition at line <a href="#l00167">167</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPoisonGlobalsName {#af9f3c07d9fc38e3b9ac12f6c4386dad5}

<MemberDefinition
  prototype={<>const char kAsanPoisonGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</>}>

Definition at line <a href="#l00144">144</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPoisonStackMemoryName {#a9de96b20be410e7c2014587a070465d4}

<MemberDefinition
  prototype={<>const char kAsanPoisonStackMemoryName&#91;&#93; = &quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</>}>

Definition at line <a href="#l00160">160</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPtrCmp {#a2fa18fb24f9feafbd0d0fc1107b131ed}

<MemberDefinition
  prototype={<>const char kAsanPtrCmp&#91;&#93; = &quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</>}>

Definition at line <a href="#l00148">148</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPtrSub {#adac38b7a834c74bc8d152337671c1ab7}

<MemberDefinition
  prototype={<>const char kAsanPtrSub&#91;&#93; = &quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</>}>

Definition at line <a href="#l00149">149</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterElfGlobalsName {#aea03f393f423aab3e80a1bf6ee59a3b1}

<MemberDefinition
  prototype={<>const char kAsanRegisterElfGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</>}>

Definition at line <a href="#l00142">142</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterGlobalsName {#aa9fe31e1276128051e55a18579091356}

<MemberDefinition
  prototype={<>const char kAsanRegisterGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;globals&quot;</>}>

Definition at line <a href="#l00137">137</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterImageGlobalsName {#a6756689ed60e2d83d51a12e960517e19}

<MemberDefinition
  prototype={<>const char kAsanRegisterImageGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</>}>

Definition at line <a href="#l00139">139</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanReportErrorTemplate {#aec7167f84edee7a2c075e1571bab8d8e}

<MemberDefinition
  prototype={<>const char kAsanReportErrorTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;report&#95;&quot;</>}>

Definition at line <a href="#l00136">136</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanSetShadowPrefix {#a2bec6b8d5a441c0918bbdd1be9df32b3}

<MemberDefinition
  prototype={<>const char kAsanSetShadowPrefix&#91;&#93; = &quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</>}>

Definition at line <a href="#l00159">159</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanShadowMemoryDynamicAddress {#a72f82be6c1dbdf567e8dd11251e87000}

<MemberDefinition
  prototype={<>const char kAsanShadowMemoryDynamicAddress&#91;&#93; =
    &quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</>}>

Definition at line <a href="#l00170">170</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackFreeNameTemplate {#a21dae1495bdaa52cff0efeff2bb65742}

<MemberDefinition
  prototype={<>const char kAsanStackFreeNameTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</>}>

Definition at line <a href="#l00155">155</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackMallocAlwaysNameTemplate {#a7827de59665600c15eebeb456731627c}

<MemberDefinition
  prototype={<>const char kAsanStackMallocAlwaysNameTemplate&#91;&#93; =
    &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</>}>

Definition at line <a href="#l00153">153</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackMallocNameTemplate {#a311ac214c991fe60e693899d731e311e}

<MemberDefinition
  prototype={<>const char kAsanStackMallocNameTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</>}>

Definition at line <a href="#l00152">152</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnpoisonGlobalsName {#a61e87da131e672072ffa897d6c3f954e}

<MemberDefinition
  prototype={<>const char kAsanUnpoisonGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</>}>

Definition at line <a href="#l00145">145</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnpoisonStackMemoryName {#aa6ae2abfa7c1477f42010a614aa2e20b}

<MemberDefinition
  prototype={<>const char kAsanUnpoisonStackMemoryName&#91;&#93; = &quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</>}>

Definition at line <a href="#l00161">161</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterElfGlobalsName {#a652aabcf278acb60ed86440a1489bcf0}

<MemberDefinition
  prototype={<>const char kAsanUnregisterElfGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</>}>

Definition at line <a href="#l00143">143</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterGlobalsName {#a5b0465f40b3ec7684fdc252ed5e01ed4}

<MemberDefinition
  prototype={<>const char kAsanUnregisterGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</>}>

Definition at line <a href="#l00138">138</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterImageGlobalsName {#ab8a40552186ca947c5570a1e9895dcd3}

<MemberDefinition
  prototype={<>const char kAsanUnregisterImageGlobalsName&#91;&#93; =
    &quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</>}>

Definition at line <a href="#l00140">140</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanVersionCheckNamePrefix {#ae54fd57142396b1edba3f62247d5a176}

<MemberDefinition
  prototype={<>const char kAsanVersionCheckNamePrefix&#91;&#93; = &quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</>}>

Definition at line <a href="#l00147">147</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCompileKernelMask {#a230c7d7ca3e0e9088b709d8ee861c23c}

<MemberDefinition
  prototype={<>size&#95;t kCompileKernelMask = 0x1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00188">188</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCompileKernelShift {#ae065abe1628e445fa1a1a378d8ee0648}

<MemberDefinition
  prototype={<>size&#95;t kCompileKernelShift = 0</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00187">187</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCurrentStackFrameMagic {#abd89ac2b95ec4f9f9b87cf28f156322d}

<MemberDefinition
  prototype={<>const uintptr&#95;t kCurrentStackFrameMagic = 0x41B58AB3</>}
  labels = {["static"]}>

Definition at line <a href="#l00128">128</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowOffset32 {#a7221cab4eb5396f920c432650580815d}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowOffset32 = 1ULL &lt;&lt; 29</>}
  labels = {["static"]}>

Definition at line <a href="#l00097">97</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowOffset64 {#a52e0a578af8418ff6a63a4b03d385012}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowOffset64 = 1ULL &lt;&lt; 44</>}
  labels = {["static"]}>

Definition at line <a href="#l00098">98</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowScale {#a0825e9eeff024102856e9a30f41bb386}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowScale = 3</>}
  labels = {["static"]}>

Definition at line <a href="#l00096">96</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDynamicShadowSentinel {#a8d1135f2ee91e5d486647a37f8074dcc}

<MemberDefinition
  prototype={<>const uint64&#95;t kDynamicShadowSentinel =
    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max()</>}
  labels = {["static"]}>

Definition at line <a href="#l00099">99</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kEmscriptenShadowOffset {#a40e81ce979aa27fb2789c389719b1d7b}

<MemberDefinition
  prototype={<>const uint64&#95;t kEmscriptenShadowOffset = 0</>}
  labels = {["static"]}>

Definition at line <a href="#l00121">121</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSD&#95;ShadowOffset32 {#a19c339ea0be179f2cd9a609083711b2d}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSD&#95;ShadowOffset32 = 1ULL &lt;&lt; 30</>}
  labels = {["static"]}>

Definition at line <a href="#l00112">112</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSD&#95;ShadowOffset64 {#a8749ec5f43deb3d657141795f9dbb210}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSD&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00113">113</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSDAArch64&#95;ShadowOffset64 {#ad2b59a0cc04cb42c94cc18e9d5f5ec6b}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSDAArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 47</>}
  labels = {["static"]}>

Definition at line <a href="#l00114">114</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSDKasan&#95;ShadowOffset64 {#a8a860b5741776f43c99ab75b0660e59a}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSDKasan&#95;ShadowOffset64 = 0xdffff7c000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00115">115</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kIsWriteMask {#a4ac0cc78d7c86822b81df1b7db4338bc}

<MemberDefinition
  prototype={<>size&#95;t kIsWriteMask = 0x1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00192">192</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kIsWriteShift {#a19deb83e797e941c8400caa50f648a50}

<MemberDefinition
  prototype={<>size&#95;t kIsWriteShift = 5</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00191">191</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kLinuxKasan&#95;ShadowOffset64 {#a924de63e7606463a6405a1a7276fa33a}

<MemberDefinition
  prototype={<>const uint64&#95;t kLinuxKasan&#95;ShadowOffset64 = 0xdffffc0000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00103">103</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kLoongArch64&#95;ShadowOffset64 {#aa8e5653e53fa32049d96cebcd3564b15}

<MemberDefinition
  prototype={<>const uint64&#95;t kLoongArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00110">110</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMaxAsanStackMallocSizeClass {#acba05c6df950ff8712fa2194a2b83c87}

<MemberDefinition
  prototype="const int kMaxAsanStackMallocSizeClass = 10"
  labels = {["static"]}>

Definition at line <a href="#l00151">151</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMaxStackMallocSize {#aaf5f0e81eb832fe48c6dc33db623a03c}

<MemberDefinition
  prototype={<>const size&#95;t kMaxStackMallocSize = 1 &lt;&lt; 16</>}
  labels = {["static"]}>

Definition at line <a href="#l00127">127</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMinStackMallocSize {#afb368a1d773581543db2f164baf7fbdf}

<MemberDefinition
  prototype={<>const size&#95;t kMinStackMallocSize = 1 &lt;&lt; 6</>}
  labels = {["static"]}>

Definition at line <a href="#l00126">126</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS&#95;ShadowOffsetN32 {#ab6f29d0b2de1b74e731e1efbc653f844}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS&#95;ShadowOffsetN32 = 1ULL &lt;&lt; 29</>}
  labels = {["static"]}>

Definition at line <a href="#l00106">106</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS32&#95;ShadowOffset32 {#acda94f3cd0782a06ec8c4035ab6a6ba0}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS32&#95;ShadowOffset32 = 0x0aaa0000</>}
  labels = {["static"]}>

Definition at line <a href="#l00107">107</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS64&#95;ShadowOffset64 {#a9141b9519404ab70f9def3fb4e44cbf6}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS64&#95;ShadowOffset64 = 1ULL &lt;&lt; 37</>}
  labels = {["static"]}>

Definition at line <a href="#l00108">108</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSD&#95;ShadowOffset32 {#ad16c0ca942afbe549bcfa4f06b2eae12}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSD&#95;ShadowOffset32 = 1ULL &lt;&lt; 30</>}
  labels = {["static"]}>

Definition at line <a href="#l00116">116</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSD&#95;ShadowOffset64 {#ad92d9ebd9f88c5f9fe134d9e2cd329d9}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSD&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00117">117</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSDKasan&#95;ShadowOffset64 {#ae705b5638cfef61445fc086ff309257b}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSDKasan&#95;ShadowOffset64 = 0xdfff900000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00118">118</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNumberOfAccessSizes {#aa62a4d0672bab180dd339cda25b23b2e}

<MemberDefinition
  prototype={<>const size&#95;t kNumberOfAccessSizes = 5</>}
  labels = {["static"]}>

Definition at line <a href="#l00182">182</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kODRGenPrefix {#a6e54679eb7c171172210d5898f5e2ebc}

<MemberDefinition
  prototype={<>const char kODRGenPrefix&#91;&#93; = &quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00157">157</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kPPC64&#95;ShadowOffset64 {#ac71a9d13684166ebbd2dc2fae6ada036}

<MemberDefinition
  prototype={<>const uint64&#95;t kPPC64&#95;ShadowOffset64 = 1ULL &lt;&lt; 44</>}
  labels = {["static"]}>

Definition at line <a href="#l00104">104</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kPS&#95;ShadowOffset64 {#a11a7b9f550cc8f2096e2feb0a6e7d77d}

<MemberDefinition
  prototype={<>const uint64&#95;t kPS&#95;ShadowOffset64 = 1ULL &lt;&lt; 40</>}
  labels = {["static"]}>

Definition at line <a href="#l00119">119</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kRetiredStackFrameMagic {#af955cd27ba6d5632e02d374282c4afae}

<MemberDefinition
  prototype={<>const uintptr&#95;t kRetiredStackFrameMagic = 0x45E0360E</>}
  labels = {["static"]}>

Definition at line <a href="#l00129">129</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kRISCV64&#95;ShadowOffset64 {#a2959b7316b7440ef0479456a1f224f95}

<MemberDefinition
  prototype={<>const uint64&#95;t kRISCV64&#95;ShadowOffset64 = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}
  labels = {["static"]}>

Definition at line <a href="#l00111">111</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSanCovGenPrefix {#a89f98c73fceabd5b3e0c1862003f7b6a}

<MemberDefinition
  prototype={<>const char kSanCovGenPrefix&#91;&#93; = &quot;&#95;&#95;sancov&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00158">158</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSmallX86&#95;64ShadowOffsetAlignMask {#a1bb96936cdfae1973dcbae7e9a6e9afa}

<MemberDefinition
  prototype={<>const uint64&#95;t kSmallX86&#95;64ShadowOffsetAlignMask = ~0xFFFULL</>}
  labels = {["static"]}>

Definition at line <a href="#l00102">102</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSmallX86&#95;64ShadowOffsetBase {#ad4d2d4a3e49a33b6eb2f2d7696f73284}

<MemberDefinition
  prototype={<>const uint64&#95;t kSmallX86&#95;64ShadowOffsetBase = 0x7FFFFFFF</>}
  labels = {["static"]}>

Definition at line <a href="#l00101">101</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSystemZ&#95;ShadowOffset64 {#a714b1c9d5243d23282452c2ec154bf64}

<MemberDefinition
  prototype={<>const uint64&#95;t kSystemZ&#95;ShadowOffset64 = 1ULL &lt;&lt; 52</>}
  labels = {["static"]}>

Definition at line <a href="#l00105">105</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kWindowsShadowOffset32 {#adc0285e7406db187db7f4b477b888eca}

<MemberDefinition
  prototype={<>const uint64&#95;t kWindowsShadowOffset32 = 3ULL &lt;&lt; 28</>}
  labels = {["static"]}>

Definition at line <a href="#l00120">120</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kWindowsShadowOffset64 {#a3f40cbca316fdd29c447fc96d7373109}

<MemberDefinition
  prototype={<>const uint64&#95;t kWindowsShadowOffset64 = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}
  labels = {["static"]}>

Definition at line <a href="#l00124">124</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;asan&quot;</>}>

Definition at line <a href="#l00094">94</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- AddressSanitizer.cpp - memory error detector -----------------------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">// This file is a part of AddressSanitizer, an address basic correctness</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">// checker.</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">// Details of the algorithm:</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">//  https://github.com/google/sanitizers/wiki/AddressSanitizerAlgorithm</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">// FIXME: This sanitizer does not yet handle scalable vectors</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizer-h">llvm/Transforms/Instrumentation/AddressSanitizer.h</a>&quot;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h">llvm/ADT/DenseMap.h</a>&quot;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h">llvm/ADT/SmallPtrSet.h</a>&quot;</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h">llvm/ADT/Statistic.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h">llvm/ADT/StringExtras.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/twine-h">llvm/ADT/Twine.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/memorybuiltins-h">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/stacksafetyanalysis-h">llvm/Analysis/StackSafetyAnalysis.h</a>&quot;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h">llvm/Analysis/ValueTracking.h</a>&quot;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/binaryformat/macho-h">llvm/BinaryFormat/MachO.h</a>&quot;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/demangle-h">llvm/Demangle/Demangle.h</a>&quot;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h">llvm/IR/Argument.h</a>&quot;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h">llvm/IR/Attributes.h</a>&quot;</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h">llvm/IR/BasicBlock.h</a>&quot;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/comdat-h">llvm/IR/Comdat.h</a>&quot;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h">llvm/IR/Constant.h</a>&quot;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h">llvm/IR/Constants.h</a>&quot;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/dibuilder-h">llvm/IR/DIBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h">llvm/IR/DataLayout.h</a>&quot;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfometadata-h">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debugloc-h">llvm/IR/DebugLoc.h</a>&quot;</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h">llvm/IR/DerivedTypes.h</a>&quot;</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/ehpersonalities-h">llvm/IR/EHPersonalities.h</a>&quot;</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/function-h">llvm/IR/Function.h</a>&quot;</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalalias-h">llvm/IR/GlobalAlias.h</a>&quot;</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h">llvm/IR/GlobalValue.h</a>&quot;</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h">llvm/IR/GlobalVariable.h</a>&quot;</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h">llvm/IR/IRBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h">llvm/IR/InlineAsm.h</a>&quot;</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h">llvm/IR/InstVisitor.h</a>&quot;</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h">llvm/IR/InstrTypes.h</a>&quot;</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h">llvm/IR/Instruction.h</a>&quot;</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h">llvm/IR/Instructions.h</a>&quot;</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h">llvm/IR/IntrinsicInst.h</a>&quot;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h">llvm/IR/Intrinsics.h</a>&quot;</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h">llvm/IR/LLVMContext.h</a>&quot;</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h">llvm/IR/MDBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/metadata-h">llvm/IR/Metadata.h</a>&quot;</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/module-h">llvm/IR/Module.h</a>&quot;</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/type-h">llvm/IR/Type.h</a>&quot;</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/use-h">llvm/IR/Use.h</a>&quot;</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/value-h">llvm/IR/Value.h</a>&quot;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/mcsectionmacho-h">llvm/MC/MCSectionMachO.h</a>&quot;</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/casting-h">llvm/Support/Casting.h</a>&quot;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h">llvm/Support/MathExtras.h</a>&quot;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h">llvm/TargetParser/Triple.h</a>&quot;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizercommon-h">llvm/Transforms/Instrumentation/AddressSanitizerCommon.h</a>&quot;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizeroptions-h">llvm/Transforms/Instrumentation/AddressSanitizerOptions.h</a>&quot;</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/asanstackframelayout-h">llvm/Transforms/Utils/ASanStackFrameLayout.h</a>&quot;</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h">llvm/Transforms/Utils/Instrumentation.h</a>&quot;</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h">llvm/Transforms/Utils/Local.h</a>&quot;</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/promotememtoreg-h">llvm/Transforms/Utils/PromoteMemToReg.h</a>&quot;</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlightPreprocessor">#include &lt;algorithm&gt;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlightPreprocessor">#include &lt;cassert&gt;</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlightPreprocessor">#include &lt;cstddef&gt;</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlightPreprocessor">#include &lt;cstdint&gt;</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlightPreprocessor">#include &lt;iomanip&gt;</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlightPreprocessor">#include &lt;limits&gt;</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlightPreprocessor">#include &lt;sstream&gt;</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlightPreprocessor">#include &lt;string&gt;</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlightPreprocessor">#include &lt;tuple&gt;</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;asan&quot;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96" lineLink="#a0825e9eeff024102856e9a30f41bb386"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a> = 3;</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97" lineLink="#a7221cab4eb5396f920c432650580815d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a> = 1ULL &lt;&lt; 29;</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98" lineLink="#a52e0a578af8418ff6a63a4b03d385012"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a> = 1ULL &lt;&lt; 44;</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99" lineLink="#a8d1135f2ee91e5d486647a37f8074dcc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a> =</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlight">    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max();</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101" lineLink="#ad4d2d4a3e49a33b6eb2f2d7696f73284"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> = 0x7FFFFFFF;  </span><span class="doxyHighlightComment">// &lt; 2G.</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102" lineLink="#a1bb96936cdfae1973dcbae7e9a6e9afa"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> = ~0xFFFULL;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103" lineLink="#a924de63e7606463a6405a1a7276fa33a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a> = 0xdffffc0000000000;</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104" lineLink="#ac71a9d13684166ebbd2dc2fae6ada036"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 44;</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105" lineLink="#a714b1c9d5243d23282452c2ec154bf64"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 52;</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106" lineLink="#ab6f29d0b2de1b74e731e1efbc653f844"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a> = 1ULL &lt;&lt; 29;</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107" lineLink="#acda94f3cd0782a06ec8c4035ab6a6ba0"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a> = 0x0aaa0000;</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108" lineLink="#a9141b9519404ab70f9def3fb4e44cbf6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 37;</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109" lineLink="#afe1c55791cd733a93d250395352569df"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 36;</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110" lineLink="#aa8e5653e53fa32049d96cebcd3564b15"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111" lineLink="#a2959b7316b7440ef0479456a1f224f95"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112" lineLink="#a19c339ea0be179f2cd9a609083711b2d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113" lineLink="#a8749ec5f43deb3d657141795f9dbb210"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114" lineLink="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 47;</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115" lineLink="#a8a860b5741776f43c99ab75b0660e59a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a> = 0xdffff7c000000000;</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116" lineLink="#ad16c0ca942afbe549bcfa4f06b2eae12"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117" lineLink="#ad92d9ebd9f88c5f9fe134d9e2cd329d9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118" lineLink="#ae705b5638cfef61445fc086ff309257b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a> = 0xdfff900000000000;</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119" lineLink="#a11a7b9f550cc8f2096e2feb0a6e7d77d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 40;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120" lineLink="#adc0285e7406db187db7f4b477b888eca"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a> = 3ULL &lt;&lt; 28;</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121" lineLink="#a40e81ce979aa27fb2789c389719b1d7b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a> = 0;</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlightComment">// The shadow memory space is dynamically allocated.</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124" lineLink="#a3f40cbca316fdd29c447fc96d7373109"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126" lineLink="#afb368a1d773581543db2f164baf7fbdf"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> = 1 &lt;&lt; 6;   </span><span class="doxyHighlightComment">// 64B</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127" lineLink="#aaf5f0e81eb832fe48c6dc33db623a03c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a> = 1 &lt;&lt; 16;  </span><span class="doxyHighlightComment">// 64K</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128" lineLink="#abd89ac2b95ec4f9f9b87cf28f156322d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uintptr&#95;t <a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a> = 0x41B58AB3;</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129" lineLink="#af955cd27ba6d5632e02d374282c4afae"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uintptr&#95;t <a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a> = 0x45E0360E;</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131" lineLink="#aad3e6eabecd50c9664b21071407c2267"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;asan.module&#95;ctor&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132" lineLink="#a8bcb2cf7d004c924b63f1a9d0dfa2847"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;asan.module&#95;dtor&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133" lineLink="#a602962e4e3026aa808d7a026ef6b300f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a> = 1;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlightComment">// On Emscripten, the system needs more than one priorities for constructors.</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135" lineLink="#a79c217bbf91742b02797b0c426674dfe"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a> = 50;</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136" lineLink="#aec7167f84edee7a2c075e1571bab8d8e"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;report&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137" lineLink="#aa9fe31e1276128051e55a18579091356"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;register&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="#a5b0465f40b3ec7684fdc252ed5e01ed4"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139" lineLink="#a6756689ed60e2d83d51a12e960517e19"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140" lineLink="#ab8a40552186ca947c5570a1e9895dcd3"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a>&#91;&#93; =</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142" lineLink="#aea03f393f423aab3e80a1bf6ee59a3b1"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143" lineLink="#a652aabcf278acb60ed86440a1489bcf0"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144" lineLink="#af9f3c07d9fc38e3b9ac12f6c4386dad5"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145" lineLink="#a61e87da131e672072ffa897d6c3f954e"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146" lineLink="#a361b5f11d7b296279f45007be01c2913"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;init&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147" lineLink="#ae54fd57142396b1edba3f62247d5a176"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148" lineLink="#a2fa18fb24f9feafbd0d0fc1107b131ed"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="#adac38b7a834c74bc8d152337671c1ab7"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150" lineLink="#afa4db1804122bafade11f423f5a483f5"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151" lineLink="#acba05c6df950ff8712fa2194a2b83c87"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> = 10;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152" lineLink="#a311ac214c991fe60e693899d731e311e"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153" lineLink="#a7827de59665600c15eebeb456731627c"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a>&#91;&#93; =</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155" lineLink="#a21dae1495bdaa52cff0efeff2bb65742"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156" lineLink="#a476e7801fbfecbea19d62de9a27e71ae"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157" lineLink="#a6e54679eb7c171172210d5898f5e2ebc"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158" lineLink="#a89f98c73fceabd5b3e0c1862003f7b6a"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;sancov&#95;gen&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159" lineLink="#a2bec6b8d5a441c0918bbdd1be9df32b3"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160" lineLink="#a9de96b20be410e7c2014587a070465d4"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161" lineLink="#aa6ae2abfa7c1477f42010a614aa2e20b"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlightComment">// ASan version script has &#95;&#95;asan&#95;&#42; wildcard. Triple underscore prevents a</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlightComment">// linker (gold) warning about attempting to export a local symbol.</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165" lineLink="#aae785da38ce552b3ab47791e9abb9fd9"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167" lineLink="#a27766fe2066043a2c55cc0becdcdd9f1"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a>&#91;&#93; =</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="#a72f82be6c1dbdf567e8dd11251e87000"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a>&#91;&#93; =</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173" lineLink="#addbdc1734f12bc122f2b204052f426df"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174" lineLink="#afd65995ac50736f33beadc3c0549ce0b"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176" lineLink="#a2121416d2692ea7ec2c9522291600a19"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;llvm.amdgcn.is.shared&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177" lineLink="#ae6098b64cdbf4d809b1f3f86a866c56a"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;llvm.amdgcn.is.private&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178" lineLink="#ae7f00801ef2ef87699661f1dca513b52"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;llvm.amdgcn.ballot.i64&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179" lineLink="#a0942316ad508b030eec9f8ac3104b964"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;llvm.amdgcn.unreachable&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlightComment">// Accesses sizes are powers of two: 1, 2, 4, 8, 16</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182" lineLink="#aa62a4d0672bab180dd339cda25b23b2e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184" lineLink="#a6da7b2b680f4518d9d5545432e701ba1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> = 32;</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlightComment">// ASanAccessInfo implementation constants.</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187" lineLink="#ae065abe1628e445fa1a1a378d8ee0648"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a> = 0;</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188" lineLink="#a230c7d7ca3e0e9088b709d8ee861c23c"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a> = 0x1;</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189" lineLink="#a9bd091ccb08f4fcaef69d6c5f956572a"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a> = 1;</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190" lineLink="#a095b4c60115113ef59a28ffb3a817422"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a> = 0xf;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191" lineLink="#a19deb83e797e941c8400caa50f648a50"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a> = 5;</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192" lineLink="#a4ac0cc78d7c86822b81df1b7db4338bc"><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a> = 0x1;</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlightComment">// Command-line flags.</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196" lineLink="#aa09777d1507554d2873581bb83442022"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>(</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-kernel&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable KernelAddressSanitizer instrumentation&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200" lineLink="#ab07c89b5ab3621d59817baefdae128cb"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>(</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-recover&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable recovery mode (continue-after-error).&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205" lineLink="#a2a1656d1f4ddeb386daf49396b178ab3"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a>(</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-guard-against-version-mismatch&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Guard against compiler/runtime version mismatch.&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlightComment">// This flag may need to be replaced with -f&#91;no-&#93;asan-reads.</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211" lineLink="#adc5cd4695253418937546218dbe26922"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-instrument-reads&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><span class="doxyHighlight">                                       <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;instrument read instructions&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">                                       <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215" lineLink="#a2df764565c5764a2af608a819cfa2540"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a>(</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-instrument-writes&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;instrument write instructions&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220" lineLink="#af9d879b52ddf70fb1fe578bd5d1c508e"><span class="doxyHighlight">    <a href="#af9d879b52ddf70fb1fe578bd5d1c508e">ClUseStackSafety</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-use-stack-safety&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">                     <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use Stack Safety analysis results&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">                     <a href="/docs/api/namespaces/llvm/cl/#a492234b10e0c5918d72a3a15a6f0fa6eaee3d7c816c2a04f9f49c4aa194ef25b0">cl::Optional</a>);</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224" lineLink="#a98491b92a3cd11f11c29f752625b136d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a>(</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-instrument-atomics&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;instrument atomic instructions (rmw, cmpxchg)&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230" lineLink="#a33190b8a2d49613b79d5374db635dd0a"><span class="doxyHighlight">    <a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-instrument-byval&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;instrument byval call arguments&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234" lineLink="#acfc2efa648ba005caa42cf6f28d82757"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a>(</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-always-slow-path&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;use instrumentation with slow path for all accesses&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239" lineLink="#a25d1ca975f48d54e4290d63829f35a95"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a>(</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-force-dynamic-shadow&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Load shadow address into a local variable for each function&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245" lineLink="#ae3d5d96c349d9c866c3641bbadc0554b"><span class="doxyHighlight">    <a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-with-ifunc&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">                <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Access dynamic shadow through an ifunc global on &quot;</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">                         </span><span class="doxyHighlightStringLiteral">&quot;platforms that support this&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">                <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250" lineLink="#a63147f939444e77f3a294dc59c2939ba"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a>(</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-with-ifunc-suppress-remat&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Suppress rematerialization of dynamic shadow address by passing &quot;</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;it through inline asm in prologue.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlightComment">// This flag limits the number of instructions to be instrumented</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlightComment">// in any given BB. Normally, this should be set to unlimited (INT&#95;MAX),</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlightComment">// but due to http://llvm.org/bugs/show&#95;bug.cgi?id=12652 we temporary</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlightComment">// set it to 10000</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260" lineLink="#af7099fa6660e94761e7f5b525b330bb2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a>(</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-max-ins-per-bb&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(10000),</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;maximal number of instructions to instrument in any given BB&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlightComment">// This flag may need to be replaced with -f&#91;no&#93;asan-stack.</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266" lineLink="#a9123bbb6c01ba4b0e0ef3547a5132cd1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-stack&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Handle stack memory&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">                             <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268" lineLink="#a96c36d2e9698f2974735d30dfea6893c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint32&#95;t&gt;</a> <a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a>(</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-max-inline-poisoning-size&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;Inline shadow poisoning for blocks up to the given size in bytes.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(64));</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274" lineLink="#ab96ca2732f7eaecb2e762c9c754f7b37"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanDetectStackUseAfterReturnMode&gt;</a> <a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a>(</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-use-after-return&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Sets the mode of detection for stack-use-after-return.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda6e7b34fa59e1bd229b207892956dc41c">AsanDetectStackUseAfterReturnMode::Never</a>, </span><span class="doxyHighlightStringLiteral">&quot;never&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Never detect stack use after return.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>, </span><span class="doxyHighlightStringLiteral">&quot;runtime&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">            </span><span class="doxyHighlightStringLiteral">&quot;Detect stack use after return if &quot;</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">            </span><span class="doxyHighlightStringLiteral">&quot;binary flag &#39;ASAN&#95;OPTIONS=detect&#95;stack&#95;use&#95;after&#95;return&#39; is set.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a>, </span><span class="doxyHighlightStringLiteral">&quot;always&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Always detect stack use after return.&quot;</span><span class="doxyHighlight">)),</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>));</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288" lineLink="#a3ad807be99d9d4ce4b6a2038719b015c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-redzone-byval-args&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Create redzones for byval &quot;</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">                                                 </span><span class="doxyHighlightStringLiteral">&quot;arguments (extra copy &quot;</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">                                                 </span><span class="doxyHighlightStringLiteral">&quot;required)&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><span class="doxyHighlight">                                        <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294" lineLink="#a9a4fc66faeab43a236796f382e142af4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-use-after-scope&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">                                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Check stack-use-after-scope&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">                                     <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlightComment">// This flag may need to be replaced with -f&#91;no&#93;asan-globals.</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299" lineLink="#a37e75a212ee37baa76869a8d0195d9e6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-globals&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight">                               <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Handle global objects&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlight">                               <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303" lineLink="#ad7ffe665351fede3f8025e2cb84ccc83"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-initialization-order&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlight">                                    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Handle C++ initializer order&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlight">                                    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307" lineLink="#afe56a2bdf58d01cf437e1abba61e2830"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a>(</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-detect-invalid-pointer-pair&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Instrument &lt;, &lt;=, &gt;, &gt;=, - with pointer operands&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312" lineLink="#a7988b8281b1972c35eb5833f8c23a1a3"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a>(</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-detect-invalid-pointer-cmp&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Instrument &lt;, &lt;=, &gt;, &gt;= with pointer operands&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317" lineLink="#a8398c67027004edc3649be6b6db60eab"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a>(</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-detect-invalid-pointer-sub&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Instrument - operations with pointer operands&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322" lineLink="#adbb45684e8c1f7cc79db81a276e70471"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a>(</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-realign-stack&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Realign stack to the value of this flag (power of two)&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(32));</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327" lineLink="#a7b6dcf17e1b173746a4939b677ca1fb0"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a>(</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-instrumentation-with-call-threshold&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;If the function being instrumented contains more than &quot;</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;this number of memory accesses, use callbacks instead of &quot;</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;inline checks (-1 means never use callbacks).&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(7000));</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334" lineLink="#a27774720f5060297840f5e603fba95f1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a>(</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-memory-access-callback-prefix&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Prefix for memory access callbacks&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339" lineLink="#ae49da4e77feeb6c094e35e7c86f5613e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a>(</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-kernel-mem-intrinsic-prefix&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use prefix for memory intrinsics in KASAN mode&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345" lineLink="#aacabf2f74c684a07a8d7b499d252f8c9"><span class="doxyHighlight">    <a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-instrument-dynamic-allocas&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">                               <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;instrument dynamic allocas&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlight">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349" lineLink="#aeff4047a82cefd8108f2bc7263e924fa"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a>(</span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-skip-promotable-allocas&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Do not instrument promotable allocas&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354" lineLink="#aca33036eb9649523a6345787acc33d29"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanCtorKind&gt;</a> <a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a>(</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-constructor-kind&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Sets the ASan constructor kind&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a6adf97f83acf6453d4a6a4b1070f3754">AsanCtorKind::None</a>, </span><span class="doxyHighlightStringLiteral">&quot;none&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;No constructors&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlight">               <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>, </span><span class="doxyHighlightStringLiteral">&quot;global&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><span class="doxyHighlight">                          </span><span class="doxyHighlightStringLiteral">&quot;Use global constructors&quot;</span><span class="doxyHighlight">)),</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlightComment">// These flags allow to change the shadow mapping.</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlightComment">// The shadow mapping looks like</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlightComment">//    Shadow = (Mem &gt;&gt; scale) + offset</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365" lineLink="#a9d0c59216cf72992129adb73dc73ec65"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-mapping-scale&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;scale of asan shadow mapping&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><span class="doxyHighlight">                                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a></span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370" lineLink="#aebb74a0c8e6baa32b77d0782e9e911dc"><span class="doxyHighlight">    <a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-mapping-offset&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlight">                    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;offset of asan shadow mapping &#91;EXPERIMENTAL&#93;&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlightComment">// Optimization flags. Not user visible, used mostly for testing</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlightComment">// and benchmarking the tool.</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377" lineLink="#a6d7586f09e72a8d0b38a7b28ce03068c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-opt&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Optimize instrumentation&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">                           <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380" lineLink="#a53fdfe303964c0943c25d294cd1cf193"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-optimize-callbacks&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">                                         <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Optimize callbacks&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlight">                                         <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384" lineLink="#ab320a8dd5d6290c1e021de274df4c809"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a>(</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-opt-same-temp&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Instrument the same temp just once&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388" lineLink="#abd03cce0a222ad0e49b3074b9258f894"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-opt-globals&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">                                  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Don&#39;t instrument scalar globals&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">                                  <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392" lineLink="#ab6e8695312b588ef5a110f33c9beb09c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a>(</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-opt-stack&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Don&#39;t instrument scalar stack variables&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396" lineLink="#ab65506fece0b5302fe804c49e6580446"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a>(</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-stack-dynamic-alloca&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use dynamic alloca to represent stack variables&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401" lineLink="#a8769662e83dc63443d2cfa743cd8407b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint32&#95;t&gt;</a> <a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a>(</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-force-experiment&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Force optimization experiment (for testing)&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407" lineLink="#a108a44e27f64b25d5be99eab0c12b840"><span class="doxyHighlight">    <a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-use-private-alias&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use private aliases for global variables&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412" lineLink="#a7499c29bb36dd906803322453ac406ad"><span class="doxyHighlight">    <a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-use-odr-indicator&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use odr indicators to improve ODR reporting&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417" lineLink="#aa612bd13cbe0dc1e574383f4eddc0760"><span class="doxyHighlight">    <a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-globals-live-support&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use linker features to support dead &quot;</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">                            </span><span class="doxyHighlightStringLiteral">&quot;code stripping of globals&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlight">                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlightComment">// This is on by default even though there is a bug in gold:</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlightComment">// https://sourceware.org/bugzilla/show&#95;bug.cgi?id=19002</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425" lineLink="#aeded18588e9deea14f9c30eb995da5bb"><span class="doxyHighlight">    <a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-with-comdat&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Place ASan constructors in comdat sections&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429" lineLink="#a2ca87f4ce47405a2ebd8d6e0ab259d65"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanDtorKind&gt;</a> <a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a>(</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;asan-destructor-kind&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Sets the ASan destructor kind. The default is to use the value &quot;</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;provided to the pass constructor&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>, </span><span class="doxyHighlightStringLiteral">&quot;none&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;No destructors&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">               <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4cc6684df7b4a92b1dec6fce3264fac8">AsanDtorKind::Global</a>, </span><span class="doxyHighlightStringLiteral">&quot;global&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">                          </span><span class="doxyHighlightStringLiteral">&quot;Use global destructors&quot;</span><span class="doxyHighlight">)),</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlightComment">// Debug flags.</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440" lineLink="#afcea04380058a94008cda9fc41056a16"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#afcea04380058a94008cda9fc41056a16">ClDebug</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-debug&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;debug&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">                            <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443" lineLink="#a635e0541e4c0f8a4c5faba9e9c94aebc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-debug-stack&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;debug stack&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">                                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446" lineLink="#aa14af85369bdb6b331cd00f499d4cf63"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-debug-func&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Debug func&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449" lineLink="#a0dd632512536154ac3d012e7065f2bcf"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-debug-min&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Debug min inst&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlight">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(-1));</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452" lineLink="#a8052781b69a1a9e2f58c190a15b67628"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a>(</span><span class="doxyHighlightStringLiteral">&quot;asan-debug-max&quot;</span><span class="doxyHighlight">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Debug max inst&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(-1));</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455" lineLink="#a70700f8036b11342dbf363f4f81f529f"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumInstrumentedReads, </span><span class="doxyHighlightStringLiteral">&quot;Number of instrumented reads&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456" lineLink="#a8910bcb5acc6a97247337ab859f77190"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumInstrumentedWrites, </span><span class="doxyHighlightStringLiteral">&quot;Number of instrumented writes&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457" lineLink="#a53ff0da5ad7ad5f867f88b745a5afd21"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumOptimizedAccessesToGlobalVar,</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">          </span><span class="doxyHighlightStringLiteral">&quot;Number of optimized accesses to global vars&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459" lineLink="#aabbeec619cf71418f7195e062894d2dc"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumOptimizedAccessesToStackVar,</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">          </span><span class="doxyHighlightStringLiteral">&quot;Number of optimized accesses to stack vars&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462" lineLink="/docs/api/namespaces/anonymous-addresssanitizer-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlightComment">/// This struct defines the shadow mapping using the rule:</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlightComment">///   shadow = (mem &gt;&gt; Scale) ADD-or-OR Offset.</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlightComment">/// If InGlobal is true, then</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlightComment">///   extern char &#95;&#95;asan&#95;shadow&#91;&#93;;</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlightComment">///   shadow = (mem &gt;&gt; Scale) + &amp;&#95;&#95;asan&#95;shadow</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a> &#123;</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a461403dafb1ef7bdd929d3309ac48aaa"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a461403dafb1ef7bdd929d3309ac48aaa">Scale</a>;</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a4675b06d40b381d3a2122279ba6920bf"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a4675b06d40b381d3a2122279ba6920bf">Offset</a>;</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a49fd7274949c135a3d2191e8cafeda4d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a49fd7274949c135a3d2191e8cafeda4d">OrShadowOffset</a>;</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a115362cbcbbe17b578d4ec92786fba12"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a115362cbcbbe17b578d4ec92786fba12">InGlobal</a>;</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478" lineLink="#ac4b45ab450a043187e92eaace7d62018"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> ShadowMapping <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LongSize,</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsKasan) &#123;</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAndroid = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a3f3873f607a36e40241082727fef44db">isAndroid</a>();</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsIOS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac36bf25c234d956997781778c866808e">isiOS</a>() || TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac2eddca981f187178a53969d88465b4c">isWatchOS</a>() ||</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">               TargetTriple.<a href="/docs/api/classes/llvm/triple/#a1f396e16b49f3277fc279f94a12d03a5">isDriverKit</a>();</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsMacOS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#aa6a7d5d218ef0d2334fe24eaf997bbb6">isMacOSX</a>();</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFreeBSD = TargetTriple.<a href="/docs/api/classes/llvm/triple/#aa98a01c1d72fde0f87823d204dc98334">isOSFreeBSD</a>();</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsNetBSD = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a3d98f3cc4fe2adddfa98dc0dbee55bdb">isOSNetBSD</a>();</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsPS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#acd9044b8fc48fe6073b88c278aa12d28">isPS</a>();</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLinux = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a898af817f450422b11443c35c99e64da">isOSLinux</a>();</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsPPC64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993">Triple::ppc64</a> ||</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight">                 TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46">Triple::ppc64le</a>;</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsSystemZ = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>;</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsX86&#95;64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>;</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsMIPSN32ABI = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a47bfd723026a27a754135ac44f10b9b8">isABIN32</a>();</span></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsMIPS32 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a73717ef7418a714f20be268c55a2c19e">isMIPS32</a>();</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsMIPS64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a52f9355613c6f3388d5761349926d835">isMIPS64</a>();</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsArmOrThumb = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a846115743c5cbbf80216168ad22f906c">isARM</a>() || TargetTriple.<a href="/docs/api/classes/llvm/triple/#a17b2679f91f697a4ffe46b872152e25b">isThumb</a>();</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAArch64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aee7bfdb86a0614afb9b44615e3e652d3">Triple::aarch64</a> ||</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">                   TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a6d5df0cfd7a0b0c0854555554396efd9">Triple::aarch64&#95;be</a>;</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoongArch64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a66a1a1858e17b6bcfcbbb1d5229d275e">isLoongArch64</a>();</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsRISCV64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154ae4763cb7c05a2a59ce27d51040bf4b08">Triple::riscv64</a>;</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWindows = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a7736bfc4c1afef875ecf02f2a7701fe3">isOSWindows</a>();</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFuchsia = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ae891092a64f3b737dcba557a8450587c">isOSFuchsia</a>();</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsEmscripten = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac044f740fee04796ffe5ba17fdc3fa0c">isOSEmscripten</a>();</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAMDGPU = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a9318bd992483581cc335e1a33782ea45">isAMDGPU</a>();</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">  ShadowMapping Mapping;</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">  Mapping.Scale = <a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a>;</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>.getNumOccurrences() &gt; 0) &#123;</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">    Mapping.Scale = <a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>;</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LongSize == 32) &#123;</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsAndroid)</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsMIPSN32ABI)</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">      Mapping.Offset = <a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a>;</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsMIPS32)</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">      Mapping.Offset = <a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a>;</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFreeBSD)</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">      Mapping.Offset = <a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a>;</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsNetBSD)</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">      Mapping.Offset = <a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a>;</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsIOS)</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlight">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWindows)</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">      Mapping.Offset = <a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a>;</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsEmscripten)</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><span class="doxyHighlight">      Mapping.Offset = <a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a>;</span></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">      Mapping.Offset = <a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a>;</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;  </span><span class="doxyHighlightComment">// LongSize == 64</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Fuchsia is always PIE, which means that the beginning of the address</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// space is always available.</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFuchsia)</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">      Mapping.Offset = 0;</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsPPC64)</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">      Mapping.Offset = <a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsSystemZ)</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">      Mapping.Offset = <a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFreeBSD &amp;&amp; IsAArch64)</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">        Mapping.Offset = <a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFreeBSD &amp;&amp; !IsMIPS64) &#123;</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsKasan)</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">        Mapping.Offset = <a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">        Mapping.Offset = <a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsNetBSD) &#123;</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsKasan)</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">        Mapping.Offset = <a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">        Mapping.Offset = <a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsPS)</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlight">      Mapping.Offset = <a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsLinux &amp;&amp; IsX86&#95;64) &#123;</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsKasan)</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">        Mapping.Offset = <a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">        Mapping.Offset = (<a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> &amp;</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">                          (<a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> &lt;&lt; Mapping.Scale));</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWindows &amp;&amp; IsX86&#95;64) &#123;</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">      Mapping.Offset = <a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a>;</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsMIPS64)</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">      Mapping.Offset = <a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsIOS)</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsMacOS &amp;&amp; IsAArch64)</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsAArch64)</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">      Mapping.Offset = <a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsLoongArch64)</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlight">      Mapping.Offset = <a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsRISCV64)</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">      Mapping.Offset = <a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a>;</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsAMDGPU)</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">      Mapping.Offset = (<a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> &amp;</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">                        (<a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> &lt;&lt; Mapping.Scale));</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">      Mapping.Offset = <a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a>;</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a>) &#123;</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlight">    Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>.getNumOccurrences() &gt; 0) &#123;</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">    Mapping.Offset = <a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// OR-ing shadow offset if more efficient (at least on x86) if the offset</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is a power of two, but on ppc64 and loongarch64 we have to use add since</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the shadow offset is not necessarily 1/8-th of the address space.  On</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// SystemZ, we could OR the constant in a single instruction, but it&#39;s more</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// efficient to load it once and use indexed addressing.</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">  Mapping.OrShadowOffset = !IsAArch64 &amp;&amp; !IsPPC64 &amp;&amp; !IsSystemZ &amp;&amp; !IsPS &amp;&amp;</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">                           !IsRISCV64 &amp;&amp; !IsLoongArch64 &amp;&amp;</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">                           !(Mapping.Offset &amp; (Mapping.Offset - 1)) &amp;&amp;</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">                           Mapping.Offset != <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAndroidWithIfuncSupport =</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">      IsAndroid &amp;&amp; !TargetTriple.<a href="/docs/api/classes/llvm/triple/#a13b920f74d7ae331cfd2740a790de541">isAndroidVersionLT</a>(21);</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">  Mapping.InGlobal = <a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a> &amp;&amp; IsAndroidWithIfuncSupport &amp;&amp; IsArmOrThumb;</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Mapping;</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606" lineLink="/docs/api/namespaces/llvm/#aef7ea18a6637c39986a0da770872af6d"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aef7ea18a6637c39986a0da770872af6d">getAddressSanitizerParams</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LongSize,</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsKasan, uint64&#95;t &#42;ShadowBase,</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> &#42;MappingScale, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#42;OrShadowOffset) &#123;</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, IsKasan);</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">  &#42;ShadowBase = Mapping.Offset;</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><span class="doxyHighlight">  &#42;MappingScale = Mapping.Scale;</span></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">  &#42;OrShadowOffset = Mapping.OrShadowOffset;</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615" lineLink="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d">ASanAccessInfo::ASanAccessInfo</a>(int32&#95;t <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>)</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlight">    : <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>),</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a>) &amp; <a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a>),</span></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a>) &amp; <a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a>),</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a>) &amp; <a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a>) &#123;&#125;</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621" lineLink="/docs/api/structs/llvm/asanaccessinfo/#a44344ba0968ab6dc77b69cfd881e9595"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d">ASanAccessInfo::ASanAccessInfo</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>,</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlight">                               uint8&#95;t <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>)</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><span class="doxyHighlight">    : <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a> &lt;&lt; <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a>) +</span></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">             (<a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a> &lt;&lt; <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a>) +</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlight">             (<a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a> &lt;&lt; <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a>)),</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>), <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>),</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>) &#123;&#125;</span></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace llvm</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631" lineLink="#a4ae843502b417fca05b0d9b1ccd9df94"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> uint64&#95;t <a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> MappingScale) &#123;</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Redzone used for stack and globals is at least 32 bytes.</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For scales 6 and 7, the redzone has to be 64 and 128 bytes respectively.</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::max(32U, 1U &lt;&lt; MappingScale);</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637" lineLink="#a30ad890949cdfd6777919b71f4d09dfe"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> uint64&#95;t <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(<a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple) &#123;</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac044f740fee04796ffe5ba17fdc3fa0c">isOSEmscripten</a>()) &#123;</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a>;</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a>;</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645" lineLink="#a2cd6efecbc36daba036d332c2556b668"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> suffix) &#123;</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a>(<a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>) + suffix;</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlightComment">/// Helper RAII class to post-process inserted asan runtime calls during a</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlightComment">/// pass on a single Function. Upon end of scope, detects and applies the</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlightComment">/// required funclet OpBundle.</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8">RuntimeCallInserter</a> &#123;</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;OwnerFn = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> TrackInsertedCalls = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;CallInst &#42;&gt;</a> InsertedCalls;</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8">RuntimeCallInserter</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn) : OwnerFn(&amp;Fn) &#123;</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Fn.<a href="/docs/api/classes/llvm/function/#a6a0f6312963ee6fb0969243607174949">hasPersonalityFn</a>()) &#123;</span></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">      auto Personality = classifyEHPersonality(Fn.getPersonalityFn());</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">      if (isScopedEHPersonality(Personality))</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlight">        TrackInsertedCalls = true;</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#af2c1b11e25a6289f7eca7c11acd304dc"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#af2c1b11e25a6289f7eca7c11acd304dc">~RuntimeCallInserter</a>() &#123;</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (InsertedCalls.empty())</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TrackInsertedCalls &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Calls were wrongly tracked&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;BasicBlock &#42;, ColorVector&gt;</a> BlockColors = <a href="/docs/api/namespaces/llvm/#a3a3a97fed79c86bf242b0f090e1cb2e6">colorEHFunclets</a>(&#42;OwnerFn);</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI : InsertedCalls) &#123;</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB = CI-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>();</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BB &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Instruction doesn&#39;t belong to a BasicBlock&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>() == OwnerFn &amp;&amp;</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Instruction doesn&#39;t belong to the expected Function!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac16c24df0637600996c9c6081da170a2">ColorVector</a> &amp;Colors = BlockColors&#91;BB&#93;;</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// funclet opbundles are only valid in monochromatic BBs.</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Note that unreachable BBs are seen as colorless by colorEHFunclets()</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// and will be DCE&#39;ed later.</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#a9dc659b723e6725130ad354ed821d400">empty</a>())</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#aac784c7664f3f6b8076756c6fb0eed74">size</a>() != 1) &#123;</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><span class="doxyHighlight">        OwnerFn-&gt;getContext().emitError(</span></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlight">            </span><span class="doxyHighlightStringLiteral">&quot;Instruction&#39;s BasicBlock is not monochromatic&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Color = Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#a3a26404d33061e8aaeab39c490181389">front</a>();</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> EHPadIt = Color-&gt;getFirstNonPHIIt();</span></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EHPadIt != Color-&gt;end() &amp;&amp; EHPadIt-&gt;isEHPad()) &#123;</span></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Replace CI with a clone with an added funclet OperandBundle</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#aa97c65466bdd34abda6772dd32eb5d19">OperandBundleDef</a> OB(</span><span class="doxyHighlightStringLiteral">&quot;funclet&quot;</span><span class="doxyHighlight">, &amp;&#42;EHPadIt);</span></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;NewCall = <a href="/docs/api/classes/llvm/callbase/#a70d8ffa4f0ffa07bd736cb74d178d917">CallBase::addOperandBundle</a>(CI, <a href="/docs/api/classes/llvm/llvmcontext/#a44d727ac5fccf852bfb2bae3e06adc9ca8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB&#95;funclet</a>,</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">                                                   OB, CI-&gt;getIterator());</span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">        NewCall-&gt;copyMetadata(&#42;CI);</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><span class="doxyHighlight">        CI-&gt;replaceAllUsesWith(NewCall);</span></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">        CI-&gt;eraseFromParent();</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Callee,</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Value &#42;&gt;</a> Args = &#123;&#125;,</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Name = </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a60a6d6c205f483fa96597a960f3c093b">GetInsertBlock</a>()-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>() == OwnerFn);</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;Inst = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Callee, Args, Name, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TrackInsertedCalls)</span></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">      InsertedCalls.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Inst);</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Inst;</span></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><span class="doxyHighlightComment">/// AddressSanitizer: instrument the code in module to find memory bugs.</span></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#123;</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stacksafetyglobalinfo">StackSafetyGlobalInfo</a> &#42;SSGI,</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">                   </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> InstrumentationWithCallsThreshold,</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">                   uint32&#95;t MaxInlinePoisoningSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CompileKernel = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><span class="doxyHighlight">                   </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseAfterScope = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlight">                   <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> UseAfterReturn =</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><span class="doxyHighlight">                       <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>)</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlight">      : M(M),</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">        CompileKernel(<a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>.getNumOccurrences() &gt; 0 ? <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><span class="doxyHighlight">                                                            : CompileKernel),</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">        Recover(<a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>.getNumOccurrences() &gt; 0 ? <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a> : Recover),</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">        UseAfterScope(UseAfterScope || <a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a>),</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">        UseAfterReturn(<a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a>.getNumOccurrences() ? <a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a></span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">                                                            : UseAfterReturn),</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">        SSGI(SSGI),</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><span class="doxyHighlight">        InstrumentationWithCallsThreshold(</span></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">            <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">                ? <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a></span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlight">                : InstrumentationWithCallsThreshold),</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">        MaxInlinePoisoningSize(<a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">                                   ? <a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a></span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">                                   : MaxInlinePoisoningSize) &#123;</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">    C = &amp;(M.getContext());</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><span class="doxyHighlight">    DL = &amp;M.getDataLayout();</span></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">    LongSize = M.getDataLayout().getPointerSizeInBits();</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">    IntptrTy = <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;C, LongSize);</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">    PtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;C);</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">    Int32Ty = <a href="/docs/api/classes/llvm/type/#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(&#42;C);</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">    TargetTriple = <a href="/docs/api/classes/llvm/triple">Triple</a>(M.getTargetTriple());</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">    Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, this-&gt;CompileKernel);</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(this-&gt;UseAfterReturn != <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda4bbb8f967da6d1a610596d7257179c2b">AsanDetectStackUseAfterReturnMode::Invalid</a>);</span></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/typesize">TypeSize</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734">getAllocaSizeInBytes</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;AI.<a href="/docs/api/classes/llvm/allocainst/#ad92f6c67d55ced3de1569ee791c38679">getAllocationSize</a>(AI.<a href="/docs/api/classes/llvm/instruction/#af65afd02332c4f21c2fab7d217d6600f">getDataLayout</a>());</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlightComment">  /// Check if we want (and can) handle this alloca.</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isInterestingAlloca(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI);</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ignoreAccess(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> getInterestingMemoryOperands(</span></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InterestingMemoryOperand&gt;</a> &amp;Interesting);</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentMop(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</span></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/interestingmemoryoperand">InterestingMemoryOperand</a> &amp;O, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">                     </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentPointerComparisonOrSubtraction(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">                                                <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentAddress(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore,</span></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment,</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlight">                         uint32&#95;t TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls, uint32&#95;t Exp,</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlight">                         <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;instrumentAMDGPUAddress(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns,</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><span class="doxyHighlight">                                       uint32&#95;t TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument);</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;genAMDGPUReportBlock(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover);</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentUnusualSizeOrAlignment(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">                                        uint32&#95;t Exp,</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">                                        <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentMaskedLoadOrStore(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask, <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL,</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Granularity,</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">                                   uint32&#95;t Exp, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;createSlowPathCmp(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong,</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue, uint32&#95;t TypeStoreSize);</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;generateCrashCode(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">                                 </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite, </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessSizeIndex,</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, uint32&#95;t Exp,</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><span class="doxyHighlight">                                 <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentMemIntrinsic(<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;memToShadow(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB);</span></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> suppressInstrumentationSiteForDebug(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> &amp;Instrumented);</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> instrumentFunction(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI);</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> maybeInsertAsanInitAtFunctionEntry(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> maybeInsertDynamicShadowAtFunctionEntry(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> markEscapedLocalAllocas(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e">FunctionStackPoisoner</a>;</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> initializeCallbacks(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI);</span></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> LooksLikeCodeInBug11395(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> GlobalIsLinkerInitialized(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isSafeAccess(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlightComment">  /// Helper to cleanup per-function state.</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight">FunctionStateRAII &#123;</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>;</span></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">    FunctionStateRAII(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>) : <a href="/docs/api/classes/llvm/pass">Pass</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>) &#123;</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;ProcessedAllocas.empty() &amp;&amp;</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;last pass forgot to clear cache&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;LocalDynamicShadow);</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlight">    ~FunctionStateRAII() &#123;</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;LocalDynamicShadow = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;ProcessedAllocas.clear();</span></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/machinecheckdebugify-cpp/#a85892acfa8970627e9bd9c9815f15c25">Module</a> &amp;M;</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">  LLVMContext &#42;C;</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DataLayout &#42;DL;</span></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">  Triple TargetTriple;</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LongSize;</span></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CompileKernel;</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover;</span></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseAfterScope;</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> UseAfterReturn;</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a88ee8e4eea43084bd8964682683da88caa1fa27779242b4902f7ae3bdd5c6d508">Type</a> &#42;IntptrTy;</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a88ee8e4eea43084bd8964682683da88caa1fa27779242b4902f7ae3bdd5c6d508">Type</a> &#42;Int32Ty;</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/pdb/#a33e853ec74d48b1340d1d4bae772d30bae385c38bb67ea909198e13ee23c21028">PointerType</a> &#42;PtrTy;</span></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">  ShadowMapping Mapping;</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">  FunctionCallee AsanHandleNoReturnFunc;</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">  FunctionCallee AsanPtrCmpFunction, AsanPtrSubFunction;</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a> &#42;AsanShadowGlobal;</span></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// These arrays is indexed by AccessIsWrite, Experiment and log2(AccessSize).</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlight">  FunctionCallee AsanErrorCallback&#91;2&#93;&#91;2&#93;&#91;<a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">  FunctionCallee AsanMemoryAccessCallback&#91;2&#93;&#91;2&#93;&#91;<a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// These arrays is indexed by AccessIsWrite and Experiment.</span></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlight">  FunctionCallee AsanErrorCallbackSized&#91;2&#93;&#91;2&#93;;</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><span class="doxyHighlight">  FunctionCallee AsanMemoryAccessCallbackSized&#91;2&#93;&#91;2&#93;;</span></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlight">  FunctionCallee AsanMemmove, AsanMemcpy, AsanMemset;</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> &#42;LocalDynamicShadow = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> StackSafetyGlobalInfo &#42;SSGI;</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><span class="doxyHighlight">  DenseMap&lt;const AllocaInst &#42;, bool&gt; ProcessedAllocas;</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">  FunctionCallee AMDGPUAddressShared;</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlight">  FunctionCallee AMDGPUAddressPrivate;</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> InstrumentationWithCallsThreshold;</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlight">  uint32&#95;t MaxInlinePoisoningSize;</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421">ModuleAddressSanitizer</a> &#123;</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421">ModuleAddressSanitizer</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InsertVersionCheck,</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CompileKernel = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseGlobalsGC = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseOdrIndicator = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><span class="doxyHighlight">                         <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind = <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4cc6684df7b4a92b1dec6fce3264fac8">AsanDtorKind::Global</a>,</span></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">                         <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind = <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">      : M(M),</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">        CompileKernel(<a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>.getNumOccurrences() &gt; 0 ? <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">                                                            : CompileKernel),</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">        InsertVersionCheck(<a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><span class="doxyHighlight">                               ? <a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a></span></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">                               : InsertVersionCheck),</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">        Recover(<a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>.getNumOccurrences() &gt; 0 ? <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a> : Recover),</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">        UseGlobalsGC(UseGlobalsGC &amp;&amp; <a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a> &amp;&amp; !this-&gt;CompileKernel),</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Enable aliases as they should have no downside with ODR indicators.</span></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">        UsePrivateAlias(<a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><span class="doxyHighlight">                            ? <a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a></span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><span class="doxyHighlight">                            : UseOdrIndicator),</span></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">        UseOdrIndicator(<a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">                            ? <a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a></span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">                            : UseOdrIndicator),</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Not a typo: ClWithComdat is almost completely pointless without</span></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// ClUseGlobalsGC (because then it only works on modules without</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// globals, which are rare); it is a prerequisite for ClUseGlobalsGC;</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// and both suffer from gold PR19002 for which UseGlobalsGC constructor</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// argument is designed as workaround. Therefore, disable both</span></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// ClWithComdat and ClUseGlobalsGC unless the frontend says it&#39;s ok to</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// do globals-gc.</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">        UseCtorComdat(UseGlobalsGC &amp;&amp; <a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a> &amp;&amp; !this-&gt;CompileKernel),</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">        DestructorKind(DestructorKind),</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">        ConstructorKind(<a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a>.getNumOccurrences() &gt; 0</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><span class="doxyHighlight">                            ? <a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a></span></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlight">                            : ConstructorKind) &#123;</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"><span class="doxyHighlight">    C = &amp;(M.getContext());</span></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LongSize = M.getDataLayout().getPointerSizeInBits();</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">    IntptrTy = <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;C, LongSize);</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">    PtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;C);</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><span class="doxyHighlight">    TargetTriple = <a href="/docs/api/classes/llvm/triple">Triple</a>(M.getTargetTriple());</span></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><span class="doxyHighlight">    Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, this-&gt;CompileKernel);</span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a> != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>)</span></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">      this-&gt;DestructorKind = <a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a>;</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(this-&gt;DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>);</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> instrumentModule();</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> initializeCallbacks();</span></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentGlobals(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#42;CtorComdat);</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> InstrumentGlobalsCOFF(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> instrumentGlobalsELF(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers,</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string &amp;UniqueModuleId);</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> InstrumentGlobalsMachO(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><span class="doxyHighlight">  InstrumentGlobalsWithMetadataArray(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;CreateMetadataGlobal(<a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer,</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/stringref">StringRef</a> OriginalName);</span></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> SetComdatForGlobalMetadata(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>,</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><span class="doxyHighlight">                                  <a href="/docs/api/classes/llvm/stringref">StringRef</a> InternalSuffix);</span></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CreateAsanModuleDtor();</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;getExcludedAliasedGlobal(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalalias">GlobalAlias</a> &amp;GA) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> shouldInstrumentGlobal(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ShouldUseMachOGlobalsSection() </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> getGlobalMetadataSection() </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> poisonOneInitializer(<a href="/docs/api/classes/llvm/function">Function</a> &amp;GlobalInit);</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> createInitializerPoisonCalls();</span></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">  uint64&#95;t getMinRedzoneSizeForGlobal()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a>(Mapping.Scale);</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><span class="doxyHighlight">  uint64&#95;t getRedzoneSizeForGlobal(uint64&#95;t SizeInBytes) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> GetAsanVersion() </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;getOrCreateModuleName();</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;M;</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CompileKernel;</span></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InsertVersionCheck;</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover;</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseGlobalsGC;</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UsePrivateAlias;</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseOdrIndicator;</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCtorComdat;</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind;</span></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind;</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy;</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlight">  <a href="/docs/api/classes/pointertype">PointerType</a> &#42;PtrTy;</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>;</span></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple;</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><span class="doxyHighlight">  ShadowMapping Mapping;</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanPoisonGlobals;</span></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnpoisonGlobals;</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterGlobals;</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterGlobals;</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterImageGlobals;</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterImageGlobals;</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterElfGlobals;</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterElfGlobals;</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;AsanCtorFunction = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;AsanDtorFunction = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/structs/modulename">ModuleName</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlightComment">// Stack poisoning does not play well with exception handling.</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlightComment">// When an exception is thrown, we essentially bypass the code</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><span class="doxyHighlightComment">// that unpoisones the stack. This is why the run-time library has</span></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlightComment">// to intercept &#95;&#95;cxa&#95;throw (as well as longjmp, etc) and unpoison the entire</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlightComment">// stack in the interceptor. This however does not work inside the</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><span class="doxyHighlightComment">// actual function which catches the exception. Most likely because the</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlightComment">// compiler hoists the load of the shadow value somewhere too high.</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlightComment">// This causes asan to report a non-existing bug on 453.povray.</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><span class="doxyHighlightComment">// It sounds like an LLVM bug.</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af">FunctionStackPoisoner</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instvisitor">InstVisitor</a>&lt;FunctionStackPoisoner&gt; &#123;</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>;</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>;</span></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>;</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/dibuilder">DIBuilder</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>;</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>;</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>;</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>;</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>;</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>;</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>;</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>;</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;<a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1&#93;,</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;<a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1&#93;;</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;0x100&#93; = &#123;&#125;;</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a>;</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a>;</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Stores a place and arguments of poisoning/unpoisoning call for alloca.</span></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a> &#123;</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a2aa2d136a5f88bd6ef779bc192eaf415"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a2aa2d136a5f88bd6ef779bc192eaf415">InsBefore</a>;</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a9140b49802f459a5ce232cdc30c8d2ec"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a9140b49802f459a5ce232cdc30c8d2ec">AI</a>;</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a757b99f85b9693a6e71a6533947242b3"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a757b99f85b9693a6e71a6533947242b3">Size</a>;</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a7305b6a922afe5e3adc4bac32edd92e8"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a7305b6a922afe5e3adc4bac32edd92e8">DoPoison</a>;</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaPoisonCall, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>;</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaPoisonCall, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>;</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 1&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>;</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;IntrinsicInst &#42;, 1&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>;</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af">FunctionStackPoisoner</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>,</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">                        <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>)</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>),</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>(), </span><span class="doxyHighlightComment">/&#42;AllowUnresolved&#42;/</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/false">false</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>),</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>(<a href="/docs/api/classes/llvm/pointertype">PointerType</a>::<a href="/docs/api/namespaces/llvm/#a73257f51950d9ea50955e3fb9c724a25">get</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>-&gt;getContext(), 0)),</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>),</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>(<a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a> &amp;&amp;</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><span class="doxyHighlight">                    !<a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()-&gt;getTargetTriple()).isAMDGPU()) &#123;&#125;</span></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0">runOnFunction</a>() &#123;</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>)</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a>)</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0">copyArgsPassedByValToAllocas</a>();</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Collect alloca, ret, lifetime instructions etc.</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB : <a href="/docs/api/namespaces/llvm/#ad6e19a09aeed4c56617c284e099c81de">depth&#95;first</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getEntryBlock())) <a href="/docs/api/files/lib/lib/target/lib/target/spirv/spirvpostlegalizer-cpp/#a090736355958192cac4db32336c48bbd">visit</a>(&#42;BB);</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty() &amp;&amp; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878">initializeCallbacks</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent());</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a>) &#123;</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there are lifetime intrinsics which couldn&#39;t be traced back to an</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// alloca, we may not know exactly when a variable enters scope, and</span></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// therefore should &quot;fail safe&quot; by not poisoning them.</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.clear();</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.clear();</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93">processDynamicAllocas</a>();</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0">processStaticAllocas</a>();</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a>) &#123;</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>);</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Arguments marked with the &quot;byval&quot; attribute are implicitly copied without</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// using an alloca instruction.  To produce redzones for those arguments, we</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// copy them a second time into memory allocated with an alloca instruction.</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> copyArgsPassedByValToAllocas();</span></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Finds all Alloca instructions and puts</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// poisoned red zones around all of them.</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Then unpoison everything back before the function returns.</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processStaticAllocas();</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processDynamicAllocas();</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> createDynamicAllocasInitStorage();</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ----------------------- Visitors.</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlightComment">  /// Collect all Ret instructions, or the musttail call instruction if it</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlightComment">  /// precedes the return instruction.</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a10bdecf66bc72577ab6c3cc964a076b7"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a10bdecf66bc72577ab6c3cc964a076b7">visitReturnInst</a>(<a href="/docs/api/classes/llvm/returninst">ReturnInst</a> &amp;RI) &#123;</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = RI.<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>()-&gt;getTerminatingMustTailCall())</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(CI);</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;RI);</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlightComment">  /// Collect all Resume instructions.</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa896496e66721145430011f6ff3021cd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa896496e66721145430011f6ff3021cd">visitResumeInst</a>(<a href="/docs/api/classes/llvm/resumeinst">ResumeInst</a> &amp;RI) &#123; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;RI); &#125;</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><span class="doxyHighlightComment">  /// Collect all CatchReturnInst instructions.</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d46cb46ca03244c80471051959180eb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d46cb46ca03244c80471051959180eb">visitCleanupReturnInst</a>(<a href="/docs/api/classes/llvm/cleanupreturninst">CleanupReturnInst</a> &amp;CRI) &#123; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;CRI); &#125;</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InstBefore,</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedStack) &#123;</span></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InstBefore);</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DynamicAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(SavedStack, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// When we insert &#95;asan&#95;allocas&#95;unpoison before @llvm.stackrestore, we</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// need to adjust extracted SP to compute the address of the most recent</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// alloca. We have a special @llvm.get.dynamic.area.offset intrinsic for</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// this purpose.</span></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ReturnInst&gt;</a>(InstBefore)) &#123;</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;DynamicAreaOffset = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlight">          Intrinsic::get&#95;dynamic&#95;area&#95;offset, &#123;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><span class="doxyHighlight">      DynamicAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(SavedStack, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</span></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlight">                                     DynamicAreaOffset);</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><span class="doxyHighlight">        IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a>,</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>), DynamicAreaPtr&#125;);</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Unpoison dynamic allocas redzones.</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892">unpoisonDynamicAllocas</a>() &#123;</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Ret : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>)</span></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(Ret, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;StackRestoreInst : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>)</span></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(StackRestoreInst,</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">                                       StackRestoreInst-&gt;getOperand(0));</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Deploy and poison redzones around dynamic alloca call. To do this, we</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should replace this call with another one with changed parameters and</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// replace all its uses with new address, so</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   addr = alloca type, old&#95;size, align</span></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is replaced by</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   new&#95;size = (old&#95;size + additional&#95;size) &#42; sizeof(type)</span></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   tmp = alloca i8, new&#95;size, max(align, 32)</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   addr = tmp + 32 (first 32 bytes are for the left redzone).</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Additional&#95;size is added to make new memory allocation contain not only</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// requested memory, but also left, partial and right redzones.</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> handleDynamicAllocaCall(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI);</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlightComment">  /// Collect Alloca instructions we want (and can) handle.</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d3b181e57e15921dd726d62c5f68a5c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d3b181e57e15921dd726d62c5f68a5c">visitAllocaInst</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI) &#123;</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Handle scalable vectors instead of ignoring them.</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/type">Type</a> &#42;AllocaType = AI.<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>();</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;STy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(AllocaType);</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(AI) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ScalableVectorType&gt;</a>(AllocaType) ||</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlight">        (STy &amp;&amp; STy-&gt;containsHomogeneousScalableVectorTypes())) &#123;</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>()) &#123;</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Skip over allocas that are present &#42;before&#42; the first instrumented</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// alloca, we don&#39;t want to move those around.</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty())</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>.push&#95;back(&amp;AI);</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>())</span></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.push&#95;back(&amp;AI);</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.push&#95;back(&amp;AI);</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlightComment">  /// Collect lifetime intrinsic calls to check for use-after-scope</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><span class="doxyHighlightComment">  /// errors.</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a307e0ed6d4058b4486ae85bbc1908015"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a307e0ed6d4058b4486ae85bbc1908015">visitIntrinsicInst</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>) &#123;</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getIntrinsicID();</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::stackrestore) <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::localescape) <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a> = &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterScope)</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.isLifetimeStartOrEnd())</span></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Found lifetime intrinsic, add ASan instrumentation if necessary.</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getArgOperand(0));</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If size argument is undefined, don&#39;t do anything.</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>-&gt;isMinusOne()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check that size doesn&#39;t saturate uint64&#95;t and can</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// be stored in IntptrTy.</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t SizeValue = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>-&gt;getValue().getLimitedValue();</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeValue == ~0ULL ||</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><span class="doxyHighlight">        !<a href="/docs/api/classes/llvm/constantint/#a5b75b94b0d81c2ae458192b4a6544e18">ConstantInt::isValueValidForType</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, SizeValue))</span></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Find alloca instruction that corresponds to llvm.lifetime argument.</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Currently we can only handle lifetime markers pointing to the</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// beginning of the alloca.</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a21fe87bf00db76089c043fed6a23fb76">findAllocaForValue</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getArgOperand(1), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AI) &#123;</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;re interested only in allocas we can handle.</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;AI))</span></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoPoison = (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::lifetime&#95;end);</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a> APC = &#123;&amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>, AI, SizeValue, DoPoison&#125;;</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>())</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.push&#95;back(APC);</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a>)</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.push&#95;back(APC);</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a549c93c786b6052ba5e485c8eed99a33"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a549c93c786b6052ba5e485c8eed99a33">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB) &#123;</span></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;CB)) &#123;</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> |= CI-&gt;isInlineAsm() &amp;&amp; &amp;CB != <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LocalDynamicShadow;</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a> |= CI-&gt;canReturnTwice();</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ---------------------- Helpers.</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> initializeCallbacks(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M);</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Copies bytes from ShadowBytes into shadow memory for indexes where</span></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ShadowMask is not zero. If ShadowMask&#91;i&#93; is zero, we assume that</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ShadowBytes&#91;i&#93; is constantly zero and doesn&#39;t need to be overwritten.</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> copyToShadow(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> copyToShadow(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><span class="doxyHighlight">                    </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Begin, </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> End, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> copyToShadowInline(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">                          <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes, </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Begin,</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">                          </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> End, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> poisonAlloca(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoPoison);</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;createAllocaForLayout(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L,</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>);</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;createPHI(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfTrue,</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfFalse);</span></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642">AddressSanitizerPass::printPipeline</a>(</span></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt;<a href="/docs/api/classes/llvm/stringref">StringRef</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a>)&gt; MapClassName2PassName) &#123;</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/passinfomixin">PassInfoMixin&lt;AddressSanitizerPass&gt;</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">)-&gt;<a href="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642">printPipeline</a>(</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><span class="doxyHighlight">      OS, MapClassName2PassName);</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&lt;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Options.CompileKernel)</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;kernel&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&gt;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#a583050ca1dcbfcc2b6f24fecd345387e"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/addresssanitizerpass/#a583050ca1dcbfcc2b6f24fecd345387e">AddressSanitizerPass::AddressSanitizerPass</a>(</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/addresssanitizeroptions">AddressSanitizerOptions</a> &amp;Options, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseGlobalGC,</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseOdrIndicator, <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind,</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind)</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><span class="doxyHighlight">    : Options(Options), UseGlobalGC(UseGlobalGC),</span></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><span class="doxyHighlight">      UseOdrIndicator(UseOdrIndicator), DestructorKind(DestructorKind),</span></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlight">      ConstructorKind(ConstructorKind) &#123;&#125;</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#a987afb1c68c5891e0b9a67cdac48147d"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> <a href="/docs/api/classes/llvm/addresssanitizerpass/#a987afb1c68c5891e0b9a67cdac48147d">AddressSanitizerPass::run</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">                                            <a href="/docs/api/namespaces/llvm/#af9c9208365fd9ce11392b4d79485e259">ModuleAnalysisManager</a> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>) &#123;</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Return early if nosanitize&#95;address module flag is present for the module.</span></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This implies that asan pass has already run before.</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#aeed520b6f17bd6271d563ee25f3e4728">checkIfAlreadyInstrumented</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;nosanitize&#95;address&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</span></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">  ModuleAddressSanitizer ModuleSanitizer(</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">      M, Options.InsertVersionCheck, Options.CompileKernel, Options.Recover,</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">      UseGlobalGC, UseOdrIndicator, DestructorKind, ConstructorKind);</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a href="/docs/api/namespaces/llvm/#a4143e067711d3c7795276b225a8d6eb9">FunctionAnalysisManagerModuleProxy</a>&gt;(M).getManager();</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stacksafetyglobalinfo">StackSafetyGlobalInfo</a> &#42;</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> SSGI =</span></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64stacktagging-cpp/#ac69fc2e5e9b097e6ebeb1c4e4a34fcf3">ClUseStackSafety</a> ? &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/stacksafetyglobalanalysis">StackSafetyGlobalAnalysis</a>&gt;(M) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : M) &#123;</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">    AddressSanitizer FunctionSanitizer(</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">        M, SSGI, Options.InstrumentationWithCallsThreshold,</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><span class="doxyHighlight">        Options.MaxInlinePoisoningSize, Options.CompileKernel, Options.Recover,</span></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">        Options.UseAfterScope, Options.UseAfterReturn);</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI = <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/targetlibraryanalysis">TargetLibraryAnalysis</a>&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> |= FunctionSanitizer.instrumentFunction(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;TLI);</span></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> |= ModuleSanitizer.instrumentModule();</span></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a>)</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</span></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> PA = <a href="/docs/api/classes/llvm/preservedanalyses/#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// GlobalsAA is considered stateless and does not get invalidated unless</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// explicitly invalidated; PreservedAnalyses::none() is not enough. Sanitizers</span></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// make changes that require GlobalsAA to be invalidated.</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">  PA.<a href="/docs/api/classes/llvm/preservedanalyses/#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a href="/docs/api/classes/llvm/globalsaa">GlobalsAA</a>&gt;();</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PA;</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294" lineLink="#adcdff5e32d9b4d801f187d48b106e579"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a>(uint32&#95;t <a href="/docs/api/classes/llvm/typesize">TypeSize</a>) &#123;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Res = <a href="/docs/api/namespaces/llvm/#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr&#95;zero</a>(<a href="/docs/api/classes/llvm/typesize">TypeSize</a> / 8);</span></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res &lt; <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>);</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Res;</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlightComment">/// Check if \\p G has been created by a trusted compiler pass.</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301" lineLink="#a74f90b5c14043cd0038dc90723eab4c2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a>(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not instrument @llvm.global&#95;ctors, @llvm.used, etc.</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;llvm.&quot;</span><span class="doxyHighlight">) ||</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Do not instrument gcov counter arrays.</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;llvm&#95;gcov&#95;ctr&quot;</span><span class="doxyHighlight">) ||</span></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Do not instrument rtti proxy symbols for function sanitizer.</span></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;llvm&#95;rtti&#95;proxy&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not instrument asan globals.</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>) ||</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a>) ||</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a>))</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319" lineLink="#a66fb0770ddf5f596079ee32ca4b8b599"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr) &#123;</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a7c742b32ebcd73d6dc851afac295b0f2">getScalarType</a>());</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> AddrSpace = PtrTy-&gt;<a href="/docs/api/classes/llvm/type/#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>();</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AddrSpace == 3 || AddrSpace == 5)</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409">AddressSanitizer::memToShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Shadow &gt;&gt; scale</span></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">  Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5849d19e500f8c6713ec44889058f424">CreateLShr</a>(Shadow, Mapping.Scale);</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.Offset == 0) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Shadow;</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (Shadow &gt;&gt; scale) | offset</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase;</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalDynamicShadow)</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">    ShadowBase = LocalDynamicShadow;</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">    ShadowBase = ConstantInt::get(IntptrTy, Mapping.Offset);</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.OrShadowOffset)</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow, ShadowBase);</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(Shadow, ShadowBase);</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlightComment">// Instrument memset/memmove/memcpy</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea">AddressSanitizer::instrumentMemIntrinsic</a>(<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">                                              <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemTransferInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><span class="doxyHighlight">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlight">        IRB, <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemMoveInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ? AsanMemmove : AsanMemcpy,</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0), PtrTy),</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1), PtrTy),</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><span class="doxyHighlight">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2), IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)&#125;);</span></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemSetInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><span class="doxyHighlight">        IRB, AsanMemset,</span></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0), PtrTy),</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1), IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlight">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2), IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)&#125;);</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlightComment">/// Check if we want (and can) handle this alloca.</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f">AddressSanitizer::isInterestingAlloca</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI) &#123;</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PreviouslySeenAllocaInfo = ProcessedAllocas.find(&amp;AI);</span></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PreviouslySeenAllocaInfo != ProcessedAllocas.end())</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PreviouslySeenAllocaInfo-&gt;getSecond();</span></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsInteresting =</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">      (AI.<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>()-&gt;isSized() &amp;&amp;</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// alloca() may be called with 0 size, ignore it.</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">       ((!AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>()) || !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734">getAllocaSizeInBytes</a>(AI).<a href="/docs/api/files/lib/lib/analysis/lint-cpp/#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()) &amp;&amp;</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// We are only interested in allocas not promotable to registers.</span></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// Promotable allocas are common under -O0.</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">       (!<a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a> || !<a href="/docs/api/namespaces/llvm/#a5023b360abc7a5d1612061fba30003a6">isAllocaPromotable</a>(&amp;AI)) &amp;&amp;</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// inalloca allocas are not treated as static, and we don&#39;t want</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// dynamic alloca instrumentation for them as well.</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><span class="doxyHighlight">       !AI.<a href="/docs/api/classes/llvm/allocainst/#a9bb98c4ac4cf77f5782e5e41f2c6f38a">isUsedWithInAlloca</a>() &amp;&amp;</span></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// swifterror allocas are register promoted by ISel</span></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">       !AI.<a href="/docs/api/classes/llvm/allocainst/#a3016b467a9ecb5506956f7d029509db5">isSwiftError</a>() &amp;&amp;</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">       </span><span class="doxyHighlightComment">// safe allocas are not interesting</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><span class="doxyHighlight">       !(SSGI &amp;&amp; SSGI-&gt;isSafe(AI)));</span></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">  ProcessedAllocas&#91;&amp;AI&#93; = IsInteresting;</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IsInteresting;</span></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">AddressSanitizer::ignoreAccess</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &#123;</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument accesses from different address spaces only for AMDGPU.</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()-&gt;getScalarType());</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PtrTy-&gt;getPointerAddressSpace() != 0 &amp;&amp;</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">      !(TargetTriple.isAMDGPU() &amp;&amp; !<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)))</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Ignore swifterror addresses.</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// swifterror memory addresses are mem2reg promoted by instruction</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// selection. As such they cannot have regular uses like an instrumentation</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// function and it makes no sense to track them as memory.</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;isSwiftError())</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Treat memory accesses to promotable allocas as non-interesting since they</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// will not cause memory violations. This greatly speeds up the instrumented</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// executable at -O0.</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AI = <a href="/docs/api/namespaces/llvm/#a5f6182886dc2f96c204299e92c1565d5">dyn&#95;cast&#95;or&#95;null&lt;AllocaInst&gt;</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f">isInterestingAlloca</a>(&#42;AI))</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SSGI != </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight"> &amp;&amp; SSGI-&gt;stackAccessIsSafe(&#42;Inst) &amp;&amp;</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a21fe87bf00db76089c043fed6a23fb76">findAllocaForValue</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc">AddressSanitizer::getInterestingMemoryOperands</a>(</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InterestingMemoryOperand&gt;</a> &amp;Interesting) &#123;</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not instrument the load fetching the dynamic shadow address.</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalDynamicShadow == <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42;LI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;LoadInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI-&gt;getPointerOperand()))</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI-&gt;getPointerOperandIndex(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><span class="doxyHighlight">                             LI-&gt;getType(), LI-&gt;getAlign());</span></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42;<a href="/docs/api/namespaces/llvm/si">SI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StoreInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getPointerOperand()))</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><span class="doxyHighlight">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getPointerOperandIndex(), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">                             <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getValueOperand()-&gt;getType(), <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getAlign());</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/atomicrmwinst">AtomicRMWInst</a> &#42;RMW = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AtomicRMWInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RMW-&gt;getPointerOperand()))</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><span class="doxyHighlight">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RMW-&gt;getPointerOperandIndex(), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">                             RMW-&gt;getValOperand()-&gt;getType(), std::nullopt);</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/atomiccmpxchginst">AtomicCmpXchgInst</a> &#42;XCHG = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AtomicCmpXchgInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, XCHG-&gt;getPointerOperand()))</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, XCHG-&gt;getPointerOperandIndex(), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><span class="doxyHighlight">                             XCHG-&gt;getCompareOperand()-&gt;getType(),</span></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">                             std::nullopt);</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (CI-&gt;getIntrinsicID()) &#123;</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;load:</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;store:</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;gather:</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;scatter: &#123;</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite = CI-&gt;getType()-&gt;isVoidTy();</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Masked store has an initial operand for the value.</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OpOffset = IsWrite ? 1 : 0;</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BasePtr = CI-&gt;getOperand(OpOffset);</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BasePtr))</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Otherwise no alignment guarantees. We probably got Undef.</span></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantInt&gt;</a>(CI-&gt;getOperand(1 + OpOffset)))</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">        Alignment = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getMaybeAlignValue();</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = CI-&gt;getOperand(2 + OpOffset);</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OpOffset, IsWrite, Ty, Alignment, Mask);</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;expandload:</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;compressstore: &#123;</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite = CI-&gt;getIntrinsicID() == Intrinsic::masked&#95;compressstore;</span></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OpOffset = IsWrite ? 1 : 0;</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</span></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BasePtr = CI-&gt;getOperand(OpOffset);</span></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BasePtr))</span></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = BasePtr-&gt;getPointerAlignment(&#42;DL);</span></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</span></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a> IB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = CI-&gt;getOperand(1 + OpOffset);</span></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Use the popcount of Mask as the effective vector length.</span></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;ExtTy = <a href="/docs/api/classes/llvm/vectortype/#a861be1e2092622462053c6d31dddbfd5">VectorType::get</a>(IntptrTy, <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(Ty));</span></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ExtMask = IB.CreateZExt(Mask, ExtTy);</span></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL = IB.CreateAddReduce(ExtMask);</span></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;TrueMask = ConstantInt::get(Mask-&gt;getType(), 1);</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><span class="doxyHighlight">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OpOffset, IsWrite, Ty, Alignment, TrueMask,</span></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><span class="doxyHighlight">                               EVL);</span></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vp&#95;load:</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vp&#95;store:</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::experimental&#95;vp&#95;strided&#95;load:</span></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::experimental&#95;vp&#95;strided&#95;store: &#123;</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;VPI = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VPIntrinsic&gt;</a>(CI);</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IID = CI-&gt;getIntrinsicID();</span></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite = CI-&gt;getType()-&gt;isVoidTy();</span></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PtrOpNo = &#42;VPI-&gt;getMemoryPointerParamPos(IID);</span></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = VPI-&gt;getOperand(PtrOpNo)-&gt;getPointerAlignment(&#42;DL);</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::experimental&#95;vp&#95;strided&#95;store ||</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><span class="doxyHighlight">          IID == Intrinsic::experimental&#95;vp&#95;strided&#95;load) &#123;</span></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><span class="doxyHighlight">        Stride = VPI-&gt;getOperand(PtrOpNo + 1);</span></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Use the pointer alignment as the element alignment if the stride is a</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// mutiple of the pointer alignment. Otherwise, the element alignment</span></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// should be Align(1).</span></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PointerAlign = Alignment.<a href="/docs/api/structs/llvm/maybealign/#a06846474be3ab85f8d30c388faf3b116">valueOrOne</a>().<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>();</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(Stride) ||</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(Stride)-&gt;getZExtValue() % PointerAlign != 0)</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><span class="doxyHighlight">          Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><span class="doxyHighlight">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PtrOpNo, IsWrite, Ty, Alignment,</span></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><span class="doxyHighlight">                               VPI-&gt;getMaskParam(), VPI-&gt;getVectorLengthParam(),</span></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">                               Stride);</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vp&#95;gather:</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vp&#95;scatter: &#123;</span></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;VPI = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VPIntrinsic&gt;</a>(CI);</span></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IID = CI-&gt;getIntrinsicID();</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite = IID == Intrinsic::vp&#95;scatter;</span></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</span></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PtrOpNo = &#42;VPI-&gt;getMemoryPointerParamPos(IID);</span></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = VPI-&gt;getPointerAlignment();</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><span class="doxyHighlight">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PtrOpNo, IsWrite, Ty, Alignment,</span></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">                               VPI-&gt;getMaskParam(),</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><span class="doxyHighlight">                               VPI-&gt;getVectorLengthParam());</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgNo = 0; ArgNo &lt; CI-&gt;arg&#95;size(); ArgNo++) &#123;</span></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a> || !CI-&gt;isByValArgument(ArgNo) ||</span></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CI-&gt;getArgOperand(ArgNo)))</span></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = CI-&gt;getParamByValType(ArgNo);</span></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">        Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ArgNo, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, Ty, <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547" lineLink="#a84925f563ac5648b7a5c359d835cc947"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V-&gt;getType()-&gt;isPointerTy() || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;PtrToIntInst&gt;</a>(V);</span></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlightComment">// This is a rough heuristic; it may cause both false positives and</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><span class="doxyHighlightComment">// false negatives. The proper implementation requires cooperation with</span></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlightComment">// the frontend.</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554" lineLink="#a8d829e3f1a798c5c559b716ba05a4d7d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &#42;Cmp = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ICmpInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Cmp-&gt;isRelational())</span></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)) &amp;&amp;</span></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlightComment">// This is a rough heuristic; it may cause both false positives and</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><span class="doxyHighlightComment">// false negatives. The proper implementation requires cooperation with</span></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><span class="doxyHighlightComment">// the frontend.</span></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568" lineLink="#a1e0c09290631b1be732e7387c75aca09"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &#42;BO = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BinaryOperator&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BO-&gt;getOpcode() != Instruction::Sub)</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)) &amp;&amp;</span></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AddressSanitizer::GlobalIsLinkerInitialized(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If a global variable does not have dynamic initialization we don&#39;t</span></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// have to instrument it.  However, if a global does not have initializer</span></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// at all, we assume it has dynamic initializer (in other TU).</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasInitializer())</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata().IsDynInit)</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38">AddressSanitizer::instrumentPointerComparisonOrSubtraction</a>(</span></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ICmpInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ? AsanPtrCmpFunction : AsanPtrSubFunction;</span></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Param&#91;2&#93; = &#123;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1)&#125;;</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/value">Value</a> &#42;&amp;i : Param) &#123;</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (i-&gt;getType()-&gt;isPointerTy())</span></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlight">      i = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(i, IntptrTy);</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><span class="doxyHighlight">  RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Param);</span></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604" lineLink="#a01b9989f797101a150d7a960255adfec"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(AddressSanitizer &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><span class="doxyHighlight">                                <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Granularity,</span></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">                                uint32&#95;t Exp, RuntimeCallInserter &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument a 1-, 2-, 4-, 8-, or 16- byte access with one check</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if the data is properly aligned.</span></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &#123;</span></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FixedSize = TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (FixedSize) &#123;</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 8:</span></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 16:</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 32:</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 64:</span></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 128:</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Alignment || &#42;Alignment &gt;= Granularity ||</span></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlight">          &#42;Alignment &gt;= FixedSize / 8)</span></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;instrumentAddress(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, Alignment,</span></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><span class="doxyHighlight">                                       FixedSize, IsWrite, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, UseCalls,</span></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><span class="doxyHighlight">                                       Exp, RTCI);</span></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;instrumentUnusualSizeOrAlignment(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, TypeStoreSize,</span></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><span class="doxyHighlight">                                         IsWrite, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, UseCalls, Exp, RTCI);</span></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552">AddressSanitizer::instrumentMaskedLoadOrStore</a>(</span></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL, <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask,</span></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Granularity, <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls, uint32&#95;t Exp,</span></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;VTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(OpType);</span></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/typesize">TypeSize</a> ElemTypeSize = DL.getTypeStoreSizeInBits(VTy-&gt;getScalarType());</span></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = ConstantInt::get(IntptrTy, 0);</span></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a> IB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;LoopInsertBefore = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EVL) &#123;</span></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The end argument of SplitBlockAndInsertForLane is assumed bigger</span></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// than zero, so we should check whether EVL is zero here.</span></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;EVLType = EVL-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsEVLZero = IB.CreateICmpNE(EVL, ConstantInt::get(EVLType, 0));</span></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><span class="doxyHighlight">    LoopInsertBefore = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(IsEVLZero, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><span class="doxyHighlight">    IB.SetInsertPoint(LoopInsertBefore);</span></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Cast EVL to IntptrTy.</span></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><span class="doxyHighlight">    EVL = IB.CreateZExtOrTrunc(EVL, IntptrTy);</span></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// To avoid undefined behavior for extracting with out of range index, use</span></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the minimum of evl and element count as trip count.</span></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;EC = IB.CreateElementCount(IntptrTy, VTy-&gt;getElementCount());</span></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><span class="doxyHighlight">    EVL = IB.CreateBinaryIntrinsic(Intrinsic::umin, EVL, EC);</span></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><span class="doxyHighlight">    EVL = IB.CreateElementCount(IntptrTy, VTy-&gt;getElementCount());</span></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Cast Stride to IntptrTy.</span></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Stride)</span></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><span class="doxyHighlight">    Stride = IB.CreateZExtOrTrunc(Stride, IntptrTy);</span></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#af71ef8ea795d6a6eb87a3499f3b0c90f">SplitBlockAndInsertForEachLane</a>(EVL, LoopInsertBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>(),</span></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><span class="doxyHighlight">                                 &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/irbuilderbase">IRBuilderBase</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Index) &#123;</span></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><span class="doxyHighlight">    Value &#42;MaskElem = IRB.CreateExtractElement(Mask, Index);</span></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><span class="doxyHighlight">    if (auto &#42;MaskElemC = dyn&#95;cast&lt;ConstantInt&gt;(MaskElem)) &#123;</span></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><span class="doxyHighlight">      if (MaskElemC-&gt;isZero())</span></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// No check</span></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><span class="doxyHighlight">        return;</span></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Unconditional check</span></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Conditional check</span></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><span class="doxyHighlight">      Instruction &#42;ThenTerm = SplitBlockAndInsertIfThen(</span></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><span class="doxyHighlight">          MaskElem, &amp;&#42;IRB.GetInsertPoint(), false);</span></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><span class="doxyHighlight">      IRB.SetInsertPoint(ThenTerm);</span></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;InstrumentedAddress;</span></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())) &#123;</span></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><span class="doxyHighlight">      assert(</span></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><span class="doxyHighlight">          cast&lt;VectorType&gt;(Addr-&gt;getType())-&gt;getElementType()-&gt;isPointerTy() &amp;&amp;</span></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><span class="doxyHighlight">          </span><span class="doxyHighlightStringLiteral">&quot;Expected vector of pointer.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><span class="doxyHighlight">      InstrumentedAddress = IRB.CreateExtractElement(Addr, Index);</span></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (Stride) &#123;</span></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><span class="doxyHighlight">      Index = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(Index, Stride);</span></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><span class="doxyHighlight">      InstrumentedAddress = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5b416a8603ccb844165c8df22454ac05">CreatePtrAdd</a>(Addr, Index);</span></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><span class="doxyHighlight">      InstrumentedAddress = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(VTy, Addr, &#123;Zero, Index&#125;);</span></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><span class="doxyHighlight">    <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(), InstrumentedAddress,</span></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><span class="doxyHighlight">                        Alignment, Granularity, ElemTypeSize, IsWrite,</span></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><span class="doxyHighlight">                        SizeArgument, UseCalls, Exp, RTCI);</span></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><span class="doxyHighlight">  &#125;);</span></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b">AddressSanitizer::instrumentMop</a>(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</span></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/interestingmemoryoperand">InterestingMemoryOperand</a> &amp;O, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL,</span></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><span class="doxyHighlight">                                     <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = O.getPtr();</span></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Optimization experiments.</span></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The experiments can be used to evaluate potential optimizations that remove</span></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instrumentation (assess false negatives). Instead of completely removing</span></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// some instrumentation, you set Exp to a non-zero value (mask of optimization</span></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// experiments that want to remove instrumentation of this instruction).</span></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If Exp is non-zero, this pass will emit special calls into runtime</span></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (e.g. &#95;&#95;asan&#95;report&#95;exp&#95;load1 instead of &#95;&#95;asan&#95;report&#95;load1). These calls</span></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// make runtime terminate the program in a special way (with a different</span></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// exit status). Then you run the new compiler on a buggy corpus, collect</span></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the special terminations (ideally, you don&#39;t see them at all -- no false</span></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// negatives) and make the decision on the optimization.</span></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><span class="doxyHighlight">  uint32&#95;t Exp = <a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a>;</span></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a>) &#123;</span></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If initialization order checking is disabled, a simple access to a</span></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// dynamically initialized global is always valid.</span></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalVariable&gt;</a>(<a href="/docs/api/namespaces/llvm/#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Addr));</span></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &amp;&amp; (!<a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a> || GlobalIsLinkerInitialized(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)) &amp;&amp;</span></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><span class="doxyHighlight">        isSafeAccess(ObjSizeVis, Addr, O.TypeStoreSize)) &#123;</span></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><span class="doxyHighlight">      NumOptimizedAccessesToGlobalVar++;</span></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a>) &#123;</span></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A direct inbounds access to a stack variable is always valid.</span></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(<a href="/docs/api/namespaces/llvm/#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Addr)) &amp;&amp;</span></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><span class="doxyHighlight">        isSafeAccess(ObjSizeVis, Addr, O.TypeStoreSize)) &#123;</span></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><span class="doxyHighlight">      NumOptimizedAccessesToStackVar++;</span></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (O.IsWrite)</span></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><span class="doxyHighlight">    NumInstrumentedWrites++;</span></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><span class="doxyHighlight">    NumInstrumentedReads++;</span></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Granularity = 1 &lt;&lt; Mapping.Scale;</span></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (O.MaybeMask) &#123;</span></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552">instrumentMaskedLoadOrStore</a>(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, DL, IntptrTy, O.MaybeMask, O.MaybeEVL,</span></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><span class="doxyHighlight">                                O.MaybeStride, O.getInsn(), Addr, O.Alignment,</span></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><span class="doxyHighlight">                                Granularity, O.OpType, O.IsWrite, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><span class="doxyHighlight">                                UseCalls, Exp, RTCI);</span></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><span class="doxyHighlight">    <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, O.getInsn(), O.getInsn(), Addr, O.Alignment,</span></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><span class="doxyHighlight">                        Granularity, O.TypeStoreSize, O.IsWrite, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><span class="doxyHighlight">                        UseCalls, Exp, RTCI);</span></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6">AddressSanitizer::generateCrashCode</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore,</span></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><span class="doxyHighlight">                                                 </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessSizeIndex,</span></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument,</span></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><span class="doxyHighlight">                                                 uint32&#95;t Exp,</span></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</span></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ExpVal = Exp == 0 ? nullptr : ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp);</span></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeArgument) &#123;</span></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Exp == 0)</span></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><span class="doxyHighlight">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanErrorCallbackSized&#91;IsWrite&#93;&#91;0&#93;,</span></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><span class="doxyHighlight">                                    &#123;Addr, SizeArgument&#125;);</span></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><span class="doxyHighlight">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanErrorCallbackSized&#91;IsWrite&#93;&#91;1&#93;,</span></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><span class="doxyHighlight">                                    &#123;Addr, SizeArgument, ExpVal&#125;);</span></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Exp == 0)</span></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><span class="doxyHighlight">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><span class="doxyHighlight">          IRB, AsanErrorCallback&#91;IsWrite&#93;&#91;0&#93;&#91;AccessSizeIndex&#93;, Addr);</span></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><span class="doxyHighlight">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><span class="doxyHighlight">          IRB, AsanErrorCallback&#91;IsWrite&#93;&#91;1&#93;&#91;AccessSizeIndex&#93;, &#123;Addr, ExpVal&#125;);</span></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><span class="doxyHighlight">  <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;setCannotMerge();</span></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>;</span></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">AddressSanitizer::createSlowPathCmp</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong,</span></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue,</span></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><span class="doxyHighlight">                                           uint32&#95;t TypeStoreSize) &#123;</span></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Granularity = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(1) &lt;&lt; Mapping.Scale;</span></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Addr &amp; (Granularity - 1)</span></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LastAccessedByte =</span></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(AddrLong, ConstantInt::get(IntptrTy, Granularity - 1));</span></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (Addr &amp; (Granularity - 1)) + size - 1</span></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TypeStoreSize / 8 &gt; 1)</span></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><span class="doxyHighlight">    LastAccessedByte = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><span class="doxyHighlight">        LastAccessedByte, ConstantInt::get(IntptrTy, TypeStoreSize / 8 - 1));</span></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (uint8&#95;t) ((Addr &amp; (Granularity-1)) + size - 1)</span></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><span class="doxyHighlight">  LastAccessedByte =</span></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(LastAccessedByte, ShadowValue-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ((uint8&#95;t) ((Addr &amp; (Granularity-1)) + size - 1)) &gt;= ShadowValue</span></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4841d2c05da686940d2c9cc56f0bb348">CreateICmpSGE</a>(LastAccessedByte, ShadowValue);</span></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083">AddressSanitizer::instrumentAMDGPUAddress</a>(</span></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><span class="doxyHighlight">    uint32&#95;t TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument) &#123;</span></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not instrument unsupported addrspaces.</span></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(Addr))</span></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a7c742b32ebcd73d6dc851afac295b0f2">getScalarType</a>());</span></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Follow host instrumentation for global and constant addresses.</span></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PtrTy-&gt;getPointerAddressSpace() != 0)</span></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertBefore;</span></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument generic addresses in supported addressspaces.</span></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</span></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsShared = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AMDGPUAddressShared, &#123;Addr&#125;);</span></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsPrivate = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AMDGPUAddressPrivate, &#123;Addr&#125;);</span></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsSharedOrPrivate = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(IsShared, IsPrivate);</span></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(IsSharedOrPrivate);</span></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrSpaceZeroLanding =</span></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp, InsertBefore, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><span class="doxyHighlight">  InsertBefore = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(AddrSpaceZeroLanding);</span></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertBefore;</span></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1">AddressSanitizer::genAMDGPUReportBlock</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><span class="doxyHighlight">                                                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover) &#123;</span></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;M = &#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a60a6d6c205f483fa96597a960f3c093b">GetInsertBlock</a>()-&gt;<a href="/docs/api/classes/llvm/basicblock/#afc70e919c88c86159cc94cea29b6c210">getModule</a>();</span></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ReportCond = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>;</span></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Recover) &#123;</span></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ballot = M.getOrInsertFunction(<a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(),</span></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><span class="doxyHighlight">                                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>());</span></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><span class="doxyHighlight">    ReportCond = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aafd864f39fd28e235eea03ae424ab8e0">CreateIsNotNull</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Ballot, &#123;Cond&#125;));</span></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Trm =</span></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(ReportCond, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>());</span></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><span class="doxyHighlight">  Trm-&gt;getParent()-&gt;setName(</span><span class="doxyHighlightStringLiteral">&quot;asan.report&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Recover)</span></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Trm;</span></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><span class="doxyHighlight">  Trm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Trm, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Trm);</span></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(</span></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844"><span class="doxyHighlight">      M.getOrInsertFunction(<a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>()), &#123;&#125;);</span></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">AddressSanitizer::instrumentAddress</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns,</span></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><span class="doxyHighlight">                                         <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment,</span></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><span class="doxyHighlight">                                         uint32&#95;t TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite,</span></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><span class="doxyHighlight">                                         uint32&#95;t Exp,</span></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><span class="doxyHighlight">                                         <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isAMDGPU()) &#123;</span></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><span class="doxyHighlight">    InsertBefore = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083">instrumentAMDGPUAddress</a>(OrigIns, InsertBefore, Addr,</span></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><span class="doxyHighlight">                                           TypeStoreSize, IsWrite, SizeArgument);</span></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InsertBefore)</span></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</span></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessSizeIndex = <a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a>(TypeStoreSize);</span></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseCalls &amp;&amp; <a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a>) &#123;</span></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanaccessinfo">ASanAccessInfo</a> AccessInfo(IsWrite, CompileKernel, AccessSizeIndex);</span></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(Intrinsic::asan&#95;check&#95;memaccess, &#123;&#125;,</span></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><span class="doxyHighlight">                        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, PtrTy),</span></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><span class="doxyHighlight">                         ConstantInt::get(Int32Ty, AccessInfo.<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>)&#125;);</span></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, IntptrTy);</span></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseCalls) &#123;</span></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Exp == 0)</span></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><span class="doxyHighlight">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><span class="doxyHighlight">          IRB, AsanMemoryAccessCallback&#91;IsWrite&#93;&#91;0&#93;&#91;AccessSizeIndex&#93;, AddrLong);</span></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><span class="doxyHighlight">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><span class="doxyHighlight">          IRB, AsanMemoryAccessCallback&#91;IsWrite&#93;&#91;1&#93;&#91;AccessSizeIndex&#93;,</span></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><span class="doxyHighlight">          &#123;AddrLong, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp)&#125;);</span></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy =</span></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;C, std::max(8U, TypeStoreSize &gt;&gt; Mapping.Scale));</span></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowPtrTy = <a href="/docs/api/classes/llvm/pointertype/#a8d7f800be5fd53dcfcdcbdc6fd9ccfe3">PointerType::get</a>(&#42;C, 0);</span></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409">memToShadow</a>(AddrLong, IRB);</span></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t ShadowAlign =</span></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><span class="doxyHighlight">      std::max&lt;uint64&#95;t&gt;(Alignment.<a href="/docs/api/structs/llvm/maybealign/#a06846474be3ab85f8d30c388faf3b116">valueOrOne</a>().<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>() &gt;&gt; Mapping.Scale, 1);</span></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(</span></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><span class="doxyHighlight">      ShadowTy, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(ShadowPtr, ShadowPtrTy), <a href="/docs/api/structs/llvm/align">Align</a>(ShadowAlign));</span></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aafd864f39fd28e235eea03ae424ab8e0">CreateIsNotNull</a>(ShadowValue);</span></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Granularity = 1ULL &lt;&lt; Mapping.Scale;</span></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CrashTerm = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> GenSlowPath = (<a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a> || (TypeStoreSize &lt; 8 &#42; Granularity));</span></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isAMDGCN()) &#123;</span></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GenSlowPath) &#123;</span></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Cmp2 = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">createSlowPathCmp</a>(IRB, AddrLong, ShadowValue, TypeStoreSize);</span></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><span class="doxyHighlight">      Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(Cmp, Cmp2);</span></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><span class="doxyHighlight">    CrashTerm = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1">genAMDGPUReportBlock</a>(IRB, Cmp, Recover);</span></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GenSlowPath) &#123;</span></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We use branch weights for the slow path check, to indicate that the slow</span></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// path is rarely taken. This seems to be the case for SPEC benchmarks.</span></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CheckTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(</span></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><span class="doxyHighlight">        Cmp, InsertBefore, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>());</span></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;BranchInst&gt;</a>(CheckTerm)-&gt;isUnconditional());</span></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;NextBB = CheckTerm-&gt;<a href="/docs/api/classes/llvm/instruction/#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0);</span></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</span></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp2 = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">createSlowPathCmp</a>(IRB, AddrLong, ShadowValue, TypeStoreSize);</span></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Recover) &#123;</span></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><span class="doxyHighlight">      CrashTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp2, CheckTerm, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;CrashBlock =</span></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/basicblock/#a4a5b798214be930cf8e133c032ba0129">BasicBlock::Create</a>(&#42;C, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">, NextBB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>(), NextBB);</span></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><span class="doxyHighlight">      CrashTerm = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/unreachableinst">UnreachableInst</a>(&#42;C, CrashBlock);</span></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/branchinst">BranchInst</a> &#42;NewTerm = <a href="/docs/api/classes/llvm/branchinst/#a9f40e42226cee617c16cb1c447b115c5">BranchInst::Create</a>(CrashBlock, NextBB, Cmp2);</span></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(CheckTerm, NewTerm);</span></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><span class="doxyHighlight">    CrashTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp, InsertBefore, !Recover);</span></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Crash = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6">generateCrashCode</a>(</span></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><span class="doxyHighlight">      CrashTerm, AddrLong, IsWrite, AccessSizeIndex, SizeArgument, Exp, RTCI);</span></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OrigIns-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>())</span></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><span class="doxyHighlight">    Crash-&gt;<a href="/docs/api/classes/llvm/instruction/#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(OrigIns-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>());</span></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><span class="doxyHighlightComment">// Instrument unusual size or unusual alignment.</span></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"><span class="doxyHighlightComment">// We can not do it with a single check, so we do 1-byte check for the first</span></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><span class="doxyHighlightComment">// and the last bytes. We call &#95;&#95;asan&#95;report&#95;&#42;&#95;n(addr, real&#95;size) to be able</span></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><span class="doxyHighlightComment">// to report the actual access size.</span></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ac6119f1988ee2e260e58defc26361639"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ac6119f1988ee2e260e58defc26361639">AddressSanitizer::instrumentUnusualSizeOrAlignment</a>(</span></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls,</span></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><span class="doxyHighlight">    uint32&#95;t Exp, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</span></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</span></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NumBits = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a55086d93549de64322f4d3e8f5dd4883">CreateTypeSize</a>(IntptrTy, TypeStoreSize);</span></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5849d19e500f8c6713ec44889058f424">CreateLShr</a>(NumBits, ConstantInt::get(IntptrTy, 3));</span></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, IntptrTy);</span></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseCalls) &#123;</span></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Exp == 0)</span></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><span class="doxyHighlight">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanMemoryAccessCallbackSized&#91;IsWrite&#93;&#91;0&#93;,</span></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><span class="doxyHighlight">                             &#123;AddrLong, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>&#125;);</span></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><span class="doxyHighlight">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</span></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><span class="doxyHighlight">          IRB, AsanMemoryAccessCallbackSized&#91;IsWrite&#93;&#91;1&#93;,</span></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><span class="doxyHighlight">          &#123;AddrLong, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp)&#125;);</span></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeMinusOne = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ConstantInt::get(IntptrTy, 1));</span></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;LastByte = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(AddrLong, SizeMinusOne),</span></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><span class="doxyHighlight">        Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">instrumentAddress</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, &#123;&#125;, 8, IsWrite, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, Exp,</span></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><span class="doxyHighlight">                      RTCI);</span></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">instrumentAddress</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, LastByte, &#123;&#125;, 8, IsWrite, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><span class="doxyHighlight">                      Exp, RTCI);</span></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::poisonOneInitializer(<a href="/docs/api/classes/llvm/function">Function</a> &amp;GlobalInit) &#123;</span></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set up the arguments to our poison/unpoison functions.</span></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;GlobalInit.<a href="/docs/api/classes/llvm/function/#a3ec0b920bf30d0e15bace383192691da">front</a>(),</span></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><span class="doxyHighlight">                  GlobalInit.<a href="/docs/api/classes/llvm/function/#a3ec0b920bf30d0e15bace383192691da">front</a>().<a href="/docs/api/classes/llvm/basicblock/#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</span></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add a call to poison all external globals before the given function starts.</span></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ModuleNameAddr =</span></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(getOrCreateModuleName(), IntptrTy);</span></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanPoisonGlobals, ModuleNameAddr);</span></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add calls to unpoison all globals before each return instruction.</span></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : GlobalInit)</span></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/returninst">ReturnInst</a> &#42;RI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ReturnInst&gt;</a>(BB.getTerminator()))</span></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/callinst/#aa04721251be00370fbde6d21f47fed1a">CallInst::Create</a>(AsanUnpoisonGlobals, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">, RI-&gt;getIterator());</span></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::createInitializerPoisonCalls() &#123;</span></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;GV = M.getGlobalVariable(</span><span class="doxyHighlightStringLiteral">&quot;llvm.global&#95;ctors&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!GV)</span></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constantarray">ConstantArray</a> &#42;CA = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantArray&gt;</a>(GV-&gt;<a href="/docs/api/classes/llvm/globalvariable/#a0698d5bcabbfbca4f56a9d7a81cecb25">getInitializer</a>());</span></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CA)</span></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/use">Use</a> &amp;<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a> : CA-&gt;<a href="/docs/api/classes/llvm/user/#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>()) &#123;</span></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantAggregateZero&gt;</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a>)) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constantstruct">ConstantStruct</a> &#42;CS = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantStruct&gt;</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a>);</span></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Must have a function or null ptr.</span></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/function">Function</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Function&gt;</a>(CS-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1))) &#123;</span></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName() == <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Priority = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(CS-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0));</span></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Don&#39;t instrument CTORs that will run before asan.module&#95;ctor.</span></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Priority-&gt;getLimitedValue() &lt;= <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(TargetTriple))</span></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><span class="doxyHighlight">      poisonOneInitializer(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</span></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><span class="doxyHighlight">ModuleAddressSanitizer::getExcludedAliasedGlobal(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalalias">GlobalAlias</a> &amp;GA)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// In case this function should be expanded to include rules that do not just</span></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// apply when CompileKernel is true, either guard all existing rules with an</span></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#39;if (CompileKernel) &#123; ... &#125;&#39; or be absolutely sure that all these rules</span></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should also apply to user space.</span></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CompileKernel &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Only expecting to be called when compiling kernel&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = GA.<a href="/docs/api/classes/llvm/globalalias/#a7666cc7bd9294c7ae9992c41c591e08b">getAliasee</a>();</span></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// When compiling the kernel, globals that are aliased by symbols prefixed</span></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// by &quot;&#95;&#95;&quot; are special and cannot be padded with a redzone.</span></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GA.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a href="/docs/api/classes/llvm/stringref/#a2cd8968ff703aaeb395dcd63f6805ff1">starts&#95;with</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalVariable&gt;</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;stripPointerCastsAndAliases());</span></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ModuleAddressSanitizer::shouldInstrumentGlobal(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getValueType();</span></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;GLOBAL: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata().NoAddress)</span></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasInitializer()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Globals in address space 1 and 4 are supported for AMDGPU.</span></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAddressSpace() &amp;&amp;</span></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><span class="doxyHighlight">      !(TargetTriple.isAMDGPU() &amp;&amp; !<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)))</span></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Our own globals.</span></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Two problems with thread-locals:</span></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   - The address of the main thread&#39;s copy can&#39;t be computed at link-time.</span></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   - Need to poison all copies, not just the main thread&#39;s one.</span></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isThreadLocal()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For now, just ignore this Global if the alignment is large.</span></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAlign() &amp;&amp; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAlign() &gt; getMinRedzoneSizeForGlobal()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For non-COFF targets, only instrument globals known to be defined by this</span></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TU.</span></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: We can instrument comdat globals on ELF if we are using the</span></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// GC-friendly metadata scheme.</span></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TargetTriple.isOSBinFormatCOFF()) &#123;</span></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasExactDefinition() || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasComdat())</span></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// On COFF, don&#39;t instrument non-ODR linkages.</span></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isInterposable())</span></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the global has AvailableExternally linkage, then it is not in this</span></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// module, which means it does not need to be instrumented.</span></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasAvailableExternallyLinkage())</span></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If a comdat is present, it must have a selection kind that implies ODR</span></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// semantics: no duplicates, any, or exact match.</span></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/comdat">Comdat</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat()) &#123;</span></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getSelectionKind()) &#123;</span></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a8c4ae4df3d085db275a58182612ff3be">Comdat::Any</a>:</span></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035acceb065ea69a5e06e80bd6ceddd7b9a7">Comdat::ExactMatch</a>:</span></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">Comdat::NoDeduplicate</a>:</span></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a2444b05a47619decc80c2ce0cc224dc8">Comdat::Largest</a>:</span></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a8b148d3d05688ddb23b7abb81527b7ce">Comdat::SameSize</a>:</span></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSection()) &#123;</span></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The kernel uses explicit sections for mostly special global variables</span></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that we should not instrument. E.g. the kernel may rely on their layout</span></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// without redzones, or remove them at link time (&quot;discard.&#42;&quot;), etc.</span></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CompileKernel)</span></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSection();</span></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Globals from llvm.metadata aren&#39;t emitted, do not instrument them.</span></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Section == </span><span class="doxyHighlightStringLiteral">&quot;llvm.metadata&quot;</span><span class="doxyHighlight">) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do not instrument globals from special LLVM sections.</span></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;llvm&quot;</span><span class="doxyHighlight">) || <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;LLVM&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do not instrument function pointers to initialization and termination</span></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// routines: dynamic linker will not properly handle redzones.</span></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;.preinit&#95;array&quot;</span><span class="doxyHighlight">) ||</span></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;.init&#95;array&quot;</span><span class="doxyHighlight">) ||</span></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;.fini&#95;array&quot;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do not instrument user-defined sections (with names resembling</span></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// valid C identifiers)</span></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isOSBinFormatELF()) &#123;</span></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all&#95;of</a>(Section,</span></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><span class="doxyHighlight">                       &#91;&#93;(</span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> c) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8a0d39a17f2152e31271da7e7491d60e">llvm::isAlnum</a>(c) || c == </span><span class="doxyHighlightCharLiteral">&#39;&#95;&#39;</span><span class="doxyHighlight">; &#125;))</span></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// On COFF, if the section name contains &#39;$&#39;, it is highly likely that the</span></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// user is using section sorting to create an array of globals similar to</span></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the way initialization callbacks are registered in .init&#95;array and</span></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// .CRT$XCU. The ATL also registers things in .ATL$&#95;&#95;&#91;azm&#93;. Adding redzones</span></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// to such globals is counterproductive, because the intent is that they</span></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// will form an array, and out-of-bounds accesses are expected.</span></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// See https://github.com/google/sanitizers/issues/305</span></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and http://msdn.microsoft.com/en-US/en-en/library/bb918180(v=vs.120).aspx</span></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isOSBinFormatCOFF() &amp;&amp; <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</span><span class="doxyHighlightCharLiteral">&#39;$&#39;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Ignoring global in sorted section (contains &#39;$&#39;): &quot;</span></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><span class="doxyHighlight">                        &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isOSBinFormatMachO()) &#123;</span></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/stringref">StringRef</a> ParsedSegment, ParsedSection;</span></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TAA = 0, StubSize = 0;</span></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> TAAParsed;</span></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aa1e1474f15df639f0d874b21f15666f7">cantFail</a>(<a href="/docs/api/classes/llvm/mcsectionmacho/#a1ea0b527a25e96bb74c8217704b22a07">MCSectionMachO::ParseSectionSpecifier</a>(</span></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><span class="doxyHighlight">          Section, ParsedSegment, ParsedSection, TAA, TAAParsed, StubSize));</span></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Ignore the globals from the &#95;&#95;OBJC section. The ObjC runtime assumes</span></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// those conform to /usr/lib/objc/runtime.h, so we can&#39;t add redzones to</span></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// them.</span></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ParsedSegment == </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;OBJC&quot;</span><span class="doxyHighlight"> ||</span></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><span class="doxyHighlight">          (ParsedSegment == </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;DATA&quot;</span><span class="doxyHighlight"> &amp;&amp; ParsedSection.<a href="/docs/api/classes/llvm/stringref/#a2cd8968ff703aaeb395dcd63f6805ff1">starts&#95;with</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;objc&#95;&quot;</span><span class="doxyHighlight">))) &#123;</span></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Ignoring ObjC runtime global: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// See https://github.com/google/sanitizers/issues/32</span></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Constant CFString instances are compiled in the following way:</span></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//  -- the string buffer is emitted into</span></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     &#95;&#95;TEXT,&#95;&#95;cstring,cstring&#95;literals</span></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//  -- the constant NSConstantString structure referencing that buffer</span></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     is placed into &#95;&#95;DATA,&#95;&#95;cfstring</span></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Therefore there&#39;s no point in placing redzones into &#95;&#95;DATA,&#95;&#95;cfstring.</span></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Moreover, it causes the linker to crash on OS X 10.7</span></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ParsedSegment == </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;DATA&quot;</span><span class="doxyHighlight"> &amp;&amp; ParsedSection == </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;cfstring&quot;</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Ignoring CFString: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The linker merges the contents of cstring&#95;literals and removes the</span></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// trailing zeroes.</span></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ParsedSegment == </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;TEXT&quot;</span><span class="doxyHighlight"> &amp;&amp; (TAA &amp; <a href="/docs/api/namespaces/llvm/macho/#a48b52b2439385a6f96a6e50defb27409a857886b2cccfd23c2445e9912addf150">MachO::S&#95;CSTRING&#95;LITERALS</a>)) &#123;</span></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Ignoring a cstring literal: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CompileKernel) &#123;</span></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Globals that prefixed by &quot;&#95;&#95;&quot; are special and cannot be padded with a</span></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// redzone.</span></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><span class="doxyHighlightComment">// On Mach-O platforms, we emit global metadata in a separate section of the</span></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><span class="doxyHighlightComment">// binary in order to allow the linker to properly dead strip. This is only</span></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><span class="doxyHighlightComment">// supported on recent versions of ld64.</span></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ModuleAddressSanitizer::ShouldUseMachOGlobalsSection()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TargetTriple.isOSBinFormatMachO())</span></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isMacOSX() &amp;&amp; !TargetTriple.isMacOSXVersionLT(10, 11))</span></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isiOS() </span><span class="doxyHighlightComment">/&#42; or tvOS &#42;/</span><span class="doxyHighlight"> &amp;&amp; !TargetTriple.isOSVersionLT(9))</span></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isWatchOS() &amp;&amp; !TargetTriple.isOSVersionLT(2))</span></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isDriverKit())</span></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isXROS())</span></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/stringref">StringRef</a> ModuleAddressSanitizer::getGlobalMetadataSection()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (TargetTriple.getObjectFormat()) &#123;</span></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201aa943abc041caa1cc4c074bbf38b76267">Triple::COFF</a>:  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;.ASAN$GL&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a456b64e26b8bcdbd8294689615d8a055">Triple::ELF</a>:   </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;asan&#95;globals&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a2ed78f59e2d35011e1d1ed0ad96cf411">Triple::MachO</a>: </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;DATA,&#95;&#95;asan&#95;globals,regular&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a660d4029da29691e97daf8c8aabb1ffb">Triple::Wasm</a>:</span></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a7d71851eea2209e547ae06c9c03768f5">Triple::GOFF</a>:</span></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201ae057411e10951f5a7dc545e6199c5490">Triple::SPIRV</a>:</span></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a1f7d761ca747e66d2ac0caa0d54b1824">Triple::XCOFF</a>:</span></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a382f97aab858a35311f657a88f998a68">Triple::DXContainer</a>:</span></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;ModuleAddressSanitizer not implemented for object file format&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201af2f88d8b470958614a01866d4714b5a4">Triple::UnknownObjectFormat</a>:</span></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;unsupported object format&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::initializeCallbacks() &#123;</span></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Declare our poisoning and unpoisoning functions.</span></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><span class="doxyHighlight">  AsanPoisonGlobals =</span></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</span></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><span class="doxyHighlight">  AsanUnpoisonGlobals =</span></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>());</span></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Declare functions that register/unregister globals.</span></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><span class="doxyHighlight">  AsanRegisterGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><span class="doxyHighlight">      <a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><span class="doxyHighlight">  AsanUnregisterGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><span class="doxyHighlight">      <a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Declare the functions that find globals in a shared object and then invoke</span></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the (un)register function on them.</span></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><span class="doxyHighlight">  AsanRegisterImageGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><span class="doxyHighlight">      <a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</span></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><span class="doxyHighlight">  AsanUnregisterImageGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><span class="doxyHighlight">      <a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</span></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><span class="doxyHighlight">  AsanRegisterElfGlobals =</span></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(),</span></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><span class="doxyHighlight">                            IntptrTy, IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><span class="doxyHighlight">  AsanUnregisterElfGlobals =</span></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(),</span></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><span class="doxyHighlight">                            IntptrTy, IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><span class="doxyHighlightComment">// Put the metadata and the instrumented global in the same group. This ensures</span></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><span class="doxyHighlightComment">// that the metadata is discarded if the instrumented global is discarded.</span></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::SetComdatForGlobalMetadata(</span></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>, <a href="/docs/api/classes/llvm/stringref">StringRef</a> InternalSuffix) &#123;</span></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getParent();</span></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/comdat">Comdat</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat();</span></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasName()) &#123;</span></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If G is unnamed, it must be internal. Give it an artificial name</span></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// so we can put it in a comdat.</span></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasLocalLinkage());</span></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setName(<a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</span><span class="doxyHighlightStringLiteral">&quot;anon&#95;global&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InternalSuffix.<a href="/docs/api/classes/llvm/stringref/#a2dc80c585ad5882da8cae7b5968f7e74">empty</a>() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasLocalLinkage()) &#123;</span></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><span class="doxyHighlight">      std::string <a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = std::string(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> += InternalSuffix;</span></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertComdat(Name);</span></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertComdat(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Make this IMAGE&#95;COMDAT&#95;SELECT&#95;NODUPLICATES on COFF. Also upgrade private</span></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// linkage to internal linkage so that a symbol table entry is emitted. This</span></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is necessary in order to create the comdat group.</span></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isOSBinFormatCOFF()) &#123;</span></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;setSelectionKind(<a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">Comdat::NoDeduplicate</a>);</span></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasPrivateLinkage())</span></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setLinkage(<a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</span></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setComdat(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasComdat());</span></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setComdat(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat());</span></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><span class="doxyHighlightComment">// Create a separate metadata global and put it in the appropriate ASan</span></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><span class="doxyHighlightComment">// global registration section.</span></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</span></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><span class="doxyHighlight">ModuleAddressSanitizer::CreateMetadataGlobal(<a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer,</span></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/stringref">StringRef</a> OriginalName) &#123;</span></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = TargetTriple.isOSBinFormatMachO()</span></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><span class="doxyHighlight">                     ? <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a></span></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><span class="doxyHighlight">                     : <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalVariable::PrivateLinkage</a>;</span></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><span class="doxyHighlight">      M, Initializer-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>, Initializer,</span></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/twine">Twine</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;global&#95;&quot;</span><span class="doxyHighlight">) + <a href="/docs/api/classes/llvm/globalvalue/#a3e999e4bb7297d284f931638721840e5">GlobalValue::dropLLVMManglingEscape</a>(OriginalName));</span></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setSection(getGlobalMetadataSection());</span></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Place metadata in a large section for x86-64 ELF binaries to mitigate</span></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// relocation pressure.</span></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#aaf2ff3020b311fe77e208f80459017aa">setGlobalVariableLargeSection</a>(TargetTriple, &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>);</span></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</span></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ModuleAddressSanitizer::CreateAsanModuleDtor() &#123;</span></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"><span class="doxyHighlight">  AsanDtorFunction = <a href="/docs/api/classes/llvm/function/#a5dfae571c803bc1e2cd79bf98cc1951f">Function::createWithDefaultAttr</a>(</span></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(<a href="/docs/api/classes/llvm/type/#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, 0, <a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>, &amp;M);</span></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><span class="doxyHighlight">  AsanDtorFunction-&gt;addFnAttr(Attribute::NoUnwind);</span></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Ensure Dtor cannot be discarded, even if in a comdat.</span></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#ae879dd14ccc28696f3d8c7b484df3c9a">appendToUsed</a>(M, &#123;AsanDtorFunction&#125;);</span></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;AsanDtorBB = <a href="/docs/api/classes/llvm/basicblock/#a4a5b798214be930cf8e133c032ba0129">BasicBlock::Create</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">, AsanDtorFunction);</span></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/returninst/#a932710d4c1c965497707751eb4f7948f">ReturnInst::Create</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, AsanDtorBB);</span></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::InstrumentGlobalsCOFF(</span></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</span></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout();</span></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> MetadataGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</span></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = MetadataInitializers&#91;i&#93;;</span></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</span></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = CreateMetadataGlobal(Initializer, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;MD = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getContext(), <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>));</span></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setMetadata(LLVMContext::MD&#95;associated, MD);</span></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><span class="doxyHighlight">    MetadataGlobals&#91;i&#93; = <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</span></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The MSVC linker always inserts padding when linking incrementally. We</span></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// cope with that by aligning each struct to its size, which must be a power</span></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// of two.</span></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SizeOfGlobalStruct = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Initializer-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(SizeOfGlobalStruct) &amp;&amp;</span></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;global metadata will not be padded appropriately&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setAlignment(<a href="/docs/api/namespaces/llvm/#ad4b2e7a84faf3d7b6ffb84b541358e00">assumeAligned</a>(SizeOfGlobalStruct));</span></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><span class="doxyHighlight">    SetComdatForGlobalMetadata(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/metadata">Metadata</a>, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update llvm.compiler.used, adding the new metadata globals. This is</span></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// needed so that during LTO these variables stay alive.</span></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MetadataGlobals.empty())</span></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, MetadataGlobals);</span></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::instrumentGlobalsELF(</span></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers,</span></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string &amp;UniqueModuleId) &#123;</span></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Putting globals in a comdat changes the semantic and potentially cause</span></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// false negative odr violations at link time. If odr indicators are used, we</span></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// keep the comdat sections, as link time odr violations will be dectected on</span></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the odr indicator symbols.</span></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseComdatForGlobalsGC = UseOdrIndicator &amp;&amp; !UniqueModuleId.empty();</span></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> MetadataGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</span></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</span></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> =</span></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><span class="doxyHighlight">        CreateMetadataGlobal(MetadataInitializers&#91;i&#93;, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;MD = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getContext(), <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>));</span></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setMetadata(LLVMContext::MD&#95;associated, MD);</span></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"><span class="doxyHighlight">    MetadataGlobals&#91;i&#93; = <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</span></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseComdatForGlobalsGC)</span></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><span class="doxyHighlight">      SetComdatForGlobalMetadata(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/metadata">Metadata</a>, UniqueModuleId);</span></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update llvm.compiler.used, adding the new metadata globals. This is</span></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// needed so that during LTO these variables stay alive.</span></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MetadataGlobals.empty())</span></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, MetadataGlobals);</span></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegisteredFlag serves two purposes. First, we can pass it to dladdr()</span></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to look up the loaded image that contains it. Second, we can store in it</span></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// whether registration has already occurred, to prevent duplicate</span></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// registration.</span></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Common linkage ensures that there is only one global per shared library.</span></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;RegisteredFlag = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><span class="doxyHighlight">      M, IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">GlobalVariable::CommonLinkage</a>,</span></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><span class="doxyHighlight">      ConstantInt::get(IntptrTy, 0), <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>);</span></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><span class="doxyHighlight">  RegisteredFlag-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</span></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create start and stop symbols.</span></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StartELFMetadata = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><span class="doxyHighlight">      M, IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa81fc8db28ac4af45766fbab2e79d466">GlobalVariable::ExternalWeakLinkage</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;start&#95;&quot;</span><span class="doxyHighlight"> + getGlobalMetadataSection());</span></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><span class="doxyHighlight">  StartELFMetadata-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</span></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StopELFMetadata = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><span class="doxyHighlight">      M, IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa81fc8db28ac4af45766fbab2e79d466">GlobalVariable::ExternalWeakLinkage</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;stop&#95;&quot;</span><span class="doxyHighlight"> + getGlobalMetadataSection());</span></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><span class="doxyHighlight">  StopELFMetadata-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</span></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create a call to register the globals with the runtime.</span></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</span></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterElfGlobals,</span></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><span class="doxyHighlight">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy),</span></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><span class="doxyHighlight">                  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StartELFMetadata, IntptrTy),</span></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><span class="doxyHighlight">                  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StopELFMetadata, IntptrTy)&#125;);</span></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We also need to unregister globals at the end, e.g., when a shared library</span></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// gets closed.</span></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a> &amp;&amp; !MetadataGlobals.empty()) &#123;</span></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</span></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><span class="doxyHighlight">    IrbDtor.CreateCall(AsanUnregisterElfGlobals,</span></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><span class="doxyHighlight">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy),</span></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><span class="doxyHighlight">                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StartELFMetadata, IntptrTy),</span></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"><span class="doxyHighlight">                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StopELFMetadata, IntptrTy)&#125;);</span></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::InstrumentGlobalsMachO(</span></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</span></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// On recent Mach-O platforms, use a structure which binds the liveness of</span></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the global variable to the metadata struct. Keep the list of &quot;Liveness&quot; GV</span></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// created to be added to llvm.compiler.used</span></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;LivenessTy = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> LivenessGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</span></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = MetadataInitializers&#91;i&#93;;</span></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</span></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = CreateMetadataGlobal(Initializer, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// On recent Mach-O platforms, we emit the global metadata in a way that</span></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// allows the linker to properly strip dead globals.</span></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LivenessBinder =</span></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(LivenessTy, Initializer-&gt;<a href="/docs/api/classes/llvm/constant/#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(0u),</span></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(<a href="/docs/api/classes/llvm/metadata">Metadata</a>, IntptrTy));</span></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;Liveness = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><span class="doxyHighlight">        M, LivenessTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>, LivenessBinder,</span></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/twine">Twine</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;binder&#95;&quot;</span><span class="doxyHighlight">) + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</span></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><span class="doxyHighlight">    Liveness-&gt;<a href="/docs/api/classes/llvm/globalobject/#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;DATA,&#95;&#95;asan&#95;liveness,regular,live&#95;support&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><span class="doxyHighlight">    LivenessGlobals&#91;i&#93; = Liveness;</span></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update llvm.compiler.used, adding the new liveness globals. This is</span></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// needed so that during LTO these variables stay alive. The alternative</span></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// would be to have the linker handling the LTO symbols, but libLTO</span></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// current API does not expose access to the section for each symbol.</span></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LivenessGlobals.empty())</span></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, LivenessGlobals);</span></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegisteredFlag serves two purposes. First, we can pass it to dladdr()</span></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to look up the loaded image that contains it. Second, we can store in it</span></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// whether registration has already occurred, to prevent duplicate</span></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// registration.</span></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// common linkage ensures that there is only one global per shared library.</span></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;RegisteredFlag = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><span class="doxyHighlight">      M, IntptrTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">GlobalVariable::CommonLinkage</a>,</span></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><span class="doxyHighlight">      ConstantInt::get(IntptrTy, 0), <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>);</span></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><span class="doxyHighlight">  RegisteredFlag-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</span></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</span></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterImageGlobals,</span></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><span class="doxyHighlight">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy)&#125;);</span></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We also need to unregister globals at the end, e.g., when a shared library</span></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// gets closed.</span></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>) &#123;</span></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</span></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><span class="doxyHighlight">    IrbDtor.CreateCall(AsanUnregisterImageGlobals,</span></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><span class="doxyHighlight">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy)&#125;);</span></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::InstrumentGlobalsWithMetadataArray(</span></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</span></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</span></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>();</span></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 0);</span></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// On platforms that don&#39;t have a custom metadata section, we emit an array</span></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of global metadata structures.</span></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;ArrayOfGlobalStructTy =</span></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(MetadataInitializers&#91;0&#93;-&gt;<a href="/docs/api/files/lib/lib/object/tapifile-cpp/#a913a691648e20063bbd278e8f02d8430">getType</a>(), <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AllGlobals = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><span class="doxyHighlight">      M, ArrayOfGlobalStructTy, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>,</span></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/constantarray/#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(ArrayOfGlobalStructTy, MetadataInitializers), </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.Scale &gt; 3)</span></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><span class="doxyHighlight">    AllGlobals-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(1ULL &lt;&lt; Mapping.Scale));</span></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</span></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterGlobals,</span></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><span class="doxyHighlight">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AllGlobals, IntptrTy),</span></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><span class="doxyHighlight">                  ConstantInt::get(IntptrTy, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)&#125;);</span></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We also need to unregister globals at the end, e.g., when a shared library</span></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// gets closed.</span></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>) &#123;</span></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</span></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><span class="doxyHighlight">    IrbDtor.CreateCall(AsanUnregisterGlobals,</span></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><span class="doxyHighlight">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AllGlobals, IntptrTy),</span></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><span class="doxyHighlight">                        ConstantInt::get(IntptrTy, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)&#125;);</span></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><span class="doxyHighlightComment">// This function replaces all global variables with new variables that have</span></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><span class="doxyHighlightComment">// trailing redzones. It also creates a function that poisons</span></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><span class="doxyHighlightComment">// redzones and inserts this function into llvm.global&#95;ctors.</span></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><span class="doxyHighlightComment">// Sets &#42;CtorComdat to true if the global registration code emitted into the</span></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><span class="doxyHighlightComment">// asan constructor is comdat-compatible.</span></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ModuleAddressSanitizer::instrumentGlobals(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><span class="doxyHighlight">                                               </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#42;CtorComdat) &#123;</span></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build set of globals that are aliased by some GA, where</span></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// getExcludedAliasedGlobal(GA) returns the relevant GlobalVariable.</span></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;const GlobalVariable &#42;, 16&gt;</a> AliasedGlobalExclusions;</span></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CompileKernel) &#123;</span></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;GA : <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.aliases()) &#123;</span></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;GV = getExcludedAliasedGlobal(GA))</span></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><span class="doxyHighlight">        AliasedGlobalExclusions.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(GV);</span></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalVariable &#42;, 16&gt;</a> GlobalsToChange;</span></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> : <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.globals()) &#123;</span></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AliasedGlobalExclusions.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &amp;&amp; shouldInstrumentGlobal(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>))</span></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><span class="doxyHighlight">      GlobalsToChange.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> n = GlobalsToChange.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>();</span></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout();</span></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A global is described by a structure</span></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t beg;</span></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t size;</span></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t size&#95;with&#95;redzone;</span></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   const char &#42;name;</span></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   const char &#42;module&#95;name;</span></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t has&#95;dynamic&#95;init;</span></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t padding&#95;for&#95;windows&#95;msvc&#95;incremental&#95;link;</span></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   size&#95;t odr&#95;indicator;</span></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We initialize an array of such structures and pass it to a run-time call.</span></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;GlobalStructTy =</span></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IntptrTy, IntptrTy, IntptrTy, IntptrTy, IntptrTy,</span></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><span class="doxyHighlight">                      IntptrTy, IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalVariable &#42;, 16&gt;</a> NewGlobals(n);</span></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 16&gt;</a> Initializers(n);</span></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; n; i++) &#123;</span></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = GlobalsToChange&#91;i&#93;;</span></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/globalvalue/sanitizermetadata">GlobalValue::SanitizerMetadata</a> MD;</span></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata())</span></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><span class="doxyHighlight">      MD = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata();</span></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The runtime library tries demangling symbol names in the descriptor but</span></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// functionality like &#95;&#95;cxa&#95;demangle may be unavailable (e.g.</span></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// -static-libstdc++). So we demangle the symbol names here.</span></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><span class="doxyHighlight">    std::string NameForGlobal = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().str();</span></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> =</span></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(M, <a href="/docs/api/namespaces/llvm/#ab996639d406a5466d5c8a1586fb4a9d8">llvm::demangle</a>(NameForGlobal),</span></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"><span class="doxyHighlight">                                     </span><span class="doxyHighlightComment">/&#42;AllowMerging&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</span><span class="doxyHighlightStringLiteral">&quot;global&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getValueType();</span></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t SizeInBytes = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Ty);</span></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t RightRedzoneSize = <a href="/docs/api/namespaces/llvm/amdgpu/#afe65ef65468a7a89e95db0c4b32456f3">getRedzoneSizeForGlobal</a>(SizeInBytes);</span></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;RightRedZoneTy = <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), RightRedzoneSize);</span></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;NewTy = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(Ty, RightRedZoneTy);</span></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;NewInitializer = <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</span></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><span class="doxyHighlight">        NewTy, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getInitializer(), <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RightRedZoneTy));</span></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Create a new global variable with enough space for a redzone.</span></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getLinkage();</span></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> == <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>)</span></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>;</span></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;NewGlobal = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</span></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><span class="doxyHighlight">        M, NewTy, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant(), <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>, NewInitializer, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>,</span></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getThreadLocalMode(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAddressSpace());</span></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvariable/#a53f47ebcc1a7ac4553ba2a2eeca596e5">copyAttributesFrom</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a800a5183372ed37a74be5cddf5df325c">setComdat</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat());</span></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a49b398b1c83ef4d42c8f7756b443f61f">setAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(getMinRedzoneSizeForGlobal()));</span></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t fold globals with redzones. ODR violation detector and redzone</span></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// poisoning implicitly creates a dependence on the global&#39;s address, so it</span></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is no longer valid for it to be marked unnamed&#95;addr.</span></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a38c97622dccff7ae31fe0be3b21c9b3d">setUnnamedAddr</a>(<a href="/docs/api/classes/llvm/globalvalue/#ae8df4be75bfc50b1eadd74e85c25fa45a6adf97f83acf6453d4a6a4b1070f3754">GlobalValue::UnnamedAddr::None</a>);</span></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Move null-terminated C strings to &quot;&#95;&#95;asan&#95;cstring&quot; section on Darwin.</span></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.isOSBinFormatMachO() &amp;&amp; !<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSection() &amp;&amp;</span></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant()) &#123;</span></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Seq = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantDataSequential&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getInitializer());</span></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Seq &amp;&amp; Seq-&gt;isCString())</span></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><span class="doxyHighlight">        NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;TEXT,&#95;&#95;asan&#95;cstring,regular&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Transfer the debug info and type metadata.  The payload starts at offset</span></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// zero so we can copy the metadata over as is.</span></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a6aa0afd1200f5f282ca02a9ebcf87ca7">copyMetadata</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, 0);</span></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Indices2&#91;2&#93;;</span></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><span class="doxyHighlight">    Indices2&#91;0&#93; = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</span></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><span class="doxyHighlight">    Indices2&#91;1&#93; = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</span></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(</span></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantexpr/#ae4d4490a35a575d97166684fb15f8662">ConstantExpr::getGetElementPtr</a>(NewTy, NewGlobal, Indices2, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><span class="doxyHighlight">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/value/#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;eraseFromParent();</span></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><span class="doxyHighlight">    NewGlobals&#91;i&#93; = NewGlobal;</span></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;ODRIndicator = <a href="/docs/api/classes/llvm/constantpointernull/#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PtrTy);</span></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvalue">GlobalValue</a> &#42;InstrumentedGlobal = NewGlobal;</span></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CanUsePrivateAliases =</span></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><span class="doxyHighlight">        TargetTriple.isOSBinFormatELF() || TargetTriple.isOSBinFormatMachO() ||</span></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><span class="doxyHighlight">        TargetTriple.isOSBinFormatWasm();</span></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CanUsePrivateAliases &amp;&amp; UsePrivateAlias) &#123;</span></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Create local alias for NewGlobal to avoid crash on ODR between</span></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instrumented and non-instrumented libraries.</span></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><span class="doxyHighlight">      InstrumentedGlobal =</span></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/globalalias/#a8a638534b520f72ab7f2c886da739a6c">GlobalAlias::create</a>(<a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">, NewGlobal);</span></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ODR should not happen for local linkage.</span></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>()) &#123;</span></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><span class="doxyHighlight">      ODRIndicator =</span></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/constantexpr/#a02560cda155aaed54314383bed827d60">ConstantExpr::getIntToPtr</a>(ConstantInt::get(IntptrTy, -1), PtrTy);</span></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseOdrIndicator) &#123;</span></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// With local aliases, we need to provide another externally visible</span></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// symbol &#95;&#95;odr&#95;asan&#95;XXX to detect ODR violation.</span></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;ODRIndicatorSym =</span></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(M, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>,</span></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><span class="doxyHighlight">                             <a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a> + NameForGlobal, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><span class="doxyHighlight">                             NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>());</span></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Set meaningful attributes for indicator symbol.</span></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><span class="doxyHighlight">      ODRIndicatorSym-&gt;setVisibility(NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a28b9561d9ef3d237ef894023187fa26c">getVisibility</a>());</span></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><span class="doxyHighlight">      ODRIndicatorSym-&gt;setDLLStorageClass(NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#af09a662b4e302d0683d0fe9dc2a9335f">getDLLStorageClass</a>());</span></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><span class="doxyHighlight">      ODRIndicatorSym-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><span class="doxyHighlight">      ODRIndicator = ODRIndicatorSym;</span></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</span></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><span class="doxyHighlight">        GlobalStructTy,</span></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(InstrumentedGlobal, IntptrTy),</span></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><span class="doxyHighlight">        ConstantInt::get(IntptrTy, SizeInBytes),</span></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><span class="doxyHighlight">        ConstantInt::get(IntptrTy, SizeInBytes + RightRedzoneSize),</span></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(Name, IntptrTy),</span></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(getOrCreateModuleName(), IntptrTy),</span></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><span class="doxyHighlight">        ConstantInt::get(IntptrTy, MD.<a href="/docs/api/structs/llvm/globalvalue/sanitizermetadata/#ac1da5875b7fe84a87d30ef1a90524c1c">IsDynInit</a>),</span></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IntptrTy),</span></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(ODRIndicator, IntptrTy));</span></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;NEW GLOBAL: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;NewGlobal &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><span class="doxyHighlight">    Initializers&#91;i&#93; = Initializer;</span></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add instrumented globals to llvm.compiler.used list to avoid LTO from</span></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ConstantMerge&#39;ing them.</span></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> GlobalsToAddToUsedList;</span></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; n; i++) &#123;</span></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = NewGlobals&#91;i&#93;;</span></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().empty()) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><span class="doxyHighlight">    GlobalsToAddToUsedList.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalValue &#42;&gt;</a>(GlobalsToAddToUsedList));</span></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseGlobalsGC &amp;&amp; TargetTriple.isOSBinFormatELF()) &#123;</span></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Use COMDAT and register globals even if n == 0 to ensure that (a) the</span></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// linkage unit will only have one module constructor, and (b) the register</span></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// function will be called. The module destructor is not created when n ==</span></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 0</span></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><span class="doxyHighlight">    &#42;CtorComdat = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><span class="doxyHighlight">    instrumentGlobalsELF(IRB, NewGlobals, Initializers, <a href="/docs/api/namespaces/llvm/#a6b8599f07b1b0181899c650b7b385b26">getUniqueModuleId</a>(&amp;M));</span></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (n == 0) &#123;</span></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// When UseGlobalsGC is false, COMDAT can still be used if n == 0, because</span></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// all compile units will have identical module constructor/destructor.</span></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><span class="doxyHighlight">    &#42;CtorComdat = TargetTriple.isOSBinFormatELF();</span></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><span class="doxyHighlight">    &#42;CtorComdat = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseGlobalsGC &amp;&amp; TargetTriple.isOSBinFormatCOFF()) &#123;</span></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><span class="doxyHighlight">      InstrumentGlobalsCOFF(IRB, NewGlobals, Initializers);</span></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseGlobalsGC &amp;&amp; ShouldUseMachOGlobalsSection()) &#123;</span></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><span class="doxyHighlight">      InstrumentGlobalsMachO(IRB, NewGlobals, Initializers);</span></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"><span class="doxyHighlight">      InstrumentGlobalsWithMetadataArray(IRB, NewGlobals, Initializers);</span></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create calls for poisoning before initializers run and unpoisoning after.</span></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a>)</span></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><span class="doxyHighlight">    createInitializerPoisonCalls();</span></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; M);</span></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><span class="doxyHighlight">uint64&#95;t</span></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><span class="doxyHighlight">ModuleAddressSanitizer::getRedzoneSizeForGlobal(uint64&#95;t SizeInBytes)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> uint64&#95;t kMaxRZ = 1 &lt;&lt; 18;</span></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t MinRZ = getMinRedzoneSizeForGlobal();</span></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = 0;</span></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeInBytes &lt;= MinRZ / 2) &#123;</span></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Reduce redzone size for small size objects, e.g. int, char&#91;1&#93;. MinRZ is</span></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// at least 32 bytes, optimize when SizeInBytes is less than or equal to</span></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// half of MinRZ.</span></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = MinRZ - SizeInBytes;</span></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Calculate RZ, where MinRZ &lt;= RZ &lt;= MaxRZ, and RZ ~ 1/4 &#42; SizeInBytes.</span></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = std::clamp((SizeInBytes / MinRZ / 4) &#42; MinRZ, MinRZ, kMaxRZ);</span></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Round up to multiple of MinRZ.</span></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeInBytes % MinRZ)</span></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> += MinRZ - (SizeInBytes % MinRZ);</span></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RZ + SizeInBytes) % MinRZ == 0);</span></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a>;</span></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ModuleAddressSanitizer::GetAsanVersion()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LongSize = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout().getPointerSizeInBits();</span></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isAndroid = <a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getTargetTriple()).<a href="/docs/api/classes/llvm/triple/#a3f3873f607a36e40241082727fef44db">isAndroid</a>();</span></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a> = 8;</span></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 32-bit Android is one version ahead because of the switch to dynamic</span></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// shadow.</span></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a> += (LongSize == 32 &amp;&amp; isAndroid);</span></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a>;</span></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;ModuleAddressSanitizer::getOrCreateModuleName() &#123;</span></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ModuleName) &#123;</span></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We shouldn&#39;t merge same module names, as this string serves as unique</span></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// module ID in runtime.</span></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><span class="doxyHighlight">    ModuleName =</span></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(M, <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getModuleIdentifier(),</span></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><span class="doxyHighlight">                                     </span><span class="doxyHighlightComment">/&#42;AllowMerging&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</span><span class="doxyHighlightStringLiteral">&quot;module&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ModuleName;</span></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aa85ee3a1ece5874da0e12dc71778c036"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aa85ee3a1ece5874da0e12dc71778c036">ModuleAddressSanitizer::instrumentModule</a>() &#123;</span></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><span class="doxyHighlight">  initializeCallbacks();</span></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create a module constructor. A destructor is created lazily because not all</span></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// platforms, and not all modules need it.</span></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>) &#123;</span></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CompileKernel) &#123;</span></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The kernel always builds with its own runtime, and therefore does not</span></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// need the init and version check calls.</span></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><span class="doxyHighlight">      AsanCtorFunction = <a href="/docs/api/namespaces/llvm/#a256980e987af753b4c497757fad18000">createSanitizerCtor</a>(M, <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>);</span></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><span class="doxyHighlight">      std::string AsanVersion = std::to&#95;string(GetAsanVersion());</span></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><span class="doxyHighlight">      std::string VersionCheckName =</span></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><span class="doxyHighlight">          InsertVersionCheck ? (<a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a> + AsanVersion) : </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><span class="doxyHighlight">      std::tie(AsanCtorFunction, std::ignore) =</span></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a7260773aac0c8769857f551c78b439a3">createSanitizerCtorAndInitFunctions</a>(</span></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><span class="doxyHighlight">              M, <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>, <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>, </span><span class="doxyHighlightComment">/&#42;InitArgTypes=&#42;/</span><span class="doxyHighlight">&#123;&#125;,</span></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">/&#42;InitArgs=&#42;/</span><span class="doxyHighlight">&#123;&#125;, VersionCheckName);</span></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CtorComdat = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a>) &#123;</span></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AsanCtorFunction || ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a6adf97f83acf6453d4a6a4b1070f3754">AsanCtorKind::None</a>);</span></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AsanCtorFunction) &#123;</span></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(AsanCtorFunction-&gt;getEntryBlock().getTerminator());</span></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><span class="doxyHighlight">      instrumentGlobals(IRB, &amp;CtorComdat);</span></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;C);</span></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><span class="doxyHighlight">      instrumentGlobals(IRB, &amp;CtorComdat);</span></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t Priority = <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(TargetTriple);</span></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Put the constructor and destructor in comdat if both</span></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (1) global instrumentation is not TU-specific</span></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (2) target is ELF.</span></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseCtorComdat &amp;&amp; TargetTriple.isOSBinFormatELF() &amp;&amp; CtorComdat) &#123;</span></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AsanCtorFunction) &#123;</span></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><span class="doxyHighlight">      AsanCtorFunction-&gt;setComdat(M.getOrInsertComdat(<a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>));</span></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, AsanCtorFunction, Priority, AsanCtorFunction);</span></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AsanDtorFunction) &#123;</span></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><span class="doxyHighlight">      AsanDtorFunction-&gt;setComdat(M.getOrInsertComdat(<a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>));</span></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aece96440bab42936aa9cf334fb0054cc">appendToGlobalDtors</a>(M, AsanDtorFunction, Priority, AsanDtorFunction);</span></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AsanCtorFunction)</span></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, AsanCtorFunction, Priority);</span></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AsanDtorFunction)</span></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aece96440bab42936aa9cf334fb0054cc">appendToGlobalDtors</a>(M, AsanDtorFunction, Priority);</span></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AddressSanitizer::initializeCallbacks(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI) &#123;</span></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create &#95;&#95;asan&#95;report&#42; callbacks.</span></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// IsWrite, TypeSize and Exp are encoded in the function name.</span></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> Exp = 0; Exp &lt; 2; Exp++) &#123;</span></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessIsWrite = 0; AccessIsWrite &lt;= 1; AccessIsWrite++) &#123;</span></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string TypeStr = AccessIsWrite ? </span><span class="doxyHighlightStringLiteral">&quot;store&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;load&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string ExpStr = Exp ? </span><span class="doxyHighlightStringLiteral">&quot;exp&#95;&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string EndingStr = Recover ? </span><span class="doxyHighlightStringLiteral">&quot;&#95;noabort&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Type &#42;, 3&gt;</a> Args2 = &#123;IntptrTy, IntptrTy&#125;;</span></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Type &#42;, 2&gt;</a> Args1&#123;1, IntptrTy&#125;;</span></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><span class="doxyHighlight">      AttributeList AL2;</span></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><span class="doxyHighlight">      AttributeList AL1;</span></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Exp) &#123;</span></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;ExpType = <a href="/docs/api/classes/llvm/type/#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><span class="doxyHighlight">        Args2.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ExpType);</span></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><span class="doxyHighlight">        Args1.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ExpType);</span></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AK = TLI-&gt;getExtAttrForI32Param(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"><span class="doxyHighlight">          AL2 = AL2.addParamAttribute(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, 2, AK);</span></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><span class="doxyHighlight">          AL1 = AL1.addParamAttribute(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, 1, AK);</span></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><span class="doxyHighlight">      AsanErrorCallbackSized&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><span class="doxyHighlight">          <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> + ExpStr + TypeStr + </span><span class="doxyHighlightStringLiteral">&quot;&#95;n&quot;</span><span class="doxyHighlight"> + EndingStr,</span></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args2, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">), AL2);</span></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><span class="doxyHighlight">      AsanMemoryAccessCallbackSized&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><span class="doxyHighlight">          <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a> + ExpStr + TypeStr + </span><span class="doxyHighlightStringLiteral">&quot;N&quot;</span><span class="doxyHighlight"> + EndingStr,</span></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args2, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">), AL2);</span></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessSizeIndex = 0; AccessSizeIndex &lt; <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>;</span></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><span class="doxyHighlight">           AccessSizeIndex++) &#123;</span></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string Suffix = TypeStr + <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(1ULL &lt;&lt; AccessSizeIndex);</span></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><span class="doxyHighlight">        AsanErrorCallback&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93;&#91;AccessSizeIndex&#93; =</span></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><span class="doxyHighlight">                <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> + ExpStr + Suffix + EndingStr,</span></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args1, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">), AL1);</span></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><span class="doxyHighlight">        AsanMemoryAccessCallback&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93;&#91;AccessSizeIndex&#93; =</span></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><span class="doxyHighlight">                <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a> + ExpStr + Suffix + EndingStr,</span></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args1, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">), AL1);</span></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string MemIntrinCallbackPrefix =</span></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><span class="doxyHighlight">      (CompileKernel &amp;&amp; !<a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a>)</span></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><span class="doxyHighlight">          ? std::string(</span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><span class="doxyHighlight">          : <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a>;</span></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840"><span class="doxyHighlight">  AsanMemmove = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </span><span class="doxyHighlightStringLiteral">&quot;memmove&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><span class="doxyHighlight">                                      PtrTy, PtrTy, PtrTy, IntptrTy);</span></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><span class="doxyHighlight">  AsanMemcpy = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </span><span class="doxyHighlightStringLiteral">&quot;memcpy&quot;</span><span class="doxyHighlight">, PtrTy,</span></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><span class="doxyHighlight">                                     PtrTy, PtrTy, IntptrTy);</span></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><span class="doxyHighlight">  AsanMemset = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </span><span class="doxyHighlightStringLiteral">&quot;memset&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><span class="doxyHighlight">                                     TLI-&gt;<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;1&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><span class="doxyHighlight">                                     PtrTy, PtrTy, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), IntptrTy);</span></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><span class="doxyHighlight">  AsanHandleNoReturnFunc =</span></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>());</span></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><span class="doxyHighlight">  AsanPtrCmpFunction =</span></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><span class="doxyHighlight">  AsanPtrSubFunction =</span></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</span></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.InGlobal)</span></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"><span class="doxyHighlight">    AsanShadowGlobal = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertGlobal(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;shadow&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), 0));</span></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><span class="doxyHighlight">  AMDGPUAddressShared =</span></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>(), PtrTy);</span></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><span class="doxyHighlight">  AMDGPUAddressPrivate =</span></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>(), PtrTy);</span></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6">AddressSanitizer::maybeInsertAsanInitAtFunctionEntry</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For each NSObject descendant having a +load method, this method is invoked</span></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// by the ObjC runtime before any of the static constructors is called.</span></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Therefore we need to instrument such methods with a call to &#95;&#95;asan&#95;init</span></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// at the beginning in order to initialize our runtime before any access to</span></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the shadow memory.</span></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We cannot just ignore these methods, because they may call other</span></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instrumented functions.</span></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().contains(</span><span class="doxyHighlightStringLiteral">&quot; load&#93;&quot;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanInitFunction =</span></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a67d90c79914c0bdfadad630647f8843b">declareSanitizerInitFunction</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent(), <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>, &#123;&#125;);</span></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front().begin());</span></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanInitFunction, &#123;&#125;);</span></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54">AddressSanitizer::maybeInsertDynamicShadowAtFunctionEntry</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Generate code only when dynamic addressing is needed.</span></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.Offset != <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>)</span></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front().front());</span></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Mapping.InGlobal) &#123;</span></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a>) &#123;</span></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// An empty inline asm with input reg == output reg.</span></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// An opaque pointer-to-int cast, basically.</span></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/inlineasm">InlineAsm</a> &#42;Asm = <a href="/docs/api/classes/llvm/inlineasm/#a44dec91bb943f56f8bba3e9171a76947">InlineAsm::get</a>(</span></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IntptrTy, &#123;AsanShadowGlobal-&gt;getType()&#125;, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/stringref">StringRef</a>(</span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">), <a href="/docs/api/classes/llvm/stringref">StringRef</a>(</span><span class="doxyHighlightStringLiteral">&quot;=r,0&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">/&#42;hasSideEffects=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><span class="doxyHighlight">      LocalDynamicShadow =</span></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Asm, &#123;AsanShadowGlobal&#125;, </span><span class="doxyHighlightStringLiteral">&quot;.asan.shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"><span class="doxyHighlight">      LocalDynamicShadow =</span></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AsanShadowGlobal, IntptrTy, </span><span class="doxyHighlightStringLiteral">&quot;.asan.shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;GlobalDynamicAddress = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getOrInsertGlobal(</span></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><span class="doxyHighlight">        <a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a>, IntptrTy);</span></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><span class="doxyHighlight">    LocalDynamicShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IntptrTy, GlobalDynamicAddress);</span></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e">AddressSanitizer::markEscapedLocalAllocas</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Find the one possible call to llvm.localescape and pre-mark allocas passed</span></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to it as uninteresting. This assumes we haven&#39;t started processing allocas</span></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// yet. This check is done up front because iterating the use list in</span></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// isInterestingAlloca would be algorithmically slower.</span></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ProcessedAllocas.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;must process localescape before allocas&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Try to get the declaration of llvm.localescape. If it&#39;s not in the module,</span></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// we can exit early.</span></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getFunction(</span><span class="doxyHighlightStringLiteral">&quot;llvm.localescape&quot;</span><span class="doxyHighlight">)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Look for a call to llvm.localescape call in the entry block. It can&#39;t be in</span></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// any other block.</span></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock()) &#123;</span></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;IntrinsicInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;getIntrinsicID() == Intrinsic::localescape) &#123;</span></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We found a call. Mark all the allocas passed in as uninteresting.</span></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/value">Value</a> &#42;Arg : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;args()) &#123;</span></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AllocaInst&gt;</a>(Arg-&gt;stripPointerCasts());</span></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AI &amp;&amp; AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>() &amp;&amp;</span></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><span class="doxyHighlight">               </span><span class="doxyHighlightStringLiteral">&quot;non-static alloca arg to localescape&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><span class="doxyHighlight">        ProcessedAllocas&#91;AI&#93; = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">AddressSanitizer::suppressInstrumentationSiteForDebug</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> &amp;Instrumented) &#123;</span></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ShouldInstrument =</span></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><span class="doxyHighlight">      <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a> &lt; 0 || <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a> &lt; 0 ||</span></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><span class="doxyHighlight">      (Instrumented &gt;= <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a> &amp;&amp; Instrumented &lt;= <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a>);</span></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><span class="doxyHighlight">  Instrumented++;</span></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !ShouldInstrument;</span></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a489ae04c136c4b088d849d7d6dc20965"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a489ae04c136c4b088d849d7d6dc20965">AddressSanitizer::instrumentFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</span></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><span class="doxyHighlight">                                          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI) &#123;</span></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.empty())</span></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a>.empty() &amp;&amp; <a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a> == <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;asan&#95;&quot;</span><span class="doxyHighlight">)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isPresplitCoroutine())</span></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FunctionModified = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not apply any instrumentation for naked functions.</span></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::Naked))</span></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FunctionModified;</span></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If needed, insert &#95;&#95;asan&#95;init before checking for SanitizeAddress attr.</span></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function needs to be called even if the function body is not</span></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instrumented.</span></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6">maybeInsertAsanInitAtFunctionEntry</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</span></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><span class="doxyHighlight">    FunctionModified = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Leave if the function doesn&#39;t need instrumentation.</span></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::SanitizeAddress)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FunctionModified;</span></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::DisableSanitizerInstrumentation))</span></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FunctionModified;</span></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ASAN instrumenting:\\n&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><span class="doxyHighlight">  initializeCallbacks(TLI);</span></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><span class="doxyHighlight">  FunctionStateRAII CleanupObj(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> RTCI(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><span class="doxyHighlight">  FunctionModified |= <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54">maybeInsertDynamicShadowAtFunctionEntry</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We can&#39;t instrument allocas used with llvm.localescape. Only static allocas</span></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// can be passed to that intrinsic.</span></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e">markEscapedLocalAllocas</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We want to instrument every address only once per basic block (unless there</span></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// are calls between uses).</span></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;Value &#42;, 16&gt;</a> TempsToInstrument;</span></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InterestingMemoryOperand, 16&gt;</a> OperandsToInstrument;</span></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemIntrinsic &#42;, 16&gt;</a> IntrinToInstrument;</span></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> NoReturnCalls;</span></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;BasicBlock &#42;, 16&gt;</a> AllBlocks;</span></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 16&gt;</a> PointerComparisonsOrSubtracts;</span></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fill the set of memory operations to instrument.</span></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><span class="doxyHighlight">    AllBlocks.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;BB);</span></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><span class="doxyHighlight">    TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimplbase/#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</span></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumInsnsPerBB = 0;</span></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Inst : BB) &#123;</span></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LooksLikeCodeInBug11395(&amp;Inst)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip instructions inserted by another instrumentation.</span></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Inst.<a href="/docs/api/classes/llvm/instruction/#a565f546ad95bd3a9bbe9a1e5040803f0">hasMetadata</a>(LLVMContext::MD&#95;nosanitize))</span></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InterestingMemoryOperand, 1&gt;</a> InterestingOperands;</span></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc">getInterestingMemoryOperands</a>(&amp;Inst, InterestingOperands);</span></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InterestingOperands.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>()) &#123;</span></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Operand : InterestingOperands) &#123;</span></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a>) &#123;</span></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Operand.getPtr();</span></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// If we have a mask, skip instrumentation if we&#39;ve already</span></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// instrumented the full object. But don&#39;t add to TempsToInstrument</span></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// because we might get another load/store with a different mask.</span></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Operand.MaybeMask) &#123;</span></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</span></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// We&#39;ve seen this (whole) temp in the current BB.</span></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>).second)</span></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// We&#39;ve seen this temp in the current BB.</span></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><span class="doxyHighlight">          OperandsToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Operand);</span></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><span class="doxyHighlight">          NumInsnsPerBB++;</span></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (((<a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a> || <a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a>) &amp;&amp;</span></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><span class="doxyHighlight">                  <a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a>(&amp;Inst)) ||</span></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"><span class="doxyHighlight">                 ((<a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a> || <a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a>) &amp;&amp;</span></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><span class="doxyHighlight">                  <a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a>(&amp;Inst))) &#123;</span></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><span class="doxyHighlight">        PointerComparisonsOrSubtracts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;Inst);</span></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;MemIntrinsic&gt;</a>(&amp;Inst)) &#123;</span></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// ok, take it.</span></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><span class="doxyHighlight">        IntrinToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><span class="doxyHighlight">        NumInsnsPerBB++;</span></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;CB = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallBase&gt;</a>(&amp;Inst)) &#123;</span></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// A call inside BB.</span></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><span class="doxyHighlight">          TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimplbase/#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</span></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CB-&gt;doesNotReturn())</span></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><span class="doxyHighlight">            NoReturnCalls.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(CB);</span></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;Inst))</span></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#ae63427c4d8f3c1ce48401b38ed9198f1">maybeMarkSanitizerLibraryCallNoBuiltin</a>(CI, TLI);</span></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumInsnsPerBB &gt;= <a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a>) </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseCalls = (InstrumentationWithCallsThreshold &gt;= 0 &amp;&amp;</span></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><span class="doxyHighlight">                   OperandsToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() + IntrinToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt;</span></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><span class="doxyHighlight">                       (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">)InstrumentationWithCallsThreshold);</span></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout();</span></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> ObjSizeVis(DL, TLI, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext());</span></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument.</span></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumInstrumented = 0;</span></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Operand : OperandsToInstrument) &#123;</span></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">suppressInstrumentationSiteForDebug</a>(NumInstrumented))</span></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b">instrumentMop</a>(ObjSizeVis, Operand, UseCalls,</span></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><span class="doxyHighlight">                    <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout(), RTCI);</span></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><span class="doxyHighlight">    FunctionModified = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Inst : IntrinToInstrument) &#123;</span></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">suppressInstrumentationSiteForDebug</a>(NumInstrumented))</span></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea">instrumentMemIntrinsic</a>(Inst, RTCI);</span></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><span class="doxyHighlight">    FunctionModified = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e">FunctionStackPoisoner</a> FSP(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, RTCI);</span></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ChangedStack = FSP.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0">runOnFunction</a>();</span></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We must unpoison the stack before NoReturn calls (throw, &#95;exit, etc).</span></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See e.g. https://github.com/google/sanitizers/issues/37</span></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;CI : NoReturnCalls) &#123;</span></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(CI);</span></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><span class="doxyHighlight">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanHandleNoReturnFunc, &#123;&#125;);</span></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Inst : PointerComparisonsOrSubtracts) &#123;</span></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38">instrumentPointerComparisonOrSubtraction</a>(Inst, RTCI);</span></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><span class="doxyHighlight">    FunctionModified = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ChangedStack || !NoReturnCalls.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>())</span></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><span class="doxyHighlight">    FunctionModified = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089"></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ASAN done instrumenting: &quot;</span><span class="doxyHighlight"> &lt;&lt; FunctionModified &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><span class="doxyHighlight">                    &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FunctionModified;</span></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><span class="doxyHighlightComment">// Workaround for bug 11395: we don&#39;t want to instrument stack in functions</span></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><span class="doxyHighlightComment">// with large assembly blobs (32-bit only), otherwise reg alloc may crash.</span></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><span class="doxyHighlightComment">// FIXME: remove once the bug 11395 is fixed.</span></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AddressSanitizer::LooksLikeCodeInBug11395(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LongSize != 32) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CI || !CI-&gt;<a href="/docs/api/classes/llvm/callbase/#a018f0394a375233d538109968b76a05a">isInlineAsm</a>()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI-&gt;<a href="/docs/api/classes/llvm/callbase/#adde2ea00dd2613ee41bfe91908e4e68e">arg&#95;size</a>() &lt;= 5)</span></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We have inline assembly with quite a few arguments.</span></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878">FunctionStackPoisoner::initializeCallbacks</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M) &#123;</span></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>);</span></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a> ||</span></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>) &#123;</span></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;MallocNameTemplate =</span></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a></span></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><span class="doxyHighlight">            ? <a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a></span></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><span class="doxyHighlight">            : <a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a>;</span></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> Index = 0; Index &lt;= <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>; Index++) &#123;</span></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><span class="doxyHighlight">      std::string Suffix = <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(Index);</span></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;Index&#93; = M.getOrInsertFunction(</span></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><span class="doxyHighlight">          MallocNameTemplate + Suffix, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;Index&#93; =</span></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><span class="doxyHighlight">          M.getOrInsertFunction(<a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a> + Suffix,</span></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><span class="doxyHighlight">                                IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterScope) &#123;</span></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a> = M.getOrInsertFunction(</span></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><span class="doxyHighlight">        <a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a> = M.getOrInsertFunction(</span></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><span class="doxyHighlight">        <a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Val : &#123;0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0xf1, 0xf2,</span></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><span class="doxyHighlight">                     0xf3, 0xf5, 0xf8&#125;) &#123;</span></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><span class="doxyHighlight">    std::ostringstream Name;</span></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><span class="doxyHighlight">    Name &lt;&lt; <a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a>;</span></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><span class="doxyHighlight">    Name &lt;&lt; std::setw(2) &lt;&lt; std::setfill(</span><span class="doxyHighlightCharLiteral">&#39;0&#39;</span><span class="doxyHighlight">) &lt;&lt; std::hex &lt;&lt; Val;</span></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93; =</span></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><span class="doxyHighlight">        M.getOrInsertFunction(Name.str(), IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a> = M.getOrInsertFunction(</span></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><span class="doxyHighlight">      <a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a> = M.getOrInsertFunction(</span></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><span class="doxyHighlight">      <a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">FunctionStackPoisoner::copyToShadowInline</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</span></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</span></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><span class="doxyHighlight">                                               </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Begin, </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> End,</span></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</span></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Begin &gt;= End)</span></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> LargestStoreSizeInBytes =</span></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><span class="doxyHighlight">      std::min&lt;size&#95;t&gt;(</span><span class="doxyHighlightKeyword">sizeof</span><span class="doxyHighlight">(uint64&#95;t), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8);</span></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLittleEndian = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout().isLittleEndian();</span></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Poison given range in shadow using larges store size with out leading and</span></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// trailing zeros in ShadowMask. Zeros never change, so they need neither</span></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// poisoning nor up-poisoning. Still we don&#39;t mind if some of them get into a</span></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// middle of a store.</span></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = Begin; i &lt; End;) &#123;</span></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ShadowMask&#91;i&#93;) &#123;</span></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ShadowBytes&#91;i&#93;);</span></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><span class="doxyHighlight">      ++i;</span></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> StoreSizeInBytes = LargestStoreSizeInBytes;</span></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Fit store size into the range.</span></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (StoreSizeInBytes &gt; End - i)</span></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><span class="doxyHighlight">      StoreSizeInBytes /= 2;</span></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Minimize store size by trimming trailing zeros.</span></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> j = StoreSizeInBytes - 1; j &amp;&amp; !ShadowMask&#91;i + j&#93;; --j) &#123;</span></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (j &lt;= StoreSizeInBytes / 2)</span></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><span class="doxyHighlight">        StoreSizeInBytes /= 2;</span></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><span class="doxyHighlight">    uint64&#95;t Val = 0;</span></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> j = 0; j &lt; StoreSizeInBytes; j++) &#123;</span></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsLittleEndian)</span></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186"><span class="doxyHighlight">        Val |= (uint64&#95;t)ShadowBytes&#91;i + j&#93; &lt;&lt; (8 &#42; j);</span></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><span class="doxyHighlight">        Val = (Val &lt;&lt; 8) | ShadowBytes&#91;i + j&#93;;</span></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ShadowBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, i));</span></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a95df4f20c933779306b9a936b88b99a5">getIntN</a>(StoreSizeInBytes &#42; 8, Val);</span></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(</span></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a>-&gt;getContext())),</span></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><span class="doxyHighlight">    i += StoreSizeInBytes;</span></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">FunctionStackPoisoner::copyToShadow</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</span></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</span></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</span></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowMask, ShadowBytes, 0, ShadowMask.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(), IRB, ShadowBase);</span></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37064f808b1971939c4076441e36f79d"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">FunctionStackPoisoner::copyToShadow</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</span></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</span></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Begin, </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> End,</span></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</span></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShadowMask.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == ShadowBytes.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</span></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a> = Begin;</span></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = Begin, j = Begin + 1; i &lt; End; i = j++) &#123;</span></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ShadowMask&#91;i&#93;) &#123;</span></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ShadowBytes&#91;i&#93;);</span></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><span class="doxyHighlight">    uint8&#95;t Val = ShadowBytes&#91;i&#93;;</span></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93;)</span></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Skip same values.</span></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; j &lt; End &amp;&amp; ShadowMask&#91;j&#93; &amp;&amp; Val == ShadowBytes&#91;j&#93;; ++j) &#123;</span></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (j - i &gt;= <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.MaxInlinePoisoningSize) &#123;</span></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">copyToShadowInline</a>(ShadowMask, ShadowBytes, <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>, i, IRB, ShadowBase);</span></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</span></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><span class="doxyHighlight">          IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93;,</span></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><span class="doxyHighlight">          &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ShadowBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, i)),</span></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><span class="doxyHighlight">           ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, j - i)&#125;);</span></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a> = j;</span></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">copyToShadowInline</a>(ShadowMask, ShadowBytes, <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>, End, IRB, ShadowBase);</span></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><span class="doxyHighlightComment">// Fake stack allocator (asan&#95;fake&#95;stack.h) has 11 size classes</span></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><span class="doxyHighlightComment">// for every power of 2 from kMinStackMallocSize to kMaxAsanStackMallocSizeClass</span></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241" lineLink="#a956c8ddbdae78e48e5a76c33430a4ef6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(uint64&#95;t LocalStackSize) &#123;</span></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocalStackSize &lt;= <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>);</span></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><span class="doxyHighlight">  uint64&#95;t MaxSize = <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a>;</span></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0;; i++, MaxSize &#42;= 2)</span></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalStackSize &lt;= MaxSize) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> i;</span></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;impossible LocalStackSize&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0">FunctionStackPoisoner::copyArgsPassedByValToAllocas</a>() &#123;</span></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CopyInsertPoint = &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.front().front();</span></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CopyInsertPoint == <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LocalDynamicShadow) &#123;</span></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Insert after the dynamic shadow location is determined</span></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><span class="doxyHighlight">    CopyInsertPoint = CopyInsertPoint-&gt;<a href="/docs/api/classes/llvm/ilist-node-with-parent/#a62ee7ece4986606d41363bc1f70d5ab2">getNextNode</a>();</span></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CopyInsertPoint);</span></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(CopyInsertPoint);</span></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout();</span></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/argument">Argument</a> &amp;Arg : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.args()) &#123;</span></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Arg.hasByValAttr()) &#123;</span></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = Arg.getParamByValType();</span></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment =</span></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getValueOrABITypeAlignment(Arg.getParamAlign(), Ty);</span></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(</span></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><span class="doxyHighlight">          Ty, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><span class="doxyHighlight">          (Arg.hasName() ? Arg.getName() : </span><span class="doxyHighlightStringLiteral">&quot;Arg&quot;</span><span class="doxyHighlight"> + <a href="/docs/api/classes/llvm/twine">Twine</a>(Arg.getArgNo())) +</span></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><span class="doxyHighlight">              </span><span class="doxyHighlightStringLiteral">&quot;.byval&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><span class="doxyHighlight">      AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(Alignment);</span></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><span class="doxyHighlight">      Arg.replaceAllUsesWith(AI);</span></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><span class="doxyHighlight">      uint64&#95;t AllocSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Ty);</span></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(AI, Alignment, &amp;Arg, Alignment, AllocSize);</span></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">FunctionStackPoisoner::createPHI</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</span></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><span class="doxyHighlight">                                          <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfTrue,</span></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"><span class="doxyHighlight">                                          <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm,</span></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><span class="doxyHighlight">                                          <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfFalse) &#123;</span></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a876fb556ecea804faa2cd8ad1e498ec3">CreatePHI</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 2);</span></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;CondBlock = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>)-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>();</span></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(ValueIfFalse, CondBlock);</span></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;ThenBlock = ThenTerm-&gt;<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>();</span></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(ValueIfTrue, ThenBlock);</span></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>;</span></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">FunctionStackPoisoner::createAllocaForLayout</a>(</span></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>) &#123;</span></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;Alloca;</span></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>) &#123;</span></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><span class="doxyHighlight">    Alloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><span class="doxyHighlight">                              ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), L.FrameSize),</span></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><span class="doxyHighlight">                              </span><span class="doxyHighlightStringLiteral">&quot;MyAlloca&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><span class="doxyHighlight">    Alloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), L.FrameSize),</span></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;MyAlloca&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Alloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>());</span></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a> &amp; (<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a> - 1)) == 0);</span></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><span class="doxyHighlight">  uint64&#95;t FrameAlignment = std::max(L.FrameAlignment, uint64&#95;t(<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a>));</span></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><span class="doxyHighlight">  Alloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(FrameAlignment));</span></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Alloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba">FunctionStackPoisoner::createDynamicAllocasInitStorage</a>() &#123;</span></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;FirstBB = &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.begin();</span></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Instruction&gt;</a>(FirstBB.<a href="/docs/api/classes/llvm/basicblock/#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()));</span></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</span></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(32));</span></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93">FunctionStackPoisoner::processDynamicAllocas</a>() &#123;</span></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.empty()) &#123;</span></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.empty());</span></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert poison calls for lifetime intrinsics for dynamic allocas.</span></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>) &#123;</span></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.InsBefore);</span></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI);</span></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;APC.AI));</span></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!APC.AI-&gt;isStaticAlloca());</span></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(APC.InsBefore);</span></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66">poisonAlloca</a>(APC.AI, APC.Size, IRB, APC.DoPoison);</span></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Dynamic allocas will be unpoisoned unconditionally below in</span></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// unpoisonDynamicAllocas.</span></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Flag that we need unpoison static allocas.</span></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle dynamic allocas.</span></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba">createDynamicAllocasInitStorage</a>();</span></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>)</span></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa">handleDynamicAllocaCall</a>(AI);</span></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892">unpoisonDynamicAllocas</a>();</span></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341"></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><span class="doxyHighlightComment">/// Collect instructions in the entry block after \\p InsBefore which initialize</span></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><span class="doxyHighlightComment">/// permanent storage for a function argument. These instructions must remain in</span></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><span class="doxyHighlightComment">/// the entry block so that uninitialized values do not appear in backtraces. An</span></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><span class="doxyHighlightComment">/// added benefit is that this conserves spill slots. This does not move stores</span></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><span class="doxyHighlightComment">/// before instrumented / &quot;interesting&quot; allocas.</span></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347" lineLink="#a0050ea5bb47a2b75ed9e8239bcd469a6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a>(</span></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><span class="doxyHighlight">    AddressSanitizer &amp;ASan, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;InsBefore,</span></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;Instruction &#42;&gt;</a> &amp;InitInsts) &#123;</span></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Start = InsBefore.<a href="/docs/api/classes/llvm/instruction/#a91bd28adea418a08cec78b72413d9d45">getNextNonDebugInstruction</a>();</span></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;It = Start; It; It = It-&gt;getNextNonDebugInstruction()) &#123;</span></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Argument initialization looks like:</span></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 1) store &lt;Argument&gt;, &lt;Alloca&gt; OR</span></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 2) &lt;CastArgument&gt; = cast &lt;Argument&gt; to ...</span></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//    store &lt;CastArgument&gt; to &lt;Alloca&gt;</span></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do not consider any other kind of instruction.</span></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note: This covers all known cases, but may not be exhaustive. An</span></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// alternative to pattern-matching stores is to DFS over all Argument uses:</span></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// this might be more general, but is probably much more complicated.</span></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(It) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CastInst&gt;</a>(It))</span></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Store = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StoreInst&gt;</a>(It)) &#123;</span></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The store destination must be an alloca that isn&#39;t interesting for</span></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// ASan to instrument. These are moved up before InsBefore, and they&#39;re</span></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// not interesting because allocas for arguments can be mem2reg&#39;d.</span></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Alloca = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AllocaInst&gt;</a>(Store-&gt;getPointerOperand());</span></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Alloca || ASan.isInterestingAlloca(&#42;Alloca))</span></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Val = Store-&gt;getValueOperand();</span></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsDirectArgInit = <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Argument&gt;</a>(Val);</span></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsArgInitViaCast =</span></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CastInst&gt;</a>(Val) &amp;&amp;</span></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Argument&gt;</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CastInst&gt;</a>(Val)-&gt;getOperand(0)) &amp;&amp;</span></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Check that the cast appears directly before the store. Otherwise</span></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// moving the cast before InsBefore may break the IR.</span></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><span class="doxyHighlight">          Val == It-&gt;getPrevNonDebugInstruction();</span></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsArgInit = IsDirectArgInit || IsArgInitViaCast;</span></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsArgInit)</span></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsArgInitViaCast)</span></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><span class="doxyHighlight">        InitInsts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(Val));</span></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><span class="doxyHighlight">      InitInsts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Store);</span></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do not reorder past unknown instructions: argument initialization should</span></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// only involve casts and stores.</span></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0">FunctionStackPoisoner::processStaticAllocas</a>() &#123;</span></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty()) &#123;</span></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.empty());</span></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> StackMallocIdx = -1;</span></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> EntryDebugLocation;</span></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SP = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getSubprogram())</span></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><span class="doxyHighlight">    EntryDebugLocation =</span></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(SP-&gt;getContext(), SP-&gt;getScopeLine(), 0, SP);</span></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsBefore = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>&#91;0&#93;;</span></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InsBefore);</span></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Make sure non-instrumented allocas stay in the entry block. Otherwise,</span></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// debug info is broken, because only entry-block allocas are treated as</span></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// regular stack slots.</span></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsBeforeB = InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>();</span></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsBeforeB == &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getEntryBlock());</span></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>)</span></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AI-&gt;getParent() == InsBeforeB)</span></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><span class="doxyHighlight">      AI-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</span></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Move stores of arguments into entry-block allocas as well. This prevents</span></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// extra stack slots from being generated (to house the argument values until</span></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// they can be stored into the allocas). This also prevents uninitialized</span></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// values from being shown in backtraces.</span></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> ArgInitInsts;</span></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><span class="doxyHighlight">  <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>, &#42;InsBefore, ArgInitInsts);</span></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ArgInitInst : ArgInitInsts)</span></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><span class="doxyHighlight">    ArgInitInst-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</span></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have a call to llvm.localescape, keep it in the entry block.</span></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a>)</span></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a>-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</span></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;ASanStackVariableDescription, 16&gt;</a> SVD;</span></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><span class="doxyHighlight">  SVD.<a href="/docs/api/classes/llvm/smallvectorimpl/#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.size());</span></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>) &#123;</span></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = &#123;AI-&gt;getName().data(),</span></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><span class="doxyHighlight">                                      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.getAllocaSizeInBytes(&#42;AI),</span></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><span class="doxyHighlight">                                      0,</span></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><span class="doxyHighlight">                                      AI-&gt;getAlign().value(),</span></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439"><span class="doxyHighlight">                                      AI,</span></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><span class="doxyHighlight">                                      0,</span></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"><span class="doxyHighlight">                                      0&#125;;</span></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><span class="doxyHighlight">    SVD.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</span></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Minimal header size (left redzone) is 4 pointers,</span></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// i.e. 32 bytes on 64-bit platforms and 16 bytes in 32-bit platforms.</span></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><span class="doxyHighlight">  uint64&#95;t Granularity = 1ULL &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>.Scale;</span></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><span class="doxyHighlight">  uint64&#95;t MinHeaderSize = std::max((uint64&#95;t)<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 2, Granularity);</span></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L =</span></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9c3dc14da623315dbade0f0d23c8976a">ComputeASanStackFrameLayout</a>(SVD, Granularity, MinHeaderSize);</span></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build AllocaToSVDMap for ASanStackVariableDescription lookup.</span></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const AllocaInst &#42;, ASanStackVariableDescription &#42;&gt;</a> AllocaToSVDMap;</span></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> : SVD)</span></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><span class="doxyHighlight">    AllocaToSVDMap&#91;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.AI&#93; = &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>;</span></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update SVD with information from lifetime intrinsics.</span></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>) &#123;</span></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.InsBefore);</span></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI);</span></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;APC.AI));</span></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI-&gt;isStaticAlloca());</span></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> = &#42;AllocaToSVDMap&#91;APC.AI&#93;;</span></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.LifetimeSize = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Size;</span></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;FnLoc = EntryDebugLocation.<a href="/docs/api/classes/llvm/debugloc/#a4ff1bb484be62f8dac94fc087f72f524">get</a>()) &#123;</span></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;LifetimeLoc = APC.InsBefore-&gt;getDebugLoc().<a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">get</a>()) &#123;</span></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LifetimeLoc-&gt;getFile() == FnLoc-&gt;getFile())</span></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Line = LifetimeLoc-&gt;getLine())</span></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line = std::min(<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line ? <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line : Line, Line);</span></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DescriptionString = <a href="/docs/api/namespaces/llvm/#a5443261ddc0795520b7c673e11af38f3">ComputeASanStackFrameDescription</a>(SVD);</span></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; DescriptionString &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; --- &quot;</span><span class="doxyHighlight"> &lt;&lt; L.FrameSize &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><span class="doxyHighlight">  uint64&#95;t LocalStackSize = L.FrameSize;</span></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoStackMalloc =</span></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn != <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda6e7b34fa59e1bd229b207892956dc41c">AsanDetectStackUseAfterReturnMode::Never</a> &amp;&amp;</span></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><span class="doxyHighlight">      !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.CompileKernel &amp;&amp; LocalStackSize &lt;= <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>;</span></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoDynamicAlloca = <a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a>;</span></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Don&#39;t do dynamic alloca or stack malloc if:</span></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 1) There is inline asm: too often it makes assumptions on which registers</span></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    are available.</span></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 2) There is a returns&#95;twice call (typically setjmp), which is</span></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    optimization-hostile, and doesn&#39;t play well with introduced indirect</span></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    register-relative calculation of local variable addresses.</span></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><span class="doxyHighlight">  DoDynamicAlloca &amp;= !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a>;</span></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><span class="doxyHighlight">  DoStackMalloc &amp;= !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a>;</span></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;StaticAlloca =</span></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><span class="doxyHighlight">      DoDynamicAlloca ? nullptr : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRB, L, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;FakeStack;</span></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBase;</span></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBaseAlloca;</span></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><span class="doxyHighlight">  uint8&#95;t DIExprFlags = <a href="/docs/api/classes/llvm/diexpression/#a6472489551b8960cc115a93d95eef9f6a4ce0a0358c0de36a6ea4413d7abcbca8">DIExpression::ApplyOffset</a>;</span></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DoStackMalloc) &#123;</span></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><span class="doxyHighlight">    LocalStackBaseAlloca =</span></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;asan&#95;local&#95;stack&#95;base&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>) &#123;</span></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// void &#42;FakeStack = &#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return</span></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     ? &#95;&#95;asan&#95;stack&#95;malloc&#95;N(LocalStackSize)</span></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     : nullptr;</span></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// void &#42;LocalStackBase = (FakeStack) ? FakeStack :</span></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//                        alloca(LocalStackSize);</span></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;OptionDetectUseAfterReturn = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent()-&gt;getOrInsertGlobal(</span></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><span class="doxyHighlight">          <a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>());</span></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;UseAfterReturnIsEnabled = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(</span></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), OptionDetectUseAfterReturn),</span></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>()));</span></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Term =</span></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(UseAfterReturnIsEnabled, InsBefore, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBIf(Term);</span></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><span class="doxyHighlight">      StackMallocIdx = <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(LocalStackSize);</span></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackMallocIdx &lt;= <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>);</span></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;FakeStackValue =</span></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRBIf, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;StackMallocIdx&#93;,</span></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><span class="doxyHighlight">                                 ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize));</span></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsBefore);</span></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><span class="doxyHighlight">      FakeStack = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">createPHI</a>(IRB, UseAfterReturnIsEnabled, FakeStackValue, Term,</span></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><span class="doxyHighlight">                            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 0));</span></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// assert(ASan.UseAfterReturn == AsanDetectStackUseAfterReturnMode:Always)</span></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// void &#42;FakeStack = &#95;&#95;asan&#95;stack&#95;malloc&#95;N(LocalStackSize);</span></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// void &#42;LocalStackBase = (FakeStack) ? FakeStack :</span></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//                        alloca(LocalStackSize);</span></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><span class="doxyHighlight">      StackMallocIdx = <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(LocalStackSize);</span></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><span class="doxyHighlight">      FakeStack =</span></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;StackMallocIdx&#93;,</span></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><span class="doxyHighlight">                                 ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize));</span></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NoFakeStack =</span></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8c75539a39f167f352b37ccdd788a7e4">CreateICmpEQ</a>(FakeStack, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>));</span></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Term =</span></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(NoFakeStack, InsBefore, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBIf(Term);</span></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaValue =</span></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><span class="doxyHighlight">        DoDynamicAlloca ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRBIf, L, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) : StaticAlloca;</span></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsBefore);</span></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><span class="doxyHighlight">    LocalStackBase = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">createPHI</a>(IRB, NoFakeStack, AllocaValue, Term, FakeStack);</span></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(LocalStackBase, LocalStackBaseAlloca);</span></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><span class="doxyHighlight">    DIExprFlags |= <a href="/docs/api/classes/llvm/diexpression/#a6472489551b8960cc115a93d95eef9f6a18f3c7099f5b8bfe10361a97ee34a5c9">DIExpression::DerefBefore</a>;</span></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// void &#42;FakeStack = nullptr;</span></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// void &#42;LocalStackBase = alloca(LocalStackSize);</span></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><span class="doxyHighlight">    FakeStack = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 0);</span></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><span class="doxyHighlight">    LocalStackBase =</span></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"><span class="doxyHighlight">        DoDynamicAlloca ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRB, L, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) : StaticAlloca;</span></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><span class="doxyHighlight">    LocalStackBaseAlloca = LocalStackBase;</span></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It shouldn&#39;t matter whether we pass an &#96;alloca&#96; or a &#96;ptrtoint&#96; as the</span></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// dbg.declare address opereand, but passing a &#96;ptrtoint&#96; seems to confuse</span></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// later passes and can result in dropped variable coverage in debug info.</span></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBaseAllocaPtr =</span></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;PtrToIntInst&gt;</a>(LocalStackBaseAlloca)</span></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><span class="doxyHighlight">          ? <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PtrToIntInst&gt;</a>(LocalStackBaseAlloca)-&gt;getPointerOperand()</span></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><span class="doxyHighlight">          : LocalStackBaseAlloca;</span></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(LocalStackBaseAllocaPtr) &amp;&amp;</span></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Variable descriptions relative to ASan stack base will be dropped&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Replace Alloca instructions with base+offset.</span></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> : SVD) &#123;</span></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.AI;</span></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#afae608ddbbaa668b04aac083a6683245">replaceDbgDeclare</a>(AI, LocalStackBaseAllocaPtr, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>, DIExprFlags,</span></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset);</span></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAllocaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset)),</span></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"><span class="doxyHighlight">        AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a5d19f3955a23e8eb2a974efcc8fb19da">getType</a>());</span></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><span class="doxyHighlight">    AI-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewAllocaPtr);</span></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The left-most redzone has enough space for at least 4 pointers.</span></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Write the Magic value to redzone&#91;0&#93;.</span></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(LocalStackBase, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</span></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a>),</span></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><span class="doxyHighlight">                  BasePlus0);</span></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Write the frame description constant to redzone&#91;1&#93;.</span></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase,</span></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><span class="doxyHighlight">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8)),</span></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</span></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StackDescriptionGlobal =</span></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent(), DescriptionString,</span></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><span class="doxyHighlight">                                   </span><span class="doxyHighlightComment">/&#42;AllowMerging&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</span><span class="doxyHighlightStringLiteral">&quot;stack&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Description = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StackDescriptionGlobal, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(Description, BasePlus1);</span></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Write the PC to redzone&#91;2&#93;.</span></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase,</span></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"><span class="doxyHighlight">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 2 &#42; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8)),</span></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</span></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), BasePlus2);</span></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ShadowAfterScope = <a href="/docs/api/namespaces/llvm/#a14a462c7b5d011363ae9c50a15595609">GetShadowBytesAfterScope</a>(SVD, L);</span></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Poison the stack red zones at the entry.</span></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.memToShadow(LocalStackBase, IRB);</span></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// As mask we must use most poisoned case: red zones and after scope.</span></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// As bytes we can use either the same or just red zones only.</span></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowAfterScope, IRB, ShadowBase);</span></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.empty()) &#123;</span></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ShadowInScope = <a href="/docs/api/namespaces/llvm/#a575e3a33ce947932f93b30172ca12f05">GetShadowBytes</a>(SVD, L);</span></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Poison static allocas near lifetime intrinsics.</span></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>) &#123;</span></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> = &#42;AllocaToSVDMap&#91;APC.AI&#93;;</span></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset % L.Granularity == 0);</span></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> Begin = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset / L.Granularity;</span></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> End = Begin + (APC.Size + L.Granularity - 1) / L.Granularity;</span></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(APC.InsBefore);</span></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope,</span></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><span class="doxyHighlight">                   APC.DoPoison ? ShadowAfterScope : ShadowInScope, Begin, End,</span></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><span class="doxyHighlight">                   IRB, ShadowBase);</span></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint8&#95;t, 64&gt;</a> ShadowClean(ShadowAfterScope.size(), 0);</span></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint8&#95;t, 64&gt;</a> ShadowAfterReturn;</span></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (Un)poison the stack before all ret instructions.</span></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Ret : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>) &#123;</span></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBRet(Ret);</span></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Mark the current frame as retired.</span></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><span class="doxyHighlight">    IRBRet.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a>),</span></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><span class="doxyHighlight">                       BasePlus0);</span></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DoStackMalloc) &#123;</span></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackMallocIdx &gt;= 0);</span></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// if FakeStack != 0  // LocalStackBase == FakeStack</span></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     // In use-after-return mode, poison the whole stack frame.</span></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     if StackMallocIdx &lt;= 4</span></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//         // For small sizes inline the whole thing:</span></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//         memset(ShadowBase, kAsanStackAfterReturnMagic, ShadowSize);</span></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//         &#42;&#42;SavedFlagPtr(FakeStack) = 0</span></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     else</span></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//         &#95;&#95;asan&#95;stack&#95;free&#95;N(FakeStack, LocalStackSize)</span></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// else</span></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//     &lt;This is not a fake stack; unpoison the redzones&gt;</span></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp =</span></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><span class="doxyHighlight">          IRBRet.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(FakeStack, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>));</span></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm, &#42;ElseTerm;</span></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7ac00229d8c59902686f52ed061cdc80">SplitBlockAndInsertIfThenElse</a>(Cmp, Ret, &amp;ThenTerm, &amp;ElseTerm);</span></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBPoison(ThenTerm);</span></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.MaxInlinePoisoningSize != 0 &amp;&amp; StackMallocIdx &lt;= 4) &#123;</span></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ClassSize = <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> &lt;&lt; StackMallocIdx;</span></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><span class="doxyHighlight">        ShadowAfterReturn.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(ClassSize / L.Granularity,</span></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><span class="doxyHighlight">                                 <a href="/docs/api/namespaces/llvm/#aaec439e7453d5235457273e9d3739718">kAsanStackUseAfterReturnMagic</a>);</span></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterReturn, ShadowAfterReturn, IRBPoison,</span></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><span class="doxyHighlight">                     ShadowBase);</span></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedFlagPtrPtr = IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><span class="doxyHighlight">            FakeStack,</span></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><span class="doxyHighlight">            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, ClassSize - <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8));</span></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedFlagPtr = IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(</span></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(SavedFlagPtrPtr, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>));</span></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><span class="doxyHighlight">        IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(</span></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><span class="doxyHighlight">            IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(SavedFlagPtr, IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>()));</span></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// For larger frames call &#95;&#95;asan&#95;stack&#95;free&#95;&#42;.</span></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</span></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><span class="doxyHighlight">            IRBPoison, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;StackMallocIdx&#93;,</span></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><span class="doxyHighlight">            &#123;FakeStack, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize)&#125;);</span></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBElse(ElseTerm);</span></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowClean, IRBElse, ShadowBase);</span></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowClean, IRBRet, ShadowBase);</span></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We are done. Remove the old unused alloca instructions.</span></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>)</span></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><span class="doxyHighlight">    AI-&gt;eraseFromParent();</span></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66">FunctionStackPoisoner::poisonAlloca</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>,</span></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoPoison) &#123;</span></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For now just insert the call to ASan runtime.</span></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrArg = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(V, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArg = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</span></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><span class="doxyHighlight">      IRB, DoPoison ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a> : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a>,</span></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"><span class="doxyHighlight">      &#123;AddrArg, SizeArg&#125;);</span></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"><span class="doxyHighlightComment">// Handling llvm.lifetime intrinsics for a given %alloca:</span></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><span class="doxyHighlightComment">// (1) collect all llvm.lifetime.xxx(%size, %value) describing the alloca.</span></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><span class="doxyHighlightComment">// (2) if %size is constant, poison memory for llvm.lifetime.end (to detect</span></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><span class="doxyHighlightComment">//     invalid accesses) and unpoison it for llvm.lifetime.start (the memory</span></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><span class="doxyHighlightComment">//     could be poisoned by previous llvm.lifetime.end instruction, as the</span></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><span class="doxyHighlightComment">//     variable may go in and out of scope several times, e.g. in loops).</span></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><span class="doxyHighlightComment">// (3) if we poisoned at least one %alloca in a function,</span></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><span class="doxyHighlightComment">//     unpoison the whole stack frame at function exit.</span></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa">FunctionStackPoisoner::handleDynamicAllocaCall</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI) &#123;</span></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(AI);</span></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = std::max(<a href="/docs/api/structs/llvm/align">Align</a>(<a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>), AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a42438d0a43720a6571c9138224481754">getAlign</a>());</span></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t AllocaRedzoneMask = <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> - 1;</span></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Zero = <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</span></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaRzSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>);</span></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaRzMask = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, AllocaRedzoneMask);</span></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Since we need to extend alloca with additional memory to locate</span></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// redzones, and OldSize is number of allocated blocks with</span></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ElementSize size, get allocated memory size in bytes by</span></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// OldSize &#42; ElementSize.</span></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ElementSize =</span></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout().getTypeAllocSize(AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>());</span></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;OldSize =</span></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#af4283a4cef4e2b88f565d827d5857e14">getArraySize</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><span class="doxyHighlight">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, ElementSize));</span></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PartialSize = OldSize % 32</span></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;PartialSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OldSize, AllocaRzMask);</span></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Misalign = kAllocaRzSize - PartialSize;</span></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Misalign = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(AllocaRzSize, PartialSize);</span></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PartialPadding = Misalign != kAllocaRzSize ? Misalign : 0;</span></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(Misalign, AllocaRzSize);</span></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;PartialPadding = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Misalign, Zero);</span></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// AdditionalChunkSize = Alignment + PartialPadding + kAllocaRzSize</span></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Alignment is added to locate left redzone, PartialPadding for possible</span></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// partial redzone and kAllocaRzSize for right redzone respectively.</span></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AdditionalChunkSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><span class="doxyHighlight">      ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, Alignment.<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>() + <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>),</span></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><span class="doxyHighlight">      PartialPadding);</span></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(OldSize, AdditionalChunkSize);</span></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert new alloca with new NewSize and Alignment params.</span></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;NewAlloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), NewSize);</span></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><span class="doxyHighlight">  NewAlloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(Alignment);</span></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NewAddress = Address + Alignment</span></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAddress =</span></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(NewAlloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</span></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><span class="doxyHighlight">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, Alignment.<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>()));</span></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert &#95;&#95;asan&#95;alloca&#95;poison call for new created alloca.</span></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a>, &#123;NewAddress, OldSize&#125;);</span></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Store the last alloca&#39;s address to DynamicAllocaLayout. We&#39;ll need this</span></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// for unpoisoning stuff.</span></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><span class="doxyHighlight">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(NewAlloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</span></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAddressPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(NewAddress, AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a5d19f3955a23e8eb2a974efcc8fb19da">getType</a>());</span></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Replace all uses of AddessReturnedByAlloca with NewAddressPtr.</span></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><span class="doxyHighlight">  AI-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewAddressPtr);</span></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We are done. Erase old alloca from parent.</span></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><span class="doxyHighlight">  AI-&gt;<a href="/docs/api/classes/llvm/instruction/#a601ee49a4c4e0babf29bd1cf09036570">eraseFromParent</a>();</span></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><span class="doxyHighlightComment">// isSafeAccess returns true if Addr is always inbounds with respect to its</span></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><span class="doxyHighlightComment">// base object. For example, it is a field access or an array access with</span></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><span class="doxyHighlightComment">// constant inbounds index.</span></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AddressSanitizer::isSafeAccess(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</span></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><span class="doxyHighlight">                                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</span></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: We can use vscale&#95;range to convert a scalable value to an</span></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// upper bound on the access size.</span></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/sizeoffsetapint">SizeOffsetAPInt</a> SizeOffset = ObjSizeVis.<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor/#a8c0cefa2bf3b3199ab80b4b897c49e86">compute</a>(Addr);</span></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#afc0e6253ea9fff92cd5396514e74a3b8">bothKnown</a>())</span></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#a06605ec689995010ade897ee0ebd3023">Size</a>.<a href="/docs/api/classes/llvm/apint/#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</span></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><span class="doxyHighlight">  int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#a8859bafd8bfb3cd956d6490367ffe3eb">Offset</a>.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>();</span></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Three checks are required to ensure safety:</span></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// . Offset &gt;= 0  (since the offset is given from the base ptr)</span></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// . Size &gt;= Offset  (unsigned)</span></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// . Size - Offset &gt;= NeededSize  (unsigned)</span></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt;= 0 &amp;&amp; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &gt;= uint64&#95;t(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &amp;&amp;</span></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> - uint64&#95;t(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &gt;= TypeStoreSize / 8;</span></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
