---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/debuginfod/debuginfod-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `Debuginfod.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file contains several definitions for the debuginfod client and server. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Debuginfod/Debuginfod.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfod/debuginfod-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/BinaryFormat/Magic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/binaryformat/magic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/DebugInfo/DWARF/DWARFContext.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/dwarf/dwarfcontext-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/DebugInfo/Symbolize/Symbolize.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/symbolize/symbolize-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Debuginfod/HTTPClient.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfod/httpclient-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Object/BuildID.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/object/buildid-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Object/ELFObjectFile.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/object/elfobjectfile-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CachePruning.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Caching.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/caching-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Errc.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errc-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Error.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/error-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/FileUtilities.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/fileutilities-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MemoryBuffer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/memorybuffer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Path.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/path-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ThreadPool.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/threadpool-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/xxhash.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/xxhash-h"
  isLocal="true" />
<IncludesListItem
  filePath="atomic"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="optional"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="thread"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-">llvm::anonymous&#123;Debuginfod.cpp&#125;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler">StreamedHTTPResponseHandler</a></>}>
A simple handler which streams the returned data to a cache file. <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file contains several definitions for the debuginfod client and server.

For the client, this file defines the fetchInfo function. For the server, this file defines the DebuginfodLogEntry and DebuginfodServer structs, as well as the DebuginfodLog, DebuginfodCollection classes. The fetchInfo function retrieves any of the three supported artifact types: (executable, debuginfo, source file) associated with a build-id from debuginfod servers. If a source file is to be fetched, its absolute path must be specified in the Description argument to fetchInfo. The DebuginfodLogEntry, DebuginfodLog, and DebuginfodCollection are used by the DebuginfodServer to scan the local filesystem for binaries and serve the debuginfod protocol.

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><Highlight kind="comment">//===-- llvm/Debuginfod/Debuginfod.cpp - Debuginfod client library --------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><Highlight kind="normal"></Highlight><Highlight kind="comment">// See https://llvm.org/LICENSE.txt for license information.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><Highlight kind="normal"></Highlight><Highlight kind="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><Highlight kind="comment">/// \\file</Highlight></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><Highlight kind="comment">/// This file contains several definitions for the debuginfod client and server.</Highlight></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><Highlight kind="comment">/// For the client, this file defines the fetchInfo function. For the server,</Highlight></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><Highlight kind="comment">/// this file defines the DebuginfodLogEntry and DebuginfodServer structs, as</Highlight></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><Highlight kind="comment">/// well as the DebuginfodLog, DebuginfodCollection classes. The fetchInfo</Highlight></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><Highlight kind="comment">/// function retrieves any of the three supported artifact types: (executable,</Highlight></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><Highlight kind="comment">/// debuginfo, source file) associated with a build-id from debuginfod servers.</Highlight></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><Highlight kind="comment">/// If a source file is to be fetched, its absolute path must be specified in</Highlight></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><Highlight kind="comment">/// the Description argument to fetchInfo. The DebuginfodLogEntry,</Highlight></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><Highlight kind="comment">/// DebuginfodLog, and DebuginfodCollection are used by the DebuginfodServer to</Highlight></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><Highlight kind="comment">/// scan the local filesystem for binaries and serve the debuginfod protocol.</Highlight></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><Highlight kind="comment">///</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfod/debuginfod-h">llvm/Debuginfod/Debuginfod.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h">llvm/ADT/StringExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/binaryformat/magic-h">llvm/BinaryFormat/Magic.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/dwarf/dwarfcontext-h">llvm/DebugInfo/DWARF/DWARFContext.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/symbolize/symbolize-h">llvm/DebugInfo/Symbolize/Symbolize.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfod/httpclient-h">llvm/Debuginfod/HTTPClient.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/object/buildid-h">llvm/Object/BuildID.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/object/elfobjectfile-h">llvm/Object/ELFObjectFile.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">llvm/Support/CachePruning.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/caching-h">llvm/Support/Caching.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errc-h">llvm/Support/Errc.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/error-h">llvm/Support/Error.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/fileutilities-h">llvm/Support/FileUtilities.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/memorybuffer-h">llvm/Support/MemoryBuffer.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/path-h">llvm/Support/Path.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/threadpool-h">llvm/Support/ThreadPool.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/xxhash-h">llvm/Support/xxhash.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;atomic&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;optional&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;thread&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><Highlight kind="normal"></Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">llvm::object::BuildIDRef</a>;</Highlight></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a1ce2df417e91dc06e087c4f6dbc8c473"><Highlight kind="normal">std::optional&lt;SmallVector&lt;StringRef&gt;&gt; <a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a1ce2df417e91dc06e087c4f6dbc8c473">DebuginfodUrls</a>;</Highlight></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Many Readers/Single Writer lock protecting the global debuginfod URL list.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a123393ae05a4429753667b713097c958"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/sys/#aa3f166e8bb27e1c9a1e5cbb439e9749b">llvm::sys::RWMutex</a> <a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a123393ae05a4429753667b713097c958">UrlsMutex</a>;</Highlight></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57" lineLink="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a"><Highlight kind="normal">std::string <a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(<a href="/docs/api/classes/llvm/stringref">llvm::StringRef</a> S) &#123;</Highlight></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a41972fe6f3fab862543b7b835a714f9b">utostr</a>(<a href="/docs/api/namespaces/llvm/#a23db35042db15bf83edbd2250ea0ee90">xxh3&#95;64bits</a>(S));</Highlight></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Returns a binary BuildID as a normalized hex string.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Uses lowercase for compatibility with common debuginfod servers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63" lineLink="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abec19670f96ed423c2e4d4f10a4c6975">llvm::toHex</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>, </Highlight><Highlight kind="comment">/&#42;LowerCase=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67" lineLink="/docs/api/namespaces/llvm/#af96e5af52e7fe106cf27c6c84ed7d934"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#af96e5af52e7fe106cf27c6c84ed7d934">canUseDebuginfod</a>() &#123;</Highlight></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/httpclient/#a0303f2e7844f319270e783e3ecc59274">HTTPClient::isAvailable</a>() &amp;&amp; !<a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>().empty();</Highlight></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71" lineLink="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051"><Highlight kind="normal"><a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;StringRef&gt;</a> <a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>() &#123;</Highlight></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><Highlight kind="normal">  std::shared&#95;lock&lt;llvm::sys::RWMutex&gt; ReadGuard(UrlsMutex);</Highlight></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DebuginfodUrls) &#123;</Highlight></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only read from the environment variable if the user hasn&#39;t already</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// set the value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><Highlight kind="normal">    ReadGuard.unlock();</Highlight></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><Highlight kind="normal">    std::unique&#95;lock&lt;llvm::sys::RWMutex&gt; WriteGuard(UrlsMutex);</Highlight></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><Highlight kind="normal">    DebuginfodUrls = <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;StringRef&gt;</a>();</Highlight></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;DebuginfodUrlsEnv = std::getenv(</Highlight><Highlight kind="stringliteral">&quot;DEBUGINFOD&#95;URLS&quot;</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/stringref">StringRef</a>(DebuginfodUrlsEnv)</Highlight></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><Highlight kind="normal">          .<a href="/docs/api/classes/llvm/stringref/#a0320b2a5a6d440bf4479a02e78cf5ca7">split</a>(DebuginfodUrls.value(), </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">, -1, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><Highlight kind="normal">    WriteGuard.unlock();</Highlight></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><Highlight kind="normal">    ReadGuard.lock();</Highlight></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DebuginfodUrls.value();</Highlight></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Set the default debuginfod URL list, override the environment variable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90" lineLink="/docs/api/namespaces/llvm/#ae94a5b6af23d2131908f579b216f9893"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ae94a5b6af23d2131908f579b216f9893">setDefaultDebuginfodUrls</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;StringRef&gt;</a> &amp;URLs) &#123;</Highlight></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><Highlight kind="normal">  std::unique&#95;lock&lt;llvm::sys::RWMutex&gt; WriteGuard(UrlsMutex);</Highlight></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><Highlight kind="normal">  DebuginfodUrls = URLs;</Highlight></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><Highlight kind="comment">/// Finds a default local file caching directory for the debuginfod client,</Highlight></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><Highlight kind="comment">/// first checking DEBUGINFOD&#95;CACHE&#95;PATH.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97" lineLink="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b">getDefaultDebuginfodCacheDirectory</a>() &#123;</Highlight></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;CacheDirectoryEnv = std::getenv(</Highlight><Highlight kind="stringliteral">&quot;DEBUGINFOD&#95;CACHE&#95;PATH&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CacheDirectoryEnv;</Highlight></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> CacheDirectory;</Highlight></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/sys/path/#a6c8daf95e53b1d17b5965a74533ca217">sys::path::cache&#95;directory</a>(CacheDirectory))</Highlight></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(</Highlight></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>, </Highlight><Highlight kind="stringliteral">&quot;Unable to determine appropriate cache directory.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(CacheDirectory, </Highlight><Highlight kind="stringliteral">&quot;llvm-debuginfod&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;client&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(CacheDirectory);</Highlight></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109" lineLink="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720"><Highlight kind="normal">std::chrono::milliseconds <a href="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720">getDefaultDebuginfodTimeout</a>() &#123;</Highlight></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">long</Highlight><Highlight kind="normal"> Timeout;</Highlight></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;DebuginfodTimeoutEnv = std::getenv(</Highlight><Highlight kind="stringliteral">&quot;DEBUGINFOD&#95;TIMEOUT&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DebuginfodTimeoutEnv &amp;&amp;</Highlight></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ae03f2b6a02fc9092755ba3a6cf6d2446">to&#95;integer</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a>(DebuginfodTimeoutEnv).trim(), Timeout, 10))</Highlight></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::chrono::milliseconds(Timeout &#42; 1000);</Highlight></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::chrono::milliseconds(90 &#42; 1000);</Highlight></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><Highlight kind="comment">/// The following functions fetch a debuginfod artifact to a file in a local</Highlight></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><Highlight kind="comment">/// cache and return the cached file path. They first search the local cache,</Highlight></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><Highlight kind="comment">/// followed by the debuginfod servers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123" lineLink="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e"><Highlight kind="normal">std::string <a href="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e">getDebuginfodSourceUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>,</Highlight></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/stringref">StringRef</a> SourceFilePath) &#123;</Highlight></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</Highlight></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </Highlight><Highlight kind="stringliteral">&quot;buildid&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </Highlight><Highlight kind="stringliteral">&quot;source&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/sys/path/#aa8749375717a95d086e49f655fa75046">sys::path::convert&#95;to&#95;slash</a>(SourceFilePath));</Highlight></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(UrlPath);</Highlight></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132" lineLink="/docs/api/namespaces/llvm/#aa8179910c71adc4a7c62a254a388e93f"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#aa8179910c71adc4a7c62a254a388e93f">getCachedOrDownloadSource</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>,</Highlight></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><Highlight kind="normal">                                                <a href="/docs/api/classes/llvm/stringref">StringRef</a> SourceFilePath) &#123;</Highlight></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><Highlight kind="normal">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e">getDebuginfodSourceUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>, SourceFilePath);</Highlight></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</Highlight></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e"><Highlight kind="normal">std::string <a href="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e">getDebuginfodExecutableUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</Highlight></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </Highlight><Highlight kind="stringliteral">&quot;buildid&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </Highlight><Highlight kind="stringliteral">&quot;executable&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(UrlPath);</Highlight></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145" lineLink="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43">getCachedOrDownloadExecutable</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><Highlight kind="normal">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e">getDebuginfodExecutableUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</Highlight></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150" lineLink="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad"><Highlight kind="normal">std::string <a href="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad">getDebuginfodDebuginfoUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</Highlight></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </Highlight><Highlight kind="stringliteral">&quot;buildid&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </Highlight><Highlight kind="stringliteral">&quot;debuginfo&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(UrlPath);</Highlight></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157" lineLink="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0">getCachedOrDownloadDebuginfo</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><Highlight kind="normal">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad">getDebuginfodDebuginfoUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</Highlight></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><Highlight kind="normal"></Highlight><Highlight kind="comment">// General fetching function.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163" lineLink="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> UniqueKey,</Highlight></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><Highlight kind="normal">                                                  <a href="/docs/api/classes/llvm/stringref">StringRef</a> UrlPath) &#123;</Highlight></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;10&gt;</a> CacheDir;</Highlight></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> CacheDirOrErr = <a href="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b">getDefaultDebuginfodCacheDirectory</a>();</Highlight></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CacheDirOrErr)</Highlight></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CacheDirOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><Highlight kind="normal">  CacheDir = &#42;CacheDirOrErr;</Highlight></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(UniqueKey, UrlPath, CacheDir,</Highlight></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>(),</Highlight></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720">getDefaultDebuginfodTimeout</a>());</Highlight></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><Highlight kind="comment">/// A simple handler which streams the returned data to a cache file. The cache</Highlight></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><Highlight kind="comment">/// file is only created if a 200 OK status is observed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5">StreamedHTTPResponseHandler</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/httpresponsehandler">HTTPResponseHandler</a> &#123;</Highlight></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal">CreateStreamFn =</Highlight></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><Highlight kind="normal">      std::function&lt;Expected&lt;std::unique&#95;ptr&lt;CachedFileStream&gt;&gt;()&gt;;</Highlight></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><Highlight kind="normal">  CreateStreamFn CreateStream;</Highlight></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> &amp;Client;</Highlight></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><Highlight kind="normal">  std::unique&#95;ptr&lt;CachedFileStream&gt; FileStream;</Highlight></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5">StreamedHTTPResponseHandler</a>(CreateStreamFn CreateStream, <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> &amp;Client)</Highlight></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><Highlight kind="normal">      : CreateStream(CreateStream), Client(Client) &#123;&#125;</Highlight></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#a2297e07dcc6d1cccff4760813d71577f"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">virtual</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#a2297e07dcc6d1cccff4760813d71577f">~StreamedHTTPResponseHandler</a>() = </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b">handleBodyChunk</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> BodyChunk) </Highlight><Highlight kind="keyword">override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b"><Highlight kind="normal"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b">StreamedHTTPResponseHandler::handleBodyChunk</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> BodyChunk) &#123;</Highlight></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!FileStream) &#123;</Highlight></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Code = Client.responseCode();</Highlight></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Code &amp;&amp; Code != 200)</Highlight></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</Highlight></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/expected">Expected&lt;std::unique&#95;ptr&lt;CachedFileStream&gt;</a>&gt; FileStreamOrError =</Highlight></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><Highlight kind="normal">        CreateStream();</Highlight></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!FileStreamOrError)</Highlight></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FileStreamOrError.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><Highlight kind="normal">    FileStream = std::move(&#42;FileStreamOrError);</Highlight></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><Highlight kind="normal">  &#42;FileStream-&gt;OS &lt;&lt; BodyChunk;</Highlight></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</Highlight></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><Highlight kind="normal"></Highlight><Highlight kind="comment">// An over-accepting simplification of the HTTP RFC 7230 spec.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214" lineLink="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d">isHeader</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> S) &#123;</Highlight></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name;</Highlight></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> <a href="/docs/api/classes/llvm/value">Value</a>;</Highlight></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><Highlight kind="normal">  std::tie(Name, <a href="/docs/api/classes/llvm/value">Value</a>) = S.<a href="/docs/api/classes/llvm/stringref/#a0320b2a5a6d440bf4479a02e78cf5ca7">split</a>(</Highlight><Highlight kind="charliteral">&#39;:&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Name.empty() || <a href="/docs/api/classes/llvm/value">Value</a>.empty())</Highlight></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(Name, &#91;&#93;(</Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ac26e7ec95828fe707f6b4d6c6a3bd897">llvm::isPrint</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &amp;&amp; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> != </Highlight><Highlight kind="charliteral">&#39; &#39;</Highlight><Highlight kind="normal">; &#125;) &amp;&amp;</Highlight></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><Highlight kind="normal">         <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(<a href="/docs/api/classes/llvm/value">Value</a>, &#91;&#93;(</Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ac26e7ec95828fe707f6b4d6c6a3bd897">llvm::isPrint</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) || <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == </Highlight><Highlight kind="charliteral">&#39;\\t&#39;</Highlight><Highlight kind="normal">; &#125;);</Highlight></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224" lineLink="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::string, 0&gt;</a> <a href="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99">getHeaders</a>() &#123;</Highlight></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;Filename = getenv(</Highlight><Highlight kind="stringliteral">&quot;DEBUGINFOD&#95;HEADERS&#95;FILE&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Filename)</Highlight></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#123;&#125;;</Highlight></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/erroror">ErrorOr&lt;std::unique&#95;ptr&lt;MemoryBuffer&gt;</a>&gt; HeadersFile =</Highlight></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/memorybuffer/#aa98611beefe78f907beeee7305cc8174">MemoryBuffer::getFile</a>(Filename, </Highlight><Highlight kind="comment">/&#42;IsText=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!HeadersFile)</Highlight></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#123;&#125;;</Highlight></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::string, 0&gt;</a> Headers;</Highlight></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><Highlight kind="normal">  uint64&#95;t LineNumber = 0;</Highlight></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Line : <a href="/docs/api/namespaces/llvm/#a8e3001fd5d1324d1e63ddcf56a45e955">llvm::split</a>((&#42;HeadersFile)-&gt;getBuffer(), </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><Highlight kind="normal">    LineNumber++;</Highlight></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Line.empty() &amp;&amp; Line.back() == </Highlight><Highlight kind="charliteral">&#39;\\r&#39;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><Highlight kind="normal">      Line = Line.drop&#95;back();</Highlight></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d">isHeader</a>(Line)) &#123;</Highlight></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(Line, <a href="/docs/api/namespaces/llvm/#acea2ac67f3ff35107bcf1693416da8e7">llvm::isSpace</a>))</Highlight></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/withcolor/#a237ad6eae22f6b2746a542c02d309a5b">WithColor::warning</a>()</Highlight></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><Highlight kind="normal">            &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;could not parse debuginfod header: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Filename &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;:&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><Highlight kind="normal">            &lt;&lt; LineNumber &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><Highlight kind="normal">    Headers.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(Line);</Highlight></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Headers;</Highlight></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251" lineLink="/docs/api/namespaces/llvm/#a42f631dfb82c9318a72f2c1bdab57ad4"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(</Highlight></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> UniqueKey, <a href="/docs/api/classes/llvm/stringref">StringRef</a> UrlPath, <a href="/docs/api/classes/llvm/stringref">StringRef</a> CacheDirectoryPath,</Highlight></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;StringRef&gt;</a> DebuginfodUrls, std::chrono::milliseconds Timeout) &#123;</Highlight></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> AbsCachedArtifactPath;</Highlight></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(AbsCachedArtifactPath, CacheDirectoryPath,</Highlight></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><Highlight kind="normal">                    </Highlight><Highlight kind="stringliteral">&quot;llvmcache-&quot;</Highlight><Highlight kind="normal"> + UniqueKey);</Highlight></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/expected">Expected&lt;FileCache&gt;</a> CacheOrErr =</Highlight></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#af73b4fcac77298355025a0e5975edcf0">localCache</a>(</Highlight><Highlight kind="stringliteral">&quot;Debuginfod-client&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;.debuginfod-client&quot;</Highlight><Highlight kind="normal">, CacheDirectoryPath);</Highlight></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CacheOrErr)</Highlight></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CacheOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/filecache">FileCache</a> Cache = &#42;CacheOrErr;</Highlight></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We choose an arbitrary Task parameter as we do not make use of it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Task = 0;</Highlight></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/expected">Expected&lt;AddStreamFn&gt;</a> CacheAddStreamOrErr = Cache(Task, UniqueKey, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CacheAddStreamOrErr)</Highlight></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CacheAddStreamOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#aeb8b31be7b2c7dd67496051d7f952e94">AddStreamFn</a> &amp;CacheAddStream = &#42;CacheAddStreamOrErr;</Highlight></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CacheAddStream)</Highlight></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(AbsCachedArtifactPath);</Highlight></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The artifact was not found in the local cache, query the debuginfod</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// servers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/httpclient/#a0303f2e7844f319270e783e3ecc59274">HTTPClient::isAvailable</a>())</Highlight></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(<a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>,</Highlight></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><Highlight kind="normal">                             </Highlight><Highlight kind="stringliteral">&quot;No working HTTP client is available.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/httpclient/#a0ed9872a019597bc9572d382a26b24ec">HTTPClient::IsInitialized</a>)</Highlight></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(</Highlight></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>,</Highlight></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;A working HTTP client is available, but it is not initialized. To &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;allow Debuginfod to make HTTP requests, call HTTPClient::initialize() &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;at the beginning of main.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> Client;</Highlight></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><Highlight kind="normal">  Client.<a href="/docs/api/classes/llvm/httpclient/#ad8f7a940d825d8d2e2bca0aff20d771f">setTimeout</a>(Timeout);</Highlight></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> ServerUrl : DebuginfodUrls) &#123;</Highlight></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> ArtifactUrl;</Highlight></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ArtifactUrl, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, ServerUrl, UrlPath);</Highlight></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Perform the HTTP request and if successful, write the response body to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the cache.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><Highlight kind="normal">    &#123;</Highlight></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><Highlight kind="normal">      StreamedHTTPResponseHandler Handler(</Highlight></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><Highlight kind="normal">          &#91;&amp;&#93;() &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CacheAddStream(Task, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">); &#125;, Client);</Highlight></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/httprequest">HTTPRequest</a> Request(ArtifactUrl);</Highlight></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><Highlight kind="normal">      Request.Headers = <a href="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99">getHeaders</a>();</Highlight></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/error">Error</a> Err = Client.<a href="/docs/api/classes/llvm/httpclient/#a99e83d694bc912421b6c95985adf01d9">perform</a>(Request, Handler);</Highlight></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Err)</Highlight></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::move(Err);</Highlight></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Code = Client.<a href="/docs/api/classes/llvm/httpclient/#a49d0ac3cb0735adf78a0d1d0b2252eb4">responseCode</a>();</Highlight></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Code &amp;&amp; Code != 200)</Highlight></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/expected">Expected&lt;CachePruningPolicy&gt;</a> PruningPolicyOrErr =</Highlight></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a4accb2c6a0d7504200a547f2284ff106">parseCachePruningPolicy</a>(std::getenv(</Highlight><Highlight kind="stringliteral">&quot;DEBUGINFOD&#95;CACHE&#95;POLICY&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PruningPolicyOrErr)</Highlight></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PruningPolicyOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aabba6d27907082520ad2eb977c8e406b">pruneCache</a>(CacheDirectoryPath, &#42;PruningPolicyOrErr);</Highlight></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Return the path to the artifact on disk.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(AbsCachedArtifactPath);</Highlight></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(<a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546ba4b82222a0895b538d0597092b3ceab3e">errc::argument&#95;out&#95;of&#95;domain</a>, </Highlight><Highlight kind="stringliteral">&quot;build id not found&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320" lineLink="/docs/api/structs/llvm/debuginfodlogentry/#a8e8fa60b3de194921710bf716693018a"><Highlight kind="normal"><a href="/docs/api/structs/llvm/debuginfodlogentry/#ae8fc9320cce17ba4967ad70a4b879b73">DebuginfodLogEntry::DebuginfodLogEntry</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;<a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>)</Highlight></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><Highlight kind="normal">    : <a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>.str()) &#123;&#125;</Highlight></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="/docs/api/classes/llvm/debuginfodlog/#a7b3028f4cf2ec9f8ad1151bce1c5a247"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">DebuginfodLog::push</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Message) &#123;</Highlight></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a>(Message));</Highlight></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327" lineLink="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">DebuginfodLog::push</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> Entry) &#123;</Highlight></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><Highlight kind="normal">  &#123;</Highlight></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><Highlight kind="normal">    std::lock&#95;guard&lt;std::mutex&gt; Guard(QueueMutex);</Highlight></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><Highlight kind="normal">    LogEntryQueue.push(Entry);</Highlight></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><Highlight kind="normal">  QueueCondition.notify&#95;one();</Highlight></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335" lineLink="/docs/api/classes/llvm/debuginfodlog/#a0ada1a5e09014292b7d21a7b30dcc3af"><Highlight kind="normal"><a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> <a href="/docs/api/classes/llvm/debuginfodlog/#a0ada1a5e09014292b7d21a7b30dcc3af">DebuginfodLog::pop</a>() &#123;</Highlight></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><Highlight kind="normal">  &#123;</Highlight></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><Highlight kind="normal">    std::unique&#95;lock&lt;std::mutex&gt; Guard(QueueMutex);</Highlight></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Wait for messages to be pushed into the queue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><Highlight kind="normal">    QueueCondition.wait(Guard, &#91;&amp;&#93; &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !LogEntryQueue.empty(); &#125;);</Highlight></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><Highlight kind="normal">  std::lock&#95;guard&lt;std::mutex&gt; Guard(QueueMutex);</Highlight></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LogEntryQueue.size())</Highlight></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Expected message in the queue.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> Entry = LogEntryQueue.front();</Highlight></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><Highlight kind="normal">  LogEntryQueue.pop();</Highlight></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Entry;</Highlight></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a1a653b254320ed5ac8fec48830363d9e"><Highlight kind="normal"><a href="/docs/api/classes/llvm/debuginfodcollection/#a1a653b254320ed5ac8fec48830363d9e">DebuginfodCollection::DebuginfodCollection</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;StringRef&gt;</a> PathsRef,</Highlight></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><Highlight kind="normal">                                           <a href="/docs/api/classes/llvm/debuginfodlog">DebuginfodLog</a> &amp;Log,</Highlight></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><Highlight kind="normal">                                           <a href="/docs/api/classes/llvm/threadpoolinterface">ThreadPoolInterface</a> &amp;Pool,</Highlight></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><Highlight kind="normal">                                           </Highlight><Highlight kind="keywordtype">double</Highlight><Highlight kind="normal"> MinInterval)</Highlight></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><Highlight kind="normal">    : Log(Log), Pool(Pool), MinInterval(MinInterval) &#123;</Highlight></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Path : PathsRef)</Highlight></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><Highlight kind="normal">    Paths.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Path.str());</Highlight></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5"><Highlight kind="normal"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">DebuginfodCollection::update</a>() &#123;</Highlight></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><Highlight kind="normal">  std::lock&#95;guard&lt;sys::Mutex&gt; Guard(UpdateMutex);</Highlight></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UpdateTimer.isRunning())</Highlight></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><Highlight kind="normal">    UpdateTimer.stopTimer();</Highlight></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><Highlight kind="normal">  UpdateTimer.clear();</Highlight></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string &amp;Path : Paths) &#123;</Highlight></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><Highlight kind="normal">    Log.<a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(</Highlight><Highlight kind="stringliteral">&quot;Updating binaries at path &quot;</Highlight><Highlight kind="normal"> + Path);</Highlight></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = findBinaries(Path))</Highlight></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Err;</Highlight></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><Highlight kind="normal">  Log.<a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(</Highlight><Highlight kind="stringliteral">&quot;Updated collection&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><Highlight kind="normal">  UpdateTimer.startTimer();</Highlight></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</Highlight></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> DebuginfodCollection::updateIfStale() &#123;</Highlight></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!UpdateTimer.<a href="/docs/api/classes/llvm/timer/#a154b012435c1f9e401727392754099f6">isRunning</a>())</Highlight></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><Highlight kind="normal">  UpdateTimer.<a href="/docs/api/classes/llvm/timer/#a27f97da1b1d19ad74a847703ca25c455">stopTimer</a>();</Highlight></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">double</Highlight><Highlight kind="normal"> Time = UpdateTimer.<a href="/docs/api/classes/llvm/timer/#abb761d10e49ca4c4a9d95e30dc026c9d">getTotalTime</a>().<a href="/docs/api/classes/llvm/timerecord/#a9177feaeded20b6e6d07d56994553a43">getWallTime</a>();</Highlight></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><Highlight kind="normal">  UpdateTimer.<a href="/docs/api/classes/llvm/timer/#aa8c887576ec3b0d68c10ebf4097c367c">startTimer</a>();</Highlight></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Time &lt; MinInterval)</Highlight></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">update</a>())</Highlight></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::move(Err);</Highlight></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a658e5ec09f37dd9bc0bb13e8aa57b8d0"><Highlight kind="normal"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a658e5ec09f37dd9bc0bb13e8aa57b8d0">DebuginfodCollection::updateForever</a>(std::chrono::milliseconds <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>) &#123;</Highlight></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">update</a>())</Highlight></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Err;</Highlight></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><Highlight kind="normal">    std::this&#95;thread::sleep&#95;for(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>);</Highlight></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;updateForever loop should never end&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396" lineLink="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62">hasELFMagic</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> FilePath) &#123;</Highlight></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/file-magic">file&#95;magic</a> <a href="/docs/api/classes/llvm/type">Type</a>;</Highlight></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><Highlight kind="normal">  std::error&#95;code EC = <a href="/docs/api/namespaces/llvm/#a00941e59a16ad6eb14e905557a612501">identify&#95;magic</a>(FilePath, <a href="/docs/api/classes/llvm/type">Type</a>);</Highlight></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EC)</Highlight></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/type">Type</a>) &#123;</Highlight></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aad31db91c55e2f1f5090ddbe652c20b1f">file&#95;magic::elf</a>:</Highlight></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa1b167178973059ff5b3a4b2bf2377450">file&#95;magic::elf&#95;relocatable</a>:</Highlight></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa46a884b4756415ac19d0ac5d2bf56079">file&#95;magic::elf&#95;executable</a>:</Highlight></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa380638a0d06dd9003d4dd307f7b0851c">file&#95;magic::elf&#95;shared&#95;object</a>:</Highlight></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aabf5672e0a28c6ed1db85035f1b85fc5b">file&#95;magic::elf&#95;core</a>:</Highlight></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#ac226f3d2b9ca090171a8e0a8cb92c343a902b0d55fddef6f8d651fe1035b7d4bd">Error</a> DebuginfodCollection::findBinaries(StringRef Path) &#123;</Highlight></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><Highlight kind="normal">  std::error&#95;code EC;</Highlight></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><Highlight kind="normal">  sys::fs::recursive&#95;directory&#95;iterator <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>(Twine(Path), EC), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a>;</Highlight></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><Highlight kind="normal">  std::mutex IteratorMutex;</Highlight></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><Highlight kind="normal">  ThreadPoolTaskGroup IteratorGroup(Pool);</Highlight></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> WorkerIndex = 0; WorkerIndex &lt; Pool.<a href="/docs/api/classes/llvm/threadpoolinterface/#a6ec7a595fe1af1fa5204286641a356fc">getMaxConcurrency</a>();</Highlight></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><Highlight kind="normal">       WorkerIndex++) &#123;</Highlight></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><Highlight kind="normal">    IteratorGroup.async(&#91;&amp;, </Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">&#93;() -&gt; </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><Highlight kind="normal">      std::string FilePath;</Highlight></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><Highlight kind="normal">        &#123;</Highlight></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Check if iteration is over or there is an error during iteration</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><Highlight kind="normal">          std::lock&#95;guard&lt;std::mutex&gt; Guard(IteratorMutex);</Highlight></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a> || EC)</Highlight></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Grab a file path from the directory iterator and advance the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// iterator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><Highlight kind="normal">          FilePath = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;path();</Highlight></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.increment(EC);</Highlight></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Inspect the file at this path to determine if it is debuginfo.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62">hasELFMagic</a>(FilePath))</Highlight></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><Highlight kind="normal">        Expected&lt;object::OwningBinary&lt;object::Binary&gt;&gt; BinOrErr =</Highlight></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/object/#aebd3886db896c46327320cfd1ccc808c">object::createBinary</a>(FilePath);</Highlight></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BinOrErr) &#123;</Highlight></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#aee0e70be66536b9ef7b65ae2e5a45959">consumeError</a>(BinOrErr.takeError());</Highlight></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><Highlight kind="normal">        object::Binary &#42;<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a> = std::move(BinOrErr.get().getBinary());</Highlight></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a>-&gt;isObject())</Highlight></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// TODO: Support non-ELF binaries</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><Highlight kind="normal">        object::ELFObjectFileBase &#42;<a href="/docs/api/namespaces/llvm/ifs/#adfe04e1a9cc096fb571e8372debaa67ea497031794414a552435f90151ac3b54b">Object</a> =</Highlight></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;object::ELFObjectFileBase&gt;</a>(<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a>);</Highlight></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Object)</Highlight></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = <a href="/docs/api/namespaces/llvm/object/#a6e5d9df4335ddc5a345badf40a2f017f">getBuildID</a>(Object);</Highlight></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>.empty())</Highlight></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><Highlight kind="normal">        std::string IDString = <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/ifs/#adfe04e1a9cc096fb571e8372debaa67ea497031794414a552435f90151ac3b54b">Object</a>-&gt;hasDebugInfo()) &#123;</Highlight></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><Highlight kind="normal">          std::lock&#95;guard&lt;sys::RWMutex&gt; DebugBinariesGuard(DebugBinariesMutex);</Highlight></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><Highlight kind="normal">          (void)DebugBinaries.try&#95;emplace(IDString, std::move(FilePath));</Highlight></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><Highlight kind="normal">        &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><Highlight kind="normal">          std::lock&#95;guard&lt;sys::RWMutex&gt; BinariesGuard(BinariesMutex);</Highlight></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><Highlight kind="normal">          (void)Binaries.try&#95;emplace(IDString, std::move(FilePath));</Highlight></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><Highlight kind="normal">    &#125;);</Highlight></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><Highlight kind="normal">  IteratorGroup.wait();</Highlight></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><Highlight kind="normal">  std::unique&#95;lock&lt;std::mutex&gt; Guard(IteratorMutex);</Highlight></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EC)</Highlight></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ad10875fd499e8e285aaeef615e9b11aa">errorCodeToError</a>(EC);</Highlight></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</Highlight></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><Highlight kind="normal">DebuginfodCollection::getBinaryPath(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><Highlight kind="normal">  Log.push(</Highlight><Highlight kind="stringliteral">&quot;getting binary path of ID &quot;</Highlight><Highlight kind="normal"> + <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</Highlight></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><Highlight kind="normal">  std::shared&#95;lock&lt;sys::RWMutex&gt; Guard(BinariesMutex);</Highlight></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Loc = Binaries.find(<a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</Highlight></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Loc != Binaries.end()) &#123;</Highlight></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><Highlight kind="normal">    std::string <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a> = Loc-&gt;getValue();</Highlight></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a>;</Highlight></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::nullopt;</Highlight></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><Highlight kind="normal">DebuginfodCollection::getDebugBinaryPath(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><Highlight kind="normal">  Log.push(</Highlight><Highlight kind="stringliteral">&quot;getting debug binary path of ID &quot;</Highlight><Highlight kind="normal"> + <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</Highlight></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><Highlight kind="normal">  std::shared&#95;lock&lt;sys::RWMutex&gt; Guard(DebugBinariesMutex);</Highlight></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Loc = DebugBinaries.find(<a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</Highlight></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Loc != DebugBinaries.end()) &#123;</Highlight></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><Highlight kind="normal">    std::string <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a> = Loc-&gt;getValue();</Highlight></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a>;</Highlight></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::nullopt;</Highlight></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a5c512cc4358cdcd16d9c633a4bb1a4ef"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a5c512cc4358cdcd16d9c633a4bb1a4ef">DebuginfodCollection::findBinaryPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><Highlight kind="normal">  &#123;</Highlight></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Check collection; perform on-demand update if stale.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt; PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PathOrErr)</Highlight></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><Highlight kind="normal">    std::optional&lt;std::string&gt; Path = &#42;PathOrErr;</Highlight></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Path) &#123;</Highlight></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> UpdatedOrErr = updateIfStale();</Highlight></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!UpdatedOrErr)</Highlight></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> UpdatedOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&#42;UpdatedOrErr) &#123;</Highlight></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Try once more.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><Highlight kind="normal">        PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PathOrErr)</Highlight></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><Highlight kind="normal">        Path = &#42;PathOrErr;</Highlight></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Path)</Highlight></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#42;Path;</Highlight></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try federation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> PathOrErr = <a href="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43">getCachedOrDownloadExecutable</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PathOrErr)</Highlight></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aee0e70be66536b9ef7b65ae2e5a45959">consumeError</a>(PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>());</Highlight></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fall back to debug binary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c">findDebugBinaryPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533" lineLink="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c"><Highlight kind="normal"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c">DebuginfodCollection::findDebugBinaryPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check collection; perform on-demand update if stale.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt; PathOrErr = getDebugBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PathOrErr)</Highlight></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><Highlight kind="normal">  std::optional&lt;std::string&gt; Path = &#42;PathOrErr;</Highlight></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Path) &#123;</Highlight></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> UpdatedOrErr = updateIfStale();</Highlight></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!UpdatedOrErr)</Highlight></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> UpdatedOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&#42;UpdatedOrErr) &#123;</Highlight></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try once more.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><Highlight kind="normal">      PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PathOrErr)</Highlight></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</Highlight></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><Highlight kind="normal">      Path = &#42;PathOrErr;</Highlight></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Path)</Highlight></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#42;Path;</Highlight></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try federation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0">getCachedOrDownloadDebuginfo</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558" lineLink="/docs/api/structs/llvm/debuginfodserver/#a146c3973caa3e8f160a781b1fa91b248"><Highlight kind="normal"><a href="/docs/api/structs/llvm/debuginfodserver/#a146c3973caa3e8f160a781b1fa91b248">DebuginfodServer::DebuginfodServer</a>(<a href="/docs/api/classes/llvm/debuginfodlog">DebuginfodLog</a> &amp;<a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>,</Highlight></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/debuginfodcollection">DebuginfodCollection</a> &amp;<a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>)</Highlight></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><Highlight kind="normal">    : <a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>(<a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>), <a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>(<a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>) &#123;</Highlight></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#aa1e1474f15df639f0d874b21f15666f7">cantFail</a>(</Highlight></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/debuginfodserver/#a97ffd636d8a6f0ab272d3f6dca95c8e4">Server</a>.get(R</Highlight><Highlight kind="stringliteral">&quot;(/buildid/(.&#42;)/debuginfo)&quot;, &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/httpserverrequest">HTTPServerRequest</a> Request) &#123;</Highlight></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><Highlight kind="stringliteral">        Log.push(</Highlight><Highlight kind="stringliteral">&quot;GET &quot;</Highlight><Highlight kind="normal"> + Request.UrlPath);</Highlight></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><Highlight kind="normal">        std::string IDString;</Highlight></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><Highlight kind="normal">        if (!tryGetFromHex(Request.UrlPathMatches&#91;0&#93;, IDString)) &#123;</Highlight></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><Highlight kind="normal">          Request.setResponse(</Highlight></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><Highlight kind="normal">              &#123;404, </Highlight><Highlight kind="stringliteral">&quot;text/plain&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Build ID is not a hex string\\n&quot;</Highlight><Highlight kind="normal">&#125;);</Highlight></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><Highlight kind="normal">          return;</Highlight></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/object/#a4304894bcf353bce5ba4d3dd7ff534d7">object::BuildID</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>(IDString.begin(), IDString.end());</Highlight></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> PathOrErr = <a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>.findDebugBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/classes/llvm/error">Error</a> Err = PathOrErr.takeError()) &#123;</Highlight></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><Highlight kind="normal">          consumeError(std::move(Err));</Highlight></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><Highlight kind="normal">          Request.setResponse(&#123;404, </Highlight><Highlight kind="stringliteral">&quot;text/plain&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Build ID not found\\n&quot;</Highlight><Highlight kind="normal">&#125;);</Highlight></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ad7c58f347a240684b93eb7ee8bfd6824">streamFile</a>(Request, &#42;PathOrErr);</Highlight></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><Highlight kind="normal">      &#125;));</Highlight></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><Highlight kind="normal">  cantFail(</Highlight></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><Highlight kind="normal">      Server.get(R</Highlight><Highlight kind="stringliteral">&quot;(/buildid/(.&#42;)/executable)&quot;, &#91;&amp;&#93;(HTTPServerRequest Request) &#123;</Highlight></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><Highlight kind="stringliteral">        Log.push(</Highlight><Highlight kind="stringliteral">&quot;GET &quot;</Highlight><Highlight kind="normal"> + Request.UrlPath);</Highlight></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><Highlight kind="normal">        std::string IDString;</Highlight></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><Highlight kind="normal">        if (!tryGetFromHex(Request.UrlPathMatches&#91;0&#93;, IDString)) &#123;</Highlight></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><Highlight kind="normal">          Request.setResponse(</Highlight></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><Highlight kind="normal">              &#123;404, </Highlight><Highlight kind="stringliteral">&quot;text/plain&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Build ID is not a hex string\\n&quot;</Highlight><Highlight kind="normal">&#125;);</Highlight></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><Highlight kind="normal">          return;</Highlight></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><Highlight kind="normal">        object::BuildID ID(IDString.begin(), IDString.end());</Highlight></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><Highlight kind="normal">        Expected&lt;std::string&gt; PathOrErr = Collection.findBinaryPath(ID);</Highlight></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (Error Err = PathOrErr.takeError()) &#123;</Highlight></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><Highlight kind="normal">          consumeError(std::move(Err));</Highlight></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><Highlight kind="normal">          Request.setResponse(&#123;404, </Highlight><Highlight kind="stringliteral">&quot;text/plain&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Build ID not found\\n&quot;</Highlight><Highlight kind="normal">&#125;);</Highlight></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ad7c58f347a240684b93eb7ee8bfd6824">streamFile</a>(Request, &#42;PathOrErr);</Highlight></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><Highlight kind="normal">      &#125;));</Highlight></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>

</ProgramListing>

</DoxygenPage>
