---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/debuginfod/debuginfod-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `Debuginfod.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file contains several definitions for the debuginfod client and server. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Debuginfod/Debuginfod.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfod/debuginfod-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/BinaryFormat/Magic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/binaryformat/magic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/DebugInfo/DWARF/DWARFContext.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/dwarf/dwarfcontext-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/DebugInfo/Symbolize/Symbolize.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/symbolize/symbolize-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Debuginfod/HTTPClient.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfod/httpclient-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Object/BuildID.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/object/buildid-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Object/ELFObjectFile.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/object/elfobjectfile-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CachePruning.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Caching.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/caching-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Errc.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errc-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Error.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/error-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/FileUtilities.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/fileutilities-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MemoryBuffer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/memorybuffer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Path.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/path-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ThreadPool.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/threadpool-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/xxhash.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/xxhash-h"
  isLocal="true" />
<IncludesListItem
  filePath="atomic"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="optional"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="thread"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-">llvm::anonymous&#123;Debuginfod.cpp&#125;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler">StreamedHTTPResponseHandler</a></>}>
A simple handler which streams the returned data to a cache file. <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file contains several definitions for the debuginfod client and server.

For the client, this file defines the fetchInfo function. For the server, this file defines the DebuginfodLogEntry and DebuginfodServer structs, as well as the DebuginfodLog, DebuginfodCollection classes. The fetchInfo function retrieves any of the three supported artifact types: (executable, debuginfo, source file) associated with a build-id from debuginfod servers. If a source file is to be fetched, its absolute path must be specified in the Description argument to fetchInfo. The DebuginfodLogEntry, DebuginfodLog, and DebuginfodCollection are used by the DebuginfodServer to scan the local filesystem for binaries and serve the debuginfod protocol.

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===-- llvm/Debuginfod/Debuginfod.cpp - Debuginfod client library --------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">/// This file contains several definitions for the debuginfod client and server.</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">/// For the client, this file defines the fetchInfo function. For the server,</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">/// this file defines the DebuginfodLogEntry and DebuginfodServer structs, as</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">/// well as the DebuginfodLog, DebuginfodCollection classes. The fetchInfo</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">/// function retrieves any of the three supported artifact types: (executable,</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">/// debuginfo, source file) associated with a build-id from debuginfod servers.</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightComment">/// If a source file is to be fetched, its absolute path must be specified in</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightComment">/// the Description argument to fetchInfo. The DebuginfodLogEntry,</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightComment">/// DebuginfodLog, and DebuginfodCollection are used by the DebuginfodServer to</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightComment">/// scan the local filesystem for binaries and serve the debuginfod protocol.</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfod/debuginfod-h">llvm/Debuginfod/Debuginfod.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h">llvm/ADT/StringExtras.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/binaryformat/magic-h">llvm/BinaryFormat/Magic.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/dwarf/dwarfcontext-h">llvm/DebugInfo/DWARF/DWARFContext.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/symbolize/symbolize-h">llvm/DebugInfo/Symbolize/Symbolize.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/debuginfod/httpclient-h">llvm/Debuginfod/HTTPClient.h</a>&quot;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/object/buildid-h">llvm/Object/BuildID.h</a>&quot;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/object/elfobjectfile-h">llvm/Object/ELFObjectFile.h</a>&quot;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">llvm/Support/CachePruning.h</a>&quot;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/caching-h">llvm/Support/Caching.h</a>&quot;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errc-h">llvm/Support/Errc.h</a>&quot;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/error-h">llvm/Support/Error.h</a>&quot;</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/fileutilities-h">llvm/Support/FileUtilities.h</a>&quot;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/memorybuffer-h">llvm/Support/MemoryBuffer.h</a>&quot;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/path-h">llvm/Support/Path.h</a>&quot;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/threadpool-h">llvm/Support/ThreadPool.h</a>&quot;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/xxhash-h">llvm/Support/xxhash.h</a>&quot;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightPreprocessor">#include &lt;atomic&gt;</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightPreprocessor">#include &lt;optional&gt;</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightPreprocessor">#include &lt;thread&gt;</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">llvm::object::BuildIDRef</a>;</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a1ce2df417e91dc06e087c4f6dbc8c473"><span class="doxyHighlight">std::optional&lt;SmallVector&lt;StringRef&gt;&gt; <a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a1ce2df417e91dc06e087c4f6dbc8c473">DebuginfodUrls</a>;</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightComment">// Many Readers/Single Writer lock protecting the global debuginfod URL list.</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54" lineLink="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a123393ae05a4429753667b713097c958"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/sys/#aa3f166e8bb27e1c9a1e5cbb439e9749b">llvm::sys::RWMutex</a> <a href="/docs/api/namespaces/llvm/anonymous-debuginfod-cpp-/#a123393ae05a4429753667b713097c958">UrlsMutex</a>;</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57" lineLink="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a"><span class="doxyHighlight">std::string <a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(<a href="/docs/api/classes/llvm/stringref">llvm::StringRef</a> S) &#123;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a41972fe6f3fab862543b7b835a714f9b">utostr</a>(<a href="/docs/api/namespaces/llvm/#a23db35042db15bf83edbd2250ea0ee90">xxh3&#95;64bits</a>(S));</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightComment">// Returns a binary BuildID as a normalized hex string.</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightComment">// Uses lowercase for compatibility with common debuginfod servers.</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63" lineLink="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#abec19670f96ed423c2e4d4f10a4c6975">llvm::toHex</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>, </span><span class="doxyHighlightComment">/&#42;LowerCase=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67" lineLink="/docs/api/namespaces/llvm/#af96e5af52e7fe106cf27c6c84ed7d934"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#af96e5af52e7fe106cf27c6c84ed7d934">canUseDebuginfod</a>() &#123;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/httpclient/#a0303f2e7844f319270e783e3ecc59274">HTTPClient::isAvailable</a>() &amp;&amp; !<a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>().empty();</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71" lineLink="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;StringRef&gt;</a> <a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>() &#123;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlight">  std::shared&#95;lock&lt;llvm::sys::RWMutex&gt; ReadGuard(UrlsMutex);</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DebuginfodUrls) &#123;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Only read from the environment variable if the user hasn&#39;t already</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// set the value.</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">    ReadGuard.unlock();</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlight">    std::unique&#95;lock&lt;llvm::sys::RWMutex&gt; WriteGuard(UrlsMutex);</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">    DebuginfodUrls = <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;StringRef&gt;</a>();</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;DebuginfodUrlsEnv = std::getenv(</span><span class="doxyHighlightStringLiteral">&quot;DEBUGINFOD&#95;URLS&quot;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/stringref">StringRef</a>(DebuginfodUrlsEnv)</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/stringref/#a0320b2a5a6d440bf4479a02e78cf5ca7">split</a>(DebuginfodUrls.value(), </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">, -1, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">    WriteGuard.unlock();</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlight">    ReadGuard.lock();</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DebuginfodUrls.value();</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlightComment">// Set the default debuginfod URL list, override the environment variable.</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90" lineLink="/docs/api/namespaces/llvm/#ae94a5b6af23d2131908f579b216f9893"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ae94a5b6af23d2131908f579b216f9893">setDefaultDebuginfodUrls</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;StringRef&gt;</a> &amp;URLs) &#123;</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlight">  std::unique&#95;lock&lt;llvm::sys::RWMutex&gt; WriteGuard(UrlsMutex);</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><span class="doxyHighlight">  DebuginfodUrls = URLs;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlightComment">/// Finds a default local file caching directory for the debuginfod client,</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlightComment">/// first checking DEBUGINFOD&#95;CACHE&#95;PATH.</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97" lineLink="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b">getDefaultDebuginfodCacheDirectory</a>() &#123;</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;CacheDirectoryEnv = std::getenv(</span><span class="doxyHighlightStringLiteral">&quot;DEBUGINFOD&#95;CACHE&#95;PATH&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CacheDirectoryEnv;</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> CacheDirectory;</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/sys/path/#a6c8daf95e53b1d17b5965a74533ca217">sys::path::cache&#95;directory</a>(CacheDirectory))</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>, </span><span class="doxyHighlightStringLiteral">&quot;Unable to determine appropriate cache directory.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(CacheDirectory, </span><span class="doxyHighlightStringLiteral">&quot;llvm-debuginfod&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;client&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(CacheDirectory);</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109" lineLink="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720"><span class="doxyHighlight">std::chrono::milliseconds <a href="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720">getDefaultDebuginfodTimeout</a>() &#123;</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">long</span><span class="doxyHighlight"> Timeout;</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;DebuginfodTimeoutEnv = std::getenv(</span><span class="doxyHighlightStringLiteral">&quot;DEBUGINFOD&#95;TIMEOUT&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DebuginfodTimeoutEnv &amp;&amp;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ae03f2b6a02fc9092755ba3a6cf6d2446">to&#95;integer</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a>(DebuginfodTimeoutEnv).trim(), Timeout, 10))</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::chrono::milliseconds(Timeout &#42; 1000);</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::chrono::milliseconds(90 &#42; 1000);</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlightComment">/// The following functions fetch a debuginfod artifact to a file in a local</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlightComment">/// cache and return the cached file path. They first search the local cache,</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlightComment">/// followed by the debuginfod servers.</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123" lineLink="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e"><span class="doxyHighlight">std::string <a href="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e">getDebuginfodSourceUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>,</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/stringref">StringRef</a> SourceFilePath) &#123;</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </span><span class="doxyHighlightStringLiteral">&quot;buildid&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </span><span class="doxyHighlightStringLiteral">&quot;source&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/sys/path/#aa8749375717a95d086e49f655fa75046">sys::path::convert&#95;to&#95;slash</a>(SourceFilePath));</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(UrlPath);</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132" lineLink="/docs/api/namespaces/llvm/#aa8179910c71adc4a7c62a254a388e93f"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#aa8179910c71adc4a7c62a254a388e93f">getCachedOrDownloadSource</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>,</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">                                                <a href="/docs/api/classes/llvm/stringref">StringRef</a> SourceFilePath) &#123;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlight">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a320dd800a37d3ce31b7d0b2c929e964e">getDebuginfodSourceUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>, SourceFilePath);</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e"><span class="doxyHighlight">std::string <a href="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e">getDebuginfodExecutableUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </span><span class="doxyHighlightStringLiteral">&quot;buildid&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </span><span class="doxyHighlightStringLiteral">&quot;executable&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(UrlPath);</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145" lineLink="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43">getCachedOrDownloadExecutable</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlight">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a483d4e85c83df350bd6013d6f825d83e">getDebuginfodExecutableUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150" lineLink="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad"><span class="doxyHighlight">std::string <a href="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad">getDebuginfodDebuginfoUrlPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> UrlPath;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(UrlPath, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, </span><span class="doxyHighlightStringLiteral">&quot;buildid&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>), </span><span class="doxyHighlightStringLiteral">&quot;debuginfo&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(UrlPath);</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157" lineLink="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0">getCachedOrDownloadDebuginfo</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">  std::string UrlPath = <a href="/docs/api/namespaces/llvm/#a8a4c2b693d9663216a1952801598efad">getDebuginfodDebuginfoUrlPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/namespaces/llvm/#a2191f7fdedc1f09e5e25331f4650583a">getDebuginfodCacheKey</a>(UrlPath), UrlPath);</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlightComment">// General fetching function.</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163" lineLink="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> UniqueKey,</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/stringref">StringRef</a> UrlPath) &#123;</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;10&gt;</a> CacheDir;</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> CacheDirOrErr = <a href="/docs/api/namespaces/llvm/#afa783dbdf91c831ef800357855a3e66b">getDefaultDebuginfodCacheDirectory</a>();</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CacheDirOrErr)</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CacheDirOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">  CacheDir = &#42;CacheDirOrErr;</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(UniqueKey, UrlPath, CacheDir,</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">                                     <a href="/docs/api/namespaces/llvm/#a2dbbd8a3a24b8bec3477cb7aab90b051">getDefaultDebuginfodUrls</a>(),</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">                                     <a href="/docs/api/namespaces/llvm/#aaeabb903223ed5f37d4dd75ded82a720">getDefaultDebuginfodTimeout</a>());</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlightComment">/// A simple handler which streams the returned data to a cache file. The cache</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlightComment">/// file is only created if a 200 OK status is observed.</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5">StreamedHTTPResponseHandler</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/httpresponsehandler">HTTPResponseHandler</a> &#123;</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">CreateStreamFn =</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlight">      std::function&lt;Expected&lt;std::unique&#95;ptr&lt;CachedFileStream&gt;&gt;()&gt;;</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlight">  CreateStreamFn CreateStream;</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> &amp;Client;</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">  std::unique&#95;ptr&lt;CachedFileStream&gt; FileStream;</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ab247772e046d6b623f8573db016ccdb5">StreamedHTTPResponseHandler</a>(CreateStreamFn CreateStream, <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> &amp;Client)</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">      : CreateStream(CreateStream), Client(Client) &#123;&#125;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#a2297e07dcc6d1cccff4760813d71577f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#a2297e07dcc6d1cccff4760813d71577f">~StreamedHTTPResponseHandler</a>() = </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b">handleBodyChunk</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> BodyChunk) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198" lineLink="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/anonymous-namespace-debuginfod-cpp-/streamedhttpresponsehandler/#ae3ec74d0da38e1e58d8c160075aaa17b">StreamedHTTPResponseHandler::handleBodyChunk</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> BodyChunk) &#123;</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FileStream) &#123;</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Code = Client.responseCode();</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Code &amp;&amp; Code != 200)</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/expected">Expected&lt;std::unique&#95;ptr&lt;CachedFileStream&gt;</a>&gt; FileStreamOrError =</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlight">        CreateStream();</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FileStreamOrError)</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FileStreamOrError.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">    FileStream = std::move(&#42;FileStreamOrError);</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">  &#42;FileStream-&gt;OS &lt;&lt; BodyChunk;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlightComment">// An over-accepting simplification of the HTTP RFC 7230 spec.</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214" lineLink="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d">isHeader</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> S) &#123;</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name;</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> <a href="/docs/api/classes/llvm/value">Value</a>;</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">  std::tie(Name, <a href="/docs/api/classes/llvm/value">Value</a>) = S.<a href="/docs/api/classes/llvm/stringref/#a0320b2a5a6d440bf4479a02e78cf5ca7">split</a>(</span><span class="doxyHighlightCharLiteral">&#39;:&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Name.empty() || <a href="/docs/api/classes/llvm/value">Value</a>.empty())</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(Name, &#91;&#93;(</span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ac26e7ec95828fe707f6b4d6c6a3bd897">llvm::isPrint</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &amp;&amp; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> != </span><span class="doxyHighlightCharLiteral">&#39; &#39;</span><span class="doxyHighlight">; &#125;) &amp;&amp;</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">         <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(<a href="/docs/api/classes/llvm/value">Value</a>, &#91;&#93;(</span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ac26e7ec95828fe707f6b4d6c6a3bd897">llvm::isPrint</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) || <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == </span><span class="doxyHighlightCharLiteral">&#39;\\t&#39;</span><span class="doxyHighlight">; &#125;);</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224" lineLink="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::string, 0&gt;</a> <a href="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99">getHeaders</a>() &#123;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;Filename = getenv(</span><span class="doxyHighlightStringLiteral">&quot;DEBUGINFOD&#95;HEADERS&#95;FILE&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Filename)</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;&#125;;</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/erroror">ErrorOr&lt;std::unique&#95;ptr&lt;MemoryBuffer&gt;</a>&gt; HeadersFile =</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/memorybuffer/#aa98611beefe78f907beeee7305cc8174">MemoryBuffer::getFile</a>(Filename, </span><span class="doxyHighlightComment">/&#42;IsText=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!HeadersFile)</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;&#125;;</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::string, 0&gt;</a> Headers;</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">  uint64&#95;t LineNumber = 0;</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Line : <a href="/docs/api/namespaces/llvm/#a8e3001fd5d1324d1e63ddcf56a45e955">llvm::split</a>((&#42;HeadersFile)-&gt;getBuffer(), </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">    LineNumber++;</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Line.empty() &amp;&amp; Line.back() == </span><span class="doxyHighlightCharLiteral">&#39;\\r&#39;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">      Line = Line.drop&#95;back();</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a2db677513c23141ea0ec08b46e2b975d">isHeader</a>(Line)) &#123;</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(Line, <a href="/docs/api/namespaces/llvm/#acea2ac67f3ff35107bcf1693416da8e7">llvm::isSpace</a>))</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/withcolor/#a237ad6eae22f6b2746a542c02d309a5b">WithColor::warning</a>()</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">            &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;could not parse debuginfod header: &quot;</span><span class="doxyHighlight"> &lt;&lt; Filename &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;:&#39;</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">            &lt;&lt; LineNumber &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">    Headers.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(Line);</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Headers;</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251" lineLink="/docs/api/namespaces/llvm/#a42f631dfb82c9318a72f2c1bdab57ad4"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/namespaces/llvm/#a8689c14987df3736f60ec4216dedd765">getCachedOrDownloadArtifact</a>(</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> UniqueKey, <a href="/docs/api/classes/llvm/stringref">StringRef</a> UrlPath, <a href="/docs/api/classes/llvm/stringref">StringRef</a> CacheDirectoryPath,</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;StringRef&gt;</a> DebuginfodUrls, std::chrono::milliseconds Timeout) &#123;</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> AbsCachedArtifactPath;</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(AbsCachedArtifactPath, CacheDirectoryPath,</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">                    </span><span class="doxyHighlightStringLiteral">&quot;llvmcache-&quot;</span><span class="doxyHighlight"> + UniqueKey);</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expected">Expected&lt;FileCache&gt;</a> CacheOrErr =</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#af73b4fcac77298355025a0e5975edcf0">localCache</a>(</span><span class="doxyHighlightStringLiteral">&quot;Debuginfod-client&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;.debuginfod-client&quot;</span><span class="doxyHighlight">, CacheDirectoryPath);</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CacheOrErr)</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CacheOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/filecache">FileCache</a> Cache = &#42;CacheOrErr;</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We choose an arbitrary Task parameter as we do not make use of it.</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Task = 0;</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expected">Expected&lt;AddStreamFn&gt;</a> CacheAddStreamOrErr = Cache(Task, UniqueKey, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CacheAddStreamOrErr)</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CacheAddStreamOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#aeb8b31be7b2c7dd67496051d7f952e94">AddStreamFn</a> &amp;CacheAddStream = &#42;CacheAddStreamOrErr;</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CacheAddStream)</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(AbsCachedArtifactPath);</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The artifact was not found in the local cache, query the debuginfod</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// servers.</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/httpclient/#a0303f2e7844f319270e783e3ecc59274">HTTPClient::isAvailable</a>())</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(<a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>,</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">                             </span><span class="doxyHighlightStringLiteral">&quot;No working HTTP client is available.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/httpclient/#a0ed9872a019597bc9572d382a26b24ec">HTTPClient::IsInitialized</a>)</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546bacccc32f2a5f7dc7b87d2f85daea66789">errc::io&#95;error</a>,</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;A working HTTP client is available, but it is not initialized. To &quot;</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;allow Debuginfod to make HTTP requests, call HTTPClient::initialize() &quot;</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;at the beginning of main.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/httpclient">HTTPClient</a> Client;</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">  Client.<a href="/docs/api/classes/llvm/httpclient/#ad8f7a940d825d8d2e2bca0aff20d771f">setTimeout</a>(Timeout);</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> ServerUrl : DebuginfodUrls) &#123;</span></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallstring">SmallString&lt;64&gt;</a> ArtifactUrl;</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/sys/path/#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ArtifactUrl, <a href="/docs/api/namespaces/llvm/sys/path/#a58cfd8a47c0ef96db27b451c2d6ec49fa950616e5405e4ef51a87d384180e7aa1">sys::path::Style::posix</a>, ServerUrl, UrlPath);</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Perform the HTTP request and if successful, write the response body to</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the cache.</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlight">    &#123;</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlight">      StreamedHTTPResponseHandler Handler(</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">          &#91;&amp;&#93;() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CacheAddStream(Task, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">); &#125;, Client);</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/httprequest">HTTPRequest</a> Request(ArtifactUrl);</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><span class="doxyHighlight">      Request.Headers = <a href="/docs/api/namespaces/llvm/#ae37fdf2c48e64e5ec89afa5a44774e99">getHeaders</a>();</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/error">Error</a> Err = Client.<a href="/docs/api/classes/llvm/httpclient/#a99e83d694bc912421b6c95985adf01d9">perform</a>(Request, Handler);</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Err)</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::move(Err);</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Code = Client.<a href="/docs/api/classes/llvm/httpclient/#a49d0ac3cb0735adf78a0d1d0b2252eb4">responseCode</a>();</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Code &amp;&amp; Code != 200)</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/expected">Expected&lt;CachePruningPolicy&gt;</a> PruningPolicyOrErr =</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a4accb2c6a0d7504200a547f2284ff106">parseCachePruningPolicy</a>(std::getenv(</span><span class="doxyHighlightStringLiteral">&quot;DEBUGINFOD&#95;CACHE&#95;POLICY&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PruningPolicyOrErr)</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PruningPolicyOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aabba6d27907082520ad2eb977c8e406b">pruneCache</a>(CacheDirectoryPath, &#42;PruningPolicyOrErr);</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Return the path to the artifact on disk.</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(AbsCachedArtifactPath);</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a4d2fd926089a58d482fb67a362e11bad">createStringError</a>(<a href="/docs/api/namespaces/llvm/#a59739a4f15fb2ec57a6b7fcfe938546ba4b82222a0895b538d0597092b3ceab3e">errc::argument&#95;out&#95;of&#95;domain</a>, </span><span class="doxyHighlightStringLiteral">&quot;build id not found&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320" lineLink="/docs/api/structs/llvm/debuginfodlogentry/#a8e8fa60b3de194921710bf716693018a"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/debuginfodlogentry/#ae8fc9320cce17ba4967ad70a4b879b73">DebuginfodLogEntry::DebuginfodLogEntry</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;<a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>)</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><span class="doxyHighlight">    : <a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry/#a45eca1077efb632b5ba79ff3af82d5a7">Message</a>.str()) &#123;&#125;</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="/docs/api/classes/llvm/debuginfodlog/#a7b3028f4cf2ec9f8ad1151bce1c5a247"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">DebuginfodLog::push</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Message) &#123;</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a>(Message));</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327" lineLink="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">DebuginfodLog::push</a>(<a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> Entry) &#123;</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlight">  &#123;</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><span class="doxyHighlight">    std::lock&#95;guard&lt;std::mutex&gt; Guard(QueueMutex);</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><span class="doxyHighlight">    LogEntryQueue.push(Entry);</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">  QueueCondition.notify&#95;one();</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335" lineLink="/docs/api/classes/llvm/debuginfodlog/#a0ada1a5e09014292b7d21a7b30dcc3af"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> <a href="/docs/api/classes/llvm/debuginfodlog/#a0ada1a5e09014292b7d21a7b30dcc3af">DebuginfodLog::pop</a>() &#123;</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlight">  &#123;</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><span class="doxyHighlight">    std::unique&#95;lock&lt;std::mutex&gt; Guard(QueueMutex);</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Wait for messages to be pushed into the queue.</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">    QueueCondition.wait(Guard, &#91;&amp;&#93; &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !LogEntryQueue.empty(); &#125;);</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">  std::lock&#95;guard&lt;std::mutex&gt; Guard(QueueMutex);</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LogEntryQueue.size())</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Expected message in the queue.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/debuginfodlogentry">DebuginfodLogEntry</a> Entry = LogEntryQueue.front();</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">  LogEntryQueue.pop();</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Entry;</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a1a653b254320ed5ac8fec48830363d9e"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/debuginfodcollection/#a1a653b254320ed5ac8fec48830363d9e">DebuginfodCollection::DebuginfodCollection</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;StringRef&gt;</a> PathsRef,</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/debuginfodlog">DebuginfodLog</a> &amp;Log,</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/threadpoolinterface">ThreadPoolInterface</a> &amp;Pool,</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeywordType">double</span><span class="doxyHighlight"> MinInterval)</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><span class="doxyHighlight">    : Log(Log), Pool(Pool), MinInterval(MinInterval) &#123;</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Path : PathsRef)</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">    Paths.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Path.str());</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">DebuginfodCollection::update</a>() &#123;</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlight">  std::lock&#95;guard&lt;sys::Mutex&gt; Guard(UpdateMutex);</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UpdateTimer.isRunning())</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlight">    UpdateTimer.stopTimer();</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlight">  UpdateTimer.clear();</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string &amp;Path : Paths) &#123;</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlight">    Log.<a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(</span><span class="doxyHighlightStringLiteral">&quot;Updating binaries at path &quot;</span><span class="doxyHighlight"> + Path);</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = findBinaries(Path))</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Err;</span></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlight">  Log.<a href="/docs/api/classes/llvm/debuginfodlog/#a44dc7b8b40006c3de319a8aa2aeb1f65">push</a>(</span><span class="doxyHighlightStringLiteral">&quot;Updated collection&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlight">  UpdateTimer.startTimer();</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> DebuginfodCollection::updateIfStale() &#123;</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UpdateTimer.<a href="/docs/api/classes/llvm/timer/#a154b012435c1f9e401727392754099f6">isRunning</a>())</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlight">  UpdateTimer.<a href="/docs/api/classes/llvm/timer/#a27f97da1b1d19ad74a847703ca25c455">stopTimer</a>();</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">double</span><span class="doxyHighlight"> Time = UpdateTimer.<a href="/docs/api/classes/llvm/timer/#abb761d10e49ca4c4a9d95e30dc026c9d">getTotalTime</a>().<a href="/docs/api/classes/llvm/timerecord/#a9177feaeded20b6e6d07d56994553a43">getWallTime</a>();</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlight">  UpdateTimer.<a href="/docs/api/classes/llvm/timer/#aa8c887576ec3b0d68c10ebf4097c367c">startTimer</a>();</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Time &lt; MinInterval)</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">update</a>())</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::move(Err);</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a658e5ec09f37dd9bc0bb13e8aa57b8d0"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/error">Error</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a658e5ec09f37dd9bc0bb13e8aa57b8d0">DebuginfodCollection::updateForever</a>(std::chrono::milliseconds <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>) &#123;</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/error">Error</a> Err = <a href="/docs/api/classes/llvm/debuginfodcollection/#a68a1fb7af3be229df5d6fa47b5ded6f5">update</a>())</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Err;</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><span class="doxyHighlight">    std::this&#95;thread::sleep&#95;for(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>);</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;updateForever loop should never end&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396" lineLink="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62">hasELFMagic</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> FilePath) &#123;</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/file-magic">file&#95;magic</a> <a href="/docs/api/classes/llvm/type">Type</a>;</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">  std::error&#95;code EC = <a href="/docs/api/namespaces/llvm/#a00941e59a16ad6eb14e905557a612501">identify&#95;magic</a>(FilePath, <a href="/docs/api/classes/llvm/type">Type</a>);</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EC)</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/type">Type</a>) &#123;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aad31db91c55e2f1f5090ddbe652c20b1f">file&#95;magic::elf</a>:</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa1b167178973059ff5b3a4b2bf2377450">file&#95;magic::elf&#95;relocatable</a>:</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa46a884b4756415ac19d0ac5d2bf56079">file&#95;magic::elf&#95;executable</a>:</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aa380638a0d06dd9003d4dd307f7b0851c">file&#95;magic::elf&#95;shared&#95;object</a>:</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/file-magic/#a39d74d9fa08229878443101289698b3aabf5672e0a28c6ed1db85035f1b85fc5b">file&#95;magic::elf&#95;core</a>:</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#ac226f3d2b9ca090171a8e0a8cb92c343a902b0d55fddef6f8d651fe1035b7d4bd">Error</a> DebuginfodCollection::findBinaries(StringRef Path) &#123;</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">  std::error&#95;code EC;</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlight">  sys::fs::recursive&#95;directory&#95;iterator <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>(Twine(Path), EC), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a>;</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlight">  std::mutex IteratorMutex;</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlight">  ThreadPoolTaskGroup IteratorGroup(Pool);</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> WorkerIndex = 0; WorkerIndex &lt; Pool.<a href="/docs/api/classes/llvm/threadpoolinterface/#a6ec7a595fe1af1fa5204286641a356fc">getMaxConcurrency</a>();</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">       WorkerIndex++) &#123;</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlight">    IteratorGroup.async(&#91;&amp;, </span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">&#93;() -&gt; </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlight">      std::string FilePath;</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">        &#123;</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Check if iteration is over or there is an error during iteration</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlight">          std::lock&#95;guard&lt;std::mutex&gt; Guard(IteratorMutex);</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a> || EC)</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Grab a file path from the directory iterator and advance the</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// iterator.</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">          FilePath = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;path();</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.increment(EC);</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Inspect the file at this path to determine if it is debuginfo.</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#ad48298f8ff6f565335be34f213479b62">hasELFMagic</a>(FilePath))</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">        Expected&lt;object::OwningBinary&lt;object::Binary&gt;&gt; BinOrErr =</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/object/#aebd3886db896c46327320cfd1ccc808c">object::createBinary</a>(FilePath);</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BinOrErr) &#123;</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#aee0e70be66536b9ef7b65ae2e5a45959">consumeError</a>(BinOrErr.takeError());</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">        object::Binary &#42;<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a> = std::move(BinOrErr.get().getBinary());</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a>-&gt;isObject())</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// TODO: Support non-ELF binaries</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlight">        object::ELFObjectFileBase &#42;<a href="/docs/api/namespaces/llvm/ifs/#adfe04e1a9cc096fb571e8372debaa67ea497031794414a552435f90151ac3b54b">Object</a> =</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;object::ELFObjectFileBase&gt;</a>(<a href="/docs/api/namespaces/llvm/#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">Bin</a>);</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Object)</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = <a href="/docs/api/namespaces/llvm/object/#a6e5d9df4335ddc5a345badf40a2f017f">getBuildID</a>(Object);</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>.empty())</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">        std::string IDString = <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/ifs/#adfe04e1a9cc096fb571e8372debaa67ea497031794414a552435f90151ac3b54b">Object</a>-&gt;hasDebugInfo()) &#123;</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">          std::lock&#95;guard&lt;sys::RWMutex&gt; DebugBinariesGuard(DebugBinariesMutex);</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">          (void)DebugBinaries.try&#95;emplace(IDString, std::move(FilePath));</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">          std::lock&#95;guard&lt;sys::RWMutex&gt; BinariesGuard(BinariesMutex);</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlight">          (void)Binaries.try&#95;emplace(IDString, std::move(FilePath));</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">    &#125;);</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">  IteratorGroup.wait();</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">  std::unique&#95;lock&lt;std::mutex&gt; Guard(IteratorMutex);</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EC)</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad10875fd499e8e285aaeef615e9b11aa">errorCodeToError</a>(EC);</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/error/#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt;</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlight">DebuginfodCollection::getBinaryPath(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">  Log.push(</span><span class="doxyHighlightStringLiteral">&quot;getting binary path of ID &quot;</span><span class="doxyHighlight"> + <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">  std::shared&#95;lock&lt;sys::RWMutex&gt; Guard(BinariesMutex);</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Loc = Binaries.find(<a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Loc != Binaries.end()) &#123;</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">    std::string <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a> = Loc-&gt;getValue();</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a>;</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt;</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">DebuginfodCollection::getDebugBinaryPath(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">  Log.push(</span><span class="doxyHighlightStringLiteral">&quot;getting debug binary path of ID &quot;</span><span class="doxyHighlight"> + <a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><span class="doxyHighlight">  std::shared&#95;lock&lt;sys::RWMutex&gt; Guard(DebugBinariesMutex);</span></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Loc = DebugBinaries.find(<a href="/docs/api/namespaces/llvm/#a44cb0ad0864b5ef83fec2312a073f900">buildIDToString</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>));</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Loc != DebugBinaries.end()) &#123;</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">    std::string <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a> = Loc-&gt;getValue();</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/pdb/#ac10322dc19a928c2dbb83ec9689dc23caac70412e939d72a9234cdebb1af5867b">Path</a>;</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501" lineLink="/docs/api/classes/llvm/debuginfodcollection/#a5c512cc4358cdcd16d9c633a4bb1a4ef"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#a5c512cc4358cdcd16d9c633a4bb1a4ef">DebuginfodCollection::findBinaryPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">  &#123;</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check collection; perform on-demand update if stale.</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt; PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PathOrErr)</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">    std::optional&lt;std::string&gt; Path = &#42;PathOrErr;</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Path) &#123;</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> UpdatedOrErr = updateIfStale();</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UpdatedOrErr)</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> UpdatedOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;UpdatedOrErr) &#123;</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Try once more.</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">        PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PathOrErr)</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">        Path = &#42;PathOrErr;</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Path)</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;Path;</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Try federation.</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> PathOrErr = <a href="/docs/api/namespaces/llvm/#a1a4d726c1a5c0e5542fce1bed7a02b43">getCachedOrDownloadExecutable</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PathOrErr)</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aee0e70be66536b9ef7b65ae2e5a45959">consumeError</a>(PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>());</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fall back to debug binary.</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c">findDebugBinaryPath</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533" lineLink="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> <a href="/docs/api/classes/llvm/debuginfodcollection/#aada228a8f1796b1bb98030dc0bd3cc7c">DebuginfodCollection::findDebugBinaryPath</a>(<a href="/docs/api/namespaces/llvm/object/#ac1078293d640738282058eba178e9472">BuildIDRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check collection; perform on-demand update if stale.</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expected">Expected&lt;std::optional&lt;std::string&gt;</a>&gt; PathOrErr = getDebugBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PathOrErr)</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlight">  std::optional&lt;std::string&gt; Path = &#42;PathOrErr;</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Path) &#123;</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/expected">Expected&lt;bool&gt;</a> UpdatedOrErr = updateIfStale();</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UpdatedOrErr)</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> UpdatedOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;UpdatedOrErr) &#123;</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Try once more.</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">      PathOrErr = getBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PathOrErr)</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PathOrErr.<a href="/docs/api/classes/llvm/expected/#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlight">      Path = &#42;PathOrErr;</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Path)</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;Path;</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Try federation.</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a385acc5407544454df091d3c3f7f6ad0">getCachedOrDownloadDebuginfo</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558" lineLink="/docs/api/structs/llvm/debuginfodserver/#a146c3973caa3e8f160a781b1fa91b248"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/debuginfodserver/#a146c3973caa3e8f160a781b1fa91b248">DebuginfodServer::DebuginfodServer</a>(<a href="/docs/api/classes/llvm/debuginfodlog">DebuginfodLog</a> &amp;<a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>,</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/debuginfodcollection">DebuginfodCollection</a> &amp;<a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>)</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlight">    : <a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>(<a href="/docs/api/structs/llvm/debuginfodserver/#a083908fd874987f211ff7f59b522a468">Log</a>), <a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>(<a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>) &#123;</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#aa1e1474f15df639f0d874b21f15666f7">cantFail</a>(</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/debuginfodserver/#a97ffd636d8a6f0ab272d3f6dca95c8e4">Server</a>.get(R</span><span class="doxyHighlightStringLiteral">&quot;(/buildid/(.&#42;)/debuginfo)&quot;, &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/httpserverrequest">HTTPServerRequest</a> Request) &#123;</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlightStringLiteral">        Log.push(</span><span class="doxyHighlightStringLiteral">&quot;GET &quot;</span><span class="doxyHighlight"> + Request.UrlPath);</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">        std::string IDString;</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">        if (!tryGetFromHex(Request.UrlPathMatches&#91;0&#93;, IDString)) &#123;</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">          Request.setResponse(</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">              &#123;404, </span><span class="doxyHighlightStringLiteral">&quot;text/plain&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Build ID is not a hex string\\n&quot;</span><span class="doxyHighlight">&#125;);</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">          return;</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/object/#a4304894bcf353bce5ba4d3dd7ff534d7">object::BuildID</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>(IDString.begin(), IDString.end());</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/expected">Expected&lt;std::string&gt;</a> PathOrErr = <a href="/docs/api/structs/llvm/debuginfodserver/#a8bd6b45a05358a6be5bb3f0a5f2adc62">Collection</a>.findDebugBinaryPath(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/classes/llvm/error">Error</a> Err = PathOrErr.takeError()) &#123;</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">          consumeError(std::move(Err));</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">          Request.setResponse(&#123;404, </span><span class="doxyHighlightStringLiteral">&quot;text/plain&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Build ID not found\\n&quot;</span><span class="doxyHighlight">&#125;);</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ad7c58f347a240684b93eb7ee8bfd6824">streamFile</a>(Request, &#42;PathOrErr);</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">      &#125;));</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">  cantFail(</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">      Server.get(R</span><span class="doxyHighlightStringLiteral">&quot;(/buildid/(.&#42;)/executable)&quot;, &#91;&amp;&#93;(HTTPServerRequest Request) &#123;</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlightStringLiteral">        Log.push(</span><span class="doxyHighlightStringLiteral">&quot;GET &quot;</span><span class="doxyHighlight"> + Request.UrlPath);</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlight">        std::string IDString;</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">        if (!tryGetFromHex(Request.UrlPathMatches&#91;0&#93;, IDString)) &#123;</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><span class="doxyHighlight">          Request.setResponse(</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlight">              &#123;404, </span><span class="doxyHighlightStringLiteral">&quot;text/plain&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Build ID is not a hex string\\n&quot;</span><span class="doxyHighlight">&#125;);</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">          return;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">        object::BuildID ID(IDString.begin(), IDString.end());</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">        Expected&lt;std::string&gt; PathOrErr = Collection.findBinaryPath(ID);</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (Error Err = PathOrErr.takeError()) &#123;</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">          consumeError(std::move(Err));</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">          Request.setResponse(&#123;404, </span><span class="doxyHighlightStringLiteral">&quot;text/plain&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Build ID not found\\n&quot;</span><span class="doxyHighlight">&#125;);</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ad7c58f347a240684b93eb7ee8bfd6824">streamFile</a>(Request, &#42;PathOrErr);</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">      &#125;));</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace llvm</span></CodeLine>

</ProgramListing>


</DoxygenPage>
