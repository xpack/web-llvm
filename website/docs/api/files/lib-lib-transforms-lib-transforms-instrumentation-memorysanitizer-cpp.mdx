---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'
import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MemorySanitizer.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file is a part of <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a>, a detector of uninitialized reads. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/MemorySanitizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/memorysanitizer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/APInt.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/apint-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DepthFirstIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SetVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/setvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallPtrSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/GlobalsModRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/TargetLibraryInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/ValueTracking.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Argument.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/AttributeMask.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/attributemask-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Attributes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/BasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/CallingConv.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/callingconv-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constant.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constants.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DataLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DerivedTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Function.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/function-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalValue.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalVariable.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InlineAsm.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstVisitor.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstrTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instruction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instructions.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicInst.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Intrinsics.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicsAArch64.h"
  permalink=""
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicsX86.h"
  permalink=""
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/MDBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Module.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/module-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Type.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/type-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Value.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/value-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/ValueMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/valuemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Alignment.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/alignment-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/AtomicOrdering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/atomicordering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Casting.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/casting-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/DebugCounter.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debugcounter-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MathExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/TargetParser/Triple.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/BasicBlockUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Instrumentation.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Local.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/ModuleUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="algorithm"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstddef"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="memory"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="tuple"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-">anonymous&#123;MemorySanitizer.cpp&#125;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams">PlatformMemoryMapParams</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a></>}>
Instrument functions of a module to detect uninitialized reads. <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a></>}>
A helper class that handles instrumentation of VarArg functions on a particular platform. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a></>}>
Helper class to attach debug information of the given instruction onto new instructions inserted after. <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a></>}>
This class does all the work for a given function. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint">ShadowOriginAndInsertPoint</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner">Combiner&lt;CombineShadow&gt;</a></>}>
Default propagation of shadow and/or origin. <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase">VarArgHelperBase</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper">VarArgAMD64Helper</a></>}>
AMD64-specific implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper">VarArgAArch64Helper</a></>}>
AArch64-specific implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper">VarArgPowerPCHelper</a></>}>
PowerPC-specific implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper">VarArgSystemZHelper</a></>}>
SystemZ-specific implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper">VarArgI386Helper</a></>}>
i386-specific implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper">VarArgGenericHelper</a></>}>
Implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a> that is used for ARM32, MIPS, <a href="/docs/api/namespaces/llvm/riscv">RISCV</a>, LoongArch64. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper">VarArgNoOpHelper</a></>}>
A no-op implementation of <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a>. <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</>}
  name={<><a href="#aa4ec1be5a80593697012bc67e2410e11">createPrivateConstGlobalForString</a> (Module &amp;M, StringRef Str)</>}>
Create a non-const global initialized with the given string. <a href="#aa4ec1be5a80593697012bc67e2410e11">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>VarArgHelper &#42;</>}
  name={<><a href="#abb08ae2f213bc5b87540413de9b095a2">CreateVarArgHelper</a> (Function &amp;Func, MemorySanitizer &amp;Msan, MemorySanitizerVisitor &amp;Visitor)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a1dd207beafbed039a8248b0c307ac569">DEBUG&#95;COUNTER</a> (DebugInsertCheck, &quot;msan-insert-check&quot;, &quot;Controls which checks to insert&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#aa28b7a2cd9be7ddecdd24f9692fc9fd6">DEBUG&#95;COUNTER</a> (DebugInstrumentInstruction, &quot;msan-instrument-instruction&quot;, &quot;Controls which instruction to instrument&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/constant">Constant</a> &#42;</>}
  name={<><a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a> (Module &amp;M, StringRef Name, Type &#42;Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a5372f41d26211efe4518e2c77f559ba5">TypeSizeToSizeIndex</a> (TypeSize TS)</>}>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a9a710e43cdadb8f11df70e2f8e1784ea">ClAndMask</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2622ac4e4855b9e0339799760c8e08e7">ClCheckConstantShadow</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aff7a784ef2ba8136fb338f23bccc8c17">ClDisableChecks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#ab6bfda65820457c2a529896cc101e444">ClDisambiguateWarning</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a0e33ca8e9058514c9b82a0e30478140d">ClDumpStrictInstructions</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a6b56dfb9e6691acfd25fd5d3901bc17c">ClDumpStrictIntrinsics</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aad66633e646d556fbd91a5cc30f0c5fd">ClEagerChecks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aeb7e469d1ac01802e1ad8e3d3daef6fc">ClEnableKmsan</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ace5f048c7137fe3364e809b3c34c3cca">ClHandleAsmConservative</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#add57c0965797f1cd395cfb0f28be04b7">ClHandleICmp</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a5d5b255beb6e29a70c776d2ad68c68ad">ClHandleICmpExact</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a9b9c616adc23214477236548737858c1">ClHandleLifetimeIntrinsics</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a562f393ed86818bc632731f717a91b36">ClInstrumentationWithCallThreshold</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aa41930b24d3e9c5d4852925edf27862f">ClKeepGoing</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a20b808fb973627f83cd6feacb3ceccfd">ClOriginBase</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a848e1ebd611f366583fc79c1c5ff2392">ClPoisonStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a56b93a7be228ba661a04962a9cef6c2a">ClPoisonStackPattern</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aedbb53489a0b0283aa6f1065bdc05004">ClPoisonStackWithCall</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a8438c35f22f870c5e2cafe47130fecb5">ClPoisonUndef</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a8d4d3c3c5a9ce85cd41923e734b24b2f">ClPrintStackNames</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a0a338b87087881055e15715778603aa5">ClShadowBase</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a521ae0d9cfcd9ef881093081427944ee">ClTrackOrigins</a></>}>
Track origins of uninitialized values. <a href="#a521ae0d9cfcd9ef881093081427944ee">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a468672dc2eaab7fbae2ceeeb27dd0779">ClWithComdat</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#acbf2a2374ecd89d6073278770b6cb3e2">ClXorMask</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#af747b72f572bea0b6a26d2debd1fb7ce">FreeBSD&#95;AArch64&#95;MemoryMapParams</a> = &#123;
    0x1800000000000, 
    0x0400000000000, 
    0x0200000000000, 
    0x0700000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#adb36c33aeb5fee17ad02437e9c66224b">FreeBSD&#95;ARM&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="#af747b72f572bea0b6a26d2debd1fb7ce">FreeBSD&#95;AArch64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#afb9d0ed3eeb1c18bd1e4a7e49931eaef">FreeBSD&#95;I386&#95;MemoryMapParams</a> = &#123;
    0x000180000000, 
    0x000040000000, 
    0x000020000000, 
    0x000700000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#aa4a932acb8e1035643948f68549051c9">FreeBSD&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;
    0xc00000000000, 
    0x200000000000, 
    0x100000000000, 
    0x380000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#ad4cbe2f3af1510f311e25f31960a2395">FreeBSD&#95;X86&#95;MemoryMapParams</a> = &#123;
    &amp;<a href="#afb9d0ed3eeb1c18bd1e4a7e49931eaef">FreeBSD&#95;I386&#95;MemoryMapParams</a>,
    &amp;<a href="#aa4a932acb8e1035643948f68549051c9">FreeBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/align">Align</a></>}
  name={<><a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a> = <a href="/docs/api/structs/llvm/align">Align</a>(4)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a8af7b57ae1e4ad42bcaa05293a5c3342">kMsanInitName</a> = &quot;&#95;&#95;msan&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#af88c19b19f09a99cbec7a026ea8fb68d">kMsanModuleCtorName</a> = &quot;msan.module&#95;ctor&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 4</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> = 4</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> = 800</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#af01d144255a66cebe47bfc492ef86eef">kRetvalTLSSize</a> = 800</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/align">Align</a></>}
  name={<><a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a> = <a href="/docs/api/structs/llvm/align">Align</a>(8)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a917f7b6819b115f7783119d89d6ef0bc">Linux&#95;AArch64&#95;MemoryMapParams</a> = &#123;
    0,               
    0x0B00000000000, 
    0,               
    0x0200000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#a62c49507ee2d3c0d0946ecd57f77e425">Linux&#95;ARM&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a917f7b6819b115f7783119d89d6ef0bc">Linux&#95;AArch64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a869bf65c8a3c3bb09f400b729f2b4c7a">Linux&#95;I386&#95;MemoryMapParams</a> = &#123;
    0x000080000000, 
    0,              
    0,              
    0x000040000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#a2cd3f25b8c2e52fdc0f96cf2f4647a34">Linux&#95;LoongArch&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a0067492b882e2a37b37c2d78db664aaa">Linux&#95;LoongArch64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a0067492b882e2a37b37c2d78db664aaa">Linux&#95;LoongArch64&#95;MemoryMapParams</a> = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#a44104caa1a5a058145a8c89e79a8c3c0">Linux&#95;MIPS&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="#abd5fb88de1265d54506a7fe292146375">Linux&#95;MIPS64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#abd5fb88de1265d54506a7fe292146375">Linux&#95;MIPS64&#95;MemoryMapParams</a> = &#123;
    0,              
    0x008000000000, 
    0,              
    0x002000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#aa52c4ef088fb95e3f80e5cce457670dc">Linux&#95;PowerPC&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="#ac1e9589a30ae4a558ac5bcac7b5cff29">Linux&#95;PowerPC64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#ac1e9589a30ae4a558ac5bcac7b5cff29">Linux&#95;PowerPC64&#95;MemoryMapParams</a> = &#123;
    0xE00000000000, 
    0x100000000000, 
    0x080000000000, 
    0x1C0000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#a01e0a4373f8027e05c70c847cf3da703">Linux&#95;S390&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="#a79ffbb19c3982527a5c674668cd7b400">Linux&#95;S390X&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a79ffbb19c3982527a5c674668cd7b400">Linux&#95;S390X&#95;MemoryMapParams</a> = &#123;
    0xC00000000000, 
    0,              
    0x080000000000, 
    0x1C0000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a086e31f131abbdc6591adafb6f984c6d">Linux&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4">Linux&#95;X86&#95;MemoryMapParams</a> = &#123;
    &amp;<a href="#a869bf65c8a3c3bb09f400b729f2b4c7a">Linux&#95;I386&#95;MemoryMapParams</a>,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a086e31f131abbdc6591adafb6f984c6d">Linux&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MemoryMapParams</>}
  name={<><a href="#a365de35301240d1e1e88d804f1baf63c">NetBSD&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> PlatformMemoryMapParams</>}
  name={<><a href="#aee1d3e45f64c88c96aa4c2dcf745a338">NetBSD&#95;X86&#95;MemoryMapParams</a> = &#123;
    nullptr,
    &amp;<a href="#a365de35301240d1e1e88d804f1baf63c">NetBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;msan&quot;</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file is a part of <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a>, a detector of uninitialized reads.

The algorithm of the tool is similar to Memcheck (<a href="https://static.usenix.org/event/usenix05/tech/general/full_papers/seward/seward_html/usenix2005.html">https://static.usenix.org/event/usenix05/tech/general/full&#95;papers/seward/seward&#95;html/usenix2005.html</a>) We associate a few shadow bits with every byte of the application memory, poison the shadow of the malloc-ed or alloca-ed memory, load the shadow, bits on every memory read, propagate the shadow bits through some of the arithmetic instruction (including MOV), store the shadow bits on every memory write, report a bug on some other instructions (e.g. JMP) if the associated shadow is poisoned.

But there are differences too. The first and the major one: compiler instrumentation instead of binary instrumentation. This gives us much better register allocation, possible compiler optimizations and a fast start-up. But this brings the major issue as well: msan needs to see all program events, including system calls and reads/writes in system libraries, so we either need to compile <em>everything</em> with msan or use a binary translation component (e.g. DynamoRIO) to instrument pre-built libraries. Another difference from Memcheck is that we use 8 shadow bits per byte of application memory and use a direct shadow mapping. This greatly simplifies the instrumentation code and avoids races on shadow updates (Memcheck is single-threaded so races are not a concern there. Memcheck uses 2 shadow bits per byte with a slow path storage that uses 8 bits per byte).

The default value of shadow is 0, which means &quot;clean&quot; (not poisoned).

Every module initializer should call &#95;&#95;msan&#95;init to ensure that the shadow memory is ready. On error, &#95;&#95;msan&#95;warning is called. Since parameters and return values may be passed via registers, we have a specialized thread-local shadow for return values (&#95;&#95;msan&#95;retval&#95;tls) and parameters (&#95;&#95;msan&#95;param&#95;tls). 

<CodeBlock>
                      Origin tracking.
</CodeBlock>

<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> can track origins (allocation points) of all uninitialized values. This behavior is controlled with a flag (msan-track-origins) and is disabled by default.

Origins are 4-byte values created and interpreted by the runtime library. They are stored in a second shadow mapping, one 4-byte value for 4 bytes of application memory. Propagation of origins is basically a bunch of &quot;select&quot; instructions that pick the origin of a dirty argument, if an instruction has one.

Every 4 aligned, consecutive bytes of application memory have one origin value associated with them. If these bytes contain uninitialized data coming from 2 different allocations, the last store wins. Because of this, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> reports can show unrelated origins, but this is unlikely in practice.

Origins are meaningless for fully initialized values, so <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> avoids storing origin to memory when a fully initialized value is stored. This way it avoids needless overwriting origin of the 4-byte region on a short (i.e. 1 byte) clean store, and it is also good for performance. 

<CodeBlock>
                       Atomic handling.
</CodeBlock>

Ideally, every atomic store of application value should update the corresponding shadow location in an atomic way. Unfortunately, atomic store of two disjoint locations can not be done without severe slowdown.

Therefore, we implement an approximation that may err on the safe side. In this implementation, every atomically accessed location in the program may only change from (partially) uninitialized to fully initialized, but not the other way around. We load the shadow <em>after</em> the application load, and we store the shadow <em>before</em> the app store. Also, we always store clean shadow (if the application store is atomic). This way, if the store-load pair constitutes a happens-before arc, shadow store and load are correctly ordered such that the load will get either the value that was stored, or some later value (which is always clean).

This does not work very well with Compare-And-Swap (CAS) and Read-Modify-Write (RMW) operations. To follow the above logic, CAS and RMW must store the new shadow before the app operation, and load the shadow after the app operation. Computers don&#39;t work this way. Current implementation ignores the load aspect of CAS/RMW, always returning a clean value. It implements the store part as a simple atomic store by storing a clean shadow. 

<CodeBlock>
                 Instrumenting inline assembly.
</CodeBlock>

For inline assembly code LLVM has little idea about which memory locations become initialized depending on the arguments. It can be possible to figure out which arguments are meant to point to inputs and outputs, but the actual semantics can be only visible at runtime. In the Linux kernel it&#39;s also possible that the arguments only indicate the offset for a base taken from a segment register, so it&#39;s dangerous to treat any asm() arguments as pointers. We take a conservative approach generating calls to &#95;&#95;msan&#95;instrument&#95;asm&#95;store(ptr, size) , which defer the memory unpoisoning to the runtime library. The latter can perform more complex address checks to figure out whether it&#39;s safe to touch the shadow memory. Like with atomic operations, we call &#95;&#95;msan&#95;instrument&#95;asm&#95;store() before the assembly call, so that changes to the shadow memory will be seen by other threads together with main memory initialization. 

<CodeBlock>
             KernelMemorySanitizer (KMSAN) implementation.
</CodeBlock>

The major differences between KMSAN and MSan instrumentation are:
<ul>
<li>KMSAN always tracks the origins and implies msan-keep-going=true;</li>
<li>KMSAN allocates shadow and origin memory for each page separately, so there are no explicit accesses to shadow and origin in the instrumentation. Shadow and origin values for a particular X-byte memory location (X=1,2,4,8) are accessed through pointers obtained via the &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;X(ptr) &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;X(ptr) functions. The corresponding functions check that the X-byte accesses are possible and returns the pointers to shadow and origin memory. Arbitrary sized accesses are handled with: &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;n(ptr, size) &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;n(ptr, size); Note that the sanitizer code has to deal with how shadow/origin pairs returned by the these functions are represented in different ABIs. In the X86&#95;64 ABI they are returned in RDX:RAX, in PowerPC64 they are returned in r3 and r4, and in the <a href="/docs/api/namespaces/llvm/systemz">SystemZ</a> ABI they are written to memory pointed to by a hidden parameter.</li>
<li>TLS variables are stored in a single per-task struct. A call to a function &#95;&#95;msan&#95;get&#95;context&#95;state() returning a pointer to that struct is inserted into every instrumented function before the entry block;</li>
<li>&#95;&#95;msan&#95;warning() takes a 32-bit origin parameter;</li>
<li>local variables are poisoned with &#95;&#95;msan&#95;poison&#95;alloca() upon function entry and unpoisoned with &#95;&#95;msan&#95;unpoison&#95;alloca() before leaving the function;</li>
<li>the pass doesn&#39;t declare any global variables or add global constructors to the translation unit.</li>
</ul>


Also, KMSAN currently ignores uninitialized memory passed into inline asm calls, making sure we&#39;re on the safe side wrt. possible false positives.

KernelMemorySanitizer only supports X86&#95;64, <a href="/docs/api/namespaces/llvm/systemz">SystemZ</a> and PowerPC64 at the moment.

<SectionDefinition>

## Functions

### createPrivateConstGlobalForString() {#aa4ec1be5a80593697012bc67e2410e11}

<MemberDefinition
  prototype={<>static GlobalVariable &#42; createPrivateConstGlobalForString (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Str)</>}
  labels = {["static"]}>
Create a non-const global initialized with the given string.

Creates a writable global for Str so that we can pass it to the run-time lib. Runtime uses first 4 bytes of the string to store the frame <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>, so the string needs to be mutable.

Definition at line <a href="#l00783">783</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### CreateVarArgHelper() {#abb08ae2f213bc5b87540413de9b095a2}

<MemberDefinition
  prototype={<>static VarArgHelper &#42; CreateVarArgHelper (<a href="/docs/api/classes/llvm/function">Function</a> &amp; Func, MemorySanitizer &amp; Msan, MemorySanitizerVisitor &amp; Visitor)</>}
  labels = {["static"]}>

Definition at line <a href="#l06616">6616</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### DEBUG&#95;COUNTER() {#a1dd207beafbed039a8248b0c307ac569}

<MemberDefinition
  prototype={<>DEBUG&#95;COUNTER (DebugInsertCheck, &quot;msan-insert-check&quot;, &quot;Controls which <a href="/docs/api/files/lib/lib/codegen/implicitnullchecks-cpp/#a9a4776a2cfc0bcc3774690aef4b43196">checks</a> to insert&quot;)</>}>

Definition at line <a href="#l00217">217</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### DEBUG&#95;COUNTER() {#aa28b7a2cd9be7ddecdd24f9692fc9fd6}

<MemberDefinition
  prototype={<>DEBUG&#95;COUNTER (DebugInstrumentInstruction, &quot;msan-<a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/entryexitinstrumenter-cpp/#acb9c335e22ffcd4405602cd7abb8e775">instrument</a>-instruction&quot;, &quot;Controls which instruction to instrument&quot;)</>}>

Definition at line <a href="#l00220">220</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### getOrInsertGlobal() {#a698362b4a496404a634097b8cd46dab4}

<MemberDefinition
  prototype={<>static Constant &#42; getOrInsertGlobal (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name, <a href="/docs/api/classes/llvm/type">Type</a> &#42; Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00858">858</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### TypeSizeToSizeIndex() {#a5372f41d26211efe4518e2c77f559ba5}

<MemberDefinition
  prototype={<>static unsigned TypeSizeToSizeIndex (<a href="/docs/api/classes/llvm/typesize">TypeSize</a> TS)</>}
  labels = {["static"]}>

Definition at line <a href="#l01131">1131</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### ClAndMask {#a9a710e43cdadb8f11df70e2f8e1784ea}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClAndMask(&quot;msan-and-mask&quot;, cl::desc(&quot;Define custom MSan AndMask&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00360">360</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClCheckAccessAddress {#afc0f84e2f6fb17e5df5123d01f914e4b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClCheckAccessAddress(&quot;msan-check-access-address&quot;, cl::desc(&quot;report accesses through a pointer which has poisoned shadow&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00306">306</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClCheckConstantShadow {#a2622ac4e4855b9e0339799760c8e08e7}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClCheckConstantShadow(&quot;msan-check-constant-shadow&quot;, cl::desc(&quot;Insert checks for constant shadow values&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00347">347</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClDisableChecks {#aff7a784ef2ba8136fb338f23bccc8c17}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClDisableChecks(&quot;msan-disable-checks&quot;, cl::desc(&quot;Apply no&#95;sanitize to the whole file&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00342">342</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClDisambiguateWarning {#ab6bfda65820457c2a529896cc101e444}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDisambiguateWarning(&quot;msan-disambiguate-warning-threshold&quot;, cl::desc(&quot;Define threshold for number of checks per &quot; &quot;debug location to force origin update.&quot;), cl::Hidden, cl::init(3))</>}
  labels = {["static"]}>

Definition at line <a href="#l00377">377</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClDumpStrictInstructions {#a0e33ca8e9058514c9b82a0e30478140d}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClDumpStrictInstructions(&quot;msan-dump-strict-instructions&quot;, cl::desc(&quot;print out instructions with default strict semantics&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00316">316</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClDumpStrictIntrinsics {#a6b56dfb9e6691acfd25fd5d3901bc17c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClDumpStrictIntrinsics(&quot;msan-dump-strict-intrinsics&quot;, cl::desc(&quot;Prints &#39;unknown&#39; intrinsics that were handled heuristically. &quot; &quot;Use -msan-dump-strict-instructions to print intrinsics that &quot; &quot;could not be handled exactly nor heuristically.&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00321">321</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClEagerChecks {#aad66633e646d556fbd91a5cc30f0c5fd}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClEagerChecks(&quot;msan-eager-checks&quot;, cl::desc(&quot;check arguments and return values at function call boundaries&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00311">311</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClEnableKmsan {#aeb7e469d1ac01802e1ad8e3d3daef6fc}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClEnableKmsan(&quot;msan-kernel&quot;, cl::desc(&quot;Enable KernelMemorySanitizer instrumentation&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00337">337</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClHandleAsmConservative {#ace5f048c7137fe3364e809b3c34c3cca}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClHandleAsmConservative(&quot;msan-handle-asm-conservative&quot;, cl::desc(&quot;conservative handling of inline assembly&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00295">295</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClHandleICmp {#add57c0965797f1cd395cfb0f28be04b7}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClHandleICmp(&quot;msan-handle-icmp&quot;, cl::desc(&quot;propagate shadow through ICmpEQ and ICmpNE&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00272">272</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClHandleICmpExact {#a5d5b255beb6e29a70c776d2ad68c68ad}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClHandleICmpExact(&quot;msan-handle-icmp-exact&quot;, cl::desc(&quot;exact handling of relational integer ICmp&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00277">277</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClHandleLifetimeIntrinsics {#a9b9c616adc23214477236548737858c1}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClHandleLifetimeIntrinsics(&quot;msan-handle-lifetime-intrinsics&quot;, cl::desc( &quot;when possible, poison scoped variables at the beginning of the scope &quot; &quot;(slower, but more precise)&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00281">281</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentationWithCallThreshold {#a562f393ed86818bc632731f717a91b36}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClInstrumentationWithCallThreshold(&quot;msan-instrumentation-with-call-threshold&quot;, cl::desc( &quot;If the function being instrumented requires more than &quot; &quot;this number of checks and origin stores, use callbacks instead of &quot; &quot;inline checks (-1 means never use callbacks).&quot;), cl::Hidden, cl::init(3500))</>}
  labels = {["static"]}>

Definition at line <a href="#l00328">328</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClKeepGoing {#aa41930b24d3e9c5d4852925edf27862f}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClKeepGoing(&quot;msan-keep-going&quot;, cl::desc(&quot;keep going after reporting a UMR&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00243">243</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClOriginBase {#a20b808fb973627f83cd6feacb3ceccfd}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClOriginBase(&quot;msan-origin-base&quot;, cl::desc(&quot;Define custom MSan OriginBase&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00372">372</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClPoisonStack {#a848e1ebd611f366583fc79c1c5ff2392}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClPoisonStack(&quot;msan-poison-stack&quot;, cl::desc(&quot;poison uninitialized stack variables&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00248">248</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClPoisonStackPattern {#a56b93a7be228ba661a04962a9cef6c2a}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClPoisonStackPattern(&quot;msan-poison-stack-pattern&quot;, cl::desc(&quot;poison uninitialized stack variables with the given pattern&quot;), cl::Hidden, cl::init(0xff))</>}
  labels = {["static"]}>

Definition at line <a href="#l00257">257</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClPoisonStackWithCall {#aedbb53489a0b0283aa6f1065bdc05004}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClPoisonStackWithCall(&quot;msan-poison-stack-with-call&quot;, cl::desc(&quot;poison uninitialized stack variables with a call&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00252">252</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClPoisonUndef {#a8438c35f22f870c5e2cafe47130fecb5}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClPoisonUndef(&quot;msan-poison-undef&quot;, cl::desc(&quot;poison undef temps&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00267">267</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClPrintStackNames {#a8d4d3c3c5a9ce85cd41923e734b24b2f}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClPrintStackNames(&quot;msan-print-stack-names&quot;, cl::desc(&quot;Print name of local stack variable&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00263">263</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClShadowBase {#a0a338b87087881055e15715778603aa5}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClShadowBase(&quot;msan-shadow-base&quot;, cl::desc(&quot;Define custom MSan ShadowBase&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00368">368</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClTrackOrigins {#a521ae0d9cfcd9ef881093081427944ee}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClTrackOrigins(&quot;msan-track-origins&quot;, cl::desc(&quot;Track origins (allocation sites) of poisoned memory&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>
Track origins of uninitialized values.

Adds a section to <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> report that points to the allocation (stack or heap) the uninitialized bits came from originally.

Definition at line <a href="#l00238">238</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClWithComdat {#a468672dc2eaab7fbae2ceeeb27dd0779}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithComdat(&quot;msan-with-comdat&quot;, cl::desc(&quot;Place MSan constructors in comdat sections&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00354">354</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### ClXorMask {#acbf2a2374ecd89d6073278770b6cb3e2}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClXorMask(&quot;msan-xor-mask&quot;, cl::desc(&quot;Define custom MSan XorMask&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00364">364</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### FreeBSD&#95;AArch64&#95;MemoryMapParams {#af747b72f572bea0b6a26d2debd1fb7ce}

<MemberDefinition
  prototype={<>const MemoryMapParams FreeBSD&#95;AArch64&#95;MemoryMapParams = &#123;
    0x1800000000000, 
    0x0400000000000, 
    0x0200000000000, 
    0x0700000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00478">478</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### FreeBSD&#95;ARM&#95;MemoryMapParams {#adb36c33aeb5fee17ad02437e9c66224b}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams FreeBSD&#95;ARM&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="#af747b72f572bea0b6a26d2debd1fb7ce">FreeBSD&#95;AArch64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00539">539</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### FreeBSD&#95;I386&#95;MemoryMapParams {#afb9d0ed3eeb1c18bd1e4a7e49931eaef}

<MemberDefinition
  prototype={<>const MemoryMapParams FreeBSD&#95;I386&#95;MemoryMapParams = &#123;
    0x000180000000, 
    0x000040000000, 
    0x000020000000, 
    0x000700000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00486">486</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### FreeBSD&#95;X86&#95;64&#95;MemoryMapParams {#aa4a932acb8e1035643948f68549051c9}

<MemberDefinition
  prototype={<>const MemoryMapParams FreeBSD&#95;X86&#95;64&#95;MemoryMapParams = &#123;
    0xc00000000000, 
    0x200000000000, 
    0x100000000000, 
    0x380000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00494">494</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### FreeBSD&#95;X86&#95;MemoryMapParams {#ad4cbe2f3af1510f311e25f31960a2395}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams FreeBSD&#95;X86&#95;MemoryMapParams = &#123;
    &amp;<a href="#afb9d0ed3eeb1c18bd1e4a7e49931eaef">FreeBSD&#95;I386&#95;MemoryMapParams</a>,
    &amp;<a href="#aa4a932acb8e1035643948f68549051c9">FreeBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00544">544</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kMinOriginAlignment {#a0760acbb386bfe440e697587140561cc}

<MemberDefinition
  prototype={<>const Align kMinOriginAlignment = <a href="/docs/api/structs/llvm/align">Align</a>(4)</>}
  labels = {["static"]}>

Definition at line <a href="#l00224">224</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kMsanInitName {#a8af7b57ae1e4ad42bcaa05293a5c3342}

<MemberDefinition
  prototype={<>const char kMsanInitName&#91;&#93; = &quot;&#95;&#95;msan&#95;init&quot;</>}>

Definition at line <a href="#l00383">383</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kMsanModuleCtorName {#af88c19b19f09a99cbec7a026ea8fb68d}

<MemberDefinition
  prototype={<>const char kMsanModuleCtorName&#91;&#93; = &quot;msan.module&#95;ctor&quot;</>}>

Definition at line <a href="#l00382">382</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kNumberOfAccessSizes {#aa62a4d0672bab180dd339cda25b23b2e}

<MemberDefinition
  prototype={<>const size&#95;t kNumberOfAccessSizes = 4</>}
  labels = {["static"]}>

Definition at line <a href="#l00232">232</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kOriginSize {#a454da6b23d63f4bb778f6249cc427b91}

<MemberDefinition
  prototype="const unsigned kOriginSize = 4"
  labels = {["static"]}>

Definition at line <a href="#l00223">223</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kParamTLSSize {#adce9aed4162f58fbab5da93984822c3a}

<MemberDefinition
  prototype="const unsigned kParamTLSSize = 800"
  labels = {["static"]}>

Definition at line <a href="#l00228">228</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kRetvalTLSSize {#af01d144255a66cebe47bfc492ef86eef}

<MemberDefinition
  prototype="const unsigned kRetvalTLSSize = 800"
  labels = {["static"]}>

Definition at line <a href="#l00229">229</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### kShadowTLSAlignment {#a58600da67d1e0fa57a2a70cd3be51d6e}

<MemberDefinition
  prototype={<>const Align kShadowTLSAlignment = <a href="/docs/api/structs/llvm/align">Align</a>(8)</>}
  labels = {["static"]}>

Definition at line <a href="#l00225">225</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;AArch64&#95;MemoryMapParams {#a917f7b6819b115f7783119d89d6ef0bc}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;AArch64&#95;MemoryMapParams = &#123;
    0,               
    0x0B00000000000, 
    0,               
    0x0200000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00458">458</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;ARM&#95;MemoryMapParams {#a62c49507ee2d3c0d0946ecd57f77e425}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;ARM&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a917f7b6819b115f7783119d89d6ef0bc">Linux&#95;AArch64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00529">529</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;I386&#95;MemoryMapParams {#a869bf65c8a3c3bb09f400b729f2b4c7a}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;I386&#95;MemoryMapParams = &#123;
    0x000080000000, 
    0,              
    0,              
    0x000040000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00406">406</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;LoongArch&#95;MemoryMapParams {#a2cd3f25b8c2e52fdc0f96cf2f4647a34}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;LoongArch&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a0067492b882e2a37b37c2d78db664aaa">Linux&#95;LoongArch64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00534">534</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;LoongArch64&#95;MemoryMapParams {#a0067492b882e2a37b37c2d78db664aaa}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;LoongArch64&#95;MemoryMapParams = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00466">466</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;MIPS&#95;MemoryMapParams {#a44104caa1a5a058145a8c89e79a8c3c0}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;MIPS&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="#abd5fb88de1265d54506a7fe292146375">Linux&#95;MIPS64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00514">514</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;MIPS64&#95;MemoryMapParams {#abd5fb88de1265d54506a7fe292146375}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;MIPS64&#95;MemoryMapParams = &#123;
    0,              
    0x008000000000, 
    0,              
    0x002000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00426">426</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;PowerPC&#95;MemoryMapParams {#aa52c4ef088fb95e3f80e5cce457670dc}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;PowerPC&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="#ac1e9589a30ae4a558ac5bcac7b5cff29">Linux&#95;PowerPC64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00519">519</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;PowerPC64&#95;MemoryMapParams {#ac1e9589a30ae4a558ac5bcac7b5cff29}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;PowerPC64&#95;MemoryMapParams = &#123;
    0xE00000000000, 
    0x100000000000, 
    0x080000000000, 
    0x1C0000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00438">438</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;S390&#95;MemoryMapParams {#a01e0a4373f8027e05c70c847cf3da703}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;S390&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="#a79ffbb19c3982527a5c674668cd7b400">Linux&#95;S390X&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00524">524</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;S390X&#95;MemoryMapParams {#a79ffbb19c3982527a5c674668cd7b400}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;S390X&#95;MemoryMapParams = &#123;
    0xC00000000000, 
    0,              
    0x080000000000, 
    0x1C0000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00446">446</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;X86&#95;64&#95;MemoryMapParams {#a086e31f131abbdc6591adafb6f984c6d}

<MemberDefinition
  prototype={<>const MemoryMapParams Linux&#95;X86&#95;64&#95;MemoryMapParams = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00414">414</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### Linux&#95;X86&#95;MemoryMapParams {#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams Linux&#95;X86&#95;MemoryMapParams = &#123;
    &amp;<a href="#a869bf65c8a3c3bb09f400b729f2b4c7a">Linux&#95;I386&#95;MemoryMapParams</a>,
    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a086e31f131abbdc6591adafb6f984c6d">Linux&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00509">509</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### NetBSD&#95;X86&#95;64&#95;MemoryMapParams {#a365de35301240d1e1e88d804f1baf63c}

<MemberDefinition
  prototype={<>const MemoryMapParams NetBSD&#95;X86&#95;64&#95;MemoryMapParams = &#123;
    0,              
    0x500000000000, 
    0,              
    0x100000000000, 
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00502">502</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

### NetBSD&#95;X86&#95;MemoryMapParams {#aee1d3e45f64c88c96aa4c2dcf745a338}

<MemberDefinition
  prototype={<>const PlatformMemoryMapParams NetBSD&#95;X86&#95;MemoryMapParams = &#123;
    nullptr,
    &amp;<a href="#a365de35301240d1e1e88d804f1baf63c">NetBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,
&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00549">549</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;msan&quot;</>}>

Definition at line <a href="#l00215">215</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/memorysanitizer-cpp">MemorySanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- MemorySanitizer.cpp - detector of uninitialized reads --------------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// This file is a part of MemorySanitizer, a detector of uninitialized</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">/// reads.</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">/// The algorithm of the tool is similar to Memcheck</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">/// (https://static.usenix.org/event/usenix05/tech/general/full&#95;papers/seward/seward&#95;html/usenix2005.html)</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">/// We associate a few shadow bits with every byte of the application memory,</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">/// poison the shadow of the malloc-ed or alloca-ed memory, load the shadow,</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightComment">/// bits on every memory read, propagate the shadow bits through some of the</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightComment">/// arithmetic instruction (including MOV), store the shadow bits on every</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightComment">/// memory write, report a bug on some other instructions (e.g. JMP) if the</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightComment">/// associated shadow is poisoned.</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightComment">/// But there are differences too. The first and the major one:</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightComment">/// compiler instrumentation instead of binary instrumentation. This</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightComment">/// gives us much better register allocation, possible compiler</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightComment">/// optimizations and a fast start-up. But this brings the major issue</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightComment">/// as well: msan needs to see all program events, including system</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightComment">/// calls and reads/writes in system libraries, so we either need to</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightComment">/// compile &#42;everything&#42; with msan or use a binary translation</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightComment">/// component (e.g. DynamoRIO) to instrument pre-built libraries.</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightComment">/// Another difference from Memcheck is that we use 8 shadow bits per</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightComment">/// byte of application memory and use a direct shadow mapping. This</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightComment">/// greatly simplifies the instrumentation code and avoids races on</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightComment">/// shadow updates (Memcheck is single-threaded so races are not a</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightComment">/// concern there. Memcheck uses 2 shadow bits per byte with a slow</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightComment">/// path storage that uses 8 bits per byte).</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightComment">/// The default value of shadow is 0, which means &quot;clean&quot; (not poisoned).</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightComment">/// Every module initializer should call &#95;&#95;msan&#95;init to ensure that the</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightComment">/// shadow memory is ready. On error, &#95;&#95;msan&#95;warning is called. Since</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightComment">/// parameters and return values may be passed via registers, we have a</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightComment">/// specialized thread-local shadow for return values</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightComment">/// (&#95;&#95;msan&#95;retval&#95;tls) and parameters (&#95;&#95;msan&#95;param&#95;tls).</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightComment">///                           Origin tracking.</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightComment">/// MemorySanitizer can track origins (allocation points) of all uninitialized</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlightComment">/// values. This behavior is controlled with a flag (msan-track-origins) and is</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightComment">/// disabled by default.</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlightComment">/// Origins are 4-byte values created and interpreted by the runtime library.</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlightComment">/// They are stored in a second shadow mapping, one 4-byte value for 4 bytes</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightComment">/// of application memory. Propagation of origins is basically a bunch of</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightComment">/// &quot;select&quot; instructions that pick the origin of a dirty argument, if an</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlightComment">/// instruction has one.</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlightComment">/// Every 4 aligned, consecutive bytes of application memory have one origin</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlightComment">/// value associated with them. If these bytes contain uninitialized data</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlightComment">/// coming from 2 different allocations, the last store wins. Because of this,</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><span class="doxyHighlightComment">/// MemorySanitizer reports can show unrelated origins, but this is unlikely in</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightComment">/// practice.</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlightComment">/// Origins are meaningless for fully initialized values, so MemorySanitizer</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlightComment">/// avoids storing origin to memory when a fully initialized value is stored.</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlightComment">/// This way it avoids needless overwriting origin of the 4-byte region on</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><span class="doxyHighlightComment">/// a short (i.e. 1 byte) clean store, and it is also good for performance.</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlightComment">///                            Atomic handling.</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlightComment">/// Ideally, every atomic store of application value should update the</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlightComment">/// corresponding shadow location in an atomic way. Unfortunately, atomic store</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlightComment">/// of two disjoint locations can not be done without severe slowdown.</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlightComment">/// Therefore, we implement an approximation that may err on the safe side.</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlightComment">/// In this implementation, every atomically accessed location in the program</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlightComment">/// may only change from (partially) uninitialized to fully initialized, but</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlightComment">/// not the other way around. We load the shadow &#95;after&#95; the application load,</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlightComment">/// and we store the shadow &#95;before&#95; the app store. Also, we always store clean</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlightComment">/// shadow (if the application store is atomic). This way, if the store-load</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlightComment">/// pair constitutes a happens-before arc, shadow store and load are correctly</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlightComment">/// ordered such that the load will get either the value that was stored, or</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlightComment">/// some later value (which is always clean).</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlightComment">/// This does not work very well with Compare-And-Swap (CAS) and</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlightComment">/// Read-Modify-Write (RMW) operations. To follow the above logic, CAS and RMW</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlightComment">/// must store the new shadow before the app operation, and load the shadow</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlightComment">/// after the app operation. Computers don&#39;t work this way. Current</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlightComment">/// implementation ignores the load aspect of CAS/RMW, always returning a clean</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlightComment">/// value. It implements the store part as a simple atomic store by storing a</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlightComment">/// clean shadow.</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><span class="doxyHighlightComment">///                      Instrumenting inline assembly.</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlightComment">/// For inline assembly code LLVM has little idea about which memory locations</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlightComment">/// become initialized depending on the arguments. It can be possible to figure</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlightComment">/// out which arguments are meant to point to inputs and outputs, but the</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlightComment">/// actual semantics can be only visible at runtime. In the Linux kernel it&#39;s</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlightComment">/// also possible that the arguments only indicate the offset for a base taken</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlightComment">/// from a segment register, so it&#39;s dangerous to treat any asm() arguments as</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlightComment">/// pointers. We take a conservative approach generating calls to</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlightComment">///   &#95;&#95;msan&#95;instrument&#95;asm&#95;store(ptr, size)</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlightComment">/// , which defer the memory unpoisoning to the runtime library.</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlightComment">/// The latter can perform more complex address checks to figure out whether</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlightComment">/// it&#39;s safe to touch the shadow memory.</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlightComment">/// Like with atomic operations, we call &#95;&#95;msan&#95;instrument&#95;asm&#95;store() before</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlightComment">/// the assembly call, so that changes to the shadow memory will be seen by</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlightComment">/// other threads together with main memory initialization.</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlightComment">///                  KernelMemorySanitizer (KMSAN) implementation.</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlightComment">/// The major differences between KMSAN and MSan instrumentation are:</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlightComment">///  - KMSAN always tracks the origins and implies msan-keep-going=true;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlightComment">///  - KMSAN allocates shadow and origin memory for each page separately, so</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlightComment">///    there are no explicit accesses to shadow and origin in the</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlightComment">///    instrumentation.</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlightComment">///    Shadow and origin values for a particular X-byte memory location</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlightComment">///    (X=1,2,4,8) are accessed through pointers obtained via the</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlightComment">///      &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;X(ptr)</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlightComment">///      &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;X(ptr)</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlightComment">///    functions. The corresponding functions check that the X-byte accesses</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlightComment">///    are possible and returns the pointers to shadow and origin memory.</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlightComment">///    Arbitrary sized accesses are handled with:</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlightComment">///      &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;n(ptr, size)</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><span class="doxyHighlightComment">///      &#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;n(ptr, size);</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlightComment">///    Note that the sanitizer code has to deal with how shadow/origin pairs</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlightComment">///    returned by the these functions are represented in different ABIs. In</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlightComment">///    the X86&#95;64 ABI they are returned in RDX:RAX, in PowerPC64 they are</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlightComment">///    returned in r3 and r4, and in the SystemZ ABI they are written to memory</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlightComment">///    pointed to by a hidden parameter.</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlightComment">///  - TLS variables are stored in a single per-task struct. A call to a</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlightComment">///    function &#95;&#95;msan&#95;get&#95;context&#95;state() returning a pointer to that struct</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlightComment">///    is inserted into every instrumented function before the entry block;</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlightComment">///  - &#95;&#95;msan&#95;warning() takes a 32-bit origin parameter;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlightComment">///  - local variables are poisoned with &#95;&#95;msan&#95;poison&#95;alloca() upon function</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlightComment">///    entry and unpoisoned with &#95;&#95;msan&#95;unpoison&#95;alloca() before leaving the</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlightComment">///    function;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlightComment">///  - the pass doesn&#39;t declare any global variables or add global constructors</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlightComment">///    to the translation unit.</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlightComment">/// Also, KMSAN currently ignores uninitialized memory passed into inline asm</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlightComment">/// calls, making sure we&#39;re on the safe side wrt. possible false positives.</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlightComment">///  KernelMemorySanitizer only supports X86&#95;64, SystemZ and PowerPC64 at the</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlightComment">///  moment.</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlightComment">// FIXME: This sanitizer does not yet handle scalable vectors</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/memorysanitizer-h">llvm/Transforms/Instrumentation/MemorySanitizer.h</a>&quot;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/apint-h">llvm/ADT/APInt.h</a>&quot;</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h">llvm/ADT/DenseMap.h</a>&quot;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/setvector-h">llvm/ADT/SetVector.h</a>&quot;</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h">llvm/ADT/SmallPtrSet.h</a>&quot;</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h">llvm/ADT/StringExtras.h</a>&quot;</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h">llvm/Analysis/ValueTracking.h</a>&quot;</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h">llvm/IR/Argument.h</a>&quot;</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/attributemask-h">llvm/IR/AttributeMask.h</a>&quot;</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h">llvm/IR/Attributes.h</a>&quot;</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h">llvm/IR/BasicBlock.h</a>&quot;</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/callingconv-h">llvm/IR/CallingConv.h</a>&quot;</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h">llvm/IR/Constant.h</a>&quot;</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h">llvm/IR/Constants.h</a>&quot;</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h">llvm/IR/DataLayout.h</a>&quot;</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h">llvm/IR/DerivedTypes.h</a>&quot;</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/function-h">llvm/IR/Function.h</a>&quot;</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h">llvm/IR/GlobalValue.h</a>&quot;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h">llvm/IR/GlobalVariable.h</a>&quot;</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h">llvm/IR/IRBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h">llvm/IR/InlineAsm.h</a>&quot;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h">llvm/IR/InstVisitor.h</a>&quot;</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h">llvm/IR/InstrTypes.h</a>&quot;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h">llvm/IR/Instruction.h</a>&quot;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h">llvm/IR/Instructions.h</a>&quot;</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h">llvm/IR/IntrinsicInst.h</a>&quot;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h">llvm/IR/Intrinsics.h</a>&quot;</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlightPreprocessor">#include &quot;llvm/IR/IntrinsicsAArch64.h&quot;</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlightPreprocessor">#include &quot;llvm/IR/IntrinsicsX86.h&quot;</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h">llvm/IR/MDBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/module-h">llvm/IR/Module.h</a>&quot;</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/type-h">llvm/IR/Type.h</a>&quot;</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/value-h">llvm/IR/Value.h</a>&quot;</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/valuemap-h">llvm/IR/ValueMap.h</a>&quot;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/alignment-h">llvm/Support/Alignment.h</a>&quot;</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/atomicordering-h">llvm/Support/AtomicOrdering.h</a>&quot;</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/casting-h">llvm/Support/Casting.h</a>&quot;</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</span></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debugcounter-h">llvm/Support/DebugCounter.h</a>&quot;</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h">llvm/Support/MathExtras.h</a>&quot;</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h">llvm/TargetParser/Triple.h</a>&quot;</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h">llvm/Transforms/Utils/Instrumentation.h</a>&quot;</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h">llvm/Transforms/Utils/Local.h</a>&quot;</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlightPreprocessor">#include &lt;algorithm&gt;</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlightPreprocessor">#include &lt;cassert&gt;</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlightPreprocessor">#include &lt;cstddef&gt;</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><span class="doxyHighlightPreprocessor">#include &lt;cstdint&gt;</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlightPreprocessor">#include &lt;memory&gt;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlightPreprocessor">#include &lt;string&gt;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlightPreprocessor">#include &lt;tuple&gt;</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;msan&quot;</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217" lineLink="#a1dd207beafbed039a8248b0c307ac569"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/debugcounter-h/#a0a175e0c17c3f2a0570e919ab68da2a4">DEBUG&#95;COUNTER</a>(DebugInsertCheck, </span><span class="doxyHighlightStringLiteral">&quot;msan-insert-check&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">              </span><span class="doxyHighlightStringLiteral">&quot;Controls which checks to insert&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220" lineLink="#aa28b7a2cd9be7ddecdd24f9692fc9fd6"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/debugcounter-h/#a0a175e0c17c3f2a0570e919ab68da2a4">DEBUG&#95;COUNTER</a>(DebugInstrumentInstruction, </span><span class="doxyHighlightStringLiteral">&quot;msan-instrument-instruction&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">              </span><span class="doxyHighlightStringLiteral">&quot;Controls which instruction to instrument&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223" lineLink="#a454da6b23d63f4bb778f6249cc427b91"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> = 4;</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224" lineLink="#a0760acbb386bfe440e697587140561cc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a> = <a href="/docs/api/structs/llvm/align">Align</a>(4);</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225" lineLink="#a58600da67d1e0fa57a2a70cd3be51d6e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a> = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlightComment">// These constants must be kept in sync with the ones in msan.h.</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228" lineLink="#adce9aed4162f58fbab5da93984822c3a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> = 800;</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229" lineLink="#af01d144255a66cebe47bfc492ef86eef"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#af01d144255a66cebe47bfc492ef86eef">kRetvalTLSSize</a> = 800;</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlightComment">// Accesses sizes are powers of two: 1, 2, 4, 8</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232" lineLink="#aa62a4d0672bab180dd339cda25b23b2e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 4;</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlightComment">/// Track origins of uninitialized values.</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlightComment">/// Adds a section to MemorySanitizer report that points to the allocation</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlightComment">/// (stack or heap) the uninitialized bits came from originally.</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238" lineLink="#a521ae0d9cfcd9ef881093081427944ee"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a521ae0d9cfcd9ef881093081427944ee">ClTrackOrigins</a>(</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-track-origins&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Track origins (allocation sites) of poisoned memory&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243" lineLink="#aa41930b24d3e9c5d4852925edf27862f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aa41930b24d3e9c5d4852925edf27862f">ClKeepGoing</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-keep-going&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">                                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;keep going after reporting a UMR&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">                                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248" lineLink="#a848e1ebd611f366583fc79c1c5ff2392"><span class="doxyHighlight">    <a href="#a848e1ebd611f366583fc79c1c5ff2392">ClPoisonStack</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-poison-stack&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">                  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;poison uninitialized stack variables&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">                  <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252" lineLink="#aedbb53489a0b0283aa6f1065bdc05004"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aedbb53489a0b0283aa6f1065bdc05004">ClPoisonStackWithCall</a>(</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-poison-stack-with-call&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;poison uninitialized stack variables with a call&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257" lineLink="#a56b93a7be228ba661a04962a9cef6c2a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a56b93a7be228ba661a04962a9cef6c2a">ClPoisonStackPattern</a>(</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-poison-stack-pattern&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;poison uninitialized stack variables with the given pattern&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0xff));</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263" lineLink="#a8d4d3c3c5a9ce85cd41923e734b24b2f"><span class="doxyHighlight">    <a href="#a8d4d3c3c5a9ce85cd41923e734b24b2f">ClPrintStackNames</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-print-stack-names&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Print name of local stack variable&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267" lineLink="#a8438c35f22f870c5e2cafe47130fecb5"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a8438c35f22f870c5e2cafe47130fecb5">ClPoisonUndef</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-poison-undef&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;poison undef temps&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">                                   <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272" lineLink="#add57c0965797f1cd395cfb0f28be04b7"><span class="doxyHighlight">    <a href="#add57c0965797f1cd395cfb0f28be04b7">ClHandleICmp</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-handle-icmp&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;propagate shadow through ICmpEQ and ICmpNE&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277" lineLink="#a5d5b255beb6e29a70c776d2ad68c68ad"><span class="doxyHighlight">    <a href="#a5d5b255beb6e29a70c776d2ad68c68ad">ClHandleICmpExact</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-handle-icmp-exact&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;exact handling of relational integer ICmp&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281" lineLink="#a9b9c616adc23214477236548737858c1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a9b9c616adc23214477236548737858c1">ClHandleLifetimeIntrinsics</a>(</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-handle-lifetime-intrinsics&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;when possible, poison scoped variables at the beginning of the scope &quot;</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;(slower, but more precise)&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlightComment">// When compiling the Linux kernel, we sometimes see false positives related to</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlightComment">// MSan being unable to understand that inline assembly calls may initialize</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlightComment">// local variables.</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlightComment">// This flag makes the compiler conservatively unpoison every memory location</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><span class="doxyHighlightComment">// passed into an assembly call. Note that this may cause false positives.</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlightComment">// Because it&#39;s impossible to figure out the array sizes, we can only unpoison</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlightComment">// the first sizeof(type) bytes for each type&#42; pointer.</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295" lineLink="#ace5f048c7137fe3364e809b3c34c3cca"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ace5f048c7137fe3364e809b3c34c3cca">ClHandleAsmConservative</a>(</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-handle-asm-conservative&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;conservative handling of inline assembly&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlightComment">// This flag controls whether we check the shadow of the address</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlightComment">// operand of load or store. Such bugs are very rare, since load from</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlightComment">// a garbage address typically results in SEGV, but still happen</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlightComment">// (e.g. only lower bits of address are garbage, or the access happens</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlightComment">// early at program startup where malloc-ed memory is more likely to</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlightComment">// be zeroed. As of 2012-08-28 this flag adds 20% slowdown.</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306" lineLink="#afc0f84e2f6fb17e5df5123d01f914e4b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>(</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-check-access-address&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;report accesses through a pointer which has poisoned shadow&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311" lineLink="#aad66633e646d556fbd91a5cc30f0c5fd"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aad66633e646d556fbd91a5cc30f0c5fd">ClEagerChecks</a>(</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-eager-checks&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;check arguments and return values at function call boundaries&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316" lineLink="#a0e33ca8e9058514c9b82a0e30478140d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a0e33ca8e9058514c9b82a0e30478140d">ClDumpStrictInstructions</a>(</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-dump-strict-instructions&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;print out instructions with default strict semantics&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321" lineLink="#a6b56dfb9e6691acfd25fd5d3901bc17c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a6b56dfb9e6691acfd25fd5d3901bc17c">ClDumpStrictIntrinsics</a>(</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-dump-strict-intrinsics&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Prints &#39;unknown&#39; intrinsics that were handled heuristically. &quot;</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Use -msan-dump-strict-instructions to print intrinsics that &quot;</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;could not be handled exactly nor heuristically.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328" lineLink="#a562f393ed86818bc632731f717a91b36"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a562f393ed86818bc632731f717a91b36">ClInstrumentationWithCallThreshold</a>(</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;msan-instrumentation-with-call-threshold&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;If the function being instrumented requires more than &quot;</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;this number of checks and origin stores, use callbacks instead of &quot;</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;inline checks (-1 means never use callbacks).&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(3500));</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337" lineLink="#aeb7e469d1ac01802e1ad8e3d3daef6fc"><span class="doxyHighlight">    <a href="#aeb7e469d1ac01802e1ad8e3d3daef6fc">ClEnableKmsan</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-kernel&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">                  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable KernelMemorySanitizer instrumentation&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">                  <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342" lineLink="#aff7a784ef2ba8136fb338f23bccc8c17"><span class="doxyHighlight">    <a href="#aff7a784ef2ba8136fb338f23bccc8c17">ClDisableChecks</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-disable-checks&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><span class="doxyHighlight">                    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Apply no&#95;sanitize to the whole file&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347" lineLink="#a2622ac4e4855b9e0339799760c8e08e7"><span class="doxyHighlight">    <a href="#a2622ac4e4855b9e0339799760c8e08e7">ClCheckConstantShadow</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-check-constant-shadow&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">                          <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Insert checks for constant shadow values&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><span class="doxyHighlight">                          <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlightComment">// This is off by default because of a bug in gold:</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlightComment">// https://sourceware.org/bugzilla/show&#95;bug.cgi?id=19002</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354" lineLink="#a468672dc2eaab7fbae2ceeeb27dd0779"><span class="doxyHighlight">    <a href="#a468672dc2eaab7fbae2ceeeb27dd0779">ClWithComdat</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-with-comdat&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Place MSan constructors in comdat sections&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlightComment">// These options allow to specify custom memory map parameters</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><span class="doxyHighlightComment">// See MemoryMapParams for details.</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360" lineLink="#a9a710e43cdadb8f11df70e2f8e1784ea"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a> <a href="#a9a710e43cdadb8f11df70e2f8e1784ea">ClAndMask</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-and-mask&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Define custom MSan AndMask&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlight">                                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364" lineLink="#acbf2a2374ecd89d6073278770b6cb3e2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a> <a href="#acbf2a2374ecd89d6073278770b6cb3e2">ClXorMask</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-xor-mask&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Define custom MSan XorMask&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">                                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368" lineLink="#a0a338b87087881055e15715778603aa5"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a> <a href="#a0a338b87087881055e15715778603aa5">ClShadowBase</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-shadow-base&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Define custom MSan ShadowBase&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlight">                                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372" lineLink="#a20b808fb973627f83cd6feacb3ceccfd"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a> <a href="#a20b808fb973627f83cd6feacb3ceccfd">ClOriginBase</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-origin-base&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Define custom MSan OriginBase&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlight">                                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a></span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377" lineLink="#ab6bfda65820457c2a529896cc101e444"><span class="doxyHighlight">    <a href="#ab6bfda65820457c2a529896cc101e444">ClDisambiguateWarning</a>(</span><span class="doxyHighlightStringLiteral">&quot;msan-disambiguate-warning-threshold&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">                          <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Define threshold for number of checks per &quot;</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlight">                                   </span><span class="doxyHighlightStringLiteral">&quot;debug location to force origin update.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">                          <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(3));</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382" lineLink="#af88c19b19f09a99cbec7a026ea8fb68d"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#af88c19b19f09a99cbec7a026ea8fb68d">kMsanModuleCtorName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;msan.module&#95;ctor&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383" lineLink="#a8af7b57ae1e4ad42bcaa05293a5c3342"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="#a8af7b57ae1e4ad42bcaa05293a5c3342">kMsanInitName</a>&#91;&#93; = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;init&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><span class="doxyHighlightComment">// Memory map parameters used in application-to-shadow address calculation.</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlightComment">// Offset = (Addr &amp; ~AndMask) ^ XorMask</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlightComment">// Shadow = ShadowBase + Offset</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlightComment">// Origin = OriginBase + Offset</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a> &#123;</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a39800fa587ffc10dbeae687321dca8de"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a39800fa587ffc10dbeae687321dca8de">AndMask</a>;</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a53475c158bcdf5fb56490136053ab770"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a53475c158bcdf5fb56490136053ab770">XorMask</a>;</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#af1af42bb8fb74149cdf6338993d4abf0"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#af1af42bb8fb74149cdf6338993d4abf0">ShadowBase</a>;</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a4531a23c3a6cd3658a4eaca99264f7de"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams/#a4531a23c3a6cd3658a4eaca99264f7de">OriginBase</a>;</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams">PlatformMemoryMapParams</a> &#123;</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams/#adf9a8f4400ec9448149ad999ee9c81fc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams/#adf9a8f4400ec9448149ad999ee9c81fc">bits32</a>;</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams/#a2ec707b4d0d600c7bf574b159012d861"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/platformmemorymapparams/#a2ec707b4d0d600c7bf574b159012d861">bits64</a>;</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlightComment">// i386 Linux</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406" lineLink="#a869bf65c8a3c3bb09f400b729f2b4c7a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#a869bf65c8a3c3bb09f400b729f2b4c7a">Linux&#95;I386&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlight">    0x000080000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// XorMask (not used)</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// ShadowBase (not used)</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">    0x000040000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlightComment">// x86&#95;64 Linux</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414" lineLink="#a086e31f131abbdc6591adafb6f984c6d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a086e31f131abbdc6591adafb6f984c6d">Linux&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// AndMask (not used)</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlight">    0x500000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// ShadowBase (not used)</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">    0x100000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlightComment">// mips32 Linux</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlightComment">// FIXME: Remove -msan-origin-base -msan-and-mask added by PR #109284 to tests</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlightComment">// after picking good constants</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlightComment">// mips64 Linux</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426" lineLink="#abd5fb88de1265d54506a7fe292146375"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#abd5fb88de1265d54506a7fe292146375">Linux&#95;MIPS64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// AndMask (not used)</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">    0x008000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// ShadowBase (not used)</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">    0x002000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlightComment">// ppc32 Linux</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlightComment">// FIXME: Remove -msan-origin-base -msan-and-mask added by PR #109284 to tests</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlightComment">// after picking good constants</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlightComment">// ppc64 Linux</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438" lineLink="#ac1e9589a30ae4a558ac5bcac7b5cff29"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#ac1e9589a30ae4a558ac5bcac7b5cff29">Linux&#95;PowerPC64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">    0xE00000000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">    0x100000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">    0x080000000000, </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlight">    0x1C0000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlightComment">// s390x Linux</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446" lineLink="#a79ffbb19c3982527a5c674668cd7b400"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#a79ffbb19c3982527a5c674668cd7b400">Linux&#95;S390X&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">    0xC00000000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// XorMask (not used)</span></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">    0x080000000000, </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlight">    0x1C0000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlightComment">// arm32 Linux</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlightComment">// FIXME: Remove -msan-origin-base -msan-and-mask added by PR #109284 to tests</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlightComment">// after picking good constants</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlightComment">// aarch64 Linux</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458" lineLink="#a917f7b6819b115f7783119d89d6ef0bc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a917f7b6819b115f7783119d89d6ef0bc">Linux&#95;AArch64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">    0,               </span><span class="doxyHighlightComment">// AndMask (not used)</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">    0x0B00000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">    0,               </span><span class="doxyHighlightComment">// ShadowBase (not used)</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">    0x0200000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlightComment">// loongarch64 Linux</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466" lineLink="#a0067492b882e2a37b37c2d78db664aaa"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a0067492b882e2a37b37c2d78db664aaa">Linux&#95;LoongArch64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// AndMask (not used)</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">    0x500000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// ShadowBase (not used)</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">    0x100000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlightComment">// riscv32 Linux</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlightComment">// FIXME: Remove -msan-origin-base -msan-and-mask added by PR #109284 to tests</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlightComment">// after picking good constants</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlightComment">// aarch64 FreeBSD</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478" lineLink="#af747b72f572bea0b6a26d2debd1fb7ce"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#af747b72f572bea0b6a26d2debd1fb7ce">FreeBSD&#95;AArch64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">    0x1800000000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">    0x0400000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">    0x0200000000000, </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">    0x0700000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlightComment">// i386 FreeBSD</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486" lineLink="#afb9d0ed3eeb1c18bd1e4a7e49931eaef"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#afb9d0ed3eeb1c18bd1e4a7e49931eaef">FreeBSD&#95;I386&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><span class="doxyHighlight">    0x000180000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">    0x000040000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight">    0x000020000000, </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">    0x000700000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlightComment">// x86&#95;64 FreeBSD</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494" lineLink="#aa4a932acb8e1035643948f68549051c9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#aa4a932acb8e1035643948f68549051c9">FreeBSD&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">    0xc00000000000, </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">    0x200000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">    0x100000000000, </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">    0x380000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlightComment">// x86&#95;64 NetBSD</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502" lineLink="#a365de35301240d1e1e88d804f1baf63c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemoryMapParams <a href="#a365de35301240d1e1e88d804f1baf63c">NetBSD&#95;X86&#95;64&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// AndMask</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">    0x500000000000, </span><span class="doxyHighlightComment">// XorMask</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">    0,              </span><span class="doxyHighlightComment">// ShadowBase</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlight">    0x100000000000, </span><span class="doxyHighlightComment">// OriginBase</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509" lineLink="#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4">Linux&#95;X86&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">    &amp;<a href="#a869bf65c8a3c3bb09f400b729f2b4c7a">Linux&#95;I386&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlight">    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a086e31f131abbdc6591adafb6f984c6d">Linux&#95;X86&#95;64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514" lineLink="#a44104caa1a5a058145a8c89e79a8c3c0"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#a44104caa1a5a058145a8c89e79a8c3c0">Linux&#95;MIPS&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">    &amp;<a href="#abd5fb88de1265d54506a7fe292146375">Linux&#95;MIPS64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519" lineLink="#aa52c4ef088fb95e3f80e5cce457670dc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#aa52c4ef088fb95e3f80e5cce457670dc">Linux&#95;PowerPC&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">    &amp;<a href="#ac1e9589a30ae4a558ac5bcac7b5cff29">Linux&#95;PowerPC64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524" lineLink="#a01e0a4373f8027e05c70c847cf3da703"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#a01e0a4373f8027e05c70c847cf3da703">Linux&#95;S390&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">    &amp;<a href="#a79ffbb19c3982527a5c674668cd7b400">Linux&#95;S390X&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529" lineLink="#a62c49507ee2d3c0d0946ecd57f77e425"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#a62c49507ee2d3c0d0946ecd57f77e425">Linux&#95;ARM&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a917f7b6819b115f7783119d89d6ef0bc">Linux&#95;AArch64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534" lineLink="#a2cd3f25b8c2e52fdc0f96cf2f4647a34"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#a2cd3f25b8c2e52fdc0f96cf2f4647a34">Linux&#95;LoongArch&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">    &amp;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a0067492b882e2a37b37c2d78db664aaa">Linux&#95;LoongArch64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539" lineLink="#adb36c33aeb5fee17ad02437e9c66224b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#adb36c33aeb5fee17ad02437e9c66224b">FreeBSD&#95;ARM&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">    &amp;<a href="#af747b72f572bea0b6a26d2debd1fb7ce">FreeBSD&#95;AArch64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544" lineLink="#ad4cbe2f3af1510f311e25f31960a2395"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#ad4cbe2f3af1510f311e25f31960a2395">FreeBSD&#95;X86&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">    &amp;<a href="#afb9d0ed3eeb1c18bd1e4a7e49931eaef">FreeBSD&#95;I386&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">    &amp;<a href="#aa4a932acb8e1035643948f68549051c9">FreeBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549" lineLink="#aee1d3e45f64c88c96aa4c2dcf745a338"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> PlatformMemoryMapParams <a href="#aee1d3e45f64c88c96aa4c2dcf745a338">NetBSD&#95;X86&#95;MemoryMapParams</a> = &#123;</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">    &amp;<a href="#a365de35301240d1e1e88d804f1baf63c">NetBSD&#95;X86&#95;64&#95;MemoryMapParams</a>,</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlightComment">/// Instrument functions of a module to detect uninitialized reads.</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlightComment">/// Instantiating MemorySanitizer inserts the msan runtime library API function</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlightComment">/// declarations into the module if they don&#39;t exist already. Instantiating</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlightComment">/// ensures the &#95;&#95;msan&#95;init function is in the list of global constructors for</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlightComment">/// the module.</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &#123;</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, <a href="/docs/api/structs/llvm/memorysanitizeroptions">MemorySanitizerOptions</a> <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>)</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">      : CompileKernel(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.Kernel), TrackOrigins(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.TrackOrigins),</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">        Recover(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.Recover), EagerChecks(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.EagerChecks) &#123;</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">    initializeModule(M);</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// MSan cannot be moved or copied because of MapParams.</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a886292ec077912239f131a88c163ea4c"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a886292ec077912239f131a88c163ea4c">MemorySanitizer</a>(<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;&amp;) = </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#ab5143da2592574b45d5cabd2ad120a0c"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#ab5143da2592574b45d5cabd2ad120a0c">operator=</a>(<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;&amp;) = </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a918f9e0776515a8f4754e8e6d36df772"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a918f9e0776515a8f4754e8e6d36df772">MemorySanitizer</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;) = </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a77316f1593377cc2a8c6abdcd9dbdc8c"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a77316f1593377cc2a8c6abdcd9dbdc8c">operator=</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0b2af6710f1e07680f9eb694604eb261">MemorySanitizer</a> &amp;) = </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a8f3326f18ad478d2c532271394839225">sanitizeFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI);</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a52c57b355cc75c152e1e306872f293b8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a52c57b355cc75c152e1e306872f293b8">MemorySanitizerVisitor</a>;</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a44f7bded9fabb09dbfbd03db0c8419cc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a44f7bded9fabb09dbfbd03db0c8419cc">VarArgHelperBase</a>;</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a8f914f78188354a1f8a017030cd91901"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a8f914f78188354a1f8a017030cd91901">VarArgAMD64Helper</a>;</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a91c575545e80049b6ad9534131048c65"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a91c575545e80049b6ad9534131048c65">VarArgAArch64Helper</a>;</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a68b03b34b8a1ef669071596d37f2011e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a68b03b34b8a1ef669071596d37f2011e">VarArgPowerPCHelper</a>;</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0978b9f1133aafc68981790a1706d70d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a0978b9f1133aafc68981790a1706d70d">VarArgSystemZHelper</a>;</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a4ce3f68c545446735382ee2189da97e0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a4ce3f68c545446735382ee2189da97e0">VarArgI386Helper</a>;</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#ac3d2e90831d5194eb239b21221205b59"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#ac3d2e90831d5194eb239b21221205b59">VarArgGenericHelper</a>;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> initializeModule(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M);</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> initializeCallbacks(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI);</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> createKernelApi(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI);</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> createUserspaceApi(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI);</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight">... ArgsTy&gt;</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> getOrInsertMsanMetadataFunction(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name,</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">                                                 ArgsTy... Args);</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlightComment">  /// True if we&#39;re compiling the Linux kernel.</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CompileKernel;</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlightComment">  /// Track origins (allocation points) of uninitialized values.</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> TrackOrigins;</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Recover;</span></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> EagerChecks;</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple;</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &#42;C;</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy; </span><span class="doxyHighlightComment">///&lt; Integer type with the size of a ptr in default AS.</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;OriginTy;</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/pointertype">PointerType</a> &#42;PtrTy; </span><span class="doxyHighlightComment">///&lt; Integer type with the size of a ptr in default AS.</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// XxxTLS variables represent the per-thread state in MSan and per-task state</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// in KMSAN.</span></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For the userspace these point to thread-local globals. In the kernel land</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// they point to the members of a per-task struct obtained via a call to</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#95;&#95;msan&#95;get&#95;context&#95;state().</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlightComment">  /// Thread-local shadow storage for function parameters.</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ParamTLS;</span></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlightComment">  /// Thread-local origin storage for function parameters.</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ParamOriginTLS;</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlightComment">  /// Thread-local shadow storage for function return value.</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;RetvalTLS;</span></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlightComment">  /// Thread-local origin storage for function return value.</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;RetvalOriginTLS;</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlightComment">  /// Thread-local shadow storage for in-register va&#95;arg function.</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAArgTLS;</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><span class="doxyHighlightComment">  /// Thread-local shadow storage for in-register va&#95;arg function.</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAArgOriginTLS;</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlightComment">  /// Thread-local shadow storage for va&#95;arg overflow area.</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAArgOverflowSizeTLS;</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlightComment">  /// Are the instrumentation callbacks set up?</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CallbacksInitialized = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlightComment">  /// The run-time callback to print a warning.</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> WarningFn;</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// These arrays are indexed by log2(AccessSize).</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MaybeWarningFn&#91;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MaybeStoreOriginFn&#91;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><span class="doxyHighlightComment">  /// Run-time helper that generates a new origin value for a stack</span></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><span class="doxyHighlightComment">  /// allocation.</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanSetAllocaOriginWithDescriptionFn;</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// No description version</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanSetAllocaOriginNoDescriptionFn;</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlightComment">  /// Run-time helper that poisons stack on function entry.</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanPoisonStackFn;</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlightComment">  /// Run-time helper that records a store (or any event) of an</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlightComment">  /// uninitialized value and returns an updated origin id encoding this info.</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanChainOriginFn;</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><span class="doxyHighlightComment">  /// Run-time helper that paints an origin over a region.</span></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanSetOriginFn;</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlightComment">  /// MSan runtime replacements for memmove, memcpy and memset.</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MemmoveFn, MemcpyFn, MemsetFn;</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><span class="doxyHighlightComment">  /// KMSAN callback for task-local function argument shadow.</span></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;MsanContextStateTy;</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanGetContextStateFn;</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlightComment">  /// Functions for poisoning/unpoisoning local variables</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanPoisonAllocaFn, MsanUnpoisonAllocaFn;</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlightComment">  /// Pair of shadow/origin pointers.</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;MsanMetadata;</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlightComment">  /// Each of the MsanMetadataPtrXxx functions returns a MsanMetadata.</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanMetadataPtrForLoadN, MsanMetadataPtrForStoreN;</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanMetadataPtrForLoad&#95;1&#95;8&#91;4&#93;;</span></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanMetadataPtrForStore&#95;1&#95;8&#91;4&#93;;</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MsanInstrumentAsmStoreFn;</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlightComment">  /// Storage for return values of the MsanMetadataPtrXxx functions.</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;MsanMetadataAlloca;</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlightComment">  /// Helper to choose between different MsanMetadataPtrXxx().</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> getKmsanShadowOriginAccessFn(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a>);</span></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><span class="doxyHighlightComment">  /// Memory map parameters used in application-to-shadow calculation.</span></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a> &#42;MapParams;</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><span class="doxyHighlightComment">  /// Custom memory map parameters used when -msan-shadow-base or</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// -msan-origin-base is provided.</span></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorymapparams">MemoryMapParams</a> CustomMapParams;</span></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;ColdCallWeights;</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlightComment">  /// Branch weights for origin store.</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;OriginStoreWeights;</span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#ac1ea917058dedf3b382071cb1a000a6e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#ac1ea917058dedf3b382071cb1a000a6e">insertModuleCtor</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M) &#123;</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a717a199ea9514d956fa87fd23c13a228">getOrCreateSanitizerCtorAndInitFunctions</a>(</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">      M, <a href="#af88c19b19f09a99cbec7a026ea8fb68d">kMsanModuleCtorName</a>, <a href="#a8af7b57ae1e4ad42bcaa05293a5c3342">kMsanInitName</a>,</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">/&#42;InitArgTypes=&#42;/</span><span class="doxyHighlight">&#123;&#125;,</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">/&#42;InitArgs=&#42;/</span><span class="doxyHighlight">&#123;&#125;,</span></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This callback is invoked when the functions are created the first</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// time. Hook them into the global ctors list in that case:</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><span class="doxyHighlight">      &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/function">Function</a> &#42;Ctor, <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a>) &#123;</span></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a>) &#123;</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, Ctor, 0);</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/comdat">Comdat</a> &#42;MsanCtorComdat = M.getOrInsertComdat(<a href="#af88c19b19f09a99cbec7a026ea8fb68d">kMsanModuleCtorName</a>);</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><span class="doxyHighlight">        Ctor-&gt;<a href="/docs/api/classes/llvm/globalobject/#a800a5183372ed37a74be5cddf5df325c">setComdat</a>(MsanCtorComdat);</span></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, Ctor, 0, Ctor);</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> T&gt; T <a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33">getOptOrDefault</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;T&gt;</a> &amp;Opt, T <a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dwarfdebug-cpp/#aaf2a32c0f2738e57cac623b73b2c88aba79935518a3889663d8688b6b01fff051">Default</a>) &#123;</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (Opt.<a href="/docs/api/classes/llvm/cl/option/#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0) ? Opt : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dwarfdebug-cpp/#aaf2a32c0f2738e57cac623b73b2c88aba79935518a3889663d8688b6b01fff051">Default</a>;</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725" lineLink="/docs/api/structs/llvm/memorysanitizeroptions/#a2cee85c70fb3276fc9c6e11fb14cc882"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/memorysanitizeroptions/#a320836634bd662c43ab5758f2879d050">MemorySanitizerOptions::MemorySanitizerOptions</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> TO, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> R, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> K,</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlight">                                               </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/memorysanitizeroptions/#a707ddf545a752a177ecbf42dee1ce36c">EagerChecks</a>)</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">    : <a href="/docs/api/structs/llvm/memorysanitizeroptions/#acb39c7e31da504855e3ddbcfff97d7b6">Kernel</a>(<a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33">getOptOrDefault</a>(<a href="#aeb7e469d1ac01802e1ad8e3d3daef6fc">ClEnableKmsan</a>, K)),</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/memorysanitizeroptions/#a802f7ad6e56b69cb3e80094d1ea400ac">TrackOrigins</a>(<a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33">getOptOrDefault</a>(<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a4957fe1638b12eace3ecfaeaaa3c5b85">ClTrackOrigins</a>, <a href="/docs/api/structs/llvm/memorysanitizeroptions/#acb39c7e31da504855e3ddbcfff97d7b6">Kernel</a> ? 2 : TO)),</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/memorysanitizeroptions/#a489327312c2967460b37186482639008">Recover</a>(<a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33">getOptOrDefault</a>(<a href="#aa41930b24d3e9c5d4852925edf27862f">ClKeepGoing</a>, <a href="/docs/api/structs/llvm/memorysanitizeroptions/#acb39c7e31da504855e3ddbcfff97d7b6">Kernel</a> || R)),</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/memorysanitizeroptions/#a707ddf545a752a177ecbf42dee1ce36c">EagerChecks</a>(<a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#aba8562dde611c8e3cc31ed9a42f63b33">getOptOrDefault</a>(<a href="#aad66633e646d556fbd91a5cc30f0c5fd">ClEagerChecks</a>, <a href="/docs/api/structs/llvm/memorysanitizeroptions/#a707ddf545a752a177ecbf42dee1ce36c">EagerChecks</a>)) &#123;&#125;</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732" lineLink="/docs/api/structs/llvm/memorysanitizerpass/#adfd94cfcef9d896734905bd5a18a05df"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> <a href="/docs/api/structs/llvm/memorysanitizerpass/#adfd94cfcef9d896734905bd5a18a05df">MemorySanitizerPass::run</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">                                           <a href="/docs/api/namespaces/llvm/#af9c9208365fd9ce11392b4d79485e259">ModuleAnalysisManager</a> &amp;AM) &#123;</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Return early if nosanitize&#95;memory module flag is present for the module.</span></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#aeed520b6f17bd6271d563ee25f3e4728">checkIfAlreadyInstrumented</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;nosanitize&#95;memory&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Options.Kernel) &#123;</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">    insertModuleCtor(M);</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = AM.<a href="/docs/api/classes/llvm/analysismanager/#aaab1fad63e4f3b8679469720a873fedd">getResult</a>&lt;<a href="/docs/api/namespaces/llvm/#a4143e067711d3c7795276b225a8d6eb9">FunctionAnalysisManagerModuleProxy</a>&gt;(M).getManager();</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : M) &#123;</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.empty())</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">    MemorySanitizer Msan(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent(), Options);</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> |=</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">        Msan.sanitizeFunction(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/targetlibraryanalysis">TargetLibraryAnalysis</a>&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a>)</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> PA = <a href="/docs/api/classes/llvm/preservedanalyses/#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// GlobalsAA is considered stateless and does not get invalidated unless</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// explicitly invalidated; PreservedAnalyses::none() is not enough. Sanitizers</span></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// make changes that require GlobalsAA to be invalidated.</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">  PA.<a href="/docs/api/classes/llvm/preservedanalyses/#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a href="/docs/api/classes/llvm/globalsaa">GlobalsAA</a>&gt;();</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> PA;</span></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763" lineLink="/docs/api/structs/llvm/memorysanitizerpass/#a175ae2ee9437624f9268bdb3b711193e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/memorysanitizerpass/#a175ae2ee9437624f9268bdb3b711193e">MemorySanitizerPass::printPipeline</a>(</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt;<a href="/docs/api/classes/llvm/stringref">StringRef</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a>)&gt; MapClassName2PassName) &#123;</span></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/passinfomixin">PassInfoMixin&lt;MemorySanitizerPass&gt;</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">)-&gt;<a href="/docs/api/structs/llvm/memorysanitizerpass/#a175ae2ee9437624f9268bdb3b711193e">printPipeline</a>(</span></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">      OS, MapClassName2PassName);</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&lt;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Options.Recover)</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;recover;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Options.Kernel)</span></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;kernel;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Options.EagerChecks)</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;eager-checks;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;track-origins=&quot;</span><span class="doxyHighlight"> &lt;&lt; Options.TrackOrigins;</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&gt;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlightComment">/// Create a non-const global initialized with the given string.</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlightComment">/// Creates a writable global for Str so that we can pass it to the</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><span class="doxyHighlightComment">/// run-time lib. Runtime uses first 4 bytes of the string to store the</span></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlightComment">/// frame ID, so the string needs to be mutable.</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783" lineLink="#aa4ec1be5a80593697012bc67e2410e11"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="#aa4ec1be5a80593697012bc67e2410e11">createPrivateConstGlobalForString</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</span></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">                                                         <a href="/docs/api/classes/llvm/stringref">StringRef</a> Str) &#123;</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;StrConst = <a href="/docs/api/classes/llvm/constantdataarray/#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(M.getContext(), Str);</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(M, StrConst-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightComment">/&#42;isConstant=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, StrConst, </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight">... ArgsTy&gt;</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a></span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#afbffb051116605acd820c965770ae5a0"><span class="doxyHighlight">MemorySanitizer::getOrInsertMsanMetadataFunction(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name,</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">                                                 ArgsTy... Args) &#123;</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.getArch() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>) &#123;</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// SystemZ ABI: shadow/origin pair is returned via a hidden parameter.</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> M.getOrInsertFunction(Name, <a href="/docs/api/classes/llvm/type/#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(&#42;C), PtrTy,</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">                                 std::forward&lt;ArgsTy&gt;(Args)...);</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> M.getOrInsertFunction(Name, MsanMetadata,</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><span class="doxyHighlight">                               std::forward&lt;ArgsTy&gt;(Args)...);</span></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlightComment">/// Create KMSAN API callbacks.</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> MemorySanitizer::createKernelApi(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI) &#123;</span></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// These will be initialized in insertKmsanPrologue().</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><span class="doxyHighlight">  RetvalTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">  RetvalOriginTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><span class="doxyHighlight">  ParamTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">  ParamOriginTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">  VAArgTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">  VAArgOriginTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">  VAArgOverflowSizeTLS = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">  WarningFn = M.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;warning&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlight">                                    TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;0&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">                                    IRB.getVoidTy(), IRB.getInt32Ty());</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Requests the per-task context state (kmsan&#95;context&#95;state&#42;) from the</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// runtime library.</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">  MsanContextStateTy = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 8),</span></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#af01d144255a66cebe47bfc492ef86eef">kRetvalTLSSize</a> / 8),</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 8),</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 8), </span><span class="doxyHighlightComment">/&#42; va&#95;arg&#95;origin &#42;/</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlight">      IRB.getInt64Ty(), <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(OriginTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 4), OriginTy,</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlight">      OriginTy);</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><span class="doxyHighlight">  MsanGetContextStateFn =</span></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">      M.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;get&#95;context&#95;state&quot;</span><span class="doxyHighlight">, PtrTy);</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><span class="doxyHighlight">  MsanMetadata = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(PtrTy, PtrTy);</span></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ind = 0, <a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a> = 1; ind &lt; 4; ind++, <a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a> &lt;&lt;= 1) &#123;</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><span class="doxyHighlight">    std::string name&#95;load =</span></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;&quot;</span><span class="doxyHighlight"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a>);</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><span class="doxyHighlight">    std::string name&#95;store =</span></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;&quot;</span><span class="doxyHighlight"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a>);</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><span class="doxyHighlight">    MsanMetadataPtrForLoad&#95;1&#95;8&#91;ind&#93; =</span></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlight">        getOrInsertMsanMetadataFunction(M, name&#95;load, PtrTy);</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">    MsanMetadataPtrForStore&#95;1&#95;8&#91;ind&#93; =</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">        getOrInsertMsanMetadataFunction(M, name&#95;store, PtrTy);</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">  MsanMetadataPtrForLoadN = getOrInsertMsanMetadataFunction(</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">      M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;load&#95;n&quot;</span><span class="doxyHighlight">, PtrTy, IRB.getInt64Ty());</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">  MsanMetadataPtrForStoreN = getOrInsertMsanMetadataFunction(</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><span class="doxyHighlight">      M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;metadata&#95;ptr&#95;for&#95;store&#95;n&quot;</span><span class="doxyHighlight">, PtrTy, IRB.getInt64Ty());</span></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Functions for poisoning and unpoisoning memory.</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlight">  MsanPoisonAllocaFn = M.getOrInsertFunction(</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;poison&#95;alloca&quot;</span><span class="doxyHighlight">, IRB.getVoidTy(), PtrTy, IntptrTy, PtrTy);</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">  MsanUnpoisonAllocaFn = M.getOrInsertFunction(</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;unpoison&#95;alloca&quot;</span><span class="doxyHighlight">, IRB.getVoidTy(), PtrTy, IntptrTy);</span></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858" lineLink="#a698362b4a496404a634097b8cd46dab4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name, <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty) &#123;</span></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> M.getOrInsertGlobal(Name, Ty, &#91;&amp;&#93; &#123;</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(M, Ty, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>,</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, Name, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/globalvalue/#a05c6b3b9372b56d130e005db4837da62a92e26a4a1218d351f5a91e7385a3a320">GlobalVariable::InitialExecTLSModel</a>);</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlight">  &#125;);</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlightComment">/// Insert declarations for userspace-specific functions and globals.</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> MemorySanitizer::createUserspaceApi(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI) &#123;</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create the callback.</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: this function should have &quot;Cold&quot; calling conv,</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// which is not yet implemented.</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TrackOrigins) &#123;</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> WarningFnName = Recover ? </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;warning&#95;with&#95;origin&quot;</span></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">                                      : </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;warning&#95;with&#95;origin&#95;noreturn&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">    WarningFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(WarningFnName,</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">                                      TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;0&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">                                      IRB.getVoidTy(), IRB.getInt32Ty());</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> WarningFnName =</span></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">        Recover ? </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;warning&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;warning&#95;noreturn&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">    WarningFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(WarningFnName, IRB.getVoidTy());</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Create the global TLS variables.</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><span class="doxyHighlight">  RetvalTLS =</span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;retval&#95;tls&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#af01d144255a66cebe47bfc492ef86eef">kRetvalTLSSize</a> / 8));</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">  RetvalOriginTLS = <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;retval&#95;origin&#95;tls&quot;</span><span class="doxyHighlight">, OriginTy);</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">  ParamTLS =</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;param&#95;tls&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 8));</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">  ParamOriginTLS =</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;param&#95;origin&#95;tls&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(OriginTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 4));</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">  VAArgTLS =</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;va&#95;arg&#95;tls&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.getInt64Ty(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 8));</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">  VAArgOriginTLS =</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;va&#95;arg&#95;origin&#95;tls&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(OriginTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> / 4));</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><span class="doxyHighlight">  VAArgOverflowSizeTLS =</span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight">      <a href="#a698362b4a496404a634097b8cd46dab4">getOrInsertGlobal</a>(M, </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;va&#95;arg&#95;overflow&#95;size&#95;tls&quot;</span><span class="doxyHighlight">, IRB.getInt64Ty());</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> AccessSizeIndex = 0; AccessSizeIndex &lt; <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>;</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">       AccessSizeIndex++) &#123;</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AccessSize = 1 &lt;&lt; AccessSizeIndex;</span></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">    std::string FunctionName = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;maybe&#95;warning&#95;&quot;</span><span class="doxyHighlight"> + <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(AccessSize);</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">    MaybeWarningFn&#91;AccessSizeIndex&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><span class="doxyHighlight">        FunctionName, TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;0, 1&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlight">        IRB.getVoidTy(), IRB.getIntNTy(AccessSize &#42; 8), IRB.getInt32Ty());</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">    FunctionName = </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;maybe&#95;store&#95;origin&#95;&quot;</span><span class="doxyHighlight"> + <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(AccessSize);</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">    MaybeStoreOriginFn&#91;AccessSizeIndex&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">        FunctionName, TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;0, 2&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">        IRB.getVoidTy(), IRB.getIntNTy(AccessSize &#42; 8), PtrTy,</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">        IRB.getInt32Ty());</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">  MsanSetAllocaOriginWithDescriptionFn =</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;set&#95;alloca&#95;origin&#95;with&#95;descr&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><span class="doxyHighlight">                            IRB.getVoidTy(), PtrTy, IntptrTy, PtrTy, PtrTy);</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">  MsanSetAllocaOriginNoDescriptionFn =</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;set&#95;alloca&#95;origin&#95;no&#95;descr&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">                            IRB.getVoidTy(), PtrTy, IntptrTy, PtrTy);</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><span class="doxyHighlight">  MsanPoisonStackFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;poison&#95;stack&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">                                            IRB.getVoidTy(), PtrTy, IntptrTy);</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlightComment">/// Insert extern declaration of runtime-provided functions and globals.</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> MemorySanitizer::initializeCallbacks(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</span></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">                                          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI) &#123;</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Only do this once.</span></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CallbacksInitialized)</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize callbacks that are common for kernel and userspace</span></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instrumentation.</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">  MsanChainOriginFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;chain&#95;origin&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">      TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;0&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;Ret=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">), IRB.getInt32Ty(),</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlight">      IRB.getInt32Ty());</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">  MsanSetOriginFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;set&#95;origin&quot;</span><span class="doxyHighlight">, TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;2&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">      IRB.getVoidTy(), PtrTy, IntptrTy, IRB.getInt32Ty());</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">  MemmoveFn =</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;memmove&quot;</span><span class="doxyHighlight">, PtrTy, PtrTy, PtrTy, IntptrTy);</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">  MemcpyFn =</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;memcpy&quot;</span><span class="doxyHighlight">, PtrTy, PtrTy, PtrTy, IntptrTy);</span></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlight">  MemsetFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;memset&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><span class="doxyHighlight">                                   TLI.<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;1&#125;, </span><span class="doxyHighlightComment">/&#42;Signed=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><span class="doxyHighlight">                                   PtrTy, PtrTy, IRB.getInt32Ty(), IntptrTy);</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">  MsanInstrumentAsmStoreFn = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;instrument&#95;asm&#95;store&quot;</span><span class="doxyHighlight">, IRB.getVoidTy(), PtrTy, IntptrTy);</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CompileKernel) &#123;</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">    createKernelApi(M, TLI);</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><span class="doxyHighlight">    createUserspaceApi(M, TLI);</span></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><span class="doxyHighlight">  CallbacksInitialized = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> MemorySanitizer::getKmsanShadowOriginAccessFn(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>,</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">                                                             </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a>) &#123;</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> &#42;Fns =</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a> ? MsanMetadataPtrForStore&#95;1&#95;8 : MsanMetadataPtrForLoad&#95;1&#95;8;</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a10f3d955592ae2bc745f57e5b48ae115">size</a>) &#123;</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 1:</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Fns&#91;0&#93;;</span></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 2:</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Fns&#91;1&#93;;</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 4:</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Fns&#91;2&#93;;</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 8:</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Fns&#91;3&#93;;</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlightComment">/// Module-level initialization.</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><span class="doxyHighlightComment">/// inserts a call to &#95;&#95;msan&#95;init to the module&#39;s constructor list.</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> MemorySanitizer::initializeModule(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M) &#123;</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout();</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><span class="doxyHighlight">  TargetTriple = <a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getTargetTriple());</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ShadowPassed = <a href="#a0a338b87087881055e15715778603aa5">ClShadowBase</a>.getNumOccurrences() &gt; 0;</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OriginPassed = <a href="#a20b808fb973627f83cd6feacb3ceccfd">ClOriginBase</a>.getNumOccurrences() &gt; 0;</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check the overrides first</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ShadowPassed || OriginPassed) &#123;</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><span class="doxyHighlight">    CustomMapParams.AndMask = <a href="#a9a710e43cdadb8f11df70e2f8e1784ea">ClAndMask</a>;</span></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><span class="doxyHighlight">    CustomMapParams.XorMask = <a href="#acbf2a2374ecd89d6073278770b6cb3e2">ClXorMask</a>;</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlight">    CustomMapParams.ShadowBase = <a href="#a0a338b87087881055e15715778603aa5">ClShadowBase</a>;</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><span class="doxyHighlight">    CustomMapParams.OriginBase = <a href="#a20b808fb973627f83cd6feacb3ceccfd">ClOriginBase</a>;</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlight">    MapParams = &amp;CustomMapParams;</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (TargetTriple.getOS()) &#123;</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a3cfefc755ab656000934f91193afb1cda64fc6929b84f845ced55d3313ebcf423">Triple::FreeBSD</a>:</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (TargetTriple.getArch()) &#123;</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aee7bfdb86a0614afb9b44615e3e652d3">Triple::aarch64</a>:</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><span class="doxyHighlight">        MapParams = <a href="#adb36c33aeb5fee17ad02437e9c66224b">FreeBSD&#95;ARM&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>:</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><span class="doxyHighlight">        MapParams = <a href="#ad4cbe2f3af1510f311e25f31960a2395">FreeBSD&#95;X86&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648">Triple::x86</a>:</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlight">        MapParams = <a href="#ad4cbe2f3af1510f311e25f31960a2395">FreeBSD&#95;X86&#95;MemoryMapParams</a>.bits32;</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span><span class="doxyHighlightStringLiteral">&quot;unsupported architecture&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a3cfefc755ab656000934f91193afb1cdad10d236fcf52bdbf36bd6b401ca9e427">Triple::NetBSD</a>:</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (TargetTriple.getArch()) &#123;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>:</span></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlight">        MapParams = <a href="#aee1d3e45f64c88c96aa4c2dcf745a338">NetBSD&#95;X86&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span><span class="doxyHighlightStringLiteral">&quot;unsupported architecture&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a3cfefc755ab656000934f91193afb1cda76d4dd8dc67e3a11d975743f6d63a9df">Triple::Linux</a>:</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (TargetTriple.getArch()) &#123;</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>:</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">        MapParams = <a href="#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4">Linux&#95;X86&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648">Triple::x86</a>:</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">        MapParams = <a href="#a1e8d2c075eb4c3fe83ee8bd4b0ab40c4">Linux&#95;X86&#95;MemoryMapParams</a>.bits32;</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a9ff8c8868a9f1892ce3f896e7f0fe1e5">Triple::mips64</a>:</span></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154ae60fc4f421b40b84a536b24fc2a1919f">Triple::mips64el</a>:</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">        MapParams = <a href="#a44104caa1a5a058145a8c89e79a8c3c0">Linux&#95;MIPS&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993">Triple::ppc64</a>:</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46">Triple::ppc64le</a>:</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">        MapParams = <a href="#aa52c4ef088fb95e3f80e5cce457670dc">Linux&#95;PowerPC&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>:</span></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">        MapParams = <a href="#a01e0a4373f8027e05c70c847cf3da703">Linux&#95;S390&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aee7bfdb86a0614afb9b44615e3e652d3">Triple::aarch64</a>:</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a6d5df0cfd7a0b0c0854555554396efd9">Triple::aarch64&#95;be</a>:</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><span class="doxyHighlight">        MapParams = <a href="#a62c49507ee2d3c0d0946ecd57f77e425">Linux&#95;ARM&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a7e69e3edde4260406241be26e08fbd7c">Triple::loongarch64</a>:</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">        MapParams = <a href="#a2cd3f25b8c2e52fdc0f96cf2f4647a34">Linux&#95;LoongArch&#95;MemoryMapParams</a>.bits64;</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span><span class="doxyHighlightStringLiteral">&quot;unsupported architecture&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span><span class="doxyHighlightStringLiteral">&quot;unsupported operating system&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = &amp;(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getContext());</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">  IntptrTy = IRB.getIntPtrTy(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">  OriginTy = IRB.getInt32Ty();</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><span class="doxyHighlight">  PtrTy = IRB.getPtrTy();</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">  ColdCallWeights = <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>();</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">  OriginStoreWeights = <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>();</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CompileKernel) &#123;</span></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TrackOrigins)</span></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertGlobal(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;track&#95;origins&quot;</span><span class="doxyHighlight">, IRB.getInt32Ty(), &#91;&amp;&#93; &#123;</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">        return new GlobalVariable(</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">            M, IRB.getInt32Ty(), true, GlobalValue::WeakODRLinkage,</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><span class="doxyHighlight">            IRB.getInt32(TrackOrigins), </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;track&#95;origins&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Recover)</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertGlobal(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;keep&#95;going&quot;</span><span class="doxyHighlight">, IRB.getInt32Ty(), &#91;&amp;&#93; &#123;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">        return new GlobalVariable(M, IRB.getInt32Ty(), true,</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">                                  GlobalValue::WeakODRLinkage,</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">                                  IRB.getInt32(Recover), </span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;msan&#95;keep&#95;going&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlightComment">/// A helper class that handles instrumentation of VarArg</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlightComment">/// functions on a particular platform.</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><span class="doxyHighlightComment">/// Implementations are expected to insert the instrumentation</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><span class="doxyHighlightComment">/// necessary to propagate argument shadow through VarArg function</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><span class="doxyHighlightComment">/// calls. Visit&#42; methods are called during an InstVisitor pass over</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><span class="doxyHighlightComment">/// the function, and should avoid creating new basic blocks. A new</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><span class="doxyHighlightComment">/// instance of this class is created for each instrumented function.</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a> &#123;</span></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a97ce2a0dcb9b8fa0f1c6191461ffbb9f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a97ce2a0dcb9b8fa0f1c6191461ffbb9f">~VarArgHelper</a>() = </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlightComment">  /// Visit a CallBase.</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#ac7ab20b992e997775e3c2eae6d9e7a60"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#ac7ab20b992e997775e3c2eae6d9e7a60">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) = 0;</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><span class="doxyHighlightComment">  /// Visit a va&#95;start call.</span></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a40f4a1a1a439a8c9ef9175019b0f2abc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a40f4a1a1a439a8c9ef9175019b0f2abc">visitVAStartInst</a>(<a href="/docs/api/classes/llvm/vastartinst">VAStartInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) = 0;</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlightComment">  /// Visit a va&#95;copy call.</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a281c28b9e5f90518420aa5baf80739c1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#a281c28b9e5f90518420aa5baf80739c1">visitVACopyInst</a>(<a href="/docs/api/classes/llvm/vacopyinst">VACopyInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) = 0;</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlightComment">  /// Finalize function instrumentation.</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlightComment">  /// This method is called after visiting all interesting (see above)</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlightComment">  /// instructions in a function.</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#ac76aa9dd9e3bcadd4ed62d1fab8e965f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper/#ac76aa9dd9e3bcadd4ed62d1fab8e965f">finalizeInstrumentation</a>() = 0;</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a>;</span></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> VarArgHelper &#42;<a href="#abb08ae2f213bc5b87540413de9b095a2">CreateVarArgHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Func, MemorySanitizer &amp;Msan,</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">                                        MemorySanitizerVisitor &amp;Visitor);</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131" lineLink="#a5372f41d26211efe4518e2c77f559ba5"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/hwaddresssanitizer-cpp/#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a>(<a href="/docs/api/classes/llvm/typesize">TypeSize</a> TS) &#123;</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TS.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Scalable types unconditionally take slowpaths.</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>;</span></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeSizeFixed = TS.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TypeSizeFixed &lt;= 8)</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a058782b98991f0719657d9008d3df41b">Log2&#95;32&#95;Ceil</a>((TypeSizeFixed + 7) / 8);</span></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlightComment">/// Helper class to attach debug information of the given instruction onto new</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlightComment">/// instructions inserted after.</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder/#a0069210926fba78c824a7a41edee915f">NextNodeIRBuilder</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/irbuilder/#afdcde0e677ccb2ad5b4d67a510da2972">IRBuilder</a>&lt;&gt; &#123;</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder/#a0069210926fba78c824a7a41edee915f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">explicit</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder/#a0069210926fba78c824a7a41edee915f">NextNodeIRBuilder</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;IP) : <a href="/docs/api/classes/llvm/irbuilder/#afdcde0e677ccb2ad5b4d67a510da2972">IRBuilder</a>&lt;&gt;(IP-&gt;<a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp/#a05eb84c8f630be406f61761013146574">getNextNode</a>()) &#123;</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilderbase/#a63fc74646456a3bed261512f21efe29c">SetCurrentDebugLocation</a>(IP-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>());</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlightComment">/// This class does all the work for a given function. Store and Load</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlightComment">/// instructions store and load corresponding shadow and origin</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlightComment">/// values. Most instructions propagate shadow from arguments to their</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlightComment">/// return values. Certain instructions (most importantly, BranchInst)</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlightComment">/// test their argument shadow and print reports (with a runtime call) if it&#39;s</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><span class="doxyHighlightComment">/// non-zero.</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec3293074efad01a669018f6c46f3219">MemorySanitizerVisitor</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instvisitor">InstVisitor</a>&lt;MemorySanitizerVisitor&gt; &#123;</span></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>;</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>;</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7317314e7a515a2b952b59ead684d49f"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;PHINode &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5287beec429ac02e5db213256dcd8776">ShadowPHINodes</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7317314e7a515a2b952b59ead684d49f">OriginPHINodes</a>;</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d20d8cd675fe8f162888d38bcc0ea99"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/valuemap">ValueMap&lt;Value &#42;, Value &#42;&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af72ba6bf0adbad0f1134ed2e8a62b318">ShadowMap</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d20d8cd675fe8f162888d38bcc0ea99">OriginMap</a>;</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab"><span class="doxyHighlight">  std::unique&#95;ptr&lt;VarArgHelper&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>;</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>;</span></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>;</span></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa6f4541cb285cd7d00759c8ffddf9f69"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa6f4541cb285cd7d00759c8ffddf9f69">Instructions</a>;</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The following flags disable parts of MSan instrumentation based on</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// exclusion list contents and command-line options.</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03">InsertChecks</a>;</span></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>;</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a>;</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a8e97da337e78573f55cc8cf4c4500f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a8e97da337e78573f55cc8cf4c4500f">PoisonUndef</a>;</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a5e11bfea34371ef9e7f16b20731d8b51">ShadowOriginAndInsertPoint</a> &#123;</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#acb10be61b0f0ef39f886a6a0d7f60e0e"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#acb10be61b0f0ef39f886a6a0d7f60e0e">Shadow</a>;</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a04db6d762be481e199299fe549651ed2"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a04db6d762be481e199299fe549651ed2">Origin</a>;</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a6c10cb9e5f036fdbe4de2314f975fa91"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a6c10cb9e5f036fdbe4de2314f975fa91">OrigIns</a>;</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a5e11bfea34371ef9e7f16b20731d8b51"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a5e11bfea34371ef9e7f16b20731d8b51">ShadowOriginAndInsertPoint</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;S, <a href="/docs/api/classes/llvm/value">Value</a> &#42;O, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">        : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#acb10be61b0f0ef39f886a6a0d7f60e0e">Shadow</a>(S), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a04db6d762be481e199299fe549651ed2">Origin</a>(O), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint/#a6c10cb9e5f036fdbe4de2314f975fa91">OrigIns</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;&#125;</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;ShadowOriginAndInsertPoint, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>;</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f7bf4d0adbe765573bbbbbc89ddd626"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const DILocation &#42;, int&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f7bf4d0adbe765573bbbbbc89ddd626">LazyWarningDebugLocationCount</a>;</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2c4b8995820e03b05d6530e8cc2c0752"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2c4b8995820e03b05d6530e8cc2c0752">InstrumentLifetimeStart</a> = <a href="#a9b9c616adc23214477236548737858c1">ClHandleLifetimeIntrinsics</a>;</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a620d735c5fea0163960071e5a3e99a4a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector&lt;AllocaInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a620d735c5fea0163960071e5a3e99a4a">AllocaSet</a>;</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a53bb2da7b8d4e6eb90cd44d1e3556af7"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;IntrinsicInst &#42;, AllocaInst &#42;&gt;</a>, 16&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a53bb2da7b8d4e6eb90cd44d1e3556af7">LifetimeStartList</a>;</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1e17cdef6be3fbe65c97bed1a437f040"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;StoreInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1e17cdef6be3fbe65c97bed1a437f040">StoreList</a>;</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6041f8f61469e7649e9f9ad33a5be8b6"><span class="doxyHighlight">  int64&#95;t <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6041f8f61469e7649e9f9ad33a5be8b6">SplittableBlocksCount</a> = 0;</span></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec3293074efad01a669018f6c46f3219"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec3293074efad01a669018f6c46f3219">MemorySanitizerVisitor</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>,</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>)</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>(<a href="#abb08ae2f213bc5b87540413de9b095a2">CreateVarArgHelper</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>, &#42;this)), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>) &#123;</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> SanitizeFunction =</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.hasFnAttribute(Attribute::SanitizeMemory) &amp;&amp; !<a href="#aff7a784ef2ba8136fb338f23bccc8c17">ClDisableChecks</a>;</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03">InsertChecks</a> = SanitizeFunction;</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> = SanitizeFunction;</span></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a> = SanitizeFunction &amp;&amp; <a href="#a848e1ebd611f366583fc79c1c5ff2392">ClPoisonStack</a>;</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a8e97da337e78573f55cc8cf4c4500f">PoisonUndef</a> = SanitizeFunction &amp;&amp; <a href="#a8438c35f22f870c5e2cafe47130fecb5">ClPoisonUndef</a>;</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// In the presence of unreachable blocks, we may see Phi nodes with</span></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// incoming nodes from such blocks. Since InstVisitor skips unreachable</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// blocks, such nodes will not have any shadow value associated with them.</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It&#39;s easier to remove unreachable blocks than deal with missing shadow.</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#aec88b7682025edff7984c3b6c8da8ac9">removeUnreachableBlocks</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>);</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.initializeCallbacks(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getParent(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>);</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a> =</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#aa241826e10b4a9bf77c3115e7160d3c7">IRBuilder&lt;&gt;</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getEntryBlock(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getEntryBlock().getFirstNonPHIIt())</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><span class="doxyHighlight">            .CreateIntrinsic(Intrinsic::donothing, &#123;&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel) &#123;</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>);</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad4fd8682f807900cbed932926bceb717">insertKmsanPrologue</a>(IRB);</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03">InsertChecks</a>) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">               &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;MemorySanitizer is not inserting checks into &#39;&quot;</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><span class="doxyHighlight">               &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#39;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0974eac64f313142c02ae973aca6359e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0974eac64f313142c02ae973aca6359e">instrumentWithCalls</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Constants likely will be eliminated by follow-up passes.</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Constant&gt;</a>(V))</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">    ++<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6041f8f61469e7649e9f9ad33a5be8b6">SplittableBlocksCount</a>;</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a562f393ed86818bc632731f717a91b36">ClInstrumentationWithCallThreshold</a> &gt;= 0 &amp;&amp;</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">           <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6041f8f61469e7649e9f9ad33a5be8b6">SplittableBlocksCount</a> &gt; <a href="#a562f393ed86818bc632731f717a91b36">ClInstrumentationWithCallThreshold</a>;</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afc7b613059ab8f04e165d430bb736bba"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afc7b613059ab8f04e165d430bb736bba">isInPrologue</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent() == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>-&gt;getParent() &amp;&amp;</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">           (&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a> || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.comesBefore(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>));</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Creates a new origin and records the stack trace. In general we can call</span></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// this function for any origin manipulation we like. However it will cost</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// runtime resources. So use this wisely only if it can provide additional</span></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// information helpful to a user.</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3">updateOrigin</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &lt;= 1)</span></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V;</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanChainOriginFn, V);</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a045f288bf4edf0fe84985782706d4bb9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a045f288bf4edf0fe84985782706d4bb9">originToIntptr</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin) &#123;</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntptrSize == <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>)</span></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Origin;</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IntptrSize == <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> &#42; 2);</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">    Origin = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(Origin, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, </span><span class="doxyHighlightComment">/&#42; isSigned &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Origin, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b6a3be6451cf6a789d9305d90751c40">CreateShl</a>(Origin, <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> &#42; 8));</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><span class="doxyHighlightComment">  /// Fill memory range with the given origin value.</span></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52">paintOrigin</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin, <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr,</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">                   <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TS, <a href="/docs/api/structs/llvm/align">Align</a> Alignment) &#123;</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> IntptrAlignment = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IntptrAlignment &gt;= <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IntptrSize &gt;= <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>);</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note: The loop based formation works for fixed length vectors too,</span></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// however we prefer to unroll and specialize alignment below.</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TS.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &#123;</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a55086d93549de64322f4d3e8f5dd4883">CreateTypeSize</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, TS);</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RoundUp =</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> - 1));</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;End =</span></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6b68047eda0d6d6eec5dd564ed1a22b8">CreateUDiv</a>(RoundUp, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>));</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;InsertPt, Index&#93; =</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a32aaa22eb69c944393cd5a1c79fa0d35">SplitBlockAndInsertSimpleForLoop</a>(End, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>());</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsertPt);</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncommongep-cpp/#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr, Index);</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Origin, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncommongep-cpp/#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = TS.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Ofs = 0;</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/align">Align</a> CurrentAlignment = Alignment;</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Alignment &gt;= IntptrAlignment &amp;&amp; IntptrSize &gt; <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>) &#123;</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;IntptrOrigin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a045f288bf4edf0fe84985782706d4bb9">originToIntptr</a>(IRB, Origin);</span></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;IntptrOriginPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(OriginPtr, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.PtrTy);</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> / IntptrSize; ++i) &#123;</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = i ? IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, IntptrOriginPtr, i)</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">                       : IntptrOriginPtr;</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(IntptrOrigin, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, CurrentAlignment);</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">        Ofs += IntptrSize / <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><span class="doxyHighlight">        CurrentAlignment = IntptrAlignment;</span></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = Ofs; i &lt; (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> + <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a> - 1) / <a href="#a454da6b23d63f4bb778f6249cc427b91">kOriginSize</a>; ++i) &#123;</span></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncommongep-cpp/#ad532e8710e50302e0a376b61c91fa91d">GEP</a> =</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><span class="doxyHighlight">          i ? IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr, i) : OriginPtr;</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Origin, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncommongep-cpp/#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, CurrentAlignment);</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">      CurrentAlignment = <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>;</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00c704ed1965bd5d0348f156a8e33506"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00c704ed1965bd5d0348f156a8e33506">storeOrigin</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin,</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">                   <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr, <a href="/docs/api/structs/llvm/align">Align</a> Alignment) &#123;</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> OriginAlignment = std::max(<a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>, Alignment);</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> StoreSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ZExt cannot convert between vector and scalar</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertedShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(Shadow, IRB);</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;ConstantShadow = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(ConvertedShadow)) &#123;</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a2622ac4e4855b9e0339799760c8e08e7">ClCheckConstantShadow</a> || ConstantShadow-&gt;isZeroValue()) &#123;</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Origin is not needed: value is initialized or const shadow is</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// ignored.</span></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a9893e3e4b14f8fa15d7c3c25a6a0b6f6">llvm::isKnownNonZero</a>(ConvertedShadow, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) &#123;</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Copy origin as the value is definitely uninitialized.</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52">paintOrigin</a>(IRB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3">updateOrigin</a>(Origin, IRB), OriginPtr, StoreSize,</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlight">                    OriginAlignment);</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Fallback to runtime check, which still can be optimized out later.</span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeSizeInBits = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(ConvertedShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SizeIndex = <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/hwaddresssanitizer-cpp/#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a>(TypeSizeInBits);</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0974eac64f313142c02ae973aca6359e">instrumentWithCalls</a>(ConvertedShadow) &amp;&amp;</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">        SizeIndex &lt; <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel) &#123;</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Fn = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MaybeStoreOriginFn&#91;SizeIndex&#93;;</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertedShadow2 =</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9e6950f7f17700d5c0d61ad0b846ec5c">CreateZExt</a>(ConvertedShadow, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a31e2db8d1b315202d2c19e711b5365fd">getIntNTy</a>(8 &#42; (1 &lt;&lt; SizeIndex)));</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/callbase">CallBase</a> &#42;CB = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Fn, &#123;ConvertedShadow2, Addr, Origin&#125;);</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">      CB-&gt;<a href="/docs/api/classes/llvm/callbase/#ae5d05ec2b9a60806746addff3f2a71a9">addParamAttr</a>(0, Attribute::ZExt);</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">      CB-&gt;<a href="/docs/api/classes/llvm/callbase/#ae5d05ec2b9a60806746addff3f2a71a9">addParamAttr</a>(2, Attribute::ZExt);</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(ConvertedShadow, IRB, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CheckTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlight">          Cmp, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginStoreWeights);</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBNew(CheckTerm);</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52">paintOrigin</a>(IRBNew, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3">updateOrigin</a>(Origin, IRBNew), OriginPtr, StoreSize,</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">                  OriginAlignment);</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a09cbf4fc467ebb29733bdb77d74e7d07"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a09cbf4fc467ebb29733bdb77d74e7d07">materializeStores</a>() &#123;</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42;<a href="/docs/api/namespaces/llvm/si">SI</a> : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1e17cdef6be3fbe65c97bed1a437f040">StoreList</a>) &#123;</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/namespaces/llvm/si">SI</a>);</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Val = <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getValueOperand();</span></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getPointerOperand();</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;isAtomic() ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(Val) : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Val);</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr, &#42;OriginPtr;</span></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getAlign();</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> OriginAlignment = std::max(<a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>, Alignment);</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">      std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, ShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42;NewSI = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Shadow, ShadowPtr, Alignment);</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  STORE: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;NewSI &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">      (void)NewSI;</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;isAtomic())</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;setOrdering(<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a7886b01e9761c33d2235cda57744417d">addReleaseOrdering</a>(<a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getOrdering()));</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &amp;&amp; !<a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;isAtomic())</span></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00c704ed1965bd5d0348f156a8e33506">storeOrigin</a>(IRB, Addr, Shadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Val), OriginPtr,</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">                    OriginAlignment);</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Returns true if Debug Location corresponds to multiple warnings.</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac02a2e35e2ad7efcce4dace2ac96a3a6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac02a2e35e2ad7efcce4dace2ac96a3a6">shouldDisambiguateWarningLocation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> &amp;<a href="/docs/api/classes/llvm/debugloc">DebugLoc</a>) &#123;</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &lt; 2)</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f7bf4d0adbe765573bbbbbc89ddd626">LazyWarningDebugLocationCount</a>.empty())</span></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>)</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">        ++<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f7bf4d0adbe765573bbbbbc89ddd626">LazyWarningDebugLocationCount</a>&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.OrigIns-&gt;getDebugLoc()&#93;;</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f7bf4d0adbe765573bbbbbc89ddd626">LazyWarningDebugLocationCount</a>&#91;<a href="/docs/api/classes/llvm/debugloc">DebugLoc</a>&#93; &gt;= <a href="#ab6bfda65820457c2a529896cc101e444">ClDisambiguateWarning</a>;</span></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlightComment">  /// Helper function to insert a warning at IRB&#39;s current insert point.</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9f4e542bdcac1a2ab15b6e55991f07c8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9f4e542bdcac1a2ab15b6e55991f07c8">insertWarningFn</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin) &#123;</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Origin)</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">      Origin = (<a href="/docs/api/classes/llvm/value">Value</a> &#42;)IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Origin-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>());</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac02a2e35e2ad7efcce4dace2ac96a3a6">shouldDisambiguateWarningLocation</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a90a3242eeb2a7d1afbb5ab5bc5bfb20d">getCurrentDebugLocation</a>())) &#123;</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Try to create additional origin with debug info of the last origin</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instruction. It may provide additional information to the user.</span></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OI = <a href="/docs/api/namespaces/llvm/#a5f6182886dc2f96c204299e92c1565d5">dyn&#95;cast&#95;or&#95;null&lt;Instruction&gt;</a>(Origin)) &#123;</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins);</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NewDebugLoc = OI-&gt;getDebugLoc();</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Origin update with missing or the same debug location provides no</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// additional value.</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NewDebugLoc &amp;&amp; NewDebugLoc != IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a90a3242eeb2a7d1afbb5ab5bc5bfb20d">getCurrentDebugLocation</a>()) &#123;</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Insert update just before the check, so we call runtime only just</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// before the report.</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBOrigin(&amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>());</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">          IRBOrigin.<a href="/docs/api/classes/llvm/irbuilderbase/#a63fc74646456a3bed261512f21efe29c">SetCurrentDebugLocation</a>(NewDebugLoc);</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlight">          Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3">updateOrigin</a>(Origin, IRBOrigin);</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel || <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.WarningFn, Origin)-&gt;<a href="/docs/api/classes/llvm/callbase/#a6da7de997f92fdb5d3e85f4f5b9af20e">setCannotMerge</a>();</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.WarningFn)-&gt;<a href="/docs/api/classes/llvm/callbase/#a6da7de997f92fdb5d3e85f4f5b9af20e">setCannotMerge</a>();</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Insert UnreachableInst if !MS.Recover?</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This may invalidate some of the following checks and needs to be done</span></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// at the very end.</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a6b95606a7aa4afbc8a38114dd8da82"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a6b95606a7aa4afbc8a38114dd8da82">materializeOneCheck</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertedShadow,</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin) &#123;</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeSizeInBits = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(ConvertedShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SizeIndex = <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/hwaddresssanitizer-cpp/#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a>(TypeSizeInBits);</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0974eac64f313142c02ae973aca6359e">instrumentWithCalls</a>(ConvertedShadow) &amp;&amp;</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">        SizeIndex &lt; <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp/#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel) &#123;</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Fn = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MaybeWarningFn&#91;SizeIndex&#93;;</span></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// ZExt cannot convert between vector and scalar</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">      ConvertedShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(ConvertedShadow, IRB);</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertedShadow2 =</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9e6950f7f17700d5c0d61ad0b846ec5c">CreateZExt</a>(ConvertedShadow, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a31e2db8d1b315202d2c19e711b5365fd">getIntNTy</a>(8 &#42; (1 &lt;&lt; SizeIndex)));</span></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/callbase">CallBase</a> &#42;CB = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">          Fn, &#123;ConvertedShadow2,</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">               <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &amp;&amp; Origin ? Origin : (<a href="/docs/api/classes/llvm/value">Value</a> &#42;)IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0)&#125;);</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">      CB-&gt;<a href="/docs/api/classes/llvm/callbase/#ae5d05ec2b9a60806746addff3f2a71a9">addParamAttr</a>(0, Attribute::ZExt);</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><span class="doxyHighlight">      CB-&gt;<a href="/docs/api/classes/llvm/callbase/#ae5d05ec2b9a60806746addff3f2a71a9">addParamAttr</a>(1, Attribute::ZExt);</span></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(ConvertedShadow, IRB, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CheckTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">          Cmp, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(),</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">/&#42; Unreachable &#42;/</span><span class="doxyHighlight"> !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.Recover, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.ColdCallWeights);</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9f4e542bdcac1a2ab15b6e55991f07c8">insertWarningFn</a>(IRB, Origin);</span></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  CHECK: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Cmp &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0efb7aefc1fd76a565c2ced7d2ff14cb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0efb7aefc1fd76a565c2ced7d2ff14cb">materializeInstructionChecks</a>(</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;ShadowOriginAndInsertPoint&gt;</a> InstructionChecks) &#123;</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Disable combining in some cases. TrackOrigins checks each shadow to pick</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// correct origin.</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonvectorcombine-cpp/#ab582deb65d0ec7f41efa6d8579daf0e1">Combine</a> = !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins;</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/classes/llvm/instruction">Instruction</a> = InstructionChecks.<a href="/docs/api/classes/llvm/arrayref/#a721fc555cb3d8dc2a1a680dcc2ce69b2">front</a>().OrigIns;</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ShadowData : InstructionChecks) &#123;</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShadowData.OrigIns == <a href="/docs/api/classes/llvm/instruction">Instruction</a>);</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/classes/llvm/instruction">Instruction</a>);</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertedShadow = ShadowData.Shadow;</span></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;ConstantShadow = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(ConvertedShadow)) &#123;</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a2622ac4e4855b9e0339799760c8e08e7">ClCheckConstantShadow</a> || ConstantShadow-&gt;isZeroValue()) &#123;</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Skip, value is initialized or const shadow is ignored.</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a9893e3e4b14f8fa15d7c3c25a6a0b6f6">llvm::isKnownNonZero</a>(ConvertedShadow, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) &#123;</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Report as the value is definitely uninitialized.</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9f4e542bdcac1a2ab15b6e55991f07c8">insertWarningFn</a>(IRB, ShadowData.Origin);</span></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.Recover)</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Always fail and stop here, not need to check the rest.</span></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Skip entire instruction,</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Fallback to runtime check, which still can be optimized out later.</span></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonvectorcombine-cpp/#ab582deb65d0ec7f41efa6d8579daf0e1">Combine</a>) &#123;</span></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a6b95606a7aa4afbc8a38114dd8da82">materializeOneCheck</a>(IRB, ConvertedShadow, ShadowData.Origin);</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Shadow) &#123;</span></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><span class="doxyHighlight">        Shadow = ConvertedShadow;</span></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><span class="doxyHighlight">      Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(Shadow, IRB, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">      ConvertedShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(ConvertedShadow, IRB, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><span class="doxyHighlight">      Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow, ConvertedShadow, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msor&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Shadow) &#123;</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonvectorcombine-cpp/#ab582deb65d0ec7f41efa6d8579daf0e1">Combine</a>);</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/classes/llvm/instruction">Instruction</a>);</span></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a6b95606a7aa4afbc8a38114dd8da82">materializeOneCheck</a>(IRB, Shadow, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f56283bd67f32b385c705520aabb932"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f56283bd67f32b385c705520aabb932">materializeChecks</a>() &#123;</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For assert below.</span></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;Instruction &#42;, 16&gt;</a> <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>;</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>.begin();</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>.end();) &#123;</span></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OrigIns = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;OrigIns;</span></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Checks are grouped by the original instruction. We call all</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#96;insertShadowCheck&#96; for an instruction at once.</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>.insert(OrigIns).second);</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> J = std::find&#95;if(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>.end(),</span></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlight">                            &#91;OrigIns&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint">ShadowOriginAndInsertPoint</a> &amp;R) &#123;</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><span class="doxyHighlight">                              return OrigIns != R.OrigIns;</span></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><span class="doxyHighlight">                            &#125;);</span></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Process all checks of instruction at once.</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0efb7aefc1fd76a565c2ced7d2ff14cb">materializeInstructionChecks</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;ShadowOriginAndInsertPoint&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, J));</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = J;</span></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DONE:\\n&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>);</span></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Returns the last instruction in the new prologue</span></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad4fd8682f807900cbed932926bceb717"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad4fd8682f807900cbed932926bceb717">insertKmsanPrologue</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ContextState = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanGetContextStateFn, &#123;&#125;);</span></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Zero = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.ParamTLS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><span class="doxyHighlight">                                &#123;Zero, IRB.getInt32(0)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;param&#95;shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.RetvalTLS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><span class="doxyHighlight">                                 &#123;Zero, IRB.getInt32(1)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;retval&#95;shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.VAArgTLS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><span class="doxyHighlight">                                &#123;Zero, IRB.getInt32(2)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;va&#95;arg&#95;shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.VAArgOriginTLS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><span class="doxyHighlight">                                      &#123;Zero, IRB.getInt32(3)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;va&#95;arg&#95;origin&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.VAArgOverflowSizeTLS =</span></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">                      &#123;Zero, IRB.getInt32(4)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;va&#95;arg&#95;overflow&#95;size&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.ParamOriginTLS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">                                      &#123;Zero, IRB.getInt32(5)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;param&#95;origin&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.RetvalOriginTLS =</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanContextStateTy, ContextState,</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">                      &#123;Zero, IRB.getInt32(6)&#125;, </span><span class="doxyHighlightStringLiteral">&quot;retval&#95;origin&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TargetTriple.getArch() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>)</span></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadataAlloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadata, 0u);</span></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><span class="doxyHighlightComment">  /// Add MemorySanitizer instrumentation to a function.</span></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8605e39e73fa355574fd811094481af4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8605e39e73fa355574fd811094481af4">runOnFunction</a>() &#123;</span></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Iterate all BBs in depth-first order and create shadow instructions</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// for all instructions (where applicable).</span></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For PHI nodes we create dummy shadow PHIs which will be finalized later.</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB : <a href="/docs/api/namespaces/llvm/#ad6e19a09aeed4c56617c284e099c81de">depth&#95;first</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>-&gt;getParent()))</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/spirv/spirvpostlegalizer-cpp/#a090736355958192cac4db32336c48bbd">visit</a>(&#42;BB);</span></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#96;visit&#96; above only collects instructions. Process them after iterating</span></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// CFG to avoid requirement on CFG transformations.</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa6f4541cb285cd7d00759c8ffddf9f69">Instructions</a>)</span></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/instvisitor/#a6352e72d11377a9c62f24434ae869bf0">InstVisitor&lt;MemorySanitizerVisitor&gt;::visit</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Finalize PHI nodes.</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;PN : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5287beec429ac02e5db213256dcd8776">ShadowPHINodes</a>) &#123;</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;PNS = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PHINode&gt;</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PN));</span></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;PNO = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PHINode&gt;</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(PN)) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> NumValues = PN-&gt;getNumIncomingValues();</span></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> v = 0; v &lt; NumValues; v++) &#123;</span></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><span class="doxyHighlight">        PNS-&gt;<a href="/docs/api/classes/llvm/phinode/#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PN, v), PN-&gt;getIncomingBlock(v));</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PNO)</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlight">          PNO-&gt;<a href="/docs/api/classes/llvm/phinode/#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(PN, v), PN-&gt;getIncomingBlock(v));</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>-&gt;finalizeInstrumentation();</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Poison llvm.lifetime.start intrinsics, if we haven&#39;t fallen back to</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instrumenting only allocas.</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2c4b8995820e03b05d6530e8cc2c0752">InstrumentLifetimeStart</a>) &#123;</span></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Item : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a53bb2da7b8d4e6eb90cd44d1e3556af7">LifetimeStartList</a>) &#123;</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acd39b18dfd59223eea65852ed04b338e">instrumentAlloca</a>(&#42;Item.second, Item.first);</span></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a620d735c5fea0163960071e5a3e99a4a">AllocaSet</a>.remove(Item.second);</span></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Poison the allocas for which we didn&#39;t instrument the corresponding</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// lifetime intrinsics.</span></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a620d735c5fea0163960071e5a3e99a4a">AllocaSet</a>)</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acd39b18dfd59223eea65852ed04b338e">instrumentAlloca</a>(&#42;AI);</span></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Insert shadow value checks.</span></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0f56283bd67f32b385c705520aabb932">materializeChecks</a>();</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Delayed instrumentation of StoreInst.</span></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This may not add new address checks.</span></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a09cbf4fc467ebb29733bdb77d74e7d07">materializeStores</a>();</span></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlightComment">  /// Compute the shadow type that corresponds to a given Value.</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(V-&gt;getType()); &#125;</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlightComment">  /// Compute the shadow type that corresponds to a given Type.</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a03dd63ac617c1242b7694a4b0ae4ed25"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a03dd63ac617c1242b7694a4b0ae4ed25">getShadowTy</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;OrigTy) &#123;</span></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!OrigTy-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) &#123;</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For integer type, shadow is the same as the original type.</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This may return weird-sized types like i1.</span></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/integertype">IntegerType</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armsubtarget-cpp/#a6f57985fa144303082fa7517a52e6db9">IT</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;IntegerType&gt;</a>(OrigTy))</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armsubtarget-cpp/#a6f57985fa144303082fa7517a52e6db9">IT</a>;</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VT = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(OrigTy)) &#123;</span></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">      uint32&#95;t EltSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(VT-&gt;getElementType());</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/vectortype/#a861be1e2092622462053c6d31dddbfd5">VectorType::get</a>(<a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, EltSize),</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><span class="doxyHighlight">                             VT-&gt;getElementCount());</span></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;AT = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ArrayType&gt;</a>(OrigTy)) &#123;</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(AT-&gt;getElementType()),</span></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlight">                            AT-&gt;getNumElements());</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;ST = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(OrigTy)) &#123;</span></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Type &#42;, 4&gt;</a> Elements;</span></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0, n = ST-&gt;getNumElements(); i &lt; n; i++)</span></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><span class="doxyHighlight">        Elements.push&#95;back(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(ST-&gt;getElementType(i)));</span></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;Res = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, Elements, ST-&gt;isPacked());</span></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;getShadowTy: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;ST &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ===&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Res &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Res;</span></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><span class="doxyHighlight">    uint32&#95;t <a href="/docs/api/classes/llvm/typesize">TypeSize</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(OrigTy);</span></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, <a href="/docs/api/classes/llvm/typesize">TypeSize</a>);</span></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><span class="doxyHighlightComment">  /// Extract combined shadow of struct elements as a bool</span></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a811a74b2e69c5460dca8303638cde95d"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a811a74b2e69c5460dca8303638cde95d">collapseStructShadow</a>(<a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a763a932e166ac85a6d2d1606e8649993">Struct</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow,</span></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;FalseVal = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a95df4f20c933779306b9a936b88b99a5">getIntN</a>(</span><span class="doxyHighlightComment">/&#42; width &#42;/</span><span class="doxyHighlight"> 1, </span><span class="doxyHighlightComment">/&#42; value &#42;/</span><span class="doxyHighlight"> 0);</span></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Aggregator = FalseVal;</span></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx = 0; Idx &lt; <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a763a932e166ac85a6d2d1606e8649993">Struct</a>-&gt;getNumElements(); Idx++) &#123;</span></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Combine by ORing together each element&#39;s bool shadow</span></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowItem = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(Shadow, Idx);</span></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBool = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(ShadowItem, IRB);</span></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Aggregator != FalseVal)</span></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><span class="doxyHighlight">        Aggregator = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Aggregator, ShadowBool);</span></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><span class="doxyHighlight">        Aggregator = ShadowBool;</span></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Aggregator;</span></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extract combined shadow of array elements</span></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae6c3a2326fd156c2d77da47edbe608c4"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae6c3a2326fd156c2d77da47edbe608c4">collapseArrayShadow</a>(<a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;Array, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow,</span></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Array-&gt;getNumElements())</span></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a95df4f20c933779306b9a936b88b99a5">getIntN</a>(</span><span class="doxyHighlightComment">/&#42; width &#42;/</span><span class="doxyHighlight"> 1, </span><span class="doxyHighlightComment">/&#42; value &#42;/</span><span class="doxyHighlight"> 0);</span></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;FirstItem = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(Shadow, 0);</span></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Aggregator = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(FirstItem, IRB);</span></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx = 1; Idx &lt; Array-&gt;getNumElements(); Idx++) &#123;</span></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowItem = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(Shadow, Idx);</span></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowInner = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(ShadowItem, IRB);</span></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><span class="doxyHighlight">      Aggregator = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Aggregator, ShadowInner);</span></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Aggregator;</span></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><span class="doxyHighlightComment">  /// Convert a shadow value to it&#39;s flattened variant. The resulting</span></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><span class="doxyHighlightComment">  /// shadow may not necessarily have the same bit width as the input</span></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><span class="doxyHighlightComment">  /// value, but it will always be comparable to zero.</span></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a763a932e166ac85a6d2d1606e8649993">Struct</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(V-&gt;getType()))</span></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a811a74b2e69c5460dca8303638cde95d">collapseStructShadow</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a763a932e166ac85a6d2d1606e8649993">Struct</a>, V, IRB);</span></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;Array = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ArrayType&gt;</a>(V-&gt;getType()))</span></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae6c3a2326fd156c2d77da47edbe608c4">collapseArrayShadow</a>(Array, V, IRB);</span></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(V-&gt;getType())) &#123;</span></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ScalableVectorType&gt;</a>(V-&gt;getType()))</span></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a784d99f22cf1632638a2fa652e7723d1">CreateOrReduce</a>(V), IRB);</span></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> =</span></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><span class="doxyHighlight">          V-&gt;getType()-&gt;getPrimitiveSizeInBits().getFixedValue();</span></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(V, <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>));</span></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V;</span></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Convert a scalar value to an i1 by comparing with 0</span></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/smeabipass-cpp/#a8f8f80d37794cde9472343e4487ba3eb">name</a> = </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;VTy = V-&gt;getType();</span></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VTy-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</span></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(V, IRB), IRB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/smeabipass-cpp/#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</span></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VTy-&gt;<a href="/docs/api/classes/llvm/type/#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() == 1)</span></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Just converting a bool to a bool, so do nothing.</span></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V;</span></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(V, ConstantInt::get(VTy, 0), <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/smeabipass-cpp/#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</span></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a69a4b725eeca6669bc2adb458eb5e08f"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a69a4b725eeca6669bc2adb458eb5e08f">ptrToIntPtrType</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VectTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(PtrTy)) &#123;</span></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/vectortype/#a861be1e2092622462053c6d31dddbfd5">VectorType::get</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a69a4b725eeca6669bc2adb458eb5e08f">ptrToIntPtrType</a>(VectTy-&gt;getElementType()),</span></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><span class="doxyHighlight">                             VectTy-&gt;getElementCount());</span></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PtrTy-&gt;<a href="/docs/api/classes/llvm/type/#abf313eff420b7c6c8e322a2e9c53cd90">isIntOrPtrTy</a>());</span></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy;</span></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac784928dcbbc1b0691cc8da90970391d"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac784928dcbbc1b0691cc8da90970391d">getPtrToShadowPtrType</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;IntPtrTy, <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VectTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(IntPtrTy)) &#123;</span></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/vectortype/#a861be1e2092622462053c6d31dddbfd5">VectorType::get</a>(</span></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac784928dcbbc1b0691cc8da90970391d">getPtrToShadowPtrType</a>(VectTy-&gt;getElementType(), ShadowTy),</span></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><span class="doxyHighlight">          VectTy-&gt;getElementCount());</span></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IntPtrTy == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.PtrTy;</span></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;IntPtrTy, uint64&#95;t <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VectTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(IntPtrTy)) &#123;</span></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantvector/#aa3b241b35b0039b413faf1ef4e873eb7">ConstantVector::getSplat</a>(</span></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><span class="doxyHighlight">          VectTy-&gt;getElementCount(),</span></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(VectTy-&gt;getElementType(), <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>));</span></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IntPtrTy == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><span class="doxyHighlightComment">  /// Returns the integer shadow offset that corresponds to a given</span></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><span class="doxyHighlightComment">  /// application address, whereby:</span></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><span class="doxyHighlightComment">  ///     Offset = (Addr &amp; ~AndMask) ^ XorMask</span></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><span class="doxyHighlightComment">  ///     Shadow = ShadowBase + Offset</span></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><span class="doxyHighlightComment">  ///     Origin = (OriginBase + Offset) &amp; ~Alignment</span></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><span class="doxyHighlightComment">  /// Note: for efficiency, many shadow mappings only require use the XorMask</span></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><span class="doxyHighlightComment">  ///       and OriginBase; the AndMask and ShadowBase are often zero.</span></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aecd57a29db63344a976ec5830496e733"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aecd57a29db63344a976ec5830496e733">getShadowPtrOffset</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a69a4b725eeca6669bc2adb458eb5e08f">ptrToIntPtrType</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OffsetLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, IntptrTy);</span></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (uint64&#95;t AndMask = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MapParams-&gt;AndMask)</span></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><span class="doxyHighlight">      OffsetLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OffsetLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(IntptrTy, ~AndMask));</span></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (uint64&#95;t XorMask = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MapParams-&gt;XorMask)</span></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><span class="doxyHighlight">      OffsetLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(OffsetLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(IntptrTy, XorMask));</span></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> OffsetLong;</span></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><span class="doxyHighlightComment">  /// Compute the shadow and origin addresses corresponding to a given</span></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><span class="doxyHighlightComment">  /// application address.</span></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><span class="doxyHighlightComment">  /// Shadow = ShadowBase + Offset</span></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><span class="doxyHighlightComment">  /// Origin = (OriginBase + Offset) &amp; ~3ULL</span></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><span class="doxyHighlightComment">  /// Addr can be a ptr or &lt;N x ptr&gt;. In both cases ShadowTy the shadow type of</span></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><span class="doxyHighlightComment">  /// a single pointee.</span></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><span class="doxyHighlightComment">  /// Returns &lt;shadow&#95;ptr, origin&#95;ptr&gt; or &lt;&lt;N x shadow&#95;ptr&gt;, &lt;N x origin&#95;ptr&gt;&gt;.</span></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><span class="doxyHighlight">  std::pair&lt;Value &#42;, Value &#42;&gt;</span></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac05ca292709f88f6ba0ae241e0e84bf"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac05ca292709f88f6ba0ae241e0e84bf">getShadowOriginPtrUserspace</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy,</span></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><span class="doxyHighlight">                              <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment) &#123;</span></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VectTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VectTy) &#123;</span></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</span></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VectTy-&gt;<a href="/docs/api/classes/llvm/vectortype/#afdce715c901d62e2c1367a0ff5248175">getElementType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</span></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a69a4b725eeca6669bc2adb458eb5e08f">ptrToIntPtrType</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aecd57a29db63344a976ec5830496e733">getShadowPtrOffset</a>(Addr, IRB);</span></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowLong = ShadowOffset;</span></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (uint64&#95;t ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MapParams-&gt;ShadowBase) &#123;</span></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><span class="doxyHighlight">      ShadowLong =</span></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ShadowLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(IntptrTy, ShadowBase));</span></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><span class="doxyHighlight">        ShadowLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac784928dcbbc1b0691cc8da90970391d">getPtrToShadowPtrType</a>(IntptrTy, ShadowTy));</span></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginLong = ShadowOffset;</span></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><span class="doxyHighlight">      uint64&#95;t OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MapParams-&gt;OriginBase;</span></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OriginBase != 0)</span></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><span class="doxyHighlight">        OriginLong =</span></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(OriginLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(IntptrTy, OriginBase));</span></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Alignment || &#42;Alignment &lt; <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>) &#123;</span></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><span class="doxyHighlight">        uint64&#95;t Mask = <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>.value() - 1;</span></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><span class="doxyHighlight">        OriginLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OriginLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06d139c7ee04d81813f05083f784f67b">constToIntPtr</a>(IntptrTy, ~Mask));</span></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><span class="doxyHighlight">      OriginPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><span class="doxyHighlight">          OriginLong, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac784928dcbbc1b0691cc8da90970391d">getPtrToShadowPtrType</a>(IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy));</span></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(ShadowPtr, OriginPtr);</span></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight">... ArgsTy&gt;</span></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0683904b75a4218c8915db0ec157614d"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0683904b75a4218c8915db0ec157614d">createMetadataCall</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Callee,</span></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><span class="doxyHighlight">                            ArgsTy... Args) &#123;</span></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TargetTriple.getArch() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>) &#123;</span></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Callee,</span></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><span class="doxyHighlight">                     &#123;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadataAlloca, std::forward&lt;ArgsTy&gt;(Args)...&#125;);</span></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadata, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadataAlloca);</span></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Callee, &#123;std::forward&lt;ArgsTy&gt;(Args)...&#125;);</span></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad271462ad31f06423e02d373ce962cf1"><span class="doxyHighlight">  std::pair&lt;Value &#42;, Value &#42;&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad271462ad31f06423e02d373ce962cf1">getShadowOriginPtrKernelNoVec</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><span class="doxyHighlight">                                                            <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><span class="doxyHighlight">                                                            <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy,</span></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><span class="doxyHighlight">                                                            </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>) &#123;</span></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowOriginPtrs;</span></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(ShadowTy);</span></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Getter = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.getKmsanShadowOriginAccessFn(<a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrCast = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.PtrTy);</span></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Getter) &#123;</span></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><span class="doxyHighlight">      ShadowOriginPtrs = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0683904b75a4218c8915db0ec157614d">createMetadataCall</a>(IRB, Getter, AddrCast);</span></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeVal = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><span class="doxyHighlight">      ShadowOriginPtrs = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0683904b75a4218c8915db0ec157614d">createMetadataCall</a>(</span></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><span class="doxyHighlight">          IRB,</span></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a> ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadataPtrForStoreN : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanMetadataPtrForLoadN,</span></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><span class="doxyHighlight">          AddrCast, SizeVal);</span></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(ShadowOriginPtrs, 0);</span></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><span class="doxyHighlight">    ShadowPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(ShadowPtr, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.PtrTy);</span></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(ShadowOriginPtrs, 1);</span></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(ShadowPtr, OriginPtr);</span></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><span class="doxyHighlightComment">  /// Addr can be a ptr or &lt;N x ptr&gt;. In both cases ShadowTy the shadow type of</span></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><span class="doxyHighlightComment">  /// a single pointee.</span></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><span class="doxyHighlightComment">  /// Returns &lt;shadow&#95;ptr, origin&#95;ptr&gt; or &lt;&lt;N x shadow&#95;ptr&gt;, &lt;N x origin&#95;ptr&gt;&gt;.</span></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7480612cfe31fd07e5d1d5d45bf3c3b4"><span class="doxyHighlight">  std::pair&lt;Value &#42;, Value &#42;&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7480612cfe31fd07e5d1d5d45bf3c3b4">getShadowOriginPtrKernel</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</span></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><span class="doxyHighlight">                                                       <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><span class="doxyHighlight">                                                       <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy,</span></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><span class="doxyHighlight">                                                       </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>) &#123;</span></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/vectortype">VectorType</a> &#42;VectTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VectTy) &#123;</span></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</span></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad271462ad31f06423e02d373ce962cf1">getShadowOriginPtrKernelNoVec</a>(Addr, IRB, ShadowTy, <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>);</span></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Support callbacs with vectors of addresses.</span></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElements = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(VectTy)-&gt;getNumElements();</span></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtrs = <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(</span></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/fixedvectortype/#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>(), NumElements));</span></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtrs = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><span class="doxyHighlight">      OriginPtrs = <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(</span></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/fixedvectortype/#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>(), NumElements));</span></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumElements; ++i) &#123;</span></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OneAddr =</span></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(Addr, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), i));</span></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtr, OriginPtr&#93; =</span></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad271462ad31f06423e02d373ce962cf1">getShadowOriginPtrKernelNoVec</a>(OneAddr, IRB, ShadowTy, <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>);</span></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><span class="doxyHighlight">      ShadowPtrs = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a17320ebd77e834577a5ebd1063039625">CreateInsertElement</a>(</span></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><span class="doxyHighlight">          ShadowPtrs, ShadowPtr, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), i));</span></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><span class="doxyHighlight">        OriginPtrs = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a17320ebd77e834577a5ebd1063039625">CreateInsertElement</a>(</span></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><span class="doxyHighlight">            OriginPtrs, OriginPtr, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), i));</span></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;ShadowPtrs, OriginPtrs&#125;;</span></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f"><span class="doxyHighlight">  std::pair&lt;Value &#42;, Value &#42;&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</span></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy,</span></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><span class="doxyHighlight">                                                 <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment,</span></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><span class="doxyHighlight">                                                 </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>) &#123;</span></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel)</span></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7480612cfe31fd07e5d1d5d45bf3c3b4">getShadowOriginPtrKernel</a>(Addr, IRB, ShadowTy, <a href="/docs/api/files/lib/lib/target/lib/target/arc/arcinstrinfo-cpp/#aab5329eaa9a958adfa2c8de4d24e16cc">isStore</a>);</span></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac05ca292709f88f6ba0ae241e0e84bf">getShadowOriginPtrUserspace</a>(Addr, IRB, ShadowTy, Alignment);</span></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><span class="doxyHighlightComment">  /// Compute the shadow address for a given function argument.</span></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><span class="doxyHighlightComment">  /// Shadow = ParamTLS+ArgOffset.</span></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aad8b252988733827abdf7bd44a8c2138"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aad8b252988733827abdf7bd44a8c2138">getShadowPtrForArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ArgOffset) &#123;</span></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.ParamTLS, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgOffset)</span></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, ArgOffset));</span></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>(0), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msarg&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><span class="doxyHighlightComment">  /// Compute the origin address for a given function argument.</span></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3">getOriginPtrForArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ArgOffset) &#123;</span></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.ParamOriginTLS, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgOffset)</span></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, ArgOffset));</span></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>(0), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msarg&#95;o&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><span class="doxyHighlightComment">  /// Compute the shadow address for a retval.</span></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a55223c498ad94e7e49c3789aba0becce"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a55223c498ad94e7e49c3789aba0becce">getShadowPtrForRetval</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.RetvalTLS, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>(0), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msret&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><span class="doxyHighlightComment">  /// Compute the origin address for a retval.</span></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac996b058186b94adf7a2ae509803265"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac996b058186b94adf7a2ae509803265">getOriginPtrForRetval</a>() &#123;</span></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We keep a single origin for the entire retval. Might be too optimistic.</span></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.RetvalOriginTLS;</span></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><span class="doxyHighlightComment">  /// Set SV to be the shadow value for V.</span></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/value">Value</a> &#42;SV) &#123;</span></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af72ba6bf0adbad0f1134ed2e8a62b318">ShadowMap</a>.count(V) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Values may only have one shadow&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af72ba6bf0adbad0f1134ed2e8a62b318">ShadowMap</a>&#91;V&#93; = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> ? SV : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><span class="doxyHighlightComment">  /// Set Origin to be the origin value for V.</span></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin) &#123;</span></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d20d8cd675fe8f162888d38bcc0ea99">OriginMap</a>.count(V) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Values may only have one origin&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ORIGIN: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;V &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  ==&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Origin &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d20d8cd675fe8f162888d38bcc0ea99">OriginMap</a>&#91;V&#93; = Origin;</span></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;OrigTy) &#123;</span></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(OrigTy);</span></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ShadowTy)</span></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShadowTy);</span></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><span class="doxyHighlightComment">  /// Create a clean shadow value for a given value.</span></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><span class="doxyHighlightComment">  /// Clean shadow (all zeroes) means all bits of the value are defined</span></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><span class="doxyHighlightComment">  /// (initialized).</span></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa2ec1ca1ec0a1c96cf7497aee1bf0c1d"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa2ec1ca1ec0a1c96cf7497aee1bf0c1d">getCleanShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa2ec1ca1ec0a1c96cf7497aee1bf0c1d">getCleanShadow</a>(V-&gt;getType()); &#125;</span></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><span class="doxyHighlightComment">  /// Create a dirty shadow of a given shadow type.</span></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy) &#123;</span></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShadowTy);</span></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;IntegerType&gt;</a>(ShadowTy) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(ShadowTy))</span></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constant/#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(ShadowTy);</span></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;AT = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ArrayType&gt;</a>(ShadowTy)) &#123;</span></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 4&gt;</a> Vals(AT-&gt;getNumElements(),</span></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><span class="doxyHighlight">                                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(AT-&gt;getElementType()));</span></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantarray/#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(AT, Vals);</span></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;ST = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(ShadowTy)) &#123;</span></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 4&gt;</a> Vals;</span></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0, n = ST-&gt;getNumElements(); i &lt; n; i++)</span></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><span class="doxyHighlight">        Vals.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(ST-&gt;getElementType(i)));</span></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(ST, Vals);</span></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unexpected shadow type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><span class="doxyHighlightComment">  /// Create a dirty shadow for a given value.</span></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d77673586722d48008ce4203b061990"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d77673586722d48008ce4203b061990">getPoisonedShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(V);</span></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ShadowTy)</span></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(ShadowTy);</span></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><span class="doxyHighlightComment">  /// Create a clean (zero) origin.</span></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy); &#125;</span></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"><span class="doxyHighlightComment">  /// Get the shadow value for a given Value.</span></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><span class="doxyHighlightComment">  /// This function either returns the value set earlier with setShadow,</span></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><span class="doxyHighlightComment">  /// or extracts if from ParamTLS (for function arguments).</span></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Instruction&gt;</a>(V)) &#123;</span></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getMetadata(LLVMContext::MD&#95;nosanitize))</span></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// For instructions the shadow is already stored in the map.</span></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af72ba6bf0adbad0f1134ed2e8a62b318">ShadowMap</a>&#91;V&#93;;</span></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Shadow) &#123;</span></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;No shadow: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;V &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()));</span></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><span class="doxyHighlight">        (void)<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shadow &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;No shadow for a value&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Shadow;</span></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/undefvalue">UndefValue</a> &#42;U = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;UndefValue&gt;</a>(V)) &#123;</span></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> = (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> &amp;&amp; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a8e97da337e78573f55cc8cf4c4500f">PoisonUndef</a>) ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(V)</span></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><span class="doxyHighlight">                                                        : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Undef: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;U &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ==&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/namespaces/llvm/#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><span class="doxyHighlight">      (void)U;</span></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>;</span></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/argument">Argument</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Argument&gt;</a>(V)) &#123;</span></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// For arguments we compute the shadow on demand and store it in the map.</span></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;&amp;ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af72ba6bf0adbad0f1134ed2e8a62b318">ShadowMap</a>&#91;V&#93;;</span></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ShadowPtr)</span></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ShadowPtr;</span></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/function">Function</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getParent();</span></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> EntryIRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4feeefbf4ec513bf876399ce4b84aad1">FnPrologueEnd</a>);</span></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset = 0;</span></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>-&gt;getDataLayout();</span></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FArg : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>-&gt;args()) &#123;</span></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FArg.getType()-&gt;isSized() || FArg.getType()-&gt;isScalableTy()) &#123;</span></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (FArg.getType()-&gt;isScalableTy()</span></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><span class="doxyHighlight">                                    ? </span><span class="doxyHighlightStringLiteral">&quot;vscale not fully supported\\n&quot;</span></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><span class="doxyHighlight">                                    : </span><span class="doxyHighlightStringLiteral">&quot;Arg is not sized\\n&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> == &amp;FArg) &#123;</span></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><span class="doxyHighlight">            ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = FArg.hasByValAttr()</span></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><span class="doxyHighlight">                            ? <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(FArg.getParamByValType())</span></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><span class="doxyHighlight">                            : <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(FArg.getType());</span></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> == &amp;FArg) &#123;</span></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Overflow = ArgOffset + <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>;</span></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FArg.hasByValAttr()) &#123;</span></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// ByVal pointer itself has clean shadow. We copy the actual</span></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// argument shadow to the underlying memory.</span></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// Figure out maximal valid memcpy alignment.</span></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> ArgAlign = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getValueOrABITypeAlignment(</span></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><span class="doxyHighlight">                FArg.getParamAlign(), FArg.getParamByValType());</span></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;CpShadowPtr, &#42;CpOriginPtr;</span></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><span class="doxyHighlight">            std::tie(CpShadowPtr, CpOriginPtr) =</span></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><span class="doxyHighlight">                <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(V, EntryIRB, EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), ArgAlign,</span></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><span class="doxyHighlight">                                   </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> || Overflow) &#123;</span></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// ParamTLS overflow.</span></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><span class="doxyHighlight">              EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(</span></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><span class="doxyHighlight">                  CpShadowPtr, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><span class="doxyHighlight">                  <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ArgAlign);</span></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aad8b252988733827abdf7bd44a8c2138">getShadowPtrForArgument</a>(EntryIRB, ArgOffset);</span></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> CopyAlign = std::min(ArgAlign, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cpy = EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(CpShadowPtr, CopyAlign, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</span></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><span class="doxyHighlight">                                                 CopyAlign, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><span class="doxyHighlight">              <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  ByValCpy: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Cpy &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><span class="doxyHighlight">              (void)Cpy;</span></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3">getOriginPtrForArgument</a>(EntryIRB, ArgOffset);</span></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// FIXME: OriginSize should be:</span></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// alignTo(V % kMinOriginAlignment + Size, kMinOriginAlignment)</span></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OriginSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><span class="doxyHighlight">                EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(</span></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><span class="doxyHighlight">                    CpOriginPtr,</span></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><span class="doxyHighlight">                    </span><span class="doxyHighlightComment">/&#42; by getShadowOriginPtr &#42;/</span><span class="doxyHighlight"> <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>, OriginPtr,</span></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><span class="doxyHighlight">                    </span><span class="doxyHighlightComment">/&#42; by origin&#95;tls&#91;ArgOffset&#93; &#42;/</span><span class="doxyHighlight"> <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>,</span></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><span class="doxyHighlight">                    OriginSize);</span></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><span class="doxyHighlight">              &#125;</span></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> || Overflow || FArg.hasByValAttr() ||</span></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><span class="doxyHighlight">              (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.EagerChecks &amp;&amp; FArg.hasAttribute(Attribute::NoUndef))) &#123;</span></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><span class="doxyHighlight">            ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// Shadow over TLS</span></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aad8b252988733827abdf7bd44a8c2138">getShadowPtrForArgument</a>(EntryIRB, ArgOffset);</span></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><span class="doxyHighlight">            ShadowPtr = EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;FArg), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</span></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><span class="doxyHighlight">                                                   <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3">getOriginPtrForArgument</a>(EntryIRB, ArgOffset);</span></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><span class="doxyHighlight">              <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, EntryIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr));</span></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><span class="doxyHighlight">                     &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  ARG:    &quot;</span><span class="doxyHighlight"> &lt;&lt; FArg &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ==&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;ShadowPtr &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><span class="doxyHighlight">        ArgOffset += <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShadowPtr &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Could not find shadow for an argument&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ShadowPtr;</span></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For everything else the shadow is zero.</span></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V);</span></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><span class="doxyHighlightComment">  /// Get the shadow for i-th argument of the instruction I.</span></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aadbe423dda76243270cc066dc9b11cba"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aadbe423dda76243270cc066dc9b11cba">getShadow</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i) &#123;</span></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(i));</span></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><span class="doxyHighlightComment">  /// Get the origin for a value.</span></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a> || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Constant&gt;</a>(V) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;InlineAsm&gt;</a>(V))</span></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>();</span></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Instruction&gt;</a>(V) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Argument&gt;</a>(V)) &amp;&amp;</span></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Unexpected value type in getOrigin()&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Instruction&gt;</a>(V)) &#123;</span></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getMetadata(LLVMContext::MD&#95;nosanitize))</span></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>();</span></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1d20d8cd675fe8f162888d38bcc0ea99">OriginMap</a>&#91;V&#93;;</span></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Origin &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Missing origin&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Origin;</span></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><span class="doxyHighlightComment">  /// Get the origin for i-th argument of the instruction I.</span></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac6a79c772bc4522605d3c4aac853499b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac6a79c772bc4522605d3c4aac853499b">getOrigin</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i) &#123;</span></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(i));</span></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><span class="doxyHighlightComment">  /// Remember the place where a shadow check should be inserted.</span></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><span class="doxyHighlightComment">  /// This location will be later instrumented with a check that will print a</span></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><span class="doxyHighlightComment">  /// UMR warning in runtime if the shadow value is not 0</span></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns) &#123;</span></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shadow);</span></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03">InsertChecks</a>)</span></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/debugcounter/#a5aace8653ce3726ef07194dcf6bce2bf">DebugCounter::shouldExecute</a>(DebugInsertCheck)) &#123;</span></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Skipping check of &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Shadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; before &quot;</span></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><span class="doxyHighlight">                        &lt;&lt; &#42;OrigIns &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;IntegerType&gt;</a>(ShadowTy) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(ShadowTy) ||</span></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;StructType&gt;</a>(ShadowTy) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ArrayType&gt;</a>(ShadowTy)) &amp;&amp;</span></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Can only insert checks for integer, vector, and aggregate shadow &quot;</span></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;types&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a46f569d5ad463a4c719f0e8d4d9d5ae8">InstrumentationList</a>.push&#95;back(</span></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/shadoworiginandinsertpoint">ShadowOriginAndInsertPoint</a>(Shadow, Origin, OrigIns));</span></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><span class="doxyHighlightComment">  /// Remember the place where a shadow check should be inserted.</span></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><span class="doxyHighlightComment">  /// This location will be later instrumented with a check that will print a</span></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><span class="doxyHighlightComment">  /// UMR warning in runtime if the value is not fully defined.</span></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acf3df1ea61f4ce9ffc1c31eebcadc1bc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acf3df1ea61f4ce9ffc1c31eebcadc1bc">insertShadowCheck</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Val, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns) &#123;</span></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Val);</span></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, &#42;Origin;</span></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2622ac4e4855b9e0339799760c8e08e7">ClCheckConstantShadow</a>) &#123;</span></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><span class="doxyHighlight">      Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Val);</span></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Shadow)</span></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><span class="doxyHighlight">      Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Val);</span></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><span class="doxyHighlight">      Shadow = <a href="/docs/api/namespaces/llvm/#a5f6182886dc2f96c204299e92c1565d5">dyn&#95;cast&#95;or&#95;null&lt;Instruction&gt;</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Val));</span></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Shadow)</span></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><span class="doxyHighlight">      Origin = <a href="/docs/api/namespaces/llvm/#a5f6182886dc2f96c204299e92c1565d5">dyn&#95;cast&#95;or&#95;null&lt;Instruction&gt;</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Val));</span></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Shadow, Origin, OrigIns);</span></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a25d1bfd631c79b182628a0d619402223"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a25d1bfd631c79b182628a0d619402223">addReleaseOrdering</a>(<a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> a) &#123;</span></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (a) &#123;</span></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>:</span></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>;</span></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">AtomicOrdering::Unordered</a>:</span></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">AtomicOrdering::Monotonic</a>:</span></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</span></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</span></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>:</span></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>:</span></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>;</span></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>:</span></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>;</span></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unknown ordering&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9ecfbb98ae6069aa910e8aba30aca1d9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9ecfbb98ae6069aa910e8aba30aca1d9">makeAddReleaseOrderingTable</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumOrderings = (int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a> + 1;</span></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><span class="doxyHighlight">    uint32&#95;t OrderingTable&#91;NumOrderings&#93; = &#123;&#125;;</span></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a81f32be24a2a62fc472cc43edc97e65b">AtomicOrderingCABI::relaxed</a>&#93; =</span></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><span class="doxyHighlight">        OrderingTable&#91;(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a123fead50246387983ee340507115ef4">AtomicOrderingCABI::release</a>&#93; =</span></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><span class="doxyHighlight">            (int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a123fead50246387983ee340507115ef4">AtomicOrderingCABI::release</a>;</span></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af0ef8c72418989a4bb20243ccb61eeb0">AtomicOrderingCABI::consume</a>&#93; =</span></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><span class="doxyHighlight">        OrderingTable&#91;(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a86a4fa105ff51b8c3be84734797d8144">AtomicOrderingCABI::acquire</a>&#93; =</span></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><span class="doxyHighlight">            OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af3e0f4fa6020c4a1b19d21f32f42020c">AtomicOrderingCABI::acq&#95;rel</a>&#93; =</span></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><span class="doxyHighlight">                (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af3e0f4fa6020c4a1b19d21f32f42020c">AtomicOrderingCABI::acq&#95;rel</a>;</span></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a>&#93; =</span></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><span class="doxyHighlight">        (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a>;</span></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantdatavector/#ab8b693ee2fbb4c4173fa2725c110021b">ConstantDataVector::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa2ed385be8984b4306762990278eb13d">getContext</a>(), OrderingTable);</span></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a03caf3afb42be700767d2a267c8b4465"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a03caf3afb42be700767d2a267c8b4465">addAcquireOrdering</a>(<a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> a) &#123;</span></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (a) &#123;</span></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>:</span></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>;</span></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">AtomicOrdering::Unordered</a>:</span></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">AtomicOrdering::Monotonic</a>:</span></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>:</span></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>;</span></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</span></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>:</span></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>;</span></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>:</span></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>;</span></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unknown ordering&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a62bf64531735d133d60ced4e7a4d4e03"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a62bf64531735d133d60ced4e7a4d4e03">makeAddAcquireOrderingTable</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</span></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumOrderings = (int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a> + 1;</span></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><span class="doxyHighlight">    uint32&#95;t OrderingTable&#91;NumOrderings&#93; = &#123;&#125;;</span></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a81f32be24a2a62fc472cc43edc97e65b">AtomicOrderingCABI::relaxed</a>&#93; =</span></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><span class="doxyHighlight">        OrderingTable&#91;(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a86a4fa105ff51b8c3be84734797d8144">AtomicOrderingCABI::acquire</a>&#93; =</span></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><span class="doxyHighlight">            OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af0ef8c72418989a4bb20243ccb61eeb0">AtomicOrderingCABI::consume</a>&#93; =</span></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><span class="doxyHighlight">                (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a86a4fa105ff51b8c3be84734797d8144">AtomicOrderingCABI::acquire</a>;</span></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a123fead50246387983ee340507115ef4">AtomicOrderingCABI::release</a>&#93; =</span></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><span class="doxyHighlight">        OrderingTable&#91;(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af3e0f4fa6020c4a1b19d21f32f42020c">AtomicOrderingCABI::acq&#95;rel</a>&#93; =</span></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><span class="doxyHighlight">            (int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9af3e0f4fa6020c4a1b19d21f32f42020c">AtomicOrderingCABI::acq&#95;rel</a>;</span></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><span class="doxyHighlight">    OrderingTable&#91;(int)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a>&#93; =</span></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><span class="doxyHighlight">        (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/namespaces/llvm/#a650dea4533083a886cec9f16d80356d9a14cede869a7aee57588ab47066432604">AtomicOrderingCABI::seq&#95;cst</a>;</span></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantdatavector/#ab8b693ee2fbb4c4173fa2725c110021b">ConstantDataVector::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa2ed385be8984b4306762990278eb13d">getContext</a>(), OrderingTable);</span></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ------------------- Visitors.</span></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/instvisitor">InstVisitor</a>&lt;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a>&gt;<a href="/docs/api/files/lib/lib/target/lib/target/spirv/spirvpostlegalizer-cpp/#a090736355958192cac4db32336c48bbd">::visit</a>;</span></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a78793329d41f7e0ff3ab15f71b2f952c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a78793329d41f7e0ff3ab15f71b2f952c">visit</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD&#95;nosanitize))</span></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t want to visit if we&#39;re in the prologue</span></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afc7b613059ab8f04e165d430bb736bba">isInPrologue</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/debugcounter/#a5aace8653ce3726ef07194dcf6bce2bf">DebugCounter::shouldExecute</a>(DebugInstrumentInstruction)) &#123;</span></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Skipping instruction: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We still need to set the shadow and origin to clean values.</span></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa6f4541cb285cd7d00759c8ffddf9f69">Instructions</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><span class="doxyHighlightComment">  /// Instrument LoadInst</span></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><span class="doxyHighlightComment">  /// Loads the corresponding shadow and (optionally) origin.</span></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><span class="doxyHighlightComment">  /// Optionally, checks that the load address is fully defined.</span></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab57377826a403a4f8c41d7bb6d77f6b3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab57377826a403a4f8c41d7bb6d77f6b3">visitLoadInst</a>(<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isSized() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Load type must have size&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD&#95;nosanitize));</span></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPointerOperand();</span></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, &#42;OriginPtr = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getAlign();</span></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><span class="doxyHighlight">      std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, ShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><span class="doxyHighlight">                IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(ShadowTy, ShadowPtr, Alignment, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msld&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPointerOperand(), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isAtomic())</span></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setOrdering(<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a7af616ba2a31f5971eb4c842955aafa8">addAcquireOrdering</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOrdering()));</span></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> OriginAlignment = std::max(<a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>, Alignment);</span></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(</span></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><span class="doxyHighlight">            &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr, OriginAlignment));</span></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><span class="doxyHighlightComment">  /// Instrument StoreInst</span></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><span class="doxyHighlightComment">  /// Stores the corresponding shadow and (optionally) origin.</span></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><span class="doxyHighlightComment">  /// Optionally, checks that the store address is fully defined.</span></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1dad5091fba05972dc72b125bf3be373"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1dad5091fba05972dc72b125bf3be373">visitStoreInst</a>(<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1e17cdef6be3fbe65c97bed1a437f040">StoreList</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPointerOperand(), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a01329a7b6a3dfa3ec5b7755e80b723f9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a01329a7b6a3dfa3ec5b7755e80b723f9">handleCASOrRMW</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AtomicRMWInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AtomicCmpXchgInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Val = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(Val), <a href="/docs/api/structs/llvm/align">Align</a>(1),</span></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><span class="doxyHighlight">                                          </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><span class="doxyHighlight">                           .first;</span></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Only test the conditional argument of cmpxchg instruction.</span></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The other argument can potentially be uninitialized, but we can not</span></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// detect this situation reliably without possible false positives.</span></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AtomicCmpXchgInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Val, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(Val), ShadowPtr);</span></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab772f88fd07120f87cd319177cea148b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab772f88fd07120f87cd319177cea148b">visitAtomicRMWInst</a>(<a href="/docs/api/classes/llvm/atomicrmwinst">AtomicRMWInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a01329a7b6a3dfa3ec5b7755e80b723f9">handleCASOrRMW</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setOrdering(<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a7886b01e9761c33d2235cda57744417d">addReleaseOrdering</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOrdering()));</span></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a378277a0a96b34b3b5634b8ffc865c8a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a378277a0a96b34b3b5634b8ffc865c8a">visitAtomicCmpXchgInst</a>(<a href="/docs/api/classes/llvm/atomiccmpxchginst">AtomicCmpXchgInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a01329a7b6a3dfa3ec5b7755e80b723f9">handleCASOrRMW</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setSuccessOrdering(<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#a7886b01e9761c33d2235cda57744417d">addReleaseOrdering</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSuccessOrdering()));</span></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Vector manipulation.</span></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af4a162e1f6cd54269b8c906eb54ee6fb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af4a162e1f6cd54269b8c906eb54ee6fb">visitExtractElementInst</a>(<a href="/docs/api/classes/llvm/extractelementinst">ExtractElementInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</span></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><span class="doxyHighlight">                                           </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afbe4a56f60e1964a3e0ce781600334de"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afbe4a56f60e1964a3e0ce781600334de">visitInsertElementInst</a>(<a href="/docs/api/classes/llvm/insertelementinst">InsertElementInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(2), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a17320ebd77e834577a5ebd1063039625">CreateInsertElement</a>(Shadow0, Shadow1, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(2),</span></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><span class="doxyHighlight">                                          </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a464dafaad1c67c6d167dd70c6326dde9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a464dafaad1c67c6d167dd70c6326dde9">visitShuffleVectorInst</a>(<a href="/docs/api/classes/llvm/shufflevectorinst">ShuffleVectorInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa226d30eebf99ef84a0c2b1afcfc98b2">CreateShuffleVector</a>(Shadow0, Shadow1, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getShuffleMask(),</span></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><span class="doxyHighlight">                                          </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Casts.</span></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a22f2a1b9c4998624686b30ca88c98668"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a22f2a1b9c4998624686b30ca88c98668">visitSExtInst</a>(<a href="/docs/api/classes/llvm/sextinst">SExtInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aab6035ac9679b9449d97646f9c16d135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aab6035ac9679b9449d97646f9c16d135">visitZExtInst</a>(<a href="/docs/api/classes/llvm/zextinst">ZExtInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9e6950f7f17700d5c0d61ad0b846ec5c">CreateZExt</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3d1d4c8c600e51aaa27f230e05e3d553"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3d1d4c8c600e51aaa27f230e05e3d553">visitTruncInst</a>(<a href="/docs/api/classes/llvm/truncinst">TruncInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab5b4acb0f45af3f2308cad1468804f1e">CreateTrunc</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a005fbd5468607e9616160e82a7665c14"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a005fbd5468607e9616160e82a7665c14">visitBitCastInst</a>(<a href="/docs/api/classes/llvm/bitcastinst">BitCastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Special case: if this is the bitcast (there is exactly 1 allowed) between</span></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a musttail call and a ret, don&#39;t instrument. New instructions are not</span></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// allowed after a musttail call.</span></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)))</span></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI-&gt;isMustTailCall())</span></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</span></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac5bb05e9c2a806f7a3c21eace99b1d7c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac5bb05e9c2a806f7a3c21eace99b1d7c">visitPtrToIntInst</a>(<a href="/docs/api/classes/llvm/ptrtointinst">PtrToIntInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><span class="doxyHighlight">                                    </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;ptrtoint&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0cfc49213d6647056b0e487dc90450b6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0cfc49213d6647056b0e487dc90450b6">visitIntToPtrInst</a>(<a href="/docs/api/classes/llvm/inttoptrinst">IntToPtrInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><span class="doxyHighlight">                                    </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;inttoptr&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab2d0de74b72099fdc4de7d7c5796ef38"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab2d0de74b72099fdc4de7d7c5796ef38">visitFPToSIInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a832b7cd0e1d0392191a2c9528448834f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a832b7cd0e1d0392191a2c9528448834f">visitFPToUIInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab0d83677a081e8f0e23fe11742d83830"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab0d83677a081e8f0e23fe11742d83830">visitSIToFPInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a517a594e0e43f88e71496ad09f1a70b1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a517a594e0e43f88e71496ad09f1a70b1">visitUIToFPInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2b6fa84c0a2c67733d35ecdbfbeafafe"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2b6fa84c0a2c67733d35ecdbfbeafafe">visitFPExtInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af9a04183d7317af48f216ae837acac4d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af9a04183d7317af48f216ae837acac4d">visitFPTruncInst</a>(<a href="/docs/api/classes/llvm/castinst">CastInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><span class="doxyHighlightComment">  /// Propagate shadow for bitwise AND.</span></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><span class="doxyHighlightComment">  /// This code is exact, i.e. if, for example, a bit in the left argument</span></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><span class="doxyHighlightComment">  /// is defined and 0, then neither the value not definedness of the</span></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><span class="doxyHighlightComment">  /// corresponding bit in B don&#39;t affect the resulting shadow.</span></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af4ed8c796cc564c14664505603f6aac1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af4ed8c796cc564c14664505603f6aac1">visitAnd</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  &quot;And&quot; of 0 and a poisoned value results in unpoisoned value.</span></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1&amp;1 =&gt; 1;     0&amp;1 =&gt; 0;     p&amp;1 =&gt; p;</span></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1&amp;0 =&gt; 0;     0&amp;0 =&gt; 0;     p&amp;0 =&gt; 0;</span></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1&amp;p =&gt; p;     0&amp;p =&gt; 0;     p&amp;p =&gt; p;</span></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  S = (S1 &amp; S2) | (V1 &amp; S2) | (S1 &amp; V2)</span></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (V1-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>() != <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType()) &#123;</span></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><span class="doxyHighlight">      V1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V1, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><span class="doxyHighlight">      V2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V2, S2-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S1S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, S2);</span></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(V1, S2);</span></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S1V2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, V2);</span></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(&#123;S1S2, V1S2, S1V2&#125;));</span></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a684df7f760d6dcbfea36c5bccb2cfccd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a684df7f760d6dcbfea36c5bccb2cfccd">visitOr</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  &quot;Or&quot; of 1 and a poisoned value results in unpoisoned value.</span></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1|1 =&gt; 1;     0|1 =&gt; 1;     p|1 =&gt; 1;</span></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1|0 =&gt; 1;     0|0 =&gt; 0;     p|0 =&gt; p;</span></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  1|p =&gt; 1;     0|p =&gt; p;     p|p =&gt; p;</span></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  S = (S1 &amp; S2) | (~V1 &amp; S2) | (S1 &amp; ~V2)</span></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</span></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</span></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (V1-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>() != <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType()) &#123;</span></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><span class="doxyHighlight">      V1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V1, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><span class="doxyHighlight">      V2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V2, S2-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S1S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, S2);</span></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(V1, S2);</span></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S1V2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, V2);</span></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(&#123;S1S2, V1S2, S1V2&#125;));</span></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><span class="doxyHighlightComment">  /// Default propagation of shadow and/or origin.</span></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><span class="doxyHighlightComment">  /// This class implements the general case of shadow propagation, used in all</span></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><span class="doxyHighlightComment">  /// cases where we don&#39;t know and/or don&#39;t care about what the operation</span></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><span class="doxyHighlightComment">  /// actually does. It converts all input shadow values to a common type</span></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><span class="doxyHighlightComment">  /// (extending or truncating as necessary), and bitwise OR&#39;s them.</span></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><span class="doxyHighlightComment">  /// This is much cheaper than inserting checks (i.e. requiring inputs to be</span></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><span class="doxyHighlightComment">  /// fully initialized), and less prone to false positives.</span></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><span class="doxyHighlightComment">  /// This class also implements the general case of origin propagation. For a</span></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><span class="doxyHighlightComment">  /// Nary operation, result origin is set to the origin of an argument that is</span></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><span class="doxyHighlightComment">  /// not entirely initialized. If there is more than one such arguments, the</span></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><span class="doxyHighlightComment">  /// rightmost of them is picked. It does not matter which one is picked if all</span></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><span class="doxyHighlightComment">  /// arguments are initialized.</span></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CombineShadow&gt; </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a6823477775469222f5d39f48ffee81e1">Combiner</a> &#123;</span></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB;</span></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec3293074efad01a669018f6c46f3219">MemorySanitizerVisitor</a> &#42;MSV;</span></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a6823477775469222f5d39f48ffee81e1"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a6823477775469222f5d39f48ffee81e1">Combiner</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec3293074efad01a669018f6c46f3219">MemorySanitizerVisitor</a> &#42;MSV, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><span class="doxyHighlight">        : IRB(IRB), MSV(MSV) &#123;&#125;</span></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><span class="doxyHighlightComment">    /// Add a pair of shadow and origin values to the mix.</span></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ae8b71818798cbd6a6e93e0fccbd39bfd"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a6823477775469222f5d39f48ffee81e1">Combiner</a> &amp;<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ae8b71818798cbd6a6e93e0fccbd39bfd">Add</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;OpShadow, <a href="/docs/api/classes/llvm/value">Value</a> &#42;OpOrigin) &#123;</span></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CombineShadow) &#123;</span></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpShadow);</span></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Shadow)</span></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><span class="doxyHighlight">          Shadow = OpShadow;</span></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><span class="doxyHighlight">          OpShadow = MSV-&gt;CreateShadowCast(IRB, OpShadow, Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><span class="doxyHighlight">          Shadow = IRB.CreateOr(Shadow, OpShadow, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MSV-&gt;MS.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpOrigin);</span></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Origin) &#123;</span></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><span class="doxyHighlight">          Origin = OpOrigin;</span></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;ConstOrigin = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(OpOrigin);</span></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// No point in adding something that might result in 0 origin value.</span></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ConstOrigin || !ConstOrigin-&gt;<a href="/docs/api/classes/llvm/constant/#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) &#123;</span></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = MSV-&gt;convertToBool(OpShadow, IRB);</span></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><span class="doxyHighlight">            Origin = IRB.CreateSelect(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, OpOrigin, Origin);</span></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><span class="doxyHighlightComment">    /// Add an application value to the mix.</span></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a22e4173f6da55b5ccdc4dde3f62fccd9"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a6823477775469222f5d39f48ffee81e1">Combiner</a> &amp;<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a22e4173f6da55b5ccdc4dde3f62fccd9">Add</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OpShadow = MSV-&gt;getShadow(V);</span></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OpOrigin = MSV-&gt;MS.TrackOrigins ? MSV-&gt;getOrigin(V) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>(OpShadow, OpOrigin);</span></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><span class="doxyHighlightComment">    /// Set the current combined values as the given instruction&#39;s shadow</span></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><span class="doxyHighlightComment">    /// and origin.</span></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a554e0a120e27e722e0f2a96930041782"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a554e0a120e27e722e0f2a96930041782">Done</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CombineShadow) &#123;</span></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shadow);</span></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><span class="doxyHighlight">        Shadow = MSV-&gt;CreateShadowCast(IRB, Shadow, MSV-&gt;getShadowTy(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><span class="doxyHighlight">        MSV-&gt;setShadow(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MSV-&gt;MS.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Origin);</span></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><span class="doxyHighlight">        MSV-&gt;setOrigin(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Origin);</span></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><span class="doxyHighlightComment">    /// Store the current combined value at the specified origin</span></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><span class="doxyHighlightComment">    /// location.</span></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ad7b9e90211ff1f8429cfe18356dd4701"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ad7b9e90211ff1f8429cfe18356dd4701">DoneAndStoreOrigin</a>(<a href="/docs/api/classes/llvm/typesize">TypeSize</a> TS, <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr) &#123;</span></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MSV-&gt;MS.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Origin);</span></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><span class="doxyHighlight">        MSV-&gt;paintOrigin(IRB, Origin, OriginPtr, TS, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5">ShadowAndOriginCombiner</a> = <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner">Combiner&lt;true&gt;</a>;</span></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aba2a43205c3dc6d42ed940d6bbbbbfc8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aba2a43205c3dc6d42ed940d6bbbbbfc8">OriginCombiner</a> = <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner">Combiner&lt;false&gt;</a>;</span></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><span class="doxyHighlightComment">  /// Propagate origin for arbitrary operation.</span></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aba2a43205c3dc6d42ed940d6bbbbbfc8">OriginCombiner</a> OC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/use">Use</a> &amp;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands())</span></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><span class="doxyHighlight">      OC.Add(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.get());</span></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><span class="doxyHighlight">    OC.Done(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a52481b174cfe6444a5ae320b20c5bef9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a52481b174cfe6444a5ae320b20c5bef9">VectorOrPrimitiveTypeSizeInBits</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty) &#123;</span></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(Ty-&gt;isVectorTy() &amp;&amp; Ty-&gt;getScalarType()-&gt;isPointerTy()) &amp;&amp;</span></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Vector of pointers is not a valid shadow type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty-&gt;isVectorTy() ? <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(Ty)-&gt;getNumElements() &#42;</span></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><span class="doxyHighlight">                                  Ty-&gt;getScalarSizeInBits()</span></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><span class="doxyHighlight">                            : Ty-&gt;getPrimitiveSizeInBits();</span></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><span class="doxyHighlightComment">  /// Cast between two shadow types, extending or truncating as</span></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><span class="doxyHighlightComment">  /// necessary.</span></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69">CreateShadowCast</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/type">Type</a> &#42;dstTy,</span></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><span class="doxyHighlight">                          </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;srcTy = V-&gt;getType();</span></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (srcTy == dstTy)</span></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V;</span></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> srcSizeInBits = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a52481b174cfe6444a5ae320b20c5bef9">VectorOrPrimitiveTypeSizeInBits</a>(srcTy);</span></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> dstSizeInBits = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a52481b174cfe6444a5ae320b20c5bef9">VectorOrPrimitiveTypeSizeInBits</a>(dstTy);</span></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (srcSizeInBits &gt; 1 &amp;&amp; dstSizeInBits == 1)</span></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(V, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(V));</span></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (dstTy-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; srcTy-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</span></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V, dstTy, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>);</span></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (dstTy-&gt;<a href="/docs/api/classes/llvm/type/#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; srcTy-&gt;<a href="/docs/api/classes/llvm/type/#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</span></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(dstTy)-&gt;getElementCount() ==</span></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(srcTy)-&gt;getElementCount())</span></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V, dstTy, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>);</span></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(V, <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, srcSizeInBits));</span></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 =</span></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(V1, <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, dstSizeInBits), <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>);</span></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(V2, dstTy);</span></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: handle struct types.</span></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><span class="doxyHighlightComment">  /// Cast an application value to the type of its own shadow.</span></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abfaba717423054f99dee516c7673db49"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abfaba717423054f99dee516c7673db49">CreateAppToShadowCast</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</span></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(V);</span></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (V-&gt;getType() == ShadowTy)</span></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> V;</span></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (V-&gt;getType()-&gt;isPtrOrPtrVectorTy())</span></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(V, ShadowTy);</span></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(V, ShadowTy);</span></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><span class="doxyHighlightComment">  /// Propagate shadow for arbitrary operation.</span></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5">ShadowAndOriginCombiner</a> SC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/use">Use</a> &amp;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands())</span></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><span class="doxyHighlight">      SC.Add(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.get());</span></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><span class="doxyHighlight">    SC.Done(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af773d6ca5d9dfe3770599c12a08b49be"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af773d6ca5d9dfe3770599c12a08b49be">visitFNeg</a>(<a href="/docs/api/classes/llvm/unaryoperator">UnaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle multiplication by constant.</span></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle a special case of multiplication by constant that may have one or</span></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// more zeros in the lower bits. This makes corresponding number of lower bits</span></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of the result zero as well. We model it by shifting the other operand</span></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// shadow left by the required number of bits. Effectively, we transform</span></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (X &#42; (A &#42; 2&#42;&#42;B)) to ((X &lt;&lt; B) &#42; A) and instrument (X &lt;&lt; B) as (Sx &lt;&lt; B).</span></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We use multiplication by 2&#42;&#42;N instead of shift to cover the case of</span></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// multiplication by 0, which may occur in some elements of a vector operand.</span></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1f4b3d9a1db2a863f398981ea5c1d641"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1f4b3d9a1db2a863f398981ea5c1d641">handleMulByConstant</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;ConstArg,</span></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;OtherArg) &#123;</span></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;ShadowMul;</span></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = ConstArg-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;VTy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;VectorType&gt;</a>(Ty)) &#123;</span></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElements = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(VTy)-&gt;getNumElements();</span></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;EltTy = VTy-&gt;getElementType();</span></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 16&gt;</a> Elements;</span></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx = 0; Idx &lt; NumElements; ++Idx) &#123;</span></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/constantint">ConstantInt</a> &#42;Elt =</span></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><span class="doxyHighlight">                <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantInt&gt;</a>(ConstArg-&gt;<a href="/docs/api/classes/llvm/constant/#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(Idx))) &#123;</span></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;V = Elt-&gt;getValue();</span></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/apint">APInt</a> V2 = <a href="/docs/api/classes/llvm/apint">APInt</a>(V.getBitWidth(), 1) &lt;&lt; V.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</span></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><span class="doxyHighlight">          Elements.push&#95;back(ConstantInt::get(EltTy, V2));</span></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><span class="doxyHighlight">          Elements.push&#95;back(ConstantInt::get(EltTy, 1));</span></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><span class="doxyHighlight">      ShadowMul = <a href="/docs/api/classes/llvm/constantvector/#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Elements);</span></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/constantint">ConstantInt</a> &#42;Elt = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantInt&gt;</a>(ConstArg)) &#123;</span></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;V = Elt-&gt;getValue();</span></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/apint">APInt</a> V2 = <a href="/docs/api/classes/llvm/apint">APInt</a>(V.getBitWidth(), 1) &lt;&lt; V.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</span></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><span class="doxyHighlight">        ShadowMul = ConstantInt::get(Ty, V2);</span></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><span class="doxyHighlight">        ShadowMul = ConstantInt::get(Ty, 1);</span></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><span class="doxyHighlight">              IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(OtherArg), ShadowMul, </span><span class="doxyHighlightStringLiteral">&quot;msprop&#95;mul&#95;cst&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(OtherArg));</span></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a58a23d4603a99873024af3b84b576c5e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a58a23d4603a99873024af3b84b576c5e">visitMul</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;constOp0 = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</span></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;constOp1 = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</span></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (constOp0 &amp;&amp; !constOp1)</span></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1f4b3d9a1db2a863f398981ea5c1d641">handleMulByConstant</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, constOp0, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</span></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (constOp1 &amp;&amp; !constOp0)</span></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1f4b3d9a1db2a863f398981ea5c1d641">handleMulByConstant</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, constOp1, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</span></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a05f7153a6433bd6da07e4dd29a3a4717"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a05f7153a6433bd6da07e4dd29a3a4717">visitFAdd</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8f33b0169f8f0c1322c247a869396d17"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8f33b0169f8f0c1322c247a869396d17">visitFSub</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4af1fe1215239f5bb00b2bbe7e90b725"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4af1fe1215239f5bb00b2bbe7e90b725">visitFMul</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a29a08f21840973827bfcca10650f0d09"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a29a08f21840973827bfcca10650f0d09">visitAdd</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afe140f3e1fa65182ae3bf0969027e9dd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#afe140f3e1fa65182ae3bf0969027e9dd">visitSub</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0a9601fb2a0770ca9a67ea574a1537e6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0a9601fb2a0770ca9a67ea574a1537e6">visitXor</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b">handleIntegerDiv</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Strict on the second argument.</span></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06652627b90ae944abff9433688f500c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a06652627b90ae944abff9433688f500c">visitUDiv</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b">handleIntegerDiv</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9fe22967a17fc281dc3afea0bc761fa0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9fe22967a17fc281dc3afea0bc761fa0">visitSDiv</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b">handleIntegerDiv</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac50b8121d06f8634d836bfe8e780b11d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac50b8121d06f8634d836bfe8e780b11d">visitURem</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b">handleIntegerDiv</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a65251363b4be778d2a855cb6acba2666"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a65251363b4be778d2a855cb6acba2666">visitSRem</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a99029699685d64ef824bdbf6fd71754b">handleIntegerDiv</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Floating point division is side-effect free. We can not require that the</span></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// divisor is fully initialized and must propagate shadow. See PR37523.</span></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a7e1408f8587eab5d7a6795a6e51588"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2a7e1408f8587eab5d7a6795a6e51588">visitFDiv</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9e7a7377cca5083d3473b9aa9b0edb61"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9e7a7377cca5083d3473b9aa9b0edb61">visitFRem</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><span class="doxyHighlightComment">  /// Instrument == and != comparisons.</span></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><span class="doxyHighlightComment">  /// Sometimes the comparison result is known even if some of the bits of the</span></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><span class="doxyHighlightComment">  /// arguments are not.</span></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a823e9b0883ae72e62421714cd8bbda4c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a823e9b0883ae72e62421714cd8bbda4c">handleEqualityComparison</a>(<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sa = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sb = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Get rid of pointers and vectors of pointers.</span></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For ints (and vectors of ints), types of A and Sa match,</span></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and this is a no-op.</span></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, Sa-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Sb-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A == B  &lt;==&gt;  (C = A^B) == 0</span></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A != B  &lt;==&gt;  (C = A^B) != 0</span></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Sc = Sa | Sb</span></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sc = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Sa, Sb);</span></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Now dealing with i = (C == 0) comparison (or C != 0, does not matter now)</span></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Result is defined if one of the following is true</span></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#42; there is a defined 1 bit in C</span></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#42; C is fully defined</span></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Si = !(C &amp; ~Sc) &amp;&amp; Sc</span></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Zero = <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Sc-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;MinusOne = <a href="/docs/api/classes/llvm/constant/#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Sc-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;LHS = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(Sc, Zero);</span></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RHS =</span></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8c75539a39f167f352b37ccdd788a7e4">CreateICmpEQ</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(Sc, MinusOne), <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), Zero);</span></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Si = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(LHS, RHS);</span></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><span class="doxyHighlight">    Si-&gt;<a href="/docs/api/classes/llvm/value/#a35ee267850af7c235474a8c46c7ac5af">setName</a>(</span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;icmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Si);</span></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><span class="doxyHighlightComment">  /// Instrument relational comparisons.</span></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><span class="doxyHighlightComment">  /// This function does exact shadow propagation for all relational</span></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><span class="doxyHighlightComment">  /// comparisons of integers, pointers and vectors of those.</span></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><span class="doxyHighlightComment">  /// FIXME: output seems suboptimal when one of the operands is a constant</span></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac689bdce81e76d215f170f7eb3821be3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac689bdce81e76d215f170f7eb3821be3">handleRelationalComparisonExact</a>(<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sa = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sb = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Get rid of pointers and vectors of pointers.</span></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For ints (and vectors of ints), types of A and Sa match,</span></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and this is a no-op.</span></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, Sa-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Sb-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Let &#91;a0, a1&#93; be the interval of possible values of A, taking into account</span></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// its undefined bits. Let &#91;b0, b1&#93; be the interval of possible values of B.</span></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Then (A cmp B) is defined iff (a0 cmp b1) == (a1 cmp b0).</span></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsSigned = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned();</span></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> GetMinMaxUnsigned = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, <a href="/docs/api/classes/llvm/value">Value</a> &#42;S) &#123;</span></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsSigned) &#123;</span></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Sign-flip to map from signed range to unsigned range. Relation A vs B</span></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// should be preserved, if checked with &#96;getUnsignedPredicate()&#96;.</span></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Relationship between Amin, Amax, Bmin, Bmax also will not be</span></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// affected, as they are created by effectively adding/substructing from</span></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// A (or B) a value, derived from shadow, with no overflow, either</span></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// before or after sign flip.</span></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/apint">APInt</a> MinVal =</span></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(V-&gt;getType()-&gt;getScalarSizeInBits());</span></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><span class="doxyHighlight">        V = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(V, ConstantInt::get(V-&gt;getType(), MinVal));</span></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Minimize undefined bits.</span></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Min = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(V, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(S));</span></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Max = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(V, S);</span></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(Min, Max);</span></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;Amin, Amax&#93; = GetMinMaxUnsigned(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, Sa);</span></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;Bmin, Bmax&#93; = GetMinMaxUnsigned(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Sb);</span></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae0bd6c2fab2d18443038a8f3a2b64856">CreateICmp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getUnsignedPredicate(), Amin, Bmax);</span></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae0bd6c2fab2d18443038a8f3a2b64856">CreateICmp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getUnsignedPredicate(), Amax, Bmin);</span></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Si = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, S2);</span></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Si);</span></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><span class="doxyHighlightComment">  /// Instrument signed relational comparisons.</span></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><span class="doxyHighlightComment">  /// Handle sign bit tests: x&lt;0, x&gt;=0, x&lt;=-1, x&gt;-1 by propagating the highest</span></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><span class="doxyHighlightComment">  /// bit of the shadow. Everything else is delegated to handleShadowOr().</span></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a091a19fb76439b9fff59f052e2648ee9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a091a19fb76439b9fff59f052e2648ee9">handleSignedRelationalComparison</a>(<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;constOp;</span></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> pre;</span></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((constOp = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))) &#123;</span></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><span class="doxyHighlight">      pre = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</span></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((constOp = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)))) &#123;</span></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><span class="doxyHighlight">      pre = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate();</span></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((constOp-&gt;<a href="/docs/api/classes/llvm/constant/#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp;</span></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><span class="doxyHighlight">         (pre == <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP&#95;SLT</a> || pre == <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP&#95;SGE</a>)) ||</span></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><span class="doxyHighlight">        (constOp-&gt;<a href="/docs/api/classes/llvm/constant/#a662be1e66a5af621d46fa1c7a8aa1004">isAllOnesValue</a>() &amp;&amp;</span></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><span class="doxyHighlight">         (pre == <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP&#95;SGT</a> || pre == <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP&#95;SLE</a>))) &#123;</span></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac2bfef55549675e0ea117f29cd7309be">CreateICmpSLT</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a>),</span></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><span class="doxyHighlight">                                        </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;icmp&#95;s&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagonbittracker-cpp/#a0ee73ba17c3a2cb54752905e99d77357">op</a>));</span></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3175c69e435331710c2f03107ef3e8ef"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3175c69e435331710c2f03107ef3e8ef">visitICmpInst</a>(<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#add57c0965797f1cd395cfb0f28be04b7">ClHandleICmp</a>) &#123;</span></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality()) &#123;</span></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a823e9b0883ae72e62421714cd8bbda4c">handleEqualityComparison</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isRelational());</span></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a5d5b255beb6e29a70c776d2ad68c68ad">ClHandleICmpExact</a>) &#123;</span></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac689bdce81e76d215f170f7eb3821be3">handleRelationalComparisonExact</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned()) &#123;</span></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a091a19fb76439b9fff59f052e2648ee9">handleSignedRelationalComparison</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isUnsigned());</span></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))) &#123;</span></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac689bdce81e76d215f170f7eb3821be3">handleRelationalComparisonExact</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8d47532127ac3c3ed48866788d07385b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8d47532127ac3c3ed48866788d07385b">visitFCmpInst</a>(<a href="/docs/api/classes/llvm/fcmpinst">FCmpInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a220983874e8efc856fac602c19e9aa2b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a220983874e8efc856fac602c19e9aa2b">handleShift</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If any of the S2 bits are poisoned, the whole thing is poisoned.</span></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Otherwise perform the same shift on S1.</span></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2Conv =</span></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S2, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(S2)), S2-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shift = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aba5d97f3a14427982c1b86dafd033320">CreateBinOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode(), <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, V2);</span></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shift, S2Conv));</span></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a704a1fee76597843c068885f90df5aa3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a704a1fee76597843c068885f90df5aa3">visitShl</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a220983874e8efc856fac602c19e9aa2b">handleShift</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae9d49d21ac59052e3d17d7fa01228325"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae9d49d21ac59052e3d17d7fa01228325">visitAShr</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a220983874e8efc856fac602c19e9aa2b">handleShift</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aaa1fcb2e2013a57001fcc43f065bfe3d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aaa1fcb2e2013a57001fcc43f065bfe3d">visitLShr</a>(<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a220983874e8efc856fac602c19e9aa2b">handleShift</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a04fa6c52e825a7d994a3a5eeb1cc4549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a04fa6c52e825a7d994a3a5eeb1cc4549">handleFunnelShift</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If any of the S2 bits are poisoned, the whole thing is poisoned.</span></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Otherwise perform the same shift on S0 and S1.</span></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 2);</span></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2Conv =</span></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S2, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(S2)), S2-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(2);</span></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shift = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID(), S2Conv-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(),</span></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><span class="doxyHighlight">                                       &#123;S0, S1, V2&#125;);</span></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shift, S2Conv));</span></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><span class="doxyHighlightComment">  /// Instrument llvm.memmove</span></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><span class="doxyHighlightComment">  /// At this point we don&#39;t know if llvm.memmove will be inlined or not.</span></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><span class="doxyHighlightComment">  /// If we don&#39;t instrument it and it gets inlined,</span></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><span class="doxyHighlightComment">  /// our interceptor will not kick in and we will lose the memmove.</span></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879"><span class="doxyHighlightComment">  /// If we instrument the call here, but it does not get inlined,</span></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><span class="doxyHighlightComment">  /// we will memove the shadow twice: which is bad in case</span></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><span class="doxyHighlightComment">  /// of overlapping regions. So, we simply lower the intrinsic to a call.</span></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883"><span class="doxyHighlightComment">  /// Similar situation exists for memcpy and memset.</span></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5f93e75a1bd79aad5f817f9980e02cb3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5f93e75a1bd79aad5f817f9980e02cb3">visitMemMoveInst</a>(<a href="/docs/api/classes/llvm/memmoveinst">MemMoveInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1)); </span><span class="doxyHighlightComment">// Ensure shadow initialized</span></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MemmoveFn,</span></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><span class="doxyHighlight">                   &#123;I.getArgOperand(0), I.getArgOperand(1),</span></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><span class="doxyHighlight">                    IRB.CreateIntCast(I.getArgOperand(2), MS.IntptrTy, false)&#125;);</span></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.eraseFromParent();</span></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><span class="doxyHighlightComment">  /// Instrument memcpy</span></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><span class="doxyHighlightComment">  /// Similar to memmove: avoid copying shadow twice. This is somewhat</span></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><span class="doxyHighlightComment">  /// unfortunate as it may slowdown small constant memcpys.</span></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><span class="doxyHighlightComment">  /// FIXME: consider doing manual inline for small constant sizes and proper</span></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><span class="doxyHighlightComment">  /// alignment.</span></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"><span class="doxyHighlightComment">  /// Note: This also handles memcpy.inline, which promises no calls to external</span></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><span class="doxyHighlightComment">  /// functions as an optimization. However, with instrumentation enabled this</span></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><span class="doxyHighlightComment">  /// is difficult to promise; additionally, we know that the MSan runtime</span></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"><span class="doxyHighlightComment">  /// exists and provides &#95;&#95;msan&#95;memcpy(). Therefore, we assume that with</span></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><span class="doxyHighlightComment">  /// instrumentation it&#39;s safe to turn memcpy.inline into a call to</span></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><span class="doxyHighlightComment">  /// &#95;&#95;msan&#95;memcpy(). Should this be wrong, such as when implementing memcpy()</span></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><span class="doxyHighlightComment">  /// itself, instrumentation should be disabled with the no&#95;sanitize attribute.</span></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec582588d2e3296c8e411ebf91d528b0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aec582588d2e3296c8e411ebf91d528b0">visitMemCpyInst</a>(<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1)); </span><span class="doxyHighlightComment">// Ensure shadow initialized</span></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MemcpyFn,</span></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911"><span class="doxyHighlight">                   &#123;I.getArgOperand(0), I.getArgOperand(1),</span></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><span class="doxyHighlight">                    IRB.CreateIntCast(I.getArgOperand(2), MS.IntptrTy, false)&#125;);</span></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.eraseFromParent();</span></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Same as memcpy.</span></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3057161fac6ccf0d0f7a55a9ce5e8665"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3057161fac6ccf0d0f7a55a9ce5e8665">visitMemSetInst</a>(<a href="/docs/api/classes/llvm/memsetinst">MemSetInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(</span></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MemsetFn,</span></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><span class="doxyHighlight">        &#123;I.getArgOperand(0),</span></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><span class="doxyHighlight">         IRB.CreateIntCast(I.getArgOperand(1), IRB.getInt32Ty(), false),</span></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><span class="doxyHighlight">         IRB.CreateIntCast(I.getArgOperand(2), MS.IntptrTy, false)&#125;);</span></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.eraseFromParent();</span></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aca8c53c8908f3a0686e62be14257a280"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aca8c53c8908f3a0686e62be14257a280">visitVAStartInst</a>(<a href="/docs/api/classes/llvm/vastartinst">VAStartInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>-&gt;visitVAStartInst(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae2220b57cb00d5580de4912c5e86bcb2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae2220b57cb00d5580de4912c5e86bcb2">visitVACopyInst</a>(<a href="/docs/api/classes/llvm/vacopyinst">VACopyInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>-&gt;visitVACopyInst(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><span class="doxyHighlightComment">  /// Handle vector store-like intrinsics.</span></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><span class="doxyHighlightComment">  /// Instrument intrinsics that look like a simple SIMD store: writes memory,</span></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><span class="doxyHighlightComment">  /// has 1 pointer argument and 1 vector argument, returns void.</span></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa386f90ca7b1b24989ce41d70a0ce052"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa386f90ca7b1b24989ce41d70a0ce052">handleVectorStoreIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr, &#42;OriginPtr;</span></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940"></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We don&#39;t know the pointer alignment (could be unaligned SSE store!).</span></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Have to assume to worst case.</span></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><span class="doxyHighlight">    std::tie(ShadowPtr, OriginPtr) = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><span class="doxyHighlight">        Addr, IRB, Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Shadow, ShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: factor out common code from materializeStores</span></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1), OriginPtr);</span></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><span class="doxyHighlightComment">  /// Handle vector load-like intrinsics.</span></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><span class="doxyHighlightComment">  /// Instrument intrinsics that look like a simple SIMD load: reads memory,</span></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><span class="doxyHighlightComment">  /// has 1 pointer argument, returns a vector.</span></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0215817db88ff4446c80bf413c754c47"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0215817db88ff4446c80bf413c754c47">handleVectorLoadIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, &#42;OriginPtr = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We don&#39;t know the pointer alignment (could be unaligned SSE load!).</span></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Have to assume to worst case.</span></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><span class="doxyHighlight">      std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, ShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><span class="doxyHighlight">                IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(ShadowTy, ShadowPtr, Alignment, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msld&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>)</span></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr));</span></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><span class="doxyHighlightComment">  /// Handle (SIMD arithmetic)-like intrinsics.</span></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><span class="doxyHighlightComment">  /// Instrument intrinsics with any number of arguments of the same type &#91;&#42;&#93;,</span></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><span class="doxyHighlightComment">  /// equal to the return type, plus a specified number of trailing flags of</span></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><span class="doxyHighlightComment">  /// any type.</span></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><span class="doxyHighlightComment">  /// &#91;&#42;&#93; The type should be simple (no aggregates or pointers; vectors are</span></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><span class="doxyHighlightComment">  /// fine).</span></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><span class="doxyHighlightComment">  /// Caller guarantees that this intrinsic does not access memory.</span></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><span class="doxyHighlight">  &#91;&#91;maybe&#95;unused&#93;&#93; </span><span class="doxyHighlightKeywordType">bool</span></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9c9266376e710920a1bd7999ed9c8963"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9c9266376e710920a1bd7999ed9c8963">maybeHandleSimpleNomemIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002"><span class="doxyHighlight">                                  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> trailingFlags) &#123;</span></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;RetTy = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</span></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!(RetTy-&gt;<a href="/docs/api/classes/llvm/type/#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() || RetTy-&gt;<a href="/docs/api/classes/llvm/type/#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>()))</span></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumArgOperands = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size();</span></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumArgOperands &gt;= trailingFlags);</span></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumArgOperands - trailingFlags; ++i) &#123;</span></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i)-&gt;getType();</span></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty != RetTy)</span></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5">ShadowAndOriginCombiner</a> SC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumArgOperands; ++i)</span></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><span class="doxyHighlight">      SC.Add(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i));</span></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><span class="doxyHighlight">    SC.Done(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><span class="doxyHighlightComment">  /// Heuristically instrument unknown intrinsics.</span></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><span class="doxyHighlightComment">  /// The main purpose of this code is to do something reasonable with all</span></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><span class="doxyHighlightComment">  /// random intrinsics we might encounter, most importantly - SIMD intrinsics.</span></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><span class="doxyHighlightComment">  /// We recognize several classes of intrinsics by their argument types and</span></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><span class="doxyHighlightComment">  /// ModRefBehaviour and apply special instrumentation when we are reasonably</span></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><span class="doxyHighlightComment">  /// sure that we know what the intrinsic does.</span></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><span class="doxyHighlightComment">  /// We special-case intrinsics where this approach fails. See llvm.bswap</span></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><span class="doxyHighlightComment">  /// handling as an example of that.</span></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac5f6e0279d635bf21ceda6349d4afa02"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac5f6e0279d635bf21ceda6349d4afa02">handleUnknownIntrinsicUnlogged</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumArgOperands = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size();</span></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumArgOperands == 0)</span></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumArgOperands == 2 &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType()-&gt;isPointerTy() &amp;&amp;</span></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1)-&gt;getType()-&gt;isVectorTy() &amp;&amp;</span></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isVoidTy() &amp;&amp; !<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.onlyReadsMemory()) &#123;</span></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This looks like a vector store.</span></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa386f90ca7b1b24989ce41d70a0ce052">handleVectorStoreIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumArgOperands == 1 &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType()-&gt;isPointerTy() &amp;&amp;</span></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isVectorTy() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.onlyReadsMemory()) &#123;</span></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This looks like a vector load.</span></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0215817db88ff4446c80bf413c754c47">handleVectorLoadIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.doesNotAccessMemory())</span></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9c9266376e710920a1bd7999ed9c8963">maybeHandleSimpleNomemIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightComment">/&#42;trailingFlags=&#42;/</span><span class="doxyHighlight">0))</span></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: detect and handle SSE maskstore/maskload?</span></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Some cases are now handled in handleAVXMasked&#123;Load,Store&#125;.</span></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a077e9376af4a6c07ade5704887b2fd49"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a077e9376af4a6c07ade5704887b2fd49">handleUnknownIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac5f6e0279d635bf21ceda6349d4afa02">handleUnknownIntrinsicUnlogged</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a6b56dfb9e6691acfd25fd5d3901bc17c">ClDumpStrictIntrinsics</a>)</span></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#accd1cfbd692f327894828f50c24ad3b6">dumpInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;UNKNOWN INTRINSIC HANDLED HEURISTICALLY: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a></span></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a70e1c3d3c4ed3b31cb4921817214d40b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a70e1c3d3c4ed3b31cb4921817214d40b">handleInvariantGroup</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0dabd1eec85a33a1d90cf9b9356a3c58"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0dabd1eec85a33a1d90cf9b9356a3c58">handleLifetimeStart</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a>)</span></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a21fe87bf00db76089c043fed6a23fb76">llvm::findAllocaForValue</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1));</span></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AI)</span></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2c4b8995820e03b05d6530e8cc2c0752">InstrumentLifetimeStart</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a53bb2da7b8d4e6eb90cd44d1e3556af7">LifetimeStartList</a>.push&#95;back(std::make&#95;pair(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AI));</span></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2487c76cffea045469d6e95ea3a724b0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2487c76cffea045469d6e95ea3a724b0">handleBswap</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getType();</span></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(Intrinsic::bswap, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>(&amp;OpType, 1),</span></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><span class="doxyHighlight">                                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)));</span></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>));</span></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fdafd5b5245a6f5f14c41c593d10b69"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fdafd5b5245a6f5f14c41c593d10b69">handleCountZeroes</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Src = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Set the Output shadow based on input Shadow</span></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;BoolShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aafd864f39fd28e235eea03ae424ab8e0">CreateIsNotNull</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Src), </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscz&#95;bs&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If zero poison is requested, mix in with the shadow</span></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;IsZeroPoison = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Constant&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</span></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsZeroPoison-&gt;<a href="/docs/api/classes/llvm/constant/#ad97fc23e85a854a19101bf8e861356aa">isZeroValue</a>()) &#123;</span></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;BoolZeroPoison = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac9843b4f9f9cb144c608c48785a394a8">CreateIsNull</a>(Src, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscz&#95;bzp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><span class="doxyHighlight">      BoolShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(BoolShadow, BoolZeroPoison, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscz&#95;bs&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109"></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OutputShadow =</span></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(BoolShadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(Src), </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscz&#95;os&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OutputShadow);</span></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument vector convert intrinsic.</span></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function instruments intrinsics like cvtsi2ss:</span></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// %Out = int&#95;xxx&#95;cvtyyy(%ConvertOp)</span></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// or</span></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// %Out = int&#95;xxx&#95;cvtyyy(%CopyOp, %ConvertOp)</span></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Intrinsic converts \\p NumUsedElements elements of \\p ConvertOp to the same</span></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// number \\p Out elements, and (if has 2 arguments) copies the rest of the</span></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// elements from \\p CopyOp.</span></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// In most cases conversion involves floating-point value which may trigger a</span></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// hardware exception when not fully initialized. For this reason we require</span></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// \\p ConvertOp&#91;0:NumUsedElements&#93; to be fully initialized and trap otherwise.</span></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We copy the shadow of \\p CopyOp&#91;NumUsedElements:&#93; to \\p</span></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Out&#91;NumUsedElements:&#93;. This means that intrinsics without \\p CopyOp always</span></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// return a fully initialized value.</span></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8ec2e744dff018b81c0eb2a7e9ea4e2b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8ec2e744dff018b81c0eb2a7e9ea4e2b">handleVectorConvertIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumUsedElements,</span></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasRoundingMode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopyOp, &#42;ConvertOp;</span></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!HasRoundingMode ||</span></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() - 1))) &amp;&amp;</span></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Invalid rounding mode&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() - HasRoundingMode) &#123;</span></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 2:</span></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><span class="doxyHighlight">      CopyOp = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><span class="doxyHighlight">      ConvertOp = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 1:</span></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><span class="doxyHighlight">      ConvertOp = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148"><span class="doxyHighlight">      CopyOp = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Cvt intrinsic with unsupported number of arguments.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The first &#42;NumUsedElements&#42; elements of ConvertOp are converted to the</span></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// same number of output elements. The rest of the output is copied from</span></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// CopyOp, or (if not available) filled with zeroes.</span></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Combine shadow for elements of ConvertOp that are used in this operation,</span></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and insert a check.</span></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: consider propagating shadow of ConvertOp, at least in the case of</span></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// int-&gt;any conversion.</span></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ConvertShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(ConvertOp);</span></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AggShadow = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ConvertOp-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) &#123;</span></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><span class="doxyHighlight">      AggShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(</span></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"><span class="doxyHighlight">          ConvertShadow, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), 0));</span></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 1; i &lt; NumUsedElements; ++i) &#123;</span></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;MoreShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(</span></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><span class="doxyHighlight">            ConvertShadow, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), i));</span></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><span class="doxyHighlight">        AggShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(AggShadow, MoreShadow);</span></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><span class="doxyHighlight">      AggShadow = ConvertShadow;</span></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AggShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>());</span></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(AggShadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(ConvertOp), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Build result shadow by zero-filling parts of CopyOp shadow that come from</span></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ConvertOp.</span></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CopyOp) &#123;</span></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CopyOp-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>() == <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</span></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CopyOp-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>());</span></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ResultShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(CopyOp);</span></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;EltTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(ResultShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getElementType();</span></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0; i &lt; NumUsedElements; ++i) &#123;</span></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><span class="doxyHighlight">        ResultShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a17320ebd77e834577a5ebd1063039625">CreateInsertElement</a>(</span></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186"><span class="doxyHighlight">            ResultShadow, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(EltTy),</span></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><span class="doxyHighlight">            ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), i));</span></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ResultShadow);</span></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(CopyOp));</span></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Given a scalar or vector, extract lower 64 bits (or less), and return all</span></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// zeroes if it is zero, and all ones otherwise.</span></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a160d793aacc4ffadcdf86eddbf401c69"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a160d793aacc4ffadcdf86eddbf401c69">Lower64ShadowExtend</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;S, <a href="/docs/api/classes/llvm/type">Type</a> &#42;T) &#123;</span></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</span></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201"><span class="doxyHighlight">      S = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69">CreateShadowCast</a>(IRB, S, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), </span><span class="doxyHighlightComment">/&#42; Signed &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() &lt;= 64);</span></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(S));</span></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69">CreateShadowCast</a>(IRB, S2, T, </span><span class="doxyHighlightComment">/&#42; Signed &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Given a vector, extract its first element, and return all</span></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// zeroes if it is zero, and all ones otherwise.</span></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a174a52b2885896fbf86e1250573168dc"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a174a52b2885896fbf86e1250573168dc">LowerElementShadowExtend</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;S, <a href="/docs/api/classes/llvm/type">Type</a> &#42;T) &#123;</span></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(S, (uint64&#95;t)0);</span></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>));</span></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69">CreateShadowCast</a>(IRB, S2, T, </span><span class="doxyHighlightComment">/&#42; Signed &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a02e1c458e5c141b448867b728af11ae9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a02e1c458e5c141b448867b728af11ae9">VariableShadowExtend</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;S) &#123;</span></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;T = S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(T-&gt;isVectorTy());</span></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(S));</span></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(S2, T);</span></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument vector shift intrinsic.</span></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function instruments intrinsics like int&#95;x86&#95;avx2&#95;psll&#95;w.</span></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Intrinsic shifts %In by %ShiftSize bits.</span></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// %ShiftSize may be a vector. In that case the lower 64 bits determine shift</span></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// size, and the rest is ignored. Behavior is defined even if shift size is</span></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// greater than register (or field) width.</span></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c328e6af190112474f8c694ccb59dc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c328e6af190112474f8c694ccb59dc">handleVectorShiftIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Variable) &#123;</span></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() == 2);</span></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If any of the S2 bits are poisoned, the whole thing is poisoned.</span></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Otherwise perform the same shift on S1.</span></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2Conv = Variable ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a02e1c458e5c141b448867b728af11ae9">VariableShadowExtend</a>(IRB, S2)</span></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><span class="doxyHighlight">                             : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a160d793aacc4ffadcdf86eddbf401c69">Lower64ShadowExtend</a>(IRB, S2, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V1 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V2 = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shift = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFunctionType(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCalledOperand(),</span></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241"><span class="doxyHighlight">                                  &#123;IRB.CreateBitCast(S1, V1-&gt;getType()), V2&#125;);</span></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><span class="doxyHighlight">    Shift = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(Shift, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shift, S2Conv));</span></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Get an MMX-sized vector type.</span></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e">getMMXVectorTy</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSizeInBits) &#123;</span></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> X86&#95;MMXSizeInBits = 64;</span></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSizeInBits != 0 &amp;&amp; (X86&#95;MMXSizeInBits % EltSizeInBits) == 0 &amp;&amp;</span></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Illegal MMX vector element size&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/fixedvectortype/#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(<a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, EltSizeInBits),</span></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><span class="doxyHighlight">                                X86&#95;MMXSizeInBits / EltSizeInBits);</span></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Returns a signed counterpart for an (un)signed-saturate-and-pack</span></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// intrinsic.</span></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac33a8706b2108c930e0f7befe6942e29"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac33a8706b2108c930e0f7befe6942e29">getSignedPackIntrinsic</a>(<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> </span><span class="doxyHighlightKeywordType">id</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">id</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packsswb&#95;128:</span></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packuswb&#95;128:</span></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packsswb&#95;128;</span></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packssdw&#95;128:</span></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;packusdw:</span></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packssdw&#95;128;</span></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packsswb:</span></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packuswb:</span></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packsswb;</span></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packssdw:</span></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packusdw:</span></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packssdw;</span></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275"></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packsswb:</span></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packuswb:</span></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packsswb;</span></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packssdw:</span></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packssdw;</span></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;unexpected intrinsic id&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument vector pack intrinsic.</span></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function instruments intrinsics like x86&#95;mmx&#95;packsswb, that</span></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// packs elements of 2 input vectors into half as many bits with saturation.</span></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Shadow is propagated with the signed variant of the same intrinsic applied</span></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to sext(Sa != zeroinitializer), sext(Sb != zeroinitializer).</span></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// MMXEltSizeInBits is used only for x86mmx arguments.</span></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acaaee38930abb5a8c5d6ff71045eda30"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acaaee38930abb5a8c5d6ff71045eda30">handleVectorPackIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><span class="doxyHighlight">                                 </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MMXEltSizeInBits = 0) &#123;</span></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() == 2);</span></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType()-&gt;isVectorTy());</span></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// SExt and ICmpNE below must apply to individual elements of input vectors.</span></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// In case of x86mmx arguments, cast them to appropriate vector types and</span></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// back.</span></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;T =</span></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><span class="doxyHighlight">        MMXEltSizeInBits ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e">getMMXVectorTy</a>(MMXEltSizeInBits) : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>-&gt;getType();</span></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MMXEltSizeInBits) &#123;</span></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, T);</span></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><span class="doxyHighlight">      S2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S2, T);</span></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S1&#95;ext =</span></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(T)), T);</span></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S2&#95;ext =</span></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S2, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(T)), T);</span></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MMXEltSizeInBits) &#123;</span></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><span class="doxyHighlight">      S1&#95;ext = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S1&#95;ext, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e">getMMXVectorTy</a>(64));</span></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><span class="doxyHighlight">      S2&#95;ext = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S2&#95;ext, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e">getMMXVectorTy</a>(64));</span></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac33a8706b2108c930e0f7befe6942e29">getSignedPackIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID()),</span></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321"><span class="doxyHighlight">                                   &#123;&#125;, &#123;S1&#95;ext, S2&#95;ext&#125;, </span><span class="doxyHighlightComment">/&#42;FMFSource=&#42;/</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><span class="doxyHighlight">                                   </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;vector&#95;pack&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MMXEltSizeInBits)</span></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><span class="doxyHighlight">      S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Convert &#96;Mask&#96; into &#96;&lt;n x i1&gt;&#96;.</span></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a850fb4fba9984eb18393c06aa6fe3a51"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a850fb4fba9984eb18393c06aa6fe3a51">createDppMask</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Mask) &#123;</span></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 4&gt;</a> R(Width);</span></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;M : R) &#123;</span></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><span class="doxyHighlight">      M = <a href="/docs/api/classes/llvm/constantint/#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getContext(), Mask &amp; 1);</span></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><span class="doxyHighlight">      Mask &gt;&gt;= 1;</span></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantvector/#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(R);</span></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Calculate output shadow as array of booleans &#96;&lt;n x i1&gt;&#96;, assuming if any</span></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// arg is poisoned, entire dot product is poisoned.</span></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a51a05a00df99aa3401385eb46a6e5ae1"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a51a05a00df99aa3401385eb46a6e5ae1">findDppPoisonedOutput</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;S, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SrcMask,</span></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstMask) &#123;</span></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width =</span></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getNumElements();</span></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a850fb4fba9984eb18393c06aa6fe3a51">createDppMask</a>(Width, SrcMask), S,</span></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()));</span></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SElem = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a784d99f22cf1632638a2fa652e7723d1">CreateOrReduce</a>(S);</span></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsClean = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac9843b4f9f9cb144c608c48785a394a8">CreateIsNull</a>(SElem, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msdpp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstMaskV = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a850fb4fba9984eb18393c06aa6fe3a51">createDppMask</a>(Width, DstMask);</span></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(</span></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><span class="doxyHighlight">        IsClean, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(DstMaskV-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()), DstMaskV);</span></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See &#96;Intel Intrinsics Guide&#96; for &#96;&#95;dp&#95;p&#42;&#96; instructions.</span></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 2 and 4 element versions produce single scalar of dot product, and then</span></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// puts it into elements of output vector, selected by 4 lowest bits of the</span></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// mask. Top 4 bits of the mask control which elements of input to use for dot</span></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// product.</span></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 8 element version mask still has only 4 bit for input, and 4 bit for output</span></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// mask. According to the spec it just operates as 4 element version on first</span></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 4 elements of inputs and output, and then on last 4 elements of inputs and</span></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// output.</span></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa28fe1a3de7cc0e732f5d7ee1dc5adbd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa28fe1a3de7cc0e732f5d7ee1dc5adbd">handleDppIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369"></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(S0, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#a22eabd3566ae5f32cb6f594f4f343399">S1</a>);</span></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width =</span></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getNumElements();</span></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Width == 2 || Width == 4 || Width == 8);</span></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Mask = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2))-&gt;getZExtValue();</span></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SrcMask = Mask &gt;&gt; 4;</span></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstMask = Mask &amp; 0xf;</span></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Calculate shadow as &#96;&lt;n x i1&gt;&#96;.</span></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SI1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a51a05a00df99aa3401385eb46a6e5ae1">findDppPoisonedOutput</a>(IRB, S, SrcMask, DstMask);</span></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Width == 8) &#123;</span></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// First 4 elements of shadow are already calculated. &#96;makeDppShadow&#96;</span></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// operats on 32 bit masks, so we can just shift masks, and repeat.</span></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><span class="doxyHighlight">      SI1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(</span></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><span class="doxyHighlight">          SI1, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a51a05a00df99aa3401385eb46a6e5ae1">findDppPoisonedOutput</a>(IRB, S, SrcMask &lt;&lt; 4, DstMask &lt;&lt; 4));</span></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Extend to real size of shadow, poisoning either all or none bits of an</span></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// element.</span></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(SI1, S-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msdpp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a40a1fc4e57a69c562fb3d215eaa71280"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a40a1fc4e57a69c562fb3d215eaa71280">convertBlendvToSelectMask</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abfaba717423054f99dee516c7673db49">CreateAppToShadowCast</a>(IRB, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/fixedvectortype">FixedVectorType</a> &#42;FVT = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getType());</span></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ElSize = FVT-&gt;<a href="/docs/api/classes/llvm/vectortype/#afdce715c901d62e2c1367a0ff5248175">getElementType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</span></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#adc6a2686b807c18e4a7f7fc58e68d423">CreateAShr</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, ElSize - 1);</span></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><span class="doxyHighlight">    FVT = <a href="/docs/api/classes/llvm/fixedvectortype/#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>(), FVT-&gt;<a href="/docs/api/classes/llvm/fixedvectortype/#a1893caf878859959ba6a3d5442ef1439">getNumElements</a>());</span></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab5b4acb0f45af3f2308cad1468804f1e">CreateTrunc</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, FVT);</span></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#96;blendv(f, t, c)&#96; is effectively &#96;select(c&#91;top&#95;bit&#93;, t, f)&#96;.</span></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af57d015c7e57a42f4a73d6414d8d0453"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af57d015c7e57a42f4a73d6414d8d0453">handleBlendvIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(2);</span></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;T = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</span></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</span></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sc = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 2);</span></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Oc = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><span class="doxyHighlight">    &#123;</span></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Extract top bit from condition and its shadow.</span></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a40a1fc4e57a69c562fb3d215eaa71280">convertBlendvToSelectMask</a>(IRB, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><span class="doxyHighlight">      Sc = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a40a1fc4e57a69c562fb3d215eaa71280">convertBlendvToSelectMask</a>(IRB, Sc);</span></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, Sc);</span></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, Oc);</span></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a107ed4d1a9a7fc30bf59d4129235bada">handleSelectLikeInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, T, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>);</span></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428"></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument sum-of-absolute-differences intrinsic.</span></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac03d3c26f38bacbd611de31932ef80b4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac03d3c26f38bacbd611de31932ef80b4">handleVectorSadIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsMMX = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SignificantBitsPerResultElement = 16;</span></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ResTy = IsMMX ? <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.C, 64) : <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</span></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ZeroBitsPerResultElement =</span></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><span class="doxyHighlight">        ResTy-&gt;<a href="/docs/api/classes/llvm/type/#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - SignificantBitsPerResultElement;</span></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S, ResTy);</span></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ResTy)),</span></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><span class="doxyHighlight">                       ResTy);</span></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5849d19e500f8c6713ec44889058f424">CreateLShr</a>(S, ZeroBitsPerResultElement);</span></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument multiply-add intrinsic.</span></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a60a1bcee02000668d052f9d696ada2e9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a60a1bcee02000668d052f9d696ada2e9">handleVectorPmaddIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><span class="doxyHighlight">                                  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MMXEltSizeInBits = 0) &#123;</span></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ResTy =</span></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><span class="doxyHighlight">        MMXEltSizeInBits ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe3f2bc12df17a7c061c315f7bfcf12e">getMMXVectorTy</a>(MMXEltSizeInBits &#42; 2) : <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</span></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S, ResTy);</span></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ResTy)),</span></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><span class="doxyHighlight">                       ResTy);</span></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(S, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument compare-packed intrinsic.</span></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Basically, an or followed by sext(icmp ne 0) to end up with all-zeros or</span></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// all-ones shadow.</span></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2dedad065b777ac076ac9f2b3dc8c013"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2dedad065b777ac076ac9f2b3dc8c013">handleVectorComparePackedIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ResTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(</span></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(S0, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ResTy)), ResTy);</span></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument compare-scalar intrinsic.</span></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This handles both cmp&#42; intrinsics which return the result in the first</span></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// element of a vector, and comi&#42; which return the result as i32.</span></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3fc06177748e14bf8ef287dc4347dde3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3fc06177748e14bf8ef287dc4347dde3">handleVectorCompareScalarIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a174a52b2885896fbf86e1250573168dc">LowerElementShadowExtend</a>(IRB, S0, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument generic vector reduction intrinsics</span></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// by ORing together all their fields.</span></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a14778d7f19c6c8582a65cb2d05b541ce"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a14778d7f19c6c8582a65cb2d05b541ce">handleVectorReduceIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a784d99f22cf1632638a2fa652e7723d1">CreateOrReduce</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument vector.reduce.or intrinsic.</span></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Valid (non-poisoned) set bits in the operand pull low the</span></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// corresponding shadow bits.</span></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae160aa4ec35fca7aaa0f75a8526cb3fb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae160aa4ec35fca7aaa0f75a8526cb3fb">handleVectorReduceOrIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OperandShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OperandUnsetBits = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</span></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OperandUnsetOrPoison = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(OperandUnsetBits, OperandShadow);</span></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bit N is clean if any field&#39;s bit N is 1 and unpoison</span></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OutShadowMask = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3cfdb164300aa232622852961a2eb7b5">CreateAndReduce</a>(OperandUnsetOrPoison);</span></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Otherwise, it is clean if every field&#39;s bit N is unpoison</span></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OrShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a784d99f22cf1632638a2fa652e7723d1">CreateOrReduce</a>(OperandShadow);</span></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OutShadowMask, OrShadow);</span></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument vector.reduce.and intrinsic.</span></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Valid (non-poisoned) unset bits in the operand pull down the</span></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// corresponding shadow bits.</span></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8abeeb6d127be621e8ee8d9d667503b2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8abeeb6d127be621e8ee8d9d667503b2">handleVectorReduceAndIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OperandShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OperandSetOrPoison = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), OperandShadow);</span></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bit N is clean if any field&#39;s bit N is 0 and unpoison</span></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OutShadowMask = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3cfdb164300aa232622852961a2eb7b5">CreateAndReduce</a>(OperandSetOrPoison);</span></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Otherwise, it is clean if every field&#39;s bit N is unpoison</span></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OrShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a784d99f22cf1632638a2fa652e7723d1">CreateOrReduce</a>(OperandShadow);</span></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OutShadowMask, OrShadow);</span></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7a310b77dacdbac9c6bfd285af705de5"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7a310b77dacdbac9c6bfd285af705de5">handleStmxcsr</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>();</span></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr =</span></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, Ty, <a href="/docs/api/structs/llvm/align">Align</a>(1), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">).first;</span></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(Ty), ShadowPtr);</span></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac621d92c3438d32c257d3e193ed64c2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac621d92c3438d32c257d3e193ed64c2">handleLdmxcsr</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a61ccc8f79b82b8f106096534fddbdd03">InsertChecks</a>)</span></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>();</span></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr, &#42;OriginPtr;</span></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><span class="doxyHighlight">    std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Addr, IRB, Ty, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(Ty, ShadowPtr, Alignment, </span><span class="doxyHighlightStringLiteral">&quot;&#95;ldmxcsr&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr)</span></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><span class="doxyHighlight">                                    : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>();</span></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Shadow, Origin, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8cc553ff446a1ab299f2d3cd73e9a544"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8cc553ff446a1ab299f2d3cd73e9a544">handleMaskedExpandLoad</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> <a href="/docs/api/structs/llvm/align">Align</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParamAlign(0);</span></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;PassThru = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2);</span></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElementShadowTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(ShadowTy)-&gt;getElementType();</span></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtr, OriginPtr&#93; =</span></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, IRB, ElementShadowTy, <a href="/docs/api/structs/llvm/align">Align</a>, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow =</span></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad878957c30eb65983e09b60edb0e1a1b">CreateMaskedExpandLoad</a>(ShadowTy, ShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>, Mask,</span></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"><span class="doxyHighlight">                                   <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PassThru), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msmaskedexpload&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Store origins.</span></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a512e6c35c0ac3187be4445bab50b766e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a512e6c35c0ac3187be4445bab50b766e">handleMaskedCompressStore</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Values = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> <a href="/docs/api/structs/llvm/align">Align</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParamAlign(1);</span></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2);</span></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Values);</span></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElementShadowTy =</span></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(Values-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getElementType());</span></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtr, OriginPtrs&#93; =</span></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, IRB, ElementShadowTy, <a href="/docs/api/structs/llvm/align">Align</a>, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a2001dcf6278f9e7e10b895d060d15abb">CreateMaskedCompressStore</a>(Shadow, ShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>, Mask);</span></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Store origins.</span></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a759cdeca788eae085f33511a111de4e8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a759cdeca788eae085f33511a111de4e8">handleMaskedGather</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Ptrs = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment(</span></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1))-&gt;getZExtValue());</span></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2);</span></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;PassThru = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(3);</span></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635"></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrsShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(Ptrs);</span></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;MaskedPtrShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(</span></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><span class="doxyHighlight">          Mask, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Ptrs), <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>((PtrsShadowTy)),</span></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><span class="doxyHighlight">          </span><span class="doxyHighlightStringLiteral">&quot;&#95;msmaskedptrs&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(MaskedPtrShadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Ptrs), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElementShadowTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(ShadowTy)-&gt;getElementType();</span></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtrs, OriginPtrs&#93; = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><span class="doxyHighlight">        Ptrs, IRB, ElementShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow =</span></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#afa922043d31aa2d3410fe0be8791b795">CreateMaskedGather</a>(ShadowTy, ShadowPtrs, Alignment, Mask,</span></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><span class="doxyHighlight">                               <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PassThru), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msmaskedgather&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Store origins.</span></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5056eaa4a9d5c87c3566577a0736c47d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5056eaa4a9d5c87c3566577a0736c47d">handleMaskedScatter</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Values = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Ptrs = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment(</span></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2))-&gt;getZExtValue());</span></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(3);</span></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrsShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(Ptrs);</span></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;MaskedPtrShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(</span></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><span class="doxyHighlight">          Mask, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Ptrs), <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>((PtrsShadowTy)),</span></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><span class="doxyHighlight">          </span><span class="doxyHighlightStringLiteral">&quot;&#95;msmaskedptrs&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(MaskedPtrShadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Ptrs), &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Values);</span></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElementShadowTy =</span></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(Values-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getElementType());</span></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtrs, OriginPtrs&#93; = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><span class="doxyHighlight">        Ptrs, IRB, ElementShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aee07a8623893cdad858a3b5f77354375">CreateMaskedScatter</a>(Shadow, ShadowPtrs, Alignment, Mask);</span></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Store origin.</span></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Intrinsic::masked&#95;store</span></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Note: handleAVXMaskedStore handles AVX/AVX2 variants, though AVX512 masked</span></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//       stores are lowered to Intrinsic::masked&#95;store.</span></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3405abbd1975b05777dc44d9089f1ece"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3405abbd1975b05777dc44d9089f1ece">handleMaskedStore</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;V = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment(</span></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2))-&gt;getZExtValue());</span></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(3);</span></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(V);</span></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr;</span></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginPtr;</span></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><span class="doxyHighlight">    std::tie(ShadowPtr, OriginPtr) = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, IRB, Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aad07e3e0fa03f6c780e13d924325d8d0">CreateMaskedStore</a>(Shadow, ShadowPtr, Alignment, Mask);</span></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52">paintOrigin</a>(IRB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(V), OriginPtr,</span></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><span class="doxyHighlight">                <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()),</span></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><span class="doxyHighlight">                std::max(Alignment, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>));</span></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Intrinsic::masked&#95;load</span></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Note: handleAVXMaskedLoad handles AVX/AVX2 variants, though AVX512 masked</span></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//       loads are lowered to Intrinsic::masked&#95;load.</span></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a454e5d8d7e12243f5e63c713fdd488f4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a454e5d8d7e12243f5e63c713fdd488f4">handleMaskedLoad</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment(</span></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1))-&gt;getZExtValue());</span></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2);</span></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;PassThru = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(3);</span></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr, &#42;OriginPtr;</span></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><span class="doxyHighlight">    std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, IRB, ShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a483f68557374e8fc58f8a294e7f1268e">CreateMaskedLoad</a>(ShadowTy, ShadowPtr, Alignment, Mask,</span></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><span class="doxyHighlight">                                       <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PassThru), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msmaskedld&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Choose between PassThru&#39;s and the loaded value&#39;s origins.</span></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;MaskedPassThruShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(</span></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(PassThru), IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7704bf68951054ffeb3efe605750e2d9">CreateNeg</a>(Mask), ShadowTy));</span></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NotNull = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(MaskedPassThruShadow, IRB, </span><span class="doxyHighlightStringLiteral">&quot;&#95;mscmp&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;PtrOrigin = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, OriginPtr);</span></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(NotNull, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(PassThru), PtrOrigin);</span></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Origin);</span></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// e.g., void @llvm.x86.avx.maskstore.ps.256(ptr, &lt;8 x i32&gt;, &lt;8 x float&gt;)</span></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                                           dst  mask       src</span></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// AVX512 masked stores are lowered to Intrinsic::masked&#95;load and are handled</span></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// by handleMaskedStore.</span></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function handles AVX and AVX2 masked stores; these use the MSBs of a</span></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vector of integers, unlike the LLVM masked intrinsics, which require a</span></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vector of booleans. X86InstCombineIntrinsic.cpp::simplifyX86MaskedLoad</span></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// mentions that the x86 backend does not know how to efficiently convert</span></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// from a vector of booleans back into the AVX mask format; therefore, they</span></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (and we) do not reduce AVX/AVX2 masked intrinsics into LLVM masked</span></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// intrinsics.</span></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abba654ce68a6aba9f7cbd731b0917877"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abba654ce68a6aba9f7cbd731b0917877">handleAVXMaskedStore</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"></CodeLine>
<Link id="l03789" /><CodeLine lineNumber="3789"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Dst = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03790" /><CodeLine lineNumber="3790"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Dst-&gt;getType()-&gt;isPointerTy() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Destination is not a pointer!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03791" /><CodeLine lineNumber="3791"></CodeLine>
<Link id="l03792" /><CodeLine lineNumber="3792"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03793" /><CodeLine lineNumber="3793"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(Mask-&gt;getType()) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Mask is not a vector!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03794" /><CodeLine lineNumber="3794"></CodeLine>
<Link id="l03795" /><CodeLine lineNumber="3795"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Src = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2);</span></CodeLine>
<Link id="l03796" /><CodeLine lineNumber="3796"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(Src-&gt;getType()) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Source is not a vector!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03797" /><CodeLine lineNumber="3797"></CodeLine>
<Link id="l03798" /><CodeLine lineNumber="3798"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l03799" /><CodeLine lineNumber="3799"></CodeLine>
<Link id="l03800" /><CodeLine lineNumber="3800"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Src);</span></CodeLine>
<Link id="l03801" /><CodeLine lineNumber="3801"></CodeLine>
<Link id="l03802" /><CodeLine lineNumber="3802"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03803" /><CodeLine lineNumber="3803"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Dst, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03804" /><CodeLine lineNumber="3804"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03805" /><CodeLine lineNumber="3805"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03806" /><CodeLine lineNumber="3806"></CodeLine>
<Link id="l03807" /><CodeLine lineNumber="3807"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstShadowPtr;</span></CodeLine>
<Link id="l03808" /><CodeLine lineNumber="3808"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstOriginPtr;</span></CodeLine>
<Link id="l03809" /><CodeLine lineNumber="3809"><span class="doxyHighlight">    std::tie(DstShadowPtr, DstOriginPtr) = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l03810" /><CodeLine lineNumber="3810"><span class="doxyHighlight">        Dst, IRB, SrcShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03811" /><CodeLine lineNumber="3811"></CodeLine>
<Link id="l03812" /><CodeLine lineNumber="3812"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Value &#42;, 2&gt;</a> ShadowArgs;</span></CodeLine>
<Link id="l03813" /><CodeLine lineNumber="3813"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, DstShadowPtr);</span></CodeLine>
<Link id="l03814" /><CodeLine lineNumber="3814"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, Mask);</span></CodeLine>
<Link id="l03815" /><CodeLine lineNumber="3815"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The intrinsic may require floating-point but shadows can be arbitrary</span></CodeLine>
<Link id="l03816" /><CodeLine lineNumber="3816"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// bit patterns, of which some would be interpreted as &quot;invalid&quot;</span></CodeLine>
<Link id="l03817" /><CodeLine lineNumber="3817"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// floating-point values (NaN etc.); we assume the intrinsic will happily</span></CodeLine>
<Link id="l03818" /><CodeLine lineNumber="3818"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// copy them.</span></CodeLine>
<Link id="l03819" /><CodeLine lineNumber="3819"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(SrcShadow, Src-&gt;getType()));</span></CodeLine>
<Link id="l03820" /><CodeLine lineNumber="3820"></CodeLine>
<Link id="l03821" /><CodeLine lineNumber="3821"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI =</span></CodeLine>
<Link id="l03822" /><CodeLine lineNumber="3822"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID(), ShadowArgs);</span></CodeLine>
<Link id="l03823" /><CodeLine lineNumber="3823"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CI);</span></CodeLine>
<Link id="l03824" /><CodeLine lineNumber="3824"></CodeLine>
<Link id="l03825" /><CodeLine lineNumber="3825"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l03826" /><CodeLine lineNumber="3826"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03827" /><CodeLine lineNumber="3827"></CodeLine>
<Link id="l03828" /><CodeLine lineNumber="3828"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Approximation only</span></CodeLine>
<Link id="l03829" /><CodeLine lineNumber="3829"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l03830" /><CodeLine lineNumber="3830"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a4d9b426f332b379758b891f032f85d52">paintOrigin</a>(IRB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(Src), DstOriginPtr,</span></CodeLine>
<Link id="l03831" /><CodeLine lineNumber="3831"><span class="doxyHighlight">                <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(SrcShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()),</span></CodeLine>
<Link id="l03832" /><CodeLine lineNumber="3832"><span class="doxyHighlight">                std::max(Alignment, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>));</span></CodeLine>
<Link id="l03833" /><CodeLine lineNumber="3833"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03834" /><CodeLine lineNumber="3834"></CodeLine>
<Link id="l03835" /><CodeLine lineNumber="3835"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// e.g., &lt;8 x float&gt; @llvm.x86.avx.maskload.ps.256(ptr, &lt;8 x i32&gt;)</span></CodeLine>
<Link id="l03836" /><CodeLine lineNumber="3836"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//       return                                    src  mask</span></CodeLine>
<Link id="l03837" /><CodeLine lineNumber="3837"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03838" /><CodeLine lineNumber="3838"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Masked-off values are replaced with 0, which conveniently also represents</span></CodeLine>
<Link id="l03839" /><CodeLine lineNumber="3839"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// initialized memory.</span></CodeLine>
<Link id="l03840" /><CodeLine lineNumber="3840"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03841" /><CodeLine lineNumber="3841"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// AVX512 masked stores are lowered to Intrinsic::masked&#95;load and are handled</span></CodeLine>
<Link id="l03842" /><CodeLine lineNumber="3842"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// by handleMaskedStore.</span></CodeLine>
<Link id="l03843" /><CodeLine lineNumber="3843"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03844" /><CodeLine lineNumber="3844"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We do not combine this with handleMaskedLoad; see comment in</span></CodeLine>
<Link id="l03845" /><CodeLine lineNumber="3845"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// handleAVXMaskedStore for the rationale.</span></CodeLine>
<Link id="l03846" /><CodeLine lineNumber="3846"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03847" /><CodeLine lineNumber="3847"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This is subtly different than handleIntrinsicByApplyingToShadow(I, 1)</span></CodeLine>
<Link id="l03848" /><CodeLine lineNumber="3848"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// because we need to apply getShadowOriginPtr, not getShadow, to the first</span></CodeLine>
<Link id="l03849" /><CodeLine lineNumber="3849"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// parameter.</span></CodeLine>
<Link id="l03850" /><CodeLine lineNumber="3850" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a048c7023875711345d33899f3a59f3e2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a048c7023875711345d33899f3a59f3e2">handleAVXMaskedLoad</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03851" /><CodeLine lineNumber="3851"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03852" /><CodeLine lineNumber="3852"></CodeLine>
<Link id="l03853" /><CodeLine lineNumber="3853"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Src = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l03854" /><CodeLine lineNumber="3854"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Src-&gt;getType()-&gt;isPointerTy() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Source is not a pointer!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03855" /><CodeLine lineNumber="3855"></CodeLine>
<Link id="l03856" /><CodeLine lineNumber="3856"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1);</span></CodeLine>
<Link id="l03857" /><CodeLine lineNumber="3857"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(Mask-&gt;getType()) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Mask is not a vector!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03858" /><CodeLine lineNumber="3858"></CodeLine>
<Link id="l03859" /><CodeLine lineNumber="3859"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</span></CodeLine>
<Link id="l03860" /><CodeLine lineNumber="3860"></CodeLine>
<Link id="l03861" /><CodeLine lineNumber="3861"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>) &#123;</span></CodeLine>
<Link id="l03862" /><CodeLine lineNumber="3862"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Mask, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03863" /><CodeLine lineNumber="3863"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03864" /><CodeLine lineNumber="3864"></CodeLine>
<Link id="l03865" /><CodeLine lineNumber="3865"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;SrcShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(Src);</span></CodeLine>
<Link id="l03866" /><CodeLine lineNumber="3866"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcShadowPtr, &#42;SrcOriginPtr;</span></CodeLine>
<Link id="l03867" /><CodeLine lineNumber="3867"><span class="doxyHighlight">    std::tie(SrcShadowPtr, SrcOriginPtr) =</span></CodeLine>
<Link id="l03868" /><CodeLine lineNumber="3868"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(Src, IRB, SrcShadowTy, Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03869" /><CodeLine lineNumber="3869"></CodeLine>
<Link id="l03870" /><CodeLine lineNumber="3870"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Value &#42;, 2&gt;</a> ShadowArgs;</span></CodeLine>
<Link id="l03871" /><CodeLine lineNumber="3871"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, SrcShadowPtr);</span></CodeLine>
<Link id="l03872" /><CodeLine lineNumber="3872"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, Mask);</span></CodeLine>
<Link id="l03873" /><CodeLine lineNumber="3873"></CodeLine>
<Link id="l03874" /><CodeLine lineNumber="3874"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI =</span></CodeLine>
<Link id="l03875" /><CodeLine lineNumber="3875"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID(), ShadowArgs);</span></CodeLine>
<Link id="l03876" /><CodeLine lineNumber="3876"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The intrinsic may require floating-point but shadows can be arbitrary</span></CodeLine>
<Link id="l03877" /><CodeLine lineNumber="3877"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// bit patterns, of which some would be interpreted as &quot;invalid&quot;</span></CodeLine>
<Link id="l03878" /><CodeLine lineNumber="3878"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// floating-point values (NaN etc.); we assume the intrinsic will happily</span></CodeLine>
<Link id="l03879" /><CodeLine lineNumber="3879"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// copy them.</span></CodeLine>
<Link id="l03880" /><CodeLine lineNumber="3880"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(CI, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</span></CodeLine>
<Link id="l03881" /><CodeLine lineNumber="3881"></CodeLine>
<Link id="l03882" /><CodeLine lineNumber="3882"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l03883" /><CodeLine lineNumber="3883"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03884" /><CodeLine lineNumber="3884"></CodeLine>
<Link id="l03885" /><CodeLine lineNumber="3885"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The &quot;pass-through&quot; value is always zero (initialized). To the extent</span></CodeLine>
<Link id="l03886" /><CodeLine lineNumber="3886"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that that results in initialized aligned 4-byte chunks, the origin value</span></CodeLine>
<Link id="l03887" /><CodeLine lineNumber="3887"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is ignored. It is therefore correct to simply copy the origin from src.</span></CodeLine>
<Link id="l03888" /><CodeLine lineNumber="3888"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;PtrSrcOrigin = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, SrcOriginPtr);</span></CodeLine>
<Link id="l03889" /><CodeLine lineNumber="3889"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PtrSrcOrigin);</span></CodeLine>
<Link id="l03890" /><CodeLine lineNumber="3890"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03891" /><CodeLine lineNumber="3891"></CodeLine>
<Link id="l03892" /><CodeLine lineNumber="3892"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument BMI / BMI2 intrinsics.</span></CodeLine>
<Link id="l03893" /><CodeLine lineNumber="3893"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// All of these intrinsics are Z = I(X, Y)</span></CodeLine>
<Link id="l03894" /><CodeLine lineNumber="3894"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// where the types of all operands and the result match, and are either i32 or</span></CodeLine>
<Link id="l03895" /><CodeLine lineNumber="3895"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// i64. The following instrumentation happens to work for all of them:</span></CodeLine>
<Link id="l03896" /><CodeLine lineNumber="3896"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Sz = I(Sx, Y) | (sext (Sy != 0))</span></CodeLine>
<Link id="l03897" /><CodeLine lineNumber="3897" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a422552f3cad093347a5f83d234925e9d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a422552f3cad093347a5f83d234925e9d">handleBmiIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03898" /><CodeLine lineNumber="3898"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03899" /><CodeLine lineNumber="3899"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03900" /><CodeLine lineNumber="3900"></CodeLine>
<Link id="l03901" /><CodeLine lineNumber="3901"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If any bit of the mask operand is poisoned, then the whole thing is.</span></CodeLine>
<Link id="l03902" /><CodeLine lineNumber="3902"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SMask = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03903" /><CodeLine lineNumber="3903"><span class="doxyHighlight">    SMask = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(SMask, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(ShadowTy)),</span></CodeLine>
<Link id="l03904" /><CodeLine lineNumber="3904"><span class="doxyHighlight">                           ShadowTy);</span></CodeLine>
<Link id="l03905" /><CodeLine lineNumber="3905"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Apply the same intrinsic to the shadow of the first operand.</span></CodeLine>
<Link id="l03906" /><CodeLine lineNumber="3906"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCalledFunction(),</span></CodeLine>
<Link id="l03907" /><CodeLine lineNumber="3907"><span class="doxyHighlight">                              &#123;getShadow(&amp;I, 0), I.getOperand(1)&#125;);</span></CodeLine>
<Link id="l03908" /><CodeLine lineNumber="3908"><span class="doxyHighlight">    S = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(SMask, S);</span></CodeLine>
<Link id="l03909" /><CodeLine lineNumber="3909"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, S);</span></CodeLine>
<Link id="l03910" /><CodeLine lineNumber="3910"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03911" /><CodeLine lineNumber="3911"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03912" /><CodeLine lineNumber="3912"></CodeLine>
<Link id="l03913" /><CodeLine lineNumber="3913" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a97a3c88ff7689bdb2a981cf1e8710273"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;int, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a97a3c88ff7689bdb2a981cf1e8710273">getPclmulMask</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OddElements) &#123;</span></CodeLine>
<Link id="l03914" /><CodeLine lineNumber="3914"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;int, 8&gt;</a> Mask;</span></CodeLine>
<Link id="l03915" /><CodeLine lineNumber="3915"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = OddElements ? 1 : 0; <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> &lt; Width; <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> += 2) &#123;</span></CodeLine>
<Link id="l03916" /><CodeLine lineNumber="3916"><span class="doxyHighlight">      Mask.append(2, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</span></CodeLine>
<Link id="l03917" /><CodeLine lineNumber="3917"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03918" /><CodeLine lineNumber="3918"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Mask;</span></CodeLine>
<Link id="l03919" /><CodeLine lineNumber="3919"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03920" /><CodeLine lineNumber="3920"></CodeLine>
<Link id="l03921" /><CodeLine lineNumber="3921"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument pclmul intrinsics.</span></CodeLine>
<Link id="l03922" /><CodeLine lineNumber="3922"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// These intrinsics operate either on odd or on even elements of the input</span></CodeLine>
<Link id="l03923" /><CodeLine lineNumber="3923"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vectors, depending on the constant in the 3rd argument, ignoring the rest.</span></CodeLine>
<Link id="l03924" /><CodeLine lineNumber="3924"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Replace the unused elements with copies of the used ones, ex:</span></CodeLine>
<Link id="l03925" /><CodeLine lineNumber="3925"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   (0, 1, 2, 3) -&gt; (0, 0, 2, 2) (even case)</span></CodeLine>
<Link id="l03926" /><CodeLine lineNumber="3926"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// or</span></CodeLine>
<Link id="l03927" /><CodeLine lineNumber="3927"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   (0, 1, 2, 3) -&gt; (1, 1, 3, 3) (odd case)</span></CodeLine>
<Link id="l03928" /><CodeLine lineNumber="3928"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and then apply the usual shadow combining logic.</span></CodeLine>
<Link id="l03929" /><CodeLine lineNumber="3929" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a924a1686eaef2f0a0ded248edc2bdb6c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a924a1686eaef2f0a0ded248edc2bdb6c">handlePclmulIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03930" /><CodeLine lineNumber="3930"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03931" /><CodeLine lineNumber="3931"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width =</span></CodeLine>
<Link id="l03932" /><CodeLine lineNumber="3932"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType())-&gt;getNumElements();</span></CodeLine>
<Link id="l03933" /><CodeLine lineNumber="3933"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2)) &amp;&amp;</span></CodeLine>
<Link id="l03934" /><CodeLine lineNumber="3934"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;pclmul 3rd operand must be a constant&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03935" /><CodeLine lineNumber="3935"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Imm = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(2))-&gt;getZExtValue();</span></CodeLine>
<Link id="l03936" /><CodeLine lineNumber="3936"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shuf0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa226d30eebf99ef84a0c2b1afcfc98b2">CreateShuffleVector</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0),</span></CodeLine>
<Link id="l03937" /><CodeLine lineNumber="3937"><span class="doxyHighlight">                                           <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a97a3c88ff7689bdb2a981cf1e8710273">getPclmulMask</a>(Width, Imm &amp; 0x01));</span></CodeLine>
<Link id="l03938" /><CodeLine lineNumber="3938"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shuf1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa226d30eebf99ef84a0c2b1afcfc98b2">CreateShuffleVector</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1),</span></CodeLine>
<Link id="l03939" /><CodeLine lineNumber="3939"><span class="doxyHighlight">                                           <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a97a3c88ff7689bdb2a981cf1e8710273">getPclmulMask</a>(Width, Imm &amp; 0x10));</span></CodeLine>
<Link id="l03940" /><CodeLine lineNumber="3940"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5">ShadowAndOriginCombiner</a> SOC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l03941" /><CodeLine lineNumber="3941"><span class="doxyHighlight">    SOC.<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ae8b71818798cbd6a6e93e0fccbd39bfd">Add</a>(Shuf0, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l03942" /><CodeLine lineNumber="3942"><span class="doxyHighlight">    SOC.<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#ae8b71818798cbd6a6e93e0fccbd39bfd">Add</a>(Shuf1, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1));</span></CodeLine>
<Link id="l03943" /><CodeLine lineNumber="3943"><span class="doxyHighlight">    SOC.<a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/combiner/#a554e0a120e27e722e0f2a96930041782">Done</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03944" /><CodeLine lineNumber="3944"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03945" /><CodeLine lineNumber="3945"></CodeLine>
<Link id="l03946" /><CodeLine lineNumber="3946"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument &#95;mm&#95;&#42;&#95;sd|ss intrinsics</span></CodeLine>
<Link id="l03947" /><CodeLine lineNumber="3947" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aef9ab401ce01af2ea722f41cfb8e4943"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aef9ab401ce01af2ea722f41cfb8e4943">handleUnarySdSsIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03948" /><CodeLine lineNumber="3948"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03949" /><CodeLine lineNumber="3949"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width =</span></CodeLine>
<Link id="l03950" /><CodeLine lineNumber="3950"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType())-&gt;getNumElements();</span></CodeLine>
<Link id="l03951" /><CodeLine lineNumber="3951"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa7fb55ed0b7a30342ba6da306428cae04">First</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03952" /><CodeLine lineNumber="3952"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Second = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03953" /><CodeLine lineNumber="3953"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// First element of second operand, remaining elements of first operand</span></CodeLine>
<Link id="l03954" /><CodeLine lineNumber="3954"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;int, 16&gt;</a> Mask;</span></CodeLine>
<Link id="l03955" /><CodeLine lineNumber="3955"><span class="doxyHighlight">    Mask.push&#95;back(Width);</span></CodeLine>
<Link id="l03956" /><CodeLine lineNumber="3956"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 1; i &lt; Width; i++)</span></CodeLine>
<Link id="l03957" /><CodeLine lineNumber="3957"><span class="doxyHighlight">      Mask.push&#95;back(i);</span></CodeLine>
<Link id="l03958" /><CodeLine lineNumber="3958"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa226d30eebf99ef84a0c2b1afcfc98b2">CreateShuffleVector</a>(<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa7fb55ed0b7a30342ba6da306428cae04">First</a>, Second, Mask);</span></CodeLine>
<Link id="l03959" /><CodeLine lineNumber="3959"></CodeLine>
<Link id="l03960" /><CodeLine lineNumber="3960"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l03961" /><CodeLine lineNumber="3961"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03962" /><CodeLine lineNumber="3962"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03963" /><CodeLine lineNumber="3963"></CodeLine>
<Link id="l03964" /><CodeLine lineNumber="3964" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c11aacbd4098eca944c41583e759d0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c11aacbd4098eca944c41583e759d0">handleVtestIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03965" /><CodeLine lineNumber="3965"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03966" /><CodeLine lineNumber="3966"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03967" /><CodeLine lineNumber="3967"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03968" /><CodeLine lineNumber="3968"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l03969" /><CodeLine lineNumber="3969"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NZ = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;getType()));</span></CodeLine>
<Link id="l03970" /><CodeLine lineNumber="3970"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Scalar = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a48d6d1fbffc492921f07f8dc4fb3d875">convertShadowToScalar</a>(NZ, IRB);</span></CodeLine>
<Link id="l03971" /><CodeLine lineNumber="3971"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9e6950f7f17700d5c0d61ad0b846ec5c">CreateZExt</a>(Scalar, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l03972" /><CodeLine lineNumber="3972"></CodeLine>
<Link id="l03973" /><CodeLine lineNumber="3973"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l03974" /><CodeLine lineNumber="3974"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03975" /><CodeLine lineNumber="3975"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03976" /><CodeLine lineNumber="3976"></CodeLine>
<Link id="l03977" /><CodeLine lineNumber="3977" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0bde622b06aafdb9eb49069b756563ce"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0bde622b06aafdb9eb49069b756563ce">handleBinarySdSsIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03978" /><CodeLine lineNumber="3978"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03979" /><CodeLine lineNumber="3979"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Width =</span></CodeLine>
<Link id="l03980" /><CodeLine lineNumber="3980"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType())-&gt;getNumElements();</span></CodeLine>
<Link id="l03981" /><CodeLine lineNumber="3981"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa7fb55ed0b7a30342ba6da306428cae04">First</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l03982" /><CodeLine lineNumber="3982"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Second = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l03983" /><CodeLine lineNumber="3983"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OrShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa7fb55ed0b7a30342ba6da306428cae04">First</a>, Second);</span></CodeLine>
<Link id="l03984" /><CodeLine lineNumber="3984"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// First element of both OR&#39;d together, remaining elements of first operand</span></CodeLine>
<Link id="l03985" /><CodeLine lineNumber="3985"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;int, 16&gt;</a> Mask;</span></CodeLine>
<Link id="l03986" /><CodeLine lineNumber="3986"><span class="doxyHighlight">    Mask.push&#95;back(Width);</span></CodeLine>
<Link id="l03987" /><CodeLine lineNumber="3987"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 1; i &lt; Width; i++)</span></CodeLine>
<Link id="l03988" /><CodeLine lineNumber="3988"><span class="doxyHighlight">      Mask.push&#95;back(i);</span></CodeLine>
<Link id="l03989" /><CodeLine lineNumber="3989"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa226d30eebf99ef84a0c2b1afcfc98b2">CreateShuffleVector</a>(<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa7fb55ed0b7a30342ba6da306428cae04">First</a>, OrShadow, Mask);</span></CodeLine>
<Link id="l03990" /><CodeLine lineNumber="3990"></CodeLine>
<Link id="l03991" /><CodeLine lineNumber="3991"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l03992" /><CodeLine lineNumber="3992"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l03993" /><CodeLine lineNumber="3993"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03994" /><CodeLine lineNumber="3994"></CodeLine>
<Link id="l03995" /><CodeLine lineNumber="3995"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#95;mm&#95;round&#95;ps / &#95;mm&#95;round&#95;ps.</span></CodeLine>
<Link id="l03996" /><CodeLine lineNumber="3996"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Similar to maybeHandleSimpleNomemIntrinsic except</span></CodeLine>
<Link id="l03997" /><CodeLine lineNumber="3997"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the second argument is guranteed to be a constant integer.</span></CodeLine>
<Link id="l03998" /><CodeLine lineNumber="3998" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#add81ddc58cfd39fc90b163af92a71bca"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#add81ddc58cfd39fc90b163af92a71bca">handleRoundPdPsIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l03999" /><CodeLine lineNumber="3999"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType() == <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</span></CodeLine>
<Link id="l04000" /><CodeLine lineNumber="4000"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() == 2);</span></CodeLine>
<Link id="l04001" /><CodeLine lineNumber="4001"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(1)));</span></CodeLine>
<Link id="l04002" /><CodeLine lineNumber="4002"></CodeLine>
<Link id="l04003" /><CodeLine lineNumber="4003"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04004" /><CodeLine lineNumber="4004"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af325004ae92c674ff92089a8a066e1e5">ShadowAndOriginCombiner</a> SC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l04005" /><CodeLine lineNumber="4005"><span class="doxyHighlight">    SC.Add(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0));</span></CodeLine>
<Link id="l04006" /><CodeLine lineNumber="4006"><span class="doxyHighlight">    SC.Done(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04007" /><CodeLine lineNumber="4007"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04008" /><CodeLine lineNumber="4008"></CodeLine>
<Link id="l04009" /><CodeLine lineNumber="4009"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instrument abs intrinsic.</span></CodeLine>
<Link id="l04010" /><CodeLine lineNumber="4010"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// handleUnknownIntrinsic can&#39;t handle it because of the last</span></CodeLine>
<Link id="l04011" /><CodeLine lineNumber="4011"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is&#95;int&#95;min&#95;poison argument which does not match the result type.</span></CodeLine>
<Link id="l04012" /><CodeLine lineNumber="4012" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6dff8a9ea4e4cf80ae780052b6361819"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6dff8a9ea4e4cf80ae780052b6361819">handleAbsIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04013" /><CodeLine lineNumber="4013"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isIntOrIntVectorTy());</span></CodeLine>
<Link id="l04014" /><CodeLine lineNumber="4014"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType() == <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</span></CodeLine>
<Link id="l04015" /><CodeLine lineNumber="4015"></CodeLine>
<Link id="l04016" /><CodeLine lineNumber="4016"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Handle is&#95;int&#95;min&#95;poison.</span></CodeLine>
<Link id="l04017" /><CodeLine lineNumber="4017"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04018" /><CodeLine lineNumber="4018"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l04019" /><CodeLine lineNumber="4019"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l04020" /><CodeLine lineNumber="4020"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04021" /><CodeLine lineNumber="4021"></CodeLine>
<Link id="l04022" /><CodeLine lineNumber="4022" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac166d600b506872ca9d2d69c7f587c2d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac166d600b506872ca9d2d69c7f587c2d">handleIsFpClass</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04023" /><CodeLine lineNumber="4023"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04024" /><CodeLine lineNumber="4024"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l04025" /><CodeLine lineNumber="4025"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(Shadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(Shadow)));</span></CodeLine>
<Link id="l04026" /><CodeLine lineNumber="4026"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0));</span></CodeLine>
<Link id="l04027" /><CodeLine lineNumber="4027"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04028" /><CodeLine lineNumber="4028"></CodeLine>
<Link id="l04029" /><CodeLine lineNumber="4029" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9890e049561cd883603c6a483547b6b5"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9890e049561cd883603c6a483547b6b5">handleArithmeticWithOverflow</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04030" /><CodeLine lineNumber="4030"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04031" /><CodeLine lineNumber="4031"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow0 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0);</span></CodeLine>
<Link id="l04032" /><CodeLine lineNumber="4032"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l04033" /><CodeLine lineNumber="4033"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowElt0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow0, Shadow1);</span></CodeLine>
<Link id="l04034" /><CodeLine lineNumber="4034"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowElt1 =</span></CodeLine>
<Link id="l04035" /><CodeLine lineNumber="4035"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(ShadowElt0, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(ShadowElt0));</span></CodeLine>
<Link id="l04036" /><CodeLine lineNumber="4036"></CodeLine>
<Link id="l04037" /><CodeLine lineNumber="4037"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/classes/llvm/poisonvalue/#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l04038" /><CodeLine lineNumber="4038"><span class="doxyHighlight">    Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a20833e358e38f9a86074bb4cc72b0d14">CreateInsertValue</a>(Shadow, ShadowElt0, 0);</span></CodeLine>
<Link id="l04039" /><CodeLine lineNumber="4039"><span class="doxyHighlight">    Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a20833e358e38f9a86074bb4cc72b0d14">CreateInsertValue</a>(Shadow, ShadowElt1, 1);</span></CodeLine>
<Link id="l04040" /><CodeLine lineNumber="4040"></CodeLine>
<Link id="l04041" /><CodeLine lineNumber="4041"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Shadow);</span></CodeLine>
<Link id="l04042" /><CodeLine lineNumber="4042"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04043" /><CodeLine lineNumber="4043"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04044" /><CodeLine lineNumber="4044"></CodeLine>
<Link id="l04045" /><CodeLine lineNumber="4045" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6fbb73043c2f82e97b7a704a91f47dc1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6fbb73043c2f82e97b7a704a91f47dc1">handleAVXHorizontalAddSubIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04046" /><CodeLine lineNumber="4046"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Approximation only:</span></CodeLine>
<Link id="l04047" /><CodeLine lineNumber="4047"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//    output         = horizontal&#95;add/sub(A, B)</span></CodeLine>
<Link id="l04048" /><CodeLine lineNumber="4048"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// =&gt; shadow&#91;output&#93; = horizontal&#95;add(shadow&#91;A&#93;, shadow&#91;B&#93;)</span></CodeLine>
<Link id="l04049" /><CodeLine lineNumber="4049"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04050" /><CodeLine lineNumber="4050"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We always use horizontal add instead of subtract, because subtracting</span></CodeLine>
<Link id="l04051" /><CodeLine lineNumber="4051"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a fully uninitialized shadow would result in a fully initialized shadow.</span></CodeLine>
<Link id="l04052" /><CodeLine lineNumber="4052"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04053" /><CodeLine lineNumber="4053"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// - If we add two adjacent zero (initialized) shadow values, the</span></CodeLine>
<Link id="l04054" /><CodeLine lineNumber="4054"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//   result always be zero i.e., no false positives.</span></CodeLine>
<Link id="l04055" /><CodeLine lineNumber="4055"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// - If we add two shadows, one of which is uninitialized, the</span></CodeLine>
<Link id="l04056" /><CodeLine lineNumber="4056"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//   result will always be non-zero i.e., no false negatives.</span></CodeLine>
<Link id="l04057" /><CodeLine lineNumber="4057"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// - However, we can have false negatives if we do an addition that wraps</span></CodeLine>
<Link id="l04058" /><CodeLine lineNumber="4058"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//   to zero; we consider this an acceptable tradeoff for performance.</span></CodeLine>
<Link id="l04059" /><CodeLine lineNumber="4059"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04060" /><CodeLine lineNumber="4060"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// To make shadow propagation precise, we want the equivalent of</span></CodeLine>
<Link id="l04061" /><CodeLine lineNumber="4061"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &quot;horizontal OR&quot;, but this is not available for SSE3/SSSE3/AVX/AVX2.</span></CodeLine>
<Link id="l04062" /><CodeLine lineNumber="4062"></CodeLine>
<Link id="l04063" /><CodeLine lineNumber="4063"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> shadowIntrinsicID = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID();</span></CodeLine>
<Link id="l04064" /><CodeLine lineNumber="4064"></CodeLine>
<Link id="l04065" /><CodeLine lineNumber="4065"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID()) &#123;</span></CodeLine>
<Link id="l04066" /><CodeLine lineNumber="4066"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hsub&#95;ps:</span></CodeLine>
<Link id="l04067" /><CodeLine lineNumber="4067"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;sse3&#95;hadd&#95;ps;</span></CodeLine>
<Link id="l04068" /><CodeLine lineNumber="4068"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04069" /><CodeLine lineNumber="4069"></CodeLine>
<Link id="l04070" /><CodeLine lineNumber="4070"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hsub&#95;pd:</span></CodeLine>
<Link id="l04071" /><CodeLine lineNumber="4071"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;sse3&#95;hadd&#95;pd;</span></CodeLine>
<Link id="l04072" /><CodeLine lineNumber="4072"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04073" /><CodeLine lineNumber="4073"></CodeLine>
<Link id="l04074" /><CodeLine lineNumber="4074"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;d:</span></CodeLine>
<Link id="l04075" /><CodeLine lineNumber="4075"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;d;</span></CodeLine>
<Link id="l04076" /><CodeLine lineNumber="4076"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04077" /><CodeLine lineNumber="4077"></CodeLine>
<Link id="l04078" /><CodeLine lineNumber="4078"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;d&#95;128:</span></CodeLine>
<Link id="l04079" /><CodeLine lineNumber="4079"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;d&#95;128;</span></CodeLine>
<Link id="l04080" /><CodeLine lineNumber="4080"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04081" /><CodeLine lineNumber="4081"></CodeLine>
<Link id="l04082" /><CodeLine lineNumber="4082"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;w:</span></CodeLine>
<Link id="l04083" /><CodeLine lineNumber="4083"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;w;</span></CodeLine>
<Link id="l04084" /><CodeLine lineNumber="4084"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04085" /><CodeLine lineNumber="4085"></CodeLine>
<Link id="l04086" /><CodeLine lineNumber="4086"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;w&#95;128:</span></CodeLine>
<Link id="l04087" /><CodeLine lineNumber="4087"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;w&#95;128;</span></CodeLine>
<Link id="l04088" /><CodeLine lineNumber="4088"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04089" /><CodeLine lineNumber="4089"></CodeLine>
<Link id="l04090" /><CodeLine lineNumber="4090"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;sw:</span></CodeLine>
<Link id="l04091" /><CodeLine lineNumber="4091"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;sw;</span></CodeLine>
<Link id="l04092" /><CodeLine lineNumber="4092"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04093" /><CodeLine lineNumber="4093"></CodeLine>
<Link id="l04094" /><CodeLine lineNumber="4094"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;sw&#95;128:</span></CodeLine>
<Link id="l04095" /><CodeLine lineNumber="4095"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;ssse3&#95;phadd&#95;sw&#95;128;</span></CodeLine>
<Link id="l04096" /><CodeLine lineNumber="4096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04097" /><CodeLine lineNumber="4097"></CodeLine>
<Link id="l04098" /><CodeLine lineNumber="4098"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hsub&#95;pd&#95;256:</span></CodeLine>
<Link id="l04099" /><CodeLine lineNumber="4099"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;avx&#95;hadd&#95;pd&#95;256;</span></CodeLine>
<Link id="l04100" /><CodeLine lineNumber="4100"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04101" /><CodeLine lineNumber="4101"></CodeLine>
<Link id="l04102" /><CodeLine lineNumber="4102"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hsub&#95;ps&#95;256:</span></CodeLine>
<Link id="l04103" /><CodeLine lineNumber="4103"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;avx&#95;hadd&#95;ps&#95;256;</span></CodeLine>
<Link id="l04104" /><CodeLine lineNumber="4104"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04105" /><CodeLine lineNumber="4105"></CodeLine>
<Link id="l04106" /><CodeLine lineNumber="4106"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;d:</span></CodeLine>
<Link id="l04107" /><CodeLine lineNumber="4107"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;avx2&#95;phadd&#95;d;</span></CodeLine>
<Link id="l04108" /><CodeLine lineNumber="4108"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04109" /><CodeLine lineNumber="4109"></CodeLine>
<Link id="l04110" /><CodeLine lineNumber="4110"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;w:</span></CodeLine>
<Link id="l04111" /><CodeLine lineNumber="4111"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;avx2&#95;phadd&#95;w;</span></CodeLine>
<Link id="l04112" /><CodeLine lineNumber="4112"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04113" /><CodeLine lineNumber="4113"></CodeLine>
<Link id="l04114" /><CodeLine lineNumber="4114"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;sw:</span></CodeLine>
<Link id="l04115" /><CodeLine lineNumber="4115"><span class="doxyHighlight">      shadowIntrinsicID = Intrinsic::x86&#95;avx2&#95;phadd&#95;sw;</span></CodeLine>
<Link id="l04116" /><CodeLine lineNumber="4116"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04117" /><CodeLine lineNumber="4117"></CodeLine>
<Link id="l04118" /><CodeLine lineNumber="4118"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04119" /><CodeLine lineNumber="4119"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04120" /><CodeLine lineNumber="4120"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04121" /><CodeLine lineNumber="4121"></CodeLine>
<Link id="l04122" /><CodeLine lineNumber="4122"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a94631928dd87cd8134a31c5fb3168c70">handleIntrinsicByApplyingToShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, shadowIntrinsicID,</span></CodeLine>
<Link id="l04123" /><CodeLine lineNumber="4123"><span class="doxyHighlight">                                             </span><span class="doxyHighlightComment">/&#42;trailingVerbatimArgs&#42;/</span><span class="doxyHighlight"> 0);</span></CodeLine>
<Link id="l04124" /><CodeLine lineNumber="4124"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04125" /><CodeLine lineNumber="4125"></CodeLine>
<Link id="l04126" /><CodeLine lineNumber="4126"><span class="doxyHighlightComment">  /// Handle Arm NEON vector store intrinsics (vst&#123;2,3,4&#125;, vst1x&#95;&#123;2,3,4&#125;,</span></CodeLine>
<Link id="l04127" /><CodeLine lineNumber="4127"><span class="doxyHighlightComment">  /// and vst&#123;2,3,4&#125;lane).</span></CodeLine>
<Link id="l04128" /><CodeLine lineNumber="4128"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04129" /><CodeLine lineNumber="4129"><span class="doxyHighlightComment">  /// Arm NEON vector store intrinsics have the output address (pointer) as the</span></CodeLine>
<Link id="l04130" /><CodeLine lineNumber="4130"><span class="doxyHighlightComment">  /// last argument, with the initial arguments being the inputs (and lane</span></CodeLine>
<Link id="l04131" /><CodeLine lineNumber="4131"><span class="doxyHighlightComment">  /// number for vst&#123;2,3,4&#125;lane). They return void.</span></CodeLine>
<Link id="l04132" /><CodeLine lineNumber="4132"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04133" /><CodeLine lineNumber="4133"><span class="doxyHighlightComment">  /// - st4 interleaves the output e.g., st4 (inA, inB, inC, inD, outP) writes</span></CodeLine>
<Link id="l04134" /><CodeLine lineNumber="4134"><span class="doxyHighlightComment">  ///   abcdabcdabcdabcd... into &#42;outP</span></CodeLine>
<Link id="l04135" /><CodeLine lineNumber="4135"><span class="doxyHighlightComment">  /// - st1&#95;x4 is non-interleaved e.g., st1&#95;x4 (inA, inB, inC, inD, outP)</span></CodeLine>
<Link id="l04136" /><CodeLine lineNumber="4136"><span class="doxyHighlightComment">  ///   writes aaaa...bbbb...cccc...dddd... into &#42;outP</span></CodeLine>
<Link id="l04137" /><CodeLine lineNumber="4137"><span class="doxyHighlightComment">  /// - st4lane has arguments of (inA, inB, inC, inD, lane, outP)</span></CodeLine>
<Link id="l04138" /><CodeLine lineNumber="4138"><span class="doxyHighlightComment">  /// These instructions can all be instrumented with essentially the same</span></CodeLine>
<Link id="l04139" /><CodeLine lineNumber="4139"><span class="doxyHighlightComment">  /// MSan logic, simply by applying the corresponding intrinsic to the shadow.</span></CodeLine>
<Link id="l04140" /><CodeLine lineNumber="4140" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa78bfa47c700608c53890cc25cd44a5b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa78bfa47c700608c53890cc25cd44a5b">handleNEONVectorStoreIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> useLane) &#123;</span></CodeLine>
<Link id="l04141" /><CodeLine lineNumber="4141"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04142" /><CodeLine lineNumber="4142"></CodeLine>
<Link id="l04143" /><CodeLine lineNumber="4143"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t use getNumOperands() because it includes the callee</span></CodeLine>
<Link id="l04144" /><CodeLine lineNumber="4144"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> numArgOperands = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size();</span></CodeLine>
<Link id="l04145" /><CodeLine lineNumber="4145"></CodeLine>
<Link id="l04146" /><CodeLine lineNumber="4146"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The last arg operand is the output (pointer)</span></CodeLine>
<Link id="l04147" /><CodeLine lineNumber="4147"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(numArgOperands &gt;= 1);</span></CodeLine>
<Link id="l04148" /><CodeLine lineNumber="4148"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(numArgOperands - 1);</span></CodeLine>
<Link id="l04149" /><CodeLine lineNumber="4149"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</span></CodeLine>
<Link id="l04150" /><CodeLine lineNumber="4150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> skipTrailingOperands = 1;</span></CodeLine>
<Link id="l04151" /><CodeLine lineNumber="4151"></CodeLine>
<Link id="l04152" /><CodeLine lineNumber="4152"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc0f84e2f6fb17e5df5123d01f914e4b">ClCheckAccessAddress</a>)</span></CodeLine>
<Link id="l04153" /><CodeLine lineNumber="4153"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Addr, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04154" /><CodeLine lineNumber="4154"></CodeLine>
<Link id="l04155" /><CodeLine lineNumber="4155"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Second-last operand is the lane number (for vst&#123;2,3,4&#125;lane)</span></CodeLine>
<Link id="l04156" /><CodeLine lineNumber="4156"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (useLane) &#123;</span></CodeLine>
<Link id="l04157" /><CodeLine lineNumber="4157"><span class="doxyHighlight">      skipTrailingOperands++;</span></CodeLine>
<Link id="l04158" /><CodeLine lineNumber="4158"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(numArgOperands &gt;= </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(skipTrailingOperands));</span></CodeLine>
<Link id="l04159" /><CodeLine lineNumber="4159"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;IntegerType&gt;</a>(</span></CodeLine>
<Link id="l04160" /><CodeLine lineNumber="4160"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(numArgOperands - skipTrailingOperands)-&gt;getType()));</span></CodeLine>
<Link id="l04161" /><CodeLine lineNumber="4161"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04162" /><CodeLine lineNumber="4162"></CodeLine>
<Link id="l04163" /><CodeLine lineNumber="4163"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Value &#42;, 8&gt;</a> ShadowArgs;</span></CodeLine>
<Link id="l04164" /><CodeLine lineNumber="4164"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// All the initial operands are the inputs</span></CodeLine>
<Link id="l04165" /><CodeLine lineNumber="4165"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0; i &lt; numArgOperands - skipTrailingOperands; i++) &#123;</span></CodeLine>
<Link id="l04166" /><CodeLine lineNumber="4166"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i)-&gt;getType()));</span></CodeLine>
<Link id="l04167" /><CodeLine lineNumber="4167"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, i);</span></CodeLine>
<Link id="l04168" /><CodeLine lineNumber="4168"><span class="doxyHighlight">      ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, Shadow);</span></CodeLine>
<Link id="l04169" /><CodeLine lineNumber="4169"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04170" /><CodeLine lineNumber="4170"></CodeLine>
<Link id="l04171" /><CodeLine lineNumber="4171"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// MSan&#39;s GetShadowTy assumes the LHS is the type we want the shadow for</span></CodeLine>
<Link id="l04172" /><CodeLine lineNumber="4172"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// e.g., for:</span></CodeLine>
<Link id="l04173" /><CodeLine lineNumber="4173"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//     &#91;&#91;TMP5:%.&#42;&#93;&#93; = bitcast &lt;16 x i8&gt; &#91;&#91;TMP2&#93;&#93; to i128</span></CodeLine>
<Link id="l04174" /><CodeLine lineNumber="4174"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// we know the type of the output (and its shadow) is &lt;16 x i8&gt;.</span></CodeLine>
<Link id="l04175" /><CodeLine lineNumber="4175"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04176" /><CodeLine lineNumber="4176"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Arm NEON VST is unusual because the last argument is the output address:</span></CodeLine>
<Link id="l04177" /><CodeLine lineNumber="4177"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//     define void @st2&#95;16b(&lt;16 x i8&gt; %A, &lt;16 x i8&gt; %B, ptr %P) &#123;</span></CodeLine>
<Link id="l04178" /><CodeLine lineNumber="4178"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//         call void @llvm.aarch64.neon.st2.v16i8.p0</span></CodeLine>
<Link id="l04179" /><CodeLine lineNumber="4179"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//                   (&lt;16 x i8&gt; &#91;&#91;A&#93;&#93;, &lt;16 x i8&gt; &#91;&#91;B&#93;&#93;, ptr &#91;&#91;P&#93;&#93;)</span></CodeLine>
<Link id="l04180" /><CodeLine lineNumber="4180"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and we have no type information about P&#39;s operand. We must manually</span></CodeLine>
<Link id="l04181" /><CodeLine lineNumber="4181"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// compute the type (&lt;16 x i8&gt; x 2).</span></CodeLine>
<Link id="l04182" /><CodeLine lineNumber="4182"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/fixedvectortype">FixedVectorType</a> &#42;OutputVectorTy = <a href="/docs/api/classes/llvm/fixedvectortype/#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(</span></CodeLine>
<Link id="l04183" /><CodeLine lineNumber="4183"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType())-&gt;getElementType(),</span></CodeLine>
<Link id="l04184" /><CodeLine lineNumber="4184"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FixedVectorType&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0)-&gt;getType())-&gt;getNumElements() &#42;</span></CodeLine>
<Link id="l04185" /><CodeLine lineNumber="4185"><span class="doxyHighlight">            (numArgOperands - skipTrailingOperands));</span></CodeLine>
<Link id="l04186" /><CodeLine lineNumber="4186"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;OutputShadowTy = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(OutputVectorTy);</span></CodeLine>
<Link id="l04187" /><CodeLine lineNumber="4187"></CodeLine>
<Link id="l04188" /><CodeLine lineNumber="4188"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (useLane)</span></CodeLine>
<Link id="l04189" /><CodeLine lineNumber="4189"><span class="doxyHighlight">      ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1,</span></CodeLine>
<Link id="l04190" /><CodeLine lineNumber="4190"><span class="doxyHighlight">                        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(numArgOperands - skipTrailingOperands));</span></CodeLine>
<Link id="l04191" /><CodeLine lineNumber="4191"></CodeLine>
<Link id="l04192" /><CodeLine lineNumber="4192"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OutputShadowPtr, &#42;OutputOriginPtr;</span></CodeLine>
<Link id="l04193" /><CodeLine lineNumber="4193"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// AArch64 NEON does not need alignment (unless OS requires it)</span></CodeLine>
<Link id="l04194" /><CodeLine lineNumber="4194"><span class="doxyHighlight">    std::tie(OutputShadowPtr, OutputOriginPtr) = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l04195" /><CodeLine lineNumber="4195"><span class="doxyHighlight">        Addr, IRB, OutputShadowTy, <a href="/docs/api/structs/llvm/align">Align</a>(1), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04196" /><CodeLine lineNumber="4196"><span class="doxyHighlight">    ShadowArgs.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(1, OutputShadowPtr);</span></CodeLine>
<Link id="l04197" /><CodeLine lineNumber="4197"></CodeLine>
<Link id="l04198" /><CodeLine lineNumber="4198"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI =</span></CodeLine>
<Link id="l04199" /><CodeLine lineNumber="4199"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID(), ShadowArgs);</span></CodeLine>
<Link id="l04200" /><CodeLine lineNumber="4200"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CI);</span></CodeLine>
<Link id="l04201" /><CodeLine lineNumber="4201"></CodeLine>
<Link id="l04202" /><CodeLine lineNumber="4202"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l04203" /><CodeLine lineNumber="4203"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: if we modelled the vst&#42; instruction more precisely, we could</span></CodeLine>
<Link id="l04204" /><CodeLine lineNumber="4204"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// more accurately track the origins (e.g., if both inputs are</span></CodeLine>
<Link id="l04205" /><CodeLine lineNumber="4205"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// uninitialized for vst2, we currently blame the second input, even</span></CodeLine>
<Link id="l04206" /><CodeLine lineNumber="4206"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// though part of the output depends only on the first input).</span></CodeLine>
<Link id="l04207" /><CodeLine lineNumber="4207"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04208" /><CodeLine lineNumber="4208"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This is particularly imprecise for vst&#123;2,3,4&#125;lane, since only one</span></CodeLine>
<Link id="l04209" /><CodeLine lineNumber="4209"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// lane of each input is actually copied to the output.</span></CodeLine>
<Link id="l04210" /><CodeLine lineNumber="4210"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aba2a43205c3dc6d42ed940d6bbbbbfc8">OriginCombiner</a> OC(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, IRB);</span></CodeLine>
<Link id="l04211" /><CodeLine lineNumber="4211"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0; i &lt; numArgOperands - skipTrailingOperands; i++)</span></CodeLine>
<Link id="l04212" /><CodeLine lineNumber="4212"><span class="doxyHighlight">        OC.Add(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i));</span></CodeLine>
<Link id="l04213" /><CodeLine lineNumber="4213"></CodeLine>
<Link id="l04214" /><CodeLine lineNumber="4214"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l04215" /><CodeLine lineNumber="4215"><span class="doxyHighlight">      OC.DoneAndStoreOrigin(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(OutputVectorTy),</span></CodeLine>
<Link id="l04216" /><CodeLine lineNumber="4216"><span class="doxyHighlight">                            OutputOriginPtr);</span></CodeLine>
<Link id="l04217" /><CodeLine lineNumber="4217"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04218" /><CodeLine lineNumber="4218"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04219" /><CodeLine lineNumber="4219"></CodeLine>
<Link id="l04220" /><CodeLine lineNumber="4220"><span class="doxyHighlightComment">  /// Handle intrinsics by applying the intrinsic to the shadows.</span></CodeLine>
<Link id="l04221" /><CodeLine lineNumber="4221"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04222" /><CodeLine lineNumber="4222"><span class="doxyHighlightComment">  /// The trailing arguments are passed verbatim to the intrinsic, though any</span></CodeLine>
<Link id="l04223" /><CodeLine lineNumber="4223"><span class="doxyHighlightComment">  /// uninitialized trailing arguments can also taint the shadow e.g., for an</span></CodeLine>
<Link id="l04224" /><CodeLine lineNumber="4224"><span class="doxyHighlightComment">  /// intrinsic with one trailing verbatim argument:</span></CodeLine>
<Link id="l04225" /><CodeLine lineNumber="4225"><span class="doxyHighlightComment">  ///     out = intrinsic(var1, var2, opType)</span></CodeLine>
<Link id="l04226" /><CodeLine lineNumber="4226"><span class="doxyHighlightComment">  /// we compute:</span></CodeLine>
<Link id="l04227" /><CodeLine lineNumber="4227"><span class="doxyHighlightComment">  ///     shadow&#91;out&#93; =</span></CodeLine>
<Link id="l04228" /><CodeLine lineNumber="4228"><span class="doxyHighlightComment">  ///         intrinsic(shadow&#91;var1&#93;, shadow&#91;var2&#93;, opType) | shadow&#91;opType&#93;</span></CodeLine>
<Link id="l04229" /><CodeLine lineNumber="4229"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04230" /><CodeLine lineNumber="4230"><span class="doxyHighlightComment">  /// Typically, shadowIntrinsicID will be specified by the caller to be</span></CodeLine>
<Link id="l04231" /><CodeLine lineNumber="4231"><span class="doxyHighlightComment">  /// I.getIntrinsicID(), but the caller can choose to replace it with another</span></CodeLine>
<Link id="l04232" /><CodeLine lineNumber="4232"><span class="doxyHighlightComment">  /// intrinsic of the same type.</span></CodeLine>
<Link id="l04233" /><CodeLine lineNumber="4233"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04234" /><CodeLine lineNumber="4234"><span class="doxyHighlightComment">  /// CAUTION: this assumes that the intrinsic will handle arbitrary</span></CodeLine>
<Link id="l04235" /><CodeLine lineNumber="4235"><span class="doxyHighlightComment">  ///          bit-patterns (for example, if the intrinsic accepts floats for</span></CodeLine>
<Link id="l04236" /><CodeLine lineNumber="4236"><span class="doxyHighlightComment">  ///          var1, we require that it doesn&#39;t care if inputs are NaNs).</span></CodeLine>
<Link id="l04237" /><CodeLine lineNumber="4237"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04238" /><CodeLine lineNumber="4238"><span class="doxyHighlightComment">  /// For example, this can be applied to the Arm NEON vector table intrinsics</span></CodeLine>
<Link id="l04239" /><CodeLine lineNumber="4239"><span class="doxyHighlightComment">  /// (tbl&#123;1,2,3,4&#125;).</span></CodeLine>
<Link id="l04240" /><CodeLine lineNumber="4240"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04241" /><CodeLine lineNumber="4241"><span class="doxyHighlightComment">  /// The origin is approximated using setOriginForNaryOp.</span></CodeLine>
<Link id="l04242" /><CodeLine lineNumber="4242" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a94631928dd87cd8134a31c5fb3168c70"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a94631928dd87cd8134a31c5fb3168c70">handleIntrinsicByApplyingToShadow</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l04243" /><CodeLine lineNumber="4243"><span class="doxyHighlight">                                         <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> shadowIntrinsicID,</span></CodeLine>
<Link id="l04244" /><CodeLine lineNumber="4244"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> trailingVerbatimArgs) &#123;</span></CodeLine>
<Link id="l04245" /><CodeLine lineNumber="4245"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04246" /><CodeLine lineNumber="4246"></CodeLine>
<Link id="l04247" /><CodeLine lineNumber="4247"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(trailingVerbatimArgs &lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size());</span></CodeLine>
<Link id="l04248" /><CodeLine lineNumber="4248"></CodeLine>
<Link id="l04249" /><CodeLine lineNumber="4249"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Value &#42;, 8&gt;</a> ShadowArgs;</span></CodeLine>
<Link id="l04250" /><CodeLine lineNumber="4250"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t use getNumOperands() because it includes the callee</span></CodeLine>
<Link id="l04251" /><CodeLine lineNumber="4251"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0; i &lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() - trailingVerbatimArgs; i++) &#123;</span></CodeLine>
<Link id="l04252" /><CodeLine lineNumber="4252"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, i);</span></CodeLine>
<Link id="l04253" /><CodeLine lineNumber="4253"></CodeLine>
<Link id="l04254" /><CodeLine lineNumber="4254"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Shadows are integer-ish types but some intrinsics require a</span></CodeLine>
<Link id="l04255" /><CodeLine lineNumber="4255"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// different (e.g., floating-point) type.</span></CodeLine>
<Link id="l04256" /><CodeLine lineNumber="4256"><span class="doxyHighlight">      ShadowArgs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</span></CodeLine>
<Link id="l04257" /><CodeLine lineNumber="4257"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(Shadow, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i)-&gt;getType()));</span></CodeLine>
<Link id="l04258" /><CodeLine lineNumber="4258"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04259" /><CodeLine lineNumber="4259"></CodeLine>
<Link id="l04260" /><CodeLine lineNumber="4260"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() - trailingVerbatimArgs; i &lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size();</span></CodeLine>
<Link id="l04261" /><CodeLine lineNumber="4261"><span class="doxyHighlight">         i++) &#123;</span></CodeLine>
<Link id="l04262" /><CodeLine lineNumber="4262"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Arg = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(i);</span></CodeLine>
<Link id="l04263" /><CodeLine lineNumber="4263"><span class="doxyHighlight">      ShadowArgs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Arg);</span></CodeLine>
<Link id="l04264" /><CodeLine lineNumber="4264"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04265" /><CodeLine lineNumber="4265"></CodeLine>
<Link id="l04266" /><CodeLine lineNumber="4266"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI =</span></CodeLine>
<Link id="l04267" /><CodeLine lineNumber="4267"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), shadowIntrinsicID, ShadowArgs);</span></CodeLine>
<Link id="l04268" /><CodeLine lineNumber="4268"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;CombinedShadow = CI;</span></CodeLine>
<Link id="l04269" /><CodeLine lineNumber="4269"></CodeLine>
<Link id="l04270" /><CodeLine lineNumber="4270"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Combine the computed shadow with the shadow of trailing args</span></CodeLine>
<Link id="l04271" /><CodeLine lineNumber="4271"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size() - trailingVerbatimArgs; i &lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.arg&#95;size();</span></CodeLine>
<Link id="l04272" /><CodeLine lineNumber="4272"><span class="doxyHighlight">         i++) &#123;</span></CodeLine>
<Link id="l04273" /><CodeLine lineNumber="4273"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow =</span></CodeLine>
<Link id="l04274" /><CodeLine lineNumber="4274"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a39d5c919a484d17c9e12864d869c7f69">CreateShadowCast</a>(IRB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, i), CombinedShadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l04275" /><CodeLine lineNumber="4275"><span class="doxyHighlight">      CombinedShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow, CombinedShadow, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04276" /><CodeLine lineNumber="4276"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04277" /><CodeLine lineNumber="4277"></CodeLine>
<Link id="l04278" /><CodeLine lineNumber="4278"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a932f08e32ea37a7019902ee467beb268">CreateBitCast</a>(CombinedShadow, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</span></CodeLine>
<Link id="l04279" /><CodeLine lineNumber="4279"></CodeLine>
<Link id="l04280" /><CodeLine lineNumber="4280"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04281" /><CodeLine lineNumber="4281"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04282" /><CodeLine lineNumber="4282"></CodeLine>
<Link id="l04283" /><CodeLine lineNumber="4283"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Approximation only</span></CodeLine>
<Link id="l04284" /><CodeLine lineNumber="4284" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af56d49d9b0002920b7190ddb0f3585ff"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af56d49d9b0002920b7190ddb0f3585ff">handleNEONVectorMultiplyIntrinsic</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04285" /><CodeLine lineNumber="4285"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04286" /><CodeLine lineNumber="4286"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04287" /><CodeLine lineNumber="4287"></CodeLine>
<Link id="l04288" /><CodeLine lineNumber="4288" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adc96f92f758d183ab0dac483952e3481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adc96f92f758d183ab0dac483952e3481">visitIntrinsicInst</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l04289" /><CodeLine lineNumber="4289"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID()) &#123;</span></CodeLine>
<Link id="l04290" /><CodeLine lineNumber="4290"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::uadd&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04291" /><CodeLine lineNumber="4291"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::sadd&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04292" /><CodeLine lineNumber="4292"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::usub&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04293" /><CodeLine lineNumber="4293"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::ssub&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04294" /><CodeLine lineNumber="4294"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::umul&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04295" /><CodeLine lineNumber="4295"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::smul&#95;with&#95;overflow:</span></CodeLine>
<Link id="l04296" /><CodeLine lineNumber="4296"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9890e049561cd883603c6a483547b6b5">handleArithmeticWithOverflow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04297" /><CodeLine lineNumber="4297"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04298" /><CodeLine lineNumber="4298"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::abs:</span></CodeLine>
<Link id="l04299" /><CodeLine lineNumber="4299"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6dff8a9ea4e4cf80ae780052b6361819">handleAbsIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04300" /><CodeLine lineNumber="4300"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04301" /><CodeLine lineNumber="4301"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::is&#95;fpclass:</span></CodeLine>
<Link id="l04302" /><CodeLine lineNumber="4302"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac166d600b506872ca9d2d69c7f587c2d">handleIsFpClass</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04303" /><CodeLine lineNumber="4303"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04304" /><CodeLine lineNumber="4304"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::lifetime&#95;start:</span></CodeLine>
<Link id="l04305" /><CodeLine lineNumber="4305"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0dabd1eec85a33a1d90cf9b9356a3c58">handleLifetimeStart</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04306" /><CodeLine lineNumber="4306"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04307" /><CodeLine lineNumber="4307"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::launder&#95;invariant&#95;group:</span></CodeLine>
<Link id="l04308" /><CodeLine lineNumber="4308"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::strip&#95;invariant&#95;group:</span></CodeLine>
<Link id="l04309" /><CodeLine lineNumber="4309"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a70e1c3d3c4ed3b31cb4921817214d40b">handleInvariantGroup</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04310" /><CodeLine lineNumber="4310"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04311" /><CodeLine lineNumber="4311"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::bswap:</span></CodeLine>
<Link id="l04312" /><CodeLine lineNumber="4312"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2487c76cffea045469d6e95ea3a724b0">handleBswap</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04313" /><CodeLine lineNumber="4313"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04314" /><CodeLine lineNumber="4314"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::ctlz:</span></CodeLine>
<Link id="l04315" /><CodeLine lineNumber="4315"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::cttz:</span></CodeLine>
<Link id="l04316" /><CodeLine lineNumber="4316"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fdafd5b5245a6f5f14c41c593d10b69">handleCountZeroes</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04317" /><CodeLine lineNumber="4317"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04318" /><CodeLine lineNumber="4318"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;compressstore:</span></CodeLine>
<Link id="l04319" /><CodeLine lineNumber="4319"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a512e6c35c0ac3187be4445bab50b766e">handleMaskedCompressStore</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04320" /><CodeLine lineNumber="4320"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04321" /><CodeLine lineNumber="4321"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;expandload:</span></CodeLine>
<Link id="l04322" /><CodeLine lineNumber="4322"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8cc553ff446a1ab299f2d3cd73e9a544">handleMaskedExpandLoad</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04323" /><CodeLine lineNumber="4323"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04324" /><CodeLine lineNumber="4324"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;gather:</span></CodeLine>
<Link id="l04325" /><CodeLine lineNumber="4325"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a759cdeca788eae085f33511a111de4e8">handleMaskedGather</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04326" /><CodeLine lineNumber="4326"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04327" /><CodeLine lineNumber="4327"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;scatter:</span></CodeLine>
<Link id="l04328" /><CodeLine lineNumber="4328"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5056eaa4a9d5c87c3566577a0736c47d">handleMaskedScatter</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04329" /><CodeLine lineNumber="4329"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04330" /><CodeLine lineNumber="4330"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;store:</span></CodeLine>
<Link id="l04331" /><CodeLine lineNumber="4331"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3405abbd1975b05777dc44d9089f1ece">handleMaskedStore</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04332" /><CodeLine lineNumber="4332"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04333" /><CodeLine lineNumber="4333"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::masked&#95;load:</span></CodeLine>
<Link id="l04334" /><CodeLine lineNumber="4334"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a454e5d8d7e12243f5e63c713fdd488f4">handleMaskedLoad</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04335" /><CodeLine lineNumber="4335"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04336" /><CodeLine lineNumber="4336"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vector&#95;reduce&#95;and:</span></CodeLine>
<Link id="l04337" /><CodeLine lineNumber="4337"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8abeeb6d127be621e8ee8d9d667503b2">handleVectorReduceAndIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04338" /><CodeLine lineNumber="4338"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04339" /><CodeLine lineNumber="4339"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vector&#95;reduce&#95;or:</span></CodeLine>
<Link id="l04340" /><CodeLine lineNumber="4340"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ae160aa4ec35fca7aaa0f75a8526cb3fb">handleVectorReduceOrIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04341" /><CodeLine lineNumber="4341"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04342" /><CodeLine lineNumber="4342"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vector&#95;reduce&#95;add:</span></CodeLine>
<Link id="l04343" /><CodeLine lineNumber="4343"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vector&#95;reduce&#95;xor:</span></CodeLine>
<Link id="l04344" /><CodeLine lineNumber="4344"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vector&#95;reduce&#95;mul:</span></CodeLine>
<Link id="l04345" /><CodeLine lineNumber="4345"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a14778d7f19c6c8582a65cb2d05b541ce">handleVectorReduceIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04346" /><CodeLine lineNumber="4346"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04347" /><CodeLine lineNumber="4347"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;stmxcsr:</span></CodeLine>
<Link id="l04348" /><CodeLine lineNumber="4348"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a7a310b77dacdbac9c6bfd285af705de5">handleStmxcsr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04349" /><CodeLine lineNumber="4349"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04350" /><CodeLine lineNumber="4350"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ldmxcsr:</span></CodeLine>
<Link id="l04351" /><CodeLine lineNumber="4351"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac621d92c3438d32c257d3e193ed64c2">handleLdmxcsr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04352" /><CodeLine lineNumber="4352"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04353" /><CodeLine lineNumber="4353"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;vcvtsd2usi64:</span></CodeLine>
<Link id="l04354" /><CodeLine lineNumber="4354"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;vcvtsd2usi32:</span></CodeLine>
<Link id="l04355" /><CodeLine lineNumber="4355"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;vcvtss2usi64:</span></CodeLine>
<Link id="l04356" /><CodeLine lineNumber="4356"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;vcvtss2usi32:</span></CodeLine>
<Link id="l04357" /><CodeLine lineNumber="4357"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvttss2usi64:</span></CodeLine>
<Link id="l04358" /><CodeLine lineNumber="4358"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvttss2usi:</span></CodeLine>
<Link id="l04359" /><CodeLine lineNumber="4359"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvttsd2usi64:</span></CodeLine>
<Link id="l04360" /><CodeLine lineNumber="4360"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvttsd2usi:</span></CodeLine>
<Link id="l04361" /><CodeLine lineNumber="4361"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvtusi2ss:</span></CodeLine>
<Link id="l04362" /><CodeLine lineNumber="4362"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvtusi642sd:</span></CodeLine>
<Link id="l04363" /><CodeLine lineNumber="4363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;cvtusi642ss:</span></CodeLine>
<Link id="l04364" /><CodeLine lineNumber="4364"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8ec2e744dff018b81c0eb2a7e9ea4e2b">handleVectorConvertIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04365" /><CodeLine lineNumber="4365"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04366" /><CodeLine lineNumber="4366"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cvtsd2si64:</span></CodeLine>
<Link id="l04367" /><CodeLine lineNumber="4367"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cvtsd2si:</span></CodeLine>
<Link id="l04368" /><CodeLine lineNumber="4368"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cvtsd2ss:</span></CodeLine>
<Link id="l04369" /><CodeLine lineNumber="4369"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cvttsd2si64:</span></CodeLine>
<Link id="l04370" /><CodeLine lineNumber="4370"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cvttsd2si:</span></CodeLine>
<Link id="l04371" /><CodeLine lineNumber="4371"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvtss2si64:</span></CodeLine>
<Link id="l04372" /><CodeLine lineNumber="4372"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvtss2si:</span></CodeLine>
<Link id="l04373" /><CodeLine lineNumber="4373"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvttss2si64:</span></CodeLine>
<Link id="l04374" /><CodeLine lineNumber="4374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvttss2si:</span></CodeLine>
<Link id="l04375" /><CodeLine lineNumber="4375"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8ec2e744dff018b81c0eb2a7e9ea4e2b">handleVectorConvertIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1);</span></CodeLine>
<Link id="l04376" /><CodeLine lineNumber="4376"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04377" /><CodeLine lineNumber="4377"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvtps2pi:</span></CodeLine>
<Link id="l04378" /><CodeLine lineNumber="4378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cvttps2pi:</span></CodeLine>
<Link id="l04379" /><CodeLine lineNumber="4379"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8ec2e744dff018b81c0eb2a7e9ea4e2b">handleVectorConvertIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 2);</span></CodeLine>
<Link id="l04380" /><CodeLine lineNumber="4380"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04381" /><CodeLine lineNumber="4381"></CodeLine>
<Link id="l04382" /><CodeLine lineNumber="4382"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psll&#95;w&#95;512:</span></CodeLine>
<Link id="l04383" /><CodeLine lineNumber="4383"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psll&#95;d&#95;512:</span></CodeLine>
<Link id="l04384" /><CodeLine lineNumber="4384"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psll&#95;q&#95;512:</span></CodeLine>
<Link id="l04385" /><CodeLine lineNumber="4385"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;pslli&#95;w&#95;512:</span></CodeLine>
<Link id="l04386" /><CodeLine lineNumber="4386"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;pslli&#95;d&#95;512:</span></CodeLine>
<Link id="l04387" /><CodeLine lineNumber="4387"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;pslli&#95;q&#95;512:</span></CodeLine>
<Link id="l04388" /><CodeLine lineNumber="4388"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrl&#95;w&#95;512:</span></CodeLine>
<Link id="l04389" /><CodeLine lineNumber="4389"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrl&#95;d&#95;512:</span></CodeLine>
<Link id="l04390" /><CodeLine lineNumber="4390"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrl&#95;q&#95;512:</span></CodeLine>
<Link id="l04391" /><CodeLine lineNumber="4391"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psra&#95;w&#95;512:</span></CodeLine>
<Link id="l04392" /><CodeLine lineNumber="4392"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psra&#95;d&#95;512:</span></CodeLine>
<Link id="l04393" /><CodeLine lineNumber="4393"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psra&#95;q&#95;512:</span></CodeLine>
<Link id="l04394" /><CodeLine lineNumber="4394"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrli&#95;w&#95;512:</span></CodeLine>
<Link id="l04395" /><CodeLine lineNumber="4395"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrli&#95;d&#95;512:</span></CodeLine>
<Link id="l04396" /><CodeLine lineNumber="4396"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrli&#95;q&#95;512:</span></CodeLine>
<Link id="l04397" /><CodeLine lineNumber="4397"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrai&#95;w&#95;512:</span></CodeLine>
<Link id="l04398" /><CodeLine lineNumber="4398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrai&#95;d&#95;512:</span></CodeLine>
<Link id="l04399" /><CodeLine lineNumber="4399"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrai&#95;q&#95;512:</span></CodeLine>
<Link id="l04400" /><CodeLine lineNumber="4400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psra&#95;q&#95;256:</span></CodeLine>
<Link id="l04401" /><CodeLine lineNumber="4401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psra&#95;q&#95;128:</span></CodeLine>
<Link id="l04402" /><CodeLine lineNumber="4402"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrai&#95;q&#95;256:</span></CodeLine>
<Link id="l04403" /><CodeLine lineNumber="4403"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrai&#95;q&#95;128:</span></CodeLine>
<Link id="l04404" /><CodeLine lineNumber="4404"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psll&#95;w:</span></CodeLine>
<Link id="l04405" /><CodeLine lineNumber="4405"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psll&#95;d:</span></CodeLine>
<Link id="l04406" /><CodeLine lineNumber="4406"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psll&#95;q:</span></CodeLine>
<Link id="l04407" /><CodeLine lineNumber="4407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pslli&#95;w:</span></CodeLine>
<Link id="l04408" /><CodeLine lineNumber="4408"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pslli&#95;d:</span></CodeLine>
<Link id="l04409" /><CodeLine lineNumber="4409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pslli&#95;q:</span></CodeLine>
<Link id="l04410" /><CodeLine lineNumber="4410"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrl&#95;w:</span></CodeLine>
<Link id="l04411" /><CodeLine lineNumber="4411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrl&#95;d:</span></CodeLine>
<Link id="l04412" /><CodeLine lineNumber="4412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrl&#95;q:</span></CodeLine>
<Link id="l04413" /><CodeLine lineNumber="4413"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psra&#95;w:</span></CodeLine>
<Link id="l04414" /><CodeLine lineNumber="4414"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psra&#95;d:</span></CodeLine>
<Link id="l04415" /><CodeLine lineNumber="4415"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrli&#95;w:</span></CodeLine>
<Link id="l04416" /><CodeLine lineNumber="4416"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrli&#95;d:</span></CodeLine>
<Link id="l04417" /><CodeLine lineNumber="4417"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrli&#95;q:</span></CodeLine>
<Link id="l04418" /><CodeLine lineNumber="4418"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrai&#95;w:</span></CodeLine>
<Link id="l04419" /><CodeLine lineNumber="4419"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrai&#95;d:</span></CodeLine>
<Link id="l04420" /><CodeLine lineNumber="4420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psll&#95;w:</span></CodeLine>
<Link id="l04421" /><CodeLine lineNumber="4421"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psll&#95;d:</span></CodeLine>
<Link id="l04422" /><CodeLine lineNumber="4422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psll&#95;q:</span></CodeLine>
<Link id="l04423" /><CodeLine lineNumber="4423"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;pslli&#95;w:</span></CodeLine>
<Link id="l04424" /><CodeLine lineNumber="4424"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;pslli&#95;d:</span></CodeLine>
<Link id="l04425" /><CodeLine lineNumber="4425"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;pslli&#95;q:</span></CodeLine>
<Link id="l04426" /><CodeLine lineNumber="4426"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrl&#95;w:</span></CodeLine>
<Link id="l04427" /><CodeLine lineNumber="4427"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrl&#95;d:</span></CodeLine>
<Link id="l04428" /><CodeLine lineNumber="4428"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrl&#95;q:</span></CodeLine>
<Link id="l04429" /><CodeLine lineNumber="4429"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psra&#95;w:</span></CodeLine>
<Link id="l04430" /><CodeLine lineNumber="4430"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psra&#95;d:</span></CodeLine>
<Link id="l04431" /><CodeLine lineNumber="4431"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrli&#95;w:</span></CodeLine>
<Link id="l04432" /><CodeLine lineNumber="4432"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrli&#95;d:</span></CodeLine>
<Link id="l04433" /><CodeLine lineNumber="4433"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrli&#95;q:</span></CodeLine>
<Link id="l04434" /><CodeLine lineNumber="4434"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrai&#95;w:</span></CodeLine>
<Link id="l04435" /><CodeLine lineNumber="4435"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psrai&#95;d:</span></CodeLine>
<Link id="l04436" /><CodeLine lineNumber="4436"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psll&#95;w:</span></CodeLine>
<Link id="l04437" /><CodeLine lineNumber="4437"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psll&#95;d:</span></CodeLine>
<Link id="l04438" /><CodeLine lineNumber="4438"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psll&#95;q:</span></CodeLine>
<Link id="l04439" /><CodeLine lineNumber="4439"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;pslli&#95;w:</span></CodeLine>
<Link id="l04440" /><CodeLine lineNumber="4440"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;pslli&#95;d:</span></CodeLine>
<Link id="l04441" /><CodeLine lineNumber="4441"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;pslli&#95;q:</span></CodeLine>
<Link id="l04442" /><CodeLine lineNumber="4442"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrl&#95;w:</span></CodeLine>
<Link id="l04443" /><CodeLine lineNumber="4443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrl&#95;d:</span></CodeLine>
<Link id="l04444" /><CodeLine lineNumber="4444"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrl&#95;q:</span></CodeLine>
<Link id="l04445" /><CodeLine lineNumber="4445"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psra&#95;w:</span></CodeLine>
<Link id="l04446" /><CodeLine lineNumber="4446"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psra&#95;d:</span></CodeLine>
<Link id="l04447" /><CodeLine lineNumber="4447"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrli&#95;w:</span></CodeLine>
<Link id="l04448" /><CodeLine lineNumber="4448"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrli&#95;d:</span></CodeLine>
<Link id="l04449" /><CodeLine lineNumber="4449"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrli&#95;q:</span></CodeLine>
<Link id="l04450" /><CodeLine lineNumber="4450"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrai&#95;w:</span></CodeLine>
<Link id="l04451" /><CodeLine lineNumber="4451"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psrai&#95;d:</span></CodeLine>
<Link id="l04452" /><CodeLine lineNumber="4452"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;rshrn:</span></CodeLine>
<Link id="l04453" /><CodeLine lineNumber="4453"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqrshl:</span></CodeLine>
<Link id="l04454" /><CodeLine lineNumber="4454"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqrshrn:</span></CodeLine>
<Link id="l04455" /><CodeLine lineNumber="4455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqrshrun:</span></CodeLine>
<Link id="l04456" /><CodeLine lineNumber="4456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqshl:</span></CodeLine>
<Link id="l04457" /><CodeLine lineNumber="4457"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqshlu:</span></CodeLine>
<Link id="l04458" /><CodeLine lineNumber="4458"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqshrn:</span></CodeLine>
<Link id="l04459" /><CodeLine lineNumber="4459"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sqshrun:</span></CodeLine>
<Link id="l04460" /><CodeLine lineNumber="4460"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;srshl:</span></CodeLine>
<Link id="l04461" /><CodeLine lineNumber="4461"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;sshl:</span></CodeLine>
<Link id="l04462" /><CodeLine lineNumber="4462"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;uqrshl:</span></CodeLine>
<Link id="l04463" /><CodeLine lineNumber="4463"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;uqrshrn:</span></CodeLine>
<Link id="l04464" /><CodeLine lineNumber="4464"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;uqshl:</span></CodeLine>
<Link id="l04465" /><CodeLine lineNumber="4465"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;uqshrn:</span></CodeLine>
<Link id="l04466" /><CodeLine lineNumber="4466"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;urshl:</span></CodeLine>
<Link id="l04467" /><CodeLine lineNumber="4467"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;ushl:</span></CodeLine>
<Link id="l04468" /><CodeLine lineNumber="4468"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Not handled here: aarch64&#95;neon&#95;vsli (vector shift left and insert)</span></CodeLine>
<Link id="l04469" /><CodeLine lineNumber="4469"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c328e6af190112474f8c694ccb59dc">handleVectorShiftIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightComment">/&#42; Variable &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04470" /><CodeLine lineNumber="4470"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04471" /><CodeLine lineNumber="4471"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psllv&#95;d:</span></CodeLine>
<Link id="l04472" /><CodeLine lineNumber="4472"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psllv&#95;d&#95;256:</span></CodeLine>
<Link id="l04473" /><CodeLine lineNumber="4473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psllv&#95;d&#95;512:</span></CodeLine>
<Link id="l04474" /><CodeLine lineNumber="4474"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psllv&#95;q:</span></CodeLine>
<Link id="l04475" /><CodeLine lineNumber="4475"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psllv&#95;q&#95;256:</span></CodeLine>
<Link id="l04476" /><CodeLine lineNumber="4476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psllv&#95;q&#95;512:</span></CodeLine>
<Link id="l04477" /><CodeLine lineNumber="4477"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrlv&#95;d:</span></CodeLine>
<Link id="l04478" /><CodeLine lineNumber="4478"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrlv&#95;d&#95;256:</span></CodeLine>
<Link id="l04479" /><CodeLine lineNumber="4479"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrlv&#95;d&#95;512:</span></CodeLine>
<Link id="l04480" /><CodeLine lineNumber="4480"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrlv&#95;q:</span></CodeLine>
<Link id="l04481" /><CodeLine lineNumber="4481"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrlv&#95;q&#95;256:</span></CodeLine>
<Link id="l04482" /><CodeLine lineNumber="4482"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrlv&#95;q&#95;512:</span></CodeLine>
<Link id="l04483" /><CodeLine lineNumber="4483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrav&#95;d:</span></CodeLine>
<Link id="l04484" /><CodeLine lineNumber="4484"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psrav&#95;d&#95;256:</span></CodeLine>
<Link id="l04485" /><CodeLine lineNumber="4485"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrav&#95;d&#95;512:</span></CodeLine>
<Link id="l04486" /><CodeLine lineNumber="4486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrav&#95;q&#95;128:</span></CodeLine>
<Link id="l04487" /><CodeLine lineNumber="4487"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrav&#95;q&#95;256:</span></CodeLine>
<Link id="l04488" /><CodeLine lineNumber="4488"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;psrav&#95;q&#95;512:</span></CodeLine>
<Link id="l04489" /><CodeLine lineNumber="4489"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c328e6af190112474f8c694ccb59dc">handleVectorShiftIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightComment">/&#42; Variable &#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04490" /><CodeLine lineNumber="4490"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04491" /><CodeLine lineNumber="4491"></CodeLine>
<Link id="l04492" /><CodeLine lineNumber="4492"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packsswb&#95;128:</span></CodeLine>
<Link id="l04493" /><CodeLine lineNumber="4493"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packssdw&#95;128:</span></CodeLine>
<Link id="l04494" /><CodeLine lineNumber="4494"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;packuswb&#95;128:</span></CodeLine>
<Link id="l04495" /><CodeLine lineNumber="4495"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;packusdw:</span></CodeLine>
<Link id="l04496" /><CodeLine lineNumber="4496"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packsswb:</span></CodeLine>
<Link id="l04497" /><CodeLine lineNumber="4497"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packssdw:</span></CodeLine>
<Link id="l04498" /><CodeLine lineNumber="4498"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packuswb:</span></CodeLine>
<Link id="l04499" /><CodeLine lineNumber="4499"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;packusdw:</span></CodeLine>
<Link id="l04500" /><CodeLine lineNumber="4500"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acaaee38930abb5a8c5d6ff71045eda30">handleVectorPackIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04501" /><CodeLine lineNumber="4501"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04502" /><CodeLine lineNumber="4502"></CodeLine>
<Link id="l04503" /><CodeLine lineNumber="4503"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;pblendvb:</span></CodeLine>
<Link id="l04504" /><CodeLine lineNumber="4504"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;blendvpd:</span></CodeLine>
<Link id="l04505" /><CodeLine lineNumber="4505"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;blendvps:</span></CodeLine>
<Link id="l04506" /><CodeLine lineNumber="4506"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;blendv&#95;pd&#95;256:</span></CodeLine>
<Link id="l04507" /><CodeLine lineNumber="4507"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;blendv&#95;ps&#95;256:</span></CodeLine>
<Link id="l04508" /><CodeLine lineNumber="4508"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pblendvb:</span></CodeLine>
<Link id="l04509" /><CodeLine lineNumber="4509"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af57d015c7e57a42f4a73d6414d8d0453">handleBlendvIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04510" /><CodeLine lineNumber="4510"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04511" /><CodeLine lineNumber="4511"></CodeLine>
<Link id="l04512" /><CodeLine lineNumber="4512"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;dp&#95;ps&#95;256:</span></CodeLine>
<Link id="l04513" /><CodeLine lineNumber="4513"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;dppd:</span></CodeLine>
<Link id="l04514" /><CodeLine lineNumber="4514"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;dpps:</span></CodeLine>
<Link id="l04515" /><CodeLine lineNumber="4515"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa28fe1a3de7cc0e732f5d7ee1dc5adbd">handleDppIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04516" /><CodeLine lineNumber="4516"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04517" /><CodeLine lineNumber="4517"></CodeLine>
<Link id="l04518" /><CodeLine lineNumber="4518"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packsswb:</span></CodeLine>
<Link id="l04519" /><CodeLine lineNumber="4519"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packuswb:</span></CodeLine>
<Link id="l04520" /><CodeLine lineNumber="4520"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acaaee38930abb5a8c5d6ff71045eda30">handleVectorPackIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 16);</span></CodeLine>
<Link id="l04521" /><CodeLine lineNumber="4521"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04522" /><CodeLine lineNumber="4522"></CodeLine>
<Link id="l04523" /><CodeLine lineNumber="4523"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;packssdw:</span></CodeLine>
<Link id="l04524" /><CodeLine lineNumber="4524"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acaaee38930abb5a8c5d6ff71045eda30">handleVectorPackIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 32);</span></CodeLine>
<Link id="l04525" /><CodeLine lineNumber="4525"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04526" /><CodeLine lineNumber="4526"></CodeLine>
<Link id="l04527" /><CodeLine lineNumber="4527"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;psad&#95;bw:</span></CodeLine>
<Link id="l04528" /><CodeLine lineNumber="4528"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac03d3c26f38bacbd611de31932ef80b4">handleVectorSadIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04529" /><CodeLine lineNumber="4529"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04530" /><CodeLine lineNumber="4530"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;psad&#95;bw:</span></CodeLine>
<Link id="l04531" /><CodeLine lineNumber="4531"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;psad&#95;bw:</span></CodeLine>
<Link id="l04532" /><CodeLine lineNumber="4532"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ac03d3c26f38bacbd611de31932ef80b4">handleVectorSadIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04533" /><CodeLine lineNumber="4533"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04534" /><CodeLine lineNumber="4534"></CodeLine>
<Link id="l04535" /><CodeLine lineNumber="4535"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;pmadd&#95;wd:</span></CodeLine>
<Link id="l04536" /><CodeLine lineNumber="4536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pmadd&#95;wd:</span></CodeLine>
<Link id="l04537" /><CodeLine lineNumber="4537"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;pmadd&#95;ub&#95;sw&#95;128:</span></CodeLine>
<Link id="l04538" /><CodeLine lineNumber="4538"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;pmadd&#95;ub&#95;sw:</span></CodeLine>
<Link id="l04539" /><CodeLine lineNumber="4539"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a60a1bcee02000668d052f9d696ada2e9">handleVectorPmaddIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04540" /><CodeLine lineNumber="4540"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04541" /><CodeLine lineNumber="4541"></CodeLine>
<Link id="l04542" /><CodeLine lineNumber="4542"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;pmadd&#95;ub&#95;sw:</span></CodeLine>
<Link id="l04543" /><CodeLine lineNumber="4543"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a60a1bcee02000668d052f9d696ada2e9">handleVectorPmaddIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 8);</span></CodeLine>
<Link id="l04544" /><CodeLine lineNumber="4544"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04545" /><CodeLine lineNumber="4545"></CodeLine>
<Link id="l04546" /><CodeLine lineNumber="4546"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;mmx&#95;pmadd&#95;wd:</span></CodeLine>
<Link id="l04547" /><CodeLine lineNumber="4547"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a60a1bcee02000668d052f9d696ada2e9">handleVectorPmaddIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 16);</span></CodeLine>
<Link id="l04548" /><CodeLine lineNumber="4548"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04549" /><CodeLine lineNumber="4549"></CodeLine>
<Link id="l04550" /><CodeLine lineNumber="4550"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cmp&#95;ss:</span></CodeLine>
<Link id="l04551" /><CodeLine lineNumber="4551"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cmp&#95;sd:</span></CodeLine>
<Link id="l04552" /><CodeLine lineNumber="4552"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comieq&#95;ss:</span></CodeLine>
<Link id="l04553" /><CodeLine lineNumber="4553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comilt&#95;ss:</span></CodeLine>
<Link id="l04554" /><CodeLine lineNumber="4554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comile&#95;ss:</span></CodeLine>
<Link id="l04555" /><CodeLine lineNumber="4555"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comigt&#95;ss:</span></CodeLine>
<Link id="l04556" /><CodeLine lineNumber="4556"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comige&#95;ss:</span></CodeLine>
<Link id="l04557" /><CodeLine lineNumber="4557"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;comineq&#95;ss:</span></CodeLine>
<Link id="l04558" /><CodeLine lineNumber="4558"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomieq&#95;ss:</span></CodeLine>
<Link id="l04559" /><CodeLine lineNumber="4559"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomilt&#95;ss:</span></CodeLine>
<Link id="l04560" /><CodeLine lineNumber="4560"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomile&#95;ss:</span></CodeLine>
<Link id="l04561" /><CodeLine lineNumber="4561"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomigt&#95;ss:</span></CodeLine>
<Link id="l04562" /><CodeLine lineNumber="4562"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomige&#95;ss:</span></CodeLine>
<Link id="l04563" /><CodeLine lineNumber="4563"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;ucomineq&#95;ss:</span></CodeLine>
<Link id="l04564" /><CodeLine lineNumber="4564"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comieq&#95;sd:</span></CodeLine>
<Link id="l04565" /><CodeLine lineNumber="4565"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comilt&#95;sd:</span></CodeLine>
<Link id="l04566" /><CodeLine lineNumber="4566"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comile&#95;sd:</span></CodeLine>
<Link id="l04567" /><CodeLine lineNumber="4567"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comigt&#95;sd:</span></CodeLine>
<Link id="l04568" /><CodeLine lineNumber="4568"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comige&#95;sd:</span></CodeLine>
<Link id="l04569" /><CodeLine lineNumber="4569"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;comineq&#95;sd:</span></CodeLine>
<Link id="l04570" /><CodeLine lineNumber="4570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomieq&#95;sd:</span></CodeLine>
<Link id="l04571" /><CodeLine lineNumber="4571"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomilt&#95;sd:</span></CodeLine>
<Link id="l04572" /><CodeLine lineNumber="4572"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomile&#95;sd:</span></CodeLine>
<Link id="l04573" /><CodeLine lineNumber="4573"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomigt&#95;sd:</span></CodeLine>
<Link id="l04574" /><CodeLine lineNumber="4574"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomige&#95;sd:</span></CodeLine>
<Link id="l04575" /><CodeLine lineNumber="4575"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;ucomineq&#95;sd:</span></CodeLine>
<Link id="l04576" /><CodeLine lineNumber="4576"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a3fc06177748e14bf8ef287dc4347dde3">handleVectorCompareScalarIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04577" /><CodeLine lineNumber="4577"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04578" /><CodeLine lineNumber="4578"></CodeLine>
<Link id="l04579" /><CodeLine lineNumber="4579"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;cmp&#95;pd&#95;256:</span></CodeLine>
<Link id="l04580" /><CodeLine lineNumber="4580"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;cmp&#95;ps&#95;256:</span></CodeLine>
<Link id="l04581" /><CodeLine lineNumber="4581"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;cmp&#95;pd:</span></CodeLine>
<Link id="l04582" /><CodeLine lineNumber="4582"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;cmp&#95;ps:</span></CodeLine>
<Link id="l04583" /><CodeLine lineNumber="4583"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2dedad065b777ac076ac9f2b3dc8c013">handleVectorComparePackedIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04584" /><CodeLine lineNumber="4584"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04585" /><CodeLine lineNumber="4585"></CodeLine>
<Link id="l04586" /><CodeLine lineNumber="4586"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;bextr&#95;32:</span></CodeLine>
<Link id="l04587" /><CodeLine lineNumber="4587"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;bextr&#95;64:</span></CodeLine>
<Link id="l04588" /><CodeLine lineNumber="4588"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;bzhi&#95;32:</span></CodeLine>
<Link id="l04589" /><CodeLine lineNumber="4589"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;bzhi&#95;64:</span></CodeLine>
<Link id="l04590" /><CodeLine lineNumber="4590"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;pdep&#95;32:</span></CodeLine>
<Link id="l04591" /><CodeLine lineNumber="4591"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;pdep&#95;64:</span></CodeLine>
<Link id="l04592" /><CodeLine lineNumber="4592"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;pext&#95;32:</span></CodeLine>
<Link id="l04593" /><CodeLine lineNumber="4593"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;bmi&#95;pext&#95;64:</span></CodeLine>
<Link id="l04594" /><CodeLine lineNumber="4594"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a422552f3cad093347a5f83d234925e9d">handleBmiIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04595" /><CodeLine lineNumber="4595"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04596" /><CodeLine lineNumber="4596"></CodeLine>
<Link id="l04597" /><CodeLine lineNumber="4597"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;pclmulqdq:</span></CodeLine>
<Link id="l04598" /><CodeLine lineNumber="4598"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;pclmulqdq&#95;256:</span></CodeLine>
<Link id="l04599" /><CodeLine lineNumber="4599"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;pclmulqdq&#95;512:</span></CodeLine>
<Link id="l04600" /><CodeLine lineNumber="4600"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a924a1686eaef2f0a0ded248edc2bdb6c">handlePclmulIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04601" /><CodeLine lineNumber="4601"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04602" /><CodeLine lineNumber="4602"></CodeLine>
<Link id="l04603" /><CodeLine lineNumber="4603"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;round&#95;pd&#95;256:</span></CodeLine>
<Link id="l04604" /><CodeLine lineNumber="4604"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;round&#95;ps&#95;256:</span></CodeLine>
<Link id="l04605" /><CodeLine lineNumber="4605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;round&#95;pd:</span></CodeLine>
<Link id="l04606" /><CodeLine lineNumber="4606"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;round&#95;ps:</span></CodeLine>
<Link id="l04607" /><CodeLine lineNumber="4607"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#add81ddc58cfd39fc90b163af92a71bca">handleRoundPdPsIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04608" /><CodeLine lineNumber="4608"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04609" /><CodeLine lineNumber="4609"></CodeLine>
<Link id="l04610" /><CodeLine lineNumber="4610"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;round&#95;sd:</span></CodeLine>
<Link id="l04611" /><CodeLine lineNumber="4611"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;round&#95;ss:</span></CodeLine>
<Link id="l04612" /><CodeLine lineNumber="4612"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aef9ab401ce01af2ea722f41cfb8e4943">handleUnarySdSsIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04613" /><CodeLine lineNumber="4613"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04614" /><CodeLine lineNumber="4614"></CodeLine>
<Link id="l04615" /><CodeLine lineNumber="4615"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;max&#95;sd:</span></CodeLine>
<Link id="l04616" /><CodeLine lineNumber="4616"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;max&#95;ss:</span></CodeLine>
<Link id="l04617" /><CodeLine lineNumber="4617"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse2&#95;min&#95;sd:</span></CodeLine>
<Link id="l04618" /><CodeLine lineNumber="4618"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse&#95;min&#95;ss:</span></CodeLine>
<Link id="l04619" /><CodeLine lineNumber="4619"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0bde622b06aafdb9eb49069b756563ce">handleBinarySdSsIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04620" /><CodeLine lineNumber="4620"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04621" /><CodeLine lineNumber="4621"></CodeLine>
<Link id="l04622" /><CodeLine lineNumber="4622"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestc&#95;pd:</span></CodeLine>
<Link id="l04623" /><CodeLine lineNumber="4623"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestc&#95;pd&#95;256:</span></CodeLine>
<Link id="l04624" /><CodeLine lineNumber="4624"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestc&#95;ps:</span></CodeLine>
<Link id="l04625" /><CodeLine lineNumber="4625"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestc&#95;ps&#95;256:</span></CodeLine>
<Link id="l04626" /><CodeLine lineNumber="4626"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestnzc&#95;pd:</span></CodeLine>
<Link id="l04627" /><CodeLine lineNumber="4627"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestnzc&#95;pd&#95;256:</span></CodeLine>
<Link id="l04628" /><CodeLine lineNumber="4628"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestnzc&#95;ps:</span></CodeLine>
<Link id="l04629" /><CodeLine lineNumber="4629"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestnzc&#95;ps&#95;256:</span></CodeLine>
<Link id="l04630" /><CodeLine lineNumber="4630"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestz&#95;pd:</span></CodeLine>
<Link id="l04631" /><CodeLine lineNumber="4631"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestz&#95;pd&#95;256:</span></CodeLine>
<Link id="l04632" /><CodeLine lineNumber="4632"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestz&#95;ps:</span></CodeLine>
<Link id="l04633" /><CodeLine lineNumber="4633"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;vtestz&#95;ps&#95;256:</span></CodeLine>
<Link id="l04634" /><CodeLine lineNumber="4634"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;ptestc&#95;256:</span></CodeLine>
<Link id="l04635" /><CodeLine lineNumber="4635"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;ptestnzc&#95;256:</span></CodeLine>
<Link id="l04636" /><CodeLine lineNumber="4636"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;ptestz&#95;256:</span></CodeLine>
<Link id="l04637" /><CodeLine lineNumber="4637"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;ptestc:</span></CodeLine>
<Link id="l04638" /><CodeLine lineNumber="4638"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;ptestnzc:</span></CodeLine>
<Link id="l04639" /><CodeLine lineNumber="4639"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse41&#95;ptestz:</span></CodeLine>
<Link id="l04640" /><CodeLine lineNumber="4640"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c11aacbd4098eca944c41583e759d0">handleVtestIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04641" /><CodeLine lineNumber="4641"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04642" /><CodeLine lineNumber="4642"></CodeLine>
<Link id="l04643" /><CodeLine lineNumber="4643"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hadd&#95;ps:</span></CodeLine>
<Link id="l04644" /><CodeLine lineNumber="4644"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hadd&#95;pd:</span></CodeLine>
<Link id="l04645" /><CodeLine lineNumber="4645"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;d:</span></CodeLine>
<Link id="l04646" /><CodeLine lineNumber="4646"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;d&#95;128:</span></CodeLine>
<Link id="l04647" /><CodeLine lineNumber="4647"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;w:</span></CodeLine>
<Link id="l04648" /><CodeLine lineNumber="4648"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;w&#95;128:</span></CodeLine>
<Link id="l04649" /><CodeLine lineNumber="4649"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;sw:</span></CodeLine>
<Link id="l04650" /><CodeLine lineNumber="4650"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phadd&#95;sw&#95;128:</span></CodeLine>
<Link id="l04651" /><CodeLine lineNumber="4651"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hadd&#95;pd&#95;256:</span></CodeLine>
<Link id="l04652" /><CodeLine lineNumber="4652"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hadd&#95;ps&#95;256:</span></CodeLine>
<Link id="l04653" /><CodeLine lineNumber="4653"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phadd&#95;d:</span></CodeLine>
<Link id="l04654" /><CodeLine lineNumber="4654"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phadd&#95;w:</span></CodeLine>
<Link id="l04655" /><CodeLine lineNumber="4655"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phadd&#95;sw:</span></CodeLine>
<Link id="l04656" /><CodeLine lineNumber="4656"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hsub&#95;ps:</span></CodeLine>
<Link id="l04657" /><CodeLine lineNumber="4657"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;sse3&#95;hsub&#95;pd:</span></CodeLine>
<Link id="l04658" /><CodeLine lineNumber="4658"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;d:</span></CodeLine>
<Link id="l04659" /><CodeLine lineNumber="4659"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;d&#95;128:</span></CodeLine>
<Link id="l04660" /><CodeLine lineNumber="4660"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;w:</span></CodeLine>
<Link id="l04661" /><CodeLine lineNumber="4661"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;w&#95;128:</span></CodeLine>
<Link id="l04662" /><CodeLine lineNumber="4662"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;sw:</span></CodeLine>
<Link id="l04663" /><CodeLine lineNumber="4663"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;ssse3&#95;phsub&#95;sw&#95;128:</span></CodeLine>
<Link id="l04664" /><CodeLine lineNumber="4664"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hsub&#95;pd&#95;256:</span></CodeLine>
<Link id="l04665" /><CodeLine lineNumber="4665"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;hsub&#95;ps&#95;256:</span></CodeLine>
<Link id="l04666" /><CodeLine lineNumber="4666"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;d:</span></CodeLine>
<Link id="l04667" /><CodeLine lineNumber="4667"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;w:</span></CodeLine>
<Link id="l04668" /><CodeLine lineNumber="4668"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;phsub&#95;sw: &#123;</span></CodeLine>
<Link id="l04669" /><CodeLine lineNumber="4669"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6fbb73043c2f82e97b7a704a91f47dc1">handleAVXHorizontalAddSubIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04670" /><CodeLine lineNumber="4670"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04671" /><CodeLine lineNumber="4671"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04672" /><CodeLine lineNumber="4672"></CodeLine>
<Link id="l04673" /><CodeLine lineNumber="4673"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskstore&#95;ps:</span></CodeLine>
<Link id="l04674" /><CodeLine lineNumber="4674"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskstore&#95;pd:</span></CodeLine>
<Link id="l04675" /><CodeLine lineNumber="4675"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskstore&#95;ps&#95;256:</span></CodeLine>
<Link id="l04676" /><CodeLine lineNumber="4676"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskstore&#95;pd&#95;256:</span></CodeLine>
<Link id="l04677" /><CodeLine lineNumber="4677"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskstore&#95;d:</span></CodeLine>
<Link id="l04678" /><CodeLine lineNumber="4678"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskstore&#95;q:</span></CodeLine>
<Link id="l04679" /><CodeLine lineNumber="4679"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskstore&#95;d&#95;256:</span></CodeLine>
<Link id="l04680" /><CodeLine lineNumber="4680"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskstore&#95;q&#95;256: &#123;</span></CodeLine>
<Link id="l04681" /><CodeLine lineNumber="4681"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abba654ce68a6aba9f7cbd731b0917877">handleAVXMaskedStore</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04682" /><CodeLine lineNumber="4682"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04683" /><CodeLine lineNumber="4683"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04684" /><CodeLine lineNumber="4684"></CodeLine>
<Link id="l04685" /><CodeLine lineNumber="4685"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskload&#95;ps:</span></CodeLine>
<Link id="l04686" /><CodeLine lineNumber="4686"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskload&#95;pd:</span></CodeLine>
<Link id="l04687" /><CodeLine lineNumber="4687"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskload&#95;ps&#95;256:</span></CodeLine>
<Link id="l04688" /><CodeLine lineNumber="4688"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx&#95;maskload&#95;pd&#95;256:</span></CodeLine>
<Link id="l04689" /><CodeLine lineNumber="4689"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskload&#95;d:</span></CodeLine>
<Link id="l04690" /><CodeLine lineNumber="4690"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskload&#95;q:</span></CodeLine>
<Link id="l04691" /><CodeLine lineNumber="4691"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskload&#95;d&#95;256:</span></CodeLine>
<Link id="l04692" /><CodeLine lineNumber="4692"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx2&#95;maskload&#95;q&#95;256: &#123;</span></CodeLine>
<Link id="l04693" /><CodeLine lineNumber="4693"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a048c7023875711345d33899f3a59f3e2">handleAVXMaskedLoad</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04694" /><CodeLine lineNumber="4694"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04695" /><CodeLine lineNumber="4695"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04696" /><CodeLine lineNumber="4696"></CodeLine>
<Link id="l04697" /><CodeLine lineNumber="4697"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Packed</span></CodeLine>
<Link id="l04698" /><CodeLine lineNumber="4698"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;min&#95;ps&#95;512:</span></CodeLine>
<Link id="l04699" /><CodeLine lineNumber="4699"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;min&#95;pd&#95;512:</span></CodeLine>
<Link id="l04700" /><CodeLine lineNumber="4700"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;max&#95;ps&#95;512:</span></CodeLine>
<Link id="l04701" /><CodeLine lineNumber="4701"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::x86&#95;avx512&#95;max&#95;pd&#95;512: &#123;</span></CodeLine>
<Link id="l04702" /><CodeLine lineNumber="4702"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// These AVX512 variants contain the rounding mode as a trailing flag.</span></CodeLine>
<Link id="l04703" /><CodeLine lineNumber="4703"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Earlier variants do not have a trailing flag and are already handled</span></CodeLine>
<Link id="l04704" /><CodeLine lineNumber="4704"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// by maybeHandleSimpleNomemIntrinsic(I, 0) via handleUnknownIntrinsic.</span></CodeLine>
<Link id="l04705" /><CodeLine lineNumber="4705"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/lib/target/aarch64/disassembler/aarch64disassembler-cpp/#abdb086b34295fb7aa09493c62d798465">Success</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9c9266376e710920a1bd7999ed9c8963">maybeHandleSimpleNomemIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightComment">/&#42;trailingFlags=&#42;/</span><span class="doxyHighlight">1);</span></CodeLine>
<Link id="l04706" /><CodeLine lineNumber="4706"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/lib/target/aarch64/disassembler/aarch64disassembler-cpp/#abdb086b34295fb7aa09493c62d798465">Success</a>);</span></CodeLine>
<Link id="l04707" /><CodeLine lineNumber="4707"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04708" /><CodeLine lineNumber="4708"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04709" /><CodeLine lineNumber="4709"></CodeLine>
<Link id="l04710" /><CodeLine lineNumber="4710"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::fshl:</span></CodeLine>
<Link id="l04711" /><CodeLine lineNumber="4711"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::fshr:</span></CodeLine>
<Link id="l04712" /><CodeLine lineNumber="4712"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a04fa6c52e825a7d994a3a5eeb1cc4549">handleFunnelShift</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04713" /><CodeLine lineNumber="4713"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04714" /><CodeLine lineNumber="4714"></CodeLine>
<Link id="l04715" /><CodeLine lineNumber="4715"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::is&#95;constant:</span></CodeLine>
<Link id="l04716" /><CodeLine lineNumber="4716"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The result of llvm.is.constant() is always defined.</span></CodeLine>
<Link id="l04717" /><CodeLine lineNumber="4717"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l04718" /><CodeLine lineNumber="4718"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l04719" /><CodeLine lineNumber="4719"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04720" /><CodeLine lineNumber="4720"></CodeLine>
<Link id="l04721" /><CodeLine lineNumber="4721"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st1x2:</span></CodeLine>
<Link id="l04722" /><CodeLine lineNumber="4722"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st1x3:</span></CodeLine>
<Link id="l04723" /><CodeLine lineNumber="4723"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st1x4:</span></CodeLine>
<Link id="l04724" /><CodeLine lineNumber="4724"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st2:</span></CodeLine>
<Link id="l04725" /><CodeLine lineNumber="4725"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st3:</span></CodeLine>
<Link id="l04726" /><CodeLine lineNumber="4726"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st4: &#123;</span></CodeLine>
<Link id="l04727" /><CodeLine lineNumber="4727"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa78bfa47c700608c53890cc25cd44a5b">handleNEONVectorStoreIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04728" /><CodeLine lineNumber="4728"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04729" /><CodeLine lineNumber="4729"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04730" /><CodeLine lineNumber="4730"></CodeLine>
<Link id="l04731" /><CodeLine lineNumber="4731"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st2lane:</span></CodeLine>
<Link id="l04732" /><CodeLine lineNumber="4732"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st3lane:</span></CodeLine>
<Link id="l04733" /><CodeLine lineNumber="4733"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;st4lane: &#123;</span></CodeLine>
<Link id="l04734" /><CodeLine lineNumber="4734"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa78bfa47c700608c53890cc25cd44a5b">handleNEONVectorStoreIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04735" /><CodeLine lineNumber="4735"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04736" /><CodeLine lineNumber="4736"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04737" /><CodeLine lineNumber="4737"></CodeLine>
<Link id="l04738" /><CodeLine lineNumber="4738"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Arm NEON vector table intrinsics have the source/table register(s) as</span></CodeLine>
<Link id="l04739" /><CodeLine lineNumber="4739"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// arguments, followed by the index register. They return the output.</span></CodeLine>
<Link id="l04740" /><CodeLine lineNumber="4740"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04741" /><CodeLine lineNumber="4741"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#39;TBL writes a zero if an index is out-of-range, while TBX leaves the</span></CodeLine>
<Link id="l04742" /><CodeLine lineNumber="4742"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  original value unchanged in the destination register.&#39;</span></CodeLine>
<Link id="l04743" /><CodeLine lineNumber="4743"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Conveniently, zero denotes a clean shadow, which means out-of-range</span></CodeLine>
<Link id="l04744" /><CodeLine lineNumber="4744"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// indices for TBL will initialize the user data with zero and also clean</span></CodeLine>
<Link id="l04745" /><CodeLine lineNumber="4745"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the shadow. (For TBX, neither the user data nor the shadow will be</span></CodeLine>
<Link id="l04746" /><CodeLine lineNumber="4746"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// updated, which is also correct.)</span></CodeLine>
<Link id="l04747" /><CodeLine lineNumber="4747"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbl1:</span></CodeLine>
<Link id="l04748" /><CodeLine lineNumber="4748"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbl2:</span></CodeLine>
<Link id="l04749" /><CodeLine lineNumber="4749"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbl3:</span></CodeLine>
<Link id="l04750" /><CodeLine lineNumber="4750"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbl4:</span></CodeLine>
<Link id="l04751" /><CodeLine lineNumber="4751"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbx1:</span></CodeLine>
<Link id="l04752" /><CodeLine lineNumber="4752"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbx2:</span></CodeLine>
<Link id="l04753" /><CodeLine lineNumber="4753"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbx3:</span></CodeLine>
<Link id="l04754" /><CodeLine lineNumber="4754"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;tbx4: &#123;</span></CodeLine>
<Link id="l04755" /><CodeLine lineNumber="4755"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The last trailing argument (index register) should be handled verbatim</span></CodeLine>
<Link id="l04756" /><CodeLine lineNumber="4756"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a94631928dd87cd8134a31c5fb3168c70">handleIntrinsicByApplyingToShadow</a>(</span></CodeLine>
<Link id="l04757" /><CodeLine lineNumber="4757"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightComment">/&#42;shadowIntrinsicID=&#42;/</span><span class="doxyHighlight"><a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIntrinsicID(),</span></CodeLine>
<Link id="l04758" /><CodeLine lineNumber="4758"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">/&#42;trailingVerbatimArgs&#42;/</span><span class="doxyHighlight"> 1);</span></CodeLine>
<Link id="l04759" /><CodeLine lineNumber="4759"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04760" /><CodeLine lineNumber="4760"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04761" /><CodeLine lineNumber="4761"></CodeLine>
<Link id="l04762" /><CodeLine lineNumber="4762"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;fmulx:</span></CodeLine>
<Link id="l04763" /><CodeLine lineNumber="4763"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;pmul:</span></CodeLine>
<Link id="l04764" /><CodeLine lineNumber="4764"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;pmull:</span></CodeLine>
<Link id="l04765" /><CodeLine lineNumber="4765"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;smull:</span></CodeLine>
<Link id="l04766" /><CodeLine lineNumber="4766"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;pmull64:</span></CodeLine>
<Link id="l04767" /><CodeLine lineNumber="4767"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::aarch64&#95;neon&#95;umull: &#123;</span></CodeLine>
<Link id="l04768" /><CodeLine lineNumber="4768"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af56d49d9b0002920b7190ddb0f3585ff">handleNEONVectorMultiplyIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04769" /><CodeLine lineNumber="4769"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04770" /><CodeLine lineNumber="4770"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04771" /><CodeLine lineNumber="4771"></CodeLine>
<Link id="l04772" /><CodeLine lineNumber="4772"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04773" /><CodeLine lineNumber="4773"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a077e9376af4a6c07ade5704887b2fd49">handleUnknownIntrinsic</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l04774" /><CodeLine lineNumber="4774"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a232a0fe878bb0a5a47219195daadca39">visitInstruction</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l04775" /><CodeLine lineNumber="4775"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04776" /><CodeLine lineNumber="4776"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04777" /><CodeLine lineNumber="4777"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04778" /><CodeLine lineNumber="4778"></CodeLine>
<Link id="l04779" /><CodeLine lineNumber="4779" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9b2c0b28c3d1ee4253d2aae4f9172d94"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9b2c0b28c3d1ee4253d2aae4f9172d94">visitLibAtomicLoad</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB) &#123;</span></CodeLine>
<Link id="l04780" /><CodeLine lineNumber="4780"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Since we use getNextNode here, we can&#39;t have CB terminate the BB.</span></CodeLine>
<Link id="l04781" /><CodeLine lineNumber="4781"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CallInst&gt;</a>(CB));</span></CodeLine>
<Link id="l04782" /><CodeLine lineNumber="4782"></CodeLine>
<Link id="l04783" /><CodeLine lineNumber="4783"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;CB);</span></CodeLine>
<Link id="l04784" /><CodeLine lineNumber="4784"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(0);</span></CodeLine>
<Link id="l04785" /><CodeLine lineNumber="4785"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcPtr = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(1);</span></CodeLine>
<Link id="l04786" /><CodeLine lineNumber="4786"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstPtr = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(2);</span></CodeLine>
<Link id="l04787" /><CodeLine lineNumber="4787"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Ordering = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(3);</span></CodeLine>
<Link id="l04788" /><CodeLine lineNumber="4788"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Convert the call to have at least Acquire ordering to make sure</span></CodeLine>
<Link id="l04789" /><CodeLine lineNumber="4789"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the shadow operations aren&#39;t reordered before it.</span></CodeLine>
<Link id="l04790" /><CodeLine lineNumber="4790"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewOrdering =</span></CodeLine>
<Link id="l04791" /><CodeLine lineNumber="4791"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a62bf64531735d133d60ced4e7a4d4e03">makeAddAcquireOrderingTable</a>(IRB), Ordering);</span></CodeLine>
<Link id="l04792" /><CodeLine lineNumber="4792"><span class="doxyHighlight">    CB.<a href="/docs/api/classes/llvm/callbase/#abc10b887caad109288ffceb230493a85">setArgOperand</a>(3, NewOrdering);</span></CodeLine>
<Link id="l04793" /><CodeLine lineNumber="4793"></CodeLine>
<Link id="l04794" /><CodeLine lineNumber="4794"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> NextIRB(&amp;CB);</span></CodeLine>
<Link id="l04795" /><CodeLine lineNumber="4795"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcShadowPtr, &#42;SrcOriginPtr;</span></CodeLine>
<Link id="l04796" /><CodeLine lineNumber="4796"><span class="doxyHighlight">    std::tie(SrcShadowPtr, SrcOriginPtr) =</span></CodeLine>
<Link id="l04797" /><CodeLine lineNumber="4797"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(SrcPtr, NextIRB, NextIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1),</span></CodeLine>
<Link id="l04798" /><CodeLine lineNumber="4798"><span class="doxyHighlight">                           </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04799" /><CodeLine lineNumber="4799"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstShadowPtr =</span></CodeLine>
<Link id="l04800" /><CodeLine lineNumber="4800"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(DstPtr, NextIRB, NextIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1),</span></CodeLine>
<Link id="l04801" /><CodeLine lineNumber="4801"><span class="doxyHighlight">                           </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l04802" /><CodeLine lineNumber="4802"><span class="doxyHighlight">            .first;</span></CodeLine>
<Link id="l04803" /><CodeLine lineNumber="4803"></CodeLine>
<Link id="l04804" /><CodeLine lineNumber="4804"><span class="doxyHighlight">    NextIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(DstShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(1), SrcShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(1), <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l04805" /><CodeLine lineNumber="4805"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l04806" /><CodeLine lineNumber="4806"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcOrigin = NextIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, SrcOriginPtr,</span></CodeLine>
<Link id="l04807" /><CodeLine lineNumber="4807"><span class="doxyHighlight">                                                   <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l04808" /><CodeLine lineNumber="4808"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewOrigin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab630c4065f79030c5d9c17998be71fd3">updateOrigin</a>(SrcOrigin, NextIRB);</span></CodeLine>
<Link id="l04809" /><CodeLine lineNumber="4809"><span class="doxyHighlight">      NextIRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanSetOriginFn, &#123;DstPtr, Size, NewOrigin&#125;);</span></CodeLine>
<Link id="l04810" /><CodeLine lineNumber="4810"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04811" /><CodeLine lineNumber="4811"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04812" /><CodeLine lineNumber="4812"></CodeLine>
<Link id="l04813" /><CodeLine lineNumber="4813" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe25be4a6081ab8cac7639e57970ec3c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe25be4a6081ab8cac7639e57970ec3c">visitLibAtomicStore</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB) &#123;</span></CodeLine>
<Link id="l04814" /><CodeLine lineNumber="4814"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;CB);</span></CodeLine>
<Link id="l04815" /><CodeLine lineNumber="4815"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(0);</span></CodeLine>
<Link id="l04816" /><CodeLine lineNumber="4816"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstPtr = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(2);</span></CodeLine>
<Link id="l04817" /><CodeLine lineNumber="4817"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Ordering = CB.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(3);</span></CodeLine>
<Link id="l04818" /><CodeLine lineNumber="4818"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Convert the call to have at least Release ordering to make sure</span></CodeLine>
<Link id="l04819" /><CodeLine lineNumber="4819"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the shadow operations aren&#39;t reordered after it.</span></CodeLine>
<Link id="l04820" /><CodeLine lineNumber="4820"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewOrdering =</span></CodeLine>
<Link id="l04821" /><CodeLine lineNumber="4821"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a303d984774b5c8af8ee4da0aa1960207">CreateExtractElement</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9ecfbb98ae6069aa910e8aba30aca1d9">makeAddReleaseOrderingTable</a>(IRB), Ordering);</span></CodeLine>
<Link id="l04822" /><CodeLine lineNumber="4822"><span class="doxyHighlight">    CB.<a href="/docs/api/classes/llvm/callbase/#abc10b887caad109288ffceb230493a85">setArgOperand</a>(3, NewOrdering);</span></CodeLine>
<Link id="l04823" /><CodeLine lineNumber="4823"></CodeLine>
<Link id="l04824" /><CodeLine lineNumber="4824"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DstShadowPtr =</span></CodeLine>
<Link id="l04825" /><CodeLine lineNumber="4825"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(DstPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1),</span></CodeLine>
<Link id="l04826" /><CodeLine lineNumber="4826"><span class="doxyHighlight">                           </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l04827" /><CodeLine lineNumber="4827"><span class="doxyHighlight">            .first;</span></CodeLine>
<Link id="l04828" /><CodeLine lineNumber="4828"></CodeLine>
<Link id="l04829" /><CodeLine lineNumber="4829"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Atomic store always paints clean shadow/origin. See file header.</span></CodeLine>
<Link id="l04830" /><CodeLine lineNumber="4830"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(DstShadowPtr, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()), <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>,</span></CodeLine>
<Link id="l04831" /><CodeLine lineNumber="4831"><span class="doxyHighlight">                     <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l04832" /><CodeLine lineNumber="4832"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04833" /><CodeLine lineNumber="4833"></CodeLine>
<Link id="l04834" /><CodeLine lineNumber="4834" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adefa3ab29c92a0c9a23851fd393e5c0d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adefa3ab29c92a0c9a23851fd393e5c0d">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB) &#123;</span></CodeLine>
<Link id="l04835" /><CodeLine lineNumber="4835"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CB.<a href="/docs/api/classes/llvm/instruction/#a6c09737e146b2d816c911a047ac67ba4">getMetadata</a>(LLVMContext::MD&#95;nosanitize));</span></CodeLine>
<Link id="l04836" /><CodeLine lineNumber="4836"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CB.<a href="/docs/api/classes/llvm/callbase/#a018f0394a375233d538109968b76a05a">isInlineAsm</a>()) &#123;</span></CodeLine>
<Link id="l04837" /><CodeLine lineNumber="4837"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// For inline asm (either a call to asm function, or callbr instruction),</span></CodeLine>
<Link id="l04838" /><CodeLine lineNumber="4838"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// do the usual thing: check argument shadow and mark all outputs as</span></CodeLine>
<Link id="l04839" /><CodeLine lineNumber="4839"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// clean. Note that any side effects of the inline asm that are not</span></CodeLine>
<Link id="l04840" /><CodeLine lineNumber="4840"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// immediately visible in its constraints are not handled.</span></CodeLine>
<Link id="l04841" /><CodeLine lineNumber="4841"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ace5f048c7137fe3364e809b3c34c3cca">ClHandleAsmConservative</a>)</span></CodeLine>
<Link id="l04842" /><CodeLine lineNumber="4842"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c9f05f074b1acd44859e85c1212bc1">visitAsmInstruction</a>(CB);</span></CodeLine>
<Link id="l04843" /><CodeLine lineNumber="4843"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04844" /><CodeLine lineNumber="4844"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a232a0fe878bb0a5a47219195daadca39">visitInstruction</a>(CB);</span></CodeLine>
<Link id="l04845" /><CodeLine lineNumber="4845"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04846" /><CodeLine lineNumber="4846"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04847" /><CodeLine lineNumber="4847"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a26a5e408fc09c5664d2bbb2d7fae154e">LibFunc</a> LF;</span></CodeLine>
<Link id="l04848" /><CodeLine lineNumber="4848"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>-&gt;getLibFunc(CB, LF)) &#123;</span></CodeLine>
<Link id="l04849" /><CodeLine lineNumber="4849"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// libatomic.a functions need to have special handling because there isn&#39;t</span></CodeLine>
<Link id="l04850" /><CodeLine lineNumber="4850"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// a good way to intercept them or compile the library with</span></CodeLine>
<Link id="l04851" /><CodeLine lineNumber="4851"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instrumentation.</span></CodeLine>
<Link id="l04852" /><CodeLine lineNumber="4852"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (LF) &#123;</span></CodeLine>
<Link id="l04853" /><CodeLine lineNumber="4853"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LibFunc&#95;atomic&#95;load:</span></CodeLine>
<Link id="l04854" /><CodeLine lineNumber="4854"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CallInst&gt;</a>(CB)) &#123;</span></CodeLine>
<Link id="l04855" /><CodeLine lineNumber="4855"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;MSAN -- cannot instrument invoke of libatomic load.&quot;</span></CodeLine>
<Link id="l04856" /><CodeLine lineNumber="4856"><span class="doxyHighlight">                          </span><span class="doxyHighlightStringLiteral">&quot;Ignoring!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04857" /><CodeLine lineNumber="4857"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04858" /><CodeLine lineNumber="4858"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04859" /><CodeLine lineNumber="4859"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9b2c0b28c3d1ee4253d2aae4f9172d94">visitLibAtomicLoad</a>(CB);</span></CodeLine>
<Link id="l04860" /><CodeLine lineNumber="4860"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04861" /><CodeLine lineNumber="4861"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LibFunc&#95;atomic&#95;store:</span></CodeLine>
<Link id="l04862" /><CodeLine lineNumber="4862"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abe25be4a6081ab8cac7639e57970ec3c">visitLibAtomicStore</a>(CB);</span></CodeLine>
<Link id="l04863" /><CodeLine lineNumber="4863"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04864" /><CodeLine lineNumber="4864"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04865" /><CodeLine lineNumber="4865"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04866" /><CodeLine lineNumber="4866"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04867" /><CodeLine lineNumber="4867"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04868" /><CodeLine lineNumber="4868"></CodeLine>
<Link id="l04869" /><CodeLine lineNumber="4869"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;CB)) &#123;</span></CodeLine>
<Link id="l04870" /><CodeLine lineNumber="4870"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;IntrinsicInst&gt;</a>(<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;intrinsics are handled elsewhere&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04871" /><CodeLine lineNumber="4871"></CodeLine>
<Link id="l04872" /><CodeLine lineNumber="4872"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We are going to insert code that relies on the fact that the callee</span></CodeLine>
<Link id="l04873" /><CodeLine lineNumber="4873"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// will become a non-readonly function after it is instrumented by us. To</span></CodeLine>
<Link id="l04874" /><CodeLine lineNumber="4874"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// prevent this code from being optimized out, mark that function</span></CodeLine>
<Link id="l04875" /><CodeLine lineNumber="4875"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// non-readonly in advance.</span></CodeLine>
<Link id="l04876" /><CodeLine lineNumber="4876"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: We can likely do better than dropping memory() completely here.</span></CodeLine>
<Link id="l04877" /><CodeLine lineNumber="4877"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/attributemask">AttributeMask</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>;</span></CodeLine>
<Link id="l04878" /><CodeLine lineNumber="4878"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.addAttribute(Attribute::Memory).addAttribute(Attribute::Speculatable);</span></CodeLine>
<Link id="l04879" /><CodeLine lineNumber="4879"></CodeLine>
<Link id="l04880" /><CodeLine lineNumber="4880"><span class="doxyHighlight">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;removeFnAttrs(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04881" /><CodeLine lineNumber="4881"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/function">Function</a> &#42;Func = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getCalledFunction()) &#123;</span></CodeLine>
<Link id="l04882" /><CodeLine lineNumber="4882"><span class="doxyHighlight">        Func-&gt;removeFnAttrs(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04883" /><CodeLine lineNumber="4883"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04884" /><CodeLine lineNumber="4884"></CodeLine>
<Link id="l04885" /><CodeLine lineNumber="4885"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ae63427c4d8f3c1ce48401b38ed9198f1">maybeMarkSanitizerLibraryCallNoBuiltin</a>(<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab431a36084a5700a1f4b518da053f419">TLI</a>);</span></CodeLine>
<Link id="l04886" /><CodeLine lineNumber="4886"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04887" /><CodeLine lineNumber="4887"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;CB);</span></CodeLine>
<Link id="l04888" /><CodeLine lineNumber="4888"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> MayCheckCall = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.EagerChecks;</span></CodeLine>
<Link id="l04889" /><CodeLine lineNumber="4889"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/function">Function</a> &#42;Func = CB.<a href="/docs/api/classes/llvm/callbase/#a2b1ae7cf1bafdd43d1fee4c6ad0a2913">getCalledFunction</a>()) &#123;</span></CodeLine>
<Link id="l04890" /><CodeLine lineNumber="4890"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#95;&#95;sanitizer&#95;unaligned&#95;&#123;load,store&#125; functions may be called by users</span></CodeLine>
<Link id="l04891" /><CodeLine lineNumber="4891"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// and always expects shadows in the TLS. So don&#39;t check them.</span></CodeLine>
<Link id="l04892" /><CodeLine lineNumber="4892"><span class="doxyHighlight">      MayCheckCall &amp;= !Func-&gt;getName().starts&#95;with(</span><span class="doxyHighlightStringLiteral">&quot;&#95;&#95;sanitizer&#95;unaligned&#95;&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04893" /><CodeLine lineNumber="4893"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04894" /><CodeLine lineNumber="4894"></CodeLine>
<Link id="l04895" /><CodeLine lineNumber="4895"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset = 0;</span></CodeLine>
<Link id="l04896" /><CodeLine lineNumber="4896"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  CallSite: &quot;</span><span class="doxyHighlight"> &lt;&lt; CB &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04897" /><CodeLine lineNumber="4897"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;i, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l04898" /><CodeLine lineNumber="4898"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isSized()) &#123;</span></CodeLine>
<Link id="l04899" /><CodeLine lineNumber="4899"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Arg &quot;</span><span class="doxyHighlight"> &lt;&lt; i &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is not sized: &quot;</span><span class="doxyHighlight"> &lt;&lt; CB &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04900" /><CodeLine lineNumber="4900"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04901" /><CodeLine lineNumber="4901"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04902" /><CodeLine lineNumber="4902"></CodeLine>
<Link id="l04903" /><CodeLine lineNumber="4903"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isScalableTy()) &#123;</span></CodeLine>
<Link id="l04904" /><CodeLine lineNumber="4904"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Arg  &quot;</span><span class="doxyHighlight"> &lt;&lt; i &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is vscale: &quot;</span><span class="doxyHighlight"> &lt;&lt; CB &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04905" /><CodeLine lineNumber="4905"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Handle as noundef, but don&#39;t reserve tls slots.</span></CodeLine>
<Link id="l04906" /><CodeLine lineNumber="4906"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, &amp;CB);</span></CodeLine>
<Link id="l04907" /><CodeLine lineNumber="4907"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04908" /><CodeLine lineNumber="4908"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04909" /><CodeLine lineNumber="4909"></CodeLine>
<Link id="l04910" /><CodeLine lineNumber="4910"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = 0;</span></CodeLine>
<Link id="l04911" /><CodeLine lineNumber="4911"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l04912" /><CodeLine lineNumber="4912"></CodeLine>
<Link id="l04913" /><CodeLine lineNumber="4913"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ByVal = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(i, Attribute::ByVal);</span></CodeLine>
<Link id="l04914" /><CodeLine lineNumber="4914"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> NoUndef = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(i, Attribute::NoUndef);</span></CodeLine>
<Link id="l04915" /><CodeLine lineNumber="4915"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> EagerCheck = MayCheckCall &amp;&amp; !ByVal &amp;&amp; NoUndef;</span></CodeLine>
<Link id="l04916" /><CodeLine lineNumber="4916"></CodeLine>
<Link id="l04917" /><CodeLine lineNumber="4917"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EagerCheck) &#123;</span></CodeLine>
<Link id="l04918" /><CodeLine lineNumber="4918"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, &amp;CB);</span></CodeLine>
<Link id="l04919" /><CodeLine lineNumber="4919"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l04920" /><CodeLine lineNumber="4920"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04921" /><CodeLine lineNumber="4921"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;Store = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04922" /><CodeLine lineNumber="4922"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Compute the Shadow for arg even if it is ByVal, because</span></CodeLine>
<Link id="l04923" /><CodeLine lineNumber="4923"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// in that case getShadow() will copy the actual arg shadow to</span></CodeLine>
<Link id="l04924" /><CodeLine lineNumber="4924"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#95;&#95;msan&#95;param&#95;tls.</span></CodeLine>
<Link id="l04925" /><CodeLine lineNumber="4925"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;ArgShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l04926" /><CodeLine lineNumber="4926"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;ArgShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aad8b252988733827abdf7bd44a8c2138">getShadowPtrForArgument</a>(IRB, ArgOffset);</span></CodeLine>
<Link id="l04927" /><CodeLine lineNumber="4927"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Arg#&quot;</span><span class="doxyHighlight"> &lt;&lt; i &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a></span></CodeLine>
<Link id="l04928" /><CodeLine lineNumber="4928"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Shadow: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;ArgShadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04929" /><CodeLine lineNumber="4929"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ByVal) &#123;</span></CodeLine>
<Link id="l04930" /><CodeLine lineNumber="4930"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// ByVal requires some special handling as it&#39;s too big for a single</span></CodeLine>
<Link id="l04931" /><CodeLine lineNumber="4931"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// load</span></CodeLine>
<Link id="l04932" /><CodeLine lineNumber="4932"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isPointerTy() &amp;&amp;</span></CodeLine>
<Link id="l04933" /><CodeLine lineNumber="4933"><span class="doxyHighlight">                 </span><span class="doxyHighlightStringLiteral">&quot;ByVal argument is not a pointer!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04934" /><CodeLine lineNumber="4934"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(CB.<a href="/docs/api/classes/llvm/callbase/#a88cc5fa65ff17e62b49dc5fb4401f813">getParamByValType</a>(i));</span></CodeLine>
<Link id="l04935" /><CodeLine lineNumber="4935"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgOffset + <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>)</span></CodeLine>
<Link id="l04936" /><CodeLine lineNumber="4936"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04937" /><CodeLine lineNumber="4937"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> ParamAlignment(CB.<a href="/docs/api/classes/llvm/callbase/#a7713a45c8983df00c3975444b94e69ae">getParamAlign</a>(i));</span></CodeLine>
<Link id="l04938" /><CodeLine lineNumber="4938"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = std::nullopt;</span></CodeLine>
<Link id="l04939" /><CodeLine lineNumber="4939"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ParamAlignment)</span></CodeLine>
<Link id="l04940" /><CodeLine lineNumber="4940"><span class="doxyHighlight">            Alignment = std::min(&#42;ParamAlignment, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l04941" /><CodeLine lineNumber="4941"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/value">Value</a> &#42;AShadowPtr, &#42;AOriginPtr;</span></CodeLine>
<Link id="l04942" /><CodeLine lineNumber="4942"><span class="doxyHighlight">          std::tie(AShadowPtr, AOriginPtr) =</span></CodeLine>
<Link id="l04943" /><CodeLine lineNumber="4943"><span class="doxyHighlight">              <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), Alignment,</span></CodeLine>
<Link id="l04944" /><CodeLine lineNumber="4944"><span class="doxyHighlight">                                 </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04945" /><CodeLine lineNumber="4945"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l04946" /><CodeLine lineNumber="4946"><span class="doxyHighlight">            Store = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(ArgShadowBase,</span></CodeLine>
<Link id="l04947" /><CodeLine lineNumber="4947"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l04948" /><CodeLine lineNumber="4948"><span class="doxyHighlight">                                     <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, Alignment);</span></CodeLine>
<Link id="l04949" /><CodeLine lineNumber="4949"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04950" /><CodeLine lineNumber="4950"><span class="doxyHighlight">            Store = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(ArgShadowBase, Alignment, AShadowPtr,</span></CodeLine>
<Link id="l04951" /><CodeLine lineNumber="4951"><span class="doxyHighlight">                                     Alignment, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l04952" /><CodeLine lineNumber="4952"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l04953" /><CodeLine lineNumber="4953"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/value">Value</a> &#42;ArgOriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3">getOriginPtrForArgument</a>(IRB, ArgOffset);</span></CodeLine>
<Link id="l04954" /><CodeLine lineNumber="4954"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// FIXME: OriginSize should be:</span></CodeLine>
<Link id="l04955" /><CodeLine lineNumber="4955"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// alignTo(A % kMinOriginAlignment + Size, kMinOriginAlignment)</span></CodeLine>
<Link id="l04956" /><CodeLine lineNumber="4956"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OriginSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l04957" /><CodeLine lineNumber="4957"><span class="doxyHighlight">              IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(</span></CodeLine>
<Link id="l04958" /><CodeLine lineNumber="4958"><span class="doxyHighlight">                  ArgOriginBase,</span></CodeLine>
<Link id="l04959" /><CodeLine lineNumber="4959"><span class="doxyHighlight">                  </span><span class="doxyHighlightComment">/&#42; by origin&#95;tls&#91;ArgOffset&#93; &#42;/</span><span class="doxyHighlight"> <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>,</span></CodeLine>
<Link id="l04960" /><CodeLine lineNumber="4960"><span class="doxyHighlight">                  AOriginPtr,</span></CodeLine>
<Link id="l04961" /><CodeLine lineNumber="4961"><span class="doxyHighlight">                  </span><span class="doxyHighlightComment">/&#42; by getShadowOriginPtr &#42;/</span><span class="doxyHighlight"> <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>, OriginSize);</span></CodeLine>
<Link id="l04962" /><CodeLine lineNumber="4962"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l04963" /><CodeLine lineNumber="4963"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l04964" /><CodeLine lineNumber="4964"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04965" /><CodeLine lineNumber="4965"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Any other parameters mean we need bit-grained tracking of uninit</span></CodeLine>
<Link id="l04966" /><CodeLine lineNumber="4966"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// data</span></CodeLine>
<Link id="l04967" /><CodeLine lineNumber="4967"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l04968" /><CodeLine lineNumber="4968"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgOffset + <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>)</span></CodeLine>
<Link id="l04969" /><CodeLine lineNumber="4969"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04970" /><CodeLine lineNumber="4970"><span class="doxyHighlight">          Store = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(ArgShadow, ArgShadowBase,</span></CodeLine>
<Link id="l04971" /><CodeLine lineNumber="4971"><span class="doxyHighlight">                                         <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l04972" /><CodeLine lineNumber="4972"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Cst = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Constant&gt;</a>(ArgShadow);</span></CodeLine>
<Link id="l04973" /><CodeLine lineNumber="4973"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &amp;&amp; !(Cst &amp;&amp; Cst-&gt;<a href="/docs/api/classes/llvm/constant/#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())) &#123;</span></CodeLine>
<Link id="l04974" /><CodeLine lineNumber="4974"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>),</span></CodeLine>
<Link id="l04975" /><CodeLine lineNumber="4975"><span class="doxyHighlight">                            <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8530b6c2036643438422b73afe11d7e3">getOriginPtrForArgument</a>(IRB, ArgOffset));</span></CodeLine>
<Link id="l04976" /><CodeLine lineNumber="4976"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l04977" /><CodeLine lineNumber="4977"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04978" /><CodeLine lineNumber="4978"><span class="doxyHighlight">        (void)Store;</span></CodeLine>
<Link id="l04979" /><CodeLine lineNumber="4979"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Store != </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04980" /><CodeLine lineNumber="4980"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Param:&quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Store &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04981" /><CodeLine lineNumber="4981"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04982" /><CodeLine lineNumber="4982"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> != 0);</span></CodeLine>
<Link id="l04983" /><CodeLine lineNumber="4983"><span class="doxyHighlight">      ArgOffset += <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l04984" /><CodeLine lineNumber="4984"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04985" /><CodeLine lineNumber="4985"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  done with call args\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04986" /><CodeLine lineNumber="4986"></CodeLine>
<Link id="l04987" /><CodeLine lineNumber="4987"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/functiontype">FunctionType</a> &#42;FT = CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>();</span></CodeLine>
<Link id="l04988" /><CodeLine lineNumber="4988"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FT-&gt;<a href="/docs/api/classes/llvm/functiontype/#aa9d770048c7ab9e08222a50b7bc1be1c">isVarArg</a>()) &#123;</span></CodeLine>
<Link id="l04989" /><CodeLine lineNumber="4989"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57aec2acd87151c727180e766c8f4dab">VAHelper</a>-&gt;visitCallBase(CB, IRB);</span></CodeLine>
<Link id="l04990" /><CodeLine lineNumber="4990"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04991" /><CodeLine lineNumber="4991"></CodeLine>
<Link id="l04992" /><CodeLine lineNumber="4992"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Now, get the shadow for the RetVal.</span></CodeLine>
<Link id="l04993" /><CodeLine lineNumber="4993"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CB.<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</span></CodeLine>
<Link id="l04994" /><CodeLine lineNumber="4994"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04995" /><CodeLine lineNumber="4995"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t emit the epilogue for musttail call returns.</span></CodeLine>
<Link id="l04996" /><CodeLine lineNumber="4996"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CallInst&gt;</a>(CB) &amp;&amp; <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CallInst&gt;</a>(CB).isMustTailCall())</span></CodeLine>
<Link id="l04997" /><CodeLine lineNumber="4997"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04998" /><CodeLine lineNumber="4998"></CodeLine>
<Link id="l04999" /><CodeLine lineNumber="4999"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MayCheckCall &amp;&amp; CB.<a href="/docs/api/classes/llvm/callbase/#a330471067c17061b7c2152d75102f24a">hasRetAttr</a>(Attribute::NoUndef)) &#123;</span></CodeLine>
<Link id="l05000" /><CodeLine lineNumber="5000"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;CB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;CB));</span></CodeLine>
<Link id="l05001" /><CodeLine lineNumber="5001"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;CB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05002" /><CodeLine lineNumber="5002"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05003" /><CodeLine lineNumber="5003"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05004" /><CodeLine lineNumber="5004"></CodeLine>
<Link id="l05005" /><CodeLine lineNumber="5005"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBBefore(&amp;CB);</span></CodeLine>
<Link id="l05006" /><CodeLine lineNumber="5006"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Until we have full dynamic coverage, make sure the retval shadow is 0</span></CodeLine>
<Link id="l05007" /><CodeLine lineNumber="5007"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a55223c498ad94e7e49c3789aba0becce">getShadowPtrForRetval</a>(IRBBefore);</span></CodeLine>
<Link id="l05008" /><CodeLine lineNumber="5008"><span class="doxyHighlight">    IRBBefore.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;CB), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</span></CodeLine>
<Link id="l05009" /><CodeLine lineNumber="5009"><span class="doxyHighlight">                                 <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05010" /><CodeLine lineNumber="5010"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> NextInsn;</span></CodeLine>
<Link id="l05011" /><CodeLine lineNumber="5011"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CallInst&gt;</a>(CB)) &#123;</span></CodeLine>
<Link id="l05012" /><CodeLine lineNumber="5012"><span class="doxyHighlight">      NextInsn = ++CB.<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>();</span></CodeLine>
<Link id="l05013" /><CodeLine lineNumber="5013"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NextInsn != CB.<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>()-&gt;end());</span></CodeLine>
<Link id="l05014" /><CodeLine lineNumber="5014"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05015" /><CodeLine lineNumber="5015"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;NormalDest = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;InvokeInst&gt;</a>(CB).getNormalDest();</span></CodeLine>
<Link id="l05016" /><CodeLine lineNumber="5016"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!NormalDest-&gt;<a href="/docs/api/classes/llvm/basicblock/#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>()) &#123;</span></CodeLine>
<Link id="l05017" /><CodeLine lineNumber="5017"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// FIXME: this case is tricky, so we are just conservative here.</span></CodeLine>
<Link id="l05018" /><CodeLine lineNumber="5018"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Perhaps we need to split the edge between this BB and NormalDest,</span></CodeLine>
<Link id="l05019" /><CodeLine lineNumber="5019"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// but a naive attempt to use SplitEdge leads to a crash.</span></CodeLine>
<Link id="l05020" /><CodeLine lineNumber="5020"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;CB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;CB));</span></CodeLine>
<Link id="l05021" /><CodeLine lineNumber="5021"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;CB, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05022" /><CodeLine lineNumber="5022"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05023" /><CodeLine lineNumber="5023"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05024" /><CodeLine lineNumber="5024"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: NextInsn is likely in a basic block that has not been visited</span></CodeLine>
<Link id="l05025" /><CodeLine lineNumber="5025"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// yet. Anything inserted there will be instrumented by MSan later!</span></CodeLine>
<Link id="l05026" /><CodeLine lineNumber="5026"><span class="doxyHighlight">      NextInsn = NormalDest-&gt;<a href="/docs/api/classes/llvm/basicblock/#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</span></CodeLine>
<Link id="l05027" /><CodeLine lineNumber="5027"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NextInsn != NormalDest-&gt;<a href="/docs/api/classes/llvm/basicblock/#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>() &amp;&amp;</span></CodeLine>
<Link id="l05028" /><CodeLine lineNumber="5028"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Could not find insertion point for retval shadow load&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05029" /><CodeLine lineNumber="5029"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05030" /><CodeLine lineNumber="5030"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBAfter(&amp;&#42;NextInsn);</span></CodeLine>
<Link id="l05031" /><CodeLine lineNumber="5031"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RetvalShadow = IRBAfter.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(</span></CodeLine>
<Link id="l05032" /><CodeLine lineNumber="5032"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;CB), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a55223c498ad94e7e49c3789aba0becce">getShadowPtrForRetval</a>(IRBAfter), <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>,</span></CodeLine>
<Link id="l05033" /><CodeLine lineNumber="5033"><span class="doxyHighlight">        </span><span class="doxyHighlightStringLiteral">&quot;&#95;msret&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05034" /><CodeLine lineNumber="5034"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;CB, RetvalShadow);</span></CodeLine>
<Link id="l05035" /><CodeLine lineNumber="5035"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05036" /><CodeLine lineNumber="5036"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;CB, IRBAfter.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac996b058186b94adf7a2ae509803265">getOriginPtrForRetval</a>()));</span></CodeLine>
<Link id="l05037" /><CodeLine lineNumber="5037"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05038" /><CodeLine lineNumber="5038"></CodeLine>
<Link id="l05039" /><CodeLine lineNumber="5039" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad1444d314e49ffb031f0abd54b3b7ceb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad1444d314e49ffb031f0abd54b3b7ceb">isAMustTailRetVal</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;RetVal) &#123;</span></CodeLine>
<Link id="l05040" /><CodeLine lineNumber="5040"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BitCastInst&gt;</a>(RetVal)) &#123;</span></CodeLine>
<Link id="l05041" /><CodeLine lineNumber="5041"><span class="doxyHighlight">      RetVal = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</span></CodeLine>
<Link id="l05042" /><CodeLine lineNumber="5042"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05043" /><CodeLine lineNumber="5043"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(RetVal)) &#123;</span></CodeLine>
<Link id="l05044" /><CodeLine lineNumber="5044"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isMustTailCall();</span></CodeLine>
<Link id="l05045" /><CodeLine lineNumber="5045"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05046" /><CodeLine lineNumber="5046"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05047" /><CodeLine lineNumber="5047"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05048" /><CodeLine lineNumber="5048"></CodeLine>
<Link id="l05049" /><CodeLine lineNumber="5049" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a357ae07ce43e35a35899d18f25ea005c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a357ae07ce43e35a35899d18f25ea005c">visitReturnInst</a>(<a href="/docs/api/classes/llvm/returninst">ReturnInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05050" /><CodeLine lineNumber="5050"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05051" /><CodeLine lineNumber="5051"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RetVal = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReturnValue();</span></CodeLine>
<Link id="l05052" /><CodeLine lineNumber="5052"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!RetVal)</span></CodeLine>
<Link id="l05053" /><CodeLine lineNumber="5053"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05054" /><CodeLine lineNumber="5054"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t emit the epilogue for musttail call returns.</span></CodeLine>
<Link id="l05055" /><CodeLine lineNumber="5055"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/dataflowsanitizer-cpp/#ae444dc007eb469ddb172d5780f447f07">isAMustTailRetVal</a>(RetVal))</span></CodeLine>
<Link id="l05056" /><CodeLine lineNumber="5056"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05057" /><CodeLine lineNumber="5057"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a55223c498ad94e7e49c3789aba0becce">getShadowPtrForRetval</a>(IRB);</span></CodeLine>
<Link id="l05058" /><CodeLine lineNumber="5058"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasNoUndef = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.hasRetAttribute(Attribute::NoUndef);</span></CodeLine>
<Link id="l05059" /><CodeLine lineNumber="5059"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> StoreShadow = !(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.EagerChecks &amp;&amp; HasNoUndef);</span></CodeLine>
<Link id="l05060" /><CodeLine lineNumber="5060"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Consider using SpecialCaseList to specify a list of functions that</span></CodeLine>
<Link id="l05061" /><CodeLine lineNumber="5061"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// must always return fully initialized values. For now, we hardcode &quot;main&quot;.</span></CodeLine>
<Link id="l05062" /><CodeLine lineNumber="5062"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> EagerCheck = (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.EagerChecks &amp;&amp; HasNoUndef) || (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getName() == </span><span class="doxyHighlightStringLiteral">&quot;main&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05063" /><CodeLine lineNumber="5063"></CodeLine>
<Link id="l05064" /><CodeLine lineNumber="5064"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(RetVal);</span></CodeLine>
<Link id="l05065" /><CodeLine lineNumber="5065"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> StoreOrigin = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05066" /><CodeLine lineNumber="5066"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EagerCheck) &#123;</span></CodeLine>
<Link id="l05067" /><CodeLine lineNumber="5067"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(RetVal, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05068" /><CodeLine lineNumber="5068"><span class="doxyHighlight">      Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(RetVal);</span></CodeLine>
<Link id="l05069" /><CodeLine lineNumber="5069"><span class="doxyHighlight">      StoreOrigin = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05070" /><CodeLine lineNumber="5070"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05071" /><CodeLine lineNumber="5071"></CodeLine>
<Link id="l05072" /><CodeLine lineNumber="5072"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The caller may still expect information passed over TLS if we pass our</span></CodeLine>
<Link id="l05073" /><CodeLine lineNumber="5073"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// check</span></CodeLine>
<Link id="l05074" /><CodeLine lineNumber="5074"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StoreShadow) &#123;</span></CodeLine>
<Link id="l05075" /><CodeLine lineNumber="5075"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Shadow, ShadowPtr, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05076" /><CodeLine lineNumber="5076"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins &amp;&amp; StoreOrigin)</span></CodeLine>
<Link id="l05077" /><CodeLine lineNumber="5077"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(RetVal), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac996b058186b94adf7a2ae509803265">getOriginPtrForRetval</a>());</span></CodeLine>
<Link id="l05078" /><CodeLine lineNumber="5078"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05079" /><CodeLine lineNumber="5079"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05080" /><CodeLine lineNumber="5080"></CodeLine>
<Link id="l05081" /><CodeLine lineNumber="5081" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a88958577efd3c314497a72ea96c60eac"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a88958577efd3c314497a72ea96c60eac">visitPHINode</a>(<a href="/docs/api/classes/llvm/phinode">PHINode</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05082" /><CodeLine lineNumber="5082"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05083" /><CodeLine lineNumber="5083"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9088c1401ae05507648c2ecee8c9ccbc">PropagateShadow</a>) &#123;</span></CodeLine>
<Link id="l05084" /><CodeLine lineNumber="5084"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05085" /><CodeLine lineNumber="5085"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05086" /><CodeLine lineNumber="5086"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05087" /><CodeLine lineNumber="5087"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05088" /><CodeLine lineNumber="5088"></CodeLine>
<Link id="l05089" /><CodeLine lineNumber="5089"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5287beec429ac02e5db213256dcd8776">ShadowPHINodes</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05090" /><CodeLine lineNumber="5090"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a876fb556ecea804faa2cd8ad1e498ec3">CreatePHI</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNumIncomingValues(),</span></CodeLine>
<Link id="l05091" /><CodeLine lineNumber="5091"><span class="doxyHighlight">                                </span><span class="doxyHighlightStringLiteral">&quot;&#95;msphi&#95;s&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l05092" /><CodeLine lineNumber="5092"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05093" /><CodeLine lineNumber="5093"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(</span></CodeLine>
<Link id="l05094" /><CodeLine lineNumber="5094"><span class="doxyHighlight">          &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a876fb556ecea804faa2cd8ad1e498ec3">CreatePHI</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.OriginTy, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNumIncomingValues(), </span><span class="doxyHighlightStringLiteral">&quot;&#95;msphi&#95;o&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l05095" /><CodeLine lineNumber="5095"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05096" /><CodeLine lineNumber="5096"></CodeLine>
<Link id="l05097" /><CodeLine lineNumber="5097" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fd41cd05155ed81f0ac16e8a478b860"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fd41cd05155ed81f0ac16e8a478b860">getLocalVarIdptr</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05098" /><CodeLine lineNumber="5098"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constantint">ConstantInt</a> &#42;IntConst =</span></CodeLine>
<Link id="l05099" /><CodeLine lineNumber="5099"><span class="doxyHighlight">        ConstantInt::get(<a href="/docs/api/classes/llvm/type/#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>((&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getParent()).getContext()), 0);</span></CodeLine>
<Link id="l05100" /><CodeLine lineNumber="5100"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getParent(), IntConst-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(),</span></CodeLine>
<Link id="l05101" /><CodeLine lineNumber="5101"><span class="doxyHighlight">                              </span><span class="doxyHighlightComment">/&#42;isConstant=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>,</span></CodeLine>
<Link id="l05102" /><CodeLine lineNumber="5102"><span class="doxyHighlight">                              IntConst);</span></CodeLine>
<Link id="l05103" /><CodeLine lineNumber="5103"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05104" /><CodeLine lineNumber="5104"></CodeLine>
<Link id="l05105" /><CodeLine lineNumber="5105" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9d656b8ad508d9b36144ca1db4f95181"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9d656b8ad508d9b36144ca1db4f95181">getLocalVarDescription</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05106" /><CodeLine lineNumber="5106"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#aa4ec1be5a80593697012bc67e2410e11">createPrivateConstGlobalForString</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getParent(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</span></CodeLine>
<Link id="l05107" /><CodeLine lineNumber="5107"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05108" /><CodeLine lineNumber="5108"></CodeLine>
<Link id="l05109" /><CodeLine lineNumber="5109" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00e8c5cbc0a9f0269b50f08a187c2f78"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00e8c5cbc0a9f0269b50f08a187c2f78">poisonAllocaUserspace</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Len) &#123;</span></CodeLine>
<Link id="l05110" /><CodeLine lineNumber="5110"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a> &amp;&amp; <a href="#aedbb53489a0b0283aa6f1065bdc05004">ClPoisonStackWithCall</a>) &#123;</span></CodeLine>
<Link id="l05111" /><CodeLine lineNumber="5111"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanPoisonStackFn, &#123;&amp;I, Len&#125;);</span></CodeLine>
<Link id="l05112" /><CodeLine lineNumber="5112"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05113" /><CodeLine lineNumber="5113"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase, &#42;OriginBase;</span></CodeLine>
<Link id="l05114" /><CodeLine lineNumber="5114"><span class="doxyHighlight">      std::tie(ShadowBase, OriginBase) = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a57a4c9ec10c3c1a796f9ca3363c5045f">getShadowOriginPtr</a>(</span></CodeLine>
<Link id="l05115" /><CodeLine lineNumber="5115"><span class="doxyHighlight">          &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05116" /><CodeLine lineNumber="5116"></CodeLine>
<Link id="l05117" /><CodeLine lineNumber="5117"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/classes/llvm/poisonvalue">PoisonValue</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5ace7032cfd291cb3fb5d9338386760b">getInt8</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a> ? <a href="#a56b93a7be228ba661a04962a9cef6c2a">ClPoisonStackPattern</a> : 0);</span></CodeLine>
<Link id="l05118" /><CodeLine lineNumber="5118"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(ShadowBase, <a href="/docs/api/classes/llvm/poisonvalue">PoisonValue</a>, Len, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getAlign());</span></CodeLine>
<Link id="l05119" /><CodeLine lineNumber="5119"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05120" /><CodeLine lineNumber="5120"></CodeLine>
<Link id="l05121" /><CodeLine lineNumber="5121"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a> &amp;&amp; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05122" /><CodeLine lineNumber="5122"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Idptr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0fd41cd05155ed81f0ac16e8a478b860">getLocalVarIdptr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05123" /><CodeLine lineNumber="5123"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a8d4d3c3c5a9ce85cd41923e734b24b2f">ClPrintStackNames</a>) &#123;</span></CodeLine>
<Link id="l05124" /><CodeLine lineNumber="5124"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;Descr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9d656b8ad508d9b36144ca1db4f95181">getLocalVarDescription</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05125" /><CodeLine lineNumber="5125"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanSetAllocaOriginWithDescriptionFn,</span></CodeLine>
<Link id="l05126" /><CodeLine lineNumber="5126"><span class="doxyHighlight">                       &#123;&amp;I, Len, Idptr, Descr&#125;);</span></CodeLine>
<Link id="l05127" /><CodeLine lineNumber="5127"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05128" /><CodeLine lineNumber="5128"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanSetAllocaOriginNoDescriptionFn, &#123;&amp;I, Len, Idptr&#125;);</span></CodeLine>
<Link id="l05129" /><CodeLine lineNumber="5129"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05130" /><CodeLine lineNumber="5130"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05131" /><CodeLine lineNumber="5131"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05132" /><CodeLine lineNumber="5132"></CodeLine>
<Link id="l05133" /><CodeLine lineNumber="5133" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a36a965b050969c112696e764545b231e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a36a965b050969c112696e764545b231e">poisonAllocaKmsan</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Len) &#123;</span></CodeLine>
<Link id="l05134" /><CodeLine lineNumber="5134"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Descr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a9d656b8ad508d9b36144ca1db4f95181">getLocalVarDescription</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05135" /><CodeLine lineNumber="5135"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2198d20c59c67c9de6b25fd45c9262ea">PoisonStack</a>) &#123;</span></CodeLine>
<Link id="l05136" /><CodeLine lineNumber="5136"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanPoisonAllocaFn, &#123;&amp;I, Len, Descr&#125;);</span></CodeLine>
<Link id="l05137" /><CodeLine lineNumber="5137"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05138" /><CodeLine lineNumber="5138"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanUnpoisonAllocaFn, &#123;&amp;I, Len&#125;);</span></CodeLine>
<Link id="l05139" /><CodeLine lineNumber="5139"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05140" /><CodeLine lineNumber="5140"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05141" /><CodeLine lineNumber="5141"></CodeLine>
<Link id="l05142" /><CodeLine lineNumber="5142" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acd39b18dfd59223eea65852ed04b338e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acd39b18dfd59223eea65852ed04b338e">instrumentAlloca</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsPoint = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l05143" /><CodeLine lineNumber="5143"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InsPoint)</span></CodeLine>
<Link id="l05144" /><CodeLine lineNumber="5144"><span class="doxyHighlight">      InsPoint = &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l05145" /><CodeLine lineNumber="5145"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(InsPoint);</span></CodeLine>
<Link id="l05146" /><CodeLine lineNumber="5146"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l05147" /><CodeLine lineNumber="5147"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TS = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getAllocatedType());</span></CodeLine>
<Link id="l05148" /><CodeLine lineNumber="5148"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Len = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a55086d93549de64322f4d3e8f5dd4883">CreateTypeSize</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, TS);</span></CodeLine>
<Link id="l05149" /><CodeLine lineNumber="5149"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isArrayAllocation())</span></CodeLine>
<Link id="l05150" /><CodeLine lineNumber="5150"><span class="doxyHighlight">      Len = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(Len,</span></CodeLine>
<Link id="l05151" /><CodeLine lineNumber="5151"><span class="doxyHighlight">                          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a36742c35a8fff5f74bb3d76c9c19dd47">CreateZExtOrTrunc</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArraySize(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy));</span></CodeLine>
<Link id="l05152" /><CodeLine lineNumber="5152"></CodeLine>
<Link id="l05153" /><CodeLine lineNumber="5153"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel)</span></CodeLine>
<Link id="l05154" /><CodeLine lineNumber="5154"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a36a965b050969c112696e764545b231e">poisonAllocaKmsan</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB, Len);</span></CodeLine>
<Link id="l05155" /><CodeLine lineNumber="5155"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05156" /><CodeLine lineNumber="5156"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a00e8c5cbc0a9f0269b50f08a187c2f78">poisonAllocaUserspace</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB, Len);</span></CodeLine>
<Link id="l05157" /><CodeLine lineNumber="5157"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05158" /><CodeLine lineNumber="5158"></CodeLine>
<Link id="l05159" /><CodeLine lineNumber="5159" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad360018df823d021f17fd6612acecacf"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad360018df823d021f17fd6612acecacf">visitAllocaInst</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05160" /><CodeLine lineNumber="5160"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05161" /><CodeLine lineNumber="5161"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05162" /><CodeLine lineNumber="5162"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;ll get to this alloca later unless it&#39;s poisoned at the corresponding</span></CodeLine>
<Link id="l05163" /><CodeLine lineNumber="5163"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// llvm.lifetime.start.</span></CodeLine>
<Link id="l05164" /><CodeLine lineNumber="5164"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a620d735c5fea0163960071e5a3e99a4a">AllocaSet</a>.insert(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05165" /><CodeLine lineNumber="5165"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05166" /><CodeLine lineNumber="5166"></CodeLine>
<Link id="l05167" /><CodeLine lineNumber="5167" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a09992489ef0854c6f12d58bf250db0e4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a09992489ef0854c6f12d58bf250db0e4">visitSelectInst</a>(<a href="/docs/api/classes/llvm/selectinst">SelectInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05168" /><CodeLine lineNumber="5168"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a = select b, c, d</span></CodeLine>
<Link id="l05169" /><CodeLine lineNumber="5169"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getCondition();</span></CodeLine>
<Link id="l05170" /><CodeLine lineNumber="5170"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getTrueValue();</span></CodeLine>
<Link id="l05171" /><CodeLine lineNumber="5171"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFalseValue();</span></CodeLine>
<Link id="l05172" /><CodeLine lineNumber="5172"></CodeLine>
<Link id="l05173" /><CodeLine lineNumber="5173"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a107ed4d1a9a7fc30bf59d4129235bada">handleSelectLikeInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</span></CodeLine>
<Link id="l05174" /><CodeLine lineNumber="5174"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05175" /><CodeLine lineNumber="5175"></CodeLine>
<Link id="l05176" /><CodeLine lineNumber="5176" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a107ed4d1a9a7fc30bf59d4129235bada"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a107ed4d1a9a7fc30bf59d4129235bada">handleSelectLikeInst</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>) &#123;</span></CodeLine>
<Link id="l05177" /><CodeLine lineNumber="5177"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05178" /><CodeLine lineNumber="5178"></CodeLine>
<Link id="l05179" /><CodeLine lineNumber="5179"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sb = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05180" /><CodeLine lineNumber="5180"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sc = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l05181" /><CodeLine lineNumber="5181"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sd = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</span></CodeLine>
<Link id="l05182" /><CodeLine lineNumber="5182"></CodeLine>
<Link id="l05183" /><CodeLine lineNumber="5183"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Ob = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05184" /><CodeLine lineNumber="5184"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Oc = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05185" /><CodeLine lineNumber="5185"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Od = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad9e803443a8b2a6d25a73a6b4b2d6560">getOrigin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>) : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05186" /><CodeLine lineNumber="5186"></CodeLine>
<Link id="l05187" /><CodeLine lineNumber="5187"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Result shadow if condition shadow is 0</span></CodeLine>
<Link id="l05188" /><CodeLine lineNumber="5188"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sa0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Sc, Sd);</span></CodeLine>
<Link id="l05189" /><CodeLine lineNumber="5189"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sa1;</span></CodeLine>
<Link id="l05190" /><CodeLine lineNumber="5190"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isAggregateType()) &#123;</span></CodeLine>
<Link id="l05191" /><CodeLine lineNumber="5191"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// To avoid &quot;sign extending&quot; i1 to an arbitrary aggregate type, we just do</span></CodeLine>
<Link id="l05192" /><CodeLine lineNumber="5192"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// an extra &quot;select&quot;. This results in much more compact IR.</span></CodeLine>
<Link id="l05193" /><CodeLine lineNumber="5193"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Sa = select Sb, poisoned, (select b, Sc, Sd)</span></CodeLine>
<Link id="l05194" /><CodeLine lineNumber="5194"><span class="doxyHighlight">      Sa1 = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa8632acd057dcbe9f0d3e2de9d2f9247">getPoisonedShadow</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a5699c4e4d29dcada27c885790cab89b3">getShadowTy</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</span></CodeLine>
<Link id="l05195" /><CodeLine lineNumber="5195"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05196" /><CodeLine lineNumber="5196"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Sa = select Sb, &#91; (c^d) | Sc | Sd &#93;, &#91; b ? Sc : Sd &#93;</span></CodeLine>
<Link id="l05197" /><CodeLine lineNumber="5197"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If Sb (condition is poisoned), look for bits in c and d that are equal</span></CodeLine>
<Link id="l05198" /><CodeLine lineNumber="5198"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// and both unpoisoned.</span></CodeLine>
<Link id="l05199" /><CodeLine lineNumber="5199"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If !Sb (condition is unpoisoned), simply pick one of Sc and Sd.</span></CodeLine>
<Link id="l05200" /><CodeLine lineNumber="5200"></CodeLine>
<Link id="l05201" /><CodeLine lineNumber="5201"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Cast arguments to shadow-compatible type.</span></CodeLine>
<Link id="l05202" /><CodeLine lineNumber="5202"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abfaba717423054f99dee516c7673db49">CreateAppToShadowCast</a>(IRB, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l05203" /><CodeLine lineNumber="5203"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#abfaba717423054f99dee516c7673db49">CreateAppToShadowCast</a>(IRB, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</span></CodeLine>
<Link id="l05204" /><CodeLine lineNumber="5204"></CodeLine>
<Link id="l05205" /><CodeLine lineNumber="5205"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Result shadow if condition shadow is 1</span></CodeLine>
<Link id="l05206" /><CodeLine lineNumber="5206"><span class="doxyHighlight">      Sa1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(&#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#add2225af2af25968f26ed4cb0db94dbe">CreateXor</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>), Sc, Sd&#125;);</span></CodeLine>
<Link id="l05207" /><CodeLine lineNumber="5207"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05208" /><CodeLine lineNumber="5208"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Sa = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(Sb, Sa1, Sa0, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msprop&#95;select&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05209" /><CodeLine lineNumber="5209"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Sa);</span></CodeLine>
<Link id="l05210" /><CodeLine lineNumber="5210"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05211" /><CodeLine lineNumber="5211"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Origins are always i32, so any vector conditions must be flattened.</span></CodeLine>
<Link id="l05212" /><CodeLine lineNumber="5212"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: consider tracking vector origins for app vectors?</span></CodeLine>
<Link id="l05213" /><CodeLine lineNumber="5213"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getType()-&gt;isVectorTy()) &#123;</span></CodeLine>
<Link id="l05214" /><CodeLine lineNumber="5214"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, IRB);</span></CodeLine>
<Link id="l05215" /><CodeLine lineNumber="5215"><span class="doxyHighlight">        Sb = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a6c2f0057515e3f4b8e14cfb9dcb789ae">convertToBool</a>(Sb, IRB);</span></CodeLine>
<Link id="l05216" /><CodeLine lineNumber="5216"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05217" /><CodeLine lineNumber="5217"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// a = select b, c, d</span></CodeLine>
<Link id="l05218" /><CodeLine lineNumber="5218"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Oa = Sb ? Ob : (b ? Oc : Od)</span></CodeLine>
<Link id="l05219" /><CodeLine lineNumber="5219"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(Sb, Ob, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Oc, Od)));</span></CodeLine>
<Link id="l05220" /><CodeLine lineNumber="5220"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05221" /><CodeLine lineNumber="5221"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05222" /><CodeLine lineNumber="5222"></CodeLine>
<Link id="l05223" /><CodeLine lineNumber="5223" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a54ebff796e583fc774c4b7ddd669735b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a54ebff796e583fc774c4b7ddd669735b">visitLandingPadInst</a>(<a href="/docs/api/classes/llvm/landingpadinst">LandingPadInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05224" /><CodeLine lineNumber="5224"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Do nothing.</span></CodeLine>
<Link id="l05225" /><CodeLine lineNumber="5225"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// See https://github.com/google/sanitizers/issues/504</span></CodeLine>
<Link id="l05226" /><CodeLine lineNumber="5226"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05227" /><CodeLine lineNumber="5227"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05228" /><CodeLine lineNumber="5228"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05229" /><CodeLine lineNumber="5229"></CodeLine>
<Link id="l05230" /><CodeLine lineNumber="5230" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acc330182e6404dbe33f4a58f24ee722c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#acc330182e6404dbe33f4a58f24ee722c">visitCatchSwitchInst</a>(<a href="/docs/api/classes/llvm/catchswitchinst">CatchSwitchInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05231" /><CodeLine lineNumber="5231"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05232" /><CodeLine lineNumber="5232"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05233" /><CodeLine lineNumber="5233"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05234" /><CodeLine lineNumber="5234"></CodeLine>
<Link id="l05235" /><CodeLine lineNumber="5235" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af47d161cc73a6bddb356cc121c66322a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af47d161cc73a6bddb356cc121c66322a">visitFuncletPadInst</a>(<a href="/docs/api/classes/llvm/funcletpadinst">FuncletPadInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05236" /><CodeLine lineNumber="5236"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05237" /><CodeLine lineNumber="5237"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05238" /><CodeLine lineNumber="5238"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05239" /><CodeLine lineNumber="5239"></CodeLine>
<Link id="l05240" /><CodeLine lineNumber="5240" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8fd0cd313fa1a80f8aabf5a31cc67d34"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8fd0cd313fa1a80f8aabf5a31cc67d34">visitGetElementPtrInst</a>(<a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a1425e0956a85489ea4a81c949b952094">handleShadowOr</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); &#125;</span></CodeLine>
<Link id="l05241" /><CodeLine lineNumber="5241"></CodeLine>
<Link id="l05242" /><CodeLine lineNumber="5242" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a47a02eeff88a7467b6a84a310b3e9eee"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a47a02eeff88a7467b6a84a310b3e9eee">visitExtractValueInst</a>(<a href="/docs/api/classes/llvm/extractvalueinst">ExtractValueInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05243" /><CodeLine lineNumber="5243"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05244" /><CodeLine lineNumber="5244"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Agg = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getAggregateOperand();</span></CodeLine>
<Link id="l05245" /><CodeLine lineNumber="5245"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ExtractValue:  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05246" /><CodeLine lineNumber="5246"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AggShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(Agg);</span></CodeLine>
<Link id="l05247" /><CodeLine lineNumber="5247"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   AggShadow:  &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;AggShadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05248" /><CodeLine lineNumber="5248"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ResShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a41cf66866b0b0e5a10038bfb77477419">CreateExtractValue</a>(AggShadow, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIndices());</span></CodeLine>
<Link id="l05249" /><CodeLine lineNumber="5249"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   ResShadow:  &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;ResShadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05250" /><CodeLine lineNumber="5250"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ResShadow);</span></CodeLine>
<Link id="l05251" /><CodeLine lineNumber="5251"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05252" /><CodeLine lineNumber="5252"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05253" /><CodeLine lineNumber="5253"></CodeLine>
<Link id="l05254" /><CodeLine lineNumber="5254" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aead566fef3a7ebeb14cd72efb473079a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aead566fef3a7ebeb14cd72efb473079a">visitInsertValueInst</a>(<a href="/docs/api/classes/llvm/insertvalueinst">InsertValueInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05255" /><CodeLine lineNumber="5255"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05256" /><CodeLine lineNumber="5256"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;InsertValue:  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05257" /><CodeLine lineNumber="5257"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AggShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getAggregateOperand());</span></CodeLine>
<Link id="l05258" /><CodeLine lineNumber="5258"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;InsShadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a82680be7fe808dbee556123d6ea82240">getShadow</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getInsertedValueOperand());</span></CodeLine>
<Link id="l05259" /><CodeLine lineNumber="5259"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   AggShadow:  &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;AggShadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05260" /><CodeLine lineNumber="5260"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   InsShadow:  &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;InsShadow &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05261" /><CodeLine lineNumber="5261"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Res = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a20833e358e38f9a86074bb4cc72b0d14">CreateInsertValue</a>(AggShadow, InsShadow, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getIndices());</span></CodeLine>
<Link id="l05262" /><CodeLine lineNumber="5262"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   Res:        &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Res &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05263" /><CodeLine lineNumber="5263"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</span></CodeLine>
<Link id="l05264" /><CodeLine lineNumber="5264"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad27037edeacf67c4b3583aee7122ade2">setOriginForNaryOp</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05265" /><CodeLine lineNumber="5265"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05266" /><CodeLine lineNumber="5266"></CodeLine>
<Link id="l05267" /><CodeLine lineNumber="5267" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#accd1cfbd692f327894828f50c24ad3b6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#accd1cfbd692f327894828f50c24ad3b6">dumpInst</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05268" /><CodeLine lineNumber="5268"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l05269" /><CodeLine lineNumber="5269"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ZZZ call &quot;</span><span class="doxyHighlight"> &lt;&lt; CI-&gt;getCalledFunction()-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05270" /><CodeLine lineNumber="5270"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05271" /><CodeLine lineNumber="5271"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ZZZ &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcodeName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05272" /><CodeLine lineNumber="5272"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05273" /><CodeLine lineNumber="5273"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;QQQ &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05274" /><CodeLine lineNumber="5274"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05275" /><CodeLine lineNumber="5275"></CodeLine>
<Link id="l05276" /><CodeLine lineNumber="5276" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8e26c08a2b7611381a48e195e8a49b8d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a8e26c08a2b7611381a48e195e8a49b8d">visitResumeInst</a>(<a href="/docs/api/classes/llvm/resumeinst">ResumeInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05277" /><CodeLine lineNumber="5277"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Resume: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05278" /><CodeLine lineNumber="5278"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing to do here.</span></CodeLine>
<Link id="l05279" /><CodeLine lineNumber="5279"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05280" /><CodeLine lineNumber="5280"></CodeLine>
<Link id="l05281" /><CodeLine lineNumber="5281" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2d9caf4fd36aa8e31bd25af1576ee565"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a2d9caf4fd36aa8e31bd25af1576ee565">visitCleanupReturnInst</a>(<a href="/docs/api/classes/llvm/cleanupreturninst">CleanupReturnInst</a> &amp;CRI) &#123;</span></CodeLine>
<Link id="l05282" /><CodeLine lineNumber="5282"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;CleanupReturn: &quot;</span><span class="doxyHighlight"> &lt;&lt; CRI &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05283" /><CodeLine lineNumber="5283"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing to do here.</span></CodeLine>
<Link id="l05284" /><CodeLine lineNumber="5284"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05285" /><CodeLine lineNumber="5285"></CodeLine>
<Link id="l05286" /><CodeLine lineNumber="5286" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0424da9b791eb2771ef16a9407e8a5cb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0424da9b791eb2771ef16a9407e8a5cb">visitCatchReturnInst</a>(<a href="/docs/api/classes/llvm/catchreturninst">CatchReturnInst</a> &amp;CRI) &#123;</span></CodeLine>
<Link id="l05287" /><CodeLine lineNumber="5287"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;CatchReturn: &quot;</span><span class="doxyHighlight"> &lt;&lt; CRI &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05288" /><CodeLine lineNumber="5288"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing to do here.</span></CodeLine>
<Link id="l05289" /><CodeLine lineNumber="5289"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05290" /><CodeLine lineNumber="5290"></CodeLine>
<Link id="l05291" /><CodeLine lineNumber="5291" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad5393f64ef6c65d1f090169819b68598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad5393f64ef6c65d1f090169819b68598">instrumentAsmArgument</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Operand, <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElemTy, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l05292" /><CodeLine lineNumber="5292"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</span></CodeLine>
<Link id="l05293" /><CodeLine lineNumber="5293"><span class="doxyHighlight">                             </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isOutput) &#123;</span></CodeLine>
<Link id="l05294" /><CodeLine lineNumber="5294"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For each assembly argument, we check its value for being initialized.</span></CodeLine>
<Link id="l05295" /><CodeLine lineNumber="5295"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the argument is a pointer, we assume it points to a single element</span></CodeLine>
<Link id="l05296" /><CodeLine lineNumber="5296"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// of the corresponding type (or to a 8-byte word, if the type is unsized).</span></CodeLine>
<Link id="l05297" /><CodeLine lineNumber="5297"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Each such pointer is instrumented with a call to the runtime library.</span></CodeLine>
<Link id="l05298" /><CodeLine lineNumber="5298"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType = Operand-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l05299" /><CodeLine lineNumber="5299"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check the operand value itself.</span></CodeLine>
<Link id="l05300" /><CodeLine lineNumber="5300"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Operand, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05301" /><CodeLine lineNumber="5301"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!OpType-&gt;isPointerTy() || !isOutput) &#123;</span></CodeLine>
<Link id="l05302" /><CodeLine lineNumber="5302"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isOutput);</span></CodeLine>
<Link id="l05303" /><CodeLine lineNumber="5303"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05304" /><CodeLine lineNumber="5304"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05305" /><CodeLine lineNumber="5305"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ElemTy-&gt;isSized())</span></CodeLine>
<Link id="l05306" /><CodeLine lineNumber="5306"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05307" /><CodeLine lineNumber="5307"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(ElemTy);</span></CodeLine>
<Link id="l05308" /><CodeLine lineNumber="5308"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeVal = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a55086d93549de64322f4d3e8f5dd4883">CreateTypeSize</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.IntptrTy, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l05309" /><CodeLine lineNumber="5309"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.CompileKernel) &#123;</span></CodeLine>
<Link id="l05310" /><CodeLine lineNumber="5310"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af1c581a1cb4c200427b83afa1c463c3f">MS</a>.MsanInstrumentAsmStoreFn, &#123;Operand, SizeVal&#125;);</span></CodeLine>
<Link id="l05311" /><CodeLine lineNumber="5311"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05312" /><CodeLine lineNumber="5312"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// ElemTy, derived from elementtype(), does not encode the alignment of</span></CodeLine>
<Link id="l05313" /><CodeLine lineNumber="5313"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// the pointer. Conservatively assume that the shadow memory is unaligned.</span></CodeLine>
<Link id="l05314" /><CodeLine lineNumber="5314"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// When Size is large, avoid StoreInst as it would expand to many</span></CodeLine>
<Link id="l05315" /><CodeLine lineNumber="5315"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instructions.</span></CodeLine>
<Link id="l05316" /><CodeLine lineNumber="5316"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtr, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/lib/target/hexagon/mctargetdesc/hexagonmccodeemitter-cpp/#ae4dfd7b0d66121016d6466d2ff10e8ba">&#95;</a>&#93; =</span></CodeLine>
<Link id="l05317" /><CodeLine lineNumber="5317"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aac05ca292709f88f6ba0ae241e0e84bf">getShadowOriginPtrUserspace</a>(Operand, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l05318" /><CodeLine lineNumber="5318"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= 32)</span></CodeLine>
<Link id="l05319" /><CodeLine lineNumber="5319"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(ElemTy), ShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l05320" /><CodeLine lineNumber="5320"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05321" /><CodeLine lineNumber="5321"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(ShadowPtr, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l05322" /><CodeLine lineNumber="5322"><span class="doxyHighlight">                         SizeVal, <a href="/docs/api/structs/llvm/align">Align</a>(1));</span></CodeLine>
<Link id="l05323" /><CodeLine lineNumber="5323"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05324" /><CodeLine lineNumber="5324"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05325" /><CodeLine lineNumber="5325"></CodeLine>
<Link id="l05326" /><CodeLine lineNumber="5326"><span class="doxyHighlightComment">  /// Get the number of output arguments returned by pointers.</span></CodeLine>
<Link id="l05327" /><CodeLine lineNumber="5327" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a155073ec24bee89eeab846ccc4e7108e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a155073ec24bee89eeab846ccc4e7108e">getNumOutputArgs</a>(<a href="/docs/api/classes/llvm/inlineasm">InlineAsm</a> &#42;IA, <a href="/docs/api/classes/llvm/callbase">CallBase</a> &#42;CB) &#123;</span></CodeLine>
<Link id="l05328" /><CodeLine lineNumber="5328"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumRetOutputs = 0;</span></CodeLine>
<Link id="l05329" /><CodeLine lineNumber="5329"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumOutputs = 0;</span></CodeLine>
<Link id="l05330" /><CodeLine lineNumber="5330"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;RetTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Value&gt;</a>(CB)-&gt;getType();</span></CodeLine>
<Link id="l05331" /><CodeLine lineNumber="5331"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!RetTy-&gt;<a href="/docs/api/classes/llvm/type/#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>()) &#123;</span></CodeLine>
<Link id="l05332" /><CodeLine lineNumber="5332"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Register outputs are returned via the CallInst return value.</span></CodeLine>
<Link id="l05333" /><CodeLine lineNumber="5333"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;ST = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(RetTy);</span></CodeLine>
<Link id="l05334" /><CodeLine lineNumber="5334"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST)</span></CodeLine>
<Link id="l05335" /><CodeLine lineNumber="5335"><span class="doxyHighlight">        NumRetOutputs = ST-&gt;getNumElements();</span></CodeLine>
<Link id="l05336" /><CodeLine lineNumber="5336"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05337" /><CodeLine lineNumber="5337"><span class="doxyHighlight">        NumRetOutputs = 1;</span></CodeLine>
<Link id="l05338" /><CodeLine lineNumber="5338"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05339" /><CodeLine lineNumber="5339"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/inlineasm/#a6698ed8a3a2b1518a9bd8af9b026bfc2">InlineAsm::ConstraintInfoVector</a> Constraints = IA-&gt;ParseConstraints();</span></CodeLine>
<Link id="l05340" /><CodeLine lineNumber="5340"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/inlineasm/constraintinfo">InlineAsm::ConstraintInfo</a> &amp;Info : Constraints) &#123;</span></CodeLine>
<Link id="l05341" /><CodeLine lineNumber="5341"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Info.Type) &#123;</span></CodeLine>
<Link id="l05342" /><CodeLine lineNumber="5342"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34aabfa616f81b4833fdf462b07aabfa53f">InlineAsm::isOutput</a>:</span></CodeLine>
<Link id="l05343" /><CodeLine lineNumber="5343"><span class="doxyHighlight">        NumOutputs++;</span></CodeLine>
<Link id="l05344" /><CodeLine lineNumber="5344"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05345" /><CodeLine lineNumber="5345"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l05346" /><CodeLine lineNumber="5346"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05347" /><CodeLine lineNumber="5347"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05348" /><CodeLine lineNumber="5348"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05349" /><CodeLine lineNumber="5349"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> NumOutputs - NumRetOutputs;</span></CodeLine>
<Link id="l05350" /><CodeLine lineNumber="5350"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05351" /><CodeLine lineNumber="5351"></CodeLine>
<Link id="l05352" /><CodeLine lineNumber="5352" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c9f05f074b1acd44859e85c1212bc1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a27c9f05f074b1acd44859e85c1212bc1">visitAsmInstruction</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05353" /><CodeLine lineNumber="5353"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Conservative inline assembly handling: check for poisoned shadow of</span></CodeLine>
<Link id="l05354" /><CodeLine lineNumber="5354"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// asm() arguments, then unpoison the result and all the memory locations</span></CodeLine>
<Link id="l05355" /><CodeLine lineNumber="5355"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// pointed to by those arguments.</span></CodeLine>
<Link id="l05356" /><CodeLine lineNumber="5356"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// An inline asm() statement in C++ contains lists of input and output</span></CodeLine>
<Link id="l05357" /><CodeLine lineNumber="5357"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// arguments used by the assembly code. These are mapped to operands of the</span></CodeLine>
<Link id="l05358" /><CodeLine lineNumber="5358"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// CallInst as follows:</span></CodeLine>
<Link id="l05359" /><CodeLine lineNumber="5359"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  - nR register outputs (&quot;=r) are returned by value in a single structure</span></CodeLine>
<Link id="l05360" /><CodeLine lineNumber="5360"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  (SSA value of the CallInst);</span></CodeLine>
<Link id="l05361" /><CodeLine lineNumber="5361"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  - nO other outputs (&quot;=m&quot; and others) are returned by pointer as first</span></CodeLine>
<Link id="l05362" /><CodeLine lineNumber="5362"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// nO operands of the CallInst;</span></CodeLine>
<Link id="l05363" /><CodeLine lineNumber="5363"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  - nI inputs (&quot;r&quot;, &quot;m&quot; and others) are passed to CallInst as the</span></CodeLine>
<Link id="l05364" /><CodeLine lineNumber="5364"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// remaining nI operands.</span></CodeLine>
<Link id="l05365" /><CodeLine lineNumber="5365"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The total number of asm() arguments in the source is nR+nO+nI, and the</span></CodeLine>
<Link id="l05366" /><CodeLine lineNumber="5366"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// corresponding CallInst has nO+nI+1 operands (the last operand is the</span></CodeLine>
<Link id="l05367" /><CodeLine lineNumber="5367"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// function to be called).</span></CodeLine>
<Link id="l05368" /><CodeLine lineNumber="5368"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a23454d4124e41a388132c0de01d450ff">F</a>.getDataLayout();</span></CodeLine>
<Link id="l05369" /><CodeLine lineNumber="5369"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/callbase">CallBase</a> &#42;CB = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CallBase&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05370" /><CodeLine lineNumber="5370"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05371" /><CodeLine lineNumber="5371"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/inlineasm">InlineAsm</a> &#42;IA = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;InlineAsm&gt;</a>(CB-&gt;<a href="/docs/api/classes/llvm/callbase/#a8d13199cbf4d080d3b5dcf330dad5d2c">getCalledOperand</a>());</span></CodeLine>
<Link id="l05372" /><CodeLine lineNumber="5372"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> OutputArgs = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a155073ec24bee89eeab846ccc4e7108e">getNumOutputArgs</a>(IA, CB);</span></CodeLine>
<Link id="l05373" /><CodeLine lineNumber="5373"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The last operand of a CallInst is the function itself.</span></CodeLine>
<Link id="l05374" /><CodeLine lineNumber="5374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumOperands = CB-&gt;<a href="/docs/api/classes/llvm/user/#addec638786f763d967811b45cb662f1f">getNumOperands</a>() - 1;</span></CodeLine>
<Link id="l05375" /><CodeLine lineNumber="5375"></CodeLine>
<Link id="l05376" /><CodeLine lineNumber="5376"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check input arguments. Doing so before unpoisoning output arguments, so</span></CodeLine>
<Link id="l05377" /><CodeLine lineNumber="5377"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that we won&#39;t overwrite uninit values before checking them.</span></CodeLine>
<Link id="l05378" /><CodeLine lineNumber="5378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = OutputArgs; i &lt; NumOperands; i++) &#123;</span></CodeLine>
<Link id="l05379" /><CodeLine lineNumber="5379"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Operand = CB-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i);</span></CodeLine>
<Link id="l05380" /><CodeLine lineNumber="5380"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad5393f64ef6c65d1f090169819b68598">instrumentAsmArgument</a>(Operand, CB-&gt;<a href="/docs/api/classes/llvm/callbase/#aa9d39950dcbd9e1e6dac2b66db4324d4">getParamElementType</a>(i), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</span></CodeLine>
<Link id="l05381" /><CodeLine lineNumber="5381"><span class="doxyHighlight">                            </span><span class="doxyHighlightComment">/&#42;isOutput&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05382" /><CodeLine lineNumber="5382"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05383" /><CodeLine lineNumber="5383"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Unpoison output arguments. This must happen before the actual InlineAsm</span></CodeLine>
<Link id="l05384" /><CodeLine lineNumber="5384"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// call, so that the shadow for memory published in the asm() statement</span></CodeLine>
<Link id="l05385" /><CodeLine lineNumber="5385"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// remains valid.</span></CodeLine>
<Link id="l05386" /><CodeLine lineNumber="5386"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> i = 0; i &lt; OutputArgs; i++) &#123;</span></CodeLine>
<Link id="l05387" /><CodeLine lineNumber="5387"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Operand = CB-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i);</span></CodeLine>
<Link id="l05388" /><CodeLine lineNumber="5388"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ad5393f64ef6c65d1f090169819b68598">instrumentAsmArgument</a>(Operand, CB-&gt;<a href="/docs/api/classes/llvm/callbase/#aa9d39950dcbd9e1e6dac2b66db4324d4">getParamElementType</a>(i), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IRB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</span></CodeLine>
<Link id="l05389" /><CodeLine lineNumber="5389"><span class="doxyHighlight">                            </span><span class="doxyHighlightComment">/&#42;isOutput&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05390" /><CodeLine lineNumber="5390"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05391" /><CodeLine lineNumber="5391"></CodeLine>
<Link id="l05392" /><CodeLine lineNumber="5392"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05393" /><CodeLine lineNumber="5393"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05394" /><CodeLine lineNumber="5394"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05395" /><CodeLine lineNumber="5395"></CodeLine>
<Link id="l05396" /><CodeLine lineNumber="5396" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a80a03aae53393e1535618f885dd8e113"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a80a03aae53393e1535618f885dd8e113">visitFreezeInst</a>(<a href="/docs/api/classes/llvm/freezeinst">FreezeInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05397" /><CodeLine lineNumber="5397"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Freeze always returns a fully defined value.</span></CodeLine>
<Link id="l05398" /><CodeLine lineNumber="5398"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05399" /><CodeLine lineNumber="5399"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05400" /><CodeLine lineNumber="5400"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05401" /><CodeLine lineNumber="5401"></CodeLine>
<Link id="l05402" /><CodeLine lineNumber="5402" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a232a0fe878bb0a5a47219195daadca39"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a232a0fe878bb0a5a47219195daadca39">visitInstruction</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05403" /><CodeLine lineNumber="5403"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Everything else: stop propagating and check for poisoned shadow.</span></CodeLine>
<Link id="l05404" /><CodeLine lineNumber="5404"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a0e33ca8e9058514c9b82a0e30478140d">ClDumpStrictInstructions</a>)</span></CodeLine>
<Link id="l05405" /><CodeLine lineNumber="5405"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#accd1cfbd692f327894828f50c24ad3b6">dumpInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05406" /><CodeLine lineNumber="5406"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DEFAULT: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05407" /><CodeLine lineNumber="5407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0, n = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNumOperands(); i &lt; n; i++) &#123;</span></CodeLine>
<Link id="l05408" /><CodeLine lineNumber="5408"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Operand = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(i);</span></CodeLine>
<Link id="l05409" /><CodeLine lineNumber="5409"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Operand-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</span></CodeLine>
<Link id="l05410" /><CodeLine lineNumber="5410"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#af6968bc7c8e7e0d6b3fcddb5a934a3c3">insertShadowCheck</a>(Operand, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05411" /><CodeLine lineNumber="5411"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05412" /><CodeLine lineNumber="5412"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#aa479d62de65c7074b376392e3a34d0bc">setShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#adafc284209e45c14f874dee849b2afd5">getCleanShadow</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05413" /><CodeLine lineNumber="5413"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#a0e79f9f6217e29c2a32e0cb77ce33ab0">setOrigin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor/#ab66ea2a3c3ef79789f3bc37709c2cb61">getCleanOrigin</a>());</span></CodeLine>
<Link id="l05414" /><CodeLine lineNumber="5414"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05415" /><CodeLine lineNumber="5415"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l05416" /><CodeLine lineNumber="5416"></CodeLine>
<Link id="l05417" /><CodeLine lineNumber="5417" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a> &#123;</span></CodeLine>
<Link id="l05418" /><CodeLine lineNumber="5418" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>;</span></CodeLine>
<Link id="l05419" /><CodeLine lineNumber="5419" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>;</span></CodeLine>
<Link id="l05420" /><CodeLine lineNumber="5420" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>;</span></CodeLine>
<Link id="l05421" /><CodeLine lineNumber="5421" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;CallInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>;</span></CodeLine>
<Link id="l05422" /><CodeLine lineNumber="5422" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>;</span></CodeLine>
<Link id="l05423" /><CodeLine lineNumber="5423"></CodeLine>
<Link id="l05424" /><CodeLine lineNumber="5424" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l05425" /><CodeLine lineNumber="5425"><span class="doxyHighlight">                   <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>)</span></CodeLine>
<Link id="l05426" /><CodeLine lineNumber="5426"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>) &#123;&#125;</span></CodeLine>
<Link id="l05427" /><CodeLine lineNumber="5427"></CodeLine>
<Link id="l05428" /><CodeLine lineNumber="5428" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a44ec33d41f2d1ca12b7b6aa206877a5a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a44ec33d41f2d1ca12b7b6aa206877a5a">getShadowAddrForVAArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset) &#123;</span></CodeLine>
<Link id="l05429" /><CodeLine lineNumber="5429"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l05430" /><CodeLine lineNumber="5430"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, ArgOffset));</span></CodeLine>
<Link id="l05431" /><CodeLine lineNumber="5431"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05432" /><CodeLine lineNumber="5432"></CodeLine>
<Link id="l05433" /><CodeLine lineNumber="5433"><span class="doxyHighlightComment">  /// Compute the shadow address for a given va&#95;arg.</span></CodeLine>
<Link id="l05434" /><CodeLine lineNumber="5434" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset) &#123;</span></CodeLine>
<Link id="l05435" /><CodeLine lineNumber="5435"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l05436" /><CodeLine lineNumber="5436"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, ArgOffset));</span></CodeLine>
<Link id="l05437" /><CodeLine lineNumber="5437"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msarg&#95;va&#95;s&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05438" /><CodeLine lineNumber="5438"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05439" /><CodeLine lineNumber="5439"></CodeLine>
<Link id="l05440" /><CodeLine lineNumber="5440"><span class="doxyHighlightComment">  /// Compute the shadow address for a given va&#95;arg.</span></CodeLine>
<Link id="l05441" /><CodeLine lineNumber="5441" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a60dd1d57982e0a39f8a76da7bedfd0a7"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a60dd1d57982e0a39f8a76da7bedfd0a7">getShadowPtrForVAArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset,</span></CodeLine>
<Link id="l05442" /><CodeLine lineNumber="5442"><span class="doxyHighlight">                                   </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgSize) &#123;</span></CodeLine>
<Link id="l05443" /><CodeLine lineNumber="5443"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Make sure we don&#39;t overflow &#95;&#95;msan&#95;va&#95;arg&#95;tls.</span></CodeLine>
<Link id="l05444" /><CodeLine lineNumber="5444"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgOffset + ArgSize &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>)</span></CodeLine>
<Link id="l05445" /><CodeLine lineNumber="5445"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05446" /><CodeLine lineNumber="5446"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, ArgOffset);</span></CodeLine>
<Link id="l05447" /><CodeLine lineNumber="5447"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05448" /><CodeLine lineNumber="5448"></CodeLine>
<Link id="l05449" /><CodeLine lineNumber="5449"><span class="doxyHighlightComment">  /// Compute the origin address for a given va&#95;arg.</span></CodeLine>
<Link id="l05450" /><CodeLine lineNumber="5450" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ArgOffset) &#123;</span></CodeLine>
<Link id="l05451" /><CodeLine lineNumber="5451"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOriginTLS, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l05452" /><CodeLine lineNumber="5452"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// getOriginPtrForVAArgument() is always called after</span></CodeLine>
<Link id="l05453" /><CodeLine lineNumber="5453"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// getShadowPtrForVAArgument(), so &#95;&#95;msan&#95;va&#95;arg&#95;origin&#95;tls can never</span></CodeLine>
<Link id="l05454" /><CodeLine lineNumber="5454"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// overflow.</span></CodeLine>
<Link id="l05455" /><CodeLine lineNumber="5455"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, ArgOffset));</span></CodeLine>
<Link id="l05456" /><CodeLine lineNumber="5456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msarg&#95;va&#95;o&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05457" /><CodeLine lineNumber="5457"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05458" /><CodeLine lineNumber="5458"></CodeLine>
<Link id="l05459" /><CodeLine lineNumber="5459" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac1c23e8e678cf1f5146ef3005277a59b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac1c23e8e678cf1f5146ef3005277a59b">CleanUnusedTLS</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase,</span></CodeLine>
<Link id="l05460" /><CodeLine lineNumber="5460"><span class="doxyHighlight">                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseOffset) &#123;</span></CodeLine>
<Link id="l05461" /><CodeLine lineNumber="5461"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The tails of &#95;&#95;msan&#95;va&#95;arg&#95;tls is not large enough to fit full</span></CodeLine>
<Link id="l05462" /><CodeLine lineNumber="5462"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// value shadow, but it will be copied to backup anyway. Make it</span></CodeLine>
<Link id="l05463" /><CodeLine lineNumber="5463"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// clean.</span></CodeLine>
<Link id="l05464" /><CodeLine lineNumber="5464"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOffset &gt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>)</span></CodeLine>
<Link id="l05465" /><CodeLine lineNumber="5465"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05466" /><CodeLine lineNumber="5466"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;TailSize =</span></CodeLine>
<Link id="l05467" /><CodeLine lineNumber="5467"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/constantint/#a9ad53d2a00a6fb861b3a048c6592b742">ConstantInt::getSigned</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a> - BaseOffset);</span></CodeLine>
<Link id="l05468" /><CodeLine lineNumber="5468"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(ShadowBase, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l05469" /><CodeLine lineNumber="5469"><span class="doxyHighlight">                     TailSize, <a href="/docs/api/structs/llvm/align">Align</a>(8));</span></CodeLine>
<Link id="l05470" /><CodeLine lineNumber="5470"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05471" /><CodeLine lineNumber="5471"></CodeLine>
<Link id="l05472" /><CodeLine lineNumber="5472" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ab8a2956241dbba0e4acdd9af3c0b099f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ab8a2956241dbba0e4acdd9af3c0b099f">unpoisonVAListTagForInst</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l05473" /><CodeLine lineNumber="5473"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05474" /><CodeLine lineNumber="5474"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getArgOperand(0);</span></CodeLine>
<Link id="l05475" /><CodeLine lineNumber="5475"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l05476" /><CodeLine lineNumber="5476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ShadowPtr, OriginPtr&#93; = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(</span></CodeLine>
<Link id="l05477" /><CodeLine lineNumber="5477"><span class="doxyHighlight">        VAListTag, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05478" /><CodeLine lineNumber="5478"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Unpoison the whole &#95;&#95;va&#95;list&#95;tag.</span></CodeLine>
<Link id="l05479" /><CodeLine lineNumber="5479"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(ShadowPtr, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l05480" /><CodeLine lineNumber="5480"><span class="doxyHighlight">                     <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>, Alignment, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05481" /><CodeLine lineNumber="5481"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05482" /><CodeLine lineNumber="5482"></CodeLine>
<Link id="l05483" /><CodeLine lineNumber="5483" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a4bd4eaf6fc391330f7a162fb4c531e33"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a4bd4eaf6fc391330f7a162fb4c531e33">visitVAStartInst</a>(<a href="/docs/api/classes/llvm/vastartinst">VAStartInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05484" /><CodeLine lineNumber="5484"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getCallingConv() == <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cae41511c1ad4197da36cef403f34bac72">CallingConv::Win64</a>)</span></CodeLine>
<Link id="l05485" /><CodeLine lineNumber="5485"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05486" /><CodeLine lineNumber="5486"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05487" /><CodeLine lineNumber="5487"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ab8a2956241dbba0e4acdd9af3c0b099f">unpoisonVAListTagForInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05488" /><CodeLine lineNumber="5488"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05489" /><CodeLine lineNumber="5489"></CodeLine>
<Link id="l05490" /><CodeLine lineNumber="5490" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a473d04b6a6a5f48a4e73b46435c9458f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a473d04b6a6a5f48a4e73b46435c9458f">visitVACopyInst</a>(<a href="/docs/api/classes/llvm/vacopyinst">VACopyInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05491" /><CodeLine lineNumber="5491"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getCallingConv() == <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cae41511c1ad4197da36cef403f34bac72">CallingConv::Win64</a>)</span></CodeLine>
<Link id="l05492" /><CodeLine lineNumber="5492"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05493" /><CodeLine lineNumber="5493"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ab8a2956241dbba0e4acdd9af3c0b099f">unpoisonVAListTagForInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l05494" /><CodeLine lineNumber="5494"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05495" /><CodeLine lineNumber="5495"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l05496" /><CodeLine lineNumber="5496"></CodeLine>
<Link id="l05497" /><CodeLine lineNumber="5497"><span class="doxyHighlightComment">/// AMD64-specific implementation of VarArgHelper.</span></CodeLine>
<Link id="l05498" /><CodeLine lineNumber="5498" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a7c27d77da2f70625cd4b5861b924e403">VarArgAMD64Helper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l05499" /><CodeLine lineNumber="5499"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// An unfortunate workaround for asymmetric lowering of va&#95;arg stuff.</span></CodeLine>
<Link id="l05500" /><CodeLine lineNumber="5500"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See a comment in visitCallBase for more details.</span></CodeLine>
<Link id="l05501" /><CodeLine lineNumber="5501" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#abe5b0a5857a28d5091b49eab545ce881"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#abe5b0a5857a28d5091b49eab545ce881">AMD64GpEndOffset</a> = 48; </span><span class="doxyHighlightComment">// AMD64 ABI Draft 0.99.6 p3.5.7</span></CodeLine>
<Link id="l05502" /><CodeLine lineNumber="5502" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a4c53315378e00c295afdd0950d0070b4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a4c53315378e00c295afdd0950d0070b4">AMD64FpEndOffsetSSE</a> = 176;</span></CodeLine>
<Link id="l05503" /><CodeLine lineNumber="5503"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If SSE is disabled, fp&#95;offset in va&#95;list is zero.</span></CodeLine>
<Link id="l05504" /><CodeLine lineNumber="5504" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#acb8062a12cfb2b5de7c22d45215adcbb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#acb8062a12cfb2b5de7c22d45215adcbb">AMD64FpEndOffsetNoSSE</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#abe5b0a5857a28d5091b49eab545ce881">AMD64GpEndOffset</a>;</span></CodeLine>
<Link id="l05505" /><CodeLine lineNumber="5505"></CodeLine>
<Link id="l05506" /><CodeLine lineNumber="5506" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>;</span></CodeLine>
<Link id="l05507" /><CodeLine lineNumber="5507" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05508" /><CodeLine lineNumber="5508" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05509" /><CodeLine lineNumber="5509" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05510" /><CodeLine lineNumber="5510"></CodeLine>
<Link id="l05511" /><CodeLine lineNumber="5511" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba0336c86e8431634202d38e3620f24437"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cb">ArgKind</a> &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba3c5fadca157121de5518695854950554">AK&#95;GeneralPurpose</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba0336c86e8431634202d38e3620f24437">AK&#95;FloatingPoint</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a> &#125;;</span></CodeLine>
<Link id="l05512" /><CodeLine lineNumber="5512"></CodeLine>
<Link id="l05513" /><CodeLine lineNumber="5513" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a7c27d77da2f70625cd4b5861b924e403"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a7c27d77da2f70625cd4b5861b924e403">VarArgAMD64Helper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l05514" /><CodeLine lineNumber="5514"><span class="doxyHighlight">                    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>)</span></CodeLine>
<Link id="l05515" /><CodeLine lineNumber="5515"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">24) &#123;</span></CodeLine>
<Link id="l05516" /><CodeLine lineNumber="5516"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a4c53315378e00c295afdd0950d0070b4">AMD64FpEndOffsetSSE</a>;</span></CodeLine>
<Link id="l05517" /><CodeLine lineNumber="5517"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Attr : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getAttributes().getFnAttrs()) &#123;</span></CodeLine>
<Link id="l05518" /><CodeLine lineNumber="5518"><span class="doxyHighlight">      if (Attr.isStringAttribute() &amp;&amp;</span></CodeLine>
<Link id="l05519" /><CodeLine lineNumber="5519"><span class="doxyHighlight">          (Attr.getKindAsString() == </span><span class="doxyHighlightStringLiteral">&quot;target-features&quot;</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l05520" /><CodeLine lineNumber="5520"><span class="doxyHighlight">        if (Attr.getValueAsString().contains(</span><span class="doxyHighlightStringLiteral">&quot;-sse&quot;</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l05521" /><CodeLine lineNumber="5521"><span class="doxyHighlight">          AMD64FpEndOffset = AMD64FpEndOffsetNoSSE;</span></CodeLine>
<Link id="l05522" /><CodeLine lineNumber="5522"><span class="doxyHighlight">        break;</span></CodeLine>
<Link id="l05523" /><CodeLine lineNumber="5523"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05524" /><CodeLine lineNumber="5524"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05525" /><CodeLine lineNumber="5525"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05526" /><CodeLine lineNumber="5526"></CodeLine>
<Link id="l05527" /><CodeLine lineNumber="5527" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a52e566979db5e4a27df0ac914873e024"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cb">ArgKind</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a52e566979db5e4a27df0ac914873e024">classifyArgument</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;arg) &#123;</span></CodeLine>
<Link id="l05528" /><CodeLine lineNumber="5528"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A very rough approximation of X86&#95;64 argument classification rules.</span></CodeLine>
<Link id="l05529" /><CodeLine lineNumber="5529"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;T = arg-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</span></CodeLine>
<Link id="l05530" /><CodeLine lineNumber="5530"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isX86&#95;FP80Ty())</span></CodeLine>
<Link id="l05531" /><CodeLine lineNumber="5531"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05532" /><CodeLine lineNumber="5532"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isFPOrFPVectorTy())</span></CodeLine>
<Link id="l05533" /><CodeLine lineNumber="5533"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba0336c86e8431634202d38e3620f24437">AK&#95;FloatingPoint</a>;</span></CodeLine>
<Link id="l05534" /><CodeLine lineNumber="5534"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isIntegerTy() &amp;&amp; T-&gt;getPrimitiveSizeInBits() &lt;= 64)</span></CodeLine>
<Link id="l05535" /><CodeLine lineNumber="5535"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba3c5fadca157121de5518695854950554">AK&#95;GeneralPurpose</a>;</span></CodeLine>
<Link id="l05536" /><CodeLine lineNumber="5536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isPointerTy())</span></CodeLine>
<Link id="l05537" /><CodeLine lineNumber="5537"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba3c5fadca157121de5518695854950554">AK&#95;GeneralPurpose</a>;</span></CodeLine>
<Link id="l05538" /><CodeLine lineNumber="5538"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05539" /><CodeLine lineNumber="5539"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05540" /><CodeLine lineNumber="5540"></CodeLine>
<Link id="l05541" /><CodeLine lineNumber="5541"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For VarArg functions, store the argument shadow in an ABI-specific format</span></CodeLine>
<Link id="l05542" /><CodeLine lineNumber="5542"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// that corresponds to va&#95;list layout.</span></CodeLine>
<Link id="l05543" /><CodeLine lineNumber="5543"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We do this because Clang lowers va&#95;arg in the frontend, and this pass</span></CodeLine>
<Link id="l05544" /><CodeLine lineNumber="5544"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// only sees the low level code that deals with va&#95;list internals.</span></CodeLine>
<Link id="l05545" /><CodeLine lineNumber="5545"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A much easier alternative (provided that Clang emits va&#95;arg instructions)</span></CodeLine>
<Link id="l05546" /><CodeLine lineNumber="5546"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// would have been to associate each live instance of va&#95;list with a copy of</span></CodeLine>
<Link id="l05547" /><CodeLine lineNumber="5547"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// MSanParamTLS, and extract shadow on va&#95;arg() call in the argument list</span></CodeLine>
<Link id="l05548" /><CodeLine lineNumber="5548"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// order.</span></CodeLine>
<Link id="l05549" /><CodeLine lineNumber="5549" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#acc81d19554e4eb245d659a89a2fd6f37"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#acc81d19554e4eb245d659a89a2fd6f37">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05550" /><CodeLine lineNumber="5550"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GpOffset = 0;</span></CodeLine>
<Link id="l05551" /><CodeLine lineNumber="5551"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FpOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#abe5b0a5857a28d5091b49eab545ce881">AMD64GpEndOffset</a>;</span></CodeLine>
<Link id="l05552" /><CodeLine lineNumber="5552"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OverflowOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>;</span></CodeLine>
<Link id="l05553" /><CodeLine lineNumber="5553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l05554" /><CodeLine lineNumber="5554"></CodeLine>
<Link id="l05555" /><CodeLine lineNumber="5555"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l05556" /><CodeLine lineNumber="5556"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l05557" /><CodeLine lineNumber="5557"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsByVal = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::ByVal);</span></CodeLine>
<Link id="l05558" /><CodeLine lineNumber="5558"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsByVal) &#123;</span></CodeLine>
<Link id="l05559" /><CodeLine lineNumber="5559"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// ByVal arguments always go to the overflow area.</span></CodeLine>
<Link id="l05560" /><CodeLine lineNumber="5560"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Fixed arguments passed through the overflow area will be stepped</span></CodeLine>
<Link id="l05561" /><CodeLine lineNumber="5561"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// over by va&#95;start, so don&#39;t count them towards the offset.</span></CodeLine>
<Link id="l05562" /><CodeLine lineNumber="5562"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l05563" /><CodeLine lineNumber="5563"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05564" /><CodeLine lineNumber="5564"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isPointerTy());</span></CodeLine>
<Link id="l05565" /><CodeLine lineNumber="5565"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;RealTy = CB.<a href="/docs/api/classes/llvm/callbase/#a88cc5fa65ff17e62b49dc5fb4401f813">getParamByValType</a>(ArgNo);</span></CodeLine>
<Link id="l05566" /><CodeLine lineNumber="5566"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(RealTy);</span></CodeLine>
<Link id="l05567" /><CodeLine lineNumber="5567"><span class="doxyHighlight">        uint64&#95;t AlignedSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgSize, 8);</span></CodeLine>
<Link id="l05568" /><CodeLine lineNumber="5568"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseOffset = OverflowOffset;</span></CodeLine>
<Link id="l05569" /><CodeLine lineNumber="5569"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, OverflowOffset);</span></CodeLine>
<Link id="l05570" /><CodeLine lineNumber="5570"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginBase = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05571" /><CodeLine lineNumber="5571"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05572" /><CodeLine lineNumber="5572"><span class="doxyHighlight">          OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, OverflowOffset);</span></CodeLine>
<Link id="l05573" /><CodeLine lineNumber="5573"><span class="doxyHighlight">        OverflowOffset += AlignedSize;</span></CodeLine>
<Link id="l05574" /><CodeLine lineNumber="5574"></CodeLine>
<Link id="l05575" /><CodeLine lineNumber="5575"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OverflowOffset &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l05576" /><CodeLine lineNumber="5576"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac1c23e8e678cf1f5146ef3005277a59b">CleanUnusedTLS</a>(IRB, ShadowBase, BaseOffset);</span></CodeLine>
<Link id="l05577" /><CodeLine lineNumber="5577"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// We have no space to copy shadow there.</span></CodeLine>
<Link id="l05578" /><CodeLine lineNumber="5578"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l05579" /><CodeLine lineNumber="5579"></CodeLine>
<Link id="l05580" /><CodeLine lineNumber="5580"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr, &#42;OriginPtr;</span></CodeLine>
<Link id="l05581" /><CodeLine lineNumber="5581"><span class="doxyHighlight">        std::tie(ShadowPtr, OriginPtr) =</span></CodeLine>
<Link id="l05582" /><CodeLine lineNumber="5582"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>,</span></CodeLine>
<Link id="l05583" /><CodeLine lineNumber="5583"><span class="doxyHighlight">                                   </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05584" /><CodeLine lineNumber="5584"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(ShadowBase, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, ShadowPtr,</span></CodeLine>
<Link id="l05585" /><CodeLine lineNumber="5585"><span class="doxyHighlight">                         <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, ArgSize);</span></CodeLine>
<Link id="l05586" /><CodeLine lineNumber="5586"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05587" /><CodeLine lineNumber="5587"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(OriginBase, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, OriginPtr,</span></CodeLine>
<Link id="l05588" /><CodeLine lineNumber="5588"><span class="doxyHighlight">                           <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, ArgSize);</span></CodeLine>
<Link id="l05589" /><CodeLine lineNumber="5589"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05590" /><CodeLine lineNumber="5590"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cb">ArgKind</a> AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a52e566979db5e4a27df0ac914873e024">classifyArgument</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l05591" /><CodeLine lineNumber="5591"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba3c5fadca157121de5518695854950554">AK&#95;GeneralPurpose</a> &amp;&amp; GpOffset &gt;= <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#abe5b0a5857a28d5091b49eab545ce881">AMD64GpEndOffset</a>)</span></CodeLine>
<Link id="l05592" /><CodeLine lineNumber="5592"><span class="doxyHighlight">          AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05593" /><CodeLine lineNumber="5593"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba0336c86e8431634202d38e3620f24437">AK&#95;FloatingPoint</a> &amp;&amp; FpOffset &gt;= <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>)</span></CodeLine>
<Link id="l05594" /><CodeLine lineNumber="5594"><span class="doxyHighlight">          AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05595" /><CodeLine lineNumber="5595"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase, &#42;OriginBase = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05596" /><CodeLine lineNumber="5596"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (AK) &#123;</span></CodeLine>
<Link id="l05597" /><CodeLine lineNumber="5597"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba3c5fadca157121de5518695854950554">AK&#95;GeneralPurpose</a>:</span></CodeLine>
<Link id="l05598" /><CodeLine lineNumber="5598"><span class="doxyHighlight">          ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, GpOffset);</span></CodeLine>
<Link id="l05599" /><CodeLine lineNumber="5599"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05600" /><CodeLine lineNumber="5600"><span class="doxyHighlight">            OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, GpOffset);</span></CodeLine>
<Link id="l05601" /><CodeLine lineNumber="5601"><span class="doxyHighlight">          GpOffset += 8;</span></CodeLine>
<Link id="l05602" /><CodeLine lineNumber="5602"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GpOffset &lt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>);</span></CodeLine>
<Link id="l05603" /><CodeLine lineNumber="5603"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05604" /><CodeLine lineNumber="5604"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba0336c86e8431634202d38e3620f24437">AK&#95;FloatingPoint</a>:</span></CodeLine>
<Link id="l05605" /><CodeLine lineNumber="5605"><span class="doxyHighlight">          ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, FpOffset);</span></CodeLine>
<Link id="l05606" /><CodeLine lineNumber="5606"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05607" /><CodeLine lineNumber="5607"><span class="doxyHighlight">            OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, FpOffset);</span></CodeLine>
<Link id="l05608" /><CodeLine lineNumber="5608"><span class="doxyHighlight">          FpOffset += 16;</span></CodeLine>
<Link id="l05609" /><CodeLine lineNumber="5609"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FpOffset &lt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>);</span></CodeLine>
<Link id="l05610" /><CodeLine lineNumber="5610"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05611" /><CodeLine lineNumber="5611"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a18a7ddc93f80d96322c3bc1370d5e2cba378dce66ca62d1b45a926cbc1a0fed20">AK&#95;Memory</a>:</span></CodeLine>
<Link id="l05612" /><CodeLine lineNumber="5612"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l05613" /><CodeLine lineNumber="5613"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05614" /><CodeLine lineNumber="5614"><span class="doxyHighlight">          uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l05615" /><CodeLine lineNumber="5615"><span class="doxyHighlight">          uint64&#95;t AlignedSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgSize, 8);</span></CodeLine>
<Link id="l05616" /><CodeLine lineNumber="5616"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseOffset = OverflowOffset;</span></CodeLine>
<Link id="l05617" /><CodeLine lineNumber="5617"><span class="doxyHighlight">          ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, OverflowOffset);</span></CodeLine>
<Link id="l05618" /><CodeLine lineNumber="5618"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05619" /><CodeLine lineNumber="5619"><span class="doxyHighlight">            OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, OverflowOffset);</span></CodeLine>
<Link id="l05620" /><CodeLine lineNumber="5620"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l05621" /><CodeLine lineNumber="5621"><span class="doxyHighlight">          OverflowOffset += AlignedSize;</span></CodeLine>
<Link id="l05622" /><CodeLine lineNumber="5622"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OverflowOffset &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l05623" /><CodeLine lineNumber="5623"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// We have no space to copy shadow there.</span></CodeLine>
<Link id="l05624" /><CodeLine lineNumber="5624"><span class="doxyHighlight">            <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac1c23e8e678cf1f5146ef3005277a59b">CleanUnusedTLS</a>(IRB, ShadowBase, BaseOffset);</span></CodeLine>
<Link id="l05625" /><CodeLine lineNumber="5625"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05626" /><CodeLine lineNumber="5626"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l05627" /><CodeLine lineNumber="5627"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l05628" /><CodeLine lineNumber="5628"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Take fixed arguments into account for GpOffset and FpOffset,</span></CodeLine>
<Link id="l05629" /><CodeLine lineNumber="5629"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// but don&#39;t actually store shadows for them.</span></CodeLine>
<Link id="l05630" /><CodeLine lineNumber="5630"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// TODO(glider): don&#39;t call get&#42;PtrForVAArgument() for them.</span></CodeLine>
<Link id="l05631" /><CodeLine lineNumber="5631"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l05632" /><CodeLine lineNumber="5632"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05633" /><CodeLine lineNumber="5633"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l05634" /><CodeLine lineNumber="5634"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(Shadow, ShadowBase, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05635" /><CodeLine lineNumber="5635"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05636" /><CodeLine lineNumber="5636"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getOrigin(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l05637" /><CodeLine lineNumber="5637"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/typesize">TypeSize</a> StoreSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l05638" /><CodeLine lineNumber="5638"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.paintOrigin(IRB, Origin, OriginBase, StoreSize,</span></CodeLine>
<Link id="l05639" /><CodeLine lineNumber="5639"><span class="doxyHighlight">                          std::max(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>));</span></CodeLine>
<Link id="l05640" /><CodeLine lineNumber="5640"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l05641" /><CodeLine lineNumber="5641"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05642" /><CodeLine lineNumber="5642"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05643" /><CodeLine lineNumber="5643"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;OverflowSize =</span></CodeLine>
<Link id="l05644" /><CodeLine lineNumber="5644"><span class="doxyHighlight">        ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), OverflowOffset - <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>);</span></CodeLine>
<Link id="l05645" /><CodeLine lineNumber="5645"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(OverflowSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l05646" /><CodeLine lineNumber="5646"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05647" /><CodeLine lineNumber="5647"></CodeLine>
<Link id="l05648" /><CodeLine lineNumber="5648" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a86760d872237617ac5d36a58fd894bcc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a86760d872237617ac5d36a58fd894bcc">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05649" /><CodeLine lineNumber="5649"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l05650" /><CodeLine lineNumber="5650"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05651" /><CodeLine lineNumber="5651"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l05652" /><CodeLine lineNumber="5652"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l05653" /><CodeLine lineNumber="5653"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l05654" /><CodeLine lineNumber="5654"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l05655" /><CodeLine lineNumber="5655"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a> =</span></CodeLine>
<Link id="l05656" /><CodeLine lineNumber="5656"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l05657" /><CodeLine lineNumber="5657"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l05658" /><CodeLine lineNumber="5658"><span class="doxyHighlight">          ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l05659" /><CodeLine lineNumber="5659"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l05660" /><CodeLine lineNumber="5660"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05661" /><CodeLine lineNumber="5661"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l05662" /><CodeLine lineNumber="5662"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05663" /><CodeLine lineNumber="5663"></CodeLine>
<Link id="l05664" /><CodeLine lineNumber="5664"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l05665" /><CodeLine lineNumber="5665"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l05666" /><CodeLine lineNumber="5666"><span class="doxyHighlight">          ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l05667" /><CodeLine lineNumber="5667"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l05668" /><CodeLine lineNumber="5668"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l05669" /><CodeLine lineNumber="5669"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05670" /><CodeLine lineNumber="5670"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l05671" /><CodeLine lineNumber="5671"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05672" /><CodeLine lineNumber="5672"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>,</span></CodeLine>
<Link id="l05673" /><CodeLine lineNumber="5673"><span class="doxyHighlight">                         <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOriginTLS, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l05674" /><CodeLine lineNumber="5674"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05675" /><CodeLine lineNumber="5675"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05676" /><CodeLine lineNumber="5676"></CodeLine>
<Link id="l05677" /><CodeLine lineNumber="5677"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start.</span></CodeLine>
<Link id="l05678" /><CodeLine lineNumber="5678"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Copy va&#95;list shadow from the backup copy of the TLS contents.</span></CodeLine>
<Link id="l05679" /><CodeLine lineNumber="5679"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l05680" /><CodeLine lineNumber="5680"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l05681" /><CodeLine lineNumber="5681"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l05682" /><CodeLine lineNumber="5682"></CodeLine>
<Link id="l05683" /><CodeLine lineNumber="5683"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05684" /><CodeLine lineNumber="5684"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l05685" /><CodeLine lineNumber="5685"><span class="doxyHighlight">                        ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, 16)),</span></CodeLine>
<Link id="l05686" /><CodeLine lineNumber="5686"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l05687" /><CodeLine lineNumber="5687"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, RegSaveAreaPtrPtr);</span></CodeLine>
<Link id="l05688" /><CodeLine lineNumber="5688"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaShadowPtr, &#42;RegSaveAreaOriginPtr;</span></CodeLine>
<Link id="l05689" /><CodeLine lineNumber="5689"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(16);</span></CodeLine>
<Link id="l05690" /><CodeLine lineNumber="5690"><span class="doxyHighlight">      std::tie(RegSaveAreaShadowPtr, RegSaveAreaOriginPtr) =</span></CodeLine>
<Link id="l05691" /><CodeLine lineNumber="5691"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(RegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l05692" /><CodeLine lineNumber="5692"><span class="doxyHighlight">                                 Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05693" /><CodeLine lineNumber="5693"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaShadowPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a>, Alignment,</span></CodeLine>
<Link id="l05694" /><CodeLine lineNumber="5694"><span class="doxyHighlight">                       <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>);</span></CodeLine>
<Link id="l05695" /><CodeLine lineNumber="5695"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l05696" /><CodeLine lineNumber="5696"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaOriginPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a>,</span></CodeLine>
<Link id="l05697" /><CodeLine lineNumber="5697"><span class="doxyHighlight">                         Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>);</span></CodeLine>
<Link id="l05698" /><CodeLine lineNumber="5698"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05699" /><CodeLine lineNumber="5699"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l05700" /><CodeLine lineNumber="5700"><span class="doxyHighlight">                        ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, 8)),</span></CodeLine>
<Link id="l05701" /><CodeLine lineNumber="5701"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l05702" /><CodeLine lineNumber="5702"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaPtr =</span></CodeLine>
<Link id="l05703" /><CodeLine lineNumber="5703"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, OverflowArgAreaPtrPtr);</span></CodeLine>
<Link id="l05704" /><CodeLine lineNumber="5704"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaShadowPtr, &#42;OverflowArgAreaOriginPtr;</span></CodeLine>
<Link id="l05705" /><CodeLine lineNumber="5705"><span class="doxyHighlight">      std::tie(OverflowArgAreaShadowPtr, OverflowArgAreaOriginPtr) =</span></CodeLine>
<Link id="l05706" /><CodeLine lineNumber="5706"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(OverflowArgAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l05707" /><CodeLine lineNumber="5707"><span class="doxyHighlight">                                 Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05708" /><CodeLine lineNumber="5708"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5b2f47a5ab632b00f73a516126b9f15a">VAArgTLSCopy</a>,</span></CodeLine>
<Link id="l05709" /><CodeLine lineNumber="5709"><span class="doxyHighlight">                                             <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>);</span></CodeLine>
<Link id="l05710" /><CodeLine lineNumber="5710"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(OverflowArgAreaShadowPtr, Alignment, SrcPtr, Alignment,</span></CodeLine>
<Link id="l05711" /><CodeLine lineNumber="5711"><span class="doxyHighlight">                       <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l05712" /><CodeLine lineNumber="5712"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l05713" /><CodeLine lineNumber="5713"><span class="doxyHighlight">        SrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a5c7a1e99affb9844d81614a13f72ec0b">VAArgTLSOriginCopy</a>,</span></CodeLine>
<Link id="l05714" /><CodeLine lineNumber="5714"><span class="doxyHighlight">                                        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a1a178a45caafd8f48868cd64f459732c">AMD64FpEndOffset</a>);</span></CodeLine>
<Link id="l05715" /><CodeLine lineNumber="5715"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(OverflowArgAreaOriginPtr, Alignment, SrcPtr, Alignment,</span></CodeLine>
<Link id="l05716" /><CodeLine lineNumber="5716"><span class="doxyHighlight">                         <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargamd64helper/#a87ab2b1e864fa227226cbf537d6de081">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l05717" /><CodeLine lineNumber="5717"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05718" /><CodeLine lineNumber="5718"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05719" /><CodeLine lineNumber="5719"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05720" /><CodeLine lineNumber="5720"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l05721" /><CodeLine lineNumber="5721"></CodeLine>
<Link id="l05722" /><CodeLine lineNumber="5722"><span class="doxyHighlightComment">/// AArch64-specific implementation of VarArgHelper.</span></CodeLine>
<Link id="l05723" /><CodeLine lineNumber="5723" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#aaa8ec81769a72bb64d2312546928a507">VarArgAArch64Helper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l05724" /><CodeLine lineNumber="5724" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a407b0dd82fc5d1d32caa492f2e5c65e4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a407b0dd82fc5d1d32caa492f2e5c65e4">kAArch64GrArgSize</a> = 64;</span></CodeLine>
<Link id="l05725" /><CodeLine lineNumber="5725" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a88f947cc43504925e3150eb261023f38"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a88f947cc43504925e3150eb261023f38">kAArch64VrArgSize</a> = 128;</span></CodeLine>
<Link id="l05726" /><CodeLine lineNumber="5726"></CodeLine>
<Link id="l05727" /><CodeLine lineNumber="5727" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3d0152f34bc6602311efba2f6b501840"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3d0152f34bc6602311efba2f6b501840">AArch64GrBegOffset</a> = 0;</span></CodeLine>
<Link id="l05728" /><CodeLine lineNumber="5728" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a330af6c2b9d9e40ae1485f0a0df71eb9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a330af6c2b9d9e40ae1485f0a0df71eb9">AArch64GrEndOffset</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a407b0dd82fc5d1d32caa492f2e5c65e4">kAArch64GrArgSize</a>;</span></CodeLine>
<Link id="l05729" /><CodeLine lineNumber="5729"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Make VR space aligned to 16 bytes.</span></CodeLine>
<Link id="l05730" /><CodeLine lineNumber="5730" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a02277a9e3aad98e4c3d36f2378c694b1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a02277a9e3aad98e4c3d36f2378c694b1">AArch64VrBegOffset</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a330af6c2b9d9e40ae1485f0a0df71eb9">AArch64GrEndOffset</a>;</span></CodeLine>
<Link id="l05731" /><CodeLine lineNumber="5731" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a8cfe7112f7120a9309e8549c5704f6b1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a8cfe7112f7120a9309e8549c5704f6b1">AArch64VrEndOffset</a> =</span></CodeLine>
<Link id="l05732" /><CodeLine lineNumber="5732"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a02277a9e3aad98e4c3d36f2378c694b1">AArch64VrBegOffset</a> + <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a88f947cc43504925e3150eb261023f38">kAArch64VrArgSize</a>;</span></CodeLine>
<Link id="l05733" /><CodeLine lineNumber="5733" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3">AArch64VAEndOffset</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a8cfe7112f7120a9309e8549c5704f6b1">AArch64VrEndOffset</a>;</span></CodeLine>
<Link id="l05734" /><CodeLine lineNumber="5734"></CodeLine>
<Link id="l05735" /><CodeLine lineNumber="5735" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05736" /><CodeLine lineNumber="5736" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9">VAArgOverflowSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05737" /><CodeLine lineNumber="5737"></CodeLine>
<Link id="l05738" /><CodeLine lineNumber="5738" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a09a2ce3cbc0aade0c64ad0d4225012ab"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862">ArgKind</a> &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4111bc1ce1c9e9a1455976439aac5985">AK&#95;GeneralPurpose</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a09a2ce3cbc0aade0c64ad0d4225012ab">AK&#95;FloatingPoint</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4ca9efb33354e3126119d56eb1a14021">AK&#95;Memory</a> &#125;;</span></CodeLine>
<Link id="l05739" /><CodeLine lineNumber="5739"></CodeLine>
<Link id="l05740" /><CodeLine lineNumber="5740" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#aaa8ec81769a72bb64d2312546928a507"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#aaa8ec81769a72bb64d2312546928a507">VarArgAArch64Helper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l05741" /><CodeLine lineNumber="5741"><span class="doxyHighlight">                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>)</span></CodeLine>
<Link id="l05742" /><CodeLine lineNumber="5742"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">32) &#123;&#125;</span></CodeLine>
<Link id="l05743" /><CodeLine lineNumber="5743"></CodeLine>
<Link id="l05744" /><CodeLine lineNumber="5744"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A very rough approximation of aarch64 argument classification rules.</span></CodeLine>
<Link id="l05745" /><CodeLine lineNumber="5745" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a7c087d0dd7be19eb6d334e3ca9aefd41"><span class="doxyHighlight">  std::pair&lt;ArgKind, uint64&#95;t&gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a7c087d0dd7be19eb6d334e3ca9aefd41">classifyArgument</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;T) &#123;</span></CodeLine>
<Link id="l05746" /><CodeLine lineNumber="5746"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isIntOrPtrTy() &amp;&amp; T-&gt;getPrimitiveSizeInBits() &lt;= 64)</span></CodeLine>
<Link id="l05747" /><CodeLine lineNumber="5747"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4111bc1ce1c9e9a1455976439aac5985">AK&#95;GeneralPurpose</a>, 1&#125;;</span></CodeLine>
<Link id="l05748" /><CodeLine lineNumber="5748"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isFloatingPointTy() &amp;&amp; T-&gt;getPrimitiveSizeInBits() &lt;= 128)</span></CodeLine>
<Link id="l05749" /><CodeLine lineNumber="5749"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a09a2ce3cbc0aade0c64ad0d4225012ab">AK&#95;FloatingPoint</a>, 1&#125;;</span></CodeLine>
<Link id="l05750" /><CodeLine lineNumber="5750"></CodeLine>
<Link id="l05751" /><CodeLine lineNumber="5751"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isArrayTy()) &#123;</span></CodeLine>
<Link id="l05752" /><CodeLine lineNumber="5752"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a7c087d0dd7be19eb6d334e3ca9aefd41">classifyArgument</a>(T-&gt;getArrayElementType());</span></CodeLine>
<Link id="l05753" /><CodeLine lineNumber="5753"><span class="doxyHighlight">      R.second &#42;= T-&gt;getScalarType()-&gt;getArrayNumElements();</span></CodeLine>
<Link id="l05754" /><CodeLine lineNumber="5754"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> R;</span></CodeLine>
<Link id="l05755" /><CodeLine lineNumber="5755"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05756" /><CodeLine lineNumber="5756"></CodeLine>
<Link id="l05757" /><CodeLine lineNumber="5757"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/fixedvectortype">FixedVectorType</a> &#42;FV = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;FixedVectorType&gt;</a>(T)) &#123;</span></CodeLine>
<Link id="l05758" /><CodeLine lineNumber="5758"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a7c087d0dd7be19eb6d334e3ca9aefd41">classifyArgument</a>(FV-&gt;getScalarType());</span></CodeLine>
<Link id="l05759" /><CodeLine lineNumber="5759"><span class="doxyHighlight">      R.second &#42;= FV-&gt;getNumElements();</span></CodeLine>
<Link id="l05760" /><CodeLine lineNumber="5760"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> R;</span></CodeLine>
<Link id="l05761" /><CodeLine lineNumber="5761"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05762" /><CodeLine lineNumber="5762"></CodeLine>
<Link id="l05763" /><CodeLine lineNumber="5763"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Unknown vararg type: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;T &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05764" /><CodeLine lineNumber="5764"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4ca9efb33354e3126119d56eb1a14021">AK&#95;Memory</a>, 0&#125;;</span></CodeLine>
<Link id="l05765" /><CodeLine lineNumber="5765"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05766" /><CodeLine lineNumber="5766"></CodeLine>
<Link id="l05767" /><CodeLine lineNumber="5767"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The instrumentation stores the argument shadow in a non ABI-specific</span></CodeLine>
<Link id="l05768" /><CodeLine lineNumber="5768"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// format because it does not know which argument is named (since Clang,</span></CodeLine>
<Link id="l05769" /><CodeLine lineNumber="5769"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// like x86&#95;64 case, lowers the va&#95;args in the frontend and this pass only</span></CodeLine>
<Link id="l05770" /><CodeLine lineNumber="5770"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// sees the low level code that deals with va&#95;list internals).</span></CodeLine>
<Link id="l05771" /><CodeLine lineNumber="5771"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The first seven GR registers are saved in the first 56 bytes of the</span></CodeLine>
<Link id="l05772" /><CodeLine lineNumber="5772"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// va&#95;arg tls arra, followed by the first 8 FP/SIMD registers, and then</span></CodeLine>
<Link id="l05773" /><CodeLine lineNumber="5773"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the remaining arguments.</span></CodeLine>
<Link id="l05774" /><CodeLine lineNumber="5774"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Using constant offset within the va&#95;arg TLS array allows fast copy</span></CodeLine>
<Link id="l05775" /><CodeLine lineNumber="5775"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// in the finalize instrumentation.</span></CodeLine>
<Link id="l05776" /><CodeLine lineNumber="5776" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a41ca0d5d12f5940de41f29cf08066e00"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a41ca0d5d12f5940de41f29cf08066e00">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05777" /><CodeLine lineNumber="5777"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GrOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3d0152f34bc6602311efba2f6b501840">AArch64GrBegOffset</a>;</span></CodeLine>
<Link id="l05778" /><CodeLine lineNumber="5778"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VrOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a02277a9e3aad98e4c3d36f2378c694b1">AArch64VrBegOffset</a>;</span></CodeLine>
<Link id="l05779" /><CodeLine lineNumber="5779"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OverflowOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3">AArch64VAEndOffset</a>;</span></CodeLine>
<Link id="l05780" /><CodeLine lineNumber="5780"></CodeLine>
<Link id="l05781" /><CodeLine lineNumber="5781"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l05782" /><CodeLine lineNumber="5782"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l05783" /><CodeLine lineNumber="5783"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l05784" /><CodeLine lineNumber="5784"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;AK, RegNum&#93; = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a7c087d0dd7be19eb6d334e3ca9aefd41">classifyArgument</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l05785" /><CodeLine lineNumber="5785"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4111bc1ce1c9e9a1455976439aac5985">AK&#95;GeneralPurpose</a> &amp;&amp;</span></CodeLine>
<Link id="l05786" /><CodeLine lineNumber="5786"><span class="doxyHighlight">          (GrOffset + RegNum &#42; 8) &gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a330af6c2b9d9e40ae1485f0a0df71eb9">AArch64GrEndOffset</a>)</span></CodeLine>
<Link id="l05787" /><CodeLine lineNumber="5787"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4ca9efb33354e3126119d56eb1a14021">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05788" /><CodeLine lineNumber="5788"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a09a2ce3cbc0aade0c64ad0d4225012ab">AK&#95;FloatingPoint</a> &amp;&amp;</span></CodeLine>
<Link id="l05789" /><CodeLine lineNumber="5789"><span class="doxyHighlight">          (VrOffset + RegNum &#42; 16) &gt; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a8cfe7112f7120a9309e8549c5704f6b1">AArch64VrEndOffset</a>)</span></CodeLine>
<Link id="l05790" /><CodeLine lineNumber="5790"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4ca9efb33354e3126119d56eb1a14021">AK&#95;Memory</a>;</span></CodeLine>
<Link id="l05791" /><CodeLine lineNumber="5791"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</span></CodeLine>
<Link id="l05792" /><CodeLine lineNumber="5792"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (AK) &#123;</span></CodeLine>
<Link id="l05793" /><CodeLine lineNumber="5793"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4111bc1ce1c9e9a1455976439aac5985">AK&#95;GeneralPurpose</a>:</span></CodeLine>
<Link id="l05794" /><CodeLine lineNumber="5794"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, GrOffset);</span></CodeLine>
<Link id="l05795" /><CodeLine lineNumber="5795"><span class="doxyHighlight">        GrOffset += 8 &#42; RegNum;</span></CodeLine>
<Link id="l05796" /><CodeLine lineNumber="5796"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05797" /><CodeLine lineNumber="5797"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a09a2ce3cbc0aade0c64ad0d4225012ab">AK&#95;FloatingPoint</a>:</span></CodeLine>
<Link id="l05798" /><CodeLine lineNumber="5798"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VrOffset);</span></CodeLine>
<Link id="l05799" /><CodeLine lineNumber="5799"><span class="doxyHighlight">        VrOffset += 16 &#42; RegNum;</span></CodeLine>
<Link id="l05800" /><CodeLine lineNumber="5800"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05801" /><CodeLine lineNumber="5801"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a38007828385e24ceef440220046c7862a4ca9efb33354e3126119d56eb1a14021">AK&#95;Memory</a>:</span></CodeLine>
<Link id="l05802" /><CodeLine lineNumber="5802"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Don&#39;t count fixed arguments in the overflow area - va&#95;start will</span></CodeLine>
<Link id="l05803" /><CodeLine lineNumber="5803"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// skip right over them.</span></CodeLine>
<Link id="l05804" /><CodeLine lineNumber="5804"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l05805" /><CodeLine lineNumber="5805"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05806" /><CodeLine lineNumber="5806"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l05807" /><CodeLine lineNumber="5807"><span class="doxyHighlight">        uint64&#95;t AlignedSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgSize, 8);</span></CodeLine>
<Link id="l05808" /><CodeLine lineNumber="5808"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseOffset = OverflowOffset;</span></CodeLine>
<Link id="l05809" /><CodeLine lineNumber="5809"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, BaseOffset);</span></CodeLine>
<Link id="l05810" /><CodeLine lineNumber="5810"><span class="doxyHighlight">        OverflowOffset += AlignedSize;</span></CodeLine>
<Link id="l05811" /><CodeLine lineNumber="5811"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OverflowOffset &gt; <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l05812" /><CodeLine lineNumber="5812"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// We have no space to copy shadow there.</span></CodeLine>
<Link id="l05813" /><CodeLine lineNumber="5813"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac1c23e8e678cf1f5146ef3005277a59b">CleanUnusedTLS</a>(IRB, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, BaseOffset);</span></CodeLine>
<Link id="l05814" /><CodeLine lineNumber="5814"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05815" /><CodeLine lineNumber="5815"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l05816" /><CodeLine lineNumber="5816"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05817" /><CodeLine lineNumber="5817"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l05818" /><CodeLine lineNumber="5818"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Count Gp/Vr fixed arguments to their respective offsets, but don&#39;t</span></CodeLine>
<Link id="l05819" /><CodeLine lineNumber="5819"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// bother to actually store a shadow.</span></CodeLine>
<Link id="l05820" /><CodeLine lineNumber="5820"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l05821" /><CodeLine lineNumber="5821"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05822" /><CodeLine lineNumber="5822"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05823" /><CodeLine lineNumber="5823"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05824" /><CodeLine lineNumber="5824"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;OverflowSize =</span></CodeLine>
<Link id="l05825" /><CodeLine lineNumber="5825"><span class="doxyHighlight">        ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), OverflowOffset - <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3">AArch64VAEndOffset</a>);</span></CodeLine>
<Link id="l05826" /><CodeLine lineNumber="5826"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(OverflowSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l05827" /><CodeLine lineNumber="5827"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05828" /><CodeLine lineNumber="5828"></CodeLine>
<Link id="l05829" /><CodeLine lineNumber="5829"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Retrieve a va&#95;list field of &#39;void&#42;&#39; size.</span></CodeLine>
<Link id="l05830" /><CodeLine lineNumber="5830" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a2252a215cf90d91e6e98e77f42cf7954"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a2252a215cf90d91e6e98e77f42cf7954">getVAField64</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> offset) &#123;</span></CodeLine>
<Link id="l05831" /><CodeLine lineNumber="5831"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SaveAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05832" /><CodeLine lineNumber="5832"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l05833" /><CodeLine lineNumber="5833"><span class="doxyHighlight">                      ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, offset)),</span></CodeLine>
<Link id="l05834" /><CodeLine lineNumber="5834"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l05835" /><CodeLine lineNumber="5835"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/classes/llvm/type/#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), SaveAreaPtrPtr);</span></CodeLine>
<Link id="l05836" /><CodeLine lineNumber="5836"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05837" /><CodeLine lineNumber="5837"></CodeLine>
<Link id="l05838" /><CodeLine lineNumber="5838"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Retrieve a va&#95;list field of &#39;int&#39; size.</span></CodeLine>
<Link id="l05839" /><CodeLine lineNumber="5839" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab6ff76a12c77a8e0e142fa50f1a5104b"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab6ff76a12c77a8e0e142fa50f1a5104b">getVAField32</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> offset) &#123;</span></CodeLine>
<Link id="l05840" /><CodeLine lineNumber="5840"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05841" /><CodeLine lineNumber="5841"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l05842" /><CodeLine lineNumber="5842"><span class="doxyHighlight">                      ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, offset)),</span></CodeLine>
<Link id="l05843" /><CodeLine lineNumber="5843"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l05844" /><CodeLine lineNumber="5844"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SaveArea32 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), SaveAreaPtr);</span></CodeLine>
<Link id="l05845" /><CodeLine lineNumber="5845"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5253081f40ffcad9c0e8ba6a5c437006">CreateSExt</a>(SaveArea32, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l05846" /><CodeLine lineNumber="5846"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05847" /><CodeLine lineNumber="5847"></CodeLine>
<Link id="l05848" /><CodeLine lineNumber="5848" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a1984e3e4e68c3ba67dc3dd32b9dfed6c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a1984e3e4e68c3ba67dc3dd32b9dfed6c">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05849" /><CodeLine lineNumber="5849"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9">VAArgOverflowSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l05850" /><CodeLine lineNumber="5850"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05851" /><CodeLine lineNumber="5851"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l05852" /><CodeLine lineNumber="5852"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l05853" /><CodeLine lineNumber="5853"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l05854" /><CodeLine lineNumber="5854"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l05855" /><CodeLine lineNumber="5855"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9">VAArgOverflowSize</a> =</span></CodeLine>
<Link id="l05856" /><CodeLine lineNumber="5856"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l05857" /><CodeLine lineNumber="5857"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l05858" /><CodeLine lineNumber="5858"><span class="doxyHighlight">          ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3">AArch64VAEndOffset</a>), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l05859" /><CodeLine lineNumber="5859"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l05860" /><CodeLine lineNumber="5860"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l05861" /><CodeLine lineNumber="5861"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l05862" /><CodeLine lineNumber="5862"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05863" /><CodeLine lineNumber="5863"></CodeLine>
<Link id="l05864" /><CodeLine lineNumber="5864"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l05865" /><CodeLine lineNumber="5865"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l05866" /><CodeLine lineNumber="5866"><span class="doxyHighlight">          ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l05867" /><CodeLine lineNumber="5867"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l05868" /><CodeLine lineNumber="5868"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l05869" /><CodeLine lineNumber="5869"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05870" /><CodeLine lineNumber="5870"></CodeLine>
<Link id="l05871" /><CodeLine lineNumber="5871"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrArgSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a407b0dd82fc5d1d32caa492f2e5c65e4">kAArch64GrArgSize</a>);</span></CodeLine>
<Link id="l05872" /><CodeLine lineNumber="5872"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrArgSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a88f947cc43504925e3150eb261023f38">kAArch64VrArgSize</a>);</span></CodeLine>
<Link id="l05873" /><CodeLine lineNumber="5873"></CodeLine>
<Link id="l05874" /><CodeLine lineNumber="5874"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start, copy va&#95;list shadow from the backup copy of</span></CodeLine>
<Link id="l05875" /><CodeLine lineNumber="5875"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the TLS contents.</span></CodeLine>
<Link id="l05876" /><CodeLine lineNumber="5876"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l05877" /><CodeLine lineNumber="5877"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l05878" /><CodeLine lineNumber="5878"></CodeLine>
<Link id="l05879" /><CodeLine lineNumber="5879"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l05880" /><CodeLine lineNumber="5880"></CodeLine>
<Link id="l05881" /><CodeLine lineNumber="5881"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The variadic ABI for AArch64 creates two areas to save the incoming</span></CodeLine>
<Link id="l05882" /><CodeLine lineNumber="5882"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// argument registers (one for 64-bit general register xn-x7 and another</span></CodeLine>
<Link id="l05883" /><CodeLine lineNumber="5883"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// for 128-bit FP/SIMD vn-v7).</span></CodeLine>
<Link id="l05884" /><CodeLine lineNumber="5884"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We need then to propagate the shadow arguments on both regions</span></CodeLine>
<Link id="l05885" /><CodeLine lineNumber="5885"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#39;va::&#95;&#95;gr&#95;top + va::&#95;&#95;gr&#95;offs&#39; and &#39;va::&#95;&#95;vr&#95;top + va::&#95;&#95;vr&#95;offs&#39;.</span></CodeLine>
<Link id="l05886" /><CodeLine lineNumber="5886"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The remaining arguments are saved on shadow for &#39;va::stack&#39;.</span></CodeLine>
<Link id="l05887" /><CodeLine lineNumber="5887"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// One caveat is it requires only to propagate the non-named arguments,</span></CodeLine>
<Link id="l05888" /><CodeLine lineNumber="5888"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// however on the call site instrumentation &#39;all&#39; the arguments are</span></CodeLine>
<Link id="l05889" /><CodeLine lineNumber="5889"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// saved. So to copy the shadow values from the va&#95;arg TLS array</span></CodeLine>
<Link id="l05890" /><CodeLine lineNumber="5890"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// we need to adjust the offset for both GR and VR fields based on</span></CodeLine>
<Link id="l05891" /><CodeLine lineNumber="5891"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// the &#95;&#95;&#123;gr,vr&#125;&#95;offs value (since they are stores based on incoming</span></CodeLine>
<Link id="l05892" /><CodeLine lineNumber="5892"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// named arguments).</span></CodeLine>
<Link id="l05893" /><CodeLine lineNumber="5893"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;RegSaveAreaPtrTy = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>();</span></CodeLine>
<Link id="l05894" /><CodeLine lineNumber="5894"></CodeLine>
<Link id="l05895" /><CodeLine lineNumber="5895"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Read the stack pointer from the va&#95;list.</span></CodeLine>
<Link id="l05896" /><CodeLine lineNumber="5896"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;StackSaveAreaPtr =</span></CodeLine>
<Link id="l05897" /><CodeLine lineNumber="5897"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a2252a215cf90d91e6e98e77f42cf7954">getVAField64</a>(IRB, VAListTag, 0), RegSaveAreaPtrTy);</span></CodeLine>
<Link id="l05898" /><CodeLine lineNumber="5898"></CodeLine>
<Link id="l05899" /><CodeLine lineNumber="5899"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Read both the &#95;&#95;gr&#95;top and &#95;&#95;gr&#95;off and add them up.</span></CodeLine>
<Link id="l05900" /><CodeLine lineNumber="5900"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrTopSaveAreaPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a2252a215cf90d91e6e98e77f42cf7954">getVAField64</a>(IRB, VAListTag, 8);</span></CodeLine>
<Link id="l05901" /><CodeLine lineNumber="5901"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrOffSaveArea = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab6ff76a12c77a8e0e142fa50f1a5104b">getVAField32</a>(IRB, VAListTag, 24);</span></CodeLine>
<Link id="l05902" /><CodeLine lineNumber="5902"></CodeLine>
<Link id="l05903" /><CodeLine lineNumber="5903"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrRegSaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05904" /><CodeLine lineNumber="5904"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(GrTopSaveAreaPtr, GrOffSaveArea), RegSaveAreaPtrTy);</span></CodeLine>
<Link id="l05905" /><CodeLine lineNumber="5905"></CodeLine>
<Link id="l05906" /><CodeLine lineNumber="5906"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Read both the &#95;&#95;vr&#95;top and &#95;&#95;vr&#95;off and add them up.</span></CodeLine>
<Link id="l05907" /><CodeLine lineNumber="5907"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrTopSaveAreaPtr = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a2252a215cf90d91e6e98e77f42cf7954">getVAField64</a>(IRB, VAListTag, 16);</span></CodeLine>
<Link id="l05908" /><CodeLine lineNumber="5908"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrOffSaveArea = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab6ff76a12c77a8e0e142fa50f1a5104b">getVAField32</a>(IRB, VAListTag, 28);</span></CodeLine>
<Link id="l05909" /><CodeLine lineNumber="5909"></CodeLine>
<Link id="l05910" /><CodeLine lineNumber="5910"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrRegSaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l05911" /><CodeLine lineNumber="5911"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(VrTopSaveAreaPtr, VrOffSaveArea), RegSaveAreaPtrTy);</span></CodeLine>
<Link id="l05912" /><CodeLine lineNumber="5912"></CodeLine>
<Link id="l05913" /><CodeLine lineNumber="5913"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// It does not know how many named arguments is being used and, on the</span></CodeLine>
<Link id="l05914" /><CodeLine lineNumber="5914"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// callsite all the arguments were saved.  Since &#95;&#95;gr&#95;off is defined as</span></CodeLine>
<Link id="l05915" /><CodeLine lineNumber="5915"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#39;0 - ((8 - named&#95;gr) &#42; 8)&#39;, the idea is to just propagate the variadic</span></CodeLine>
<Link id="l05916" /><CodeLine lineNumber="5916"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// argument by ignoring the bytes of shadow from named arguments.</span></CodeLine>
<Link id="l05917" /><CodeLine lineNumber="5917"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrRegSaveAreaShadowPtrOff =</span></CodeLine>
<Link id="l05918" /><CodeLine lineNumber="5918"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(GrArgSize, GrOffSaveArea);</span></CodeLine>
<Link id="l05919" /><CodeLine lineNumber="5919"></CodeLine>
<Link id="l05920" /><CodeLine lineNumber="5920"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrRegSaveAreaShadowPtr =</span></CodeLine>
<Link id="l05921" /><CodeLine lineNumber="5921"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(GrRegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l05922" /><CodeLine lineNumber="5922"><span class="doxyHighlight">                                 <a href="/docs/api/structs/llvm/align">Align</a>(8), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l05923" /><CodeLine lineNumber="5923"><span class="doxyHighlight">              .first;</span></CodeLine>
<Link id="l05924" /><CodeLine lineNumber="5924"></CodeLine>
<Link id="l05925" /><CodeLine lineNumber="5925"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrSrcPtr =</span></CodeLine>
<Link id="l05926" /><CodeLine lineNumber="5926"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad9b7f1f880f1c88e6856df87189d50f4">CreateInBoundsPtrAdd</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>, GrRegSaveAreaShadowPtrOff);</span></CodeLine>
<Link id="l05927" /><CodeLine lineNumber="5927"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;GrCopySize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(GrArgSize, GrRegSaveAreaShadowPtrOff);</span></CodeLine>
<Link id="l05928" /><CodeLine lineNumber="5928"></CodeLine>
<Link id="l05929" /><CodeLine lineNumber="5929"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(GrRegSaveAreaShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(8), GrSrcPtr, <a href="/docs/api/structs/llvm/align">Align</a>(8),</span></CodeLine>
<Link id="l05930" /><CodeLine lineNumber="5930"><span class="doxyHighlight">                       GrCopySize);</span></CodeLine>
<Link id="l05931" /><CodeLine lineNumber="5931"></CodeLine>
<Link id="l05932" /><CodeLine lineNumber="5932"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Again, but for FP/SIMD values.</span></CodeLine>
<Link id="l05933" /><CodeLine lineNumber="5933"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrRegSaveAreaShadowPtrOff =</span></CodeLine>
<Link id="l05934" /><CodeLine lineNumber="5934"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(VrArgSize, VrOffSaveArea);</span></CodeLine>
<Link id="l05935" /><CodeLine lineNumber="5935"></CodeLine>
<Link id="l05936" /><CodeLine lineNumber="5936"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrRegSaveAreaShadowPtr =</span></CodeLine>
<Link id="l05937" /><CodeLine lineNumber="5937"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(VrRegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l05938" /><CodeLine lineNumber="5938"><span class="doxyHighlight">                                 <a href="/docs/api/structs/llvm/align">Align</a>(8), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l05939" /><CodeLine lineNumber="5939"><span class="doxyHighlight">              .first;</span></CodeLine>
<Link id="l05940" /><CodeLine lineNumber="5940"></CodeLine>
<Link id="l05941" /><CodeLine lineNumber="5941"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrSrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad9b7f1f880f1c88e6856df87189d50f4">CreateInBoundsPtrAdd</a>(</span></CodeLine>
<Link id="l05942" /><CodeLine lineNumber="5942"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad9b7f1f880f1c88e6856df87189d50f4">CreateInBoundsPtrAdd</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>,</span></CodeLine>
<Link id="l05943" /><CodeLine lineNumber="5943"><span class="doxyHighlight">                                   IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a02277a9e3aad98e4c3d36f2378c694b1">AArch64VrBegOffset</a>)),</span></CodeLine>
<Link id="l05944" /><CodeLine lineNumber="5944"><span class="doxyHighlight">          VrRegSaveAreaShadowPtrOff);</span></CodeLine>
<Link id="l05945" /><CodeLine lineNumber="5945"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VrCopySize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(VrArgSize, VrRegSaveAreaShadowPtrOff);</span></CodeLine>
<Link id="l05946" /><CodeLine lineNumber="5946"></CodeLine>
<Link id="l05947" /><CodeLine lineNumber="5947"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(VrRegSaveAreaShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(8), VrSrcPtr, <a href="/docs/api/structs/llvm/align">Align</a>(8),</span></CodeLine>
<Link id="l05948" /><CodeLine lineNumber="5948"><span class="doxyHighlight">                       VrCopySize);</span></CodeLine>
<Link id="l05949" /><CodeLine lineNumber="5949"></CodeLine>
<Link id="l05950" /><CodeLine lineNumber="5950"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// And finally for remaining arguments.</span></CodeLine>
<Link id="l05951" /><CodeLine lineNumber="5951"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;StackSaveAreaShadowPtr =</span></CodeLine>
<Link id="l05952" /><CodeLine lineNumber="5952"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(StackSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l05953" /><CodeLine lineNumber="5953"><span class="doxyHighlight">                                 <a href="/docs/api/structs/llvm/align">Align</a>(16), </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l05954" /><CodeLine lineNumber="5954"><span class="doxyHighlight">              .first;</span></CodeLine>
<Link id="l05955" /><CodeLine lineNumber="5955"></CodeLine>
<Link id="l05956" /><CodeLine lineNumber="5956"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;StackSrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad9b7f1f880f1c88e6856df87189d50f4">CreateInBoundsPtrAdd</a>(</span></CodeLine>
<Link id="l05957" /><CodeLine lineNumber="5957"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#ab9f4de9b4ec57edb2438b79673a5ec6a">VAArgTLSCopy</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a22d0152a937a027ca9abebce7e5163f3">AArch64VAEndOffset</a>));</span></CodeLine>
<Link id="l05958" /><CodeLine lineNumber="5958"></CodeLine>
<Link id="l05959" /><CodeLine lineNumber="5959"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(StackSaveAreaShadowPtr, <a href="/docs/api/structs/llvm/align">Align</a>(16), StackSrcPtr,</span></CodeLine>
<Link id="l05960" /><CodeLine lineNumber="5960"><span class="doxyHighlight">                       <a href="/docs/api/structs/llvm/align">Align</a>(16), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargaarch64helper/#a3316b61edf95b041fdfa4cc5a4a30ca9">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l05961" /><CodeLine lineNumber="5961"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05962" /><CodeLine lineNumber="5962"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05963" /><CodeLine lineNumber="5963"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l05964" /><CodeLine lineNumber="5964"></CodeLine>
<Link id="l05965" /><CodeLine lineNumber="5965"><span class="doxyHighlightComment">/// PowerPC-specific implementation of VarArgHelper.</span></CodeLine>
<Link id="l05966" /><CodeLine lineNumber="5966" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a4588465e6b40112792c0e7fc6f8ae69a">VarArgPowerPCHelper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l05967" /><CodeLine lineNumber="5967" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05968" /><CodeLine lineNumber="5968" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a0de7fbff7ecdbca47fd90bf405cab0c5"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a0de7fbff7ecdbca47fd90bf405cab0c5">VAArgSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05969" /><CodeLine lineNumber="5969"></CodeLine>
<Link id="l05970" /><CodeLine lineNumber="5970" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a4588465e6b40112792c0e7fc6f8ae69a"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a4588465e6b40112792c0e7fc6f8ae69a">VarArgPowerPCHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l05971" /><CodeLine lineNumber="5971"><span class="doxyHighlight">                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>)</span></CodeLine>
<Link id="l05972" /><CodeLine lineNumber="5972"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>) &#123;&#125;</span></CodeLine>
<Link id="l05973" /><CodeLine lineNumber="5973"></CodeLine>
<Link id="l05974" /><CodeLine lineNumber="5974" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a8e4ae572b54705c019d49eaed31ce04f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a8e4ae572b54705c019d49eaed31ce04f">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05975" /><CodeLine lineNumber="5975"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For PowerPC, we need to deal with alignment of stack arguments -</span></CodeLine>
<Link id="l05976" /><CodeLine lineNumber="5976"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// they are mostly aligned to 8 bytes, but vectors and i128 arrays</span></CodeLine>
<Link id="l05977" /><CodeLine lineNumber="5977"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// are aligned to 16 bytes, byvals can be aligned to 8 or 16 bytes,</span></CodeLine>
<Link id="l05978" /><CodeLine lineNumber="5978"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For that reason, we compute current offset from stack pointer (which is</span></CodeLine>
<Link id="l05979" /><CodeLine lineNumber="5979"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// always properly aligned), and offset for the first vararg, then subtract</span></CodeLine>
<Link id="l05980" /><CodeLine lineNumber="5980"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// them.</span></CodeLine>
<Link id="l05981" /><CodeLine lineNumber="5981"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VAArgBase;</span></CodeLine>
<Link id="l05982" /><CodeLine lineNumber="5982"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getParent()-&gt;getTargetTriple());</span></CodeLine>
<Link id="l05983" /><CodeLine lineNumber="5983"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Parameter save area starts at 48 bytes from frame pointer for ABIv1,</span></CodeLine>
<Link id="l05984" /><CodeLine lineNumber="5984"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and 32 bytes for ABIv2.  This is usually determined by target</span></CodeLine>
<Link id="l05985" /><CodeLine lineNumber="5985"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// endianness, but in theory could be overridden by function attribute.</span></CodeLine>
<Link id="l05986" /><CodeLine lineNumber="5986"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ab61d338cbe7892ab484e97c9b0c8c8c9">isPPC64</a>()) &#123;</span></CodeLine>
<Link id="l05987" /><CodeLine lineNumber="5987"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a1ab21929777b807678f98c873cdd7c7c">isPPC64ELFv2ABI</a>())</span></CodeLine>
<Link id="l05988" /><CodeLine lineNumber="5988"><span class="doxyHighlight">        VAArgBase = 32;</span></CodeLine>
<Link id="l05989" /><CodeLine lineNumber="5989"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05990" /><CodeLine lineNumber="5990"><span class="doxyHighlight">        VAArgBase = 48;</span></CodeLine>
<Link id="l05991" /><CodeLine lineNumber="5991"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05992" /><CodeLine lineNumber="5992"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Parameter save area is 8 bytes from frame pointer in PPC32</span></CodeLine>
<Link id="l05993" /><CodeLine lineNumber="5993"><span class="doxyHighlight">      VAArgBase = 8;</span></CodeLine>
<Link id="l05994" /><CodeLine lineNumber="5994"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05995" /><CodeLine lineNumber="5995"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VAArgOffset = VAArgBase;</span></CodeLine>
<Link id="l05996" /><CodeLine lineNumber="5996"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l05997" /><CodeLine lineNumber="5997"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l05998" /><CodeLine lineNumber="5998"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l05999" /><CodeLine lineNumber="5999"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsByVal = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::ByVal);</span></CodeLine>
<Link id="l06000" /><CodeLine lineNumber="6000"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsByVal) &#123;</span></CodeLine>
<Link id="l06001" /><CodeLine lineNumber="6001"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isPointerTy());</span></CodeLine>
<Link id="l06002" /><CodeLine lineNumber="6002"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;RealTy = CB.<a href="/docs/api/classes/llvm/callbase/#a88cc5fa65ff17e62b49dc5fb4401f813">getParamByValType</a>(ArgNo);</span></CodeLine>
<Link id="l06003" /><CodeLine lineNumber="6003"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(RealTy);</span></CodeLine>
<Link id="l06004" /><CodeLine lineNumber="6004"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/align">Align</a> ArgAlign = CB.<a href="/docs/api/classes/llvm/callbase/#a7713a45c8983df00c3975444b94e69ae">getParamAlign</a>(ArgNo).value&#95;or(<a href="/docs/api/structs/llvm/align">Align</a>(8));</span></CodeLine>
<Link id="l06005" /><CodeLine lineNumber="6005"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgAlign &lt; 8)</span></CodeLine>
<Link id="l06006" /><CodeLine lineNumber="6006"><span class="doxyHighlight">          ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l06007" /><CodeLine lineNumber="6007"><span class="doxyHighlight">        VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, ArgAlign);</span></CodeLine>
<Link id="l06008" /><CodeLine lineNumber="6008"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06009" /><CodeLine lineNumber="6009"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> =</span></CodeLine>
<Link id="l06010" /><CodeLine lineNumber="6010"><span class="doxyHighlight">              <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VAArgOffset - VAArgBase, ArgSize);</span></CodeLine>
<Link id="l06011" /><CodeLine lineNumber="6011"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>) &#123;</span></CodeLine>
<Link id="l06012" /><CodeLine lineNumber="6012"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;AShadowPtr, &#42;AOriginPtr;</span></CodeLine>
<Link id="l06013" /><CodeLine lineNumber="6013"><span class="doxyHighlight">            std::tie(AShadowPtr, AOriginPtr) =</span></CodeLine>
<Link id="l06014" /><CodeLine lineNumber="6014"><span class="doxyHighlight">                <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06015" /><CodeLine lineNumber="6015"><span class="doxyHighlight">                                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06016" /><CodeLine lineNumber="6016"></CodeLine>
<Link id="l06017" /><CodeLine lineNumber="6017"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, AShadowPtr,</span></CodeLine>
<Link id="l06018" /><CodeLine lineNumber="6018"><span class="doxyHighlight">                             <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, ArgSize);</span></CodeLine>
<Link id="l06019" /><CodeLine lineNumber="6019"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l06020" /><CodeLine lineNumber="6020"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06021" /><CodeLine lineNumber="6021"><span class="doxyHighlight">        VAArgOffset += <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgSize, <a href="/docs/api/structs/llvm/align">Align</a>(8));</span></CodeLine>
<Link id="l06022" /><CodeLine lineNumber="6022"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06023" /><CodeLine lineNumber="6023"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</span></CodeLine>
<Link id="l06024" /><CodeLine lineNumber="6024"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l06025" /><CodeLine lineNumber="6025"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/align">Align</a> ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l06026" /><CodeLine lineNumber="6026"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isArrayTy()) &#123;</span></CodeLine>
<Link id="l06027" /><CodeLine lineNumber="6027"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Arrays are aligned to element size, except for long double</span></CodeLine>
<Link id="l06028" /><CodeLine lineNumber="6028"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// arrays, which are aligned to 8 bytes.</span></CodeLine>
<Link id="l06029" /><CodeLine lineNumber="6029"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/type">Type</a> &#42;ElementTy = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;getArrayElementType();</span></CodeLine>
<Link id="l06030" /><CodeLine lineNumber="6030"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ElementTy-&gt;<a href="/docs/api/classes/llvm/type/#a670980c63f2e5ca39022baf96173eb9c">isPPC&#95;FP128Ty</a>())</span></CodeLine>
<Link id="l06031" /><CodeLine lineNumber="6031"><span class="doxyHighlight">            ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(ElementTy));</span></CodeLine>
<Link id="l06032" /><CodeLine lineNumber="6032"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isVectorTy()) &#123;</span></CodeLine>
<Link id="l06033" /><CodeLine lineNumber="6033"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Vectors are naturally aligned.</span></CodeLine>
<Link id="l06034" /><CodeLine lineNumber="6034"><span class="doxyHighlight">          ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(ArgSize);</span></CodeLine>
<Link id="l06035" /><CodeLine lineNumber="6035"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06036" /><CodeLine lineNumber="6036"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgAlign &lt; 8)</span></CodeLine>
<Link id="l06037" /><CodeLine lineNumber="6037"><span class="doxyHighlight">          ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l06038" /><CodeLine lineNumber="6038"><span class="doxyHighlight">        VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, ArgAlign);</span></CodeLine>
<Link id="l06039" /><CodeLine lineNumber="6039"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isBigEndian()) &#123;</span></CodeLine>
<Link id="l06040" /><CodeLine lineNumber="6040"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Adjusting the shadow for argument with size &lt; 8 to match the</span></CodeLine>
<Link id="l06041" /><CodeLine lineNumber="6041"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// placement of bits in big endian system</span></CodeLine>
<Link id="l06042" /><CodeLine lineNumber="6042"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgSize &lt; 8)</span></CodeLine>
<Link id="l06043" /><CodeLine lineNumber="6043"><span class="doxyHighlight">            VAArgOffset += (8 - ArgSize);</span></CodeLine>
<Link id="l06044" /><CodeLine lineNumber="6044"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06045" /><CodeLine lineNumber="6045"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06046" /><CodeLine lineNumber="6046"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> =</span></CodeLine>
<Link id="l06047" /><CodeLine lineNumber="6047"><span class="doxyHighlight">              <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VAArgOffset - VAArgBase, ArgSize);</span></CodeLine>
<Link id="l06048" /><CodeLine lineNumber="6048"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</span></CodeLine>
<Link id="l06049" /><CodeLine lineNumber="6049"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06050" /><CodeLine lineNumber="6050"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06051" /><CodeLine lineNumber="6051"><span class="doxyHighlight">        VAArgOffset += ArgSize;</span></CodeLine>
<Link id="l06052" /><CodeLine lineNumber="6052"><span class="doxyHighlight">        VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, <a href="/docs/api/structs/llvm/align">Align</a>(8));</span></CodeLine>
<Link id="l06053" /><CodeLine lineNumber="6053"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06054" /><CodeLine lineNumber="6054"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l06055" /><CodeLine lineNumber="6055"><span class="doxyHighlight">        VAArgBase = VAArgOffset;</span></CodeLine>
<Link id="l06056" /><CodeLine lineNumber="6056"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06057" /><CodeLine lineNumber="6057"></CodeLine>
<Link id="l06058" /><CodeLine lineNumber="6058"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;TotalVAArgSize =</span></CodeLine>
<Link id="l06059" /><CodeLine lineNumber="6059"><span class="doxyHighlight">        ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, VAArgOffset - VAArgBase);</span></CodeLine>
<Link id="l06060" /><CodeLine lineNumber="6060"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Here using VAArgOverflowSizeTLS as VAArgSizeTLS to avoid creation of</span></CodeLine>
<Link id="l06061" /><CodeLine lineNumber="6061"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a new class member i.e. it is the total size of all VarArgs.</span></CodeLine>
<Link id="l06062" /><CodeLine lineNumber="6062"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(TotalVAArgSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06063" /><CodeLine lineNumber="6063"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06064" /><CodeLine lineNumber="6064"></CodeLine>
<Link id="l06065" /><CodeLine lineNumber="6065" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a6a7c02af1eb9545e64bdf82e7f7d763e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a6a7c02af1eb9545e64bdf82e7f7d763e">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06066" /><CodeLine lineNumber="6066"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a0de7fbff7ecdbca47fd90bf405cab0c5">VAArgSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l06067" /><CodeLine lineNumber="6067"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06068" /><CodeLine lineNumber="6068"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l06069" /><CodeLine lineNumber="6069"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a0de7fbff7ecdbca47fd90bf405cab0c5">VAArgSize</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06070" /><CodeLine lineNumber="6070"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#a0de7fbff7ecdbca47fd90bf405cab0c5">VAArgSize</a>;</span></CodeLine>
<Link id="l06071" /><CodeLine lineNumber="6071"></CodeLine>
<Link id="l06072" /><CodeLine lineNumber="6072"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l06073" /><CodeLine lineNumber="6073"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l06074" /><CodeLine lineNumber="6074"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l06075" /><CodeLine lineNumber="6075"></CodeLine>
<Link id="l06076" /><CodeLine lineNumber="6076"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l06077" /><CodeLine lineNumber="6077"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06078" /><CodeLine lineNumber="6078"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l06079" /><CodeLine lineNumber="6079"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06080" /><CodeLine lineNumber="6080"></CodeLine>
<Link id="l06081" /><CodeLine lineNumber="6081"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l06082" /><CodeLine lineNumber="6082"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l06083" /><CodeLine lineNumber="6083"><span class="doxyHighlight">          ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l06084" /><CodeLine lineNumber="6084"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l06085" /><CodeLine lineNumber="6085"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l06086" /><CodeLine lineNumber="6086"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06087" /><CodeLine lineNumber="6087"></CodeLine>
<Link id="l06088" /><CodeLine lineNumber="6088"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start.</span></CodeLine>
<Link id="l06089" /><CodeLine lineNumber="6089"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Copy va&#95;list shadow from the backup copy of the TLS contents.</span></CodeLine>
<Link id="l06090" /><CodeLine lineNumber="6090"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getParent()-&gt;getTargetTriple());</span></CodeLine>
<Link id="l06091" /><CodeLine lineNumber="6091"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l06092" /><CodeLine lineNumber="6092"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l06093" /><CodeLine lineNumber="6093"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l06094" /><CodeLine lineNumber="6094"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06095" /><CodeLine lineNumber="6095"></CodeLine>
<Link id="l06096" /><CodeLine lineNumber="6096"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// In PPC32 va&#95;list&#95;tag is a struct, whereas in PPC64 it&#39;s a pointer</span></CodeLine>
<Link id="l06097" /><CodeLine lineNumber="6097"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TargetTriple.<a href="/docs/api/classes/llvm/triple/#ab61d338cbe7892ab484e97c9b0c8c8c9">isPPC64</a>()) &#123;</span></CodeLine>
<Link id="l06098" /><CodeLine lineNumber="6098"><span class="doxyHighlight">        RegSaveAreaPtrPtr =</span></CodeLine>
<Link id="l06099" /><CodeLine lineNumber="6099"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(RegSaveAreaPtrPtr, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, 8));</span></CodeLine>
<Link id="l06100" /><CodeLine lineNumber="6100"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06101" /><CodeLine lineNumber="6101"><span class="doxyHighlight">      RegSaveAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(RegSaveAreaPtrPtr, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l06102" /><CodeLine lineNumber="6102"></CodeLine>
<Link id="l06103" /><CodeLine lineNumber="6103"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, RegSaveAreaPtrPtr);</span></CodeLine>
<Link id="l06104" /><CodeLine lineNumber="6104"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaShadowPtr, &#42;RegSaveAreaOriginPtr;</span></CodeLine>
<Link id="l06105" /><CodeLine lineNumber="6105"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06106" /><CodeLine lineNumber="6106"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06107" /><CodeLine lineNumber="6107"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize);</span></CodeLine>
<Link id="l06108" /><CodeLine lineNumber="6108"><span class="doxyHighlight">      std::tie(RegSaveAreaShadowPtr, RegSaveAreaOriginPtr) =</span></CodeLine>
<Link id="l06109" /><CodeLine lineNumber="6109"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(RegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06110" /><CodeLine lineNumber="6110"><span class="doxyHighlight">                                 Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06111" /><CodeLine lineNumber="6111"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaShadowPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargpowerpchelper/#af0c1bb48e148bc7fdbf5cf1a93fea2af">VAArgTLSCopy</a>, Alignment,</span></CodeLine>
<Link id="l06112" /><CodeLine lineNumber="6112"><span class="doxyHighlight">                       CopySize);</span></CodeLine>
<Link id="l06113" /><CodeLine lineNumber="6113"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06114" /><CodeLine lineNumber="6114"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06115" /><CodeLine lineNumber="6115"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l06116" /><CodeLine lineNumber="6116"></CodeLine>
<Link id="l06117" /><CodeLine lineNumber="6117"><span class="doxyHighlightComment">/// SystemZ-specific implementation of VarArgHelper.</span></CodeLine>
<Link id="l06118" /><CodeLine lineNumber="6118" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a20caa6e1947b3736ad8ff941dc4d6dff">VarArgSystemZHelper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l06119" /><CodeLine lineNumber="6119" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aff472fcaf889bcefd1c94f80effd1a13"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aff472fcaf889bcefd1c94f80effd1a13">SystemZGpOffset</a> = 16;</span></CodeLine>
<Link id="l06120" /><CodeLine lineNumber="6120" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ad34aa743948bff9da779883e57d545d2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ad34aa743948bff9da779883e57d545d2">SystemZGpEndOffset</a> = 56;</span></CodeLine>
<Link id="l06121" /><CodeLine lineNumber="6121" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a49c9c4e4cabab591afe0ba76354dfe04"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a49c9c4e4cabab591afe0ba76354dfe04">SystemZFpOffset</a> = 128;</span></CodeLine>
<Link id="l06122" /><CodeLine lineNumber="6122" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aaf7e4e2588c60fec47997b4c8874b3a0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aaf7e4e2588c60fec47997b4c8874b3a0">SystemZFpEndOffset</a> = 160;</span></CodeLine>
<Link id="l06123" /><CodeLine lineNumber="6123" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aeefbb6207e17c525b2afad2b3aa24ffb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aeefbb6207e17c525b2afad2b3aa24ffb">SystemZMaxVrArgs</a> = 8;</span></CodeLine>
<Link id="l06124" /><CodeLine lineNumber="6124" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ab8b9c78abe59bfab0b87c5d9c2e2fc7a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ab8b9c78abe59bfab0b87c5d9c2e2fc7a">SystemZRegSaveAreaSize</a> = 160;</span></CodeLine>
<Link id="l06125" /><CodeLine lineNumber="6125" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a> = 160;</span></CodeLine>
<Link id="l06126" /><CodeLine lineNumber="6126" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a4c2bd17808c0303e7a2724883b78ec04"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a4c2bd17808c0303e7a2724883b78ec04">SystemZVAListTagSize</a> = 32;</span></CodeLine>
<Link id="l06127" /><CodeLine lineNumber="6127" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ac3e457b655994d6a120c6b827a6524a8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ac3e457b655994d6a120c6b827a6524a8">SystemZOverflowArgAreaPtrOffset</a> = 16;</span></CodeLine>
<Link id="l06128" /><CodeLine lineNumber="6128" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a09688e5a25f0cecec43287360c897501"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a09688e5a25f0cecec43287360c897501">SystemZRegSaveAreaPtrOffset</a> = 24;</span></CodeLine>
<Link id="l06129" /><CodeLine lineNumber="6129"></CodeLine>
<Link id="l06130" /><CodeLine lineNumber="6130" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a54780572278b47a95960b82e110aa9dc"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a54780572278b47a95960b82e110aa9dc">IsSoftFloatABI</a>;</span></CodeLine>
<Link id="l06131" /><CodeLine lineNumber="6131" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06132" /><CodeLine lineNumber="6132" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06133" /><CodeLine lineNumber="6133" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06134" /><CodeLine lineNumber="6134"></CodeLine>
<Link id="l06135" /><CodeLine lineNumber="6135" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum class</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6e">ArgKind</a> &#123;</span></CodeLine>
<Link id="l06136" /><CodeLine lineNumber="6136" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">GeneralPurpose</a>,</span></CodeLine>
<Link id="l06137" /><CodeLine lineNumber="6137" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea072f02cab92dcb89792657037629ac66"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea072f02cab92dcb89792657037629ac66">FloatingPoint</a>,</span></CodeLine>
<Link id="l06138" /><CodeLine lineNumber="6138" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea57dea6f5039281b7fee517fc43bf3110"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea57dea6f5039281b7fee517fc43bf3110">Vector</a>,</span></CodeLine>
<Link id="l06139" /><CodeLine lineNumber="6139" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">Memory</a>,</span></CodeLine>
<Link id="l06140" /><CodeLine lineNumber="6140" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea0b5ca9d0c6dbcbb3e299361cd4e4a79c"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea0b5ca9d0c6dbcbb3e299361cd4e4a79c">Indirect</a>,</span></CodeLine>
<Link id="l06141" /><CodeLine lineNumber="6141"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l06142" /><CodeLine lineNumber="6142"></CodeLine>
<Link id="l06143" /><CodeLine lineNumber="6143" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum class</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1">ShadowExtension</a> &#123; <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">None</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1ad7ed4ee1df437474d005188535f74875">Zero</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a31c6b3fdfaaa80dba2dbf92a4600524c">Sign</a> &#125;;</span></CodeLine>
<Link id="l06144" /><CodeLine lineNumber="6144"></CodeLine>
<Link id="l06145" /><CodeLine lineNumber="6145" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a20caa6e1947b3736ad8ff941dc4d6dff"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a20caa6e1947b3736ad8ff941dc4d6dff">VarArgSystemZHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l06146" /><CodeLine lineNumber="6146"><span class="doxyHighlight">                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>)</span></CodeLine>
<Link id="l06147" /><CodeLine lineNumber="6147"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a4c2bd17808c0303e7a2724883b78ec04">SystemZVAListTagSize</a>),</span></CodeLine>
<Link id="l06148" /><CodeLine lineNumber="6148"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a54780572278b47a95960b82e110aa9dc">IsSoftFloatABI</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getFnAttribute(</span><span class="doxyHighlightStringLiteral">&quot;use-soft-float&quot;</span><span class="doxyHighlight">).getValueAsBool()) &#123;&#125;</span></CodeLine>
<Link id="l06149" /><CodeLine lineNumber="6149"></CodeLine>
<Link id="l06150" /><CodeLine lineNumber="6150" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#af68ee6d3a8b0476f78254a7c6a888ade"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6e">ArgKind</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#af68ee6d3a8b0476f78254a7c6a888ade">classifyArgument</a>(<a href="/docs/api/classes/llvm/type">Type</a> &#42;T) &#123;</span></CodeLine>
<Link id="l06151" /><CodeLine lineNumber="6151"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// T is a SystemZABIInfo::classifyArgumentType() output, and there are</span></CodeLine>
<Link id="l06152" /><CodeLine lineNumber="6152"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// only a few possibilities of what it can be. In particular, enums, single</span></CodeLine>
<Link id="l06153" /><CodeLine lineNumber="6153"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// element structs and large types have already been taken care of.</span></CodeLine>
<Link id="l06154" /><CodeLine lineNumber="6154"></CodeLine>
<Link id="l06155" /><CodeLine lineNumber="6155"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Some i128 and fp128 arguments are converted to pointers only in the</span></CodeLine>
<Link id="l06156" /><CodeLine lineNumber="6156"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// back end.</span></CodeLine>
<Link id="l06157" /><CodeLine lineNumber="6157"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isIntegerTy(128) || T-&gt;isFP128Ty())</span></CodeLine>
<Link id="l06158" /><CodeLine lineNumber="6158"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea0b5ca9d0c6dbcbb3e299361cd4e4a79c">ArgKind::Indirect</a>;</span></CodeLine>
<Link id="l06159" /><CodeLine lineNumber="6159"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isFloatingPointTy())</span></CodeLine>
<Link id="l06160" /><CodeLine lineNumber="6160"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a54780572278b47a95960b82e110aa9dc">IsSoftFloatABI</a> ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">ArgKind::GeneralPurpose</a> : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea072f02cab92dcb89792657037629ac66">ArgKind::FloatingPoint</a>;</span></CodeLine>
<Link id="l06161" /><CodeLine lineNumber="6161"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isIntegerTy() || T-&gt;isPointerTy())</span></CodeLine>
<Link id="l06162" /><CodeLine lineNumber="6162"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">ArgKind::GeneralPurpose</a>;</span></CodeLine>
<Link id="l06163" /><CodeLine lineNumber="6163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (T-&gt;isVectorTy())</span></CodeLine>
<Link id="l06164" /><CodeLine lineNumber="6164"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea57dea6f5039281b7fee517fc43bf3110">ArgKind::Vector</a>;</span></CodeLine>
<Link id="l06165" /><CodeLine lineNumber="6165"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">ArgKind::Memory</a>;</span></CodeLine>
<Link id="l06166" /><CodeLine lineNumber="6166"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06167" /><CodeLine lineNumber="6167"></CodeLine>
<Link id="l06168" /><CodeLine lineNumber="6168" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a7d1221047aae479ec27a751236ae95e6"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1">ShadowExtension</a> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a7d1221047aae479ec27a751236ae95e6">getShadowExtension</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgNo) &#123;</span></CodeLine>
<Link id="l06169" /><CodeLine lineNumber="6169"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ABI says: &quot;One of the simple integer types no more than 64 bits wide.</span></CodeLine>
<Link id="l06170" /><CodeLine lineNumber="6170"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ... If such an argument is shorter than 64 bits, replace it by a full</span></CodeLine>
<Link id="l06171" /><CodeLine lineNumber="6171"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 64-bit integer representing the same number, using sign or zero</span></CodeLine>
<Link id="l06172" /><CodeLine lineNumber="6172"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// extension&quot;. Shadow for an integer argument has the same type as the</span></CodeLine>
<Link id="l06173" /><CodeLine lineNumber="6173"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// argument itself, so it can be sign or zero extended as well.</span></CodeLine>
<Link id="l06174" /><CodeLine lineNumber="6174"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ZExt = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::ZExt);</span></CodeLine>
<Link id="l06175" /><CodeLine lineNumber="6175"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> SExt = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::SExt);</span></CodeLine>
<Link id="l06176" /><CodeLine lineNumber="6176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ZExt) &#123;</span></CodeLine>
<Link id="l06177" /><CodeLine lineNumber="6177"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SExt);</span></CodeLine>
<Link id="l06178" /><CodeLine lineNumber="6178"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1ad7ed4ee1df437474d005188535f74875">ShadowExtension::Zero</a>;</span></CodeLine>
<Link id="l06179" /><CodeLine lineNumber="6179"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06180" /><CodeLine lineNumber="6180"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SExt) &#123;</span></CodeLine>
<Link id="l06181" /><CodeLine lineNumber="6181"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ZExt);</span></CodeLine>
<Link id="l06182" /><CodeLine lineNumber="6182"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a31c6b3fdfaaa80dba2dbf92a4600524c">ShadowExtension::Sign</a>;</span></CodeLine>
<Link id="l06183" /><CodeLine lineNumber="6183"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06184" /><CodeLine lineNumber="6184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">ShadowExtension::None</a>;</span></CodeLine>
<Link id="l06185" /><CodeLine lineNumber="6185"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06186" /><CodeLine lineNumber="6186"></CodeLine>
<Link id="l06187" /><CodeLine lineNumber="6187" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#af0bc023f29f779469e5e8e3f92b9db0f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#af0bc023f29f779469e5e8e3f92b9db0f">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06188" /><CodeLine lineNumber="6188"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GpOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aff472fcaf889bcefd1c94f80effd1a13">SystemZGpOffset</a>;</span></CodeLine>
<Link id="l06189" /><CodeLine lineNumber="6189"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FpOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a49c9c4e4cabab591afe0ba76354dfe04">SystemZFpOffset</a>;</span></CodeLine>
<Link id="l06190" /><CodeLine lineNumber="6190"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VrIndex = 0;</span></CodeLine>
<Link id="l06191" /><CodeLine lineNumber="6191"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OverflowOffset = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a>;</span></CodeLine>
<Link id="l06192" /><CodeLine lineNumber="6192"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06193" /><CodeLine lineNumber="6193"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l06194" /><CodeLine lineNumber="6194"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l06195" /><CodeLine lineNumber="6195"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// SystemZABIInfo does not produce ByVal parameters.</span></CodeLine>
<Link id="l06196" /><CodeLine lineNumber="6196"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::ByVal));</span></CodeLine>
<Link id="l06197" /><CodeLine lineNumber="6197"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;T = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType();</span></CodeLine>
<Link id="l06198" /><CodeLine lineNumber="6198"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6e">ArgKind</a> AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#af68ee6d3a8b0476f78254a7c6a888ade">classifyArgument</a>(T);</span></CodeLine>
<Link id="l06199" /><CodeLine lineNumber="6199"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea0b5ca9d0c6dbcbb3e299361cd4e4a79c">ArgKind::Indirect</a>) &#123;</span></CodeLine>
<Link id="l06200" /><CodeLine lineNumber="6200"><span class="doxyHighlight">        T = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy;</span></CodeLine>
<Link id="l06201" /><CodeLine lineNumber="6201"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">ArgKind::GeneralPurpose</a>;</span></CodeLine>
<Link id="l06202" /><CodeLine lineNumber="6202"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06203" /><CodeLine lineNumber="6203"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">ArgKind::GeneralPurpose</a> &amp;&amp; GpOffset &gt;= <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ad34aa743948bff9da779883e57d545d2">SystemZGpEndOffset</a>)</span></CodeLine>
<Link id="l06204" /><CodeLine lineNumber="6204"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">ArgKind::Memory</a>;</span></CodeLine>
<Link id="l06205" /><CodeLine lineNumber="6205"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea072f02cab92dcb89792657037629ac66">ArgKind::FloatingPoint</a> &amp;&amp; FpOffset &gt;= <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aaf7e4e2588c60fec47997b4c8874b3a0">SystemZFpEndOffset</a>)</span></CodeLine>
<Link id="l06206" /><CodeLine lineNumber="6206"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">ArgKind::Memory</a>;</span></CodeLine>
<Link id="l06207" /><CodeLine lineNumber="6207"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AK == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea57dea6f5039281b7fee517fc43bf3110">ArgKind::Vector</a> &amp;&amp; (VrIndex &gt;= <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aeefbb6207e17c525b2afad2b3aa24ffb">SystemZMaxVrArgs</a> || !IsFixed))</span></CodeLine>
<Link id="l06208" /><CodeLine lineNumber="6208"><span class="doxyHighlight">        AK = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">ArgKind::Memory</a>;</span></CodeLine>
<Link id="l06209" /><CodeLine lineNumber="6209"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06210" /><CodeLine lineNumber="6210"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;OriginBase = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06211" /><CodeLine lineNumber="6211"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1">ShadowExtension</a> SE = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">ShadowExtension::None</a>;</span></CodeLine>
<Link id="l06212" /><CodeLine lineNumber="6212"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (AK) &#123;</span></CodeLine>
<Link id="l06213" /><CodeLine lineNumber="6213"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6eab7f023dbb86242b37e451d0b36dde93d">ArgKind::GeneralPurpose</a>: &#123;</span></CodeLine>
<Link id="l06214" /><CodeLine lineNumber="6214"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Always keep track of GpOffset, but store shadow only for varargs.</span></CodeLine>
<Link id="l06215" /><CodeLine lineNumber="6215"><span class="doxyHighlight">        uint64&#95;t ArgSize = 8;</span></CodeLine>
<Link id="l06216" /><CodeLine lineNumber="6216"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GpOffset + ArgSize &lt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l06217" /><CodeLine lineNumber="6217"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06218" /><CodeLine lineNumber="6218"><span class="doxyHighlight">            SE = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a7d1221047aae479ec27a751236ae95e6">getShadowExtension</a>(CB, ArgNo);</span></CodeLine>
<Link id="l06219" /><CodeLine lineNumber="6219"><span class="doxyHighlight">            uint64&#95;t GapSize = 0;</span></CodeLine>
<Link id="l06220" /><CodeLine lineNumber="6220"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SE == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">ShadowExtension::None</a>) &#123;</span></CodeLine>
<Link id="l06221" /><CodeLine lineNumber="6221"><span class="doxyHighlight">              uint64&#95;t ArgAllocSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(T);</span></CodeLine>
<Link id="l06222" /><CodeLine lineNumber="6222"><span class="doxyHighlight">              <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArgAllocSize &lt;= ArgSize);</span></CodeLine>
<Link id="l06223" /><CodeLine lineNumber="6223"><span class="doxyHighlight">              GapSize = ArgSize - ArgAllocSize;</span></CodeLine>
<Link id="l06224" /><CodeLine lineNumber="6224"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l06225" /><CodeLine lineNumber="6225"><span class="doxyHighlight">            ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a44ec33d41f2d1ca12b7b6aa206877a5a">getShadowAddrForVAArgument</a>(IRB, GpOffset + GapSize);</span></CodeLine>
<Link id="l06226" /><CodeLine lineNumber="6226"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l06227" /><CodeLine lineNumber="6227"><span class="doxyHighlight">              OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, GpOffset + GapSize);</span></CodeLine>
<Link id="l06228" /><CodeLine lineNumber="6228"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l06229" /><CodeLine lineNumber="6229"><span class="doxyHighlight">          GpOffset += ArgSize;</span></CodeLine>
<Link id="l06230" /><CodeLine lineNumber="6230"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06231" /><CodeLine lineNumber="6231"><span class="doxyHighlight">          GpOffset = <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>;</span></CodeLine>
<Link id="l06232" /><CodeLine lineNumber="6232"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06233" /><CodeLine lineNumber="6233"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06234" /><CodeLine lineNumber="6234"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06235" /><CodeLine lineNumber="6235"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea072f02cab92dcb89792657037629ac66">ArgKind::FloatingPoint</a>: &#123;</span></CodeLine>
<Link id="l06236" /><CodeLine lineNumber="6236"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Always keep track of FpOffset, but store shadow only for varargs.</span></CodeLine>
<Link id="l06237" /><CodeLine lineNumber="6237"><span class="doxyHighlight">        uint64&#95;t ArgSize = 8;</span></CodeLine>
<Link id="l06238" /><CodeLine lineNumber="6238"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FpOffset + ArgSize &lt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l06239" /><CodeLine lineNumber="6239"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06240" /><CodeLine lineNumber="6240"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// PoP says: &quot;A short floating-point datum requires only the</span></CodeLine>
<Link id="l06241" /><CodeLine lineNumber="6241"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// left-most 32 bit positions of a floating-point register&quot;.</span></CodeLine>
<Link id="l06242" /><CodeLine lineNumber="6242"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// Therefore, in contrast to AK&#95;GeneralPurpose and AK&#95;Memory,</span></CodeLine>
<Link id="l06243" /><CodeLine lineNumber="6243"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// don&#39;t extend shadow and don&#39;t mind the gap.</span></CodeLine>
<Link id="l06244" /><CodeLine lineNumber="6244"><span class="doxyHighlight">            ShadowBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a44ec33d41f2d1ca12b7b6aa206877a5a">getShadowAddrForVAArgument</a>(IRB, FpOffset);</span></CodeLine>
<Link id="l06245" /><CodeLine lineNumber="6245"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l06246" /><CodeLine lineNumber="6246"><span class="doxyHighlight">              OriginBase = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, FpOffset);</span></CodeLine>
<Link id="l06247" /><CodeLine lineNumber="6247"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l06248" /><CodeLine lineNumber="6248"><span class="doxyHighlight">          FpOffset += ArgSize;</span></CodeLine>
<Link id="l06249" /><CodeLine lineNumber="6249"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06250" /><CodeLine lineNumber="6250"><span class="doxyHighlight">          FpOffset = <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>;</span></CodeLine>
<Link id="l06251" /><CodeLine lineNumber="6251"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06252" /><CodeLine lineNumber="6252"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06253" /><CodeLine lineNumber="6253"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06254" /><CodeLine lineNumber="6254"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea57dea6f5039281b7fee517fc43bf3110">ArgKind::Vector</a>: &#123;</span></CodeLine>
<Link id="l06255" /><CodeLine lineNumber="6255"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Keep track of VrIndex. No need to store shadow, since vector varargs</span></CodeLine>
<Link id="l06256" /><CodeLine lineNumber="6256"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// go through AK&#95;Memory.</span></CodeLine>
<Link id="l06257" /><CodeLine lineNumber="6257"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsFixed);</span></CodeLine>
<Link id="l06258" /><CodeLine lineNumber="6258"><span class="doxyHighlight">        VrIndex++;</span></CodeLine>
<Link id="l06259" /><CodeLine lineNumber="6259"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06260" /><CodeLine lineNumber="6260"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06261" /><CodeLine lineNumber="6261"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea4789f23283b3a61f858b641a1bef19a3">ArgKind::Memory</a>: &#123;</span></CodeLine>
<Link id="l06262" /><CodeLine lineNumber="6262"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Keep track of OverflowOffset and store shadow only for varargs.</span></CodeLine>
<Link id="l06263" /><CodeLine lineNumber="6263"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Ignore fixed args, since we need to copy only the vararg portion of</span></CodeLine>
<Link id="l06264" /><CodeLine lineNumber="6264"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// the overflow area shadow.</span></CodeLine>
<Link id="l06265" /><CodeLine lineNumber="6265"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06266" /><CodeLine lineNumber="6266"><span class="doxyHighlight">          uint64&#95;t ArgAllocSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(T);</span></CodeLine>
<Link id="l06267" /><CodeLine lineNumber="6267"><span class="doxyHighlight">          uint64&#95;t ArgSize = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgAllocSize, 8);</span></CodeLine>
<Link id="l06268" /><CodeLine lineNumber="6268"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OverflowOffset + ArgSize &lt;= <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>) &#123;</span></CodeLine>
<Link id="l06269" /><CodeLine lineNumber="6269"><span class="doxyHighlight">            SE = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a7d1221047aae479ec27a751236ae95e6">getShadowExtension</a>(CB, ArgNo);</span></CodeLine>
<Link id="l06270" /><CodeLine lineNumber="6270"><span class="doxyHighlight">            uint64&#95;t GapSize =</span></CodeLine>
<Link id="l06271" /><CodeLine lineNumber="6271"><span class="doxyHighlight">                SE == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">ShadowExtension::None</a> ? ArgSize - ArgAllocSize : 0;</span></CodeLine>
<Link id="l06272" /><CodeLine lineNumber="6272"><span class="doxyHighlight">            ShadowBase =</span></CodeLine>
<Link id="l06273" /><CodeLine lineNumber="6273"><span class="doxyHighlight">                <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a44ec33d41f2d1ca12b7b6aa206877a5a">getShadowAddrForVAArgument</a>(IRB, OverflowOffset + GapSize);</span></CodeLine>
<Link id="l06274" /><CodeLine lineNumber="6274"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l06275" /><CodeLine lineNumber="6275"><span class="doxyHighlight">              OriginBase =</span></CodeLine>
<Link id="l06276" /><CodeLine lineNumber="6276"><span class="doxyHighlight">                  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a50558d965872bd6791f30891dbf84487">getOriginPtrForVAArgument</a>(IRB, OverflowOffset + GapSize);</span></CodeLine>
<Link id="l06277" /><CodeLine lineNumber="6277"><span class="doxyHighlight">            OverflowOffset += ArgSize;</span></CodeLine>
<Link id="l06278" /><CodeLine lineNumber="6278"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06279" /><CodeLine lineNumber="6279"><span class="doxyHighlight">            OverflowOffset = <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>;</span></CodeLine>
<Link id="l06280" /><CodeLine lineNumber="6280"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l06281" /><CodeLine lineNumber="6281"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06282" /><CodeLine lineNumber="6282"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06283" /><CodeLine lineNumber="6283"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06284" /><CodeLine lineNumber="6284"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a468b1486c4619f3b7f6f7e12d277cc6ea0b5ca9d0c6dbcbb3e299361cd4e4a79c">ArgKind::Indirect</a>:</span></CodeLine>
<Link id="l06285" /><CodeLine lineNumber="6285"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Indirect must be converted to GeneralPurpose&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06286" /><CodeLine lineNumber="6286"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06287" /><CodeLine lineNumber="6287"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ShadowBase == </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l06288" /><CodeLine lineNumber="6288"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06289" /><CodeLine lineNumber="6289"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l06290" /><CodeLine lineNumber="6290"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SE != <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a6adf97f83acf6453d4a6a4b1070f3754">ShadowExtension::None</a>)</span></CodeLine>
<Link id="l06291" /><CodeLine lineNumber="6291"><span class="doxyHighlight">        Shadow = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.CreateShadowCast(IRB, Shadow, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(),</span></CodeLine>
<Link id="l06292" /><CodeLine lineNumber="6292"><span class="doxyHighlight">                                      </span><span class="doxyHighlightComment">/&#42;Signed&#42;/</span><span class="doxyHighlight"> SE == <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a63c66175e1929cc19e1d92352595ebe1a31c6b3fdfaaa80dba2dbf92a4600524c">ShadowExtension::Sign</a>);</span></CodeLine>
<Link id="l06293" /><CodeLine lineNumber="6293"><span class="doxyHighlight">      ShadowBase = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(ShadowBase, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, </span><span class="doxyHighlightStringLiteral">&quot;&#95;msarg&#95;va&#95;s&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06294" /><CodeLine lineNumber="6294"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(Shadow, ShadowBase);</span></CodeLine>
<Link id="l06295" /><CodeLine lineNumber="6295"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l06296" /><CodeLine lineNumber="6296"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;Origin = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getOrigin(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l06297" /><CodeLine lineNumber="6297"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/typesize">TypeSize</a> StoreSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(Shadow-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</span></CodeLine>
<Link id="l06298" /><CodeLine lineNumber="6298"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.paintOrigin(IRB, Origin, OriginBase, StoreSize,</span></CodeLine>
<Link id="l06299" /><CodeLine lineNumber="6299"><span class="doxyHighlight">                        <a href="#a0760acbb386bfe440e697587140561cc">kMinOriginAlignment</a>);</span></CodeLine>
<Link id="l06300" /><CodeLine lineNumber="6300"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06301" /><CodeLine lineNumber="6301"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06302" /><CodeLine lineNumber="6302"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;OverflowSize = ConstantInt::get(</span></CodeLine>
<Link id="l06303" /><CodeLine lineNumber="6303"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), OverflowOffset - <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a>);</span></CodeLine>
<Link id="l06304" /><CodeLine lineNumber="6304"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(OverflowSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06305" /><CodeLine lineNumber="6305"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06306" /><CodeLine lineNumber="6306"></CodeLine>
<Link id="l06307" /><CodeLine lineNumber="6307" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a831a9764856351a89b415e39b0557d06"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a831a9764856351a89b415e39b0557d06">copyRegSaveArea</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag) &#123;</span></CodeLine>
<Link id="l06308" /><CodeLine lineNumber="6308"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l06309" /><CodeLine lineNumber="6309"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l06310" /><CodeLine lineNumber="6310"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l06311" /><CodeLine lineNumber="6311"><span class="doxyHighlight">            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a09688e5a25f0cecec43287360c897501">SystemZRegSaveAreaPtrOffset</a>)),</span></CodeLine>
<Link id="l06312" /><CodeLine lineNumber="6312"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l06313" /><CodeLine lineNumber="6313"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, RegSaveAreaPtrPtr);</span></CodeLine>
<Link id="l06314" /><CodeLine lineNumber="6314"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaShadowPtr, &#42;RegSaveAreaOriginPtr;</span></CodeLine>
<Link id="l06315" /><CodeLine lineNumber="6315"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l06316" /><CodeLine lineNumber="6316"><span class="doxyHighlight">    std::tie(RegSaveAreaShadowPtr, RegSaveAreaOriginPtr) =</span></CodeLine>
<Link id="l06317" /><CodeLine lineNumber="6317"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(RegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), Alignment,</span></CodeLine>
<Link id="l06318" /><CodeLine lineNumber="6318"><span class="doxyHighlight">                               </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06319" /><CodeLine lineNumber="6319"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO(iii): copy only fragments filled by visitCallBase()</span></CodeLine>
<Link id="l06320" /><CodeLine lineNumber="6320"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO(iii): support packed-stack &amp;&amp; !use-soft-float</span></CodeLine>
<Link id="l06321" /><CodeLine lineNumber="6321"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For use-soft-float functions, it is enough to copy just the GPRs.</span></CodeLine>
<Link id="l06322" /><CodeLine lineNumber="6322"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RegSaveAreaSize =</span></CodeLine>
<Link id="l06323" /><CodeLine lineNumber="6323"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a54780572278b47a95960b82e110aa9dc">IsSoftFloatABI</a> ? <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ad34aa743948bff9da779883e57d545d2">SystemZGpEndOffset</a> : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ab8b9c78abe59bfab0b87c5d9c2e2fc7a">SystemZRegSaveAreaSize</a>;</span></CodeLine>
<Link id="l06324" /><CodeLine lineNumber="6324"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaShadowPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a>, Alignment,</span></CodeLine>
<Link id="l06325" /><CodeLine lineNumber="6325"><span class="doxyHighlight">                     RegSaveAreaSize);</span></CodeLine>
<Link id="l06326" /><CodeLine lineNumber="6326"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins)</span></CodeLine>
<Link id="l06327" /><CodeLine lineNumber="6327"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaOriginPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a>,</span></CodeLine>
<Link id="l06328" /><CodeLine lineNumber="6328"><span class="doxyHighlight">                       Alignment, RegSaveAreaSize);</span></CodeLine>
<Link id="l06329" /><CodeLine lineNumber="6329"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06330" /><CodeLine lineNumber="6330"></CodeLine>
<Link id="l06331" /><CodeLine lineNumber="6331"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: This implementation limits OverflowOffset to kParamTLSSize, so we</span></CodeLine>
<Link id="l06332" /><CodeLine lineNumber="6332"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// don&#39;t know real overflow size and can&#39;t clear shadow beyond kParamTLSSize.</span></CodeLine>
<Link id="l06333" /><CodeLine lineNumber="6333" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a91f4aecc323597d1fa23c01644950f45"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a91f4aecc323597d1fa23c01644950f45">copyOverflowArea</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag) &#123;</span></CodeLine>
<Link id="l06334" /><CodeLine lineNumber="6334"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaPtrPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</span></CodeLine>
<Link id="l06335" /><CodeLine lineNumber="6335"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</span></CodeLine>
<Link id="l06336" /><CodeLine lineNumber="6336"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l06337" /><CodeLine lineNumber="6337"><span class="doxyHighlight">            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#ac3e457b655994d6a120c6b827a6524a8">SystemZOverflowArgAreaPtrOffset</a>)),</span></CodeLine>
<Link id="l06338" /><CodeLine lineNumber="6338"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy);</span></CodeLine>
<Link id="l06339" /><CodeLine lineNumber="6339"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.PtrTy, OverflowArgAreaPtrPtr);</span></CodeLine>
<Link id="l06340" /><CodeLine lineNumber="6340"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;OverflowArgAreaShadowPtr, &#42;OverflowArgAreaOriginPtr;</span></CodeLine>
<Link id="l06341" /><CodeLine lineNumber="6341"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(8);</span></CodeLine>
<Link id="l06342" /><CodeLine lineNumber="6342"><span class="doxyHighlight">    std::tie(OverflowArgAreaShadowPtr, OverflowArgAreaOriginPtr) =</span></CodeLine>
<Link id="l06343" /><CodeLine lineNumber="6343"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(OverflowArgAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06344" /><CodeLine lineNumber="6344"><span class="doxyHighlight">                               Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06345" /><CodeLine lineNumber="6345"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a>,</span></CodeLine>
<Link id="l06346" /><CodeLine lineNumber="6346"><span class="doxyHighlight">                                           <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a>);</span></CodeLine>
<Link id="l06347" /><CodeLine lineNumber="6347"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(OverflowArgAreaShadowPtr, Alignment, SrcPtr, Alignment,</span></CodeLine>
<Link id="l06348" /><CodeLine lineNumber="6348"><span class="doxyHighlight">                     <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l06349" /><CodeLine lineNumber="6349"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l06350" /><CodeLine lineNumber="6350"><span class="doxyHighlight">      SrcPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1ac3f0b68c9c78c4f9e1eb09cd415db8">CreateConstGEP1&#95;32</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a>,</span></CodeLine>
<Link id="l06351" /><CodeLine lineNumber="6351"><span class="doxyHighlight">                                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a>);</span></CodeLine>
<Link id="l06352" /><CodeLine lineNumber="6352"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(OverflowArgAreaOriginPtr, Alignment, SrcPtr, Alignment,</span></CodeLine>
<Link id="l06353" /><CodeLine lineNumber="6353"><span class="doxyHighlight">                       <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l06354" /><CodeLine lineNumber="6354"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06355" /><CodeLine lineNumber="6355"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06356" /><CodeLine lineNumber="6356"></CodeLine>
<Link id="l06357" /><CodeLine lineNumber="6357" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aeff71653a760718fea2a9b166f8df1b4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#aeff71653a760718fea2a9b166f8df1b4">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06358" /><CodeLine lineNumber="6358"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l06359" /><CodeLine lineNumber="6359"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06360" /><CodeLine lineNumber="6360"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l06361" /><CodeLine lineNumber="6361"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l06362" /><CodeLine lineNumber="6362"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l06363" /><CodeLine lineNumber="6363"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l06364" /><CodeLine lineNumber="6364"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a> =</span></CodeLine>
<Link id="l06365" /><CodeLine lineNumber="6365"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06366" /><CodeLine lineNumber="6366"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize =</span></CodeLine>
<Link id="l06367" /><CodeLine lineNumber="6367"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a69a54dd62aa091a615c4d850d0372c51">SystemZOverflowOffset</a>),</span></CodeLine>
<Link id="l06368" /><CodeLine lineNumber="6368"><span class="doxyHighlight">                        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a929d0ca0dbbae04dc8d4174acc5c86ab">VAArgOverflowSize</a>);</span></CodeLine>
<Link id="l06369" /><CodeLine lineNumber="6369"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l06370" /><CodeLine lineNumber="6370"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06371" /><CodeLine lineNumber="6371"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l06372" /><CodeLine lineNumber="6372"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06373" /><CodeLine lineNumber="6373"></CodeLine>
<Link id="l06374" /><CodeLine lineNumber="6374"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l06375" /><CodeLine lineNumber="6375"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l06376" /><CodeLine lineNumber="6376"><span class="doxyHighlight">          ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l06377" /><CodeLine lineNumber="6377"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a033823c3841f3579f00dda619f50d1c7">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l06378" /><CodeLine lineNumber="6378"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l06379" /><CodeLine lineNumber="6379"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.TrackOrigins) &#123;</span></CodeLine>
<Link id="l06380" /><CodeLine lineNumber="6380"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l06381" /><CodeLine lineNumber="6381"><span class="doxyHighlight">        <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06382" /><CodeLine lineNumber="6382"><span class="doxyHighlight">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a1f5a7330ff27331bd15a76329168a8e6">VAArgTLSOriginCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>,</span></CodeLine>
<Link id="l06383" /><CodeLine lineNumber="6383"><span class="doxyHighlight">                         <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOriginTLS, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l06384" /><CodeLine lineNumber="6384"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06385" /><CodeLine lineNumber="6385"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06386" /><CodeLine lineNumber="6386"></CodeLine>
<Link id="l06387" /><CodeLine lineNumber="6387"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start.</span></CodeLine>
<Link id="l06388" /><CodeLine lineNumber="6388"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Copy va&#95;list shadow from the backup copy of the TLS contents.</span></CodeLine>
<Link id="l06389" /><CodeLine lineNumber="6389"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l06390" /><CodeLine lineNumber="6390"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l06391" /><CodeLine lineNumber="6391"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l06392" /><CodeLine lineNumber="6392"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a831a9764856351a89b415e39b0557d06">copyRegSaveArea</a>(IRB, VAListTag);</span></CodeLine>
<Link id="l06393" /><CodeLine lineNumber="6393"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargsystemzhelper/#a91f4aecc323597d1fa23c01644950f45">copyOverflowArea</a>(IRB, VAListTag);</span></CodeLine>
<Link id="l06394" /><CodeLine lineNumber="6394"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06395" /><CodeLine lineNumber="6395"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06396" /><CodeLine lineNumber="6396"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l06397" /><CodeLine lineNumber="6397"></CodeLine>
<Link id="l06398" /><CodeLine lineNumber="6398"><span class="doxyHighlightComment">/// i386-specific implementation of VarArgHelper.</span></CodeLine>
<Link id="l06399" /><CodeLine lineNumber="6399" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#adb8af85c43594df26f5b1c0c25e835fb">VarArgI386Helper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l06400" /><CodeLine lineNumber="6400" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06401" /><CodeLine lineNumber="6401" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a40af0015ad73c24bf64e3d67ed002c37"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a40af0015ad73c24bf64e3d67ed002c37">VAArgSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06402" /><CodeLine lineNumber="6402"></CodeLine>
<Link id="l06403" /><CodeLine lineNumber="6403" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#adb8af85c43594df26f5b1c0c25e835fb"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#adb8af85c43594df26f5b1c0c25e835fb">VarArgI386Helper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l06404" /><CodeLine lineNumber="6404"><span class="doxyHighlight">                   <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>)</span></CodeLine>
<Link id="l06405" /><CodeLine lineNumber="6405"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">4) &#123;&#125;</span></CodeLine>
<Link id="l06406" /><CodeLine lineNumber="6406"></CodeLine>
<Link id="l06407" /><CodeLine lineNumber="6407" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a372b313738e7d6b96b0ef622ce60890c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a372b313738e7d6b96b0ef622ce60890c">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06408" /><CodeLine lineNumber="6408"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06409" /><CodeLine lineNumber="6409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06410" /><CodeLine lineNumber="6410"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VAArgOffset = 0;</span></CodeLine>
<Link id="l06411" /><CodeLine lineNumber="6411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l06412" /><CodeLine lineNumber="6412"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l06413" /><CodeLine lineNumber="6413"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsByVal = CB.<a href="/docs/api/classes/llvm/callbase/#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(ArgNo, Attribute::ByVal);</span></CodeLine>
<Link id="l06414" /><CodeLine lineNumber="6414"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsByVal) &#123;</span></CodeLine>
<Link id="l06415" /><CodeLine lineNumber="6415"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType()-&gt;isPointerTy());</span></CodeLine>
<Link id="l06416" /><CodeLine lineNumber="6416"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;RealTy = CB.<a href="/docs/api/classes/llvm/callbase/#a88cc5fa65ff17e62b49dc5fb4401f813">getParamByValType</a>(ArgNo);</span></CodeLine>
<Link id="l06417" /><CodeLine lineNumber="6417"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(RealTy);</span></CodeLine>
<Link id="l06418" /><CodeLine lineNumber="6418"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/align">Align</a> ArgAlign = CB.<a href="/docs/api/classes/llvm/callbase/#a7713a45c8983df00c3975444b94e69ae">getParamAlign</a>(ArgNo).value&#95;or(<a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize));</span></CodeLine>
<Link id="l06419" /><CodeLine lineNumber="6419"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgAlign &lt; IntptrSize)</span></CodeLine>
<Link id="l06420" /><CodeLine lineNumber="6420"><span class="doxyHighlight">          ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize);</span></CodeLine>
<Link id="l06421" /><CodeLine lineNumber="6421"><span class="doxyHighlight">        VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, ArgAlign);</span></CodeLine>
<Link id="l06422" /><CodeLine lineNumber="6422"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06423" /><CodeLine lineNumber="6423"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VAArgOffset, ArgSize);</span></CodeLine>
<Link id="l06424" /><CodeLine lineNumber="6424"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>) &#123;</span></CodeLine>
<Link id="l06425" /><CodeLine lineNumber="6425"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;AShadowPtr, &#42;AOriginPtr;</span></CodeLine>
<Link id="l06426" /><CodeLine lineNumber="6426"><span class="doxyHighlight">            std::tie(AShadowPtr, AOriginPtr) =</span></CodeLine>
<Link id="l06427" /><CodeLine lineNumber="6427"><span class="doxyHighlight">                <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06428" /><CodeLine lineNumber="6428"><span class="doxyHighlight">                                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06429" /><CodeLine lineNumber="6429"></CodeLine>
<Link id="l06430" /><CodeLine lineNumber="6430"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, AShadowPtr,</span></CodeLine>
<Link id="l06431" /><CodeLine lineNumber="6431"><span class="doxyHighlight">                             <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, ArgSize);</span></CodeLine>
<Link id="l06432" /><CodeLine lineNumber="6432"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l06433" /><CodeLine lineNumber="6433"><span class="doxyHighlight">          VAArgOffset += <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(ArgSize, <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize));</span></CodeLine>
<Link id="l06434" /><CodeLine lineNumber="6434"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06435" /><CodeLine lineNumber="6435"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06436" /><CodeLine lineNumber="6436"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</span></CodeLine>
<Link id="l06437" /><CodeLine lineNumber="6437"><span class="doxyHighlight">        uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l06438" /><CodeLine lineNumber="6438"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/align">Align</a> ArgAlign = <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize);</span></CodeLine>
<Link id="l06439" /><CodeLine lineNumber="6439"><span class="doxyHighlight">        VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, ArgAlign);</span></CodeLine>
<Link id="l06440" /><CodeLine lineNumber="6440"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isBigEndian()) &#123;</span></CodeLine>
<Link id="l06441" /><CodeLine lineNumber="6441"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Adjusting the shadow for argument with size &lt; IntptrSize to match</span></CodeLine>
<Link id="l06442" /><CodeLine lineNumber="6442"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// the placement of bits in big endian system</span></CodeLine>
<Link id="l06443" /><CodeLine lineNumber="6443"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgSize &lt; IntptrSize)</span></CodeLine>
<Link id="l06444" /><CodeLine lineNumber="6444"><span class="doxyHighlight">            VAArgOffset += (IntptrSize - ArgSize);</span></CodeLine>
<Link id="l06445" /><CodeLine lineNumber="6445"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06446" /><CodeLine lineNumber="6446"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFixed) &#123;</span></CodeLine>
<Link id="l06447" /><CodeLine lineNumber="6447"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VAArgOffset, ArgSize);</span></CodeLine>
<Link id="l06448" /><CodeLine lineNumber="6448"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</span></CodeLine>
<Link id="l06449" /><CodeLine lineNumber="6449"><span class="doxyHighlight">            IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06450" /><CodeLine lineNumber="6450"><span class="doxyHighlight">          VAArgOffset += ArgSize;</span></CodeLine>
<Link id="l06451" /><CodeLine lineNumber="6451"><span class="doxyHighlight">          VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize));</span></CodeLine>
<Link id="l06452" /><CodeLine lineNumber="6452"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l06453" /><CodeLine lineNumber="6453"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06454" /><CodeLine lineNumber="6454"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06455" /><CodeLine lineNumber="6455"></CodeLine>
<Link id="l06456" /><CodeLine lineNumber="6456"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;TotalVAArgSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, VAArgOffset);</span></CodeLine>
<Link id="l06457" /><CodeLine lineNumber="6457"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Here using VAArgOverflowSizeTLS as VAArgSizeTLS to avoid creation of</span></CodeLine>
<Link id="l06458" /><CodeLine lineNumber="6458"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a new class member i.e. it is the total size of all VarArgs.</span></CodeLine>
<Link id="l06459" /><CodeLine lineNumber="6459"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(TotalVAArgSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06460" /><CodeLine lineNumber="6460"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06461" /><CodeLine lineNumber="6461"></CodeLine>
<Link id="l06462" /><CodeLine lineNumber="6462" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a5442ec4868113ee36c2380a1b919e103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a5442ec4868113ee36c2380a1b919e103">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06463" /><CodeLine lineNumber="6463"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a40af0015ad73c24bf64e3d67ed002c37">VAArgSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l06464" /><CodeLine lineNumber="6464"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06465" /><CodeLine lineNumber="6465"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l06466" /><CodeLine lineNumber="6466"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a40af0015ad73c24bf64e3d67ed002c37">VAArgSize</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06467" /><CodeLine lineNumber="6467"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a40af0015ad73c24bf64e3d67ed002c37">VAArgSize</a>;</span></CodeLine>
<Link id="l06468" /><CodeLine lineNumber="6468"></CodeLine>
<Link id="l06469" /><CodeLine lineNumber="6469"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l06470" /><CodeLine lineNumber="6470"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l06471" /><CodeLine lineNumber="6471"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l06472" /><CodeLine lineNumber="6472"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l06473" /><CodeLine lineNumber="6473"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06474" /><CodeLine lineNumber="6474"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l06475" /><CodeLine lineNumber="6475"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06476" /><CodeLine lineNumber="6476"></CodeLine>
<Link id="l06477" /><CodeLine lineNumber="6477"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l06478" /><CodeLine lineNumber="6478"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l06479" /><CodeLine lineNumber="6479"><span class="doxyHighlight">          ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l06480" /><CodeLine lineNumber="6480"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l06481" /><CodeLine lineNumber="6481"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l06482" /><CodeLine lineNumber="6482"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06483" /><CodeLine lineNumber="6483"></CodeLine>
<Link id="l06484" /><CodeLine lineNumber="6484"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start.</span></CodeLine>
<Link id="l06485" /><CodeLine lineNumber="6485"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Copy va&#95;list shadow from the backup copy of the TLS contents.</span></CodeLine>
<Link id="l06486" /><CodeLine lineNumber="6486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l06487" /><CodeLine lineNumber="6487"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l06488" /><CodeLine lineNumber="6488"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l06489" /><CodeLine lineNumber="6489"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;RegSaveAreaPtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C);</span></CodeLine>
<Link id="l06490" /><CodeLine lineNumber="6490"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtrPtr =</span></CodeLine>
<Link id="l06491" /><CodeLine lineNumber="6491"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l06492" /><CodeLine lineNumber="6492"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/pointertype/#a8d7f800be5fd53dcfcdcbdc6fd9ccfe3">PointerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C, 0));</span></CodeLine>
<Link id="l06493" /><CodeLine lineNumber="6493"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtr =</span></CodeLine>
<Link id="l06494" /><CodeLine lineNumber="6494"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(RegSaveAreaPtrTy, RegSaveAreaPtrPtr);</span></CodeLine>
<Link id="l06495" /><CodeLine lineNumber="6495"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaShadowPtr, &#42;RegSaveAreaOriginPtr;</span></CodeLine>
<Link id="l06496" /><CodeLine lineNumber="6496"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06497" /><CodeLine lineNumber="6497"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06498" /><CodeLine lineNumber="6498"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize);</span></CodeLine>
<Link id="l06499" /><CodeLine lineNumber="6499"><span class="doxyHighlight">      std::tie(RegSaveAreaShadowPtr, RegSaveAreaOriginPtr) =</span></CodeLine>
<Link id="l06500" /><CodeLine lineNumber="6500"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(RegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06501" /><CodeLine lineNumber="6501"><span class="doxyHighlight">                                 Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06502" /><CodeLine lineNumber="6502"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaShadowPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargi386helper/#a2e54f739b92523fd16c14b0515e44abf">VAArgTLSCopy</a>, Alignment,</span></CodeLine>
<Link id="l06503" /><CodeLine lineNumber="6503"><span class="doxyHighlight">                       CopySize);</span></CodeLine>
<Link id="l06504" /><CodeLine lineNumber="6504"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06505" /><CodeLine lineNumber="6505"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06506" /><CodeLine lineNumber="6506"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l06507" /><CodeLine lineNumber="6507"></CodeLine>
<Link id="l06508" /><CodeLine lineNumber="6508"><span class="doxyHighlightComment">/// Implementation of VarArgHelper that is used for ARM32, MIPS, RISCV,</span></CodeLine>
<Link id="l06509" /><CodeLine lineNumber="6509"><span class="doxyHighlightComment">/// LoongArch64.</span></CodeLine>
<Link id="l06510" /><CodeLine lineNumber="6510" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a2039ea39ca260803ed752025bd86a23c">VarArgGenericHelper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a> &#123;</span></CodeLine>
<Link id="l06511" /><CodeLine lineNumber="6511" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06512" /><CodeLine lineNumber="6512" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a0913e5ddfb6609fa414815dc3c0eaa5a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a0913e5ddfb6609fa414815dc3c0eaa5a">VAArgSize</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06513" /><CodeLine lineNumber="6513"></CodeLine>
<Link id="l06514" /><CodeLine lineNumber="6514" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a2039ea39ca260803ed752025bd86a23c"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a2039ea39ca260803ed752025bd86a23c">VarArgGenericHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>,</span></CodeLine>
<Link id="l06515" /><CodeLine lineNumber="6515"><span class="doxyHighlight">                      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>)</span></CodeLine>
<Link id="l06516" /><CodeLine lineNumber="6516"><span class="doxyHighlight">      : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a45091e4338a16315424df2082d8e9275">VarArgHelperBase</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c961dcb5984bc8d8d405a142f67ea7">VAListTagSize</a>) &#123;&#125;</span></CodeLine>
<Link id="l06517" /><CodeLine lineNumber="6517"></CodeLine>
<Link id="l06518" /><CodeLine lineNumber="6518" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#ab229cd82fd788028a0ff3a1f1957e7f9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#ab229cd82fd788028a0ff3a1f1957e7f9">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06519" /><CodeLine lineNumber="6519"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VAArgOffset = 0;</span></CodeLine>
<Link id="l06520" /><CodeLine lineNumber="6520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06521" /><CodeLine lineNumber="6521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06522" /><CodeLine lineNumber="6522"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;ArgNo, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93; : <a href="/docs/api/namespaces/llvm/#a206e2134ddd2312c3488d0632d98f554">llvm::enumerate</a>(CB.<a href="/docs/api/classes/llvm/callbase/#ad027ea8803d83ee19b9a2e13aec6d655">args</a>())) &#123;</span></CodeLine>
<Link id="l06523" /><CodeLine lineNumber="6523"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFixed = ArgNo &lt; CB.<a href="/docs/api/classes/llvm/callbase/#ac3c35bd078a268a207f607d0f57dadba">getFunctionType</a>()-&gt;<a href="/docs/api/classes/llvm/functiontype/#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</span></CodeLine>
<Link id="l06524" /><CodeLine lineNumber="6524"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFixed)</span></CodeLine>
<Link id="l06525" /><CodeLine lineNumber="6525"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06526" /><CodeLine lineNumber="6526"><span class="doxyHighlight">      uint64&#95;t ArgSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType());</span></CodeLine>
<Link id="l06527" /><CodeLine lineNumber="6527"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isBigEndian()) &#123;</span></CodeLine>
<Link id="l06528" /><CodeLine lineNumber="6528"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjusting the shadow for argument with size &lt; IntptrSize to match the</span></CodeLine>
<Link id="l06529" /><CodeLine lineNumber="6529"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// placement of bits in big endian system</span></CodeLine>
<Link id="l06530" /><CodeLine lineNumber="6530"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgSize &lt; IntptrSize)</span></CodeLine>
<Link id="l06531" /><CodeLine lineNumber="6531"><span class="doxyHighlight">          VAArgOffset += (IntptrSize - ArgSize);</span></CodeLine>
<Link id="l06532" /><CodeLine lineNumber="6532"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06533" /><CodeLine lineNumber="6533"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#af8b287b4aad36e62604d98184648bc7e">getShadowPtrForVAArgument</a>(IRB, VAArgOffset, ArgSize);</span></CodeLine>
<Link id="l06534" /><CodeLine lineNumber="6534"><span class="doxyHighlight">      VAArgOffset += ArgSize;</span></CodeLine>
<Link id="l06535" /><CodeLine lineNumber="6535"><span class="doxyHighlight">      VAArgOffset = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(VAArgOffset, IntptrSize);</span></CodeLine>
<Link id="l06536" /><CodeLine lineNumber="6536"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</span></CodeLine>
<Link id="l06537" /><CodeLine lineNumber="6537"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06538" /><CodeLine lineNumber="6538"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadow(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>), <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06539" /><CodeLine lineNumber="6539"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06540" /><CodeLine lineNumber="6540"></CodeLine>
<Link id="l06541" /><CodeLine lineNumber="6541"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;TotalVAArgSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy, VAArgOffset);</span></CodeLine>
<Link id="l06542" /><CodeLine lineNumber="6542"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Here using VAArgOverflowSizeTLS as VAArgSizeTLS to avoid creation of</span></CodeLine>
<Link id="l06543" /><CodeLine lineNumber="6543"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// a new class member i.e. it is the total size of all VarArgs.</span></CodeLine>
<Link id="l06544" /><CodeLine lineNumber="6544"><span class="doxyHighlight">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(TotalVAArgSize, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06545" /><CodeLine lineNumber="6545"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06546" /><CodeLine lineNumber="6546"></CodeLine>
<Link id="l06547" /><CodeLine lineNumber="6547" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3d0c6a7511c4672829252c0ce65c58c3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3d0c6a7511c4672829252c0ce65c58c3">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06548" /><CodeLine lineNumber="6548"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a0913e5ddfb6609fa414815dc3c0eaa5a">VAArgSize</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a> &amp;&amp;</span></CodeLine>
<Link id="l06549" /><CodeLine lineNumber="6549"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;finalizeInstrumentation called twice&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06550" /><CodeLine lineNumber="6550"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.FnPrologueEnd);</span></CodeLine>
<Link id="l06551" /><CodeLine lineNumber="6551"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a0913e5ddfb6609fa414815dc3c0eaa5a">VAArgSize</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgOverflowSizeTLS);</span></CodeLine>
<Link id="l06552" /><CodeLine lineNumber="6552"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;CopySize = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a0913e5ddfb6609fa414815dc3c0eaa5a">VAArgSize</a>;</span></CodeLine>
<Link id="l06553" /><CodeLine lineNumber="6553"></CodeLine>
<Link id="l06554" /><CodeLine lineNumber="6554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>.empty()) &#123;</span></CodeLine>
<Link id="l06555" /><CodeLine lineNumber="6555"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If there is a va&#95;start in this function, make a backup copy of</span></CodeLine>
<Link id="l06556" /><CodeLine lineNumber="6556"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// va&#95;arg&#95;tls somewhere in the function entry block.</span></CodeLine>
<Link id="l06557" /><CodeLine lineNumber="6557"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/type/#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C), CopySize);</span></CodeLine>
<Link id="l06558" /><CodeLine lineNumber="6558"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a>-&gt;setAlignment(<a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>);</span></CodeLine>
<Link id="l06559" /><CodeLine lineNumber="6559"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4910aab8d7c5528c1a3ac747856c3186">CreateMemSet</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a>, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</span></CodeLine>
<Link id="l06560" /><CodeLine lineNumber="6560"><span class="doxyHighlight">                       CopySize, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06561" /><CodeLine lineNumber="6561"></CodeLine>
<Link id="l06562" /><CodeLine lineNumber="6562"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;SrcSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a7e0a0c76340ba1fc52863f538f3e703d">CreateBinaryIntrinsic</a>(</span></CodeLine>
<Link id="l06563" /><CodeLine lineNumber="6563"><span class="doxyHighlight">          Intrinsic::umin, CopySize,</span></CodeLine>
<Link id="l06564" /><CodeLine lineNumber="6564"><span class="doxyHighlight">          ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), <a href="#adce9aed4162f58fbab5da93984822c3a">kParamTLSSize</a>));</span></CodeLine>
<Link id="l06565" /><CodeLine lineNumber="6565"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a>, <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.VAArgTLS,</span></CodeLine>
<Link id="l06566" /><CodeLine lineNumber="6566"><span class="doxyHighlight">                       <a href="#a58600da67d1e0fa57a2a70cd3be51d6e">kShadowTLSAlignment</a>, SrcSize);</span></CodeLine>
<Link id="l06567" /><CodeLine lineNumber="6567"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06568" /><CodeLine lineNumber="6568"></CodeLine>
<Link id="l06569" /><CodeLine lineNumber="6569"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instrument va&#95;start.</span></CodeLine>
<Link id="l06570" /><CodeLine lineNumber="6570"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Copy va&#95;list shadow from the backup copy of the TLS contents.</span></CodeLine>
<Link id="l06571" /><CodeLine lineNumber="6571"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;OrigInst : <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a72c6c644a0fd7b5f440affe2512f8213">VAStartInstrumentationList</a>) &#123;</span></CodeLine>
<Link id="l06572" /><CodeLine lineNumber="6572"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/nextnodeirbuilder">NextNodeIRBuilder</a> IRB(OrigInst);</span></CodeLine>
<Link id="l06573" /><CodeLine lineNumber="6573"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;VAListTag = OrigInst-&gt;getArgOperand(0);</span></CodeLine>
<Link id="l06574" /><CodeLine lineNumber="6574"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;RegSaveAreaPtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C);</span></CodeLine>
<Link id="l06575" /><CodeLine lineNumber="6575"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtrPtr =</span></CodeLine>
<Link id="l06576" /><CodeLine lineNumber="6576"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(VAListTag, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy),</span></CodeLine>
<Link id="l06577" /><CodeLine lineNumber="6577"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/pointertype/#a8d7f800be5fd53dcfcdcbdc6fd9ccfe3">PointerType::get</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.C, 0));</span></CodeLine>
<Link id="l06578" /><CodeLine lineNumber="6578"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaPtr =</span></CodeLine>
<Link id="l06579" /><CodeLine lineNumber="6579"><span class="doxyHighlight">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(RegSaveAreaPtrTy, RegSaveAreaPtrPtr);</span></CodeLine>
<Link id="l06580" /><CodeLine lineNumber="6580"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;RegSaveAreaShadowPtr, &#42;RegSaveAreaOriginPtr;</span></CodeLine>
<Link id="l06581" /><CodeLine lineNumber="6581"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#ac623eb128c5461605b2eade89195434a">F</a>.getDataLayout();</span></CodeLine>
<Link id="l06582" /><CodeLine lineNumber="6582"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IntptrSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(<a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#afe3dd307fd5cf1bb35263184495a00f4">MS</a>.IntptrTy);</span></CodeLine>
<Link id="l06583" /><CodeLine lineNumber="6583"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(IntptrSize);</span></CodeLine>
<Link id="l06584" /><CodeLine lineNumber="6584"><span class="doxyHighlight">      std::tie(RegSaveAreaShadowPtr, RegSaveAreaOriginPtr) =</span></CodeLine>
<Link id="l06585" /><CodeLine lineNumber="6585"><span class="doxyHighlight">          <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelperbase/#a3ca4068a52ed23406c810243aea0daa8">MSV</a>.getShadowOriginPtr(RegSaveAreaPtr, IRB, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</span></CodeLine>
<Link id="l06586" /><CodeLine lineNumber="6586"><span class="doxyHighlight">                                 Alignment, </span><span class="doxyHighlightComment">/&#42;isStore&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06587" /><CodeLine lineNumber="6587"><span class="doxyHighlight">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(RegSaveAreaShadowPtr, Alignment, <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper/#a3becd57421d80f03e0e727143eefb645">VAArgTLSCopy</a>, Alignment,</span></CodeLine>
<Link id="l06588" /><CodeLine lineNumber="6588"><span class="doxyHighlight">                       CopySize);</span></CodeLine>
<Link id="l06589" /><CodeLine lineNumber="6589"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06590" /><CodeLine lineNumber="6590"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06591" /><CodeLine lineNumber="6591"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l06592" /><CodeLine lineNumber="6592"></CodeLine>
<Link id="l06593" /><CodeLine lineNumber="6593"><span class="doxyHighlightComment">// ARM32, Loongarch64, MIPS and RISCV share the same calling conventions</span></CodeLine>
<Link id="l06594" /><CodeLine lineNumber="6594"><span class="doxyHighlightComment">// regarding VAArgs.</span></CodeLine>
<Link id="l06595" /><CodeLine lineNumber="6595" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a34ab80bd6f3d203ea780a8a137ad66f0"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a34ab80bd6f3d203ea780a8a137ad66f0">VarArgARM32Helper</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper">VarArgGenericHelper</a>;</span></CodeLine>
<Link id="l06596" /><CodeLine lineNumber="6596" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a1729ecfd2b3d6fafb7d12edbddf5d739"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a1729ecfd2b3d6fafb7d12edbddf5d739">VarArgRISCVHelper</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper">VarArgGenericHelper</a>;</span></CodeLine>
<Link id="l06597" /><CodeLine lineNumber="6597" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#af8adcc6d6a0dff58fe875b94c18f707a"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#af8adcc6d6a0dff58fe875b94c18f707a">VarArgMIPSHelper</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper">VarArgGenericHelper</a>;</span></CodeLine>
<Link id="l06598" /><CodeLine lineNumber="6598" lineLink="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a3890cf4859f04767fb61058c6cbe3615"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/namespaces/anonymous-memorysanitizer-cpp-/#a3890cf4859f04767fb61058c6cbe3615">VarArgLoongArch64Helper</a> = <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararggenerichelper">VarArgGenericHelper</a>;</span></CodeLine>
<Link id="l06599" /><CodeLine lineNumber="6599"></CodeLine>
<Link id="l06600" /><CodeLine lineNumber="6600"><span class="doxyHighlightComment">/// A no-op implementation of VarArgHelper.</span></CodeLine>
<Link id="l06601" /><CodeLine lineNumber="6601" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#a0371e0a181f77d443e03ed76e39382ef">VarArgNoOpHelper</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/vararghelper">VarArgHelper</a> &#123;</span></CodeLine>
<Link id="l06602" /><CodeLine lineNumber="6602" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#a0371e0a181f77d443e03ed76e39382ef"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#a0371e0a181f77d443e03ed76e39382ef">VarArgNoOpHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer">MemorySanitizer</a> &amp;MS,</span></CodeLine>
<Link id="l06603" /><CodeLine lineNumber="6603"><span class="doxyHighlight">                   <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/memorysanitizervisitor">MemorySanitizerVisitor</a> &amp;MSV) &#123;&#125;</span></CodeLine>
<Link id="l06604" /><CodeLine lineNumber="6604"></CodeLine>
<Link id="l06605" /><CodeLine lineNumber="6605" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#ad0b77c8cbe1f734ea9bb625d1b2155c0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#ad0b77c8cbe1f734ea9bb625d1b2155c0">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;&#125;</span></CodeLine>
<Link id="l06606" /><CodeLine lineNumber="6606"></CodeLine>
<Link id="l06607" /><CodeLine lineNumber="6607" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#a61adb355d04474a1f11fc56e57f75a8c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#a61adb355d04474a1f11fc56e57f75a8c">visitVAStartInst</a>(<a href="/docs/api/classes/llvm/vastartinst">VAStartInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;&#125;</span></CodeLine>
<Link id="l06608" /><CodeLine lineNumber="6608"></CodeLine>
<Link id="l06609" /><CodeLine lineNumber="6609" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#abee8521a4775e61cde6c4c8db3fa80ae"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#abee8521a4775e61cde6c4c8db3fa80ae">visitVACopyInst</a>(<a href="/docs/api/classes/llvm/vacopyinst">VACopyInst</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;&#125;</span></CodeLine>
<Link id="l06610" /><CodeLine lineNumber="6610"></CodeLine>
<Link id="l06611" /><CodeLine lineNumber="6611" lineLink="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#ac92239884e66638ebc269179d721c374"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-memorysanitizer-cpp-/varargnoophelper/#ac92239884e66638ebc269179d721c374">finalizeInstrumentation</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;&#125;</span></CodeLine>
<Link id="l06612" /><CodeLine lineNumber="6612"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l06613" /><CodeLine lineNumber="6613"></CodeLine>
<Link id="l06614" /><CodeLine lineNumber="6614"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l06615" /><CodeLine lineNumber="6615"></CodeLine>
<Link id="l06616" /><CodeLine lineNumber="6616" lineLink="#abb08ae2f213bc5b87540413de9b095a2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> VarArgHelper &#42;<a href="#abb08ae2f213bc5b87540413de9b095a2">CreateVarArgHelper</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Func, MemorySanitizer &amp;Msan,</span></CodeLine>
<Link id="l06617" /><CodeLine lineNumber="6617"><span class="doxyHighlight">                                        MemorySanitizerVisitor &amp;Visitor) &#123;</span></CodeLine>
<Link id="l06618" /><CodeLine lineNumber="6618"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// VarArg handling is only implemented on AMD64. False positives are possible</span></CodeLine>
<Link id="l06619" /><CodeLine lineNumber="6619"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// on other platforms.</span></CodeLine>
<Link id="l06620" /><CodeLine lineNumber="6620"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple(Func.getParent()-&gt;getTargetTriple());</span></CodeLine>
<Link id="l06621" /><CodeLine lineNumber="6621"></CodeLine>
<Link id="l06622" /><CodeLine lineNumber="6622"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648">Triple::x86</a>)</span></CodeLine>
<Link id="l06623" /><CodeLine lineNumber="6623"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgI386Helper(Func, Msan, Visitor);</span></CodeLine>
<Link id="l06624" /><CodeLine lineNumber="6624"></CodeLine>
<Link id="l06625" /><CodeLine lineNumber="6625"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>)</span></CodeLine>
<Link id="l06626" /><CodeLine lineNumber="6626"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgAMD64Helper(Func, Msan, Visitor);</span></CodeLine>
<Link id="l06627" /><CodeLine lineNumber="6627"></CodeLine>
<Link id="l06628" /><CodeLine lineNumber="6628"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a846115743c5cbbf80216168ad22f906c">isARM</a>())</span></CodeLine>
<Link id="l06629" /><CodeLine lineNumber="6629"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgARM32Helper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">4);</span></CodeLine>
<Link id="l06630" /><CodeLine lineNumber="6630"></CodeLine>
<Link id="l06631" /><CodeLine lineNumber="6631"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ad953e410aea43848740978d9a6529a82">isAArch64</a>())</span></CodeLine>
<Link id="l06632" /><CodeLine lineNumber="6632"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgAArch64Helper(Func, Msan, Visitor);</span></CodeLine>
<Link id="l06633" /><CodeLine lineNumber="6633"></CodeLine>
<Link id="l06634" /><CodeLine lineNumber="6634"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ade08dbf7a3d70b46b55c4257b3a536de">isSystemZ</a>())</span></CodeLine>
<Link id="l06635" /><CodeLine lineNumber="6635"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgSystemZHelper(Func, Msan, Visitor);</span></CodeLine>
<Link id="l06636" /><CodeLine lineNumber="6636"></CodeLine>
<Link id="l06637" /><CodeLine lineNumber="6637"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// On PowerPC32 VAListTag is a struct</span></CodeLine>
<Link id="l06638" /><CodeLine lineNumber="6638"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#123;char, char, i16 padding, char &#42;, char &#42;&#125;</span></CodeLine>
<Link id="l06639" /><CodeLine lineNumber="6639"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fbc3fe5e4f1e0f9515cfac36293b1c8">isPPC32</a>())</span></CodeLine>
<Link id="l06640" /><CodeLine lineNumber="6640"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgPowerPCHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">12);</span></CodeLine>
<Link id="l06641" /><CodeLine lineNumber="6641"></CodeLine>
<Link id="l06642" /><CodeLine lineNumber="6642"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ab61d338cbe7892ab484e97c9b0c8c8c9">isPPC64</a>())</span></CodeLine>
<Link id="l06643" /><CodeLine lineNumber="6643"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgPowerPCHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">8);</span></CodeLine>
<Link id="l06644" /><CodeLine lineNumber="6644"></CodeLine>
<Link id="l06645" /><CodeLine lineNumber="6645"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a578c0e35b3e3ed8c73e610a0882a9d6a">isRISCV32</a>())</span></CodeLine>
<Link id="l06646" /><CodeLine lineNumber="6646"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgRISCVHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">4);</span></CodeLine>
<Link id="l06647" /><CodeLine lineNumber="6647"></CodeLine>
<Link id="l06648" /><CodeLine lineNumber="6648"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a64b2600935100a4be30d8a364609e427">isRISCV64</a>())</span></CodeLine>
<Link id="l06649" /><CodeLine lineNumber="6649"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgRISCVHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">8);</span></CodeLine>
<Link id="l06650" /><CodeLine lineNumber="6650"></CodeLine>
<Link id="l06651" /><CodeLine lineNumber="6651"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a73717ef7418a714f20be268c55a2c19e">isMIPS32</a>())</span></CodeLine>
<Link id="l06652" /><CodeLine lineNumber="6652"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgMIPSHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">4);</span></CodeLine>
<Link id="l06653" /><CodeLine lineNumber="6653"></CodeLine>
<Link id="l06654" /><CodeLine lineNumber="6654"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a52f9355613c6f3388d5761349926d835">isMIPS64</a>())</span></CodeLine>
<Link id="l06655" /><CodeLine lineNumber="6655"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgMIPSHelper(Func, Msan, Visitor, </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">8);</span></CodeLine>
<Link id="l06656" /><CodeLine lineNumber="6656"></CodeLine>
<Link id="l06657" /><CodeLine lineNumber="6657"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#a66a1a1858e17b6bcfcbbb1d5229d275e">isLoongArch64</a>())</span></CodeLine>
<Link id="l06658" /><CodeLine lineNumber="6658"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgLoongArch64Helper(Func, Msan, Visitor,</span></CodeLine>
<Link id="l06659" /><CodeLine lineNumber="6659"><span class="doxyHighlight">                                       </span><span class="doxyHighlightComment">/&#42;VAListTagSize=&#42;/</span><span class="doxyHighlight">8);</span></CodeLine>
<Link id="l06660" /><CodeLine lineNumber="6660"></CodeLine>
<Link id="l06661" /><CodeLine lineNumber="6661"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> VarArgNoOpHelper(Func, Msan, Visitor);</span></CodeLine>
<Link id="l06662" /><CodeLine lineNumber="6662"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06663" /><CodeLine lineNumber="6663"></CodeLine>
<Link id="l06664" /><CodeLine lineNumber="6664" lineLink="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a8f3326f18ad478d2c532271394839225"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a8f3326f18ad478d2c532271394839225">MemorySanitizer::sanitizeFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI) &#123;</span></CodeLine>
<Link id="l06665" /><CodeLine lineNumber="6665"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CompileKernel &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() == <a href="#af88c19b19f09a99cbec7a026ea8fb68d">kMsanModuleCtorName</a>)</span></CodeLine>
<Link id="l06666" /><CodeLine lineNumber="6666"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06667" /><CodeLine lineNumber="6667"></CodeLine>
<Link id="l06668" /><CodeLine lineNumber="6668"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::DisableSanitizerInstrumentation))</span></CodeLine>
<Link id="l06669" /><CodeLine lineNumber="6669"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06670" /><CodeLine lineNumber="6670"></CodeLine>
<Link id="l06671" /><CodeLine lineNumber="6671"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-memorysanitizer-cpp-/memorysanitizer/#a52c57b355cc75c152e1e306872f293b8">MemorySanitizerVisitor</a> Visitor(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, TLI);</span></CodeLine>
<Link id="l06672" /><CodeLine lineNumber="6672"></CodeLine>
<Link id="l06673" /><CodeLine lineNumber="6673"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Clear out memory attributes.</span></CodeLine>
<Link id="l06674" /><CodeLine lineNumber="6674"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/attributemask">AttributeMask</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>;</span></CodeLine>
<Link id="l06675" /><CodeLine lineNumber="6675"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.addAttribute(Attribute::Memory).addAttribute(Attribute::Speculatable);</span></CodeLine>
<Link id="l06676" /><CodeLine lineNumber="6676"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.removeFnAttrs(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06677" /><CodeLine lineNumber="6677"></CodeLine>
<Link id="l06678" /><CodeLine lineNumber="6678"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Visitor.runOnFunction();</span></CodeLine>
<Link id="l06679" /><CodeLine lineNumber="6679"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
