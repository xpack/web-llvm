---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AssignmentTrackingAnalysis.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/AssignmentTrackingAnalysis.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/assignmenttrackinganalysis-h"
  isLocal="true" />
<IncludesListItem
  filePath="LiveDebugValues/LiveDebugValues.h"
  permalink="/docs/api/files/lib/lib/codegen/lib/codegen/livedebugvalues/livedebugvalues-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/BitVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMapInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemapinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/IntervalMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/intervalmap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/PostOrderIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/postorderiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/STLExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Statistic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/UniqueVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/uniquevector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/BinaryFormat/Dwarf.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/binaryformat/dwarf-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/BasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DataLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugProgramInstruction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debugprograminstruction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Function.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/function-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instruction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicInst.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Module.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/module-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/PassManager.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/passmanager-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/PrintPasses.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/printpasses-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/InitializePasses.h"
  permalink="/docs/api/files/include/include/llvm/initializepasses-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/BasicBlockUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="assert.h"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="optional"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="queue"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="sstream"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="unordered_map"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/std">std</a></>}>
Implement std::hash so that hash&#95;code can be used in STL containers. <a href="/docs/api/namespaces/std/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-assignmenttrackinganalysis-cpp-">anonymous&#123;AssignmentTrackingAnalysis.cpp&#125;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88">DenseMapInfo&lt;VariableID&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc">hash&lt;VarLocInsertPt&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a></>}>
Helper class to build <a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a>, since that class isn&#39;t easy to modify. <a href="/docs/api/classes/functionvarlocsbuilder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill">MemLocFragmentFill</a></>}>
In dwarf emission, the following sequence. <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/fragmemloc">FragMemLoc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering">AssignmentTrackingLowering</a></>}>
<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering">AssignmentTrackingLowering</a> encapsulates a dataflow analysis over a function that interprets assignment tracking debug info metadata and stores in IR to create a map of variable locations. <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment">Assignment</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/blockinfo">BlockInfo</a></>}>
Represents the stack and debug assignments in a block. <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/blockinfo/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> = std::pair&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dilocalvariable">DILocalVariable</a> &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42; &gt;</>}>
A whole (unfragmented) source variable. <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="using"
  name={<><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> = <a href="/docs/api/classes/llvm/pointerunion">PointerUnion</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dbgrecord">DbgRecord</a> &#42; &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a> (Function &amp;Fn, const DataLayout &amp;Layout, FunctionVarLocsBuilder &#42;FnVarLocs)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c">AssignmentTrackingLowering::OverlapMap</a></>}
  name={<><a href="#a4ad92667dcad9ad33a52a2e1c505a03a">buildOverlapMapAndRecordDeclares</a> (Function &amp;Fn, FunctionVarLocsBuilder &#42;FnVarLocs, const DenseSet&lt; DebugAggregate &gt; &amp;VarsWithStackSlot, AssignmentTrackingLowering::UntaggedStoreAssignmentMap &amp;UntaggedStoreVars, unsigned &amp;TrackedVariablesVectorSize)</>}>
Build a map of &#123;Variable x: Variables y&#125; where all variable fragments contained within the variable fragment x are in set y. <a href="#a4ad92667dcad9ad33a52a2e1c505a03a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;</>}
  name={<><a href="#ab89ede590f1a89ea1b5b9cfd422d7c86">CastToDbgAssign</a> (DbgVariableIntrinsic &#42;DVI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;</>}
  name={<><a href="#a9c1515a9c974d17a89cbc1443a9b419c">CastToDbgAssign</a> (DbgVariableRecord &#42;DVR)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dbgdeclareinst">DbgDeclareInst</a> &#42;</>}
  name={<><a href="#afc77f1c086d1b0a5305e033551c42ad2">DynCastToDbgDeclare</a> (DbgVariableIntrinsic &#42;DVI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;</>}
  name={<><a href="#a28e2e1ff2e4f02b18b4fdfc7d6c83ba5">DynCastToDbgDeclare</a> (DbgVariableRecord &#42;DVR)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> &gt;</>}
  name={<><a href="#a15c139830d442796a30fbd35e8bfa270">findVarsWithStackSlot</a> (Function &amp;Fn)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a42ed349a287ad53473602bc805a2fe78">fullyContains</a> (DIExpression::FragmentInfo A, DIExpression::FragmentInfo B)</>}>
Return true if A fully contains B. <a href="#a42ed349a287ad53473602bc805a2fe78">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a></>}
  name={<><a href="#a4514f516df040b468e552a28163b3747">getAggregate</a> (const DbgVariableIntrinsic &#42;DII)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a></>}
  name={<><a href="#aa891f18ca7f9e534d145c8ff7dfd6b69">getAggregate</a> (const DebugVariable &amp;Var)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; int64&#95;t &gt;</>}
  name={<><a href="#ad86cc3ddbd30cefe005d825b5587321f">getDerefOffsetInBytes</a> (const DIExpression &#42;DIExpr)</>}>
Extract the offset used in <code>DIExpr</code>. <a href="#ad86cc3ddbd30cefe005d825b5587321f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;</>}
  name={<><a href="#aada8fc5b8fc7766182eb823dcccdde6d">getIDFromInst</a> (const Instruction &amp;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;</>}
  name={<><a href="#a11c9d7e0af5de60f1e578c8d6a062eec">getIDFromMarker</a> (const DbgAssignIntrinsic &amp;DAI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;</>}
  name={<><a href="#a9dd6ae445190ac28162bea663717bf1a">getIDFromMarker</a> (const DbgVariableRecord &amp;DVR)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a></>}
  name={<><a href="#a05eb84c8f630be406f61761013146574">getNextNode</a> (const DbgRecord &#42;DVR)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a></>}
  name={<><a href="#a9c681660f7ed1f72a0a5ff822d4f5e8e">getNextNode</a> (const Instruction &#42;Inst)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a></>}
  name={<><a href="#a654cf90977e8e77e4b62672ea3936dcf">getNextNode</a> (VarLocInsertPt InsertPt)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; <a href="/docs/api/structs/llvm/at/assignmentinfo">at::AssignmentInfo</a> &gt;</>}
  name={<><a href="#a4613ca285a8a0e95d35816a83b302a91">getUntaggedStoreAssignmentInfo</a> (const Instruction &amp;I, const DataLayout &amp;Layout)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename T&gt;</>}
  type="bool"
  name={<><a href="#ad9b5e7d6058b3fa078f6cb70d02ba97c">hasZeroSizedFragment</a> (T &amp;DbgValue)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char &#42;</>}
  name={<><a href="#a617b13d89c1cb11a9270727255284b53">locStr</a> (AssignmentTrackingLowering::LocKind Loc)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a> (const BasicBlock &#42;BB, FunctionVarLocsBuilder &amp;FnVarLocs)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a> (const BasicBlock &#42;BB, FunctionVarLocsBuilder &amp;FnVarLocs)</>}>
Remove redundant definitions within sequences of consecutive location defs. <a href="#ad959466c7f8b886a2caa4967c46d48db">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a> (const BasicBlock &#42;BB, FunctionVarLocsBuilder &amp;FnVarLocs)</>}>
Remove redundant location defs using a forward scan. <a href="#a72b4d4469e68630addc74e567526f261">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a> (const BasicBlock &#42;BB, FunctionVarLocsBuilder &amp;FnVarLocs)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#af3746cf6b2af89e946e303ef4e7a486c">shouldCoalesceFragments</a> (Function &amp;F)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a3117b347b20933dc616892beb55a11d5">STATISTIC</a> (NumDefsScanned, &quot;Number of dbg locs that get scanned for removal&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a43a56a6109815c92b6c940fc42e92965">STATISTIC</a> (NumDefsRemoved, &quot;Number of dbg locs removed&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a708a533ca38614c75b7cc1213490adda">STATISTIC</a> (NumWedgesScanned, &quot;Number of dbg wedges scanned&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a4949a18b3a858d46df5c752be75d41f3">STATISTIC</a> (NumWedgesChanged, &quot;Number of dbg wedges changed&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42; &gt;</>}
  name={<><a href="#a0b1eb53b30ddeb8ebdccc60c0837300f">walkToAllocaAndPrependOffsetDeref</a> (const DataLayout &amp;DL, Value &#42;Start, DIExpression &#42;Expression)</>}>
Walk backwards along constant GEPs and bitcasts to the base storage from <code>Start</code> as far as possible. <a href="#a0b1eb53b30ddeb8ebdccc60c0837300f">More...</a>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/cl/#a9241f2e42b7587b123c885d7a659ad44">cl::boolOrDefault</a> &gt;</>}
  name={<><a href="#adfb6d798a8320f396d793ab5113a58f0">CoalesceAdjacentFragmentsOpt</a></>}>
Coalesce adjacent dbg locs describing memory locations that have contiguous fragments. <a href="#adfb6d798a8320f396d793ab5113a58f0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a7fb0ad1b0bad44cddf92cb112aa9eb65">EnableMemLocFragFill</a></>}>
Option for debugging the pass, determines if the memory location fragment filling happens after generating the variable locations. <a href="#a7fb0ad1b0bad44cddf92cb112aa9eb65">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#af0952d00328de72e269c7f157a015e1c">MaxNumBlocks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a58f2996cd5265a713a5dd08c078c3f0b">PrintResults</a></>}>
Print the results of the analysis. Respects -filter-print-funcs. <a href="#a58f2996cd5265a713a5dd08c078c3f0b">More...</a>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;debug-ata&quot;</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Typedefs

### DebugAggregate {#a05c5b2328f38cb1affebb8ad4ab6fe40}

<MemberDefinition
  prototype={<>using DebugAggregate =  std::pair&lt;const DILocalVariable &#42;, const DILocation &#42;&gt;</>}>
A whole (unfragmented) source variable.

Definition at line <a href="#l00329">329</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### VarLocInsertPt {#a6c7f6b65820380603c12c83d4d3b620c}

<MemberDefinition
  prototype={<>using VarLocInsertPt =  PointerUnion&lt;const Instruction &#42;, const DbgRecord &#42;&gt;</>}>

Definition at line <a href="#l00085">85</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Functions

### analyzeFunction() {#a077a52fa690effeca0a2e83caeaf5de9}

<MemberDefinition
  prototype={<>static void analyzeFunction (<a href="/docs/api/classes/llvm/function">Function</a> &amp; Fn, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; Layout, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42; FnVarLocs)</>}
  labels = {["static"]}>

Definition at line <a href="#l02768">2768</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### buildOverlapMapAndRecordDeclares() {#a4ad92667dcad9ad33a52a2e1c505a03a}

<MemberDefinition
  prototype={<>static AssignmentTrackingLowering::OverlapMap buildOverlapMapAndRecordDeclares (<a href="/docs/api/classes/llvm/function">Function</a> &amp; Fn, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42; FnVarLocs, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> &gt; &amp; VarsWithStackSlot, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0dcaf963c14e849c62941b7f402bf74e">AssignmentTrackingLowering::UntaggedStoreAssignmentMap</a> &amp; UntaggedStoreVars, unsigned &amp; TrackedVariablesVectorSize)</>}
  labels = {["static"]}>
Build a map of &#123;Variable x: Variables y&#125; where all variable fragments contained within the variable fragment x are in set y.

This means that y does not contain all overlaps because partial overlaps are excluded.

While we&#39;re iterating over the function, add single location defs for dbg.declares to <code>FnVarLocs</code>.

Variables that are interesting to this pass in are added to FnVarLocs-&gt;Variables first. TrackedVariablesVectorSize is set to the <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> of the last interesting variable plus 1, meaning variables with <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> 1 (inclusive) to TrackedVariablesVectorSize (exclusive) are interesting. The subsequent variables are either stack homed or fully promoted.

Finally, populate UntaggedStoreVars with a mapping of untagged stores to the stored-to variable fragments.

These tasks are bundled together to reduce the number of times we need to iterate over the function as they can be achieved together in one pass.

Definition at line <a href="#l02152">2152</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### CastToDbgAssign() {#ab89ede590f1a89ea1b5b9cfd422d7c86}

<MemberDefinition
  prototype={<>DbgAssignIntrinsic &#42; CastToDbgAssign (<a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42; DVI)</>}>

Definition at line <a href="#l01516">1516</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### CastToDbgAssign() {#a9c1515a9c974d17a89cbc1443a9b419c}

<MemberDefinition
  prototype={<>DbgVariableRecord &#42; CastToDbgAssign (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42; DVR)</>}>

Definition at line <a href="#l01520">1520</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### DynCastToDbgDeclare() {#afc77f1c086d1b0a5305e033551c42ad2}

<MemberDefinition
  prototype={<>DbgDeclareInst &#42; DynCastToDbgDeclare (<a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42; DVI)</>}>

Definition at line <a href="#l02126">2126</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### DynCastToDbgDeclare() {#a28e2e1ff2e4f02b18b4fdfc7d6c83ba5}

<MemberDefinition
  prototype={<>DbgVariableRecord &#42; DynCastToDbgDeclare (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42; DVR)</>}>

Definition at line <a href="#l02130">2130</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### findVarsWithStackSlot() {#a15c139830d442796a30fbd35e8bfa270}

<MemberDefinition
  prototype={<>static DenseSet&lt; DebugAggregate &gt; findVarsWithStackSlot (<a href="/docs/api/classes/llvm/function">Function</a> &amp; Fn)</>}
  labels = {["static"]}>

Definition at line <a href="#l02748">2748</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### fullyContains() {#a42ed349a287ad53473602bc805a2fe78}

<MemberDefinition
  prototype={<>static bool fullyContains (<a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> A, <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> B)</>}
  labels = {["static"]}>
Return true if A fully contains B.

Definition at line <a href="#l02099">2099</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getAggregate() {#a4514f516df040b468e552a28163b3747}

<MemberDefinition
  prototype={<>static DebugAggregate getAggregate (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42; DII)</>}
  labels = {["static"]}>

Definition at line <a href="#l00330">330</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getAggregate() {#aa891f18ca7f9e534d145c8ff7dfd6b69}

<MemberDefinition
  prototype={<>static DebugAggregate getAggregate (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp; Var)</>}
  labels = {["static"]}>

Definition at line <a href="#l00333">333</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getDerefOffsetInBytes() {#ad86cc3ddbd30cefe005d825b5587321f}

<MemberDefinition
  prototype={<>static std::optional&lt; int64&#95;t &gt; getDerefOffsetInBytes (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42; DIExpr)</>}
  labels = {["static"]}>
Extract the offset used in <code>DIExpr</code>.

Returns std::nullopt if the expression doesn&#39;t explicitly describe a memory location with DW&#95;OP&#95;deref or if the expression is too complex to interpret.

Definition at line <a href="#l00287">287</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getIDFromInst() {#aada8fc5b8fc7766182eb823dcccdde6d}

<MemberDefinition
  prototype={<>static DIAssignID &#42; getIDFromInst (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I)</>}
  labels = {["static"]}>

Definition at line <a href="#l01454">1454</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getIDFromMarker() {#a11c9d7e0af5de60f1e578c8d6a062eec}

<MemberDefinition
  prototype={<>static DIAssignID &#42; getIDFromMarker (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &amp; DAI)</>}
  labels = {["static"]}>

Definition at line <a href="#l01458">1458</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getIDFromMarker() {#a9dd6ae445190ac28162bea663717bf1a}

<MemberDefinition
  prototype={<>static DIAssignID &#42; getIDFromMarker (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp; DVR)</>}
  labels = {["static"]}>

Definition at line <a href="#l01462">1462</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getNextNode() {#a05eb84c8f630be406f61761013146574}

<MemberDefinition
  prototype={<>VarLocInsertPt getNextNode (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dbgrecord">DbgRecord</a> &#42; DVR)</>}>

Definition at line <a href="#l01498">1498</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getNextNode() {#a9c681660f7ed1f72a0a5ff822d4f5e8e}

<MemberDefinition
  prototype={<>VarLocInsertPt getNextNode (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst)</>}>

Definition at line <a href="#l01504">1504</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getNextNode() {#a654cf90977e8e77e4b62672ea3936dcf}

<MemberDefinition
  prototype={<>VarLocInsertPt getNextNode (<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> InsertPt)</>}>

Definition at line <a href="#l01510">1510</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### getUntaggedStoreAssignmentInfo() {#a4613ca285a8a0e95d35816a83b302a91}

<MemberDefinition
  prototype={<>static std::optional&lt; at::AssignmentInfo &gt; getUntaggedStoreAssignmentInfo (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; Layout)</>}
  labels = {["static"]}>

Definition at line <a href="#l02114">2114</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### hasZeroSizedFragment() {#ad9b5e7d6058b3fa078f6cb70d02ba97c}

<MemberDefinition
  template={<>template &lt;typename T&gt;</>}
  prototype={<>static bool hasZeroSizedFragment (T &amp; DbgValue)</>}
  labels = {["static"]}>

Definition at line <a href="#l01844">1844</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### locStr() {#a617b13d89c1cb11a9270727255284b53}

<MemberDefinition
  prototype={<>const char &#42; locStr (<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a> Loc)</>}>

Definition at line <a href="#l01484">1484</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### removeRedundantDbgLocs() {#a732f2f3b2dd163037799643ce7460547}

<MemberDefinition
  prototype={<>static bool removeRedundantDbgLocs (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp; FnVarLocs)</>}
  labels = {["static"]}>

Definition at line <a href="#l02734">2734</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### removeRedundantDbgLocsUsingBackwardScan() {#ad959466c7f8b886a2caa4967c46d48db}

<MemberDefinition
  prototype={<>static bool removeRedundantDbgLocsUsingBackwardScan (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp; FnVarLocs)</>}
  labels = {["static"]}>
Remove redundant definitions within sequences of consecutive location defs.

This is done using a backward scan to keep the last def describing a specific variable/fragment.

This implements removeRedundantDbgInstrsUsingBackwardScan from <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/basicblockutils-cpp">lib/Transforms/Utils/BasicBlockUtils.cpp</a> for locations described with <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> instead of with intrinsics.

Definition at line <a href="#l02492">2492</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### removeRedundantDbgLocsUsingForwardScan() {#a72b4d4469e68630addc74e567526f261}

<MemberDefinition
  prototype={<>static bool removeRedundantDbgLocsUsingForwardScan (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp; FnVarLocs)</>}
  labels = {["static"]}>
Remove redundant location defs using a forward scan.

This can remove a location definition that is redundant due to indicating that a variable has the same value as is already being indicated by an earlier def.

This implements removeRedundantDbgInstrsUsingForwardScan from <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/basicblockutils-cpp">lib/Transforms/Utils/BasicBlockUtils.cpp</a> for locations described with <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> instead of with intrinsics

Definition at line <a href="#l02590">2590</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### removeUndefDbgLocsFromEntryBlock() {#a4e75fd1680471e758ffbca9f8d893884}

<MemberDefinition
  prototype={<>static bool removeUndefDbgLocsFromEntryBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp; FnVarLocs)</>}
  labels = {["static"]}>

Definition at line <a href="#l02649">2649</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### shouldCoalesceFragments() {#af3746cf6b2af89e946e303ef4e7a486c}

<MemberDefinition
  prototype={<>static bool shouldCoalesceFragments (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F)</>}
  labels = {["static"]}>

Definition at line <a href="#l00337">337</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a3117b347b20933dc616892beb55a11d5}

<MemberDefinition
  prototype={<>STATISTIC (NumDefsScanned, &quot;Number of dbg locs that get scanned <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a4cfc8b177e8521a4b496ae2edff6244f">for</a> removal&quot;)</>}>

Definition at line <a href="#l00044">44</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a43a56a6109815c92b6c940fc42e92965}

<MemberDefinition
  prototype={<>STATISTIC (NumDefsRemoved, &quot;Number of dbg locs removed&quot;)</>}>

Definition at line <a href="#l00045">45</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a708a533ca38614c75b7cc1213490adda}

<MemberDefinition
  prototype={<>STATISTIC (NumWedgesScanned, &quot;Number of dbg wedges scanned&quot;)</>}>

Definition at line <a href="#l00046">46</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a4949a18b3a858d46df5c752be75d41f3}

<MemberDefinition
  prototype={<>STATISTIC (NumWedgesChanged, &quot;Number of dbg wedges changed&quot;)</>}>

Definition at line <a href="#l00047">47</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### walkToAllocaAndPrependOffsetDeref() {#a0b1eb53b30ddeb8ebdccc60c0837300f}

<MemberDefinition
  prototype={<>static std::pair&lt; Value &#42;, DIExpression &#42; &gt; walkToAllocaAndPrependOffsetDeref (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; DL, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Start, <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42; Expression)</>}
  labels = {["static"]}>
Walk backwards along constant GEPs and bitcasts to the base storage from <code>Start</code> as far as possible.

Prepend \\Expression with the offset and append it with a DW&#95;OP&#95;deref that haes been implicit until now. Returns the walked-to value and modified expression.

Definition at line <a href="#l00268">268</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### CoalesceAdjacentFragmentsOpt {#adfb6d798a8320f396d793ab5113a58f0}

<MemberDefinition
  prototype={<>cl::opt&lt; cl::boolOrDefault &gt; CoalesceAdjacentFragmentsOpt(&quot;debug-ata-coalesce-frags&quot;, cl::Hidden)</>}
  labels = {["static"]}>
Coalesce adjacent dbg locs describing memory locations that have contiguous fragments.

This reduces the cost of <a href="/docs/api/namespaces/livedebugvalues">LiveDebugValues</a> which does SSA construction for each explicitly stated variable fragment.

Definition at line <a href="#l00065">65</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### EnableMemLocFragFill {#a7fb0ad1b0bad44cddf92cb112aa9eb65}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableMemLocFragFill(&quot;mem-loc-frag-fill&quot;, cl::init(true), cl::Hidden)</>}
  labels = {["static"]}>
Option for debugging the pass, determines if the memory location fragment filling happens after generating the variable locations.

Definition at line <a href="#l00055">55</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### MaxNumBlocks {#af0952d00328de72e269c7f157a015e1c}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; MaxNumBlocks(&quot;debug-ata-max-blocks&quot;, cl::init(10000), cl::desc(&quot;Maximum num basic blocks before debug info dropped&quot;), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00050">50</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

### PrintResults {#a58f2996cd5265a713a5dd08c078c3f0b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; PrintResults(&quot;print-debug-ata&quot;, cl::init(false), cl::Hidden)</>}
  labels = {["static"]}>
Print the results of the analysis. Respects -filter-print-funcs.

Definition at line <a href="#l00058">58</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;debug-ata&quot;</>}>

Definition at line <a href="#l00042">42</a> of file <a href="/docs/api/files/lib/lib/codegen/assignmenttrackinganalysis-cpp">AssignmentTrackingAnalysis.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===-- AssignmentTrackingAnalysis.cpp ------------------------------------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/assignmenttrackinganalysis-h">llvm/CodeGen/AssignmentTrackingAnalysis.h</a>&quot;</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/livedebugvalues/livedebugvalues-h">LiveDebugValues/LiveDebugValues.h</a>&quot;</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h">llvm/ADT/BitVector.h</a>&quot;</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemapinfo-h">llvm/ADT/DenseMapInfo.h</a>&quot;</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/intervalmap-h">llvm/ADT/IntervalMap.h</a>&quot;</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/postorderiterator-h">llvm/ADT/PostOrderIterator.h</a>&quot;</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h">llvm/ADT/STLExtras.h</a>&quot;</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h">llvm/ADT/Statistic.h</a>&quot;</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/uniquevector-h">llvm/ADT/UniqueVector.h</a>&quot;</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/binaryformat/dwarf-h">llvm/BinaryFormat/Dwarf.h</a>&quot;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h">llvm/IR/BasicBlock.h</a>&quot;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h">llvm/IR/DataLayout.h</a>&quot;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfo-h">llvm/IR/DebugInfo.h</a>&quot;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debugprograminstruction-h">llvm/IR/DebugProgramInstruction.h</a>&quot;</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/function-h">llvm/IR/Function.h</a>&quot;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h">llvm/IR/Instruction.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h">llvm/IR/IntrinsicInst.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/module-h">llvm/IR/Module.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/passmanager-h">llvm/IR/PassManager.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/printpasses-h">llvm/IR/PrintPasses.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/initializepasses-h">llvm/InitializePasses.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &lt;assert.h&gt;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &lt;cstdint&gt;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightPreprocessor">#include &lt;optional&gt;</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#include &lt;queue&gt;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#include &lt;sstream&gt;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightPreprocessor">#include &lt;unordered&#95;map&gt;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;debug-ata&quot;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44" lineLink="#a3117b347b20933dc616892beb55a11d5"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumDefsScanned, </span><span class="doxyHighlightStringLiteral">&quot;Number of dbg locs that get scanned for removal&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45" lineLink="#a43a56a6109815c92b6c940fc42e92965"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumDefsRemoved, </span><span class="doxyHighlightStringLiteral">&quot;Number of dbg locs removed&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46" lineLink="#a708a533ca38614c75b7cc1213490adda"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumWedgesScanned, </span><span class="doxyHighlightStringLiteral">&quot;Number of dbg wedges scanned&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47" lineLink="#a4949a18b3a858d46df5c752be75d41f3"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumWedgesChanged, </span><span class="doxyHighlightStringLiteral">&quot;Number of dbg wedges changed&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50" lineLink="#af0952d00328de72e269c7f157a015e1c"><span class="doxyHighlight">    <a href="#af0952d00328de72e269c7f157a015e1c">MaxNumBlocks</a>(</span><span class="doxyHighlightStringLiteral">&quot;debug-ata-max-blocks&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(10000),</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Maximum num basic blocks before debug info dropped&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightComment">/// Option for debugging the pass, determines if the memory location fragment</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightComment">/// filling happens after generating the variable locations.</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55" lineLink="#a7fb0ad1b0bad44cddf92cb112aa9eb65"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a7fb0ad1b0bad44cddf92cb112aa9eb65">EnableMemLocFragFill</a>(</span><span class="doxyHighlightStringLiteral">&quot;mem-loc-frag-fill&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlight">                                          <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlightComment">/// Print the results of the analysis. Respects -filter-print-funcs.</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58" lineLink="#a58f2996cd5265a713a5dd08c078c3f0b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a58f2996cd5265a713a5dd08c078c3f0b">PrintResults</a>(</span><span class="doxyHighlightStringLiteral">&quot;print-debug-ata&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlight">                                  <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightComment">/// Coalesce adjacent dbg locs describing memory locations that have contiguous</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightComment">/// fragments. This reduces the cost of LiveDebugValues which does SSA</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlightComment">/// construction for each explicitly stated variable fragment.</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;cl::boolOrDefault&gt;</a></span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65" lineLink="#adfb6d798a8320f396d793ab5113a58f0"><span class="doxyHighlight">    <a href="#adfb6d798a8320f396d793ab5113a58f0">CoalesceAdjacentFragmentsOpt</a>(</span><span class="doxyHighlightStringLiteral">&quot;debug-ata-coalesce-frags&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlightComment">// Implicit conversions are disabled for enum class types, so unfortunately we</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlightComment">// need to create a DenseMapInfo wrapper around the specified underlying type.</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;&gt; </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/densemapinfo">llvm::DenseMapInfo</a>&lt;<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a>&gt; &#123;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#afe773428c697afce29eb0228d69f0657"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#afe773428c697afce29eb0228d69f0657">Wrapped</a> = <a href="/docs/api/structs/llvm/densemapinfo">DenseMapInfo&lt;unsigned&gt;</a>;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#ada75facb72606ba383b05705f381c56d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">inline</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#ada75facb72606ba383b05705f381c56d">getEmptyKey</a>() &#123;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Wrapped::getEmptyKey());</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a25d6b69cf7b38628393d6294d936f3a1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">inline</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a25d6b69cf7b38628393d6294d936f3a1">getTombstoneKey</a>() &#123;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Wrapped::getTombstoneKey());</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a60df1e4c85863eb72c6954b153c0ee0c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a60df1e4c85863eb72c6954b153c0ee0c">getHashValue</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;Val) &#123;</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Wrapped::getHashValue(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Val));</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a315cd274d6cf300d0c3d4fbb6b48c009"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/densemapinfo-ad179a3d7e337f3ccebddf3e21453e88/#a315cd274d6cf300d0c3d4fbb6b48c009">isEqual</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;LHS, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;RHS) &#123;</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LHS == RHS;</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85" lineLink="#a6c7f6b65820380603c12c83d4d3b620c"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> = <a href="/docs/api/classes/llvm/pointerunion">PointerUnion&lt;const Instruction &#42;, const DbgRecord &#42;&gt;</a>;</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/std">std</a> &#123;</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88" lineLink="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;&gt; </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight">hash&lt;<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a>&gt; &#123;</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89" lineLink="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#a4dc6e9affdd5557c1fee4621c7775794"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#a4dc6e9affdd5557c1fee4621c7775794">argument&#95;type</a> = <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a>;</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90" lineLink="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#ab2aad064f7d55bea61fc0a8abd3f6618"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#ab2aad064f7d55bea61fc0a8abd3f6618">result&#95;type</a> = std::size&#95;t;</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#aaff4bc21a960e3991f6daf3c30fc26f1"><span class="doxyHighlight">  <a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#ab2aad064f7d55bea61fc0a8abd3f6618">result&#95;type</a> <a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#aaff4bc21a960e3991f6daf3c30fc26f1">operator()</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/std/hash-5ed831b8ae6e76b91d9e4b7fe69f7bcc/#a4dc6e9affdd5557c1fee4621c7775794">argument&#95;type</a> &amp;Arg)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::hash&lt;void &#42;&gt;()(Arg.<a href="/docs/api/classes/llvm/pointerunion/#ab7809d1212d3a2392ddbc63be90bb5ed">getOpaqueValue</a>());</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace std</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlightComment">/// Helper class to build FunctionVarLocs, since that class isn&#39;t easy to</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlightComment">/// modify. TODO: There&#39;s not a great deal of value in the split, it could be</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlightComment">/// worth merging the two classes.</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101" lineLink="/docs/api/classes/functionvarlocsbuilder"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#123;</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a>;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/uniquevector">UniqueVector&lt;DebugVariable&gt;</a> Variables;</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use an unordered&#95;map so we don&#39;t invalidate iterators after</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// insert/modifications.</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">  std::unordered&#95;map&lt;VarLocInsertPt, SmallVector&lt;VarLocInfo&gt;&gt; VarLocsBeforeInst;</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> SingleLocVars;</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111" lineLink="/docs/api/classes/functionvarlocsbuilder/#a9848c6070f02f12648056d70d3884c8e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/functionvarlocsbuilder/#a9848c6070f02f12648056d70d3884c8e">getNumVariables</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Variables.size(); &#125;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlightComment">  /// Find or insert \\p V and return the ID.</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114" lineLink="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> V) &#123;</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Variables.insert(V));</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlightComment">  /// Get a variable from its \\p ID.</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119" lineLink="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp;<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Variables&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>)&#93;;</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlightComment">  /// Return ptr to wedge of defs or nullptr if no defs come just before /p</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><span class="doxyHighlightComment">  /// Before.</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125" lineLink="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;VarLocInfo&gt;</a> &#42;<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = VarLocsBeforeInst.find(<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>);</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (R == VarLocsBeforeInst.end())</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &amp;R-&gt;second;</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlightComment">  /// Replace the defs that come just before /p Before with /p Wedge.</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133" lineLink="/docs/api/classes/functionvarlocsbuilder/#a4f8d8b3153be3260587c06c0cf6340f0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/functionvarlocsbuilder/#a4f8d8b3153be3260587c06c0cf6340f0">setWedge</a>(<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> &amp;&amp;Wedge) &#123;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlight">    VarLocsBeforeInst&#91;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>&#93; = std::move(Wedge);</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlightComment">  /// Add a def for a variable that is valid for its lifetime.</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="/docs/api/classes/functionvarlocsbuilder/#a9bdc6ab1fe66386aa7c0acc76c0c5c75"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/functionvarlocsbuilder/#a9bdc6ab1fe66386aa7c0acc76c0c5c75">addSingleLocVar</a>(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var, <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;Expr, <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">                       <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a> R) &#123;</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> VarLoc;</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a> = <a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(Var);</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a> = R;</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">    SingleLocVars.emplace&#95;back(VarLoc);</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlightComment">  /// Add a def to the wedge of defs just before /p Before.</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="/docs/api/classes/functionvarlocsbuilder/#af6e3c63d3b0c045ac17a629271c3f981"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/functionvarlocsbuilder/#af6e3c63d3b0c045ac17a629271c3f981">addVarLoc</a>(<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var, <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;Expr,</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">                 <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a> R) &#123;</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> VarLoc;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a> = <a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(Var);</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a> = R;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">    VarLocsBeforeInst&#91;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>&#93;.emplace&#95;back(VarLoc);</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160" lineLink="/docs/api/classes/llvm/functionvarlocs/#a49453c652051a3e7530ed421bf160c92"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/functionvarlocs/#a49453c652051a3e7530ed421bf160c92">FunctionVarLocs::print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Print the variable table first. TODO: Sorting by variable could make the</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// output more stable?</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Counter = -1;</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;=== Variables ===\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp;V : Variables) &#123;</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlight">    ++Counter;</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Skip first entry because it is a dummy entry.</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Counter == 0) &#123;</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; Counter &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93; &quot;</span><span class="doxyHighlight"> &lt;&lt; V.getVariable()-&gt;getName();</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = V.getFragment())</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">      OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; bits &#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;OffsetInBits &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">         &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;OffsetInBits + <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;SizeInBits &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;IA = V.getInlinedAt())</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlight">      OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; inlined-at &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;IA;</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PrintLoc = &#91;&amp;OS&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;<a href="/docs/api/namespaces/llvm/loc">Loc</a>) &#123;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DEF Var=&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; (unsigned)<a href="/docs/api/namespaces/llvm/loc">Loc</a>.VariableID &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93;&quot;</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">       &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Expr=&quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/namespaces/llvm/loc">Loc</a>.Expr &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Values=(&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Values.location&#95;ops()) &#123;</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Print the single location variables.</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;=== Single location vars ===\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = <a href="/docs/api/classes/llvm/functionvarlocs/#a82ac348d37f9d4342bf7f7c9433b213c">single&#95;locs&#95;begin</a>(), End = <a href="/docs/api/classes/llvm/functionvarlocs/#aebd1b22de49da2b8b99ad3238bbdad46">single&#95;locs&#95;end</a>(); It != End;</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlight">       ++It) &#123;</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">    PrintLoc(&#42;It);</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Print the non-single-location defs in line with IR.</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">  OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;=== In-line variable defs ===&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB : Fn) &#123;</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight"> &lt;&lt; BB.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : BB) &#123;</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = <a href="/docs/api/classes/llvm/functionvarlocs/#a765a03bce8a48a073d6c1c7321408631">locs&#95;begin</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), End = <a href="/docs/api/classes/llvm/functionvarlocs/#ae40c1e35b923034f750710e914e02d92">locs&#95;end</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>); It != End; ++It) &#123;</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlight">        PrintLoc(&#42;It);</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlight">      OS &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209" lineLink="/docs/api/classes/llvm/functionvarlocs/#af8922bc00acf83e71c7f2d47bbcfc0f6"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/functionvarlocs/#af8922bc00acf83e71c7f2d47bbcfc0f6">FunctionVarLocs::init</a>(<a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp;Builder) &#123;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add the single-location variables first.</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;VarLoc : Builder.SingleLocVars)</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><span class="doxyHighlight">    VarLocRecords.emplace&#95;back(VarLoc);</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Mark the end of the section.</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">  SingleVarLocEnd = VarLocRecords.size();</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert a contiguous block of VarLocInfos for each instruction, mapping it</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to the start and end position in the vector with VarLocsBeforeInst. This</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// block includes VarLocs for any DbgVariableRecords attached to that</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instruction.</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : Builder.VarLocsBeforeInst) &#123;</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Process VarLocs attached to a DbgRecord alongside their marker</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Instruction.</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;const DbgRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first))</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;const Instruction &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first);</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BlockStart = VarLocRecords.size();</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Any VarLocInfos attached to a DbgRecord should now be remapped to their</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// marker Instruction, in order of DbgRecord appearance and prior to any</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// VarLocInfos attached directly to that instruction.</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDbgRecordRange())) &#123;</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Even though DVR defines a variable location, VarLocsBeforeInst can</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// still be empty if that VarLoc was redundant.</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = Builder.VarLocsBeforeInst.find(&amp;DVR);</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (It == Builder.VarLocsBeforeInst.end())</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;VarLoc : It-&gt;second)</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">        VarLocRecords.emplace&#95;back(VarLoc);</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;VarLoc : <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second)</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">      VarLocRecords.emplace&#95;back(VarLoc);</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BlockEnd = VarLocRecords.size();</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Record the start and end indices.</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BlockEnd != BlockStart)</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">      VarLocsBeforeInst&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93; = &#123;BlockStart, BlockEnd&#125;;</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Copy the Variables vector from the builder&#39;s UniqueVector.</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Variables.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Expect clear before init&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// UniqueVectors IDs are one-based (which means the VarLocInfo VarID values</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// are one-based) so reserve an extra and insert a dummy.</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">  Variables.reserve(Builder.Variables.size() + 1);</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">  Variables.push&#95;back(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, std::nullopt, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">  Variables.append(Builder.Variables.begin(), Builder.Variables.end());</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256" lineLink="/docs/api/classes/llvm/functionvarlocs/#abe10e34cd384a2508d34c3b01c5f9866"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/functionvarlocs/#abe10e34cd384a2508d34c3b01c5f9866">FunctionVarLocs::clear</a>() &#123;</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">  Variables.clear();</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">  VarLocRecords.clear();</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">  VarLocsBeforeInst.clear();</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">  SingleVarLocEnd = 0;</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlightComment">/// Walk backwards along constant GEPs and bitcasts to the base storage from \\p</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlightComment">/// Start as far as possible. Prepend \\Expression with the offset and append it</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlightComment">/// with a DW&#95;OP&#95;deref that haes been implicit until now. Returns the walked-to</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlightComment">/// value and modified expression.</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::pair&lt;Value &#42;, DIExpression &#42;&gt;</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268" lineLink="#a0b1eb53b30ddeb8ebdccc60c0837300f"><span class="doxyHighlight"><a href="#a0b1eb53b30ddeb8ebdccc60c0837300f">walkToAllocaAndPrependOffsetDeref</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Start,</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">                                  <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;<a href="/docs/api/classes/llvm/expression">Expression</a>) &#123;</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/apint">APInt</a> OffsetInBytes(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(Start-&gt;getType()), </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;End =</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlight">      Start-&gt;stripAndAccumulateInBoundsConstantOffsets(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OffsetInBytes);</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint64&#95;t, 3&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OffsetInBytes.<a href="/docs/api/classes/llvm/apint/#ac0e942dde4b113c4c0b1fd76333db93a">getBoolValue</a>()) &#123;</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a> = &#123;dwarf::DW&#95;OP&#95;plus&#95;uconst, OffsetInBytes.<a href="/docs/api/classes/llvm/apint/#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()&#125;;</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/expression">Expression</a> = <a href="/docs/api/classes/llvm/diexpression/#af3a48df3735933cf1621760019e5fd8c">DIExpression::prependOpcodes</a>(</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/expression">Expression</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, </span><span class="doxyHighlightComment">/&#42;StackValue=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;EntryValue=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/expression">Expression</a> = <a href="/docs/api/classes/llvm/diexpression/#a15f4de7989cc83855e8f65792ae94bc4">DIExpression::append</a>(<a href="/docs/api/classes/llvm/expression">Expression</a>, &#123;dwarf::DW&#95;OP&#95;deref&#125;);</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;End, <a href="/docs/api/classes/llvm/expression">Expression</a>&#125;;</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlightComment">/// Extract the offset used in \\p DIExpr. Returns std::nullopt if the expression</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlightComment">/// doesn&#39;t explicitly describe a memory location with DW&#95;OP&#95;deref or if the</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlightComment">/// expression is too complex to interpret.</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::optional&lt;int64&#95;t&gt;</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287" lineLink="#ad86cc3ddbd30cefe005d825b5587321f"><span class="doxyHighlight"><a href="#ad86cc3ddbd30cefe005d825b5587321f">getDerefOffsetInBytes</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;DIExpr) &#123;</span></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">  int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElements = DIExpr-&gt;<a href="/docs/api/classes/llvm/diexpression/#a1b59c8fe81267b338774bf6c542f90ee">getNumElements</a>();</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Elements = DIExpr-&gt;<a href="/docs/api/classes/llvm/diexpression/#a9b7e344136f26c673bbd64e6cb88178a">getElements</a>();</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ExpectedDerefIdx = 0;</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extract the offset.</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElements &gt; 2 &amp;&amp; Elements&#91;0&#93; == dwarf::DW&#95;OP&#95;plus&#95;uconst) &#123;</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Elements&#91;1&#93;;</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">    ExpectedDerefIdx = 2;</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElements &gt; 3 &amp;&amp; Elements&#91;0&#93; == dwarf::DW&#95;OP&#95;constu) &#123;</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><span class="doxyHighlight">    ExpectedDerefIdx = 3;</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Elements&#91;2&#93; == dwarf::DW&#95;OP&#95;plus)</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Elements&#91;1&#93;;</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Elements&#91;2&#93; == dwarf::DW&#95;OP&#95;minus)</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -Elements&#91;1&#93;;</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If that&#39;s all there is it means there&#39;s no deref.</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ExpectedDerefIdx &gt;= NumElements)</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check the next element is DW&#95;OP&#95;deref - otherwise this is too complex or</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// isn&#39;t a deref expression.</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Elements&#91;ExpectedDerefIdx&#93; != dwarf::DW&#95;OP&#95;deref)</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check the final operation is either the DW&#95;OP&#95;deref or is a fragment.</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElements == ExpectedDerefIdx + 1)</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>; </span><span class="doxyHighlightComment">// Ends with deref.</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ExpectedFragFirstIdx = ExpectedDerefIdx + 1;</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ExpectedFragFinalIdx = ExpectedFragFirstIdx + 2;</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElements == ExpectedFragFinalIdx + 1 &amp;&amp;</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><span class="doxyHighlight">      Elements&#91;ExpectedFragFirstIdx&#93; == <a href="/docs/api/namespaces/llvm/dwarf/#a78e9cb1527edb3cc1d1ee577257b5f0cac09e4cb866e5aa9bc0480359be9e7953">dwarf::DW&#95;OP&#95;LLVM&#95;fragment</a>)</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>; </span><span class="doxyHighlightComment">// Ends with deref + fragment.</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Don&#39;t bother trying to interpret anything more complex.</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlightComment">/// A whole (unfragmented) source variable.</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329" lineLink="#a05c5b2328f38cb1affebb8ad4ab6fe40"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> = std::pair&lt;const DILocalVariable &#42;, const DILocation &#42;&gt;;</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330" lineLink="#a4514f516df040b468e552a28163b3747"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42;DII) &#123;</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(DII-&gt;<a href="/docs/api/classes/llvm/dbgvariableintrinsic/#a854857be09a21f27fb21ba872fe6f639">getVariable</a>(), DII-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>().<a href="/docs/api/classes/llvm/debugloc/#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>());</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333" lineLink="#aa891f18ca7f9e534d145c8ff7dfd6b69"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp;Var) &#123;</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(Var.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), Var.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>());</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337" lineLink="#af3746cf6b2af89e946e303ef4e7a486c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#af3746cf6b2af89e946e303ef4e7a486c">shouldCoalesceFragments</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Enabling fragment coalescing reduces compiler run time when instruction</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// referencing is enabled. However, it may cause LiveDebugVariables to create</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// incorrect locations. Since instruction-referencing mode effectively</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// bypasses LiveDebugVariables we only enable coalescing if the cl::opt flag</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// has not been explicitly set and instruction-referencing is turned on.</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="#adfb6d798a8320f396d793ab5113a58f0">CoalesceAdjacentFragmentsOpt</a>) &#123;</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/cl/#a9241f2e42b7587b123c885d7a659ad44aa5bd521ebe67ddf0e90f1a9e540a6d43">cl::boolOrDefault::BOU&#95;UNSET</a>:</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#af8460c39f15cca05f00840e4780be9b3">debuginfoShouldUseDebugInstrRef</a>(</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getTargetTriple()));</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/cl/#a9241f2e42b7587b123c885d7a659ad44ad7c4bd83c337c86d34f6c2d8eba1e736">cl::boolOrDefault::BOU&#95;TRUE</a>:</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/cl/#a9241f2e42b7587b123c885d7a659ad44a4e55599a5b5277382b14e6e8eb1f63ef">cl::boolOrDefault::BOU&#95;FALSE</a>:</span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unknown boolOrDefault value&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355" lineLink="/docs/api/namespaces/anonymous-assignmenttrackinganalysis-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlightComment">/// In dwarf emission, the following sequence</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlightComment">///    1 dbg.value ... Fragment(0, 64)</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlightComment">///    2 dbg.value ... Fragment(0, 32)</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><span class="doxyHighlightComment">/// effectively sets Fragment(32, 32) to undef (each def sets all bits not in</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlightComment">/// the intersection of the fragments to having &quot;no location&quot;). This makes</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlightComment">/// sense for implicit location values because splitting the computed values</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlightComment">/// could be troublesome, and is probably quite uncommon.  When we convert</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlightComment">/// dbg.assigns to dbg.value+deref this kind of thing is common, and describing</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><span class="doxyHighlightComment">/// a location (memory) rather than a value means we don&#39;t need to worry about</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlightComment">/// splitting any values, so we try to recover the rest of the fragment</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlightComment">/// location here.</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><span class="doxyHighlightComment">/// This class performs a(nother) dataflow analysis over the function, adding</span></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlightComment">/// variable locations so that any bits of a variable with a memory location</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlightComment">/// have that location explicitly reinstated at each subsequent variable</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlightComment">/// location definition that that doesn&#39;t overwrite those bits. i.e. after a</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlightComment">/// variable location def, insert new defs for the memory location with</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlightComment">/// fragments for the difference of &quot;all bits currently in memory&quot; and &quot;the</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlightComment">/// fragment of the second def&quot;.</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#ac8e70b24327081637cbe0014696000a7">MemLocFragmentFill</a> &#123;</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn;</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlight">  <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs;</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> &#42;VarsWithStackSlot;</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CoalesceAdjacentFragments;</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 0 = no memory location.</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">BaseAddress = unsigned;</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">OffsetInBitsTy = unsigned;</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">FragTraits = <a href="/docs/api/structs/llvm/intervalmaphalfopeninfo">IntervalMapHalfOpenInfo&lt;OffsetInBitsTy&gt;</a>;</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">FragsInMemMap = <a href="/docs/api/classes/llvm/intervalmap">IntervalMap</a>&lt;</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">      OffsetInBitsTy, BaseAddress,</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/intervalmapimpl/nodesizer">IntervalMapImpl::NodeSizer&lt;OffsetInBitsTy, BaseAddress&gt;::LeafSize</a>,</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><span class="doxyHighlight">      FragTraits&gt;;</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/intervalmap/#a6b645fcc5ae44b9a8e2fef275890ae4b">FragsInMemMap::Allocator</a> IntervalMapAlloc;</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">VarFragMap = <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned, FragsInMemMap&gt;</a>;</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><span class="doxyHighlightComment">  /// IDs for memory location base addresses in maps. Use 0 to indicate that</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlightComment">  /// there&#39;s no memory location.</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/uniquevector">UniqueVector&lt;RawLocationWrapper&gt;</a> Bases;</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/uniquevector">UniqueVector&lt;DebugAggregate&gt;</a> Aggregates;</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const BasicBlock &#42;, VarFragMap&gt;</a> LiveIn;</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const BasicBlock &#42;, VarFragMap&gt;</a> LiveOut;</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight">FragMemLoc &#123;</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Var;</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OffsetInBits;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SizeInBits;</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">InsertMap = <a href="/docs/api/classes/llvm/mapvector">MapVector&lt;VarLocInsertPt, SmallVector&lt;FragMemLoc&gt;</a>&gt;;</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlightComment">  /// BBInsertBeforeMap holds a description for the set of location defs to be</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlightComment">  /// inserted after the analysis is complete. It is updated during the dataflow</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlightComment">  /// and the entry for a block is CLEARED each time it is (re-)visited. After</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlightComment">  /// the dataflow is complete, each block entry will contain the set of defs</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlightComment">  /// calculated during the final (fixed-point) iteration.</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const BasicBlock &#42;, InsertMap&gt;</a> BBInsertBeforeMap;</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> intervalMapsAreEqual(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> FragsInMemMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlight">                                   </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> FragsInMemMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AIt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.begin(), AEnd = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.end();</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BIt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.begin(), BEnd = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end();</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; AIt != AEnd; ++AIt, ++BIt) &#123;</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BIt == BEnd)</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// B has fewer elements than A.</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AIt.start() != BIt.start() || AIt.stop() != BIt.stop())</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Interval is different.</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;AIt != &#42;BIt)</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Value at interval is different.</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// AIt == AEnd. Check BIt is also now at end.</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> BIt == BEnd;</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> varFragMapsAreEqual(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> VarFragMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> VarFragMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.size() != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.size())</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;APair : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &#123;</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BIt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.find(APair.first);</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BIt == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end())</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!intervalMapsAreEqual(APair.second, BIt-&gt;second))</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlightComment">  /// Return a string for the value that \\p BaseID represents.</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">  std::string <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseID) &#123;</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseID)</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Bases&#91;BaseID&#93;.getVariableLocationOp(0)-&gt;getName().str();</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;None&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlightComment">  /// Format string describing an FragsInMemMap (IntervalMap) interval.</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">  std::string <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(<a href="/docs/api/classes/llvm/intervalmap/const-iterator">FragsInMemMap::const&#95;iterator</a> It, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Newline = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">    std::string <a href="/docs/api/namespaces/llvm/#ac226f3d2b9ca090171a8e0a8cb92c343a27118326006d3829667a400ad23d5d98">String</a>;</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlight">    std::stringstream S(<a href="/docs/api/namespaces/llvm/#ac226f3d2b9ca090171a8e0a8cb92c343a27118326006d3829667a400ad23d5d98">String</a>);</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a548db093f880ebc0c1706229e898c2f2">valid</a>()) &#123;</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">      S &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a6f262ebbf77347c4999ae7455a59dd99">start</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight"> &lt;&lt; It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a437e7639824aff20c0def7dc276db2f7">stop</a>()</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;): &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a88ec9c35789c76004d1f7dcf690db2b4">value</a>());</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">      S &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;invalid iterator (end)&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Newline)</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">      S &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> S.str();</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">  FragsInMemMap meetFragments(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> FragsInMemMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> FragsInMemMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">    FragsInMemMap Result(IntervalMapAlloc);</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AIt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.begin(), AEnd = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.end(); AIt != AEnd; ++AIt) &#123;</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;a &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(AIt));</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This is basically copied from process() and inverted (process is</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// performing something like a union whereas this is more of an</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// intersect).</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// There&#39;s no work to do if interval &#96;a&#96; overlaps no fragments in map &#96;B&#96;.</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.overlaps(AIt.start(), AIt.stop()))</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Does StartBit intersect an existing fragment?</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FirstOverlap = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.find(AIt.start());</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstOverlap != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end());</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IntersectStart = FirstOverlap.start() &lt; AIt.start();</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- FirstOverlap &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(FirstOverlap, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, IntersectStart: &quot;</span><span class="doxyHighlight"> &lt;&lt; IntersectStart &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Does EndBit intersect an existing fragment?</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LastOverlap = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.find(AIt.stop());</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IntersectEnd =</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">          LastOverlap != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end() &amp;&amp; LastOverlap.start() &lt; AIt.stop();</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- LastOverlap &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(LastOverlap, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, IntersectEnd: &quot;</span><span class="doxyHighlight"> &lt;&lt; IntersectEnd &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Check if both ends of &#96;a&#96; intersect the same interval &#96;b&#96;.</span></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectStart &amp;&amp; IntersectEnd &amp;&amp; FirstOverlap == LastOverlap) &#123;</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Insert &#96;a&#96; (&#96;a&#96; is contained in &#96;b&#96;) if the values match.</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; a &#93;</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; - b - &#93;</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// -</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; r &#93;</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- a is contained within &quot;</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(FirstOverlap));</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;AIt &amp;&amp; &#42;AIt == &#42;FirstOverlap)</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">          Result.insert(AIt.start(), AIt.stop(), &#42;AIt);</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// There&#39;s an overlap but &#96;a&#96; is not fully contained within</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#96;b&#96;. Shorten any end-point intersections.</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">//     &#91; - a - &#93;</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; - b - &#93;</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// -</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">//     &#91; r &#93;</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = FirstOverlap;</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectStart) &#123;</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- insert intersection of a and &quot;</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">                            &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(FirstOverlap));</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;AIt &amp;&amp; &#42;AIt == &#42;FirstOverlap)</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">            Result.insert(AIt.start(), FirstOverlap.stop(), &#42;AIt);</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">          ++<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>;</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; - a - &#93;</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">//     &#91; - b - &#93;</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// -</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">//     &#91; r &#93;</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectEnd) &#123;</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- insert intersection of a and &quot;</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlight">                            &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(LastOverlap));</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;AIt &amp;&amp; &#42;AIt == &#42;LastOverlap)</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">            Result.insert(LastOverlap.start(), AIt.stop(), &#42;AIt);</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Insert all intervals in map &#96;B&#96; that are contained within interval</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#96;a&#96; where the values match.</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; -  - a -  - &#93;</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; b1 &#93;   &#91; b2 &#93;</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// -</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// &#91; r1 &#93;   &#91; r2 &#93;</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end() &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>.start() &lt; AIt.stop() &amp;&amp;</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">               <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>.stop() &lt;= AIt.stop()) &#123;</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlight">                     &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- insert intersection of a and &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>));</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#42;AIt &amp;&amp; &#42;AIt == &#42;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>)</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">            Result.insert(<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>.start(), <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>.stop(), &#42;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>);</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">          ++<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>;</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Result;</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlightComment">  /// Meet \\p A and \\p B, storing the result in \\p A.</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> meetVars(VarFragMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> VarFragMap &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Meet A and B.</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Result = meet(a, b) for a in A, b in B where Var(a) == Var(b)</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.begin(), End = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.end(); It != End; ++It) &#123;</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AVar = It-&gt;first;</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">      FragsInMemMap &amp;AFrags = It-&gt;second;</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BIt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.find(AVar);</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BIt == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.end()) &#123;</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.erase(It);</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Var has no bits defined in B.</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;meet fragment maps for &quot;</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">                        &lt;&lt; Aggregates&#91;AVar&#93;.first-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">      AFrags = meetFragments(AFrags, BIt-&gt;second);</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> meet(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB,</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> &amp;Visited) &#123;</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;meet block info from preds of &quot;</span><span class="doxyHighlight"> &lt;&lt; BB.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlight">    VarFragMap BBLiveIn;</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FirstMeet = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// LiveIn locs for BB is the meet of the already-processed preds&#39; LiveOut</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// locs.</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Pred : <a href="/docs/api/namespaces/llvm/#acb22fb04083152eee862457e42e8dc31">predecessors</a>(&amp;BB)) &#123;</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Ignore preds that haven&#39;t been processed yet. This is essentially the</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// same as initialising all variables to implicit top value (⊤) which is</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// the identity value for the meet operation.</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Visited.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Pred))</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PredLiveOut = LiveOut.find(Pred);</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredLiveOut != LiveOut.end());</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FirstMeet) &#123;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;BBLiveIn = &quot;</span><span class="doxyHighlight"> &lt;&lt; Pred-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">        BBLiveIn = PredLiveOut-&gt;second;</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">        FirstMeet = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;BBLiveIn = meet BBLiveIn, &quot;</span><span class="doxyHighlight"> &lt;&lt; Pred-&gt;getName()</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">        meetVars(BBLiveIn, PredLiveOut-&gt;second);</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// An empty set is ⊥ for the intersect-like meet operation. If we&#39;ve</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// already got ⊥ there&#39;s no need to run the code - we know the result is</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// ⊥ since &#96;meet(a, ⊥) = ⊥&#96;.</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BBLiveIn.<a href="/docs/api/classes/llvm/densemapbase/#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>() == 0)</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CurrentLiveInEntry = LiveIn.find(&amp;BB);</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If there&#39;s no LiveIn entry for the block yet, add it.</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrentLiveInEntry == LiveIn.end()) &#123;</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;change=true (first) on meet on &quot;</span><span class="doxyHighlight"> &lt;&lt; BB.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">      LiveIn&#91;&amp;BB&#93; = std::move(BBLiveIn);</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the LiveIn set has changed (expensive check) update it and return</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// true.</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!varFragMapsAreEqual(BBLiveIn, CurrentLiveInEntry-&gt;second)) &#123;</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;change=true on meet on &quot;</span><span class="doxyHighlight"> &lt;&lt; BB.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlight">      CurrentLiveInEntry-&gt;second = std::move(BBLiveIn);</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;change=false on meet on &quot;</span><span class="doxyHighlight"> &lt;&lt; BB.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> insertMemLoc(<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Var,</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlight">                    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StartBit, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EndBit, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>) &#123;</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StartBit &lt; EndBit &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Cannot create fragment of size &lt;= 0&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><span class="doxyHighlight">    FragMemLoc <a href="/docs/api/namespaces/llvm/loc">Loc</a>;</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Var = Var;</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/loc">Loc</a>.OffsetInBits = StartBit;</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/loc">Loc</a>.SizeInBits = EndBit - StartBit;</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Expected a non-zero ID for Base address&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Base = <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/loc">Loc</a>.DL = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</span></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlight">    BBInsertBeforeMap&#91;&amp;BB&#93;&#91;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>&#93;.push&#95;back(<a href="/docs/api/namespaces/llvm/loc">Loc</a>);</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Add mem def for &quot;</span><span class="doxyHighlight"> &lt;&lt; Aggregates&#91;Var&#93;.first-&gt;getName()</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; bits &#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; StartBit &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight"> &lt;&lt; EndBit &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlightComment">  /// Inserts a new dbg def if the interval found when looking up \\p StartBit</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlightComment">  /// in \\p FragMap starts before \\p StartBit or ends after \\p EndBit (which</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlightComment">  /// indicates - assuming StartBit-&gt;EndBit has just been inserted - that the</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlightComment">  /// slice has been coalesced in the map).</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> coalesceFragments(<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Var,</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StartBit, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EndBit, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</span></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> FragsInMemMap &amp;FragMap) &#123;</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!CoalesceAdjacentFragments)</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;ve inserted the location into the map. The map will have coalesced</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// adjacent intervals (variable fragments) that describe the same memory</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// location. Use this knowledge to insert a debug location that describes</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that coalesced fragment. This may eclipse other locs we&#39;ve just</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// inserted. This is okay as redundant locs will be cleaned up later.</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CoalescedFrag = FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a8a29f1f6b44eb828055aad218617a0f1">find</a>(StartBit);</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bail if no coalescing has taken place.</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CoalescedFrag.start() == StartBit &amp;&amp; CoalescedFrag.stop() == EndBit)</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Insert loc for bits &quot;</span><span class="doxyHighlight"> &lt;&lt; CoalescedFrag.start()</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; to &quot;</span><span class="doxyHighlight"> &lt;&lt; CoalescedFrag.stop() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlight">    insertMemLoc(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, CoalescedFrag.start(), CoalescedFrag.stop(),</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> addDef(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;VarLoc, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB,</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlight">              VarFragMap &amp;LiveSet) &#123;</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> DbgVar = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (skipVariable(DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>()))</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t bother doing anything for this variables if we know it&#39;s fully</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// promoted. We&#39;re only interested in variables that (sometimes) live on</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the stack here.</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VarsWithStackSlot-&gt;count(<a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(DbgVar)))</span></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Var = Aggregates.insert(</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><span class="doxyHighlight">        <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>.<a href="/docs/api/classes/llvm/debugloc/#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>()));</span></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#91;StartBit: EndBit) are the bits affected by this def.</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;DIExpr = VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>;</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StartBit;</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EndBit;</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Frag = DIExpr-&gt;<a href="/docs/api/classes/llvm/diexpression/#a7cc5f1632a4c520497898439c17dc026">getFragmentInfo</a>()) &#123;</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlight">      StartBit = Frag-&gt;OffsetInBits;</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><span class="doxyHighlight">      EndBit = StartBit + Frag-&gt;SizeInBits;</span></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>()-&gt;<a href="/docs/api/classes/llvm/divariable/#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>()));</span></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">      StartBit = 0;</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><span class="doxyHighlight">      EndBit = &#42;DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>()-&gt;<a href="/docs/api/classes/llvm/divariable/#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>();</span></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We will only fill fragments for simple memory-describing dbg.value</span></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// intrinsics. If the fragment offset is the same as the offset from the</span></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// base pointer, do The Thing, otherwise fall back to normal dbg.value</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// behaviour. AssignmentTrackingLowering has generated DIExpressions</span></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// written in terms of the base pointer.</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Remove this condition since the fragment offset doesn&#39;t always</span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// equal the offset from base pointer (e.g. for a SROA-split variable).</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DerefOffsetInBytes = <a href="#ad86cc3ddbd30cefe005d825b5587321f">getDerefOffsetInBytes</a>(DIExpr);</span></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> =</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">        DerefOffsetInBytes &amp;&amp; &#42;DerefOffsetInBytes &#42; 8 == StartBit</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">            ? Bases.insert(VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a>)</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">            : 0;</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DEF &quot;</span><span class="doxyHighlight"> &lt;&lt; DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>()-&gt;<a href="/docs/api/classes/llvm/divariable/#af44724cae4bcd562972facee1cf035a5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#91;&quot;</span></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><span class="doxyHighlight">                      &lt;&lt; StartBit &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight"> &lt;&lt; EndBit &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;): &quot;</span><span class="doxyHighlight"> &lt;&lt; toString(<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// First of all, any locs that use mem that are disrupted need reinstating.</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Unfortunately, IntervalMap doesn&#39;t let us insert intervals that overlap</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// with existing intervals so this code involves a lot of fiddling around</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// with intervals to do that manually.</span></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FragIt = LiveSet.<a href="/docs/api/classes/llvm/densemapbase/#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Var);</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check if the variable does not exist in the map.</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FragIt == LiveSet.<a href="/docs/api/classes/llvm/densemapbase/#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) &#123;</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Add this variable to the BB map.</span></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = LiveSet.<a href="/docs/api/classes/llvm/densemapbase/#a1a245b31aced1374f28f45d2b297f402">try&#95;emplace</a>(Var, FragsInMemMap(IntervalMapAlloc));</span></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Var already in map?&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Add the interval to the fragment map.</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first-&gt;second.insert(StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The variable has an entry in the map.</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlight">    FragsInMemMap &amp;FragMap = FragIt-&gt;second;</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// First check the easy case: the new fragment &#96;f&#96; doesn&#39;t overlap with any</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// intervals.</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FragMap.<a href="/docs/api/classes/llvm/intervalmap/#ab4b4075554919795e770660d7f13bb21">overlaps</a>(StartBit, EndBit)) &#123;</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- No overlaps\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">      FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>(StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">      coalesceFragments(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>,</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">                        FragMap);</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// There is at least one overlap.</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Does StartBit intersect an existing fragment?</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FirstOverlap = FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a8a29f1f6b44eb828055aad218617a0f1">find</a>(StartBit);</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstOverlap != FragMap.<a href="/docs/api/classes/llvm/intervalmap/#acd1abf2a3bff454bb98fb7598f251a5a">end</a>());</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IntersectStart = FirstOverlap.start() &lt; StartBit;</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Does EndBit intersect an existing fragment?</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LastOverlap = FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a8a29f1f6b44eb828055aad218617a0f1">find</a>(EndBit);</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IntersectEnd = LastOverlap.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a548db093f880ebc0c1706229e898c2f2">valid</a>() &amp;&amp; LastOverlap.start() &lt; EndBit;</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check if both ends of &#96;f&#96; intersect the same interval &#96;i&#96;.</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectStart &amp;&amp; IntersectEnd &amp;&amp; FirstOverlap == LastOverlap) &#123;</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Intersect single interval @ both ends\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Shorten &#96;i&#96; so that there&#39;s space to insert &#96;f&#96;.</span></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//      &#91; f &#93;</span></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91;  -   i   -  &#93;</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// +</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; i &#93;&#91; f &#93;&#91; i &#93;</span></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Save values for use after inserting a new interval.</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> EndBitOfOverlap = FirstOverlap.stop();</span></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OverlapValue = FirstOverlap.value();</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Shorten the overlapping interval.</span></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">      FirstOverlap.setStop(StartBit);</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><span class="doxyHighlight">      insertMemLoc(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, FirstOverlap.start(), StartBit,</span></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">                   OverlapValue, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>);</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Insert a new interval to represent the end part.</span></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">      FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>(EndBit, EndBitOfOverlap, OverlapValue);</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">      insertMemLoc(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, EndBit, EndBitOfOverlap, OverlapValue,</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">                   VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>);</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Insert the new (middle) fragment now there is space.</span></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">      FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>(StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// There&#39;s an overlap but &#96;f&#96; may not be fully contained within</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#96;i&#96;. Shorten any end-point intersections so that we can then</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// insert &#96;f&#96;.</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//      &#91; - f - &#93;</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; - i - &#93;</span></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// |   |</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; i &#93;</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Shorten any end-point intersections.</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectStart) &#123;</span></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Intersect interval at start\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Split off at the intersection.</span></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">        FirstOverlap.setStop(StartBit);</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">        insertMemLoc(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, FirstOverlap.start(), StartBit,</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">                     &#42;FirstOverlap, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>);</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; - f - &#93;</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//      &#91; - i - &#93;</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//          |   |</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//          &#91; i &#93;</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectEnd) &#123;</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Intersect interval at end\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Split off at the intersection.</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">        LastOverlap.setStart(EndBit);</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">        insertMemLoc(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, EndBit, LastOverlap.stop(), &#42;LastOverlap,</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">                     VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>);</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Erase intervals contained within\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FirstOverlap and LastOverlap have been shortened such that they&#39;re</span></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// no longer overlapping with &#91;StartBit, EndBit). Delete any overlaps</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// that remain (these will be fully contained within &#96;f&#96;).</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; - f - &#93;       &#125;</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//      &#91; - i - &#93;  &#125; Intersection shortening that has happened above.</span></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//          |   |  &#125;</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//          &#91; i &#93;  &#125;</span></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// -----------------</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91;i2 &#93;           &#125; Intervals fully contained within &#96;f&#96; get erased.</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// -----------------</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// &#91; - f - &#93;&#91; i &#93;  &#125; Completed insertion.</span></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = FirstOverlap;</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntersectStart)</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">        ++It; </span><span class="doxyHighlightComment">// IntersectStart: first overlap has been shortened.</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a548db093f880ebc0c1706229e898c2f2">valid</a>() &amp;&amp; It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a6f262ebbf77347c4999ae7455a59dd99">start</a>() &gt;= StartBit &amp;&amp; It.<a href="/docs/api/classes/llvm/intervalmap/const-iterator/#a437e7639824aff20c0def7dc276db2f7">stop</a>() &lt;= EndBit) &#123;</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Erase &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#aba83a013c55b19255697393a10d9165e">toString</a>(It));</span></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">        It.erase(); </span><span class="doxyHighlightComment">// This increments It after removing the interval.</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We&#39;ve dealt with all the overlaps now!</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FragMap.<a href="/docs/api/classes/llvm/intervalmap/#ab4b4075554919795e770660d7f13bb21">overlaps</a>(StartBit, EndBit));</span></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;- Insert DEF into now-empty space\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">      FragMap.<a href="/docs/api/classes/llvm/intervalmap/#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>(StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">    coalesceFragments(BB, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>, Var, StartBit, EndBit, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>,</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">                      FragMap);</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> skipVariable(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dilocalvariable">DILocalVariable</a> &#42;V) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !V-&gt;getSizeInBits(); &#125;</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> process(<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB, VarFragMap &amp;LiveSet) &#123;</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">    BBInsertBeforeMap&#91;&amp;BB&#93;.<a href="/docs/api/classes/llvm/densemapbase/#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : BB) &#123;</span></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange())) &#123;</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Locs = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(&amp;DVR)) &#123;</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;<a href="/docs/api/namespaces/llvm/loc">Loc</a> : &#42;Locs) &#123;</span></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">            addDef(<a href="/docs/api/namespaces/llvm/loc">Loc</a>, &amp;DVR, &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent(), LiveSet);</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Locs = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;<a href="/docs/api/namespaces/llvm/loc">Loc</a> : &#42;Locs) &#123;</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">          addDef(<a href="/docs/api/namespaces/llvm/loc">Loc</a>, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent(), LiveSet);</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#ac8e70b24327081637cbe0014696000a7"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#ac8e70b24327081637cbe0014696000a7">MemLocFragmentFill</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn,</span></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">                     </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> &#42;VarsWithStackSlot,</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlight">                     </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CoalesceAdjacentFragments)</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">      : Fn(Fn), VarsWithStackSlot(VarsWithStackSlot),</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">        CoalesceAdjacentFragments(CoalesceAdjacentFragments) &#123;&#125;</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlightComment">  /// Add variable locations to \\p FnVarLocs so that any bits of a variable</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><span class="doxyHighlightComment">  /// with a memory location have that location explicitly reinstated at each</span></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><span class="doxyHighlightComment">  /// subsequent variable location definition that that doesn&#39;t overwrite those</span></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlightComment">  /// bits. i.e. after a variable location def, insert new defs for the memory</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlightComment">  /// location with fragments for the difference of &quot;all bits currently in</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlightComment">  /// memory&quot; and &quot;the fragment of the second def&quot;. e.g.</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlightComment">  ///     Before:</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlightComment">  ///     var x bits 0 to 63:  value in memory</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlightComment">  ///     more instructions</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlightComment">  ///     var x bits 0 to 31:  value is %0</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><span class="doxyHighlightComment">  ///     After:</span></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlightComment">  ///     var x bits 0 to 63:  value in memory</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlightComment">  ///     more instructions</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlightComment">  ///     var x bits 0 to 31:  value is %0</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlightComment">  ///     var x bits 32 to 61: value in memory ; &lt;-- new loc def</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#a8c0e38f8e7530ce5863d73acc50d25ff"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/memlocfragmentfill/#a8c0e38f8e7530ce5863d73acc50d25ff">run</a>(<a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs) &#123;</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a7fb0ad1b0bad44cddf92cb112aa9eb65">EnableMemLocFragFill</a>)</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">    this-&gt;FnVarLocs = FnVarLocs;</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Prepare for traversal.</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/reversepostordertraversal">ReversePostOrderTraversal&lt;Function &#42;&gt;</a> RPOT(&amp;Fn);</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><span class="doxyHighlight">    std::priority&#95;queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</span></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">                        std::greater&lt;unsigned int&gt;&gt;</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><span class="doxyHighlight">        Worklist;</span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><span class="doxyHighlight">    std::priority&#95;queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</span></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">                        std::greater&lt;unsigned int&gt;&gt;</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">        Pending;</span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned int, BasicBlock &#42;&gt;</a> OrderToBB;</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;BasicBlock &#42;, unsigned int&gt;</a> BBToOrder;</span></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">    &#123; </span><span class="doxyHighlightComment">// Init OrderToBB and BBToOrder.</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> RPONumber = 0;</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB : RPOT) &#123;</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><span class="doxyHighlight">        OrderToBB&#91;RPONumber&#93; = BB;</span></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">        BBToOrder&#91;BB&#93; = RPONumber;</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">        Worklist.push(RPONumber);</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">        ++RPONumber;</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">      LiveIn.init(RPONumber);</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><span class="doxyHighlight">      LiveOut.init(RPONumber);</span></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Perform the traversal.</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This is a standard &quot;intersect of predecessor outs&quot; dataflow problem. To</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// solve it, we perform meet() and process() using the two worklist method</span></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// until the LiveIn data for each block becomes unchanging.</span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This dataflow is essentially working on maps of sets and at each meet we</span></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// intersect the maps and the mapped sets. So, initialized live-in maps</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// monotonically decrease in value throughout the dataflow.</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> Visited;</span></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!Worklist.empty() || !Pending.empty()) &#123;</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We track what is on the pending worklist to avoid inserting the same</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// thing twice.  We could avoid this with a custom priority queue, but</span></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// this is probably not worth it.</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> OnPending;</span></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Processing Worklist\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!Worklist.empty()) &#123;</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB = OrderToBB&#91;Worklist.top()&#93;;</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\nPop BB &quot;</span><span class="doxyHighlight"> &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">        Worklist.pop();</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InChanged = meet(&#42;BB, Visited);</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Always consider LiveIn changed on the first visit.</span></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">        InChanged |= Visited.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(BB).second;</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (InChanged) &#123;</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">                     &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has new InLocs, process it\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">//  Mutate a copy of LiveIn while processing BB. Once we&#39;ve processed</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">//  the terminator LiveSet is the LiveOut set for BB.</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">//  This is an expensive copy!</span></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">          VarFragMap LiveSet = LiveIn&#91;BB&#93;;</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Process the instructions in the block.</span></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">          process(&#42;BB, LiveSet);</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Relatively expensive check: has anything changed in LiveOut for BB?</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!varFragMapsAreEqual(LiveOut&#91;BB&#93;, LiveSet)) &#123;</span></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; BB-&gt;getName()</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">                              &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has new OutLocs, add succs to worklist: &#91; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><span class="doxyHighlight">            LiveOut&#91;BB&#93; = std::move(LiveSet);</span></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Succ : <a href="/docs/api/namespaces/llvm/#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(BB)) &#123;</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OnPending.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(Succ).second) &#123;</span></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">                <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Succ-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">                Pending.push(BBToOrder&#91;Succ&#93;);</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><span class="doxyHighlight">              &#125;</span></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">      Worklist.swap(Pending);</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// At this point, pending must be empty, since it was just the empty</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// worklist</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pending.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Pending should be empty&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Insert new location defs.</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Pair : BBInsertBeforeMap) &#123;</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">      InsertMap &amp;Map = Pair.second;</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Pair : Map) &#123;</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsertBefore = Pair.first;</span></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;should never be null&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FragMemLocs = Pair.second;</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Ctx = Fn.getContext();</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FragMemLoc : FragMemLocs) &#123;</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;Expr = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(Ctx, &#123;&#125;);</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FragMemLoc.SizeInBits !=</span></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">              &#42;Aggregates&#91;FragMemLoc.Var&#93;.first-&gt;getSizeInBits())</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">            Expr = &#42;<a href="/docs/api/classes/llvm/diexpression/#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">                Expr, FragMemLoc.OffsetInBits, FragMemLoc.SizeInBits);</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">          Expr = <a href="/docs/api/classes/llvm/diexpression/#ab804b15bb92ff685d7c1464b2816d608">DIExpression::prepend</a>(Expr, <a href="/docs/api/classes/llvm/diexpression/#a6472489551b8960cc115a93d95eef9f6a9778207fdbedcd56192301c38b5ffe4c">DIExpression::DerefAfter</a>,</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">                                       FragMemLoc.OffsetInBits / 8);</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var(Aggregates&#91;FragMemLoc.Var&#93;.first, Expr,</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">                            FragMemLoc.DL.getInlinedAt());</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><span class="doxyHighlight">          FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#af6e3c63d3b0c045ac17a629271c3f981">addVarLoc</a>(InsertBefore, Var, Expr, FragMemLoc.DL,</span></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">                               Bases&#91;FragMemLoc.Base&#93;);</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><span class="doxyHighlightComment">/// AssignmentTrackingLowering encapsulates a dataflow analysis over a function</span></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlightComment">/// that interprets assignment tracking debug info metadata and stores in IR to</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlightComment">/// create a map of variable locations.</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a14796ed9d9b5b6770e2a62108feca587">AssignmentTrackingLowering</a> &#123;</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlightComment">  /// The kind of location in use for a variable, where Mem is the stack home,</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><span class="doxyHighlightComment">  /// Val is an SSA value or const, and None means that there is not one single</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><span class="doxyHighlightComment">  /// kind (either because there are multiple or because there is none; it may</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlightComment">  /// prove useful to split this into two values in the future).</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><span class="doxyHighlightComment">  /// LocKind is a join-semilattice with the partial order:</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><span class="doxyHighlightComment">  /// None &gt; Mem, Val</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlightComment">  /// i.e.</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><span class="doxyHighlightComment">  /// join(Mem, Mem)   = Mem</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlightComment">  /// join(Val, Val)   = Val</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><span class="doxyHighlightComment">  /// join(Mem, Val)   = None</span></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><span class="doxyHighlightComment">  /// join(None, Mem)  = None</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlightComment">  /// join(None, Val)  = None</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><span class="doxyHighlightComment">  /// join(None, None) = None</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlightComment">  /// Note: the order is not &#96;None &gt; Val &gt; Mem&#96; because we&#39;re using DIAssignID</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlightComment">  /// to name assignments and are not tracking the actual stored values.</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlightComment">  /// Therefore currently there&#39;s no way to ensure that Mem values and Val</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlightComment">  /// values are the same. This could be a future extension, though it&#39;s not</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><span class="doxyHighlightComment">  /// clear that many additional locations would be recovered that way in</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><span class="doxyHighlightComment">  /// practice as the likelihood of this sitation arising naturally seems</span></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><span class="doxyHighlightComment">  /// incredibly low.</span></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum class</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">LocKind</a> &#123; <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4cadba5553473d129a7985fb532dc249ff4">Mem</a>, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca6adf97f83acf6453d4a6a4b1070f3754">None</a> &#125;;</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><span class="doxyHighlightComment">  /// An abstraction of the assignment of a value to a variable or memory</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlightComment">  /// location.</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlightComment">  /// An Assignment is Known or NoneOrPhi. A Known Assignment means we have a</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlightComment">  /// DIAssignID ptr that represents it. NoneOrPhi means that we don&#39;t (or</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlightComment">  /// can&#39;t) know the ID of the last assignment that took place.</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><span class="doxyHighlightComment">  /// The Status of the Assignment (Known or NoneOrPhi) is another</span></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlightComment">  /// join-semilattice. The partial order is:</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlightComment">  /// NoneOrPhi &gt; Known &#123;id&#95;0, id&#95;1, ...id&#95;N&#125;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlightComment">  /// i.e. for all values x and y where x != y:</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlightComment">  /// join(x, x) = x</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><span class="doxyHighlightComment">  /// join(x, y) = NoneOrPhi</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignRecord</a> = <a href="/docs/api/classes/llvm/pointerunion">PointerUnion&lt;DbgAssignIntrinsic &#42;, DbgVariableRecord &#42;&gt;</a>;</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> &#123;</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37">S</a> &#123; <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80">Known</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a> &#125; <a href="/docs/api/structs/status">Status</a>;</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><span class="doxyHighlightComment">    /// ID of the assignment. nullptr if Status is not Known.</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>;</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlightComment">    /// The dbg.assign that marks this dbg-def. Mem-defs don&#39;t use this field.</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlightComment">    /// May be nullptr.</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignRecord</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>;</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a354b6b336f4193f8a354603ac951efab"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a354b6b336f4193f8a354603ac951efab">isSameSourceAssignment</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> &amp;<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Don&#39;t include Source in the equality check. Assignments are</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// defined by their ID, not debug intrinsic(s).</span></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::tie(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>) == std::tie(<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.Status, <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.ID);</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abd851ad0d07e3d593c4e43426466d0fa"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abd851ad0d07e3d593c4e43426466d0fa">dump</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS) &#123;</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/typesanitizer-cpp/#a0661fa53f121c3867414fb9f357877ce">LUT</a>&#91;&#93; = &#123;</span><span class="doxyHighlightStringLiteral">&quot;Known&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;NoneOrPhi&quot;</span><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">      OS &lt;&lt; <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/typesanitizer-cpp/#a0661fa53f121c3867414fb9f357877ce">LUT</a>&#91;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>&#93; &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;(id=&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>)</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">        OS &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>;</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">        OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;null&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">      OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, s=&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>.isNull())</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">        OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;null&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DAI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgAssignIntrinsic &#42;&gt;</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>))</span></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">        OS &lt;&lt; DAI;</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">        OS &lt;&lt; cast&lt;DbgVariableRecord &#42;&gt;(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>);</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">      OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a2f3b81277b8f57e0e193e1c0e2790b4e"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a2f3b81277b8f57e0e193e1c0e2790b4e">make</a>(<a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80">Known</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>);</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#ab56355123d9093fbad275613337e89b2"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#ab56355123d9093fbad275613337e89b2">make</a>(<a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>-&gt;isDbgAssign() &amp;&amp;</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Cannot make an assignment from a non-assign DbgVariableRecord&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80">Known</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>);</span></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3581514494512e717931190fe03e16a6"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3581514494512e717931190fe03e16a6">make</a>(<a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignRecord</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80">Known</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>);</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a7735613e5652dc0092309e010595765c"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a7735613e5652dc0092309e010595765c">makeFromMemDef</a>(<a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>) &#123;</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37a337f66323e1ef698ba8d2fa2f6da0a80">Known</a>, <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>);</span></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a98624da04f54c27421b7672cac23058e"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a98624da04f54c27421b7672cac23058e">makeNoneOrPhi</a>() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">); &#125;</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Again, need a Top value?</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a1047315173ed113516150f943dc60909">Assignment</a>() : <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>(nullptr) &#123;&#125; </span><span class="doxyHighlightComment">// Can we delete this?</span></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a881a804cdd4b480a0f182a82562d981b"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a881a804cdd4b480a0f182a82562d981b">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37">S</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>, <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>) : <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>) &#123;</span></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the Status is Known then we expect there to be an assignment ID.</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a> == <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a> || <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>);</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a639353a45059847f2fc2d58e2fbd5eaa"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a639353a45059847f2fc2d58e2fbd5eaa">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37">S</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>, <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>)</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">        : <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the Status is Known then we expect there to be an assignment ID.</span></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a> == <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a> || <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>);</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a5e58ba2c01521e4826f59b2bddf24a2d"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a5e58ba2c01521e4826f59b2bddf24a2d">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37">S</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>, <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>)</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">        : <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the Status is Known then we expect there to be an assignment ID.</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a> == <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a> || <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>);</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093" lineLink="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a9162ea946a725f1ba4c1f02d3da7e255"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a9162ea946a725f1ba4c1f02d3da7e255">Assignment</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37">S</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>, <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignRecord</a> <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>)</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><span class="doxyHighlight">        : <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>), <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#af7f1739e77768704c0c237baa28c75a2">Source</a>) &#123;</span></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the Status is Known then we expect there to be an assignment ID.</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a3424e3ea7d6754b253f9b0b4ab170117">Status</a> == <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#abe986379b474452b965609af220a8b37adeee1ac4ac7bce8d1d036bc7611229ff">NoneOrPhi</a> || <a href="/docs/api/structs/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/assignment/#a656e9dbd544f37c1c1c1151ff0185e20">ID</a>);</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#aecd3fbed2e4d7501952b5de23ba8aba8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#aecd3fbed2e4d7501952b5de23ba8aba8">AssignmentMap</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Assignment&gt;</a>;</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#afadbf47f53cfe3d4eb25a3cb1e53b19d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#afadbf47f53cfe3d4eb25a3cb1e53b19d">LocMap</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;LocKind&gt;</a>;</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c">OverlapMap</a> = <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;VariableID, SmallVector&lt;VariableID&gt;</a>&gt;;</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0dcaf963c14e849c62941b7f402bf74e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0dcaf963c14e849c62941b7f402bf74e">UntaggedStoreAssignmentMap</a> =</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt;</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;,</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><span class="doxyHighlight">               <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;VariableID, at::AssignmentInfo&gt;</a>&gt;&gt;;</span></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlightComment">  /// The highest numbered VariableID for partially promoted variables plus 1,</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlightComment">  /// the values for which start at 1</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TrackedVariablesVectorSize = 0;</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><span class="doxyHighlightComment">  /// Map a variable to the set of variables that it fully contains.</span></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c">OverlapMap</a> VarContains;</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlightComment">  /// Map untagged stores to the variable fragments they assign to. Used by</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlightComment">  /// processUntaggedInstruction.</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0dcaf963c14e849c62941b7f402bf74e">UntaggedStoreAssignmentMap</a> UntaggedStoreVars;</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Machinery to defer inserting dbg.values.</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">InstInsertMap = <a href="/docs/api/classes/llvm/mapvector">MapVector&lt;VarLocInsertPt, SmallVector&lt;VarLocInfo&gt;</a>&gt;;</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlight">  InstInsertMap InsertBeforeMap;</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlightComment">  /// Clear the location definitions currently cached for insertion after /p</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><span class="doxyHighlightComment">  /// After.</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> resetInsertionPoint(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> resetInsertionPoint(<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// emitDbgValue can be called with:</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Source=&#91;AssignRecord|DbgValueInst&#42;|DbgAssignIntrinsic&#42;|DbgVariableRecord&#42;&#93;</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Since AssignRecord can be cast to one of the latter two types, and all</span></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// other types have a shared interface, we use a template to handle the latter</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// three types, and an explicit overload for AssignRecord that forwards to</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the template version with the right type.</span></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> emitDbgValue(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">LocKind</a> Kind, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignRecord</a> Source, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> T&gt;</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> emitDbgValue(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">LocKind</a> Kind, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> T Source, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> mapsAreEqual(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/bitvector">BitVector</a> &amp;Mask, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#aecd3fbed2e4d7501952b5de23ba8aba8">AssignmentMap</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#aecd3fbed2e4d7501952b5de23ba8aba8">AssignmentMap</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all&#95;of</a>(Mask.set&#95;bits(), &#91;&amp;&#93;(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a07ea053ea2cdbee8e68ebd607c26dc8a">VarID</a>) &#123;</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><span class="doxyHighlight">      return A&#91;VarID&#93;.isSameSourceAssignment(B&#91;VarID&#93;);</span></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">    &#125;);</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlightComment">  /// Represents the stack and debug assignments in a block. Used to describe</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlightComment">  /// the live-in and live-out values for blocks, as well as the &quot;current&quot;</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlightComment">  /// value as we process each instruction in a block.</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight">BlockInfo &#123;</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlightComment">    /// The set of variables (VariableID) being tracked in this block.</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/bitvector">BitVector</a> VariableIDsInBlock;</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><span class="doxyHighlightComment">    /// Dominating assignment to memory for each variable, indexed by</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlightComment">    /// VariableID.</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">    AssignmentMap StackHomeValue;</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlightComment">    /// Dominating assignemnt to each variable, indexed by VariableID.</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">    AssignmentMap DebugValue;</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlightComment">    /// Location kind for each variable. LiveLoc indicates whether the</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlightComment">    /// dominating assignment in StackHomeValue (LocKind::Mem), DebugValue</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlightComment">    /// (LocKind::Val), or neither (LocKind::None) is valid, in that order of</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlightComment">    /// preference. This cannot be derived by inspecting DebugValue and</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><span class="doxyHighlightComment">    /// StackHomeValue due to the fact that there&#39;s no distinction in</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><span class="doxyHighlightComment">    /// Assignment (the class) between whether an assignment is unknown or a</span></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><span class="doxyHighlightComment">    /// merge of multiple assignments (both are Status::NoneOrPhi). In other</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlightComment">    /// words, the memory location may well be valid while both DebugValue and</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlightComment">    /// StackHomeValue contain Assignments that have a Status of NoneOrPhi.</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlightComment">    /// Indexed by VariableID.</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/livedebugvariables-cpp/#ab23073f2d9db5a8fc798c87b46f1795a">LocMap</a> LiveLoc;</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> AssignmentKind &#123; Stack, <a href="/docs/api/files/lib/lib/support/debug-cpp/#a3fd0c3ac7c0e9187aa5c690ef9c70ebe">Debug</a> &#125;;</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> AssignmentMap &amp;getAssignmentMap(AssignmentKind Kind)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Kind) &#123;</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Stack:</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> StackHomeValue;</span></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/debug-cpp/#a3fd0c3ac7c0e9187aa5c690ef9c70ebe">Debug</a>:</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DebugValue;</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unknown AssignmentKind&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">    AssignmentMap &amp;getAssignmentMap(AssignmentKind Kind) &#123;</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const&#95;cast&lt;</span><span class="doxyHighlight">AssignmentMap &amp;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight">BlockInfo &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">)-&gt;getAssignmentMap(Kind));</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isVariableTracked(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VariableIDsInBlock&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93;;</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;getAssignment(AssignmentKind Kind, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isVariableTracked(Var) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Var not tracked in block&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> getAssignmentMap(Kind)&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93;;</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><span class="doxyHighlight">    LocKind getLocKind(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isVariableTracked(Var) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Var not tracked in block&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LiveLoc&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93;;</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlightComment">    /// Set LocKind for \\p Var only: does not set LocKind for VariableIDs of</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlightComment">    /// fragments contained win \\p Var.</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> setLocKind(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, LocKind K) &#123;</span></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">      VariableIDsInBlock.<a href="/docs/api/classes/llvm/bitvector/#a62237ebe27691377a942abe7446332ec">set</a>(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var));</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">      LiveLoc&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93; = K;</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlightComment">    /// Set the assignment in the \\p Kind assignment map for \\p Var only: does</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlightComment">    /// not set the assignment for VariableIDs of fragments contained win \\p</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlightComment">    /// Var.</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> setAssignment(AssignmentKind Kind, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV) &#123;</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">      VariableIDsInBlock.<a href="/docs/api/classes/llvm/bitvector/#a62237ebe27691377a942abe7446332ec">set</a>(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var));</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">      getAssignmentMap(Kind)&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93; = AV;</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlightComment">    /// Return true if there is an assignment matching \\p AV in the \\p Kind</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlightComment">    /// assignment map. Does consider assignments for VariableIDs of fragments</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlightComment">    /// contained win \\p Var.</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> hasAssignment(AssignmentKind Kind, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!isVariableTracked(Var))</span></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AV.isSameSourceAssignment(getAssignment(Kind, Var));</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlightComment">    /// Compare every element in each map to determine structural equality</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlightComment">    /// (slow).</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a4d812a2dd18aa186c164447e20e348e7">operator==</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VariableIDsInBlock == <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.VariableIDsInBlock &amp;&amp;</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">             LiveLoc == <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.LiveLoc &amp;&amp;</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><span class="doxyHighlight">             mapsAreEqual(VariableIDsInBlock, StackHomeValue,</span></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">                          <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.StackHomeValue) &amp;&amp;</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlight">             mapsAreEqual(VariableIDsInBlock, DebugValue, <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>.DebugValue);</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a2f883c895f4d244f4ed56ed8a8c160c1">operator!=</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight"> == <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>); &#125;</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/demangle/rustdemangle-cpp/#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &#123;</span></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LiveLoc.size() == DebugValue.size() &amp;&amp;</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">             LiveLoc.size() == StackHomeValue.size();</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlightComment">    /// Clear everything and initialise with ⊤-values for all variables.</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">init</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumVars) &#123;</span></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">      StackHomeValue.clear();</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><span class="doxyHighlight">      DebugValue.clear();</span></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">      LiveLoc.<a href="/docs/api/classes/llvm/intervalmap/#aecbd7712a5e471d6821af772a8e55f85">clear</a>();</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><span class="doxyHighlight">      VariableIDsInBlock = BitVector(NumVars);</span></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><span class="doxyHighlight">      StackHomeValue.insert(StackHomeValue.begin(), NumVars,</span></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">                            Assignment::makeNoneOrPhi());</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">      DebugValue.insert(DebugValue.begin(), NumVars,</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><span class="doxyHighlight">                        Assignment::makeNoneOrPhi());</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">      LiveLoc.<a href="/docs/api/classes/llvm/intervalmap/#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>(LiveLoc.<a href="/docs/api/classes/llvm/intervalmap/#a30a86f92a3d8d04852d53bfd89ce89c2">begin</a>(), NumVars, LocKind::None);</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlightComment">    /// Helper for join.</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> ElmtType, </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> FnInputType&gt;</span></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> joinElmt(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> Index, <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;ElmtType&gt;</a> &amp;Target,</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;ElmtType&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;ElmtType&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">                         ElmtType (&#42;Fn)(FnInputType, FnInputType)) &#123;</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/exp/#af7592dc94276d1958420bcfb414b6998">Target</a>&#91;<a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a>&#93; = Fn(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#91;Index&#93;, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>&#91;Index&#93;);</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlightComment">    /// See comment for AssignmentTrackingLowering::joinBlockInfo.</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> BlockInfo <a href="/docs/api/namespaces/llvm/#aa1fd1719afe5b07ebe55f1d105c98916">join</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumVars) &#123;</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Join A and B.</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Intersect = join(a, b) for a in A, b in B where Var(a) == Var(b)</span></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Difference = join(x, ⊤) for x where Var(x) is in A xor B</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Join = Intersect ∪ Difference</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This is achieved by performing a join on elements from A and B with</span></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// variables common to both A and B (join elements indexed by var</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// intersect), then adding ⊤-value elements for vars in A xor B. The</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// latter part is equivalent to performing join on elements with variables</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// in A xor B with the ⊤-value for the map element since join(x, ⊤) = ⊤.</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// BlockInfo::init initializes all variable entries to the ⊤ value so we</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// don&#39;t need to explicitly perform that step as Join.VariableIDsInBlock</span></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// is set to the union of the variables in A and B at the end of this</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// function.</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">      BlockInfo Join;</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">      Join.init(NumVars);</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">      BitVector Intersect = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.VariableIDsInBlock;</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">      Intersect &amp;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.VariableIDsInBlock;</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a07ea053ea2cdbee8e68ebd607c26dc8a">VarID</a> : Intersect.<a href="/docs/api/classes/llvm/bitvector/#aa56c07cdb4f03ddef7dfdf460811d36e">set&#95;bits</a>()) &#123;</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><span class="doxyHighlight">        joinElmt(<a href="/docs/api/namespaces/llvm/#a07ea053ea2cdbee8e68ebd607c26dc8a">VarID</a>, Join.LiveLoc, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.LiveLoc, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.LiveLoc, joinKind);</span></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">        joinElmt(<a href="/docs/api/namespaces/llvm/#a07ea053ea2cdbee8e68ebd607c26dc8a">VarID</a>, Join.DebugValue, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.DebugValue, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.DebugValue,</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><span class="doxyHighlight">                 joinAssignment);</span></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">        joinElmt(<a href="/docs/api/namespaces/llvm/#a07ea053ea2cdbee8e68ebd607c26dc8a">VarID</a>, Join.StackHomeValue, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.StackHomeValue, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.StackHomeValue,</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">                 joinAssignment);</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">      Join.VariableIDsInBlock = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.VariableIDsInBlock;</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">      Join.VariableIDsInBlock |= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.VariableIDsInBlock;</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.isValid());</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Join;</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/codeview/#adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261">Function</a> &amp;Fn;</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DataLayout &amp;Layout;</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DenseSet&lt;DebugAggregate&gt; &#42;VarsWithStackSlot;</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><span class="doxyHighlight">  FunctionVarLocsBuilder &#42;FnVarLocs;</span></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlight">  DenseMap&lt;const BasicBlock &#42;, BlockInfo&gt; LiveIn;</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><span class="doxyHighlight">  DenseMap&lt;const BasicBlock &#42;, BlockInfo&gt; LiveOut;</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlightComment">  /// Helper for process methods to track variables touched each frame.</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">  DenseSet&lt;VariableID&gt; VarsTouchedThisFrame;</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><span class="doxyHighlightComment">  /// The set of variables that sometimes are not located in their stack home.</span></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">  DenseSet&lt;DebugAggregate&gt; NotAlwaysStackHomed;</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> getVariableID(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DebugVariable &amp;Var) &#123;</span></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(Var));</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlightComment">  /// Join the LiveOut values of preds that are contained in \\p Visited into</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlightComment">  /// LiveIn&#91;BB&#93;. Return True if LiveIn&#91;BB&#93; has changed as a result. LiveIn&#91;BB&#93;</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlightComment">  /// values monotonically increase. See the @link joinMethods join methods</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlightComment">  /// @endlink documentation for more info.</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aa1fd1719afe5b07ebe55f1d105c98916">join</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BasicBlock &amp;BB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> SmallPtrSet&lt;BasicBlock &#42;, 16&gt; &amp;Visited);</span></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><span class="doxyHighlightComment">  ///@name joinMethods</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlightComment">  /// Functions that implement &#96;join&#96; (the least upper bound) for the</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlightComment">  /// join-semilattice types used in the dataflow. There is an explicit bottom</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlightComment">  /// value (⊥) for some types and and explicit top value (⊤) for all types.</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlightComment">  /// By definition:</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlightComment">  ///     Join(A, B) &gt;= A &amp;&amp; Join(A, B) &gt;= B</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlightComment">  ///     Join(A, ⊥) = A</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><span class="doxyHighlightComment">  ///     Join(A, ⊤) = ⊤</span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><span class="doxyHighlightComment">  /// These invariants are important for monotonicity.</span></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlightComment">  /// For the map-type functions, all unmapped keys in an empty map are</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlightComment">  /// associated with a bottom value (⊥). This represents their values being</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlightComment">  /// unknown. Unmapped keys in non-empty maps (joining two maps with a key</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlightComment">  /// only present in one) represents either a variable going out of scope or</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlightComment">  /// dropped debug info. It is assumed the key is associated with a top value</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlightComment">  /// (⊤) in this case (unknown location / assignment).</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlightComment">  ///@&#123;</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> LocKind joinKind(LocKind <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, LocKind <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> Assignment joinAssignment(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">  BlockInfo joinBlockInfo(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlightComment">  ///@&#125;</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlightComment">  /// Process the instructions in \\p BB updating \\p LiveSet along the way. \\p</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlightComment">  /// LiveSet must be initialized with the current live-in locations before</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlightComment">  /// calling this.</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> process(BasicBlock &amp;BB, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlightComment">  ///@name processMethods</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlightComment">  /// Methods to process instructions in order to update the LiveSet (current</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><span class="doxyHighlightComment">  /// location information).</span></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlightComment">  ///@&#123;</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processNonDbgInstruction(Instruction &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processDbgInstruction(DbgInfoIntrinsic &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><span class="doxyHighlightComment">  /// Update \\p LiveSet after encountering an instruction with a DIAssignID</span></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlightComment">  /// attachment, \\p I.</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processTaggedInstruction(Instruction &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><span class="doxyHighlightComment">  /// Update \\p LiveSet after encountering an instruciton without a DIAssignID</span></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlightComment">  /// attachment, \\p I.</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processUntaggedInstruction(Instruction &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processDbgAssign(AssignRecord Assign, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processDbgVariableRecord(DbgVariableRecord &amp;DVR, BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> processDbgValue(</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><span class="doxyHighlight">      PointerUnion&lt;DbgValueInst &#42;, DbgVariableRecord &#42;&gt; DbgValueRecord,</span></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">      BlockInfo &#42;LiveSet);</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlightComment">  /// Add an assignment to memory for the variable /p Var.</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> addMemDef(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV);</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><span class="doxyHighlightComment">  /// Add an assignment to the variable /p Var.</span></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> addDbgDef(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV);</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlightComment">  ///@&#125;</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><span class="doxyHighlightComment">  /// Set the LocKind for \\p Var.</span></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> setLocKind(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, LocKind K);</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlightComment">  /// Get the live LocKind for a \\p Var. Requires addMemDef or addDbgDef to</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlightComment">  /// have been called for \\p Var first.</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">  LocKind getLocKind(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var);</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><span class="doxyHighlightComment">  /// Return true if \\p Var has an assignment in \\p M matching \\p AV.</span></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> hasVarWithAssignment(BlockInfo &#42;LiveSet, BlockInfo::AssignmentKind Kind,</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">                            <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV);</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlightComment">  /// Return the set of VariableIDs corresponding the fragments contained fully</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlightComment">  /// within the variable/fragment \\p Var.</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#ab9c6b351507d3c0730f4290919d43a12">ArrayRef&lt;VariableID&gt;</a> getContainedFragments(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlightComment">  /// Mark \\p Var as having been touched this frame. Note, this applies only</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlightComment">  /// to the exact fragment \\p Var and not to any fragments contained within.</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> touchFragment(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var);</span></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlightComment">  /// Emit info for variables that are fully promoted.</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> emitPromotedVarLocs(FunctionVarLocsBuilder &#42;FnVarLocs);</span></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a14796ed9d9b5b6770e2a62108feca587"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a14796ed9d9b5b6770e2a62108feca587">AssignmentTrackingLowering</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;Layout,</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">                             </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> &#42;VarsWithStackSlot)</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">      : Fn(Fn), Layout(Layout), VarsWithStackSlot(VarsWithStackSlot) &#123;&#125;</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlightComment">  /// Run the analysis, adding variable location info to \\p FnVarLocs. Returns</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlightComment">  /// true if any variable locations have been added to FnVarLocs.</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> run(<a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs);</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;VariableID&gt;</a></span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">AssignmentTrackingLowering::getContainedFragments(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = VarContains.find(Var);</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (R == VarContains.end())</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;&#125;;</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second;</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::touchFragment(<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var) &#123;</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">  VarsTouchedThisFrame.insert(Var);</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::setLocKind(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">                                            LocKind K) &#123;</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SetKind = &#91;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">&#93;(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, LocKind <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a>) &#123;</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">    LiveSet-&gt;setLocKind(Var, K);</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">    touchFragment(Var);</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><span class="doxyHighlight">  SetKind(LiveSet, Var, K);</span></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update the LocKind for all fragments contained within Var.</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : getContainedFragments(Var))</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">    SetKind(LiveSet, Frag, K);</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a></span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">AssignmentTrackingLowering::getLocKind(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var) &#123;</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LiveSet-&gt;getLocKind(Var);</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::addMemDef(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV) &#123;</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">  LiveSet-&gt;setAssignment(BlockInfo::Stack, Var, AV);</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use this assigment for all fragments contained within Var, but do not</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// provide a Source because we cannot convert Var&#39;s value to a value for the</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// fragment.</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">  Assignment FragAV = AV;</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><span class="doxyHighlight">  FragAV.Source = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : getContainedFragments(Var))</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">    LiveSet-&gt;setAssignment(BlockInfo::Stack, Frag, FragAV);</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::addDbgDef(BlockInfo &#42;LiveSet, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV) &#123;</span></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">  LiveSet-&gt;setAssignment(BlockInfo::Debug, Var, AV);</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use this assigment for all fragments contained within Var, but do not</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// provide a Source because we cannot convert Var&#39;s value to a value for the</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// fragment.</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlight">  Assignment FragAV = AV;</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlight">  FragAV.Source = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : getContainedFragments(Var))</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">    LiveSet-&gt;setAssignment(BlockInfo::Debug, Frag, FragAV);</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454" lineLink="#aada8fc5b8fc7766182eb823dcccdde6d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="#aada8fc5b8fc7766182eb823dcccdde6d">getIDFromInst</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DIAssignID&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD&#95;DIAssignID));</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458" lineLink="#a11c9d7e0af5de60f1e578c8d6a062eec"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="#a11c9d7e0af5de60f1e578c8d6a062eec">getIDFromMarker</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &amp;DAI) &#123;</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DIAssignID&gt;</a>(DAI.<a href="/docs/api/classes/llvm/dbgassignintrinsic/#a02edd19c26d06e2178aefca138a245bf">getAssignID</a>());</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462" lineLink="#a9dd6ae445190ac28162bea663717bf1a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/diassignid">DIAssignID</a> &#42;<a href="#a11c9d7e0af5de60f1e578c8d6a062eec">getIDFromMarker</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR) &#123;</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a8e44c4d5de5d1134497e3ca3b922c535">isDbgAssign</a>() &amp;&amp;</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Cannot get a DIAssignID from a non-assign DbgVariableRecord!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a4df534a195fe4df5fc7c2eaf2a96bd97">getAssignID</a>();</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlightComment">/// Return true if \\p Var has an assignment in \\p M matching \\p AV.</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AssignmentTrackingLowering::hasVarWithAssignment(</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><span class="doxyHighlight">    BlockInfo &#42;LiveSet, BlockInfo::AssignmentKind Kind, <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</span></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;AV) &#123;</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LiveSet-&gt;hasAssignment(Kind, Var, AV))</span></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check all the frags contained within Var as these will have all been</span></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// mapped to AV at the last store to Var.</span></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : getContainedFragments(Var))</span></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LiveSet-&gt;hasAssignment(Kind, Frag, AV))</span></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484" lineLink="#a617b13d89c1cb11a9270727255284b53"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;<a href="#a617b13d89c1cb11a9270727255284b53">locStr</a>(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a> <a href="/docs/api/namespaces/llvm/loc">Loc</a>) &#123;</span></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">LocKind = <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a>;</span></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/loc">Loc</a>) &#123;</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::Val:</span></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;Val&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::Mem:</span></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;Mem&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::None:</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;None&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;unknown LocKind&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498" lineLink="#a05eb84c8f630be406f61761013146574"><span class="doxyHighlight"><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dbgrecord">DbgRecord</a> &#42;DVR) &#123;</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NextIt = ++(DVR-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</span></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextIt == DVR-&gt;<a href="/docs/api/classes/llvm/dbgrecord/#aa1b7611e70113463caabc2bc84bd08bf">getMarker</a>()-&gt;<a href="/docs/api/classes/llvm/dbgmarker/#ac97b2d030b47783e5a1f334f0ad6f219">getDbgRecordRange</a>().end())</span></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DVR-&gt;<a href="/docs/api/classes/llvm/dbgrecord/#aa1b7611e70113463caabc2bc84bd08bf">getMarker</a>()-&gt;<a href="/docs/api/classes/llvm/dbgmarker/#a36e5e8e39d6d654db719920186533fac">MarkedInstr</a>;</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &amp;&#42;NextIt;</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504" lineLink="#a9c681660f7ed1f72a0a5ff822d4f5e8e"><span class="doxyHighlight"><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Inst) &#123;</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = Inst-&gt;<a href="/docs/api/classes/llvm/ilist-node-with-parent/#a62ee7ece4986606d41363bc1f70d5ab2">getNextNode</a>();</span></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>-&gt;hasDbgRecords())</span></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>;</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &amp;&#42;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>-&gt;getDbgRecordRange().begin();</span></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510" lineLink="#a654cf90977e8e77e4b62672ea3936dcf"><span class="doxyHighlight"><a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(<a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> InsertPt) &#123;</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;const Instruction &#42;&gt;</a>(InsertPt))</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;const Instruction &#42;&gt;</a>(InsertPt));</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;const DbgRecord &#42;&gt;</a>(InsertPt));</span></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516" lineLink="#ab89ede590f1a89ea1b5b9cfd422d7c86"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;<a href="#ab89ede590f1a89ea1b5b9cfd422d7c86">CastToDbgAssign</a>(<a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42;DVI) &#123;</span></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgAssignIntrinsic&gt;</a>(DVI);</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520" lineLink="#a9c1515a9c974d17a89cbc1443a9b419c"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;<a href="#ab89ede590f1a89ea1b5b9cfd422d7c86">CastToDbgAssign</a>(<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;DVR) &#123;</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DVR-&gt;<a href="/docs/api/classes/llvm/dbgvariablerecord/#a8e44c4d5de5d1134497e3ca3b922c535">isDbgAssign</a>() &amp;&amp;</span></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Attempted to cast non-assign DbgVariableRecord to DVRAssign.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DVR;</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::emitDbgValue(</span></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a> Kind,</span></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a6e0b2146e9115e385d8e406b6c36e645">AssignmentTrackingLowering::AssignRecord</a> Source, <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>) &#123;</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgAssignIntrinsic &#42;&gt;</a>(Source))</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><span class="doxyHighlight">    emitDbgValue(Kind, <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgAssignIntrinsic &#42;&gt;</a>(Source), <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><span class="doxyHighlight">    emitDbgValue(Kind, <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgVariableRecord &#42;&gt;</a>(Source), <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> T&gt;</span></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a81d863ec17163a5dcedc09cb1a48aadf"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::emitDbgValue(</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a> Kind, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> T Source,</span></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><span class="doxyHighlight">    <a href="#a6c7f6b65820380603c12c83d4d3b620c">VarLocInsertPt</a> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>) &#123;</span></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Source-&gt;getDebugLoc();</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Emit = &#91;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, Source, <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>&#93;(<a href="/docs/api/classes/llvm/metadata">Metadata</a> &#42;<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>, <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;Expr) &#123;</span></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Expr);</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>)</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">      <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a> = <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/poisonvalue/#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a href="/docs/api/classes/llvm/type/#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Source-&gt;getContext())));</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Find a suitable insert point.</span></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsertBefore = <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>);</span></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Shouldn&#39;t be inserting after a terminator&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(Source));</span></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> VarLoc;</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a> = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var);</span></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a> = <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a>(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>);</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a> = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</span></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Insert it into the map for later.</span></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><span class="doxyHighlight">    InsertBeforeMap&#91;InsertBefore&#93;.push&#95;back(VarLoc);</span></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NOTE: This block can mutate Kind.</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Kind == <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4cadba5553473d129a7985fb532dc249ff4">LocKind::Mem</a>) &#123;</span></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Assign = <a href="#ab89ede590f1a89ea1b5b9cfd422d7c86">CastToDbgAssign</a>(Source);</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check the address hasn&#39;t been dropped (e.g. the debug uses may not have</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// been replaced before deleting a Value).</span></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Assign-&gt;isKillAddress()) &#123;</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The address isn&#39;t valid so treat this as a non-memory def.</span></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><span class="doxyHighlight">      Kind = <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">LocKind::Val</a>;</span></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a> = Assign-&gt;getAddress();</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;Expr = Assign-&gt;getAddressExpression();</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Expr-&gt;<a href="/docs/api/classes/llvm/diexpression/#a7cc5f1632a4c520497898439c17dc026">getFragmentInfo</a>() &amp;&amp;</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;fragment info should be stored in value-expression only&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Copy the fragment info over from the value-expression to the new</span></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// DIExpression.</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OptFragInfo = Source-&gt;getExpression()-&gt;getFragmentInfo()) &#123;</span></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FragInfo = &#42;OptFragInfo;</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">        Expr = &#42;<a href="/docs/api/classes/llvm/diexpression/#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><span class="doxyHighlight">            Expr, FragInfo.OffsetInBits, FragInfo.SizeInBits);</span></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The address-expression has an implicit deref, add it now.</span></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><span class="doxyHighlight">      std::tie(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>, Expr) =</span></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><span class="doxyHighlight">          <a href="#a0b1eb53b30ddeb8ebdccc60c0837300f">walkToAllocaAndPrependOffsetDeref</a>(Layout, <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>, Expr);</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">      Emit(<a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(<a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">Val</a>), Expr);</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Kind == <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca5988c20a047cfe063999787584b0aca7">LocKind::Val</a>) &#123;</span></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><span class="doxyHighlight">    Emit(Source-&gt;getRawLocation(), Source-&gt;getExpression());</span></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Kind == <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4ca6adf97f83acf6453d4a6a4b1070f3754">LocKind::None</a>) &#123;</span></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><span class="doxyHighlight">    Emit(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, Source-&gt;getExpression());</span></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processNonDbgInstruction(</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadata(LLVMContext::MD&#95;DIAssignID))</span></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlight">    processTaggedInstruction(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LiveSet);</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><span class="doxyHighlight">    processUntaggedInstruction(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LiveSet);</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processUntaggedInstruction(</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Interpret stack stores that are not tagged as an assignment in memory for</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the variables associated with that address. These stores may not be tagged</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// because a) the store cannot be represented using dbg.assigns (non-const</span></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// length or offset) or b) the tag was accidentally dropped during</span></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// optimisations. For these stores we fall back to assuming that the stack</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// home is a valid location for the variables. The benefit is that this</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// prevents us missing an assignment and therefore incorrectly maintaining</span></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// earlier location definitions, and in many cases it should be a reasonable</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// assumption. However, this will occasionally lead to slight</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// inaccuracies. The value of a hoisted untagged store will be visible</span></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &quot;early&quot;, for example.</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadata(LLVMContext::MD&#95;DIAssignID));</span></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = UntaggedStoreVars.find(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (It == UntaggedStoreVars.end())</span></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// No variables associated with the store destination.</span></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;processUntaggedInstruction on UNTAGGED INST &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a></span></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><span class="doxyHighlight">                    &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Iterate over the variables that this store affects, add a NoneOrPhi dbg</span></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and mem def, set lockind to Mem, and emit a location def for each.</span></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;Var, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>&#93; : It-&gt;second) &#123;</span></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This instruction is treated as both a debug and memory assignment,</span></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// meaning the memory location should be used. We don&#39;t have an assignment</span></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ID though so use Assignment::makeNoneOrPhi() to create an imaginary one.</span></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><span class="doxyHighlight">    addMemDef(LiveSet, Var, Assignment::makeNoneOrPhi());</span></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><span class="doxyHighlight">    addDbgDef(LiveSet, Var, Assignment::makeNoneOrPhi());</span></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><span class="doxyHighlight">    setLocKind(LiveSet, Var, LocKind::Mem);</span></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  setting Stack LocKind to: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="#a617b13d89c1cb11a9270727255284b53">locStr</a>(LocKind::Mem)</span></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Build the dbg location def to insert.</span></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// DIExpression: Add fragment and offset.</span></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> V = FnVarLocs-&gt;<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(Var);</span></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/diexpression">DIExpression</a> &#42;<a href="/docs/api/classes/llvm/die">DIE</a> = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getContext(), &#123;&#125;);</span></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Frag = V.getFragment()) &#123;</span></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/classes/llvm/diexpression/#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(<a href="/docs/api/classes/llvm/die">DIE</a>, Frag-&gt;OffsetInBits,</span></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><span class="doxyHighlight">                                                      Frag-&gt;SizeInBits);</span></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(R &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;unexpected createFragmentExpression failure&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/die">DIE</a> = &#42;R;</span></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint64&#95;t, 3&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</span></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OffsetInBits)</span></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a> = &#123;dwarf::DW&#95;OP&#95;plus&#95;uconst, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OffsetInBits / 8&#125;;</span></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(dwarf::DW&#95;OP&#95;deref);</span></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/die">DIE</a> = <a href="/docs/api/classes/llvm/diexpression/#af3a48df3735933cf1621760019e5fd8c">DIExpression::prependOpcodes</a>(<a href="/docs/api/classes/llvm/die">DIE</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, </span><span class="doxyHighlightComment">/&#42;StackValue=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><span class="doxyHighlight">                                       </span><span class="doxyHighlightComment">/&#42;EntryValue=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Find a suitable insert point, before the next instruction or DbgRecord</span></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// after I.</span></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsertBefore = <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Shouldn&#39;t be inserting after a terminator&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Get DILocation for this unrecorded assignment.</span></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;InlinedAt = </span><span class="doxyHighlightKeyword">const&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getInlinedAt());</span></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;DILoc = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(</span></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><span class="doxyHighlight">        Fn.getContext(), 0, 0, <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getVariable()-&gt;getScope(), InlinedAt);</span></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> VarLoc;</span></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a> = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a></span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var);</span></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = <a href="/docs/api/classes/llvm/die">DIE</a>;</span></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a> = <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a>(</span></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(</span><span class="doxyHighlightKeyword">const&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Base)));</span></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><span class="doxyHighlight">    VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a> = DILoc;</span></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 3 Insert it into the map for later.</span></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><span class="doxyHighlight">    InsertBeforeMap&#91;InsertBefore&#93;.push&#95;back(VarLoc);</span></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processTaggedInstruction(</span></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Linked = <a href="/docs/api/namespaces/llvm/at/#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LinkedDPAssigns = <a href="/docs/api/namespaces/llvm/at/#aa992dd7420a71df6149dd3437c949245">at::getDVRAssignmentMarkers</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// No dbg.assign intrinsics linked.</span></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: All vars that have a stack slot this store modifies that don&#39;t have</span></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// a dbg.assign linked to it should probably treat this like an untagged</span></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// store.</span></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Linked.empty() &amp;&amp; LinkedDPAssigns.empty())</span></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;processTaggedInstruction on &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ProcessLinkedAssign = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a185b7133db22230701a857c059360cc2">Assign</a>) &#123;</span></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(Assign));</span></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Something has gone wrong if VarsWithStackSlot doesn&#39;t contain a variable</span></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that is linked to a store.</span></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VarsWithStackSlot-&gt;count(<a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(Assign)) &amp;&amp;</span></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;expected Assign&#39;s variable to have stack slot&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><span class="doxyHighlight">    Assignment AV = Assignment::makeFromMemDef(<a href="#aada8fc5b8fc7766182eb823dcccdde6d">getIDFromInst</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><span class="doxyHighlight">    addMemDef(LiveSet, Var, AV);</span></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   linked to &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;Assign &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   LiveLoc &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="#a617b13d89c1cb11a9270727255284b53">locStr</a>(getLocKind(LiveSet, Var))</span></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The last assignment to the stack is now AV. Check if the last debug</span></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// assignment has a matching Assignment.</span></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (hasVarWithAssignment(LiveSet, BlockInfo::Debug, Var, AV)) &#123;</span></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The StackHomeValue and DebugValue for this variable match so we can</span></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// emit a stack home location here.</span></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Mem, Stack matches Debug program\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   Stack val: &quot;</span><span class="doxyHighlight">; AV.dump(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   Debug val: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><span class="doxyHighlight">                 LiveSet-&gt;DebugValue&#91;</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Var)&#93;.dump(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</span></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><span class="doxyHighlight">      setLocKind(LiveSet, Var, LocKind::Mem);</span></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><span class="doxyHighlight">      emitDbgValue(LocKind::Mem, Assign, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The StackHomeValue and DebugValue for this variable do not match. I.e.</span></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The value currently stored in the stack is not what we&#39;d expect to</span></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// see, so we cannot use emit a stack home location here. Now we will</span></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// look at the live LocKind for the variable and determine an appropriate</span></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// dbg.value to emit.</span></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><span class="doxyHighlight">    LocKind PrevLoc = getLocKind(LiveSet, Var);</span></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (PrevLoc) &#123;</span></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::Val: &#123;</span></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The value in memory in memory has changed but we&#39;re not currently</span></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// using the memory location. Do nothing.</span></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Val, (unchanged)\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><span class="doxyHighlight">      setLocKind(LiveSet, Var, LocKind::Val);</span></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::Mem: &#123;</span></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// There&#39;s been an assignment to memory that we were using as a</span></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// location for this variable, and the Assignment doesn&#39;t match what</span></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// we&#39;d expect to see in memory.</span></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><span class="doxyHighlight">      Assignment DbgAV = LiveSet-&gt;getAssignment(BlockInfo::Debug, Var);</span></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DbgAV.Status == Assignment::NoneOrPhi) &#123;</span></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// We need to terminate any previously open location now.</span></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;None, No Debug value available\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><span class="doxyHighlight">        setLocKind(LiveSet, Var, LocKind::None);</span></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><span class="doxyHighlight">        emitDbgValue(LocKind::None, Assign, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// The previous DebugValue Value can be used here.</span></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Val, Debug value is Known\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><span class="doxyHighlight">        setLocKind(LiveSet, Var, LocKind::Val);</span></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DbgAV.Source) &#123;</span></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><span class="doxyHighlight">          emitDbgValue(LocKind::Val, DbgAV.Source, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// PrevAV.Source is nullptr so we must emit undef here.</span></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><span class="doxyHighlight">          emitDbgValue(LocKind::None, Assign, &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> LocKind::None: &#123;</span></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// There&#39;s been an assignment to memory and we currently are</span></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// not tracking a location for the variable. Do not emit anything.</span></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;None, (unchanged)\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><span class="doxyHighlight">      setLocKind(LiveSet, Var, LocKind::None);</span></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;DAI : Linked)</span></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><span class="doxyHighlight">    ProcessLinkedAssign(DAI);</span></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;DVR : LinkedDPAssigns)</span></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><span class="doxyHighlight">    ProcessLinkedAssign(DVR);</span></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processDbgAssign(AssignRecord Assign,</span></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><span class="doxyHighlight">                                                  BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ProcessDbgAssignImpl = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DbgAssign) &#123;</span></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Only bother tracking variables that are at some point stack homed. Other</span></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// variables can be dealt with trivially later.</span></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VarsWithStackSlot-&gt;count(<a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(DbgAssign)))</span></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(DbgAssign));</span></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><span class="doxyHighlight">    Assignment AV = Assignment::make(<a href="#a11c9d7e0af5de60f1e578c8d6a062eec">getIDFromMarker</a>(&#42;DbgAssign), DbgAssign);</span></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><span class="doxyHighlight">    addDbgDef(LiveSet, Var, AV);</span></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;processDbgAssign on &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;DbgAssign &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   LiveLoc &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="#a617b13d89c1cb11a9270727255284b53">locStr</a>(getLocKind(LiveSet, Var))</span></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check if the DebugValue and StackHomeValue both hold the same</span></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Assignment.</span></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (hasVarWithAssignment(LiveSet, BlockInfo::Stack, Var, AV)) &#123;</span></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// They match. We can use the stack home because the debug intrinsics</span></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// state that an assignment happened here, and we know that specific</span></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// assignment was the last one to take place in memory for this variable.</span></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><span class="doxyHighlight">      LocKind <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>;</span></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DbgAssign-&gt;isKillAddress()) &#123;</span></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><span class="doxyHighlight">                &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Val, Stack matches Debug program but address is killed\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = LocKind::Val;</span></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Mem, Stack matches Debug program\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = LocKind::Mem;</span></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><span class="doxyHighlight">      &#125;;</span></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><span class="doxyHighlight">      setLocKind(LiveSet, Var, Kind);</span></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><span class="doxyHighlight">      emitDbgValue(Kind, DbgAssign, DbgAssign);</span></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The last assignment to the memory location isn&#39;t the one that we want</span></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// to show to the user so emit a dbg.value(Value). Value may be undef.</span></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Val, Stack contents is unknown\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><span class="doxyHighlight">      setLocKind(LiveSet, Var, LocKind::Val);</span></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><span class="doxyHighlight">      emitDbgValue(LocKind::Val, DbgAssign, DbgAssign);</span></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableRecord &#42;&gt;</a>(Assign))</span></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ProcessDbgAssignImpl(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgVariableRecord &#42;&gt;</a>(Assign));</span></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ProcessDbgAssignImpl(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgAssignIntrinsic &#42;&gt;</a>(Assign));</span></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processDbgValue(</span></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/pointerunion">PointerUnion&lt;DbgValueInst &#42;, DbgVariableRecord &#42;&gt;</a> DbgValueRecord,</span></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><span class="doxyHighlight">    BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ProcessDbgValueImpl = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>) &#123;</span></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Only other tracking variables that are at some point stack homed.</span></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Other variables can be dealt with trivally later.</span></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VarsWithStackSlot-&gt;count(<a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>)))</span></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>));</span></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We have no ID to create an Assignment with so we mark this assignment as</span></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// NoneOrPhi. Note that the dbg.value still exists, we just cannot determine</span></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the assignment responsible for setting this value.</span></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This is fine; dbg.values are essentially interchangable with unlinked</span></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// dbg.assigns, and some passes such as mem2reg and instcombine add them to</span></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// PHIs for promoted variables.</span></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><span class="doxyHighlight">    Assignment AV = Assignment::makeNoneOrPhi();</span></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><span class="doxyHighlight">    addDbgDef(LiveSet, Var, AV);</span></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;processDbgValue on &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;);</span></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;   LiveLoc &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="#a617b13d89c1cb11a9270727255284b53">locStr</a>(getLocKind(LiveSet, Var))</span></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; Val, dbg.value override&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><span class="doxyHighlight">    setLocKind(LiveSet, Var, LocKind::Val);</span></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><span class="doxyHighlight">    emitDbgValue(LocKind::Val, <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>, <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>);</span></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableRecord &#42;&gt;</a>(DbgValueRecord))</span></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ProcessDbgValueImpl(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgVariableRecord &#42;&gt;</a>(DbgValueRecord));</span></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ProcessDbgValueImpl(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgValueInst &#42;&gt;</a>(DbgValueRecord));</span></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844" lineLink="#ad9b5e7d6058b3fa078f6cb70d02ba97c"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> T&gt; </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#ad9b5e7d6058b3fa078f6cb70d02ba97c">hasZeroSizedFragment</a>(<a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a> &amp;<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>) &#123;</span></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>.getExpression()-&gt;getFragmentInfo())</span></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;SizeInBits == 0;</span></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processDbgInstruction(</span></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/dbginfointrinsic">DbgInfoIntrinsic</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DVI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgVariableIntrinsic&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DVI)</span></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Ignore assignments to zero bits of the variable.</span></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ad9b5e7d6058b3fa078f6cb70d02ba97c">hasZeroSizedFragment</a>(&#42;DVI))</span></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DAI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgAssignIntrinsic&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><span class="doxyHighlight">    processDbgAssign(DAI, LiveSet);</span></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DVI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgValueInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><span class="doxyHighlight">    processDbgValue(DVI, LiveSet);</span></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::processDbgVariableRecord(</span></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR, AssignmentTrackingLowering::BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Ignore assignments to zero bits of the variable.</span></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ad9b5e7d6058b3fa078f6cb70d02ba97c">hasZeroSizedFragment</a>(DVR))</span></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a8e44c4d5de5d1134497e3ca3b922c535">isDbgAssign</a>())</span></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><span class="doxyHighlight">    processDbgAssign(&amp;DVR, LiveSet);</span></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a0d537737d355256948200ba969a44637">isDbgValue</a>())</span></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><span class="doxyHighlight">    processDbgValue(&amp;DVR, LiveSet);</span></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::resetInsertionPoint(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>) &#123;</span></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>.isTerminator() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Can&#39;t insert after a terminator&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = InsertBeforeMap.<a href="/docs/api/classes/llvm/mapvector/#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(<a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(&amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>));</span></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (R == InsertBeforeMap.<a href="/docs/api/classes/llvm/mapvector/#a0881334358ff6ff7ff8cea5562c7988e">end</a>())</span></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second.clear();</span></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::resetInsertionPoint(<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>) &#123;</span></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = InsertBeforeMap.<a href="/docs/api/classes/llvm/mapvector/#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(<a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(&amp;<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa7bfcadb5535fe8aad5032762b7bfe159">After</a>));</span></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (R == InsertBeforeMap.<a href="/docs/api/classes/llvm/mapvector/#a0881334358ff6ff7ff8cea5562c7988e">end</a>())</span></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second.clear();</span></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> AssignmentTrackingLowering::process(<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB, BlockInfo &#42;LiveSet) &#123;</span></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the block starts with DbgRecords, we need to process those DbgRecords as</span></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// their own frame without processing any instructions first.</span></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ProcessedLeadingDbgRecords = !BB.<a href="/docs/api/classes/llvm/basicblock/#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()-&gt;hasDbgRecords();</span></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> = BB.<a href="/docs/api/classes/llvm/basicblock/#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), EI = BB.<a href="/docs/api/classes/llvm/basicblock/#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> != EI;) &#123;</span></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VarsTouchedThisFrame.empty());</span></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Process the instructions in &quot;frames&quot;. A &quot;frame&quot; includes a single</span></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// non-debug instruction followed any debug instructions before the</span></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// next non-debug instruction.</span></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Skip the current instruction if it has unprocessed DbgRecords attached</span></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// (see comment above &#96;ProcessedLeadingDbgRecords&#96;).</span></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ProcessedLeadingDbgRecords) &#123;</span></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// II is now either a debug intrinsic, a non-debug instruction with no</span></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// attached DbgRecords, or a non-debug instruction with attached processed</span></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// DbgRecords.</span></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// II has not been processed.</span></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgInfoIntrinsic&gt;</a>(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>)) &#123;</span></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;isTerminator())</span></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><span class="doxyHighlight">        resetInsertionPoint(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</span></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><span class="doxyHighlight">        processNonDbgInstruction(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>, LiveSet);</span></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LiveSet-&gt;isValid());</span></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><span class="doxyHighlight">        ++<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</span></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// II is now either a debug intrinsic, a non-debug instruction with no</span></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// attached DbgRecords, or a non-debug instruction with attached unprocessed</span></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// DbgRecords.</span></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> != EI &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;hasDbgRecords()) &#123;</span></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip over non-variable debug records (i.e., labels). They&#39;re going to</span></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// be read from IR (possibly re-ordering them within the debug record</span></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// range) rather than from the analysis results.</span></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;getDbgRecordRange())) &#123;</span></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><span class="doxyHighlight">        resetInsertionPoint(DVR);</span></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><span class="doxyHighlight">        processDbgVariableRecord(DVR, LiveSet);</span></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LiveSet-&gt;isValid());</span></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><span class="doxyHighlight">    ProcessedLeadingDbgRecords = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> != EI) &#123;</span></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/pdb/#a2632601eef2a7254d0d50e82ba2ab620a198388745e9612237ea49ec52b8afdb5">Dbg</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgInfoIntrinsic&gt;</a>(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</span></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Dbg)</span></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><span class="doxyHighlight">      resetInsertionPoint(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</span></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><span class="doxyHighlight">      processDbgInstruction(&#42;Dbg, LiveSet);</span></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LiveSet-&gt;isValid());</span></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><span class="doxyHighlight">      ++<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</span></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// II is now a non-debug instruction either with no attached DbgRecords, or</span></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// with attached processed DbgRecords. II has not been processed, and all</span></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// debug instructions or DbgRecords in the frame preceding II have been</span></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// processed.</span></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;ve processed everything in the &quot;frame&quot;. Now determine which variables</span></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// cannot be represented by a dbg.declare.</span></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Var : VarsTouchedThisFrame) &#123;</span></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><span class="doxyHighlight">      LocKind <a href="/docs/api/namespaces/llvm/loc">Loc</a> = getLocKind(LiveSet, Var);</span></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If a variable&#39;s LocKind is anything other than LocKind::Mem then we</span></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// must note that it cannot be represented with a dbg.declare.</span></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Note that this check is enough without having to check the result of</span></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// joins() because for join to produce anything other than Mem after</span></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// we&#39;ve already seen a Mem we&#39;d be joining None or Val with Mem. In that</span></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// case, we&#39;ve already hit this codepath when we set the LocKind to Val</span></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// or None in that block.</span></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/loc">Loc</a> != LocKind::Mem) &#123;</span></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> DbgVar = FnVarLocs-&gt;<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(Var);</span></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><span class="doxyHighlight">        <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr&#123;DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), DbgVar.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>()&#125;;</span></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><span class="doxyHighlight">        NotAlwaysStackHomed.insert(Aggr);</span></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><span class="doxyHighlight">    VarsTouchedThisFrame.clear();</span></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a4012a71c02f4a13c5234aea48e772f4c">AssignmentTrackingLowering::LocKind</a></span></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><span class="doxyHighlight">AssignmentTrackingLowering::joinKind(LocKind <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, LocKind <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Partial order:</span></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// None &gt; Mem, Val</span></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> : LocKind::None;</span></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><span class="doxyHighlight">AssignmentTrackingLowering::Assignment</span></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><span class="doxyHighlight">AssignmentTrackingLowering::joinAssignment(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Assignment &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Partial order:</span></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NoneOrPhi(null, null) &gt; Known(v, ?s)</span></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If either are NoneOrPhi the join is NoneOrPhi.</span></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If either value is different then the result is</span></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NoneOrPhi (joining two values is a Phi).</span></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.isSameSourceAssignment(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Assignment::makeNoneOrPhi();</span></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Status == Assignment::NoneOrPhi)</span></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Assignment::makeNoneOrPhi();</span></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Source is used to lookup the value + expression in the debug program if</span></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the stack slot gets assigned a value earlier than expected. Because</span></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// we&#39;re only tracking the one dbg.assign, we can&#39;t capture debug PHIs.</span></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It&#39;s unlikely that we&#39;re losing out on much coverage by avoiding that</span></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// extra work.</span></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The Source may differ in this situation:</span></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pred.1:</span></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   dbg.assign i32 0, ..., !1, ...</span></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pred.2:</span></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   dbg.assign i32 1, ..., !1, ...</span></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Here the same assignment (!1) was performed in both preds in the source,</span></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// but we can&#39;t use either one unless they are identical (e.g. .we don&#39;t</span></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// want to arbitrarily pick between constant values).</span></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> JoinSource = &#91;&amp;&#93;() -&gt; AssignRecord &#123;</span></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Source)</span></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source;</span></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source || !<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Source)</span></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AssignRecord();</span></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source) ==</span></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><span class="doxyHighlight">           <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Source));</span></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source) &amp;&amp;</span></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgVariableRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source)-&gt;isEquivalentTo(</span></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><span class="doxyHighlight">            &#42;<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgVariableRecord &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Source)))</span></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source;</span></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgAssignIntrinsic &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source) &amp;&amp;</span></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgAssignIntrinsic &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source)-&gt;isIdenticalTo(</span></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;DbgAssignIntrinsic &#42;&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Source)))</span></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Source;</span></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AssignRecord();</span></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><span class="doxyHighlight">  AssignRecord <a href="/docs/api/namespaces/llvm/sched/#ab8d854a5ce2331586bcc6830cca52f0fac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = JoinSource();</span></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Status == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.Status &amp;&amp; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.Status == Assignment::Known);</span></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.ID == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.ID);</span></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Assignment::make(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.ID, Source);</span></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><span class="doxyHighlight">AssignmentTrackingLowering::BlockInfo</span></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><span class="doxyHighlight">AssignmentTrackingLowering::joinBlockInfo(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><span class="doxyHighlight">                                          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> BlockInfo::join(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, TrackedVariablesVectorSize);</span></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AssignmentTrackingLowering::join(</span></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;BB, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> &amp;Visited) &#123;</span></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const BasicBlock &#42;&gt;</a> VisitedPreds;</span></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Ignore backedges if we have not visited the predecessor yet. As the</span></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// predecessor hasn&#39;t yet had locations propagated into it, most locations</span></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// will not yet be valid, so treat them as all being uninitialized and</span></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// potentially valid. If a location guessed to be correct here is</span></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// invalidated later, we will remove it when we revisit this block. This</span></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is essentially the same as initialising all LocKinds and Assignments to</span></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// an implicit ⊥ value which is the identity value for the join operation.</span></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Pred : <a href="/docs/api/namespaces/llvm/#acb22fb04083152eee862457e42e8dc31">predecessors</a>(&amp;BB)) &#123;</span></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Visited.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Pred))</span></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><span class="doxyHighlight">      VisitedPreds.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Pred);</span></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// No preds visited yet.</span></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VisitedPreds.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>()) &#123;</span></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = LiveIn.try&#95;emplace(&amp;BB, BlockInfo());</span></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DidInsert = It.second;</span></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DidInsert)</span></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><span class="doxyHighlight">      It.first-&gt;second.init(TrackedVariablesVectorSize);</span></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed&#42;/</span><span class="doxyHighlight"> DidInsert;</span></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Exactly one visited pred. Copy the LiveOut from that pred into BB LiveIn.</span></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VisitedPreds.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1) &#123;</span></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;PredLiveOut = LiveOut.find(VisitedPreds&#91;0&#93;)-&gt;second;</span></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CurrentLiveInEntry = LiveIn.find(&amp;BB);</span></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check if there isn&#39;t an entry, or there is but the LiveIn set has</span></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// changed (expensive check).</span></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrentLiveInEntry == LiveIn.end())</span></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><span class="doxyHighlight">      LiveIn.insert(std::make&#95;pair(&amp;BB, PredLiveOut));</span></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredLiveOut != CurrentLiveInEntry-&gt;second)</span></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><span class="doxyHighlight">      CurrentLiveInEntry-&gt;second = PredLiveOut;</span></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// More than one pred. Join LiveOuts of blocks 1 and 2</span></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VisitedPreds.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt; 1);</span></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;PredLiveOut0 = LiveOut.find(VisitedPreds&#91;0&#93;)-&gt;second;</span></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> BlockInfo &amp;PredLiveOut1 = LiveOut.find(VisitedPreds&#91;1&#93;)-&gt;second;</span></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><span class="doxyHighlight">  BlockInfo BBLiveIn = joinBlockInfo(PredLiveOut0, PredLiveOut1);</span></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Join the LiveOuts of subsequent blocks.</span></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a href="/docs/api/namespaces/llvm/#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(VisitedPreds).drop&#95;front(2);</span></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Pred : <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cad6e9c0ff694f0fca0222e79e772b647e">Tail</a>) &#123;</span></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;PredLiveOut = LiveOut.find(Pred);</span></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredLiveOut != LiveOut.end() &amp;&amp;</span></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;block should have been processed already&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><span class="doxyHighlight">    BBLiveIn = joinBlockInfo(std::move(BBLiveIn), PredLiveOut-&gt;second);</span></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Save the joined result for BB.</span></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CurrentLiveInEntry = LiveIn.find(&amp;BB);</span></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if there isn&#39;t an entry, or there is but the LiveIn set has changed</span></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (expensive check).</span></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrentLiveInEntry == LiveIn.end())</span></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><span class="doxyHighlight">    LiveIn.try&#95;emplace(&amp;BB, std::move(BBLiveIn));</span></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BBLiveIn != CurrentLiveInEntry-&gt;second)</span></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><span class="doxyHighlight">    CurrentLiveInEntry-&gt;second = std::move(BBLiveIn);</span></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;Changed&#42;/</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><span class="doxyHighlightComment">/// Return true if A fully contains B.</span></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099" lineLink="#a42ed349a287ad53473602bc805a2fe78"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a42ed349a287ad53473602bc805a2fe78">fullyContains</a>(<a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><span class="doxyHighlight">                          <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ALeft = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.OffsetInBits;</span></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BLeft = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.OffsetInBits;</span></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BLeft &lt; ALeft)</span></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ARight = ALeft + <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.SizeInBits;</span></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BRight = BLeft + <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.SizeInBits;</span></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BRight &gt; ARight)</span></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::optional&lt;at::AssignmentInfo&gt;</span></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114" lineLink="#a4613ca285a8a0e95d35816a83b302a91"><span class="doxyHighlight"><a href="#a4613ca285a8a0e95d35816a83b302a91">getUntaggedStoreAssignmentInfo</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;Layout) &#123;</span></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Don&#39;t bother checking if this is an AllocaInst. We know this</span></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instruction has no tag which means there are no variables associated</span></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// with it.</span></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/si">SI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StoreInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/at/#acba9ed42400327fd80c5ec86803ca1f0">at::getAssignmentInfo</a>(Layout, <a href="/docs/api/namespaces/llvm/si">SI</a>);</span></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;MemIntrinsic&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</span></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/at/#acba9ed42400327fd80c5ec86803ca1f0">at::getAssignmentInfo</a>(Layout, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Alloca or non-store-like inst.</span></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::nullopt;</span></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126" lineLink="#afc77f1c086d1b0a5305e033551c42ad2"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/dbgdeclareinst">DbgDeclareInst</a> &#42;<a href="#afc77f1c086d1b0a5305e033551c42ad2">DynCastToDbgDeclare</a>(<a href="/docs/api/classes/llvm/dbgvariableintrinsic">DbgVariableIntrinsic</a> &#42;DVI) &#123;</span></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgDeclareInst&gt;</a>(DVI);</span></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130" lineLink="#a28e2e1ff2e4f02b18b4fdfc7d6c83ba5"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;<a href="#afc77f1c086d1b0a5305e033551c42ad2">DynCastToDbgDeclare</a>(<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;DVR) &#123;</span></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DVR-&gt;<a href="/docs/api/classes/llvm/dbgvariablerecord/#ac1678dcac1aa0255429f8dcee4ffabd2">isDbgDeclare</a>() ? DVR : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><span class="doxyHighlightComment">/// Build a map of &#123;Variable x: Variables y&#125; where all variable fragments</span></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><span class="doxyHighlightComment">/// contained within the variable fragment x are in set y. This means that</span></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><span class="doxyHighlightComment">/// y does not contain all overlaps because partial overlaps are excluded.</span></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><span class="doxyHighlightComment">/// While we&#39;re iterating over the function, add single location defs for</span></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><span class="doxyHighlightComment">/// dbg.declares to \\p FnVarLocs.</span></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><span class="doxyHighlightComment">/// Variables that are interesting to this pass in are added to</span></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><span class="doxyHighlightComment">/// FnVarLocs-&gt;Variables first. TrackedVariablesVectorSize is set to the ID of</span></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><span class="doxyHighlightComment">/// the last interesting variable plus 1, meaning variables with ID 1</span></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><span class="doxyHighlightComment">/// (inclusive) to TrackedVariablesVectorSize (exclusive) are interesting. The</span></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><span class="doxyHighlightComment">/// subsequent variables are either stack homed or fully promoted.</span></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><span class="doxyHighlightComment">/// Finally, populate UntaggedStoreVars with a mapping of untagged stores to</span></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><span class="doxyHighlightComment">/// the stored-to variable fragments.</span></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><span class="doxyHighlightComment">/// These tasks are bundled together to reduce the number of times we need</span></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><span class="doxyHighlightComment">/// to iterate over the function as they can be achieved together in one pass.</span></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152" lineLink="#a4ad92667dcad9ad33a52a2e1c505a03a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c">AssignmentTrackingLowering::OverlapMap</a> <a href="#a4ad92667dcad9ad33a52a2e1c505a03a">buildOverlapMapAndRecordDeclares</a>(</span></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn, <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs,</span></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> &amp;VarsWithStackSlot,</span></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0dcaf963c14e849c62941b7f402bf74e">AssignmentTrackingLowering::UntaggedStoreAssignmentMap</a> &amp;UntaggedStoreVars,</span></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> &amp;TrackedVariablesVectorSize) &#123;</span></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugVariable&gt;</a> Seen;</span></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Map of Variable: &#91;Fragments&#93;.</span></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;DebugAggregate, SmallVector&lt;DebugVariable, 8&gt;</a>&gt; FragmentMap;</span></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Iterate over all instructions:</span></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// - dbg.declare    -&gt; add single location variable record</span></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// - dbg.&#42;          -&gt; Add fragments to FragmentMap</span></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// - untagged store -&gt; Add fragments to FragmentMap and update</span></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                     UntaggedStoreVars.</span></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We need to add fragments for untagged stores too so that we can correctly</span></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// clobber overlapped fragment locations later.</span></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;DbgDeclareInst &#42;&gt;</a> InstDeclares;</span></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;DbgVariableRecord &#42;&gt;</a> DPDeclares;</span></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ProcessDbgRecord = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/classes/llvm/record">Record</a>, </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;DeclareList) &#123;</span></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Declare = <a href="#afc77f1c086d1b0a5305e033551c42ad2">DynCastToDbgDeclare</a>(<a href="/docs/api/classes/llvm/record">Record</a>)) &#123;</span></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><span class="doxyHighlight">      DeclareList.push&#95;back(Declare);</span></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> DV = <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(<a href="/docs/api/classes/llvm/record">Record</a>);</span></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><span class="doxyHighlight">    <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> DA = &#123;DV.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), DV.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>()&#125;;</span></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VarsWithStackSlot.<a href="/docs/api/classes/llvm/detail/densesetimpl/#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(DA))</span></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Seen.<a href="/docs/api/classes/llvm/detail/densesetimpl/#a1b0f3ebdced8fce4b22c6a63b25d9525">insert</a>(DV).second)</span></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><span class="doxyHighlight">      FragmentMap&#91;DA&#93;.push&#95;back(DV);</span></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : Fn) &#123;</span></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : BB) &#123;</span></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange()))</span></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><span class="doxyHighlight">        ProcessDbgRecord(&amp;DVR, DPDeclares);</span></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DII = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgVariableIntrinsic&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><span class="doxyHighlight">        ProcessDbgRecord(DII, InstDeclares);</span></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = <a href="#a4613ca285a8a0e95d35816a83b302a91">getUntaggedStoreAssignmentInfo</a>(</span></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><span class="doxyHighlight">                     <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Fn.<a href="/docs/api/classes/llvm/function/#a3275c50993afaf4fdd723640c2c3ca0f">getDataLayout</a>())) &#123;</span></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Find markers linked to this alloca.</span></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HandleDbgAssignForStore = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Assign) &#123;</span></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><span class="doxyHighlight">          std::optional&lt;DIExpression::FragmentInfo&gt; FragInfo;</span></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Skip this assignment if the affected bits are outside of the</span></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// variable fragment.</span></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/at/#ad7b73b4fea9ae261dfe1d0141e34d55c">at::calculateFragmentIntersect</a>(</span></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><span class="doxyHighlight">                  <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDataLayout(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;Base,</span></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><span class="doxyHighlight">                  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;OffsetInBits, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;SizeInBits, Assign, FragInfo) ||</span></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><span class="doxyHighlight">              (FragInfo &amp;&amp; FragInfo-&gt;SizeInBits == 0))</span></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// FragInfo from calculateFragmentIntersect is nullopt if the</span></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// resultant fragment matches DAI&#39;s fragment or entire variable - in</span></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// which case copy the fragment info from DAI. If FragInfo is still</span></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// nullopt after the copy it means &quot;no fragment info&quot; instead, which</span></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// is how it is usually interpreted.</span></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FragInfo)</span></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><span class="doxyHighlight">            FragInfo = Assign-&gt;getExpression()-&gt;getFragmentInfo();</span></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> DV =</span></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(Assign-&gt;getVariable(), FragInfo,</span></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><span class="doxyHighlight">                            Assign-&gt;getDebugLoc().getInlinedAt());</span></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><span class="doxyHighlight">          <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> DA = &#123;DV.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), DV.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>()&#125;;</span></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!VarsWithStackSlot.<a href="/docs/api/classes/llvm/detail/densesetimpl/#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(DA))</span></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Cache this info for later.</span></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><span class="doxyHighlight">          UntaggedStoreVars&#91;&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93;.push&#95;back(</span></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><span class="doxyHighlight">              &#123;FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(DV), &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>&#125;);</span></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Seen.<a href="/docs/api/classes/llvm/detail/densesetimpl/#a1b0f3ebdced8fce4b22c6a63b25d9525">insert</a>(DV).second)</span></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><span class="doxyHighlight">            FragmentMap&#91;DA&#93;.push&#95;back(DV);</span></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><span class="doxyHighlight">        &#125;;</span></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;DAI : <a href="/docs/api/namespaces/llvm/at/#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;Base))</span></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><span class="doxyHighlight">          HandleDbgAssignForStore(DAI);</span></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;DVR : <a href="/docs/api/namespaces/llvm/at/#aa992dd7420a71df6149dd3437c949245">at::getDVRAssignmentMarkers</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/cseinfo-cpp/#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;Base))</span></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><span class="doxyHighlight">          HandleDbgAssignForStore(DVR);</span></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Sort the fragment map for each DebugAggregate in ascending</span></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// order of fragment size - there should be no duplicates.</span></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Pair : FragmentMap) &#123;</span></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;DebugVariable, 8&gt;</a> &amp;Frags = Pair.second;</span></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><span class="doxyHighlight">    std::sort(Frags.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Frags.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(),</span></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><span class="doxyHighlight">              &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> &amp;Elmt) &#123;</span></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><span class="doxyHighlight">                return Elmt.getFragmentOrDefault().SizeInBits &gt;</span></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><span class="doxyHighlight">                       Next.getFragmentOrDefault().SizeInBits;</span></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><span class="doxyHighlight">              &#125;);</span></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check for duplicates.</span></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(std::adjacent&#95;find(Frags.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Frags.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>()) == Frags.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>());</span></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build the map.</span></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a0ff60cdc2be1ee891c876f458018fd1c">AssignmentTrackingLowering::OverlapMap</a> Map;</span></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Pair : FragmentMap) &#123;</span></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Frags = Pair.second;</span></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> It = Frags.begin(), IEnd = Frags.end(); It != IEnd; ++It) &#123;</span></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> Frag = It-&gt;getFragmentOrDefault();</span></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Find the frags that this is contained within.</span></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Because Frags is sorted by size and none have the same offset and</span></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// size, we know that this frag can only be contained by subsequent</span></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// elements.</span></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;DebugVariable, 8&gt;::iterator</a> OtherIt = It;</span></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><span class="doxyHighlight">      ++OtherIt;</span></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> ThisVar = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(&#42;It);</span></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; OtherIt != IEnd; ++OtherIt) &#123;</span></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> OtherFrag = OtherIt-&gt;getFragmentOrDefault();</span></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> OtherVar = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(&#42;OtherIt);</span></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a42ed349a287ad53473602bc805a2fe78">fullyContains</a>(OtherFrag, Frag))</span></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><span class="doxyHighlight">          Map&#91;OtherVar&#93;.push&#95;back(ThisVar);</span></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// VariableIDs are 1-based so the variable-tracking bitvector needs</span></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NumVariables plus 1 bits.</span></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><span class="doxyHighlight">  TrackedVariablesVectorSize = FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#a9848c6070f02f12648056d70d3884c8e">getNumVariables</a>() + 1;</span></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Finally, insert the declares afterwards, so the first IDs are all</span></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// partially stack homed vars.</span></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DDI : InstDeclares)</span></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><span class="doxyHighlight">    FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#a9bdc6ab1fe66386aa7c0acc76c0c5c75">addSingleLocVar</a>(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(DDI), DDI-&gt;getExpression(),</span></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><span class="doxyHighlight">                               DDI-&gt;getDebugLoc(), DDI-&gt;getWrappedLocation());</span></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DVR : DPDeclares)</span></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><span class="doxyHighlight">    FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#a9bdc6ab1fe66386aa7c0acc76c0c5c75">addSingleLocVar</a>(<a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(DVR), DVR-&gt;<a href="/docs/api/classes/llvm/dbgvariablerecord/#a8ec5a479378113fc24b647afa2f06ee5">getExpression</a>(),</span></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"><span class="doxyHighlight">                               DVR-&gt;<a href="/docs/api/classes/llvm/dbgrecord/#a3a0f4e00c3f6345c52c6acd178b3fca3">getDebugLoc</a>(),</span></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><span class="doxyHighlight">                               <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a>(DVR-&gt;<a href="/docs/api/classes/llvm/dbgvariablerecord/#ab9edb568c54e87f08484a5f46e399bee">getRawLocation</a>()));</span></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Map;</span></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283" lineLink="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a9db16f6b49d380b76183877d54b42c5c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-assignmenttrackinganalysis-cpp-/assignmenttrackinglowering/#a9db16f6b49d380b76183877d54b42c5c">AssignmentTrackingLowering::run</a>(<a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocsBuilder) &#123;</span></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Fn.size() &gt; <a href="#af0952d00328de72e269c7f157a015e1c">MaxNumBlocks</a>) &#123;</span></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;AT&#93; Dropping var locs in: &quot;</span><span class="doxyHighlight"> &lt;&lt; Fn.getName()</span></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: too many blocks (&quot;</span><span class="doxyHighlight"> &lt;&lt; Fn.size() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/at/#a11e115c0bc63e73df009e5117821d230">at::deleteAll</a>(&amp;Fn);</span></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><span class="doxyHighlight">  FnVarLocs = FnVarLocsBuilder;</span></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The general structure here is inspired by VarLocBasedImpl.cpp</span></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (LiveDebugValues).</span></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build the variable fragment overlap map.</span></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Note that this pass doesn&#39;t handle partial overlaps correctly (FWIW</span></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// neither does LiveDebugVariables) because that is difficult to do and</span></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// appears to be rare occurance.</span></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><span class="doxyHighlight">  VarContains = <a href="#a4ad92667dcad9ad33a52a2e1c505a03a">buildOverlapMapAndRecordDeclares</a>(</span></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><span class="doxyHighlight">      Fn, FnVarLocs, &#42;VarsWithStackSlot, UntaggedStoreVars,</span></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><span class="doxyHighlight">      TrackedVariablesVectorSize);</span></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Prepare for traversal.</span></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/reversepostordertraversal">ReversePostOrderTraversal&lt;Function &#42;&gt;</a> RPOT(&amp;Fn);</span></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><span class="doxyHighlight">  std::priority&#95;queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</span></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><span class="doxyHighlight">                      std::greater&lt;unsigned int&gt;&gt;</span></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><span class="doxyHighlight">      Worklist;</span></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><span class="doxyHighlight">  std::priority&#95;queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</span></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><span class="doxyHighlight">                      std::greater&lt;unsigned int&gt;&gt;</span></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><span class="doxyHighlight">      Pending;</span></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned int, BasicBlock &#42;&gt;</a> OrderToBB;</span></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;BasicBlock &#42;, unsigned int&gt;</a> BBToOrder;</span></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><span class="doxyHighlight">  &#123; </span><span class="doxyHighlightComment">// Init OrderToBB and BBToOrder.</span></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> RPONumber = 0;</span></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB : RPOT) &#123;</span></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><span class="doxyHighlight">      OrderToBB&#91;RPONumber&#93; = BB;</span></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><span class="doxyHighlight">      BBToOrder&#91;BB&#93; = RPONumber;</span></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><span class="doxyHighlight">      Worklist.push(RPONumber);</span></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><span class="doxyHighlight">      ++RPONumber;</span></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><span class="doxyHighlight">    LiveIn.init(RPONumber);</span></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><span class="doxyHighlight">    LiveOut.init(RPONumber);</span></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Perform the traversal.</span></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This is a standard &quot;union of predecessor outs&quot; dataflow problem. To solve</span></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// it, we perform join() and process() using the two worklist method until</span></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the LiveIn data for each block becomes unchanging. The &quot;proof&quot; that this</span></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// terminates can be put together by looking at the comments around LocKind,</span></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Assignment, and the various join methods, which show that all the elements</span></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// involved are made up of join-semilattices; LiveIn(n) can only</span></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// monotonically increase in value throughout the dataflow.</span></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> Visited;</span></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!Worklist.empty()) &#123;</span></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We track what is on the pending worklist to avoid inserting the same</span></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// thing twice.</span></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;BasicBlock &#42;, 16&gt;</a> OnPending;</span></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Processing Worklist\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!Worklist.empty()) &#123;</span></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB = OrderToBB&#91;Worklist.top()&#93;;</span></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\nPop BB &quot;</span><span class="doxyHighlight"> &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><span class="doxyHighlight">      Worklist.pop();</span></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InChanged = <a href="/docs/api/namespaces/llvm/#aa1fd1719afe5b07ebe55f1d105c98916">join</a>(&#42;BB, Visited);</span></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Always consider LiveIn changed on the first visit.</span></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><span class="doxyHighlight">      InChanged |= Visited.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(BB).second;</span></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (InChanged) &#123;</span></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has new InLocs, process it\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Mutate a copy of LiveIn while processing BB. After calling process</span></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// LiveSet is the LiveOut set for BB.</span></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><span class="doxyHighlight">        BlockInfo LiveSet = LiveIn&#91;BB&#93;;</span></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Process the instructions in the block.</span></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><span class="doxyHighlight">        process(&#42;BB, &amp;LiveSet);</span></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Relatively expensive check: has anything changed in LiveOut for BB?</span></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LiveOut&#91;BB&#93; != LiveSet) &#123;</span></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</span></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><span class="doxyHighlight">                            &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has new OutLocs, add succs to worklist: &#91; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><span class="doxyHighlight">          LiveOut&#91;BB&#93; = std::move(LiveSet);</span></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Succ : <a href="/docs/api/namespaces/llvm/#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(BB)) &#123;</span></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OnPending.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(Succ).second) &#123;</span></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><span class="doxyHighlight">              <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Succ-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><span class="doxyHighlight">              Pending.push(BBToOrder&#91;Succ&#93;);</span></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><span class="doxyHighlight">    Worklist.swap(Pending);</span></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// At this point, pending must be empty, since it was just the empty</span></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// worklist</span></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pending.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Pending should be empty&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// That&#39;s the hard part over. Now we just have some admin to do.</span></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Record whether we inserted any intrinsics.</span></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InsertedAnyIntrinsics = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Identify and add defs for single location variables.</span></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Go through all of the defs that we plan to add. If the aggregate variable</span></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// it&#39;s a part of is not in the NotAlwaysStackHomed set we can emit a single</span></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// location def and omit the rest. Add an entry to AlwaysStackHomed so that</span></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// we can identify those uneeded defs later.</span></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> AlwaysStackHomed;</span></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Pair : InsertBeforeMap) &#123;</span></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Vec = Pair.second;</span></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> VarLoc : Vec) &#123;</span></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var = FnVarLocs-&gt;<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</span></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><span class="doxyHighlight">      DebugAggregate Aggr&#123;Var.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), Var.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>()&#125;;</span></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip this Var if it&#39;s not always stack homed.</span></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NotAlwaysStackHomed.contains(Aggr))</span></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip complex cases such as when different fragments of a variable have</span></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// been split into different allocas. Skipping in this case means falling</span></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// back to using a list of defs (which could reduce coverage, but is no</span></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// less correct).</span></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a1200affbcdb869bf32076f90ad9d0eafa1fbb1e3943c2c6c560247ac8f9289780">Simple</a> =</span></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><span class="doxyHighlight">          VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>-&gt;<a href="/docs/api/classes/llvm/diexpression/#a1b59c8fe81267b338774bf6c542f90ee">getNumElements</a>() == 1 &amp;&amp; VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>-&gt;<a href="/docs/api/classes/llvm/diexpression/#a3c6397a9b21812183d69e90c3dac17f9">startsWithDeref</a>();</span></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a1200affbcdb869bf32076f90ad9d0eafa1fbb1e3943c2c6c560247ac8f9289780">Simple</a>) &#123;</span></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><span class="doxyHighlight">        NotAlwaysStackHomed.insert(Aggr);</span></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// All source assignments to this variable remain and all stores to any</span></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// part of the variable store to the same address (with varying</span></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// offsets). We can just emit a single location for the whole variable.</span></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Unless we&#39;ve already done so, create the single location def now.</span></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AlwaysStackHomed.<a href="/docs/api/classes/llvm/detail/densesetimpl/#a1b0f3ebdced8fce4b22c6a63b25d9525">insert</a>(Aggr).second) &#123;</span></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a>.<a href="/docs/api/classes/llvm/rawlocationwrapper/#acaf135b0c3da7778910e043864bcf1ac">hasArgList</a>());</span></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// TODO: When more complex cases are handled VarLoc.Expr should be</span></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// built appropriately rather than always using an empty DIExpression.</span></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// The assert below is a reminder.</span></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a1200affbcdb869bf32076f90ad9d0eafa1fbb1e3943c2c6c560247ac8f9289780">Simple</a>);</span></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><span class="doxyHighlight">        VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(Fn.getContext(), &#123;&#125;);</span></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var = FnVarLocs-&gt;<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</span></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><span class="doxyHighlight">        FnVarLocs-&gt;addSingleLocVar(Var, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#ad7e310409e444bad60535cf956972194">DL</a>, VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#a95406039aa97abe00aa3b1265d846455">Values</a>);</span></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><span class="doxyHighlight">        InsertedAnyIntrinsics = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert the other DEFs.</span></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;&#91;InsertBefore, Vec&#93; : InsertBeforeMap) &#123;</span></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</span></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;VarLoc : Vec) &#123;</span></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var = FnVarLocs-&gt;<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(VarLoc.<a href="/docs/api/structs/llvm/varlocinfo/#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</span></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><span class="doxyHighlight">      DebugAggregate Aggr&#123;Var.<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(), Var.<a href="/docs/api/classes/llvm/debugvariable/#a58e53986006a2e7d95385fe4e633fb2e">getInlinedAt</a>()&#125;;</span></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If this variable is always stack homed then we have already inserted a</span></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// dbg.declare and deleted this dbg.value.</span></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AlwaysStackHomed.<a href="/docs/api/classes/llvm/detail/densesetimpl/#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(Aggr))</span></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><span class="doxyHighlight">      NewDefs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(VarLoc);</span></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><span class="doxyHighlight">      InsertedAnyIntrinsics = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><span class="doxyHighlight">    FnVarLocs-&gt;setWedge(InsertBefore, std::move(NewDefs));</span></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><span class="doxyHighlight">  InsertedAnyIntrinsics |= emitPromotedVarLocs(FnVarLocs);</span></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertedAnyIntrinsics;</span></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AssignmentTrackingLowering::emitPromotedVarLocs(</span></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><span class="doxyHighlight">    <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InsertedAnyIntrinsics = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Go through every block, translating debug intrinsics for fully promoted</span></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// variables into FnVarLocs location defs. No analysis required for these.</span></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> TranslateDbgRecord = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/classes/llvm/record">Record</a>) &#123;</span></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Skip variables that haven&#39;t been promoted - we&#39;ve dealt with those</span></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// already.</span></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VarsWithStackSlot-&gt;contains(<a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(<a href="/docs/api/classes/llvm/record">Record</a>)))</span></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsertBefore = <a href="#a05eb84c8f630be406f61761013146574">getNextNode</a>(<a href="/docs/api/classes/llvm/record">Record</a>);</span></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Unexpected: debug intrinsics after a terminator&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><span class="doxyHighlight">    FnVarLocs-&gt;<a href="/docs/api/classes/functionvarlocsbuilder/#af6e3c63d3b0c045ac17a629271c3f981">addVarLoc</a>(InsertBefore, <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a>(<a href="/docs/api/classes/llvm/record">Record</a>),</span></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/record">Record</a>-&gt;getExpression(), <a href="/docs/api/classes/llvm/record">Record</a>-&gt;getDebugLoc(),</span></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/rawlocationwrapper">RawLocationWrapper</a>(<a href="/docs/api/classes/llvm/record">Record</a>-&gt;getRawLocation()));</span></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><span class="doxyHighlight">    InsertedAnyIntrinsics = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : Fn) &#123;</span></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : BB) &#123;</span></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip instructions other than dbg.values and dbg.assigns.</span></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange()))</span></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a0d537737d355256948200ba969a44637">isDbgValue</a>() || DVR.<a href="/docs/api/classes/llvm/dbgvariablerecord/#a8e44c4d5de5d1134497e3ca3b922c535">isDbgAssign</a>())</span></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><span class="doxyHighlight">          TranslateDbgRecord(&amp;DVR);</span></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;DVI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;DbgValueInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DVI)</span></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><span class="doxyHighlight">        TranslateDbgRecord(DVI);</span></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertedAnyIntrinsics;</span></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><span class="doxyHighlightComment">/// Remove redundant definitions within sequences of consecutive location defs.</span></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><span class="doxyHighlightComment">/// This is done using a backward scan to keep the last def describing a</span></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><span class="doxyHighlightComment">/// specific variable/fragment.</span></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><span class="doxyHighlightComment">/// This implements removeRedundantDbgInstrsUsingBackwardScan from</span></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><span class="doxyHighlightComment">/// lib/Transforms/Utils/BasicBlockUtils.cpp for locations described with</span></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><span class="doxyHighlightComment">/// FunctionVarLocsBuilder instead of with intrinsics.</span></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492" lineLink="#ad959466c7f8b886a2caa4967c46d48db"><span class="doxyHighlight"><a href="#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB,</span></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><span class="doxyHighlight">                                        <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smalldensemap">SmallDenseMap&lt;DebugAggregate, BitVector&gt;</a> VariableDefinedBytes;</span></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scan over the entire block, not just over the instructions mapped by</span></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FnVarLocs, because wedges in FnVarLocs may only be separated by debug</span></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions.</span></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/namespaces/llvm/#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(&#42;BB)) &#123;</span></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;DbgVariableIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Sequence of consecutive defs ended. Clear map for the next one.</span></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><span class="doxyHighlight">      VariableDefinedBytes.<a href="/docs/api/classes/llvm/densemapbase/#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</span></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HandleLocsForWedge = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;WedgePosition) &#123;</span></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Get the location defs that start just before this instruction.</span></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Locs = FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(WedgePosition);</span></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Locs)</span></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><span class="doxyHighlight">      NumWedgesScanned++;</span></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ChangedThisWedge = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The new pruned set of defs, reversed because we&#39;re scanning backwards.</span></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> NewDefsReversed;</span></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Iterate over the existing defs in reverse.</span></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RIt = Locs-&gt;rbegin(), REnd = Locs-&gt;rend(); RIt != REnd; ++RIt) &#123;</span></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><span class="doxyHighlight">        NumDefsScanned++;</span></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><span class="doxyHighlight">        <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr =</span></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><span class="doxyHighlight">            <a href="#a4514f516df040b468e552a28163b3747">getAggregate</a>(FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(RIt-&gt;VariableID));</span></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><span class="doxyHighlight">        uint64&#95;t SizeInBits = Aggr.first-&gt;getSizeInBits().value&#95;or(0);</span></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><span class="doxyHighlight">        uint64&#95;t SizeInBytes = <a href="/docs/api/namespaces/llvm/#a9dda4472ee0b7ea92ab49eedf6e13d50">divideCeil</a>(SizeInBits, 8);</span></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Cutoff for large variables to prevent expensive bitvector operations.</span></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t MaxSizeBytes = 2048;</span></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeInBytes == 0 || SizeInBytes &gt; MaxSizeBytes) &#123;</span></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// If the size is unknown (0) then keep this location def to be safe.</span></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Do the same for defs of large variables, which would be expensive</span></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// to represent with a BitVector.</span></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><span class="doxyHighlight">          NewDefsReversed.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&#42;RIt);</span></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Only keep this location definition if it is not fully eclipsed by</span></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// other definitions in this wedge that come after it</span></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Inert the bytes the location definition defines.</span></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InsertResult =</span></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><span class="doxyHighlight">            VariableDefinedBytes.<a href="/docs/api/classes/llvm/densemapbase/#a1a245b31aced1374f28f45d2b297f402">try&#95;emplace</a>(Aggr, <a href="/docs/api/classes/llvm/bitvector">BitVector</a>(SizeInBytes));</span></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FirstDefinition = InsertResult.second;</span></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/bitvector">BitVector</a> &amp;DefinedBytes = InsertResult.first-&gt;second;</span></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a> Fragment =</span></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><span class="doxyHighlight">            RIt-&gt;Expr-&gt;getFragmentInfo().value&#95;or(</span></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/diexpression/#a2a09e6caba71ab15519f9e55ceb4d10d">DIExpression::FragmentInfo</a>(SizeInBits, 0));</span></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InvalidFragment = Fragment.<a href="/docs/api/structs/llvm/dbgvariablefragmentinfo/#ada73d0382fc8c21c8c09a675a071e1a4">endInBits</a>() &gt; SizeInBits;</span></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><span class="doxyHighlight">        uint64&#95;t StartInBytes = Fragment.<a href="/docs/api/structs/llvm/dbgvariablefragmentinfo/#a0627a69223128917db3ddbeec59d0bf9">startInBits</a>() / 8;</span></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><span class="doxyHighlight">        uint64&#95;t EndInBytes = <a href="/docs/api/namespaces/llvm/#a9dda4472ee0b7ea92ab49eedf6e13d50">divideCeil</a>(Fragment.<a href="/docs/api/structs/llvm/dbgvariablefragmentinfo/#ada73d0382fc8c21c8c09a675a071e1a4">endInBits</a>(), 8);</span></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// If this defines any previously undefined bytes, keep it.</span></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FirstDefinition || InvalidFragment ||</span></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><span class="doxyHighlight">            DefinedBytes.<a href="/docs/api/classes/llvm/bitvector/#a5623afb4b792490104f5197babb435d0">find&#95;first&#95;unset&#95;in</a>(StartInBytes, EndInBytes) != -1) &#123;</span></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InvalidFragment)</span></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><span class="doxyHighlight">            DefinedBytes.<a href="/docs/api/classes/llvm/bitvector/#a62237ebe27691377a942abe7446332ec">set</a>(StartInBytes, EndInBytes);</span></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><span class="doxyHighlight">          NewDefsReversed.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&#42;RIt);</span></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Redundant def found: throw it away. Since the wedge of defs is being</span></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// rebuilt, doing nothing is the same as deleting an entry.</span></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><span class="doxyHighlight">        ChangedThisWedge = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><span class="doxyHighlight">        NumDefsRemoved++;</span></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Un-reverse the defs and replace the wedge with the pruned version.</span></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ChangedThisWedge) &#123;</span></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><span class="doxyHighlight">        std::reverse(NewDefsReversed.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NewDefsReversed.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>());</span></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><span class="doxyHighlight">        FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a4f8d8b3153be3260587c06c0cf6340f0">setWedge</a>(WedgePosition, std::move(NewDefsReversed));</span></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><span class="doxyHighlight">        NumWedgesChanged++;</span></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><span class="doxyHighlight">        <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><span class="doxyHighlight">    HandleLocsForWedge(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(<a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange())))</span></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><span class="doxyHighlight">      HandleLocsForWedge(&amp;DVR);</span></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a>;</span></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><span class="doxyHighlightComment">/// Remove redundant location defs using a forward scan. This can remove a</span></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><span class="doxyHighlightComment">/// location definition that is redundant due to indicating that a variable has</span></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"><span class="doxyHighlightComment">/// the same value as is already being indicated by an earlier def.</span></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><span class="doxyHighlightComment">/// This implements removeRedundantDbgInstrsUsingForwardScan from</span></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><span class="doxyHighlightComment">/// lib/Transforms/Utils/BasicBlockUtils.cpp for locations described with</span></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><span class="doxyHighlightComment">/// FunctionVarLocsBuilder instead of with intrinsics</span></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590" lineLink="#a72b4d4469e68630addc74e567526f261"><span class="doxyHighlight"><a href="#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB,</span></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><span class="doxyHighlight">                                       <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;DebugVariable, std::pair&lt;RawLocationWrapper, DIExpression &#42;&gt;</a>&gt;</span></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><span class="doxyHighlight">      VariableMap;</span></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scan over the entire block, not just over the instructions mapped by</span></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FnVarLocs, because wedges in FnVarLocs may only be separated by debug</span></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions.</span></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : &#42;BB) &#123;</span></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Get the defs that come just before this instruction.</span></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HandleLocsForWedge = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;WedgePosition) &#123;</span></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Locs = FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(WedgePosition);</span></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Locs)</span></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><span class="doxyHighlight">      NumWedgesScanned++;</span></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ChangedThisWedge = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The new pruned set of defs.</span></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</span></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Iterate over the existing defs.</span></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;<a href="/docs/api/namespaces/llvm/loc">Loc</a> : &#42;Locs) &#123;</span></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><span class="doxyHighlight">        NumDefsScanned++;</span></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> <a href="/docs/api/namespaces/llvm/#a98c6256d0644613c6b5b3e2ef06ef5ce">Key</a>(FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(<a href="/docs/api/namespaces/llvm/loc">Loc</a>.VariableID).<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(),</span></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><span class="doxyHighlight">                          std::nullopt, <a href="/docs/api/namespaces/llvm/loc">Loc</a>.DL.getInlinedAt());</span></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VMI = VariableMap.<a href="/docs/api/classes/llvm/densemapbase/#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a href="/docs/api/namespaces/llvm/#a98c6256d0644613c6b5b3e2ef06ef5ce">Key</a>);</span></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Update the map if we found a new value/expression describing the</span></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// variable, or if the variable wasn&#39;t mapped already.</span></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VMI == VariableMap.<a href="/docs/api/classes/llvm/densemapbase/#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() || VMI-&gt;second.first != <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Values ||</span></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><span class="doxyHighlight">            VMI-&gt;second.second != <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Expr) &#123;</span></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><span class="doxyHighlight">          VariableMap&#91;<a href="/docs/api/namespaces/llvm/#a98c6256d0644613c6b5b3e2ef06ef5ce">Key</a>&#93; = &#123;<a href="/docs/api/namespaces/llvm/loc">Loc</a>.Values, <a href="/docs/api/namespaces/llvm/loc">Loc</a>.Expr&#125;;</span></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><span class="doxyHighlight">          NewDefs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/loc">Loc</a>);</span></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Did not insert this Loc, which is the same as removing it.</span></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><span class="doxyHighlight">        ChangedThisWedge = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><span class="doxyHighlight">        NumDefsRemoved++;</span></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Replace the existing wedge with the pruned version.</span></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ChangedThisWedge) &#123;</span></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><span class="doxyHighlight">        FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a4f8d8b3153be3260587c06c0cf6340f0">setWedge</a>(WedgePosition, std::move(NewDefs));</span></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><span class="doxyHighlight">        NumWedgesChanged++;</span></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><span class="doxyHighlight">        <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange()))</span></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><span class="doxyHighlight">      HandleLocsForWedge(&amp;DVR);</span></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><span class="doxyHighlight">    HandleLocsForWedge(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a>;</span></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649" lineLink="#a4e75fd1680471e758ffbca9f8d893884"><span class="doxyHighlight"><a href="#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB,</span></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><span class="doxyHighlight">                                 <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a4ec05121d4b54b3691ad6203e78ff54e">isEntryBlock</a>());</span></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do extra work to ensure that we remove semantically unimportant undefs.</span></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This is to work around the fact that SelectionDAG will hoist dbg.values</span></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// using argument values to the top of the entry block. That can move arg</span></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// dbg.values before undef and constant dbg.values which they previously</span></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// followed. The easiest thing to do is to just try to feed SelectionDAG</span></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// input it&#39;s happy with.</span></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Map of &#123;Variable x: Fragments y&#125; where the fragments y of variable x have</span></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// have at least one non-undef location defined already. Don&#39;t use directly,</span></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instead call DefineBits and HasDefinedBits.</span></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smalldensemap">SmallDenseMap&lt;DebugAggregate, SmallDenseSet&lt;DIExpression::FragmentInfo&gt;</a>&gt;</span></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><span class="doxyHighlight">      VarsWithDef;</span></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Specify that V (a fragment of A) has a non-undef location.</span></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DefineBits = &#91;&amp;VarsWithDef&#93;(<a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> V) &#123;</span></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><span class="doxyHighlight">    VarsWithDef&#91;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93;.<a href="/docs/api/classes/llvm/densemapbase/#adb33f3ede2f5bfc9b3ee658aaf648492">insert</a>(V.getFragmentOrDefault());</span></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Return true if a non-undef location has been defined for V (a fragment of</span></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A). Doesn&#39;t imply that the location is currently non-undef, just that a</span></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// non-undef location has been seen previously.</span></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HasDefinedBits = &#91;&amp;VarsWithDef&#93;(<a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> V) &#123;</span></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FragsIt = VarsWithDef.<a href="/docs/api/classes/llvm/densemapbase/#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FragsIt == VarsWithDef.<a href="/docs/api/classes/llvm/densemapbase/#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</span></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a61d13d6824ec46c31260a4fd0997eda0">llvm::any&#95;of</a>(FragsIt-&gt;second, &#91;V&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Frag) &#123;</span></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><span class="doxyHighlight">      return DIExpression::fragmentsOverlap(Frag, V.getFragmentOrDefault());</span></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><span class="doxyHighlight">    &#125;);</span></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;DebugVariable, std::pair&lt;Value &#42;, DIExpression &#42;&gt;</a>&gt; VariableMap;</span></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scan over the entire block, not just over the instructions mapped by</span></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FnVarLocs, because wedges in FnVarLocs may only be separated by debug</span></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions.</span></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : &#42;BB) &#123;</span></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Get the defs that come just before this instruction.</span></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HandleLocsForWedge = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;WedgePosition) &#123;</span></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Locs = FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a9263b193fc0f1585fc4d68fc9e0aee0e">getWedge</a>(WedgePosition);</span></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Locs)</span></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><span class="doxyHighlight">      NumWedgesScanned++;</span></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ChangedThisWedge = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The new pruned set of defs.</span></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</span></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Iterate over the existing defs.</span></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/varlocinfo">VarLocInfo</a> &amp;<a href="/docs/api/namespaces/llvm/loc">Loc</a> : &#42;Locs) &#123;</span></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><span class="doxyHighlight">        NumDefsScanned++;</span></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><span class="doxyHighlight">        <a href="#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr&#123;FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(<a href="/docs/api/namespaces/llvm/loc">Loc</a>.VariableID).<a href="/docs/api/classes/llvm/debugvariable/#af2ca096ab72c055f6c2c7e3ffbe5d6bf">getVariable</a>(),</span></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><span class="doxyHighlight">                            <a href="/docs/api/namespaces/llvm/loc">Loc</a>.DL.getInlinedAt()&#125;;</span></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/debugvariable">DebugVariable</a> Var = FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#afe7cb885c1a677f036f0aa21a03b96ac">getVariable</a>(<a href="/docs/api/namespaces/llvm/loc">Loc</a>.VariableID);</span></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Remove undef entries that are encountered before any non-undef</span></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// intrinsics from the entry block.</span></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/loc">Loc</a>.Values.isKillLocation(<a href="/docs/api/namespaces/llvm/loc">Loc</a>.Expr) &amp;&amp; !HasDefinedBits(Aggr, Var)) &#123;</span></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Did not insert this Loc, which is the same as removing it.</span></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><span class="doxyHighlight">          NumDefsRemoved++;</span></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><span class="doxyHighlight">          ChangedThisWedge = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><span class="doxyHighlight">        DefineBits(Aggr, Var);</span></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><span class="doxyHighlight">        NewDefs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/loc">Loc</a>);</span></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Replace the existing wedge with the pruned version.</span></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ChangedThisWedge) &#123;</span></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><span class="doxyHighlight">        FnVarLocs.<a href="/docs/api/classes/functionvarlocsbuilder/#a4f8d8b3153be3260587c06c0cf6340f0">setWedge</a>(WedgePosition, std::move(NewDefs));</span></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><span class="doxyHighlight">        NumWedgesChanged++;</span></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><span class="doxyHighlight">        <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &amp;DVR : <a href="/docs/api/namespaces/llvm/#ae876eb96b89c1afcc3e9cd285cc3f08c">filterDbgVars</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDbgRecordRange()))</span></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><span class="doxyHighlight">      HandleLocsForWedge(&amp;DVR);</span></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><span class="doxyHighlight">    HandleLocsForWedge(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a>;</span></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734" lineLink="#a732f2f3b2dd163037799643ce7460547"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB,</span></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><span class="doxyHighlight">                                   <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &amp;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> MadeChanges = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><span class="doxyHighlight">  MadeChanges |= <a href="#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a>(BB, FnVarLocs);</span></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a4ec05121d4b54b3691ad6203e78ff54e">isEntryBlock</a>())</span></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><span class="doxyHighlight">    MadeChanges |= <a href="#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a>(BB, FnVarLocs);</span></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><span class="doxyHighlight">  MadeChanges |= <a href="#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a>(BB, FnVarLocs);</span></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MadeChanges)</span></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Removed redundant dbg locs from: &quot;</span><span class="doxyHighlight"> &lt;&lt; BB-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</span></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> MadeChanges;</span></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748" lineLink="#a15c139830d442796a30fbd35e8bfa270"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> <a href="#a15c139830d442796a30fbd35e8bfa270">findVarsWithStackSlot</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn) &#123;</span></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> Result;</span></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : Fn) &#123;</span></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : BB) &#123;</span></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Any variable linked to an instruction is considered</span></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// interesting. Ideally we only need to check Allocas, however, a</span></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// DIAssignID might get dropped from an alloca but not stores. In that</span></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// case, we need to consider the variable interesting for NFC behaviour</span></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// with this change. TODO: Consider only looking at allocas.</span></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgassignintrinsic">DbgAssignIntrinsic</a> &#42;DAI : <a href="/docs/api/namespaces/llvm/at/#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><span class="doxyHighlight">        Result.insert(&#123;DAI-&gt;getVariable(), DAI-&gt;getDebugLoc().getInlinedAt()&#125;);</span></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/dbgvariablerecord">DbgVariableRecord</a> &#42;DVR : <a href="/docs/api/namespaces/llvm/at/#aa992dd7420a71df6149dd3437c949245">at::getDVRAssignmentMarkers</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><span class="doxyHighlight">        Result.insert(&#123;DVR-&gt;<a href="/docs/api/classes/llvm/dbgvariablerecord/#aa774c62045e74bb457b32713c0670696">getVariable</a>(), DVR-&gt;<a href="/docs/api/classes/llvm/dbgrecord/#a3a0f4e00c3f6345c52c6acd178b3fca3">getDebugLoc</a>().<a href="/docs/api/classes/llvm/debugloc/#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>()&#125;);</span></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Result;</span></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768" lineLink="#a077a52fa690effeca0a2e83caeaf5de9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;Layout,</span></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><span class="doxyHighlight">                            <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> &#42;FnVarLocs) &#123;</span></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The analysis will generate location definitions for all variables, but we</span></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// only need to perform a dataflow on the set of variables which have a stack</span></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// slot. Find those now.</span></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/denseset">DenseSet&lt;DebugAggregate&gt;</a> VarsWithStackSlot = <a href="#a15c139830d442796a30fbd35e8bfa270">findVarsWithStackSlot</a>(Fn);</span></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use a scope block to clean up AssignmentTrackingLowering before running</span></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// MemLocFragmentFill to reduce peak memory consumption.</span></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><span class="doxyHighlight">  &#123;</span></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><span class="doxyHighlight">    AssignmentTrackingLowering <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64conditionalcompares-cpp/#ab15af716dfa3d6f1fa7978be4639bd8e">Pass</a>(Fn, Layout, &amp;VarsWithStackSlot);</span></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><span class="doxyHighlight">    <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = <a href="/docs/api/classes/llvm/pass">Pass</a>.run(FnVarLocs);</span></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a>) &#123;</span></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><span class="doxyHighlight">    MemLocFragmentFill <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64conditionalcompares-cpp/#ab15af716dfa3d6f1fa7978be4639bd8e">Pass</a>(Fn, &amp;VarsWithStackSlot,</span></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><span class="doxyHighlight">                            <a href="#af3746cf6b2af89e946e303ef4e7a486c">shouldCoalesceFragments</a>(Fn));</span></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/pass">Pass</a>.run(FnVarLocs);</span></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Remove redundant entries. As well as reducing memory consumption and</span></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// avoiding waiting cycles later by burning some now, this has another</span></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// important job. That is to work around some SelectionDAG quirks. See</span></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// removeRedundantDbgLocsUsingForwardScan comments for more info on that.</span></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BB : Fn)</span></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><span class="doxyHighlight">      <a href="#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a>(&amp;BB, &#42;FnVarLocs);</span></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a></span></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799" lineLink="/docs/api/classes/llvm/debugassignmenttrackinganalysis/#a5bb8380db596f4d29d331b41ff23eddf"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/debugassignmenttrackinganalysis/#a5bb8380db596f4d29d331b41ff23eddf">DebugAssignmentTrackingAnalysis::run</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</span></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><span class="doxyHighlight">                                     <a href="/docs/api/namespaces/llvm/#adce09a5a0de0e3177eb00e932734af2f">FunctionAnalysisManager</a> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) &#123;</span></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">isAssignmentTrackingEnabled</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()))</span></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a>();</span></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout();</span></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><span class="doxyHighlight">  <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> Builder;</span></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><span class="doxyHighlight">  <a href="#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;Builder);</span></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Save these results.</span></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a> <a href="/docs/api/files/lib/lib/analysis/aliasanalysis-cpp/#a7e344cff0feadf0b02223fee63cc7475">Results</a>;</span></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/analysis/aliasanalysis-cpp/#a7e344cff0feadf0b02223fee63cc7475">Results</a>.init(Builder);</span></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/aliasanalysis-cpp/#a7e344cff0feadf0b02223fee63cc7475">Results</a>;</span></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/analysiskey">AnalysisKey</a> DebugAssignmentTrackingAnalysis::Key;</span></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a></span></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818" lineLink="/docs/api/classes/llvm/debugassignmenttrackingprinterpass/#a2fca7dac7d7904748ce1fd08da363d2a"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/debugassignmenttrackingprinterpass/#a2fca7dac7d7904748ce1fd08da363d2a">DebugAssignmentTrackingPrinterPass::run</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</span></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><span class="doxyHighlight">                                        <a href="/docs/api/namespaces/llvm/#adce09a5a0de0e3177eb00e932734af2f">FunctionAnalysisManager</a> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) &#123;</span></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/debugassignmenttrackinganalysis">DebugAssignmentTrackingAnalysis</a>&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>).<a href="/docs/api/namespaces/llvm/#a50bf746ca1858c0e272e3a802fc27942">print</a>(OS, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</span></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824" lineLink="/docs/api/classes/llvm/assignmenttrackinganalysis/#acd5a8c833f5f8bc83a19c0e957c076d1"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/assignmenttrackinganalysis/#acd5a8c833f5f8bc83a19c0e957c076d1">AssignmentTrackingAnalysis::runOnFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</span></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">isAssignmentTrackingEnabled</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()))</span></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;AssignmentTrackingAnalysis run on &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</span></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><span class="doxyHighlight">                    &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Clear previous results.</span></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><span class="doxyHighlight">  Results-&gt;clear();</span></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><span class="doxyHighlight">  <a href="/docs/api/classes/functionvarlocsbuilder">FunctionVarLocsBuilder</a> Builder;</span></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><span class="doxyHighlight">  <a href="#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout(), &amp;Builder);</span></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Save these results.</span></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><span class="doxyHighlight">  Results-&gt;init(Builder);</span></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a58f2996cd5265a713a5dd08c078c3f0b">PrintResults</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#a7d104c3a6510178d34b2d3f0ae67b4d5">isFunctionInPrintList</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()))</span></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><span class="doxyHighlight">    Results-&gt;print(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Return false because this pass does not modify the function.</span></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847" lineLink="/docs/api/classes/llvm/assignmenttrackinganalysis/#a70e7df83b21f618e037a1cc39a9c6882"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/assignmenttrackinganalysis/#a70e7df83b21f618e037a1cc39a9c6882">AssignmentTrackingAnalysis::AssignmentTrackingAnalysis</a>()</span></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><span class="doxyHighlight">    : <a href="/docs/api/classes/llvm/functionpass/#a7691d83e3561f781cae4ce4a01bdfa93">FunctionPass</a>(<a href="/docs/api/classes/llvm/assignmenttrackinganalysis/#aeefac5089f97137ab91a792df56e2fc1">ID</a>), Results(<a href="/docs/api/namespaces/std">std</a>::make&#95;unique&lt;<a href="/docs/api/classes/llvm/functionvarlocs">FunctionVarLocs</a>&gt;()) &#123;&#125;</span></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/assignmenttrackinganalysis/#aeefac5089f97137ab91a792df56e2fc1">AssignmentTrackingAnalysis::ID</a> = 0;</span></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#af807c9595d50b45c0008924c4679c85c">INITIALIZE&#95;PASS</a>(<a href="/docs/api/classes/llvm/assignmenttrackinganalysis">AssignmentTrackingAnalysis</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>,</span></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><span class="doxyHighlight">                </span><span class="doxyHighlightStringLiteral">&quot;Assignment Tracking Analysis&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>

</ProgramListing>


</DoxygenPage>
