---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/include/include/llvm/include/llvm/support/genericdomtreeconstruction-h
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `GenericDomTreeConstruction.h` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

Generic dominator tree construction - this file provides routines to construct immediate dominator information for a flow-graph based on the Semi-NCA algorithm described in this dissertation: <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/denseset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DepthFirstIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallPtrSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/GenericDomTree.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtree-h"
  isLocal="true" />
<IncludesListItem
  filePath="optional"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="queue"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm/domtreebuilder">llvm::DomTreeBuilder</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo">SemiNCAInfo&lt;DomTreeT&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare">Compare</a></>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;dom-tree-builder&quot;</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Generic dominator tree construction - this file provides routines to construct immediate dominator information for a flow-graph based on the Semi-NCA algorithm described in this dissertation:

&#91;1&#93; Linear-Time Algorithms for Dominators and Related Problems Loukas Georgiadis, Princeton University, November 2005, pp. 21-23: <a href="ftp://ftp.cs.princeton.edu/reports/2005/737.pdf">ftp://ftp.cs.princeton.edu/reports/2005/737.pdf</a>

Semi-NCA algorithm runs in O(n^2) worst-case time but usually slightly faster than Simple Lengauer-Tarjan in practice.

O(n^2) worst cases happen when the computation of nearest common ancestors requires O(n) average time, which is very unlikely in real world. If this ever turns out to be an issue, consider implementing a hybrid algorithm that uses SLT to perform full constructions and SemiNCA for incremental updates.

The file uses the Depth Based Search algorithm to perform incremental updates (insertion and deletions). The implemented algorithm is based on this publication:

&#91;2&#93; An Experimental Study of Dynamic Dominators Loukas Georgiadis, et al., April 12 2016, pp. 5-7, 9-10: <a href="https://arxiv.org/pdf/1604.02711.pdf">https://arxiv.org/pdf/1604.02711.pdf</a>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;dom-tree-builder&quot;</>}>

Definition at line <a href="#l00049">49</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtreeconstruction-h">GenericDomTreeConstruction.h</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- GenericDomTreeConstruction.h - Dominator Calculation ------&#42;- C++ -&#42;-==//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// Generic dominator tree construction - this file provides routines to</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">/// construct immediate dominator information for a flow-graph based on the</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">/// Semi-NCA algorithm described in this dissertation:</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">///   &#91;1&#93; Linear-Time Algorithms for Dominators and Related Problems</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">///   Loukas Georgiadis, Princeton University, November 2005, pp. 21-23:</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">///   ftp://ftp.cs.princeton.edu/reports/2005/737.pdf</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightComment">/// Semi-NCA algorithm runs in O(n^2) worst-case time but usually slightly</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightComment">/// faster than Simple Lengauer-Tarjan in practice.</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightComment">/// O(n^2) worst cases happen when the computation of nearest common ancestors</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightComment">/// requires O(n) average time, which is very unlikely in real world. If this</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightComment">/// ever turns out to be an issue, consider implementing a hybrid algorithm</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightComment">/// that uses SLT to perform full constructions and SemiNCA for incremental</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightComment">/// updates.</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightComment">/// The file uses the Depth Based Search algorithm to perform incremental</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightComment">/// updates (insertion and deletions). The implemented algorithm is based on</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightComment">/// this publication:</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightComment">///   &#91;2&#93; An Experimental Study of Dynamic Dominators</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightComment">///   Loukas Georgiadis, et al., April 12 2016, pp. 5-7, 9-10:</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightComment">///   https://arxiv.org/pdf/1604.02711.pdf</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#ifndef LLVM&#95;SUPPORT&#95;GENERICDOMTREECONSTRUCTION&#95;H</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#define LLVM&#95;SUPPORT&#95;GENERICDOMTREECONSTRUCTION&#95;H</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/denseset-h">llvm/ADT/DenseSet.h</a>&quot;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h">llvm/ADT/SmallPtrSet.h</a>&quot;</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtree-h">llvm/Support/GenericDomTree.h</a>&quot;</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightPreprocessor">#include &lt;optional&gt;</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightPreprocessor">#include &lt;queue&gt;</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;dom-tree-builder&quot;</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">DomTreeBuilder &#123;</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> &#123;</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> = </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr;</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a692ee4860e5f23b9dd332928d441f9b6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a692ee4860e5f23b9dd332928d441f9b6">NodeT</a> = </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodeType;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> = <a href="/docs/api/classes/llvm/domtreenodebase">DomTreeNodeBase&lt;NodeT&gt;</a> &#42;;</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> = </span><span class="doxyHighlightKeyword">decltype</span><span class="doxyHighlight">(DomTreeT::Roots);</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> = DomTreeT::IsPostDominator;</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> = <a href="/docs/api/classes/llvm/graphdiff">GraphDiff&lt;NodePtr, IsPostDom&gt;</a>;</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Information record used by Semi-NCA during tree construction.</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#123;</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> = 0;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = 0;</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a> = 0;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a> = 0;</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a684f9c7cd717372292ce444834f090ea"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;unsigned, 4&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a684f9c7cd717372292ce444834f090ea">ReverseChildren</a>;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Number to node mapping is 1-based. Initialize the mapping to start with</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// a dummy element.</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 64&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a> = &#123;</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If blocks have numbers (e.g., BasicBlock, MachineBasicBlock), store node</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// infos in a vector. Otherwise, store them in a map.</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">  std::conditional&#95;t&lt;GraphHasNodeNumbers&lt;NodePtr&gt;, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec, 64&gt;</a>,</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;NodePtr, InfoRec&gt;</a>&gt;</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>;</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> = </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::UpdateType;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5f3d462f65787261079dbe8242e4a971"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5f3d462f65787261079dbe8242e4a971">UpdateKind</a> = </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::UpdateKind;</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b">BatchUpdateInfo</a> &#123;</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note: Updates inside PreViewCFG are already legalized.</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b">BatchUpdateInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">        : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>), <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>),</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.getNumLegalizedUpdates()) &#123;&#125;</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Remembers if the whole tree was recalculated at some point during the</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// current batch update.</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>;</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a>;</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>;</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &#42;;</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If BUI is a nullptr, then there&#39;s no batch update in progress.</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>(BUI) &#123;&#125;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>() &#123;</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a> = &#123;</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">&#125;; </span><span class="doxyHighlightComment">// Restore to initial state with a dummy start node.</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.clear();</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t reset the pointer to BatchUpdateInfo here -- if there&#39;s an update</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// in progress, we need this information to continue it.</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Inversed&gt;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BUI)</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.template <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Inversed&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Inversed&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Inversed&gt;</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0451f2d011f81c6f8ca840004a66c3fd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0451f2d011f81c6f8ca840004a66c3fd">getChildren</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">DirectedNodeT =</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlight">        std::conditional&#95;t&lt;Inversed, Inverse&lt;NodePtr&gt;, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>&gt;;</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/namespaces/llvm/#acc2e6a2001a5f102f18060a53520e82b">children&lt;DirectedNodeT&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> Res(<a href="/docs/api/namespaces/llvm/detail/#a1926e8e4789f0a0f89add386f65413d1">detail::reverse&#95;if&lt;!Inversed&gt;</a>(R));</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Remove nullptr children for clang.</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a60a348350395aef11d68f58111bcf499">llvm::erase</a>(Res, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Res;</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB) &#123;</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a35a70f3171a1748822370ffb5f9324bf">GraphHasNodeNumbers&lt;NodePtr&gt;</a>) &#123;</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx = BB ? <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;NodePtr&gt;::getNumber</a>(BB) + 1 : 0;</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Idx &gt;= <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.size()) &#123;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Max = 0;</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BB)</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">          Max = <a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt;</span><span class="doxyHighlightKeyword">decltype</span><span class="doxyHighlight">(BB-&gt;getParent())&gt;::getMaxNumber(</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlight">              BB-&gt;getParent());</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Max might be zero, graphs might not support getMaxNumber().</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.resize(Max ? Max + 1 : Idx + 1);</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>&#91;Idx&#93;;</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>&#91;BB&#93;;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a>; &#125;</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB, DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/classes/node">Node</a> = DT.getNode(BB)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/node">Node</a>;</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Haven&#39;t calculated this node yet?  Get or calculate the node for the</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// immediate dominator.</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> IDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(BB);</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IDom || DT.getNode(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDomNode = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(IDom, DT);</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Add a new tree node for this NodeT, and link it as a child of</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// IDomNode</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DT.createNode(BB, IDomNode);</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a> &#123;</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>;</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/namespaces/llvm/#a0e00fad9c34de40b1e31f3aa6f8e024cae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>(<a href="/docs/api/namespaces/llvm/#a0e00fad9c34de40b1e31f3aa6f8e024cae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>) &#123;&#125;</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af333f58041fb0065bc38b36d28e3c7b0"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af333f58041fb0065bc38b36d28e3c7b0">BlockNamePrinter</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>(TN ? TN-&gt;getBlock() : nullptr) &#123;&#125;</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a1b5033078200b28cc6c14e9edf934418"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a1b5033078200b28cc6c14e9edf934418">operator&lt;&lt;</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a> &amp;BP) &#123;</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BP.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>)</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">        O &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;nullptr&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlight">        BP.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>-&gt;printAsOperand(O, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> O;</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a> = <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;NodePtr, unsigned&gt;</a>;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Custom DFS implementation which can skip nodes based on a provided</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// predicate. It also collects ReverseChildren so that we don&#39;t have to spend</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// time getting predecessors in SemiNCA.</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If IsReverse is set to true, the DFS walk will be performed backwards</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// relative to IsPostDom -- using reverse edges for dominators and forward</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// edges for postdominators.</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If SuccOrder is specified then in this order the DFS traverses the children</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// otherwise the order is implied by the results of getChildren().</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsReverse = false, </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DescendCondition&gt;</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> V, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LastNum, DescendCondition Condition,</span></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AttachToNum,</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a> &#42;SuccOrder = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V);</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;NodePtr, unsigned&gt;</a>, 64&gt; WorkList = &#123;&#123;V, AttachToNum&#125;&#125;;</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(V).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = AttachToNum;</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!WorkList.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>()) &#123;</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;BB, ParentNum&#93; = WorkList.<a href="/docs/api/classes/llvm/smallvectorimpl/#a0c8ffe664a36e30d49c84d0aded2fe08">pop&#95;back&#95;val</a>();</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BBInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB);</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">      BBInfo.ReverseChildren.push&#95;back(ParentNum);</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Visited nodes always have positive DFS numbers.</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BBInfo.DFSNum != 0) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">      BBInfo.Parent = ParentNum;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">      BBInfo.DFSNum = BBInfo.Semi = BBInfo.Label = ++LastNum;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.push&#95;back(BB);</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/loopinfo-cpp/#ab4c7e3039b29b12e4dc97bcae93d79c3">Direction</a> = IsReverse != <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>;  </span><span class="doxyHighlightComment">// XOR.</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Successors = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Direction&gt;</a>(BB, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>);</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccOrder &amp;&amp; Successors.size() &gt; 1)</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">            Successors.begin(), Successors.end(), &#91;=&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">              return SuccOrder-&gt;find(A)-&gt;second &lt; SuccOrder-&gt;find(B)-&gt;second;</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">            &#125;);</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Succ : Successors) &#123;</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Condition(BB, Succ)) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">        WorkList.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&#123;Succ, LastNum&#125;);</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LastNum;</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// V is a predecessor of W. eval() returns V if V &lt; W, otherwise the minimum</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of sdom(U), where U &gt; W and there is a virtual forest path from U to V. The</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// virtual forest consists of linked edges of processed vertices.</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We can follow Parent pointers (virtual forest edges) to determine the</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ancestor U with minimum sdom(U). But it is slow and thus we employ the path</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// compression technique to speed up to O(m&#42;log(n)). Theoretically the virtual</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// forest can be organized as balanced trees to achieve almost linear</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// O(m&#42;alpha(m,n)) running time. But it requires two auxiliary arrays (Size</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and Child) and is unlikely to be faster than the simple implementation.</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For each vertex V, its Label points to the vertex with the minimal sdom(U)</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (Semi) in its path from V (included) to NodeToInfo&#91;V&#93;.Parent (excluded).</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e">eval</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> V, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LastLinked,</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InfoRec &#42;&gt;</a> &amp;Stack,</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;InfoRec &#42;&gt;</a> NumToInfo) &#123;</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;VInfo = NumToInfo&#91;V&#93;;</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> &lt; LastLinked)</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Store ancestors except the last (root of a virtual tree) into a stack.</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Stack.empty());</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">      Stack.push&#95;back(VInfo);</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><span class="doxyHighlight">      VInfo = NumToInfo&#91;VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a>&#93;;</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> &gt;= LastLinked);</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Path compression. Point each vertex&#39;s Parent to the root and update its</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Label if any of its ancestors (PInfo-&gt;Label) has a smaller Semi.</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;PInfo = VInfo;</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;PLabelInfo = NumToInfo&#91;PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>&#93;;</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlight">      VInfo = Stack.pop&#95;back&#95;val();</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlight">      VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a>;</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;VLabelInfo = NumToInfo&#91;VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>&#93;;</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PLabelInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a> &lt; VLabelInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a>)</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">        VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a> = PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">        PLabelInfo = VLabelInfo;</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">      PInfo = VInfo;</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!Stack.empty());</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function requires DFS to be run before calling it.</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>() &#123;</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextDFSNum(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.size());</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec &#42;, 8&gt;</a> NumToInfo = &#123;</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">    NumToInfo.<a href="/docs/api/classes/llvm/smallvectorimpl/#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(NextDFSNum);</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Initialize IDoms to spanning tree parents.</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 1; i &lt; NextDFSNum; ++i) &#123;</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> V = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;VInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(V);</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">      VInfo.IDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;VInfo.Parent&#93;;</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlight">      NumToInfo.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;VInfo);</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #1: Calculate the semidominators of all vertices.</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec &#42;, 32&gt;</a> EvalStack;</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = NextDFSNum - 1; i &gt;= 2; --i) &#123;</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;WInfo = &#42;NumToInfo&#91;i&#93;;</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Initialize the semi dominator to point to the parent node.</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlight">      WInfo.Semi = WInfo.Parent;</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : WInfo.ReverseChildren) &#123;</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SemiU = NumToInfo&#91;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e">eval</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, i + 1, EvalStack, NumToInfo)&#93;-&gt;Semi;</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SemiU &lt; WInfo.Semi) WInfo.Semi = SemiU;</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #2: Explicitly define the immediate dominator of each vertex.</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//          IDom&#91;i&#93; = NCA(SDom&#91;i&#93;, SpanningTreeParent(i)).</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note that the parents were stored in IDoms and later got invalidated</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// during path compression in Eval.</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 2; i &lt; NextDFSNum; ++i) &#123;</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;WInfo = &#42;NumToInfo&#91;i&#93;;</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WInfo.Semi != 0);</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SDomNum = NumToInfo&#91;WInfo.Semi&#93;-&gt;DFSNum;</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> WIDomCandidate = WInfo.IDom;</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;WIDomCandidateInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(WIDomCandidate);</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (WIDomCandidateInfo.DFSNum &lt;= SDomNum)</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">        WIDomCandidate = WIDomCandidateInfo.IDom;</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><span class="doxyHighlight">      WInfo.IDom = WIDomCandidate;</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PostDominatorTree always has a virtual root that represents a virtual CFG</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// node that serves as a single exit from the function. All the other exits</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (CFG nodes with terminators and nodes in infinite loops are logically</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// connected to this virtual CFG exit node).</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This functions maps a nullptr CFG node to the virtual root tree node.</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>() &#123;</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Only postdominators have a virtual root&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.size() == 1 &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;SNCAInfo must be freshly constructed&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BBInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">    BBInfo.DFSNum = BBInfo.Semi = BBInfo.Label = 1;</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.push&#95;back(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);  </span><span class="doxyHighlightComment">// NumToNode&#91;1&#93; = nullptr;</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For postdominators, nodes with no forward successors are trivial roots that</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// are always selected as tree roots. Roots with forward successors correspond</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to CFG nodes within infinite loops.</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;N must be a valid node&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;false&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, BUI).<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>();</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Parent &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Parent not set&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;typename DomTreeT::ParentPtr&gt;::getEntryNode</a>(DT.Parent);</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Finds all roots without relaying on the set of roots already stored in the</span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// tree.</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We define roots to be some non-redundant set of the CFG nodes</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Parent &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Parent pointer is not set&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> Roots;</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For dominators, function entry CFG node is always a tree root node.</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlight">      Roots.push&#95;back(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(DT));</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Roots;</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// PostDominatorTree always has a virtual root.</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>();</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Num = 1;</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tLooking for trivial roots\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #1: Find all the trivial roots that are going to will definitely</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// remain tree roots.</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It may happen that there are some new nodes in the CFG that are result of</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the ongoing batch update, but we cannot really pretend that they don&#39;t</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// exist -- we won&#39;t see any outgoing or incoming edges to them, so it&#39;s</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// fine to discover them here, as they would end up appearing in the CFG at</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// some point anyway.</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlight">      ++<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a>;</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If it has no &#42;successors&#42;, it is definitely a root.</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, BUI)) &#123;</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlight">        Roots.push&#95;back(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Run DFS not to walk this part of CFG later.</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">        Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 1);</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Found a new trivial root: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Last visited node: &quot;</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;Num&#93;) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tLooking for non-trivial roots\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #2: Find all non-trivial root candidates. Those are CFG nodes that</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// are reverse-unreachable were not visited by previous DFS walks (i.e. CFG</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// nodes in infinite loops).</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasNonTrivialRoots = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Accounting for the virtual exit, see if we had any reverse-unreachable</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// nodes.</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> + 1 != Num) &#123;</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">      HasNonTrivialRoots = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// SuccOrder is the order of blocks in the function. It is needed to make</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// the calculation of the FurthestAway node and the whole PostDomTree</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// immune to swap successors transformation (e.g. canonicalizing branch</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// predicates). SuccOrder is initialized lazily only for successors of</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// reverse unreachable nodes.</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">      std::optional&lt;NodeOrderMap&gt; SuccOrder;</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> InitSuccOrderOnce = &#91;&amp;&#93;() &#123;</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">        SuccOrder = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a>();</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/classes/node">Node</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent))</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/classes/node">Node</a>).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0)</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Succ : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;false&gt;</a>(<a href="/docs/api/classes/node">Node</a>, SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>))</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">              SuccOrder-&gt;try&#95;emplace(Succ, 0);</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Add mapping for all entries of SuccOrder.</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NodeNum = 0;</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/classes/node">Node</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">          ++NodeNum;</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Order = SuccOrder-&gt;find(<a href="/docs/api/classes/node">Node</a>);</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Order != SuccOrder-&gt;end()) &#123;</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Order-&gt;second == 0);</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">            Order-&gt;second = NodeNum;</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">      &#125;;</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Make another DFS pass over all other nodes to find the</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// reverse-unreachable blocks, and find the furthest paths we&#39;ll be able</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// to make.</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Note that this looks N^2, but it&#39;s really 2N worst case, if every node</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// is unreachable. This is because we are still going to only visit each</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// unreachable node once, we may just visit it in two directions,</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// depending on how lucky we get.</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0) &#123;</span></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">                     &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\tVisiting node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Find the furthest away we can get by following successors, then</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// follow them in reverse.  This gives us some reasonable answer about</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// the post-dom tree inside any infinite loop. In particular, it</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// guarantees we get to the farthest away point along &#42;some&#42;</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// path. This also matches the GCC&#39;s behavior.</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// If we really wanted a totally complete picture of dominance inside</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// this infinite loop, we could do it with SCC-like algorithms to find</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// the lowest and highest points in the infinite loop.  In theory, it</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// would be nice to give the canonical backedge for the loop, but it&#39;s</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// expensive and does not always lead to a minimal set of roots.</span></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\tRunning forward DFS\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SuccOrder)</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">            InitSuccOrderOnce();</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccOrder);</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewNum =</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">              SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>&lt;</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, Num, &amp;&#42;SuccOrder);</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> FurthestAway = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;NewNum&#93;;</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\tFound a new furthest away node &quot;</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">                            &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;(non-trivial root): &quot;</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(FurthestAway) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">          Roots.push&#95;back(FurthestAway);</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\tPrev DFSNum: &quot;</span><span class="doxyHighlight"> &lt;&lt; Num &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, new DFSNum: &quot;</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">                            &lt;&lt; NewNum &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\t\\t\\tRemoving DFS info\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = NewNum; i &gt; Num; --i) &#123;</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\t\\tRemoving DFS info for &quot;</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">            SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) = &#123;&#125;;</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">            SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#ad97688dfe9cd802e2a0691cbe620218a">pop&#95;back</a>();</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PrevNum = Num;</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\tRunning reverse DFS\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlight">          Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(FurthestAway, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 1);</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = PrevNum + 1; i &lt;= Num; ++i)</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\t\\t\\tfound node &quot;</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Total: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, Num: &quot;</span><span class="doxyHighlight"> &lt;&lt; Num &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Discovered CFG nodes:\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt;= Num; ++i) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">               &lt;&lt; i &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> + 1 == Num) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Everything should have been visited&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #3: If we found some non-trivial roots, make them non-redundant.</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasNonTrivialRoots) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea">RemoveRedundantRoots</a>(DT, BUI, Roots);</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Found roots: &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Root</span></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">                    : Roots) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">               &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Roots;</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This function only makes sense for postdominators.</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We define roots to be some set of CFG nodes where (reverse) DFS walks have</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to start in order to visit all the CFG nodes (including the</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// reverse-unreachable ones).</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// When the search for non-trivial roots is done it may happen that some of</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the non-trivial roots are reverse-reachable from other non-trivial roots,</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// which makes them redundant. This function removes them from the set of</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// input roots.</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea">RemoveRedundantRoots</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">                                   <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> &amp;Roots) &#123;</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;This function is for postdominators only&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Removing redundant roots\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; Roots.size(); ++i) &#123;</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Root = Roots&#91;i&#93;;</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Trivial roots are always non-redundant.</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(Root, BUI)) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tChecking if &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root)</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; remains a root\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">      SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Do a forward walk looking for the other roots.</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>&lt;</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">&gt;(Root, 0, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 0);</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip the start node and begin from the second one (note that DFS uses</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// 1-based indexing).</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> x = 2; x &lt;= Num; ++x) &#123;</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;x&#93;;</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// If we wound another root in a (forward) DFS walk, remove the current</span></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// root from the set of roots, as it is reverse-reachable from the other</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// one.</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(Roots, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)) &#123;</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tForward DFS walk found another root &quot;</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlight">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\tRemoving root &quot;</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">          <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Root, Roots.back());</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">          Roots.pop&#95;back();</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Root at the back takes the current root&#39;s place.</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Start the next loop iteration with the same index.</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">          --i;</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DescendCondition&gt;</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT, DescendCondition DC) &#123;</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Roots.size() == 1 &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Dominators should have a singe root&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(DT.Roots&#91;0&#93;, 0, DC, 0);</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>();</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Num = 1;</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root : DT.Roots) Num = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(Root, Num, DC, 1);</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;Parent = DT.Parent;</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">    DT.reset();</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">    DT.Parent = Parent;</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the update is using the actual CFG, BUI is null. If it&#39;s using a view,</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// BUI is non-null and the PreCFGView is used. When calculating from</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// scratch, make the PreViewCFG equal to the PostCFGView, so Post is used.</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> PostViewBUI = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BUI &amp;&amp; BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>) &#123;</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">      BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a> = &#42;BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>;</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">      PostViewBUI = BUI;</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This is rebuilding the whole tree, not incrementally, but PostViewBUI is</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// used in case the caller needs a DT update with a CFGView.</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(PostViewBUI);</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Step #0: Number blocks in depth-first order and initialize variables used</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// in later stages of the algorithm.</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">    DT.Roots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, PostViewBUI);</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>);</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BUI) &#123;</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">      BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DomTree recalculated, skipping future batch updates\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.Roots.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Add a node for the root. If the tree is a PostDominatorTree it will be</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the virtual exit (denoted by (BasicBlock &#42;) nullptr) which postdominates</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// all real exits (including multiple exit blocks, infinite loops).</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> ? nullptr : DT.Roots&#91;0&#93;;</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">    DT.RootNode = DT.createNode(Root);</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DT, DT.RootNode);</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DomTreeT&amp; DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> AttachTo) &#123;</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Attach the first unreachable block to AttachTo.</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;1&#93;).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = AttachTo-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Loop over all of the discovered blocks in the function...</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> W : <a href="/docs/api/namespaces/llvm/#a02981de53fb6ffd384d39addc4d25f37">llvm::drop&#95;begin</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>)) &#123;</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.getNode(W))</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Already calculated the node before</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> ImmDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(W);</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Get or calculate the node for the immediate dominator.</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDomNode = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(ImmDom, DT);</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Add a new tree node for this BasicBlock, and link it as a child of</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// IDomNode.</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">      DT.createNode(W, IDomNode);</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> AttachTo) &#123;</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;1&#93;).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = AttachTo-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/namespaces/llvm/#a02981de53fb6ffd384d39addc4d25f37">llvm::drop&#95;begin</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>)) &#123;</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN);</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NewIDom = DT.getNode(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>).IDom);</span></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">      TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a2d97875c33b38014d365da0193d8aa21">setIDom</a>(NewIDom);</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Helper struct used during edge insertions.</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> &#123;</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare">Compare</a> &#123;</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare/#a79fb7f86e6afcd849cad94e25eb730e7"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare/#a79fb7f86e6afcd849cad94e25eb730e7">operator()</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getLevel() &lt; <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getLevel();</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bucket queue of tree nodes ordered by descending level. For simplicity,</span></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// we use a priority&#95;queue here.</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">    std::priority&#95;queue&lt;TreeNodePtr, SmallVector&lt;TreeNodePtr, 8&gt;,</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">                        Compare&gt;</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a628a606cded13014b9f2ce9a42ead0d3"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a628a606cded13014b9f2ce9a42ead0d3">Bucket</a>;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#ab27475b6e0a6bbdd0a354f9aa8f0fc4b"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smalldenseset">SmallDenseSet&lt;TreeNodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#ab27475b6e0a6bbdd0a354f9aa8f0fc4b">Visited</a>;</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a96afdf4edb6595d905b097dd2c95bf02"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a96afdf4edb6595d905b097dd2c95bf02">Affected</a>;</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> VisitedUnaffected;</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((From || <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &amp;&amp;</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;From has to be a valid CFG node or a virtual root&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(To &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Cannot be a nullptr&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Inserting edge &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN = DT.getNode(From);</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FromTN) &#123;</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Ignore edges from unreachable nodes for (forward) dominators.</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The unreachable node becomes a new root -- a tree node for it.</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> VirtualRoot = DT.getNode(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlight">      FromTN = DT.createNode(From, VirtualRoot);</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlight">      DT.Roots.push&#95;back(From);</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">    DT.DFSInfoValid = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ToTN)</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6">InsertUnreachable</a>(DT, BUI, FromTN, To);</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, FromTN, ToTN);</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Determines if some existing root becomes reverse-reachable after the</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// insertion. Rebuilds the whole tree if that situation happens.</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88">UpdateRootsBeforeInsertion</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From,</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;This function is only for postdominators&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Destination node is not attached to the virtual root, so it cannot be a</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// root.</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DT.isVirtualRoot(To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>())) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(DT.Roots, To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()))</span></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;  </span><span class="doxyHighlightComment">// To is not a root, nothing to update.</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tAfter the insertion, &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is no longer a root\\n\\t\\tRebuilding the tree!!!\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</span></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;NodePtr&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;NodePtr&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.size() != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.size())</span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;NodePtr, 4&gt;</a> Set(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.begin(), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.end());</span></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Set.count(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) == 0)</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Updates the set of roots after insertion or deletion. This ensures that</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// roots are the same when after a series of updates and when the tree would</span></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// be built from scratch.</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;This function is only for postdominators&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The tree has only trivial roots -- nothing to update.</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none&#95;of</a>(DT.Roots, &#91;BUI&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</span></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">          return HasForwardSuccessors(N, BUI);</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">        &#125;))</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Recalculate the set of roots.</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> Roots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, BUI);</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(DT.Roots, Roots)) &#123;</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The roots chosen in the CFG have changed. This is because the</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// incremental algorithm does not really know or use the set of roots and</span></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// can make a different (implicit) decision about which node within an</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// infinite loop becomes a root.</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Roots are different in updated trees\\n&quot;</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;The entire tree needs to be rebuilt\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// It may be possible to update the tree without recalculating it, but</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// we do not know yet how to do it, and it happens rarely in practice.</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handles insertion to a node already in the dominator tree.</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tReachable &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88">UpdateRootsBeforeInsertion</a>(DT, BUI, From, To)) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// DT.findNCD expects both pointers to be valid. When From is a virtual</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// root, then its CFG block pointer is a nullptr, so we have to &#39;compute&#39;</span></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the NCD manually.</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock =</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">        (From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>() &amp;&amp; To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">            ? DT.findNearestCommonDominator(From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">            : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCDBlock || DT.isPostDominator());</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCD);</span></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tNCA == &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NCDLevel = NCD-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Based on Lemma 2.5 from &#91;2&#93;, after insertion of (From,To), v is affected</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// iff depth(NCD)+1 &lt; depth(v) &amp;&amp; a path P from To to v exists where every</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// w on P s.t. depth(v) &lt;= depth(w)</span></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This reduces to a widest path problem (maximizing the depth of the</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// minimum vertex in the path) which can be solved by a modified version of</span></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Dijkstra with a bucket queue (named depth-based search in &#91;2&#93;).</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// To is in the path, so depth(NCD)+1 &lt; depth(v) &lt;= depth(To). Nothing</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// affected if this does not hold.</span></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NCDLevel + 1 &gt;= To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>())</span></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> UnaffectedOnCurrentLevel;</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.push(To);</span></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.insert(To);</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.empty()) &#123;</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.top();</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.pop();</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Affected.push&#95;back(TN);</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CurrentLevel = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Mark &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt;</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">                 </span><span class="doxyHighlightStringLiteral">&quot;as affected, CurrentLevel &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrentLevel &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.count(TN) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Preconditions!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Unlike regular Dijkstra, we have an inner loop to expand more</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// vertices. The first iteration is for the (affected) vertex popped</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// from II.Bucket and the rest are for vertices in</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// UnaffectedOnCurrentLevel, which may eventually expand to affected</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// vertices.</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Invariant: there is an optimal path from &#96;To&#96; to TN with the minimum</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// depth being CurrentLevel.</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Succ : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;IsPostDom&gt;</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), BUI)) &#123;</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> SuccTN = DT.getNode(Succ);</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccTN &amp;&amp;</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">                 </span><span class="doxyHighlightStringLiteral">&quot;Unreachable successor found at reachable insertion&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SuccLevel = SuccTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tSuccessor &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ)</span></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">                            &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, level = &quot;</span><span class="doxyHighlight"> &lt;&lt; SuccLevel &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// There is an optimal path from &#96;To&#96; to Succ with the minimum depth</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// being min(CurrentLevel, SuccLevel).</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// If depth(NCD)+1 &lt; depth(Succ) is not satisfied, Succ is unaffected</span></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// and no affected vertex may be reached by a path passing through it.</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Stop here. Also, Succ may be visited by other predecessors but the</span></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// first visit has the optimal path. Stop if Succ has been visited.</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccLevel &lt;= NCDLevel + 1 || !<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.insert(SuccTN).second)</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccLevel &gt; CurrentLevel) &#123;</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// Succ is unaffected but it may (transitively) expand to affected</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// vertices. Store it in UnaffectedOnCurrentLevel.</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tMarking visited not affected &quot;</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><span class="doxyHighlight">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">            UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(SuccTN);</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.VisitedUnaffected.push&#95;back(SuccTN);</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// The condition is satisfied (Succ is affected). Add Succ to the</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// bucket queue.</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t\\tAdd &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ)</span></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">                              &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; to a Bucket\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.push(SuccTN);</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>())</span></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">        TN = UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectorimpl/#a0c8ffe664a36e30d49c84d0aded2fe08">pop&#95;back&#95;val</a>();</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Next: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Finish by updating immediate dominators and levels.</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4">UpdateInsertion</a>(DT, BUI, NCD, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</span></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Updates immediate dominators and levels after insertion.</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4">UpdateInsertion</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>) &#123;</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Updating NCD = &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Affected) &#123;</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tIDom(&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) = &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><span class="doxyHighlight">      TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a2d97875c33b38014d365da0193d8aa21">setIDom</a>(NCD);</span></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS &amp;&amp; !defined(NDEBUG)</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.VisitedUnaffected)</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() == TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>()-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() + 1 &amp;&amp;</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;TN should have been updated by an affected ancestor&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DT, BUI);</span></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handles insertion to previously unreachable nodes.</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6">InsertUnreachable</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlight">                                </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Inserting &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From)</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; (unreachable) &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Collect discovered edges to already reachable nodes.</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;NodePtr, TreeNodePtr&gt;</a>, 8&gt; DiscoveredEdgesToReachable;</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Discover and connect nodes that became reachable with the insertion.</span></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9">ComputeUnreachableDominators</a>(DT, BUI, To, From, DiscoveredEdgesToReachable);</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Inserted &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From)</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; (prev unreachable) &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Used the discovered edges and inset discovered connecting (incoming)</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// edges.</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Edge : DiscoveredEdgesToReachable) &#123;</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tInserting discovered connecting edge &quot;</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Edge.first) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><span class="doxyHighlight">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Edge.second) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, DT.getNode(Edge.first), Edge.second);</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Connects nodes that become reachable with an insertion.</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9">ComputeUnreachableDominators</a>(</span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><span class="doxyHighlight">      DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root,</span></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/structs/llvm/incoming">Incoming</a>,</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt;std::pair&lt;NodePtr, TreeNodePtr&gt;&gt;</span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">          &amp;DiscoveredConnectingEdges) &#123;</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DT.getNode(Root) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Root must not be reachable&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Visit only previously unreachable nodes.</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnreachableDescender = &#91;&amp;DT, &amp;DiscoveredConnectingEdges&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From,</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><span class="doxyHighlight">                                                                  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ToTN) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">      DiscoveredConnectingEdges.push&#95;back(&#123;From, ToTN&#125;);</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</span></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(Root, 0, UnreachableDescender, 0);</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DT, <a href="/docs/api/structs/llvm/incoming">Incoming</a>);</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;After adding unreachable nodes\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(From &amp;&amp; To &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Cannot disconnect nullptrs&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Deleting edge &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Ensure that the edge was in fact deleted from the CFG before informing</span></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the DomTree about it.</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The check is O(N), so run it only in debug configuration.</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsSuccessor = &#91;BUI&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> SuccCandidate, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Of) &#123;</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Successors = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;IsPostDom&gt;</a>(Of, BUI);</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(Successors, SuccCandidate);</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><span class="doxyHighlight">    (void)IsSuccessor;</span></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsSuccessor(To, From) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Deleted edge still exists in the CFG!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN = DT.getNode(From);</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Deletion in an unreachable subtree -- nothing to do.</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!FromTN) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ToTN) &#123;</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tTo (&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><span class="doxyHighlight">                 &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) already unreachable -- there is no edge to delete\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock = DT.findNearestCommonDominator(From, To);</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</span></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If To dominates From -- nothing to do.</span></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ToTN != NCD) &#123;</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">      DT.DFSInfoValid = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToIDom = ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tNCD &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, ToIDom &quot;</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToIDom) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// To remains reachable after deletion.</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// (Based on the caption under Figure 4 from &#91;2&#93;.)</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FromTN != ToIDom || <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0">HasProperSupport</a>(DT, BUI, ToTN))</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf">DeleteReachable</a>(DT, BUI, FromTN, ToTN);</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e">DeleteUnreachable</a>(DT, BUI, ToTN);</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DT, BUI);</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handles deletions that leave destination nodes reachable.</span></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf">DeleteReachable</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN,</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN) &#123;</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Deleting reachable &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(FromTN)</span></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; -&gt; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tRebuilding subtree\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Find the top of the subtree that needs to be rebuilt.</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// (Based on the lemma 2.6 from &#91;2&#93;.)</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> ToIDom =</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">        DT.findNearestCommonDominator(FromTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToIDom || DT.isPostDominator());</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToIDomTN = DT.getNode(ToIDom);</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToIDomTN);</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> PrevIDomSubTree = ToIDomTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</span></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Top of the subtree to rebuild is the root node. Rebuild the tree from</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// scratch.</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PrevIDomSubTree) &#123;</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;The entire tree needs to be rebuilt\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Only visit nodes in the subtree starting at To.</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Level = ToIDomTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DescendBelow = &#91;Level, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DT.getNode(To)-&gt;getLevel() &gt; Level;</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tTop of subtree: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToIDomTN)</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(ToIDom, 0, DescendBelow, 0);</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tRunning Semi-NCA\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DT, PrevIDomSubTree);</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Checks if a node has proper support, as defined on the page 3 and later</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// explained on the page 7 of &#91;2&#93;.</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0">HasProperSupport</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) &#123;</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;IsReachableFromIDom &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> TNB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Pred : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;!IsPostDom&gt;</a>(TNB, BUI)) &#123;</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tPred &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Pred) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DT.getNode(Pred)) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Support = DT.findNearestCommonDominator(TNB, Pred);</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tSupport &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Support) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Support != TNB) &#123;</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is reachable from support &quot;</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Support) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle deletions that make destination node unreachable.</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (Based on the lemma 2.7 from the &#91;2&#93;.)</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e">DeleteUnreachable</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><span class="doxyHighlight">                                </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN) &#123;</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Deleting unreachable subtree &quot;</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToTN);</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Deletion makes a region reverse-unreachable and creates a new root.</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Simulate that by inserting an edge from the virtual root to ToTN and</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// adding it as a new root.</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tDeletion made a region reverse-unreachable\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tAdding new root &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN)</span></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">      DT.Roots.push&#95;back(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, DT.getNode(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">), ToTN);</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 16&gt;</a> AffectedQueue;</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Level = ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Traverse destination node&#39;s descendants with greater level in the tree</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and collect visited nodes.</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DescendAndCollect = &#91;Level, &amp;AffectedQueue, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(To);</span></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN);</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &gt; Level) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(AffectedQueue, To))</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">        AffectedQueue.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(To);</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LastDFSNum =</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">        SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), 0, DescendAndCollect, 0);</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> MinNode = ToTN;</span></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Identify the top of the subtree to rebuild by finding the NCD of all</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the affected nodes.</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : AffectedQueue) &#123;</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock =</span></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">          DT.findNearestCommonDominator(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCDBlock || DT.isPostDominator());</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCD);</span></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Processing affected node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; with NCD = &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD)</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, MinNode =&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(MinNode) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NCD != TN &amp;&amp; NCD-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt; MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>()) MinNode = NCD;</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Root reached, rebuild the whole tree from scratch.</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>()) &#123;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;The entire tree needs to be rebuilt\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Erase the unreachable subtree in reverse preorder to process all children</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// before deleting their parent.</span></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = LastDFSNum; i &gt; 0; --i) &#123;</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Erasing node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>))</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><span class="doxyHighlight">      DT.eraseNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The affected subtree start at the To node -- there&#39;s no extra work to do.</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MinNode == ToTN) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DeleteUnreachable: running DFS with MinNode = &quot;</span></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(MinNode) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MinLevel = MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> PrevIDom = MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevIDom);</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Identify nodes that remain in the affected subtree.</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DescendBelow = &#91;MinLevel, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ToTN &amp;&amp; ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &gt; MinLevel;</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), 0, DescendBelow, 0);</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Previous IDom(MinNode) = &quot;</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(PrevIDom) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\nRunning Semi-NCA\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Rebuild the remaining part of affected subtree.</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><span class="doxyHighlight">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DT, PrevIDom);</span></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//~~</span></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//===--------------------- DomTree Batch Updater --------------------------===</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//~~</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46">ApplyUpdates</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;PreViewCFG,</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">                           <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;PostViewCFG) &#123;</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note: the PostViewCFG is only used when computing from scratch. It&#39;s data</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// should already included in the PreViewCFG for incremental updates.</span></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> NumUpdates = PreViewCFG.<a href="/docs/api/classes/llvm/graphdiff/#abf8532d450c03fedf6af2f69f29388cf">getNumLegalizedUpdates</a>();</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumUpdates == 0)</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Take the fast path for a single update and avoid running the batch update</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// machinery.</span></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumUpdates == 1) &#123;</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> Update = PreViewCFG.<a href="/docs/api/classes/llvm/graphdiff/#ab2a3b8f6ebc0db2628ad35dc728fde42">popUpdateForIncrementalUpdates</a>();</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PostViewCFG) &#123;</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Update.getKind() == UpdateKind::Insert)</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, </span><span class="doxyHighlightComment">/&#42;BUI=&#42;/</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, Update.getFrom(), Update.getTo());</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, </span><span class="doxyHighlightComment">/&#42;BUI=&#42;/</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, Update.getFrom(), Update.getTo());</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> BUI(&#42;PostViewCFG, PostViewCFG);</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Update.getKind() == UpdateKind::Insert)</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, &amp;BUI, Update.getFrom(), Update.getTo());</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlight">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, &amp;BUI, Update.getFrom(), Update.getTo());</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> BUI(PreViewCFG, PostViewCFG);</span></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Recalculate the DominatorTree when the number of updates</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// exceeds a threshold, which usually makes direct updating slower than</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// recalculation. We select this threshold proportional to the</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// size of the DominatorTree. The constant is selected</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// by choosing the one with an acceptable performance on some real-world</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// inputs.</span></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Make unittests of the incremental algorithm work</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.DomTreeNodes.size() &lt;= 100) &#123;</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &gt; DT.DomTreeNodes.size())</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, &amp;BUI);</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &gt; DT.DomTreeNodes.size() / 40)</span></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, &amp;BUI);</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the DominatorTree was recalculated at some point, stop the batch</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// updates. Full recalculations ignore batch updates and look at the actual</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// CFG.</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0; i &lt; BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &amp;&amp; !BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a>; ++i)</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c">ApplyNextUpdate</a>(DT, BUI);</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c">ApplyNextUpdate</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &amp;BUI) &#123;</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Popping the next update, will move the PreViewCFG to the next snapshot.</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> CurrentUpdate = BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.<a href="/docs/api/classes/llvm/graphdiff/#ab2a3b8f6ebc0db2628ad35dc728fde42">popUpdateForIncrementalUpdates</a>();</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><span class="doxyHighlightPreprocessor">#if 0</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: The LLVM&#95;DEBUG macro only plays well with a modular</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// build of LLVM when the header is marked as textual, but doing</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// so causes redefinition errors.</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Applying update: &quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(CurrentUpdate.dump(); <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrentUpdate.getKind() == UpdateKind::Insert)</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, &amp;BUI, CurrentUpdate.getFrom(), CurrentUpdate.getTo());</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, &amp;BUI, CurrentUpdate.getFrom(), CurrentUpdate.getTo());</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//~~</span></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//===--------------- DomTree correctness verification ---------------------===</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//~~</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the tree has correct roots. A DominatorTree always has a single</span></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// root which is the function&#39;s entry node. A PostDominatorTree can have</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// multiple roots - one for each node with no successors and for infinite</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// loops.</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N).</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847">verifyRoots</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DT.Parent &amp;&amp; !DT.Roots.empty()) &#123;</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Tree has no parent but has roots!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.Roots.empty()) &#123;</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Tree doesn&#39;t have a root!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.getRoot() != <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(DT)) &#123;</span></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Tree&#39;s root is not its parent&#39;s entry node!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> ComputedRoots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(DT.Roots, ComputedRoots)) &#123;</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Tree has different roots than freshly computed ones!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tPDT roots: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : DT.Roots) <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\tComputed roots: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : ComputedRoots)</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Checks if the tree contains all reachable nodes in the input graph.</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N).</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de">verifyReachability</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>);</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</span></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TN)</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Virtual root has a corresponding virtual CFG node.</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.isVirtualRoot(TN)) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB).DFSNum == 0) &#123;</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DomTree node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">               &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; not found by DFS walk!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>) &#123;</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; !DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)) &#123;</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;CFG node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">               &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; not found in the DomTree!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if for every parent with a level L in the tree all of its children</span></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// have level L + 1</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N).</span></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0">VerifyLevels</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</span></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TN)</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BB) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDom = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IDom &amp;&amp; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() != 0) &#123;</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Node without an IDom &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">               &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has a nonzero level &quot;</span><span class="doxyHighlight"> &lt;&lt; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IDom &amp;&amp; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() != IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() + 1) &#123;</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has level &quot;</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">               &lt;&lt; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; while its IDom &quot;</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">               &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has level &quot;</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">               &lt;&lt; IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the computed DFS numbers are correct. Note that DFS info may not</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// be valid, and when that is the case, we don&#39;t verify the numbers.</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N log(N)).</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8">VerifyDFSNumbers</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DT.DFSInfoValid || !DT.Parent)</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> RootBB = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> ? nullptr : &#42;DT.root&#95;begin();</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Root = DT.getNode(RootBB);</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PrintNodeAndDFSNums = &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) &#123;</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#123;&quot;</span><span class="doxyHighlight"> &lt;&lt; TN-&gt;getDFSNumIn() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><span class="doxyHighlight">             &lt;&lt; TN-&gt;getDFSNumOut() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&#125;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Verify the root&#39;s DFS In number. Although DFS numbering would also work</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// if we started from some other value, we assume 0-based numbering.</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Root-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>() != 0) &#123;</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DFSIn number for the tree root is not:\\n\\t&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">      PrintNodeAndDFSNums(Root);</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For each tree node verify if children&#39;s DFS numbers cover their parent&#39;s</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// DFS numbers with no gaps.</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/classes/node">Node</a> = NodeToTN.get();</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/node">Node</a>)</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Handle tree leaves.</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/node">Node</a>-&gt;isLeaf()) &#123;</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumIn() + 1 != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumOut()) &#123;</span></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Tree leaf should have DFSOut = DFSIn + 1:\\n\\t&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">          PrintNodeAndDFSNums(<a href="/docs/api/classes/node">Node</a>);</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Make a copy and sort it such that it is possible to check if there are</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// no gaps between DFS numbers of adjacent children.</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> Children(<a href="/docs/api/classes/node">Node</a>-&gt;begin(), <a href="/docs/api/classes/node">Node</a>-&gt;end());</span></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(Children, &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch1, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch2) &#123;</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ch1-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>() &lt; Ch2-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>();</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PrintChildrenError = &#91;<a href="/docs/api/classes/node">Node</a>, &amp;Children, PrintNodeAndDFSNums&#93;(</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FirstCh, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> SecondCh) &#123;</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstCh);</span></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Incorrect DFS numbers for:\\n\\tParent &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">        PrintNodeAndDFSNums(<a href="/docs/api/classes/node">Node</a>);</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\tChild &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><span class="doxyHighlight">        PrintNodeAndDFSNums(FirstCh);</span></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SecondCh) &#123;</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\tSecond child &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">          PrintNodeAndDFSNums(SecondCh);</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\nAll children: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch : Children) &#123;</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><span class="doxyHighlight">          PrintNodeAndDFSNums(Ch);</span></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><span class="doxyHighlight">      &#125;;</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Children.front()-&gt;getDFSNumIn() != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumIn() + 1) &#123;</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlight">        PrintChildrenError(Children.front(), </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Children.back()-&gt;getDFSNumOut() + 1 != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumOut()) &#123;</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">        PrintChildrenError(Children.back(), </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">size&#95;t</span><span class="doxyHighlight"> i = 0, e = Children.size() - 1; i != e; ++i) &#123;</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Children&#91;i&#93;-&gt;getDFSNumOut() + 1 != Children&#91;i + 1&#93;-&gt;getDFSNumIn()) &#123;</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">          PrintChildrenError(Children&#91;i&#93;, Children&#91;i + 1&#93;);</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The below routines verify the correctness of the dominator tree relative to</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the CFG it&#39;s coming from.  A tree is a dominator tree iff it has two</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// properties, called the parent property and the sibling property.  Tarjan</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and Lengauer prove (but don&#39;t explicitly name) the properties as part of</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the proofs in their 1972 paper, but the proofs are mostly part of proving</span></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// things about semidominators and idoms, and some of them are simply asserted</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// based on even earlier papers (see, e.g., lemma 2).  Some papers refer to</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// these properties as &quot;valid&quot; and &quot;co-valid&quot;.  See, e.g., &quot;Dominators,</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// directed bipolar orders, and independent spanning trees&quot; by Loukas</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Georgiadis and Robert E. Tarjan, as well as &quot;Dominator Tree Verification</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and Vertex-Disjoint Paths &quot; by the same authors.</span></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A very simple and direct explanation of these properties can be found in</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &quot;An Experimental Study of Dynamic Dominators&quot;, found at</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// https://arxiv.org/abs/1604.02711</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The easiest way to think of the parent property is that it&#39;s a requirement</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of being a dominator.  Let&#39;s just take immediate dominators.  For PARENT to</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// be an immediate dominator of CHILD, all paths in the CFG must go through</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PARENT before they hit CHILD.  This implies that if you were to cut PARENT</span></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// out of the CFG, there should be no paths to CHILD that are reachable.  If</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// there are, then you now have a path from PARENT to CHILD that goes around</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PARENT and still reaches CHILD, which by definition, means PARENT can&#39;t be</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// a dominator of CHILD (let alone an immediate one).</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The sibling property is similar.  It says that for each pair of sibling</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// nodes in the dominator tree (LEFT and RIGHT) , they must not dominate each</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// other.  If sibling LEFT dominated sibling RIGHT, it means there are no</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// paths in the CFG from sibling LEFT to sibling RIGHT that do not go through</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// LEFT, and thus, LEFT is really an ancestor (in the dominator tree) of</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RIGHT, not a sibling.</span></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It is possible to verify the parent and sibling properties in linear time,</span></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// but the algorithms are complex. Instead, we do it in a straightforward</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// N^2 and N^3 way below, using direct path reachability.</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Checks if the tree has the parent property: if for all edges from V to W in</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the input graph, such that V is reachable, the parent of W in the tree is</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// an ancestor of V in the tree.</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N^2).</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This means that if a node gets disconnected from the graph, then all of</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the nodes it dominated previously will now become unreachable.</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7">verifyParentProperty</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TN)</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BB || TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a25b833c85afc5c3de7c2c4e38ac6b146">isLeaf</a>())</span></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Verifying parent property of node &quot;</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, &#91;BB&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> From != BB &amp;&amp; To != BB;</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Child : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>())</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(Child-&gt;getBlock()).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> != 0) &#123;</span></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Child &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Child)</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><span class="doxyHighlight">                 &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; reachable after its parent &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</span></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><span class="doxyHighlight">                 &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is removed!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the tree has sibling property: if a node V does not dominate a</span></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// node W for all siblings V and W in the tree.</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N^3).</span></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This means that if a node gets disconnected from the graph, then all of its</span></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// siblings will now still be reachable.</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4">verifySiblingProperty</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</span></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TN)</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</span></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BB || TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a25b833c85afc5c3de7c2c4e38ac6b146">isLeaf</a>())</span></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>()) &#123;</span></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BBN = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getBlock();</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, &#91;BBN&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</span></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> From != BBN &amp;&amp; To != BBN;</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><span class="doxyHighlight">        &#125;);</span></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> S : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>()) &#123;</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (S == <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(S-&gt;getBlock()).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0) &#123;</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Node &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(S)</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">                   &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; not reachable when its sibling &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><span class="doxyHighlight">                   &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; is removed!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the given tree is the same as a freshly computed one for the same</span></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Parent.</span></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Running time: O(N^2), but faster in practice (same as tree construction).</span></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Note that this does not check if that the tree construction algorithm is</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// correct and should be only used for fast (but possibly unsound)</span></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// verification.</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712">IsSameAsFreshTree</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><span class="doxyHighlight">    DomTreeT FreshTree;</span></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><span class="doxyHighlight">    FreshTree.recalculate(&#42;DT.Parent);</span></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Different = DT.compare(FreshTree);</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Different) &#123;</span></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; (DT.isPostDominator() ? </span><span class="doxyHighlightStringLiteral">&quot;Post&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;DominatorTree is different than a freshly computed one!\\n&quot;</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\tCurrent:\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">      DT.print(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n\\tFreshly computed tree:\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">      FreshTree.print(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !Different;</span></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a73e198fec8305bc64938bc784a8f0d1c"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a73e198fec8305bc64938bc784a8f0d1c">Calculate</a>(DomTreeT &amp;DT) &#123;</span></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">SemiNCAInfo&lt;DomTreeT&gt;::CalculateFromScratch</a>(DT, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a21425ba1759b3e091d72ce8333be2ff1"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a21425ba1759b3e091d72ce8333be2ff1">CalculateWithUpdates</a>(DomTreeT &amp;DT,</span></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlight">                          <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;typename DomTreeT::UpdateType&gt;</a> Updates) &#123;</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Updated to use the PreViewCFG and behave the same as until now.</span></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This behavior is however incorrect; this actually needs the PostViewCFG.</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff&lt;typename DomTreeT::NodePtr, DomTreeT::IsPostDominator&gt;</a> PreViewCFG(</span></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlight">      Updates, </span><span class="doxyHighlightComment">/&#42;ReverseApplyUpdates=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">SemiNCAInfo&lt;DomTreeT&gt;::BatchUpdateInfo</a> BUI(PreViewCFG);</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">SemiNCAInfo&lt;DomTreeT&gt;::CalculateFromScratch</a>(DT, &amp;BUI);</span></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#ab5e2b97e90221527d92449f4ac5159f6"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#ab5e2b97e90221527d92449f4ac5159f6">InsertEdge</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr From,</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlight">                </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr To) &#123;</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.isPostDominator()) <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(From, To);</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">SemiNCAInfo&lt;DomTreeT&gt;::InsertEdge</a>(DT, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, From, To);</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a70aa6f22ccb403c6b716d03783275dfd"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a70aa6f22ccb403c6b716d03783275dfd">DeleteEdge</a>(DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr From,</span></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">                </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr To) &#123;</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DT.isPostDominator()) <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(From, To);</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">SemiNCAInfo&lt;DomTreeT&gt;::DeleteEdge</a>(DT, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">, From, To);</span></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a938230b97505e69266ab1f8ac0eb5db7"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a938230b97505e69266ab1f8ac0eb5db7">ApplyUpdates</a>(DomTreeT &amp;DT,</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff</a>&lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr,</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">                            DomTreeT::IsPostDominator&gt; &amp;PreViewCFG,</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff</a>&lt;</span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::NodePtr,</span></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">                            DomTreeT::IsPostDominator&gt; &#42;PostViewCFG) &#123;</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46">SemiNCAInfo&lt;DomTreeT&gt;::ApplyUpdates</a>(DT, PreViewCFG, PostViewCFG);</span></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight"> &lt;</span><span class="doxyHighlightKeyword">class</span><span class="doxyHighlight"> DomTreeT&gt;</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a1348bf219185f1a9896e890ab4c2061d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/powerpc/ppcctrloopsverify-cpp/#a345bd69760b9ee32b3f49d4fc04120fb">Verify</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DomTreeT &amp;DT, </span><span class="doxyHighlightKeyword">typename</span><span class="doxyHighlight"> DomTreeT::VerificationLevel VL) &#123;</span></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo">SemiNCAInfo&lt;DomTreeT&gt;</a> SNCA(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Simplist check is to compare against a new tree. This will also</span></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// usefully print the old and new trees, if they are different.</span></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712">IsSameAsFreshTree</a>(DT))</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Common checks to verify the properties of the tree. O(N log N) at worst.</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847">verifyRoots</a>(DT) || !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de">verifyReachability</a>(DT) ||</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><span class="doxyHighlight">      !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0">VerifyLevels</a>(DT) || !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8">VerifyDFSNumbers</a>(DT))</span></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extra checks depending on VerificationLevel. Up to O(N^3).</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VL == DomTreeT::VerificationLevel::Basic ||</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><span class="doxyHighlight">      VL == DomTreeT::VerificationLevel::Full)</span></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7">verifyParentProperty</a>(DT))</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (VL == DomTreeT::VerificationLevel::Full)</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4">verifySiblingProperty</a>(DT))</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">&#125;  </span><span class="doxyHighlightComment">// namespace DomTreeBuilder</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">&#125;  </span><span class="doxyHighlightComment">// namespace llvm</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlightPreprocessor">#undef DEBUG&#95;TYPE</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>

</ProgramListing>


</DoxygenPage>
