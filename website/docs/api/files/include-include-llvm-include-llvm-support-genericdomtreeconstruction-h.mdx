---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/include/include/llvm/include/llvm/support/genericdomtreeconstruction-h
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `GenericDomTreeConstruction.h` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

Generic dominator tree construction - this file provides routines to construct immediate dominator information for a flow-graph based on the Semi-NCA algorithm described in this dissertation: <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/denseset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DepthFirstIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallPtrSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/GenericDomTree.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtree-h"
  isLocal="true" />
<IncludesListItem
  filePath="optional"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="queue"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm/domtreebuilder">llvm::DomTreeBuilder</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo">SemiNCAInfo&lt;DomTreeT&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare">Compare</a></>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;dom-tree-builder&quot;</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Generic dominator tree construction - this file provides routines to construct immediate dominator information for a flow-graph based on the Semi-NCA algorithm described in this dissertation:

&#91;1&#93; Linear-Time Algorithms for Dominators and Related Problems Loukas Georgiadis, Princeton University, November 2005, pp. 21-23: <a href="ftp://ftp.cs.princeton.edu/reports/2005/737.pdf">ftp://ftp.cs.princeton.edu/reports/2005/737.pdf</a>

Semi-NCA algorithm runs in O(n^2) worst-case time but usually slightly faster than Simple Lengauer-Tarjan in practice.

O(n^2) worst cases happen when the computation of nearest common ancestors requires O(n) average time, which is very unlikely in real world. If this ever turns out to be an issue, consider implementing a hybrid algorithm that uses SLT to perform full constructions and SemiNCA for incremental updates.

The file uses the Depth Based Search algorithm to perform incremental updates (insertion and deletions). The implemented algorithm is based on this publication:

&#91;2&#93; An Experimental Study of Dynamic Dominators Loukas Georgiadis, et al., April 12 2016, pp. 5-7, 9-10: <a href="https://arxiv.org/pdf/1604.02711.pdf">https://arxiv.org/pdf/1604.02711.pdf</a>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;dom-tree-builder&quot;</>}>

Definition at line <a href="#l00049">49</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtreeconstruction-h">GenericDomTreeConstruction.h</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><Highlight kind="comment">//===- GenericDomTreeConstruction.h - Dominator Calculation ------&#42;- C++ -&#42;-==//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><Highlight kind="normal"></Highlight><Highlight kind="comment">// See https://llvm.org/LICENSE.txt for license information.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><Highlight kind="normal"></Highlight><Highlight kind="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><Highlight kind="comment">/// \\file</Highlight></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><Highlight kind="comment">/// Generic dominator tree construction - this file provides routines to</Highlight></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><Highlight kind="comment">/// construct immediate dominator information for a flow-graph based on the</Highlight></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><Highlight kind="comment">/// Semi-NCA algorithm described in this dissertation:</Highlight></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><Highlight kind="comment">///   &#91;1&#93; Linear-Time Algorithms for Dominators and Related Problems</Highlight></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><Highlight kind="comment">///   Loukas Georgiadis, Princeton University, November 2005, pp. 21-23:</Highlight></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><Highlight kind="comment">///   ftp://ftp.cs.princeton.edu/reports/2005/737.pdf</Highlight></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><Highlight kind="comment">/// Semi-NCA algorithm runs in O(n^2) worst-case time but usually slightly</Highlight></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><Highlight kind="comment">/// faster than Simple Lengauer-Tarjan in practice.</Highlight></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><Highlight kind="comment">/// O(n^2) worst cases happen when the computation of nearest common ancestors</Highlight></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><Highlight kind="comment">/// requires O(n) average time, which is very unlikely in real world. If this</Highlight></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><Highlight kind="comment">/// ever turns out to be an issue, consider implementing a hybrid algorithm</Highlight></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><Highlight kind="comment">/// that uses SLT to perform full constructions and SemiNCA for incremental</Highlight></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><Highlight kind="comment">/// updates.</Highlight></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><Highlight kind="comment">/// The file uses the Depth Based Search algorithm to perform incremental</Highlight></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><Highlight kind="comment">/// updates (insertion and deletions). The implemented algorithm is based on</Highlight></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><Highlight kind="comment">/// this publication:</Highlight></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><Highlight kind="comment">///   &#91;2&#93; An Experimental Study of Dynamic Dominators</Highlight></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><Highlight kind="comment">///   Loukas Georgiadis, et al., April 12 2016, pp. 5-7, 9-10:</Highlight></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><Highlight kind="comment">///   https://arxiv.org/pdf/1604.02711.pdf</Highlight></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><Highlight kind="comment">///</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef LLVM&#95;SUPPORT&#95;GENERICDOMTREECONSTRUCTION&#95;H</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#define LLVM&#95;SUPPORT&#95;GENERICDOMTREECONSTRUCTION&#95;H</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/denseset-h">llvm/ADT/DenseSet.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h">llvm/ADT/DepthFirstIterator.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h">llvm/ADT/SmallPtrSet.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/genericdomtree-h">llvm/Support/GenericDomTree.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;optional&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;queue&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#define DEBUG&#95;TYPE &quot;dom-tree-builder&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">DomTreeBuilder &#123;</Highlight></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> &#123;</Highlight></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> = </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr;</Highlight></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a692ee4860e5f23b9dd332928d441f9b6"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a692ee4860e5f23b9dd332928d441f9b6">NodeT</a> = </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodeType;</Highlight></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> = <a href="/docs/api/classes/llvm/domtreenodebase">DomTreeNodeBase&lt;NodeT&gt;</a> &#42;;</Highlight></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> = </Highlight><Highlight kind="keyword">decltype</Highlight><Highlight kind="normal">(DomTreeT::Roots);</Highlight></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> = DomTreeT::IsPostDominator;</Highlight></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> = <a href="/docs/api/classes/llvm/graphdiff">GraphDiff&lt;NodePtr, IsPostDom&gt;</a>;</Highlight></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Information record used by Semi-NCA during tree construction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#123;</Highlight></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> = 0;</Highlight></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = 0;</Highlight></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a> = 0;</Highlight></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a> = 0;</Highlight></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a684f9c7cd717372292ce444834f090ea"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;unsigned, 4&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a684f9c7cd717372292ce444834f090ea">ReverseChildren</a>;</Highlight></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Number to node mapping is 1-based. Initialize the mapping to start with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// a dummy element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 64&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a> = &#123;</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If blocks have numbers (e.g., BasicBlock, MachineBasicBlock), store node</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// infos in a vector. Otherwise, store them in a map.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><Highlight kind="normal">  std::conditional&#95;t&lt;GraphHasNodeNumbers&lt;NodePtr&gt;, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec, 64&gt;</a>,</Highlight></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;NodePtr, InfoRec&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>;</Highlight></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> = </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::UpdateType;</Highlight></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5f3d462f65787261079dbe8242e4a971"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5f3d462f65787261079dbe8242e4a971">UpdateKind</a> = </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::UpdateKind;</Highlight></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b">BatchUpdateInfo</a> &#123;</Highlight></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Note: Updates inside PreViewCFG are already legalized.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a369d40799c94a5690873970720ac823b">BatchUpdateInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><Highlight kind="normal">        : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>), <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>),</Highlight></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.getNumLegalizedUpdates()) &#123;&#125;</Highlight></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Remembers if the whole tree was recalculated at some point during the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// current batch update.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>;</Highlight></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>;</Highlight></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a>;</Highlight></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &#42;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>;</Highlight></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &#42;;</Highlight></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If BUI is a nullptr, then there&#39;s no batch update in progress.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>(BUI) &#123;&#125;</Highlight></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>() &#123;</Highlight></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a> = &#123;</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">&#125;; </Highlight><Highlight kind="comment">// Restore to initial state with a dummy start node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.clear();</Highlight></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Don&#39;t reset the pointer to BatchUpdateInfo here -- if there&#39;s an update</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in progress, we need this information to continue it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Inversed&gt;</Highlight></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</Highlight></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BUI)</Highlight></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.template <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Inversed&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Inversed&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Inversed&gt;</Highlight></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0451f2d011f81c6f8ca840004a66c3fd"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0451f2d011f81c6f8ca840004a66c3fd">getChildren</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</Highlight></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal">DirectedNodeT =</Highlight></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><Highlight kind="normal">        std::conditional&#95;t&lt;Inversed, Inverse&lt;NodePtr&gt;, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>&gt;;</Highlight></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> R = <a href="/docs/api/namespaces/llvm/#acc2e6a2001a5f102f18060a53520e82b">children&lt;DirectedNodeT&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 8&gt;</a> Res(<a href="/docs/api/namespaces/llvm/detail/#a1926e8e4789f0a0f89add386f65413d1">detail::reverse&#95;if&lt;!Inversed&gt;</a>(R));</Highlight></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Remove nullptr children for clang.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a60a348350395aef11d68f58111bcf499">llvm::erase</a>(Res, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Res;</Highlight></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB) &#123;</Highlight></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a35a70f3171a1748822370ffb5f9324bf">GraphHasNodeNumbers&lt;NodePtr&gt;</a>) &#123;</Highlight></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = BB ? <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;NodePtr&gt;::getNumber</a>(BB) + 1 : 0;</Highlight></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Idx &gt;= <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.size()) &#123;</Highlight></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Max = 0;</Highlight></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BB)</Highlight></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><Highlight kind="normal">          Max = <a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt;</Highlight><Highlight kind="keyword">decltype</Highlight><Highlight kind="normal">(BB-&gt;getParent())&gt;::getMaxNumber(</Highlight></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><Highlight kind="normal">              BB-&gt;getParent());</Highlight></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Max might be zero, graphs might not support getMaxNumber().</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>.resize(Max ? Max + 1 : Idx + 1);</Highlight></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>&#91;Idx&#93;;</Highlight></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#af6c4ae4c81905ba22d594f9e43aa5ee7">NodeInfos</a>&#91;BB&#93;;</Highlight></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a>; &#125;</Highlight></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB, DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/classes/node">Node</a> = DT.getNode(BB)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/node">Node</a>;</Highlight></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Haven&#39;t calculated this node yet?  Get or calculate the node for the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// immediate dominator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> IDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(BB);</Highlight></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IDom || DT.getNode(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDomNode = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(IDom, DT);</Highlight></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Add a new tree node for this NodeT, and link it as a child of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// IDomNode</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DT.createNode(BB, IDomNode);</Highlight></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">; &#125;</Highlight></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a> &#123;</Highlight></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>;</Highlight></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/namespaces/llvm/#a0e00fad9c34de40b1e31f3aa6f8e024cae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>(<a href="/docs/api/namespaces/llvm/#a0e00fad9c34de40b1e31f3aa6f8e024cae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af333f58041fb0065bc38b36d28e3c7b0"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af333f58041fb0065bc38b36d28e3c7b0">BlockNamePrinter</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>(TN ? TN-&gt;getBlock() : nullptr) &#123;&#125;</Highlight></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a1b5033078200b28cc6c14e9edf934418"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">friend</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a1b5033078200b28cc6c14e9edf934418">operator&lt;&lt;</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#a35136e5bec4ffa60c6f056193781fd5a">BlockNamePrinter</a> &amp;BP) &#123;</Highlight></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BP.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>)</Highlight></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><Highlight kind="normal">        O &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;nullptr&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><Highlight kind="normal">        BP.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter/#af72cb41d6516e386c315214b20ebb4af">N</a>-&gt;printAsOperand(O, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> O;</Highlight></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a> = <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;NodePtr, unsigned&gt;</a>;</Highlight></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Custom DFS implementation which can skip nodes based on a provided</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// predicate. It also collects ReverseChildren so that we don&#39;t have to spend</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// time getting predecessors in SemiNCA.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If IsReverse is set to true, the DFS walk will be performed backwards</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// relative to IsPostDom -- using reverse edges for dominators and forward</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// edges for postdominators.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If SuccOrder is specified then in this order the DFS traverses the children</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// otherwise the order is implied by the results of getChildren().</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsReverse = false, </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DescendCondition&gt;</Highlight></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> V, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LastNum, DescendCondition Condition,</Highlight></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><Highlight kind="normal">                  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AttachToNum,</Highlight></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><Highlight kind="normal">                  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a> &#42;SuccOrder = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V);</Highlight></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;NodePtr, unsigned&gt;</a>, 64&gt; WorkList = &#123;&#123;V, AttachToNum&#125;&#125;;</Highlight></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(V).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = AttachToNum;</Highlight></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (!WorkList.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>()) &#123;</Highlight></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#91;BB, ParentNum&#93; = WorkList.<a href="/docs/api/classes/llvm/smallvectorimpl/#a0c8ffe664a36e30d49c84d0aded2fe08">pop&#95;back&#95;val</a>();</Highlight></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;BBInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB);</Highlight></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><Highlight kind="normal">      BBInfo.ReverseChildren.push&#95;back(ParentNum);</Highlight></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Visited nodes always have positive DFS numbers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BBInfo.DFSNum != 0) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><Highlight kind="normal">      BBInfo.Parent = ParentNum;</Highlight></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><Highlight kind="normal">      BBInfo.DFSNum = BBInfo.Semi = BBInfo.Label = ++LastNum;</Highlight></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.push&#95;back(BB);</Highlight></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/analysis/loopinfo-cpp/#ab4c7e3039b29b12e4dc97bcae93d79c3">Direction</a> = IsReverse != <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>;  </Highlight><Highlight kind="comment">// XOR.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Successors = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;Direction&gt;</a>(BB, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>);</Highlight></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccOrder &amp;&amp; Successors.size() &gt; 1)</Highlight></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(</Highlight></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><Highlight kind="normal">            Successors.begin(), Successors.end(), &#91;=&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</Highlight></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><Highlight kind="normal">              return SuccOrder-&gt;find(A)-&gt;second &lt; SuccOrder-&gt;find(B)-&gt;second;</Highlight></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><Highlight kind="normal">            &#125;);</Highlight></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Succ : Successors) &#123;</Highlight></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Condition(BB, Succ)) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><Highlight kind="normal">        WorkList.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&#123;Succ, LastNum&#125;);</Highlight></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> LastNum;</Highlight></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// V is a predecessor of W. eval() returns V if V &lt; W, otherwise the minimum</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// of sdom(U), where U &gt; W and there is a virtual forest path from U to V. The</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// virtual forest consists of linked edges of processed vertices.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can follow Parent pointers (virtual forest edges) to determine the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ancestor U with minimum sdom(U). But it is slow and thus we employ the path</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// compression technique to speed up to O(m&#42;log(n)). Theoretically the virtual</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// forest can be organized as balanced trees to achieve almost linear</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// O(m&#42;alpha(m,n)) running time. But it requires two auxiliary arrays (Size</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and Child) and is unlikely to be faster than the simple implementation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For each vertex V, its Label points to the vertex with the minimal sdom(U)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Semi) in its path from V (included) to NodeToInfo&#91;V&#93;.Parent (excluded).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e">eval</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> V, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LastLinked,</Highlight></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InfoRec &#42;&gt;</a> &amp;Stack,</Highlight></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;InfoRec &#42;&gt;</a> NumToInfo) &#123;</Highlight></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;VInfo = NumToInfo&#91;V&#93;;</Highlight></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> &lt; LastLinked)</Highlight></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</Highlight></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Store ancestors except the last (root of a virtual tree) into a stack.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Stack.empty());</Highlight></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><Highlight kind="normal">      Stack.push&#95;back(VInfo);</Highlight></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><Highlight kind="normal">      VInfo = NumToInfo&#91;VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a>&#93;;</Highlight></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> &gt;= LastLinked);</Highlight></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Path compression. Point each vertex&#39;s Parent to the root and update its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Label if any of its ancestors (PInfo-&gt;Label) has a smaller Semi.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;PInfo = VInfo;</Highlight></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;PLabelInfo = NumToInfo&#91;PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>&#93;;</Highlight></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><Highlight kind="normal">      VInfo = Stack.pop&#95;back&#95;val();</Highlight></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><Highlight kind="normal">      VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a> = PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a8e6152fd055f0d00d6d6c1386bf3fd92">Parent</a>;</Highlight></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec">InfoRec</a> &#42;VLabelInfo = NumToInfo&#91;VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>&#93;;</Highlight></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PLabelInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a> &lt; VLabelInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a7cf7afef13861e3f6ce5dc5c4ba63d20">Semi</a>)</Highlight></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><Highlight kind="normal">        VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a> = PInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</Highlight></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><Highlight kind="normal">        PLabelInfo = VLabelInfo;</Highlight></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><Highlight kind="normal">      PInfo = VInfo;</Highlight></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (!Stack.empty());</Highlight></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> VInfo-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a3b23e8ba215f9241cffa0f3c9c351c8b">Label</a>;</Highlight></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This function requires DFS to be run before calling it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>() &#123;</Highlight></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextDFSNum(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.size());</Highlight></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec &#42;, 8&gt;</a> NumToInfo = &#123;</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><Highlight kind="normal">    NumToInfo.<a href="/docs/api/classes/llvm/smallvectorimpl/#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(NextDFSNum);</Highlight></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Initialize IDoms to spanning tree parents.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 1; i &lt; NextDFSNum; ++i) &#123;</Highlight></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> V = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;VInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(V);</Highlight></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><Highlight kind="normal">      VInfo.IDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;VInfo.Parent&#93;;</Highlight></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><Highlight kind="normal">      NumToInfo.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;VInfo);</Highlight></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #1: Calculate the semidominators of all vertices.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InfoRec &#42;, 32&gt;</a> EvalStack;</Highlight></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = NextDFSNum - 1; i &gt;= 2; --i) &#123;</Highlight></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;WInfo = &#42;NumToInfo&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Initialize the semi dominator to point to the parent node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><Highlight kind="normal">      WInfo.Semi = WInfo.Parent;</Highlight></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : WInfo.ReverseChildren) &#123;</Highlight></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SemiU = NumToInfo&#91;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4d03a4fddccb0dc066cb7195003db24e">eval</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, i + 1, EvalStack, NumToInfo)&#93;-&gt;Semi;</Highlight></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SemiU &lt; WInfo.Semi) WInfo.Semi = SemiU;</Highlight></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #2: Explicitly define the immediate dominator of each vertex.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//          IDom&#91;i&#93; = NCA(SDom&#91;i&#93;, SpanningTreeParent(i)).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Note that the parents were stored in IDoms and later got invalidated</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// during path compression in Eval.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 2; i &lt; NextDFSNum; ++i) &#123;</Highlight></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;WInfo = &#42;NumToInfo&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WInfo.Semi != 0);</Highlight></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SDomNum = NumToInfo&#91;WInfo.Semi&#93;-&gt;DFSNum;</Highlight></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> WIDomCandidate = WInfo.IDom;</Highlight></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;WIDomCandidateInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(WIDomCandidate);</Highlight></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (WIDomCandidateInfo.DFSNum &lt;= SDomNum)</Highlight></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><Highlight kind="normal">        WIDomCandidate = WIDomCandidateInfo.IDom;</Highlight></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><Highlight kind="normal">      WInfo.IDom = WIDomCandidate;</Highlight></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PostDominatorTree always has a virtual root that represents a virtual CFG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// node that serves as a single exit from the function. All the other exits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (CFG nodes with terminators and nodes in infinite loops are logically</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// connected to this virtual CFG exit node).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This functions maps a nullptr CFG node to the virtual root tree node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>() &#123;</Highlight></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Only postdominators have a virtual root&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.size() == 1 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;SNCAInfo must be freshly constructed&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;BBInfo = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><Highlight kind="normal">    BBInfo.DFSNum = BBInfo.Semi = BBInfo.Label = 1;</Highlight></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.push&#95;back(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);  </Highlight><Highlight kind="comment">// NumToNode&#91;1&#93; = nullptr;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For postdominators, nodes with no forward successors are trivial roots that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// are always selected as tree roots. Roots with forward successors correspond</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to CFG nodes within infinite loops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</Highlight></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;N must be a valid node&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;false&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, BUI).<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>();</Highlight></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Parent &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Parent not set&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;typename DomTreeT::ParentPtr&gt;::getEntryNode</a>(DT.Parent);</Highlight></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Finds all roots without relaying on the set of roots already stored in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// tree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We define roots to be some non-redundant set of the CFG nodes</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</Highlight></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Parent &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Parent pointer is not set&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> Roots;</Highlight></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For dominators, function entry CFG node is always a tree root node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</Highlight></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><Highlight kind="normal">      Roots.push&#95;back(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(DT));</Highlight></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Roots;</Highlight></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</Highlight></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// PostDominatorTree always has a virtual root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>();</Highlight></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Num = 1;</Highlight></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tLooking for trivial roots\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #1: Find all the trivial roots that are going to will definitely</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// remain tree roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</Highlight></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// It may happen that there are some new nodes in the CFG that are result of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the ongoing batch update, but we cannot really pretend that they don&#39;t</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// exist -- we won&#39;t see any outgoing or incoming edges to them, so it&#39;s</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fine to discover them here, as they would end up appearing in the CFG at</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// some point anyway.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</Highlight></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><Highlight kind="normal">      ++<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a>;</Highlight></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If it has no &#42;successors&#42;, it is definitely a root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, BUI)) &#123;</Highlight></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><Highlight kind="normal">        Roots.push&#95;back(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Run DFS not to walk this part of CFG later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><Highlight kind="normal">        Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 1);</Highlight></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Found a new trivial root: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Last visited node: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><Highlight kind="normal">                          &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;Num&#93;) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tLooking for non-trivial roots\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #2: Find all non-trivial root candidates. Those are CFG nodes that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// are reverse-unreachable were not visited by previous DFS walks (i.e. CFG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// nodes in infinite loops).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasNonTrivialRoots = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Accounting for the virtual exit, see if we had any reverse-unreachable</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> + 1 != Num) &#123;</Highlight></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><Highlight kind="normal">      HasNonTrivialRoots = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SuccOrder is the order of blocks in the function. It is needed to make</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the calculation of the FurthestAway node and the whole PostDomTree</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// immune to swap successors transformation (e.g. canonicalizing branch</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// predicates). SuccOrder is initialized lazily only for successors of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// reverse unreachable nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><Highlight kind="normal">      std::optional&lt;NodeOrderMap&gt; SuccOrder;</Highlight></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> InitSuccOrderOnce = &#91;&amp;&#93;() &#123;</Highlight></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><Highlight kind="normal">        SuccOrder = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a20d658e22ed7aa44d0b57363dd8c006f">NodeOrderMap</a>();</Highlight></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/node">Node</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent))</Highlight></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/classes/node">Node</a>).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0)</Highlight></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Succ : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;false&gt;</a>(<a href="/docs/api/classes/node">Node</a>, SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae4b78b1bb21ca0057e776215004a579d">BatchUpdates</a>))</Highlight></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><Highlight kind="normal">              SuccOrder-&gt;try&#95;emplace(Succ, 0);</Highlight></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Add mapping for all entries of SuccOrder.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NodeNum = 0;</Highlight></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/node">Node</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</Highlight></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><Highlight kind="normal">          ++NodeNum;</Highlight></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Order = SuccOrder-&gt;find(<a href="/docs/api/classes/node">Node</a>);</Highlight></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Order != SuccOrder-&gt;end()) &#123;</Highlight></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Order-&gt;second == 0);</Highlight></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><Highlight kind="normal">            Order-&gt;second = NodeNum;</Highlight></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><Highlight kind="normal">      &#125;;</Highlight></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Make another DFS pass over all other nodes to find the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// reverse-unreachable blocks, and find the furthest paths we&#39;ll be able</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// to make.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Note that this looks N^2, but it&#39;s really 2N worst case, if every node</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// is unreachable. This is because we are still going to only visit each</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// unreachable node once, we may just visit it in two directions,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// depending on how lucky we get.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuunifydivergentexitnodes-cpp/#aaa253dd3e56c37edd403113782c0ef94">nodes</a>(DT.Parent)) &#123;</Highlight></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0) &#123;</Highlight></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><Highlight kind="normal">                     &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\tVisiting node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Find the furthest away we can get by following successors, then</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// follow them in reverse.  This gives us some reasonable answer about</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// the post-dom tree inside any infinite loop. In particular, it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// guarantees we get to the farthest away point along &#42;some&#42;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// path. This also matches the GCC&#39;s behavior.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If we really wanted a totally complete picture of dominance inside</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// this infinite loop, we could do it with SCC-like algorithms to find</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// the lowest and highest points in the infinite loop.  In theory, it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// would be nice to give the canonical backedge for the loop, but it&#39;s</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// expensive and does not always lead to a minimal set of roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\tRunning forward DFS\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SuccOrder)</Highlight></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><Highlight kind="normal">            InitSuccOrderOnce();</Highlight></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccOrder);</Highlight></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NewNum =</Highlight></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><Highlight kind="normal">              SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>&lt;</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, Num, &amp;&#42;SuccOrder);</Highlight></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> FurthestAway = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;NewNum&#93;;</Highlight></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\tFound a new furthest away node &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><Highlight kind="normal">                            &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;(non-trivial root): &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><Highlight kind="normal">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(FurthestAway) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><Highlight kind="normal">          Roots.push&#95;back(FurthestAway);</Highlight></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\tPrev DFSNum: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Num &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, new DFSNum: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><Highlight kind="normal">                            &lt;&lt; NewNum &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\t\\t\\tRemoving DFS info\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = NewNum; i &gt; Num; --i) &#123;</Highlight></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><Highlight kind="normal">            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\t\\tRemoving DFS info for &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><Highlight kind="normal">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><Highlight kind="normal">            SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) = &#123;&#125;;</Highlight></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><Highlight kind="normal">            SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#ad97688dfe9cd802e2a0691cbe620218a">pop&#95;back</a>();</Highlight></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PrevNum = Num;</Highlight></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\tRunning reverse DFS\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><Highlight kind="normal">          Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(FurthestAway, Num, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 1);</Highlight></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = PrevNum + 1; i &lt;= Num; ++i)</Highlight></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\t\\t\\tfound node &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><Highlight kind="normal">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Total: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, Num: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Num &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Discovered CFG nodes:\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt;= Num; ++i) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><Highlight kind="normal">               &lt;&lt; i &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> + 1 == Num) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Everything should have been visited&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #3: If we found some non-trivial roots, make them non-redundant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HasNonTrivialRoots) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea">RemoveRedundantRoots</a>(DT, BUI, Roots);</Highlight></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Found roots: &quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Root</Highlight></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><Highlight kind="normal">                    : Roots) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><Highlight kind="normal">               &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Roots;</Highlight></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This function only makes sense for postdominators.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We define roots to be some set of CFG nodes where (reverse) DFS walks have</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to start in order to visit all the CFG nodes (including the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// reverse-unreachable ones).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// When the search for non-trivial roots is done it may happen that some of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the non-trivial roots are reverse-reachable from other non-trivial roots,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// which makes them redundant. This function removes them from the set of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// input roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a851b359886bf561fb0fde504c228ecea">RemoveRedundantRoots</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><Highlight kind="normal">                                   <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> &amp;Roots) &#123;</Highlight></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;This function is for postdominators only&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Removing redundant roots\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</Highlight></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; Roots.size(); ++i) &#123;</Highlight></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Root = Roots&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Trivial roots are always non-redundant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa26a0ee0a9f0cd627c9a6dc712ae53cb">HasForwardSuccessors</a>(Root, BUI)) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tChecking if &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root)</Highlight></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; remains a root\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><Highlight kind="normal">      SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</Highlight></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Do a forward walk looking for the other roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Num = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>&lt;</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">&gt;(Root, 0, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>, 0);</Highlight></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Skip the start node and begin from the second one (note that DFS uses</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// 1-based indexing).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> x = 2; x &lt;= Num; ++x) &#123;</Highlight></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;x&#93;;</Highlight></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If we wound another root in a (forward) DFS walk, remove the current</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// root from the set of roots, as it is reverse-reachable from the other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(Roots, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)) &#123;</Highlight></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tForward DFS walk found another root &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><Highlight kind="normal">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\tRemoving root &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><Highlight kind="normal">                            &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Root) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><Highlight kind="normal">          <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Root, Roots.back());</Highlight></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><Highlight kind="normal">          Roots.pop&#95;back();</Highlight></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Root at the back takes the current root&#39;s place.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Start the next loop iteration with the same index.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><Highlight kind="normal">          --i;</Highlight></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DescendCondition&gt;</Highlight></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT, DescendCondition DC) &#123;</Highlight></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</Highlight></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.Roots.size() == 1 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Dominators should have a singe root&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(DT.Roots&#91;0&#93;, 0, DC, 0);</Highlight></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5c2d1292cd98fa2c253a7f872adc6887">addVirtualRoot</a>();</Highlight></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Num = 1;</Highlight></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root : DT.Roots) Num = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(Root, Num, DC, 1);</Highlight></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</Highlight></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Parent = DT.Parent;</Highlight></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><Highlight kind="normal">    DT.reset();</Highlight></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><Highlight kind="normal">    DT.Parent = Parent;</Highlight></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the update is using the actual CFG, BUI is null. If it&#39;s using a view,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// BUI is non-null and the PreCFGView is used. When calculating from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// scratch, make the PreViewCFG equal to the PostCFGView, so Post is used.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> PostViewBUI = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BUI &amp;&amp; BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>) &#123;</Highlight></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><Highlight kind="normal">      BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a> = &#42;BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a10e855f9a775ee8ec97a4ebf8d056413">PostViewCFG</a>;</Highlight></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><Highlight kind="normal">      PostViewBUI = BUI;</Highlight></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// This is rebuilding the whole tree, not incrementally, but PostViewBUI is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// used in case the caller needs a DT update with a CFGView.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(PostViewBUI);</Highlight></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Step #0: Number blocks in depth-first order and initialize variables used</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in later stages of the algorithm.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><Highlight kind="normal">    DT.Roots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, PostViewBUI);</Highlight></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>);</Highlight></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</Highlight></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BUI) &#123;</Highlight></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><Highlight kind="normal">      BUI-&gt;<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a> = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;DomTree recalculated, skipping future batch updates\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.Roots.empty()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Add a node for the root. If the tree is a PostDominatorTree it will be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the virtual exit (denoted by (BasicBlock &#42;) nullptr) which postdominates</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// all real exits (including multiple exit blocks, infinite loops).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> ? nullptr : DT.Roots&#91;0&#93;;</Highlight></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><Highlight kind="normal">    DT.RootNode = DT.createNode(Root);</Highlight></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DT, DT.RootNode);</Highlight></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DomTreeT&amp; DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> AttachTo) &#123;</Highlight></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attach the first unreachable block to AttachTo.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;1&#93;).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = AttachTo-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Loop over all of the discovered blocks in the function...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> W : <a href="/docs/api/namespaces/llvm/#a02981de53fb6ffd384d39addc4d25f37">llvm::drop&#95;begin</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>)) &#123;</Highlight></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.getNode(W))</Highlight></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Already calculated the node before</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> ImmDom = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a09cf9d5143816f847afdde1cf03cebfe">getIDom</a>(W);</Highlight></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Get or calculate the node for the immediate dominator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDomNode = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9462d0ddb43c60b0d0889e337f1781ea">getNodeForBlock</a>(ImmDom, DT);</Highlight></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Add a new tree node for this BasicBlock, and link it as a child of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// IDomNode.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><Highlight kind="normal">      DT.createNode(W, IDomNode);</Highlight></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> AttachTo) &#123;</Highlight></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;1&#93;).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#a6452d57b10c414e7bcc84418ce8fc609">IDom</a> = AttachTo-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/namespaces/llvm/#a02981de53fb6ffd384d39addc4d25f37">llvm::drop&#95;begin</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>)) &#123;</Highlight></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN);</Highlight></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NewIDom = DT.getNode(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>).IDom);</Highlight></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><Highlight kind="normal">      TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a2d97875c33b38014d365da0193d8aa21">setIDom</a>(NewIDom);</Highlight></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Helper struct used during edge insertions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> &#123;</Highlight></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare">Compare</a> &#123;</Highlight></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare/#a79fb7f86e6afcd849cad94e25eb730e7"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/compare/#a79fb7f86e6afcd849cad94e25eb730e7">operator()</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getLevel() &lt; <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getLevel();</Highlight></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bucket queue of tree nodes ordered by descending level. For simplicity,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// we use a priority&#95;queue here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><Highlight kind="normal">    std::priority&#95;queue&lt;TreeNodePtr, SmallVector&lt;TreeNodePtr, 8&gt;,</Highlight></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><Highlight kind="normal">                        Compare&gt;</Highlight></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a628a606cded13014b9f2ce9a42ead0d3"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a628a606cded13014b9f2ce9a42ead0d3">Bucket</a>;</Highlight></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#ab27475b6e0a6bbdd0a354f9aa8f0fc4b"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smalldenseset">SmallDenseSet&lt;TreeNodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#ab27475b6e0a6bbdd0a354f9aa8f0fc4b">Visited</a>;</Highlight></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a96afdf4edb6595d905b097dd2c95bf02"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo/#a96afdf4edb6595d905b097dd2c95bf02">Affected</a>;</Highlight></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> VisitedUnaffected;</Highlight></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><Highlight kind="normal">                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((From || <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;From has to be a valid CFG node or a virtual root&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(To &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Cannot be a nullptr&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Inserting edge &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN = DT.getNode(From);</Highlight></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!FromTN) &#123;</Highlight></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Ignore edges from unreachable nodes for (forward) dominators.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The unreachable node becomes a new root -- a tree node for it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> VirtualRoot = DT.getNode(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><Highlight kind="normal">      FromTN = DT.createNode(From, VirtualRoot);</Highlight></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><Highlight kind="normal">      DT.Roots.push&#95;back(From);</Highlight></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><Highlight kind="normal">    DT.DFSInfoValid = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</Highlight></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ToTN)</Highlight></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6">InsertUnreachable</a>(DT, BUI, FromTN, To);</Highlight></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, FromTN, ToTN);</Highlight></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Determines if some existing root becomes reverse-reachable after the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// insertion. Rebuilds the whole tree if that situation happens.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88">UpdateRootsBeforeInsertion</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From,</Highlight></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;This function is only for postdominators&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Destination node is not attached to the virtual root, so it cannot be a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DT.isVirtualRoot(To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>())) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(DT.Roots, To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()))</Highlight></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;  </Highlight><Highlight kind="comment">// To is not a root, nothing to update.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tAfter the insertion, &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</Highlight></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; is no longer a root\\n\\t\\tRebuilding the tree!!!\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;NodePtr&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</Highlight></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><Highlight kind="normal">                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;NodePtr&gt;</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</Highlight></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.size() != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.size())</Highlight></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;NodePtr, 4&gt;</a> Set(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.begin(), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.end());</Highlight></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</Highlight></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Set.count(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) == 0)</Highlight></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Updates the set of roots after insertion or deletion. This ensures that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// roots are the same when after a series of updates and when the tree would</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// be built from scratch.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI) &#123;</Highlight></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;This function is only for postdominators&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The tree has only trivial roots -- nothing to update.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none&#95;of</a>(DT.Roots, &#91;BUI&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</Highlight></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><Highlight kind="normal">          return HasForwardSuccessors(N, BUI);</Highlight></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><Highlight kind="normal">        &#125;))</Highlight></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Recalculate the set of roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> Roots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(DT.Roots, Roots)) &#123;</Highlight></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The roots chosen in the CFG have changed. This is because the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// incremental algorithm does not really know or use the set of roots and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// can make a different (implicit) decision about which node within an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// infinite loop becomes a root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Roots are different in updated trees\\n&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;The entire tree needs to be rebuilt\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// It may be possible to update the tree without recalculating it, but</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// we do not know yet how to do it, and it happens rarely in practice.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Handles insertion to a node already in the dominator tree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tReachable &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</Highlight></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> &amp;&amp; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6196ab5eb2faa09361ac7e663765ac88">UpdateRootsBeforeInsertion</a>(DT, BUI, From, To)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// DT.findNCD expects both pointers to be valid. When From is a virtual</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// root, then its CFG block pointer is a nullptr, so we have to &#39;compute&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the NCD manually.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock =</Highlight></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><Highlight kind="normal">        (From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>() &amp;&amp; To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</Highlight></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><Highlight kind="normal">            ? DT.findNearestCommonDominator(From-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>())</Highlight></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><Highlight kind="normal">            : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCDBlock || DT.isPostDominator());</Highlight></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</Highlight></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCD);</Highlight></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tNCA == &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NCDLevel = NCD-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Based on Lemma 2.5 from &#91;2&#93;, after insertion of (From,To), v is affected</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// iff depth(NCD)+1 &lt; depth(v) &amp;&amp; a path P from To to v exists where every</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// w on P s.t. depth(v) &lt;= depth(w)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// This reduces to a widest path problem (maximizing the depth of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// minimum vertex in the path) which can be solved by a modified version of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Dijkstra with a bucket queue (named depth-based search in &#91;2&#93;).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// To is in the path, so depth(NCD)+1 &lt; depth(v) &lt;= depth(To). Nothing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// affected if this does not hold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NCDLevel + 1 &gt;= To-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>())</Highlight></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</Highlight></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> UnaffectedOnCurrentLevel;</Highlight></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.push(To);</Highlight></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.insert(To);</Highlight></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.empty()) &#123;</Highlight></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.top();</Highlight></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.pop();</Highlight></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Affected.push&#95;back(TN);</Highlight></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CurrentLevel = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Mark &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt;</Highlight></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><Highlight kind="normal">                 </Highlight><Highlight kind="stringliteral">&quot;as affected, CurrentLevel &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrentLevel &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.count(TN) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Preconditions!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Unlike regular Dijkstra, we have an inner loop to expand more</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// vertices. The first iteration is for the (affected) vertex popped</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// from II.Bucket and the rest are for vertices in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// UnaffectedOnCurrentLevel, which may eventually expand to affected</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// vertices.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><Highlight kind="normal">        </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Invariant: there is an optimal path from &#96;To&#96; to TN with the minimum</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// depth being CurrentLevel.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Succ : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;IsPostDom&gt;</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), BUI)) &#123;</Highlight></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> SuccTN = DT.getNode(Succ);</Highlight></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccTN &amp;&amp;</Highlight></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><Highlight kind="normal">                 </Highlight><Highlight kind="stringliteral">&quot;Unreachable successor found at reachable insertion&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SuccLevel = SuccTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tSuccessor &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ)</Highlight></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><Highlight kind="normal">                            &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, level = &quot;</Highlight><Highlight kind="normal"> &lt;&lt; SuccLevel &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// There is an optimal path from &#96;To&#96; to Succ with the minimum depth</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// being min(CurrentLevel, SuccLevel).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><Highlight kind="normal">          </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If depth(NCD)+1 &lt; depth(Succ) is not satisfied, Succ is unaffected</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// and no affected vertex may be reached by a path passing through it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Stop here. Also, Succ may be visited by other predecessors but the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// first visit has the optimal path. Stop if Succ has been visited.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccLevel &lt;= NCDLevel + 1 || !<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Visited.insert(SuccTN).second)</Highlight></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccLevel &gt; CurrentLevel) &#123;</Highlight></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// Succ is unaffected but it may (transitively) expand to affected</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// vertices. Store it in UnaffectedOnCurrentLevel.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tMarking visited not affected &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><Highlight kind="normal">                              &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><Highlight kind="normal">            UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(SuccTN);</Highlight></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.VisitedUnaffected.push&#95;back(SuccTN);</Highlight></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><Highlight kind="normal">          &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// The condition is satisfied (Succ is affected). Add Succ to the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// bucket queue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t\\tAdd &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Succ)</Highlight></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><Highlight kind="normal">                              &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; to a Bucket\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Bucket.push(SuccTN);</Highlight></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>())</Highlight></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><Highlight kind="normal">        TN = UnaffectedOnCurrentLevel.<a href="/docs/api/classes/llvm/smallvectorimpl/#a0c8ffe664a36e30d49c84d0aded2fe08">pop&#95;back&#95;val</a>();</Highlight></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; Next: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Finish by updating immediate dominators and levels.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4">UpdateInsertion</a>(DT, BUI, NCD, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</Highlight></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Updates immediate dominators and levels after insertion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a04bc1c8d9cc3496359247eb5f4fa71c4">UpdateInsertion</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/insertioninfo">InsertionInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>) &#123;</Highlight></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Updating NCD = &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.Affected) &#123;</Highlight></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tIDom(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</Highlight></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) = &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><Highlight kind="normal">      TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a2d97875c33b38014d365da0193d8aa21">setIDom</a>(NCD);</Highlight></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS &amp;&amp; !defined(NDEBUG)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.VisitedUnaffected)</Highlight></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() == TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>()-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() + 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;TN should have been updated by an affected ancestor&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Handles insertion to previously unreachable nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab24f1fc850ebb24591b52b6e467177a6">InsertUnreachable</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><Highlight kind="normal">                                </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> From, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Inserting &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From)</Highlight></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; (unreachable) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Collect discovered edges to already reachable nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::pair&lt;NodePtr, TreeNodePtr&gt;</a>, 8&gt; DiscoveredEdgesToReachable;</Highlight></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Discover and connect nodes that became reachable with the insertion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9">ComputeUnreachableDominators</a>(DT, BUI, To, From, DiscoveredEdgesToReachable);</Highlight></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Inserted &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From)</Highlight></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; (prev unreachable) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</Highlight></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Used the discovered edges and inset discovered connecting (incoming)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// edges.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Edge : DiscoveredEdgesToReachable) &#123;</Highlight></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tInserting discovered connecting edge &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><Highlight kind="normal">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Edge.first) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><Highlight kind="normal">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Edge.second) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, DT.getNode(Edge.first), Edge.second);</Highlight></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Connects nodes that become reachable with an insertion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a364cbe6ed1971f1d63c28607d1731fe9">ComputeUnreachableDominators</a>(</Highlight></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><Highlight kind="normal">      DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Root,</Highlight></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/structs/llvm/incoming">Incoming</a>,</Highlight></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt;std::pair&lt;NodePtr, TreeNodePtr&gt;&gt;</Highlight></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><Highlight kind="normal">          &amp;DiscoveredConnectingEdges) &#123;</Highlight></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DT.getNode(Root) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Root must not be reachable&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Visit only previously unreachable nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> UnreachableDescender = &#91;&amp;DT, &amp;DiscoveredConnectingEdges&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From,</Highlight></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><Highlight kind="normal">                                                                  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</Highlight></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ToTN) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><Highlight kind="normal">      DiscoveredConnectingEdges.push&#95;back(&#123;From, ToTN&#125;);</Highlight></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</Highlight></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(Root, 0, UnreachableDescender, 0);</Highlight></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</Highlight></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#acf1f2289b1f5ffbdf55e3f5ac555fed8">attachNewSubtree</a>(DT, <a href="/docs/api/structs/llvm/incoming">Incoming</a>);</Highlight></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;After adding unreachable nodes\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><Highlight kind="normal">                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(From &amp;&amp; To &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Cannot disconnect nullptrs&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Deleting edge &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(From) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Ensure that the edge was in fact deleted from the CFG before informing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the DomTree about it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The check is O(N), so run it only in debug configuration.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> IsSuccessor = &#91;BUI&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> SuccCandidate, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Of) &#123;</Highlight></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Successors = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;IsPostDom&gt;</a>(Of, BUI);</Highlight></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(Successors, SuccCandidate);</Highlight></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><Highlight kind="normal">    (void)IsSuccessor;</Highlight></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsSuccessor(To, From) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Deleted edge still exists in the CFG!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN = DT.getNode(From);</Highlight></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Deletion in an unreachable subtree -- nothing to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!FromTN) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</Highlight></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ToTN) &#123;</Highlight></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tTo (&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(To)</Highlight></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><Highlight kind="normal">                 &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) already unreachable -- there is no edge to delete\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock = DT.findNearestCommonDominator(From, To);</Highlight></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</Highlight></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If To dominates From -- nothing to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ToTN != NCD) &#123;</Highlight></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><Highlight kind="normal">      DT.DFSInfoValid = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToIDom = ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</Highlight></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tNCD &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, ToIDom &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><Highlight kind="normal">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToIDom) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// To remains reachable after deletion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (Based on the caption under Figure 4 from &#91;2&#93;.)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FromTN != ToIDom || <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0">HasProperSupport</a>(DT, BUI, ToTN))</Highlight></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf">DeleteReachable</a>(DT, BUI, FromTN, ToTN);</Highlight></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e">DeleteUnreachable</a>(DT, BUI, ToTN);</Highlight></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a7f940701e11629de07234b0d717f1e39">UpdateRootsAfterUpdate</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Handles deletions that leave destination nodes reachable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82b22baa3199208282b8771c811301bf">DeleteReachable</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FromTN,</Highlight></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN) &#123;</Highlight></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Deleting reachable &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(FromTN)</Highlight></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; -&gt; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tRebuilding subtree\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Find the top of the subtree that needs to be rebuilt.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (Based on the lemma 2.6 from &#91;2&#93;.)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> ToIDom =</Highlight></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><Highlight kind="normal">        DT.findNearestCommonDominator(FromTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</Highlight></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToIDom || DT.isPostDominator());</Highlight></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToIDomTN = DT.getNode(ToIDom);</Highlight></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToIDomTN);</Highlight></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> PrevIDomSubTree = ToIDomTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</Highlight></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Top of the subtree to rebuild is the root node. Rebuild the tree from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// scratch.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PrevIDomSubTree) &#123;</Highlight></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;The entire tree needs to be rebuilt\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only visit nodes in the subtree starting at To.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Level = ToIDomTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> DescendBelow = &#91;Level, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DT.getNode(To)-&gt;getLevel() &gt; Level;</Highlight></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tTop of subtree: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToIDomTN)</Highlight></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</Highlight></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(ToIDom, 0, DescendBelow, 0);</Highlight></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tRunning Semi-NCA\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</Highlight></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DT, PrevIDomSubTree);</Highlight></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Checks if a node has proper support, as defined on the page 3 and later</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// explained on the page 7 of &#91;2&#93;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a8824d1bacc5dcc91688d442dce6822e0">HasProperSupport</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><Highlight kind="normal">                               </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) &#123;</Highlight></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;IsReachableFromIDom &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</Highlight></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> TNB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Pred : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a3314013831ea1df71a5408ee6ac032e1">getChildren&lt;!IsPostDom&gt;</a>(TNB, BUI)) &#123;</Highlight></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tPred &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Pred) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DT.getNode(Pred)) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> Support = DT.findNearestCommonDominator(TNB, Pred);</Highlight></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tSupport &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Support) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Support != TNB) &#123;</Highlight></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\t&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</Highlight></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; is reachable from support &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><Highlight kind="normal">                          &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Support) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Handle deletions that make destination node unreachable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Based on the lemma 2.7 from the &#91;2&#93;.)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ac0c56f97d07cfa7188e654e794e5032e">DeleteUnreachable</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4447ba6022e287f5fbef082704f1e2c2">BatchUpdatePtr</a> BUI,</Highlight></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><Highlight kind="normal">                                </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN) &#123;</Highlight></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Deleting unreachable subtree &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToTN);</Highlight></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</Highlight></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</Highlight></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Deletion makes a region reverse-unreachable and creates a new root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Simulate that by inserting an edge from the virtual root to ToTN and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// adding it as a new root.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tDeletion made a region reverse-unreachable\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tAdding new root &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(ToTN)</Highlight></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><Highlight kind="normal">      DT.Roots.push&#95;back(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</Highlight></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aa1f63192a86614e73a03f83e46813bb8">InsertReachable</a>(DT, BUI, DT.getNode(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">), ToTN);</Highlight></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;NodePtr, 16&gt;</a> AffectedQueue;</Highlight></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Level = ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Traverse destination node&#39;s descendants with greater level in the tree</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// and collect visited nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> DescendAndCollect = &#91;Level, &amp;AffectedQueue, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(To);</Highlight></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TN);</Highlight></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &gt; Level) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">llvm::is&#95;contained</a>(AffectedQueue, To))</Highlight></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><Highlight kind="normal">        AffectedQueue.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(To);</Highlight></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a042afbdb3af77ca1c837f901040d8f7c">SemiNCAInfo</a> SNCA(BUI);</Highlight></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LastDFSNum =</Highlight></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><Highlight kind="normal">        SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), 0, DescendAndCollect, 0);</Highlight></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> MinNode = ToTN;</Highlight></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Identify the top of the subtree to rebuild by finding the NCD of all</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the affected nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : AffectedQueue) &#123;</Highlight></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> NCDBlock =</Highlight></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><Highlight kind="normal">          DT.findNearestCommonDominator(TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>());</Highlight></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCDBlock || DT.isPostDominator());</Highlight></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> NCD = DT.getNode(NCDBlock);</Highlight></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NCD);</Highlight></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Processing affected node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN)</Highlight></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; with NCD = &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(NCD)</Highlight></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, MinNode =&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(MinNode) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NCD != TN &amp;&amp; NCD-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt; MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>()) MinNode = NCD;</Highlight></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Root reached, rebuild the whole tree from scratch.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>()) &#123;</Highlight></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;The entire tree needs to be rebuilt\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Erase the unreachable subtree in reverse preorder to process all children</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// before deleting their parent.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = LastDFSNum; i &gt; 0; --i) &#123;</Highlight></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>&#91;i&#93;;</Highlight></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Erasing node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>))</Highlight></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><Highlight kind="normal">      DT.eraseNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The affected subtree start at the To node -- there&#39;s no extra work to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinNode == ToTN) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;DeleteUnreachable: running DFS with MinNode = &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(MinNode) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinLevel = MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>();</Highlight></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> PrevIDom = MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</Highlight></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevIDom);</Highlight></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</Highlight></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Identify nodes that remain in the affected subtree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> DescendBelow = &#91;MinLevel, &amp;DT&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a>, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> ToTN = DT.getNode(To);</Highlight></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ToTN &amp;&amp; ToTN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &gt; MinLevel;</Highlight></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a82285f7a23214e4a8931017af62e2d24">runDFS</a>(MinNode-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>(), 0, DescendBelow, 0);</Highlight></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Previous IDom(MinNode) = &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(PrevIDom) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\nRunning Semi-NCA\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Rebuild the remaining part of affected subtree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6b01145051cf194d0efb2b7ae241f24c">runSemiNCA</a>();</Highlight></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><Highlight kind="normal">    SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6ab30bb387a6e7086235e9ff7ad01941">reattachExistingSubtree</a>(DT, PrevIDom);</Highlight></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//~~</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//===--------------------- DomTree Batch Updater --------------------------===</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//~~</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46">ApplyUpdates</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &amp;PreViewCFG,</Highlight></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><Highlight kind="normal">                           <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a52e01727eaa01a6cef0a7c1105e41c12">GraphDiffT</a> &#42;PostViewCFG) &#123;</Highlight></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Note: the PostViewCFG is only used when computing from scratch. It&#39;s data</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// should already included in the PreViewCFG for incremental updates.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> NumUpdates = PreViewCFG.<a href="/docs/api/classes/llvm/graphdiff/#abf8532d450c03fedf6af2f69f29388cf">getNumLegalizedUpdates</a>();</Highlight></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumUpdates == 0)</Highlight></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Take the fast path for a single update and avoid running the batch update</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// machinery.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumUpdates == 1) &#123;</Highlight></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> Update = PreViewCFG.<a href="/docs/api/classes/llvm/graphdiff/#ab2a3b8f6ebc0db2628ad35dc728fde42">popUpdateForIncrementalUpdates</a>();</Highlight></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PostViewCFG) &#123;</Highlight></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Update.getKind() == UpdateKind::Insert)</Highlight></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, </Highlight><Highlight kind="comment">/&#42;BUI=&#42;/</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, Update.getFrom(), Update.getTo());</Highlight></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, </Highlight><Highlight kind="comment">/&#42;BUI=&#42;/</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, Update.getFrom(), Update.getTo());</Highlight></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> BUI(&#42;PostViewCFG, PostViewCFG);</Highlight></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Update.getKind() == UpdateKind::Insert)</Highlight></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, &amp;BUI, Update.getFrom(), Update.getTo());</Highlight></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, &amp;BUI, Update.getFrom(), Update.getTo());</Highlight></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> BUI(PreViewCFG, PostViewCFG);</Highlight></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Recalculate the DominatorTree when the number of updates</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// exceeds a threshold, which usually makes direct updating slower than</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// recalculation. We select this threshold proportional to the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// size of the DominatorTree. The constant is selected</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// by choosing the one with an acceptable performance on some real-world</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// inputs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Make unittests of the incremental algorithm work</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.DomTreeNodes.size() &lt;= 100) &#123;</Highlight></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &gt; DT.DomTreeNodes.size())</Highlight></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, &amp;BUI);</Highlight></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &gt; DT.DomTreeNodes.size() / 40)</Highlight></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">CalculateFromScratch</a>(DT, &amp;BUI);</Highlight></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the DominatorTree was recalculated at some point, stop the batch</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// updates. Full recalculations ignore batch updates and look at the actual</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// CFG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#aa1ceab925352791613e8dd137ee91d34">NumLegalized</a> &amp;&amp; !BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a37e6111f7d67481244d8b4da72dd0ee1">IsRecalculated</a>; ++i)</Highlight></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c">ApplyNextUpdate</a>(DT, BUI);</Highlight></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab4a757a462794e729a37c4cb13278b4c">ApplyNextUpdate</a>(DomTreeT &amp;DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">BatchUpdateInfo</a> &amp;BUI) &#123;</Highlight></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Popping the next update, will move the PreViewCFG to the next snapshot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a9b867e96ffbb0518682396282de702fb">UpdateT</a> CurrentUpdate = BUI.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo/#a406eae297a0eccbe8848b8d99232b213">PreViewCFG</a>.<a href="/docs/api/classes/llvm/graphdiff/#ab2a3b8f6ebc0db2628ad35dc728fde42">popUpdateForIncrementalUpdates</a>();</Highlight></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: The LLVM&#95;DEBUG macro only plays well with a modular</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// build of LLVM when the header is marked as textual, but doing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// so causes redefinition errors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Applying update: &quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(CurrentUpdate.dump(); <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrentUpdate.getKind() == UpdateKind::Insert)</Highlight></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">InsertEdge</a>(DT, &amp;BUI, CurrentUpdate.getFrom(), CurrentUpdate.getTo());</Highlight></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">DeleteEdge</a>(DT, &amp;BUI, CurrentUpdate.getFrom(), CurrentUpdate.getTo());</Highlight></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//~~</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//===--------------- DomTree correctness verification ---------------------===</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//~~</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the tree has correct roots. A DominatorTree always has a single</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// root which is the function&#39;s entry node. A PostDominatorTree can have</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// multiple roots - one for each node with no successors and for infinite</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// loops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847">verifyRoots</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DT.Parent &amp;&amp; !DT.Roots.empty()) &#123;</Highlight></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Tree has no parent but has roots!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a>) &#123;</Highlight></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.Roots.empty()) &#123;</Highlight></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Tree doesn&#39;t have a root!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.getRoot() != <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f0aaddef3961662a3796cd1afe79da8">GetEntryNode</a>(DT)) &#123;</Highlight></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Tree&#39;s root is not its parent&#39;s entry node!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a49550ef5969f83dc768411af224afb54">RootsT</a> ComputedRoots = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a2867e9240af1e5a7d2a7aabb385a661d">FindRoots</a>(DT, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a883785e34f877df86f4408a3aa7f25aa">isPermutation</a>(DT.Roots, ComputedRoots)) &#123;</Highlight></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Tree has different roots than freshly computed ones!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tPDT roots: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : DT.Roots) <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\tComputed roots: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : ComputedRoots)</Highlight></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Checks if the tree contains all reachable nodes in the input graph.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de">verifyReachability</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</Highlight></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a6f4824267c307e103d9ef6c84fd8972f">AlwaysDescend</a>);</Highlight></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</Highlight></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</Highlight></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TN)</Highlight></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Virtual root has a corresponding virtual CFG node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.isVirtualRoot(TN)) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(BB).DFSNum == 0) &#123;</Highlight></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;DomTree node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</Highlight></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><Highlight kind="normal">               &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; not found by DFS walk!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a813e82e90438f456f15f75c367ac5b58">NumToNode</a>) &#123;</Highlight></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; !DT.getNode(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)) &#123;</Highlight></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;CFG node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><Highlight kind="normal">               &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; not found in the DomTree!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if for every parent with a level L in the tree all of its children</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// have level L + 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0">VerifyLevels</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</Highlight></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</Highlight></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TN)</Highlight></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BB) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> IDom = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a453de62c2dadf7b4b8df04e89f6ab4e0">getIDom</a>();</Highlight></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IDom &amp;&amp; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() != 0) &#123;</Highlight></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Node without an IDom &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</Highlight></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><Highlight kind="normal">               &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; has a nonzero level &quot;</Highlight><Highlight kind="normal"> &lt;&lt; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IDom &amp;&amp; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() != IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() + 1) &#123;</Highlight></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; has level &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><Highlight kind="normal">               &lt;&lt; TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; while its IDom &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><Highlight kind="normal">               &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; has level &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><Highlight kind="normal">               &lt;&lt; IDom-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#ab73bfd7dc4d5a446db965380e340810e">getLevel</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the computed DFS numbers are correct. Note that DFS info may not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// be valid, and when that is the case, we don&#39;t verify the numbers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N log(N)).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8">VerifyDFSNumbers</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DT.DFSInfoValid || !DT.Parent)</Highlight></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> RootBB = <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5614a7f13a1e9158a52c5469ae45e126">IsPostDom</a> ? nullptr : &#42;DT.root&#95;begin();</Highlight></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Root = DT.getNode(RootBB);</Highlight></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> PrintNodeAndDFSNums = &#91;&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN) &#123;</Highlight></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &#123;&quot;</Highlight><Highlight kind="normal"> &lt;&lt; TN-&gt;getDFSNumIn() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><Highlight kind="normal">             &lt;&lt; TN-&gt;getDFSNumOut() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&#125;&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Verify the root&#39;s DFS In number. Although DFS numbering would also work</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// if we started from some other value, we assume 0-based numbering.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Root-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>() != 0) &#123;</Highlight></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;DFSIn number for the tree root is not:\\n\\t&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><Highlight kind="normal">      PrintNodeAndDFSNums(Root);</Highlight></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For each tree node verify if children&#39;s DFS numbers cover their parent&#39;s</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// DFS numbers with no gaps.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</Highlight></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/classes/node">Node</a> = NodeToTN.get();</Highlight></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/node">Node</a>)</Highlight></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Handle tree leaves.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/node">Node</a>-&gt;isLeaf()) &#123;</Highlight></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumIn() + 1 != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumOut()) &#123;</Highlight></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Tree leaf should have DFSOut = DFSIn + 1:\\n\\t&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><Highlight kind="normal">          PrintNodeAndDFSNums(<a href="/docs/api/classes/node">Node</a>);</Highlight></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Make a copy and sort it such that it is possible to check if there are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// no gaps between DFS numbers of adjacent children.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;TreeNodePtr, 8&gt;</a> Children(<a href="/docs/api/classes/node">Node</a>-&gt;begin(), <a href="/docs/api/classes/node">Node</a>-&gt;end());</Highlight></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(Children, &#91;&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch1, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch2) &#123;</Highlight></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Ch1-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>() &lt; Ch2-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a718717ee958956ec34ed177ef0b7f2ba">getDFSNumIn</a>();</Highlight></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><Highlight kind="normal">      &#125;);</Highlight></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> PrintChildrenError = &#91;<a href="/docs/api/classes/node">Node</a>, &amp;Children, PrintNodeAndDFSNums&#93;(</Highlight></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> FirstCh, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> SecondCh) &#123;</Highlight></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstCh);</Highlight></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Incorrect DFS numbers for:\\n\\tParent &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><Highlight kind="normal">        PrintNodeAndDFSNums(<a href="/docs/api/classes/node">Node</a>);</Highlight></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\tChild &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><Highlight kind="normal">        PrintNodeAndDFSNums(FirstCh);</Highlight></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SecondCh) &#123;</Highlight></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\tSecond child &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><Highlight kind="normal">          PrintNodeAndDFSNums(SecondCh);</Highlight></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\nAll children: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Ch : Children) &#123;</Highlight></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><Highlight kind="normal">          PrintNodeAndDFSNums(Ch);</Highlight></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><Highlight kind="normal">      &#125;;</Highlight></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Children.front()-&gt;getDFSNumIn() != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumIn() + 1) &#123;</Highlight></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><Highlight kind="normal">        PrintChildrenError(Children.front(), </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Children.back()-&gt;getDFSNumOut() + 1 != <a href="/docs/api/classes/node">Node</a>-&gt;getDFSNumOut()) &#123;</Highlight></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><Highlight kind="normal">        PrintChildrenError(Children.back(), </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0, e = Children.size() - 1; i != e; ++i) &#123;</Highlight></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Children&#91;i&#93;-&gt;getDFSNumOut() + 1 != Children&#91;i + 1&#93;-&gt;getDFSNumIn()) &#123;</Highlight></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><Highlight kind="normal">          PrintChildrenError(Children&#91;i&#93;, Children&#91;i + 1&#93;);</Highlight></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The below routines verify the correctness of the dominator tree relative to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the CFG it&#39;s coming from.  A tree is a dominator tree iff it has two</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// properties, called the parent property and the sibling property.  Tarjan</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and Lengauer prove (but don&#39;t explicitly name) the properties as part of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the proofs in their 1972 paper, but the proofs are mostly part of proving</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// things about semidominators and idoms, and some of them are simply asserted</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// based on even earlier papers (see, e.g., lemma 2).  Some papers refer to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// these properties as &quot;valid&quot; and &quot;co-valid&quot;.  See, e.g., &quot;Dominators,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// directed bipolar orders, and independent spanning trees&quot; by Loukas</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Georgiadis and Robert E. Tarjan, as well as &quot;Dominator Tree Verification</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and Vertex-Disjoint Paths &quot; by the same authors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A very simple and direct explanation of these properties can be found in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &quot;An Experimental Study of Dynamic Dominators&quot;, found at</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// https://arxiv.org/abs/1604.02711</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The easiest way to think of the parent property is that it&#39;s a requirement</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// of being a dominator.  Let&#39;s just take immediate dominators.  For PARENT to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// be an immediate dominator of CHILD, all paths in the CFG must go through</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PARENT before they hit CHILD.  This implies that if you were to cut PARENT</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// out of the CFG, there should be no paths to CHILD that are reachable.  If</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// there are, then you now have a path from PARENT to CHILD that goes around</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PARENT and still reaches CHILD, which by definition, means PARENT can&#39;t be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// a dominator of CHILD (let alone an immediate one).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The sibling property is similar.  It says that for each pair of sibling</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// nodes in the dominator tree (LEFT and RIGHT) , they must not dominate each</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// other.  If sibling LEFT dominated sibling RIGHT, it means there are no</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// paths in the CFG from sibling LEFT to sibling RIGHT that do not go through</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// LEFT, and thus, LEFT is really an ancestor (in the dominator tree) of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RIGHT, not a sibling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// It is possible to verify the parent and sibling properties in linear time,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// but the algorithms are complex. Instead, we do it in a straightforward</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// N^2 and N^3 way below, using direct path reachability.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Checks if the tree has the parent property: if for all edges from V to W in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the input graph, such that V is reachable, the parent of W in the tree is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// an ancestor of V in the tree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N^2).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This means that if a node gets disconnected from the graph, then all of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the nodes it dominated previously will now become unreachable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7">verifyParentProperty</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</Highlight></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</Highlight></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TN)</Highlight></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BB || TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a25b833c85afc5c3de7c2c4e38ac6b146">isLeaf</a>())</Highlight></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Verifying parent property of node &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><Highlight kind="normal">                        &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(TN) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</Highlight></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, &#91;BB&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> From != BB &amp;&amp; To != BB;</Highlight></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><Highlight kind="normal">      &#125;);</Highlight></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> Child : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>())</Highlight></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(Child-&gt;getBlock()).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> != 0) &#123;</Highlight></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Child &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(Child)</Highlight></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><Highlight kind="normal">                 &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; reachable after its parent &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(BB)</Highlight></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><Highlight kind="normal">                 &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; is removed!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the tree has sibling property: if a node V does not dominate a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// node W for all siblings V and W in the tree.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N^3).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This means that if a node gets disconnected from the graph, then all of its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// siblings will now still be reachable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4">verifySiblingProperty</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;NodeToTN : DT.DomTreeNodes) &#123;</Highlight></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> TN = NodeToTN.get();</Highlight></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TN)</Highlight></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BB = TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#aab2bf365c9f4b976adc7479576dfd5bb">getBlock</a>();</Highlight></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BB || TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a25b833c85afc5c3de7c2c4e38ac6b146">isLeaf</a>())</Highlight></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>()) &#123;</Highlight></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a480cdda4e46458dbca790a5205b0fdcb">clear</a>();</Highlight></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> BBN = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getBlock();</Highlight></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a1c0f3e4b99c65642beff237e454a74fe">doFullDFSWalk</a>(DT, &#91;BBN&#93;(<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> From, <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a5669fb284cfbf3893c2be26690f5d383">NodePtr</a> To) &#123;</Highlight></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> From != BBN &amp;&amp; To != BBN;</Highlight></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><Highlight kind="normal">        &#125;);</Highlight></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ab841529e1d6fd801bdeb291409119aef">TreeNodePtr</a> S : TN-&gt;<a href="/docs/api/classes/llvm/domtreenodebase/#a06c288c533e6c4fc7def0945622b26f3">children</a>()) &#123;</Highlight></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (S == <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a16dc433ff2f74c51a76edbffbabdd5bd">getNodeInfo</a>(S-&gt;getBlock()).<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/inforec/#aea3bfb4f61599f17708e91db1a0c2be6">DFSNum</a> == 0) &#123;</Highlight></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Node &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(S)</Highlight></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><Highlight kind="normal">                   &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; not reachable when its sibling &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/blocknameprinter">BlockNamePrinter</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><Highlight kind="normal">                   &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; is removed!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the given tree is the same as a freshly computed one for the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Parent.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Running time: O(N^2), but faster in practice (same as tree construction).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Note that this does not check if that the tree construction algorithm is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// correct and should be only used for fast (but possibly unsound)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// verification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532" lineLink="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712">IsSameAsFreshTree</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><Highlight kind="normal">    DomTreeT FreshTree;</Highlight></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><Highlight kind="normal">    FreshTree.recalculate(&#42;DT.Parent);</Highlight></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Different = DT.compare(FreshTree);</Highlight></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Different) &#123;</Highlight></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; (DT.isPostDominator() ? </Highlight><Highlight kind="stringliteral">&quot;Post&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;DominatorTree is different than a freshly computed one!\\n&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\tCurrent:\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><Highlight kind="normal">      DT.print(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n\\tFreshly computed tree:\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><Highlight kind="normal">      FreshTree.print(<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>().<a href="/docs/api/classes/llvm/raw-ostream/#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</Highlight></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !Different;</Highlight></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">class</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a73e198fec8305bc64938bc784a8f0d1c"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a73e198fec8305bc64938bc784a8f0d1c">Calculate</a>(DomTreeT &amp;DT) &#123;</Highlight></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">SemiNCAInfo&lt;DomTreeT&gt;::CalculateFromScratch</a>(DT, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a21425ba1759b3e091d72ce8333be2ff1"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a21425ba1759b3e091d72ce8333be2ff1">CalculateWithUpdates</a>(DomTreeT &amp;DT,</Highlight></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><Highlight kind="normal">                          <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;typename DomTreeT::UpdateType&gt;</a> Updates) &#123;</Highlight></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Updated to use the PreViewCFG and behave the same as until now.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This behavior is however incorrect; this actually needs the PostViewCFG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff&lt;typename DomTreeT::NodePtr, DomTreeT::IsPostDominator&gt;</a> PreViewCFG(</Highlight></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><Highlight kind="normal">      Updates, </Highlight><Highlight kind="comment">/&#42;ReverseApplyUpdates=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/batchupdateinfo">SemiNCAInfo&lt;DomTreeT&gt;::BatchUpdateInfo</a> BUI(PreViewCFG);</Highlight></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a91b2ad7a91962494b1608aa174ac8ff3">SemiNCAInfo&lt;DomTreeT&gt;::CalculateFromScratch</a>(DT, &amp;BUI);</Highlight></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">class</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#ab5e2b97e90221527d92449f4ac5159f6"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#ab5e2b97e90221527d92449f4ac5159f6">InsertEdge</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr From,</Highlight></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><Highlight kind="normal">                </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr To) &#123;</Highlight></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.isPostDominator()) <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(From, To);</Highlight></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#ae13a8bd8e24f12a9040cbbc5407d4b87">SemiNCAInfo&lt;DomTreeT&gt;::InsertEdge</a>(DT, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, From, To);</Highlight></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">class</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a70aa6f22ccb403c6b716d03783275dfd"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a70aa6f22ccb403c6b716d03783275dfd">DeleteEdge</a>(DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr From,</Highlight></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><Highlight kind="normal">                </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr To) &#123;</Highlight></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DT.isPostDominator()) <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(From, To);</Highlight></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a0733c415f27a3fa6f962bb5d5353ec1b">SemiNCAInfo&lt;DomTreeT&gt;::DeleteEdge</a>(DT, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, From, To);</Highlight></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">class</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a938230b97505e69266ab1f8ac0eb5db7"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/domtreebuilder/#a938230b97505e69266ab1f8ac0eb5db7">ApplyUpdates</a>(DomTreeT &amp;DT,</Highlight></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff</a>&lt;</Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr,</Highlight></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><Highlight kind="normal">                            DomTreeT::IsPostDominator&gt; &amp;PreViewCFG,</Highlight></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/graphdiff">GraphDiff</a>&lt;</Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::NodePtr,</Highlight></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><Highlight kind="normal">                            DomTreeT::IsPostDominator&gt; &#42;PostViewCFG) &#123;</Highlight></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a597a58e3cc8ada27fdd127488b9f6d46">SemiNCAInfo&lt;DomTreeT&gt;::ApplyUpdates</a>(DT, PreViewCFG, PostViewCFG);</Highlight></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keyword">class</Highlight><Highlight kind="normal"> DomTreeT&gt;</Highlight></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591" lineLink="/docs/api/namespaces/llvm/domtreebuilder/#a1348bf219185f1a9896e890ab4c2061d"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/powerpc/ppcctrloopsverify-cpp/#a345bd69760b9ee32b3f49d4fc04120fb">Verify</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DomTreeT &amp;DT, </Highlight><Highlight kind="keyword">typename</Highlight><Highlight kind="normal"> DomTreeT::VerificationLevel VL) &#123;</Highlight></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/domtreebuilder/semincainfo">SemiNCAInfo&lt;DomTreeT&gt;</a> SNCA(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Simplist check is to compare against a new tree. This will also</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// usefully print the old and new trees, if they are different.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4ea2d791b0cb2b452a1d9ccfaf181712">IsSameAsFreshTree</a>(DT))</Highlight></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Common checks to verify the properties of the tree. O(N log N) at worst.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeff699bd020f8620eb57bc0ffd9ce847">verifyRoots</a>(DT) || !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4bed97020476a2d93eb433776597d3de">verifyReachability</a>(DT) ||</Highlight></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><Highlight kind="normal">      !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a4714e88fbf38f2aaf7fd427dfb17a3a0">VerifyLevels</a>(DT) || !SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aba197972422fd98e9318e22f0419e0a8">VerifyDFSNumbers</a>(DT))</Highlight></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Extra checks depending on VerificationLevel. Up to O(N^3).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VL == DomTreeT::VerificationLevel::Basic ||</Highlight></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><Highlight kind="normal">      VL == DomTreeT::VerificationLevel::Full)</Highlight></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#aeeca9e1d5c151829946fa95f9b9b30c7">verifyParentProperty</a>(DT))</Highlight></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VL == DomTreeT::VerificationLevel::Full)</Highlight></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SNCA.<a href="/docs/api/structs/llvm/domtreebuilder/semincainfo/#a647a59b37db18cd302d604f723ba2ec4">verifySiblingProperty</a>(DT))</Highlight></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><Highlight kind="normal">&#125;  </Highlight><Highlight kind="comment">// namespace DomTreeBuilder</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><Highlight kind="normal">&#125;  </Highlight><Highlight kind="comment">// namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#undef DEBUG&#95;TYPE</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight></CodeLine>

</ProgramListing>


</DoxygenPage>
