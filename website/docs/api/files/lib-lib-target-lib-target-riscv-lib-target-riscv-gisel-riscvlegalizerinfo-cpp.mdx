---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import XrefSect from '@xpack/docusaurus-plugin-doxygen/components/XrefSect'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `RISCVLegalizerInfo.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file implements the targeting of the Machinelegalizer class for RISC-V. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="RISCVLegalizerInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="MCTargetDesc/RISCVMatInt.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/mctargetdesc/riscvmatint-h"
  isLocal="true" />
<IncludesListItem
  filePath="RISCVMachineFunctionInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/riscv/riscvmachinefunctioninfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="RISCVSubtarget.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/riscv/riscvsubtarget-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/GIMatchTableExecutor.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/gimatchtableexecutor-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/GenericMachineInstrs.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/genericmachineinstrs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/LegalizerHelper.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/legalizerhelper-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/MachineIRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineConstantPool.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineconstantpool-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineJumpTableInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinejumptableinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineMemOperand.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinememoperand-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineOperand.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetOpcodes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetopcodes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ValueTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/valuetypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DerivedTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Type.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/type-h"
  isLocal="true" />
</IncludesList>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></>}
  name={<><a href="#a42b3a4fddf9f295aaafa90d119e4733c">buildAllOnesMask</a> (LLT VecTy, const SrcOp &amp;VL, MachineIRBuilder &amp;MIB, MachineRegisterInfo &amp;MRI)</>}>
Creates an all ones mask suitable for masking a vector of type VecTy with vector length VL. <a href="#a42b3a4fddf9f295aaafa90d119e4733c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a>, <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> &gt;</>}
  name={<><a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a> (LLT VecTy, MachineIRBuilder &amp;MIB, MachineRegisterInfo &amp;MRI)</>}>
Gets the two common &quot;VL&quot; operands: an all-ones mask and the vector length. <a href="#a45e6e22e05efa275135c8ae32f60da40">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></>}
  name={<><a href="#acf786882a93d0d71ff5e5f39e1d12212">buildSplatPartsS64WithVL</a> (const DstOp &amp;Dst, const SrcOp &amp;Passthru, Register Lo, Register Hi, const SrcOp &amp;VL, MachineIRBuilder &amp;MIB, MachineRegisterInfo &amp;MRI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></>}
  name={<><a href="#a77d3589f9460c3f08bc6afc49a9985c6">buildSplatSplitS64WithVL</a> (const DstOp &amp;Dst, const SrcOp &amp;Passthru, const SrcOp &amp;Scalar, const SrcOp &amp;VL, MachineIRBuilder &amp;MIB, MachineRegisterInfo &amp;MRI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a> (LLT VecTy)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ad1f97111fb4c021a0584599e68e93032">getMaskTypeFor</a> (LLT VecTy)</>}>
Return the type of the mask type suitable for masking the provided vector type. <a href="#ad1f97111fb4c021a0584599e68e93032">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a> (unsigned Opcode)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a> (unsigned TypeIdx, std::initializer&#95;list&lt; LLT &gt; BoolVecTys, const RISCVSubtarget &amp;ST)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a> (unsigned TypeIdx, std::initializer&#95;list&lt; LLT &gt; IntOrFPVecTys, const RISCVSubtarget &amp;ST)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#add2fb044d0bb3af5ef4e27dd3f97e062">typeIsLegalPtrVec</a> (unsigned TypeIdx, std::initializer&#95;list&lt; LLT &gt; PtrVecTys, const RISCVSubtarget &amp;ST)</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file implements the targeting of the Machinelegalizer class for RISC-V.

<XrefSect
  title="Todo"
  permalink="/docs/api/pages/todo/#_todo000032">
This should be generated by <a href="/docs/api/namespaces/llvm/tablegen">TableGen</a>.
</XrefSect>

<SectionDefinition>

## Functions

### buildAllOnesMask() {#a42b3a4fddf9f295aaafa90d119e4733c}

<MemberDefinition
  prototype={<>static MachineInstrBuilder buildAllOnesMask (<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; VL, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI)</>}
  labels = {["static"]}>
Creates an all ones mask suitable for masking a vector of type VecTy with vector length VL.

Definition at line <a href="#l00960">960</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### buildDefaultVLOps() {#a45e6e22e05efa275135c8ae32f60da40}

<MemberDefinition
  prototype={<>static std::pair&lt; MachineInstrBuilder, MachineInstrBuilder &gt; buildDefaultVLOps (<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI)</>}
  labels = {["static"]}>
Gets the two common &quot;VL&quot; operands: an all-ones mask and the vector length.

VecTy is a scalable vector type.

Definition at line <a href="#l00970">970</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### buildSplatPartsS64WithVL() {#acf786882a93d0d71ff5e5f39e1d12212}

<MemberDefinition
  prototype={<>static MachineInstrBuilder buildSplatPartsS64WithVL (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dstop">DstOp</a> &amp; Dst, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; Passthru, <a href="/docs/api/classes/llvm/register">Register</a> Lo, <a href="/docs/api/classes/llvm/register">Register</a> Hi, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; VL, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI)</>}
  labels = {["static"]}>

Definition at line <a href="#l00980">980</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### buildSplatSplitS64WithVL() {#a77d3589f9460c3f08bc6afc49a9985c6}

<MemberDefinition
  prototype={<>static MachineInstrBuilder buildSplatSplitS64WithVL (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dstop">DstOp</a> &amp; Dst, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; Passthru, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; Scalar, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp; VL, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI)</>}
  labels = {["static"]}>

Definition at line <a href="#l00996">996</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### getLMUL1Ty() {#a2792f75920a3f0a318385a95f8a5702a}

<MemberDefinition
  prototype={<>static LLT getLMUL1Ty (<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy)</>}
  labels = {["static"]}>

Definition at line <a href="#l01061">1061</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### getMaskTypeFor() {#ad1f97111fb4c021a0584599e68e93032}

<MemberDefinition
  prototype={<>static LLT getMaskTypeFor (<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy)</>}
  labels = {["static"]}>
Return the type of the mask type suitable for masking the provided vector type.

This is simply an i1 element type vector of the same (possibly scalable) length.

Definition at line <a href="#l00952">952</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### getRISCVWOpcode() {#afb1c74237caff47455679fae7d90a06c}

<MemberDefinition
  prototype="static unsigned getRISCVWOpcode (unsigned Opcode)"
  labels = {["static"]}>

Definition at line <a href="#l01287">1287</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### typeIsLegalBoolVec() {#a6b25441e6e04451dbc324440387f0ffb}

<MemberDefinition
  prototype={<>static LegalityPredicate typeIsLegalBoolVec (unsigned TypeIdx, std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt; BoolVecTys, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp; ST)</>}
  labels = {["static"]}>

Definition at line <a href="#l00051">51</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### typeIsLegalIntOrFPVec() {#a88ce58d5c26dbb6a3a6902c4bef5ed4d}

<MemberDefinition
  prototype={<>static LegalityPredicate typeIsLegalIntOrFPVec (unsigned TypeIdx, std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt; IntOrFPVecTys, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp; ST)</>}
  labels = {["static"]}>

Definition at line <a href="#l00036">36</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

### typeIsLegalPtrVec() {#add2fb044d0bb3af5ef4e27dd3f97e062}

<MemberDefinition
  prototype={<>static LegalityPredicate typeIsLegalPtrVec (unsigned TypeIdx, std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt; PtrVecTys, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp; ST)</>}
  labels = {["static"]}>

Definition at line <a href="#l00061">61</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-cpp">RISCVLegalizerInfo.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===-- RISCVLegalizerInfo.cpp ----------------------------------&#42;- C++ -&#42;-===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// This file implements the targeting of the Machinelegalizer class for RISC-V.</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// \\todo This should be generated by TableGen.</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/gisel/riscvlegalizerinfo-h">RISCVLegalizerInfo.h</a>&quot;</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/lib/target/riscv/mctargetdesc/riscvmatint-h">MCTargetDesc/RISCVMatInt.h</a>&quot;</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvmachinefunctioninfo-h">RISCVMachineFunctionInfo.h</a>&quot;</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvsubtarget-h">RISCVSubtarget.h</a>&quot;</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/gimatchtableexecutor-h">llvm/CodeGen/GlobalISel/GIMatchTableExecutor.h</a>&quot;</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/genericmachineinstrs-h">llvm/CodeGen/GlobalISel/GenericMachineInstrs.h</a>&quot;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/legalizerhelper-h">llvm/CodeGen/GlobalISel/LegalizerHelper.h</a>&quot;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineconstantpool-h">llvm/CodeGen/MachineConstantPool.h</a>&quot;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinejumptableinfo-h">llvm/CodeGen/MachineJumpTableInfo.h</a>&quot;</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinememoperand-h">llvm/CodeGen/MachineMemOperand.h</a>&quot;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h">llvm/CodeGen/MachineOperand.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetopcodes-h">llvm/CodeGen/TargetOpcodes.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/valuetypes-h">llvm/CodeGen/ValueTypes.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h">llvm/IR/DerivedTypes.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/type-h">llvm/IR/Type.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/legalitypredicates">LegalityPredicates</a>;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/legalizemutations">LegalizeMutations</a>;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36" lineLink="#a88ce58d5c26dbb6a3a6902c4bef5ed4d"><span class="doxyHighlight"><a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx,</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlight">                      std::initializer&#95;list&lt;LLT&gt; IntOrFPVecTys,</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlight">                      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp;ST) &#123;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = &#91;=, &amp;ST&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.hasVInstructions() &amp;&amp;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlight">           (Query.Types&#91;TypeIdx&#93;.getScalarSizeInBits() != 64 ||</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlight">            ST.hasVInstructionsI64()) &amp;&amp;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlight">           (Query.Types&#91;TypeIdx&#93;.getElementCount().getKnownMinValue() != 1 ||</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlight">            ST.getELen() == 64);</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(TypeIdx, IntOrFPVecTys), <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>);</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51" lineLink="#a6b25441e6e04451dbc324440387f0ffb"><span class="doxyHighlight"><a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx, std::initializer&#95;list&lt;LLT&gt; BoolVecTys,</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlight">                   </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp;ST) &#123;</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = &#91;=, &amp;ST&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.hasVInstructions() &amp;&amp;</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlight">           (Query.Types&#91;TypeIdx&#93;.getElementCount().getKnownMinValue() != 1 ||</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlight">            ST.getELen() == 64);</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(TypeIdx, BoolVecTys), <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>);</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61" lineLink="#add2fb044d0bb3af5ef4e27dd3f97e062"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#add2fb044d0bb3af5ef4e27dd3f97e062">typeIsLegalPtrVec</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx,</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlight">                                           std::initializer&#95;list&lt;LLT&gt; PtrVecTys,</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp;ST) &#123;</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = &#91;=, &amp;ST&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.hasVInstructions() &amp;&amp;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><span class="doxyHighlight">           (Query.Types&#91;TypeIdx&#93;.getElementCount().getKnownMinValue() != 1 ||</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlight">            ST.getELen() == 64) &amp;&amp;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlight">           (Query.Types&#91;TypeIdx&#93;.getElementCount().getKnownMinValue() != 16 ||</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlight">            Query.Types&#91;TypeIdx&#93;.getScalarSizeInBits() == 32);</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(TypeIdx, PtrVecTys), <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>);</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74" lineLink="/docs/api/classes/llvm/riscvlegalizerinfo/#af31cf7c3246e88cbfbb4a3dab768a047"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/riscvlegalizerinfo/#af31cf7c3246e88cbfbb4a3dab768a047">RISCVLegalizerInfo::RISCVLegalizerInfo</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp;ST)</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlight">    : STI(ST), XLen(STI.getXLen()), sXLen(<a href="/docs/api/classes/llvm/llt">LLT</a>::scalar(XLen)) &#123;</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> sDoubleXLen = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(2 &#42; XLen);</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> p0 = <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(0, XLen);</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s1 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s8 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8);</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s16 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s32 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s64 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> s128 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, s1);</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, s1);</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, s1);</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, s1);</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv16s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(16, s1);</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv32s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(32, s1);</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv64s1 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(64, s1);</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, s8);</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, s8);</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, s8);</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, s8);</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv16s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(16, s8);</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv32s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(32, s8);</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv64s8 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(64, s8);</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, s16);</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, s16);</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, s16);</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, s16);</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv16s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(16, s16);</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv32s16 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(32, s16);</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1s32 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, s32);</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2s32 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, s32);</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4s32 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, s32);</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8s32 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, s32);</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv16s32 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(16, s32);</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1s64 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, s64);</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2s64 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, s64);</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4s64 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, s64);</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8s64 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, s64);</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv1p0 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(1, p0);</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv2p0 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(2, p0);</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv4p0 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(4, p0);</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv8p0 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(8, p0);</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> nxv16p0 = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(16, p0);</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/targetopcode">TargetOpcode</a>;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BoolVecTys = &#123;nxv1s1, nxv2s1, nxv4s1, nxv8s1, nxv16s1, nxv32s1, nxv64s1&#125;;</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntOrFPVecTys = &#123;nxv1s8,   nxv2s8,  nxv4s8,  nxv8s8,  nxv16s8, nxv32s8,</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlight">                        nxv64s8,  nxv1s16, nxv2s16, nxv4s16, nxv8s16, nxv16s16,</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlight">                        nxv32s16, nxv1s32, nxv2s32, nxv4s32, nxv8s32, nxv16s32,</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlight">                        nxv1s64,  nxv2s64, nxv4s64, nxv8s64&#125;;</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PtrVecTys = &#123;nxv1p0, nxv2p0, nxv4p0, nxv8p0, nxv16p0&#125;;</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ADD, G&#95;SUB&#125;)</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlight">      .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">      .legalIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST))</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(ST.is64Bit(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;AND, G&#95;OR, G&#95;XOR&#125;)</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">      .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">      .legalIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST))</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">      &#123;G&#95;UADDE, G&#95;UADDO, G&#95;USUBE, G&#95;USUBO&#125;).lower();</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SADDO, G&#95;SSUBO&#125;).minScalar(0, sXLen).<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Use Vector Single-Width Saturating Instructions for vector types.</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UADDSAT, G&#95;SADDSAT, G&#95;USUBSAT, G&#95;SSUBSAT&#125;)</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SHL, G&#95;ASHR, G&#95;LSHR&#125;)</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlight">      .legalFor(&#123;&#123;sXLen, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlight">      .customFor(ST.is64Bit(), &#123;&#123;s32, s32&#125;&#125;)</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, sXLen, sXLen)</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;ZEXT, G&#95;SEXT, G&#95;ANYEXT&#125;)</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlight">      .legalFor(&#123;&#123;s32, s16&#125;&#125;)</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s64, s16&#125;, &#123;s64, s32&#125;&#125;)</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlight">      .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlight">                   <a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(1, IntOrFPVecTys, ST)))</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#acda429561493e08ee5cef54f26a1224c">customIf</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST))</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a33e181da566d1ebb7556f172888c3b92">maxScalar</a>(0, sXLen);</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;SEXT&#95;INREG)</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen)</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Merge/Unmerge</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : &#123;G&#95;MERGE&#95;VALUES, G&#95;UNMERGE&#95;VALUES&#125;) &#123;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;MergeUnmergeActions = getActionDefinitionsBuilder(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BigTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;MERGE&#95;VALUES ? 0 : 1;</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LitTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;MERGE&#95;VALUES ? 1 : 0;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (XLen == 32 &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD()) &#123;</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlight">      MergeUnmergeActions.legalIf(</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(BigTyIdx, s64), <a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(LitTyIdx, s32)));</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlight">    MergeUnmergeActions.widenScalarToNextPow2(LitTyIdx, XLen)</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlight">        .widenScalarToNextPow2(BigTyIdx, XLen)</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">        .clampScalar(LitTyIdx, sXLen, sXLen)</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">        .clampScalar(BigTyIdx, sXLen, sXLen);</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FSHL, G&#95;FSHR&#125;).lower();</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;ROTR, G&#95;ROTL&#125;)</span></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb() || <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbkb(), &#123;&#123;sXLen, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit() &amp;&amp; (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb() || <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbkb()),</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">                 &#123;&#123;s32, s32&#125;&#125;)</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;BITREVERSE).maxScalar(0, sXLen).lower();</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;BITCAST).legalIf(</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a6fef38ab5d0c9c582fe6cae7d8badf5f">LegalityPredicates::any</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">                                  <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST)),</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#a6fef38ab5d0c9c582fe6cae7d8badf5f">LegalityPredicates::any</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(1, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">                                  <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST))));</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BSWAPActions = getActionDefinitionsBuilder(G&#95;BSWAP);</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb() || <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbkb())</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlight">    BSWAPActions.legalFor(&#123;sXLen&#125;).clampScalar(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">    BSWAPActions.maxScalar(0, sXLen).lower();</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;CountZerosActions = getActionDefinitionsBuilder(&#123;G&#95;CTLZ, G&#95;CTTZ&#125;);</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;CountZerosUndefActions =</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">      getActionDefinitionsBuilder(&#123;G&#95;CTLZ&#95;ZERO&#95;UNDEF, G&#95;CTTZ&#95;ZERO&#95;UNDEF&#125;);</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb()) &#123;</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">    CountZerosActions.legalFor(&#123;&#123;sXLen, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">        .customFor(&#123;&#123;s32, s32&#125;&#125;)</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">        .clampScalar(0, s32, sXLen)</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">        .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><span class="doxyHighlight">        .scalarSameSizeAs(1, 0);</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">    CountZerosActions.maxScalar(0, sXLen).scalarSameSizeAs(1, 0).lower();</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">    CountZerosUndefActions.maxScalar(0, sXLen).scalarSameSizeAs(1, 0);</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">  CountZerosUndefActions.lower();</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;CTPOPActions = getActionDefinitionsBuilder(G&#95;CTPOP);</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb()) &#123;</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">    CTPOPActions.legalFor(&#123;&#123;sXLen, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">        .clampScalar(0, sXLen, sXLen)</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">        .scalarSameSizeAs(1, 0);</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">    CTPOPActions.maxScalar(0, sXLen).scalarSameSizeAs(1, 0).lower();</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;CONSTANT)</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">      .legalFor(&#123;p0&#125;)</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">      .legalFor(!<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: transform illegal vector types into legal vector type</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FREEZE)</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">      .legalFor(&#123;s16, s32, p0&#125;)</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">      .legalIf(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST))</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">      .legalIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST))</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">      .clampScalar(0, s16, sXLen);</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: transform illegal vector types into legal vector type</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Merge with G&#95;FREEZE?</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">  getActionDefinitionsBuilder(</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">      &#123;G&#95;IMPLICIT&#95;DEF, G&#95;CONSTANT&#95;FOLD&#95;BARRIER&#125;)</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">      .legalFor(&#123;s32, sXLen, p0&#125;)</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">      .legalIf(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST))</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">      .legalIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST))</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlight">      .clampScalar(0, s32, sXLen);</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;ICMP)</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlight">      .legalFor(&#123;&#123;sXLen, sXLen&#125;, &#123;sXLen, p0&#125;&#125;)</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">      .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST),</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">                   <a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(1, IntOrFPVecTys, ST)))</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">      .widenScalarOrEltToNextPow2OrMinSize(1, 8)</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">      .clampScalar(1, sXLen, sXLen)</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;SELECT)</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">      .legalFor(&#123;&#123;s32, sXLen&#125;, &#123;p0, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">      .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">                   <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST)))</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">      .legalFor(XLen == 64 || <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s64, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">      .clampScalar(0, s32, (XLen == 64 || <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD()) ? s64 : s32)</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">      .clampScalar(1, sXLen, sXLen);</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;LoadActions = getActionDefinitionsBuilder(G&#95;LOAD);</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;StoreActions = getActionDefinitionsBuilder(G&#95;STORE);</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ExtLoadActions = getActionDefinitionsBuilder(&#123;G&#95;SEXTLOAD, G&#95;ZEXTLOAD&#125;);</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Return the alignment needed for scalar memory ops. If unaligned scalar mem</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is supported, we only require byte alignment. Otherwise, we need the memory</span></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// op to be natively aligned.</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> getScalarMemAlign = &#91;&amp;<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>&#93;(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.enableUnalignedScalarMem() ? 8 : <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>;</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlight">  LoadActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlight">      &#123;&#123;s16, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">       &#123;s32, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">       &#123;s16, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><span class="doxyHighlight">       &#123;s32, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">       &#123;s32, p0, s32, getScalarMemAlign(32)&#125;,</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><span class="doxyHighlight">       &#123;p0, p0, sXLen, getScalarMemAlign(XLen)&#125;&#125;);</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight">  StoreActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlight">      &#123;&#123;s16, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlight">       &#123;s32, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlight">       &#123;s16, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><span class="doxyHighlight">       &#123;s32, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlight">       &#123;s32, p0, s32, getScalarMemAlign(32)&#125;,</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><span class="doxyHighlight">       &#123;p0, p0, sXLen, getScalarMemAlign(XLen)&#125;&#125;);</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">  ExtLoadActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">      &#123;&#123;sXLen, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">       &#123;sXLen, p0, s16, getScalarMemAlign(16)&#125;&#125;);</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (XLen == 64) &#123;</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><span class="doxyHighlight">    LoadActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlight">        &#123;&#123;s64, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">         &#123;s64, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">         &#123;s64, p0, s32, getScalarMemAlign(32)&#125;,</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">         &#123;s64, p0, s64, getScalarMemAlign(64)&#125;&#125;);</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><span class="doxyHighlight">    StoreActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><span class="doxyHighlight">        &#123;&#123;s64, p0, s8, getScalarMemAlign(8)&#125;,</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight">         &#123;s64, p0, s16, getScalarMemAlign(16)&#125;,</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">         &#123;s64, p0, s32, getScalarMemAlign(32)&#125;,</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><span class="doxyHighlight">         &#123;s64, p0, s64, getScalarMemAlign(64)&#125;&#125;);</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><span class="doxyHighlight">    ExtLoadActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlight">        &#123;&#123;s64, p0, s32, getScalarMemAlign(32)&#125;&#125;);</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD()) &#123;</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">    LoadActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">        &#123;&#123;s64, p0, s64, getScalarMemAlign(64)&#125;&#125;);</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><span class="doxyHighlight">    StoreActions.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><span class="doxyHighlight">        &#123;&#123;s64, p0, s64, getScalarMemAlign(64)&#125;&#125;);</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Vector loads/stores.</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVInstructions()) &#123;</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">    LoadActions.legalForTypesWithMemDesc(&#123;&#123;nxv2s8, p0, nxv2s8, 8&#125;,</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><span class="doxyHighlight">                                          &#123;nxv4s8, p0, nxv4s8, 8&#125;,</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><span class="doxyHighlight">                                          &#123;nxv8s8, p0, nxv8s8, 8&#125;,</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><span class="doxyHighlight">                                          &#123;nxv16s8, p0, nxv16s8, 8&#125;,</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlight">                                          &#123;nxv32s8, p0, nxv32s8, 8&#125;,</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><span class="doxyHighlight">                                          &#123;nxv64s8, p0, nxv64s8, 8&#125;,</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">                                          &#123;nxv2s16, p0, nxv2s16, 16&#125;,</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">                                          &#123;nxv4s16, p0, nxv4s16, 16&#125;,</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">                                          &#123;nxv8s16, p0, nxv8s16, 16&#125;,</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">                                          &#123;nxv16s16, p0, nxv16s16, 16&#125;,</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlight">                                          &#123;nxv32s16, p0, nxv32s16, 16&#125;,</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><span class="doxyHighlight">                                          &#123;nxv2s32, p0, nxv2s32, 32&#125;,</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlight">                                          &#123;nxv4s32, p0, nxv4s32, 32&#125;,</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">                                          &#123;nxv8s32, p0, nxv8s32, 32&#125;,</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">                                          &#123;nxv16s32, p0, nxv16s32, 32&#125;&#125;);</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlight">    StoreActions.legalForTypesWithMemDesc(&#123;&#123;nxv2s8, p0, nxv2s8, 8&#125;,</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">                                           &#123;nxv4s8, p0, nxv4s8, 8&#125;,</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><span class="doxyHighlight">                                           &#123;nxv8s8, p0, nxv8s8, 8&#125;,</span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlight">                                           &#123;nxv16s8, p0, nxv16s8, 8&#125;,</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">                                           &#123;nxv32s8, p0, nxv32s8, 8&#125;,</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">                                           &#123;nxv64s8, p0, nxv64s8, 8&#125;,</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">                                           &#123;nxv2s16, p0, nxv2s16, 16&#125;,</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><span class="doxyHighlight">                                           &#123;nxv4s16, p0, nxv4s16, 16&#125;,</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">                                           &#123;nxv8s16, p0, nxv8s16, 16&#125;,</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">                                           &#123;nxv16s16, p0, nxv16s16, 16&#125;,</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">                                           &#123;nxv32s16, p0, nxv32s16, 16&#125;,</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlight">                                           &#123;nxv2s32, p0, nxv2s32, 32&#125;,</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><span class="doxyHighlight">                                           &#123;nxv4s32, p0, nxv4s32, 32&#125;,</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlight">                                           &#123;nxv8s32, p0, nxv8s32, 32&#125;,</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlight">                                           &#123;nxv16s32, p0, nxv16s32, 32&#125;&#125;);</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getELen() == 64) &#123;</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><span class="doxyHighlight">      LoadActions.legalForTypesWithMemDesc(&#123;&#123;nxv1s8, p0, nxv1s8, 8&#125;,</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlight">                                            &#123;nxv1s16, p0, nxv1s16, 16&#125;,</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">                                            &#123;nxv1s32, p0, nxv1s32, 32&#125;&#125;);</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><span class="doxyHighlight">      StoreActions.legalForTypesWithMemDesc(&#123;&#123;nxv1s8, p0, nxv1s8, 8&#125;,</span></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlight">                                             &#123;nxv1s16, p0, nxv1s16, 16&#125;,</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlight">                                             &#123;nxv1s32, p0, nxv1s32, 32&#125;&#125;);</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVInstructionsI64()) &#123;</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">      LoadActions.legalForTypesWithMemDesc(&#123;&#123;nxv1s64, p0, nxv1s64, 64&#125;,</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlight">                                            &#123;nxv2s64, p0, nxv2s64, 64&#125;,</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">                                            &#123;nxv4s64, p0, nxv4s64, 64&#125;,</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlight">                                            &#123;nxv8s64, p0, nxv8s64, 64&#125;&#125;);</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlight">      StoreActions.legalForTypesWithMemDesc(&#123;&#123;nxv1s64, p0, nxv1s64, 64&#125;,</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">                                             &#123;nxv2s64, p0, nxv2s64, 64&#125;,</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlight">                                             &#123;nxv4s64, p0, nxv4s64, 64&#125;,</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">                                             &#123;nxv8s64, p0, nxv8s64, 64&#125;&#125;);</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// we will take the custom lowering logic if we have scalable vector types</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// with non-standard alignments</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">    LoadActions.customIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST));</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">    StoreActions.customIf(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST));</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Pointers require that XLen sized elements are legal.</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (XLen &lt;= <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getELen()) &#123;</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">      LoadActions.customIf(<a href="#add2fb044d0bb3af5ef4e27dd3f97e062">typeIsLegalPtrVec</a>(0, PtrVecTys, ST));</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><span class="doxyHighlight">      StoreActions.customIf(<a href="#add2fb044d0bb3af5ef4e27dd3f97e062">typeIsLegalPtrVec</a>(0, PtrVecTys, ST));</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlight">  LoadActions.widenScalarToNextPow2(0, </span><span class="doxyHighlightComment">/&#42; MinSize = &#42;/</span><span class="doxyHighlight"> 8)</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">      .lowerIfMemSizeNotByteSizePow2()</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">      .clampScalar(0, s16, sXLen)</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">  StoreActions</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">      .clampScalar(0, s16, sXLen)</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">      .lowerIfMemSizeNotByteSizePow2()</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">  ExtLoadActions.widenScalarToNextPow2(0).clampScalar(0, sXLen, sXLen).lower();</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;PTR&#95;ADD, G&#95;PTRMASK&#125;).legalFor(&#123;&#123;p0, sXLen&#125;&#125;);</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;PTRTOINT)</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">      .legalFor(&#123;&#123;sXLen, p0&#125;&#125;)</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;INTTOPTR)</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight">      .legalFor(&#123;&#123;p0, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">      .clampScalar(1, sXLen, sXLen);</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;BRCOND).legalFor(&#123;sXLen&#125;).minScalar(0, sXLen);</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;BRJT).customFor(&#123;&#123;p0, sXLen&#125;&#125;);</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;BRINDIRECT).legalFor(&#123;p0&#125;);</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;PHI)</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">      .legalFor(&#123;p0, s32, sXLen&#125;)</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlight">      .clampScalar(0, s32, sXLen);</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;GLOBAL&#95;VALUE, G&#95;JUMP&#95;TABLE, G&#95;CONSTANT&#95;POOL&#125;)</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">      .legalFor(&#123;p0&#125;);</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZmmul()) &#123;</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">    getActionDefinitionsBuilder(G&#95;MUL)</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlight">        .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">        .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">        .clampScalar(0, sXLen, sXLen);</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// clang-format off</span></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;SMULH, G&#95;UMULH&#125;)</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">        .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">        .lower();</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// clang-format on</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;SMULO, G&#95;UMULO&#125;).minScalar(0, sXLen).lower();</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">    getActionDefinitionsBuilder(G&#95;MUL)</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">        .libcallFor(&#123;sXLen, sDoubleXLen&#125;)</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">        .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">        .clampScalar(0, sXLen, sDoubleXLen);</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;SMULH, G&#95;UMULH&#125;).lowerFor(&#123;sXLen&#125;);</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;SMULO, G&#95;UMULO&#125;)</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">        .minScalar(0, sXLen)</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Widen sXLen to sDoubleXLen so we can use a single libcall to get</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// the low bits for the mul result and high bits to do the overflow</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// check.</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">        .widenScalarIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, sXLen),</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">                       <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">LegalizeMutations::changeTo</a>(0, sDoubleXLen))</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">        .lower();</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtM()) &#123;</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;SDIV, G&#95;UDIV, G&#95;UREM&#125;)</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">        .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">        .customFor(&#123;s32&#125;)</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlight">        .libcallFor(&#123;sDoubleXLen&#125;)</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">        .clampScalar(0, s32, sDoubleXLen)</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">        .widenScalarToNextPow2(0);</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">    getActionDefinitionsBuilder(G&#95;SREM)</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">        .legalFor(&#123;sXLen&#125;)</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">        .libcallFor(&#123;sDoubleXLen&#125;)</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">        .clampScalar(0, sXLen, sDoubleXLen)</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlight">        .widenScalarToNextPow2(0);</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlight">    getActionDefinitionsBuilder(&#123;G&#95;UDIV, G&#95;SDIV, G&#95;UREM, G&#95;SREM&#125;)</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlight">        .libcallFor(&#123;sXLen, sDoubleXLen&#125;)</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">        .clampScalar(0, sXLen, sDoubleXLen)</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlight">        .widenScalarToNextPow2(0);</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Use libcall for sDoubleXLen.</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;SDIVREM, G&#95;UDIVREM&#125;).lower();</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;ABS)</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb(), &#123;sXLen&#125;)</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">      .minScalar(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb(), 0, sXLen)</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;UMAX, G&#95;UMIN, G&#95;SMAX, G&#95;SMIN&#125;)</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb(), &#123;sXLen&#125;)</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">      .minScalar(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZbb(), 0, sXLen)</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;SCMP, G&#95;UCMP&#125;).lower();</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FRAME&#95;INDEX).legalFor(&#123;p0&#125;);</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;MEMCPY, G&#95;MEMMOVE, G&#95;MEMSET&#125;).<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/hwaddresssanitizer-cpp/#aeaa43ab635ee98b9e2055d0f217558c2ad9dbfb96b7805fecf168bf553c423cce">libcall</a>();</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;DYN&#95;STACKALLOC, G&#95;STACKSAVE, G&#95;STACKRESTORE&#125;)</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FP Operations</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Support s128 for rv32 when libcall handling is able to use sret.</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">  getActionDefinitionsBuilder(</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlight">      &#123;G&#95;FADD, G&#95;FSUB, G&#95;FMUL, G&#95;FDIV, G&#95;FMA, G&#95;FSQRT, G&#95;FMAXNUM, G&#95;FMINNUM&#125;)</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;s16&#125;)</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlight">      .libcallFor(&#123;s32, s64&#125;)</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s128&#125;);</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FNEG, G&#95;FABS&#125;)</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;s16&#125;)</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">      .lowerFor(&#123;s32, s64, s128&#125;);</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FREM)</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">      .libcallFor(&#123;s32, s64&#125;)</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s128&#125;)</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">      .minScalar(0, s32)</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlight">      .scalarize(0);</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FCOPYSIGN)</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;s32, s32&#125;&#125;)</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s64, s64&#125;, &#123;s32, s64&#125;, &#123;s64, s32&#125;&#125;)</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s16, s16&#125;, &#123;s16, s32&#125;, &#123;s32, s16&#125;&#125;)</span></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s16, s64&#125;, &#123;s64, s16&#125;&#125;)</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Use Zfhmin.</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FPTRUNC)</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s32, s64&#125;&#125;)</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s16, s32&#125;&#125;)</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s16, s64&#125;&#125;)</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">      .libcallFor(&#123;&#123;s32, s64&#125;&#125;)</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s32, s128&#125;, &#123;s64, s128&#125;&#125;);</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FPEXT)</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s64, s32&#125;&#125;)</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s32, s16&#125;&#125;)</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s64, s16&#125;&#125;)</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">      .libcallFor(&#123;&#123;s64, s32&#125;&#125;)</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s128, s32&#125;, &#123;s128, s64&#125;&#125;);</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FCMP)</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;sXLen, s32&#125;&#125;)</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;sXLen, s64&#125;&#125;)</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;sXLen, s16&#125;&#125;)</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen)</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlight">      .libcallFor(&#123;&#123;sXLen, s32&#125;, &#123;sXLen, s64&#125;&#125;)</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;sXLen, s128&#125;&#125;);</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Support vector version of G&#95;IS&#95;FPCLASS.</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;IS&#95;FPCLASS)</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;s1, s32&#125;&#125;)</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s1, s64&#125;&#125;)</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s1, s16&#125;&#125;)</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">      .lowerFor(&#123;&#123;s1, s32&#125;, &#123;s1, s64&#125;&#125;);</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;FCONSTANT)</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;s16&#125;)</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">      .lowerFor(&#123;s32, s64, s128&#125;);</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FPTOSI, G&#95;FPTOUI&#125;)</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;sXLen, s32&#125;&#125;)</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;sXLen, s64&#125;&#125;)</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;sXLen, s16&#125;&#125;)</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;s32, s32&#125;&#125;)</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s32, s64&#125;&#125;)</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">      .customFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s32, s16&#125;&#125;)</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">      .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">      .minScalar(0, s32)</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">      .libcallFor(&#123;&#123;s32, s32&#125;, &#123;s64, s32&#125;, &#123;s32, s64&#125;, &#123;s64, s64&#125;&#125;)</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s32, s128&#125;, &#123;s64, s128&#125;&#125;) </span><span class="doxyHighlightComment">// FIXME RV32.</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s128, s32&#125;, &#123;s128, s64&#125;, &#123;s128, s128&#125;&#125;);</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;SITOFP, G&#95;UITOFP&#125;)</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF(), &#123;&#123;s32, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;&#123;s64, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;&#123;s16, sXLen&#125;&#125;)</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><span class="doxyHighlight">      .widenScalarToNextPow2(1)</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Promote to XLen if the operation is legal.</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">      .widenScalarIf(</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">          &#91;=, &amp;ST&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.isScalar() &amp;&amp; Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.isScalar() &amp;&amp;</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">                   (Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getSizeInBits() &lt; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getXLen()) &amp;&amp;</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">                   ((<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtF() &amp;&amp; Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getSizeInBits() == 32) ||</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">                    (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD() &amp;&amp; Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getSizeInBits() == 64) ||</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">                    (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh() &amp;&amp;</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">                     Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getSizeInBits() == 16));</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">          &#125;,</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">LegalizeMutations::changeTo</a>(1, sXLen))</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Otherwise only promote to s32 since we have si libcalls.</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">      .minScalar(1, s32)</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">      .libcallFor(&#123;&#123;s32, s32&#125;, &#123;s64, s32&#125;, &#123;s32, s64&#125;, &#123;s64, s64&#125;&#125;)</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s128, s32&#125;, &#123;s128, s64&#125;&#125;) </span><span class="doxyHighlightComment">// FIXME RV32.</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;&#123;s32, s128&#125;, &#123;s64, s128&#125;, &#123;s128, s128&#125;&#125;);</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: We can do custom inline expansion like SelectionDAG.</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FCEIL, G&#95;FFLOOR, G&#95;FRINT, G&#95;FNEARBYINT,</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">                               G&#95;INTRINSIC&#95;TRUNC, G&#95;INTRINSIC&#95;ROUND,</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">                               G&#95;INTRINSIC&#95;ROUNDEVEN&#125;)</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;s16&#125;)</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">      .libcallFor(&#123;s32, s64&#125;)</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s128&#125;);</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FMAXIMUM, G&#95;FMINIMUM&#125;)</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa(), &#123;s32&#125;)</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD(), &#123;s64&#125;)</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">      .legalFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfa() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtZfh(), &#123;s16&#125;);</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FCOS, G&#95;FSIN, G&#95;FTAN, G&#95;FPOW, G&#95;FLOG, G&#95;FLOG2,</span></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlight">                               G&#95;FLOG10, G&#95;FEXP, G&#95;FEXP2, G&#95;FEXP10, G&#95;FACOS,</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlight">                               G&#95;FASIN, G&#95;FATAN, G&#95;FATAN2, G&#95;FCOSH, G&#95;FSINH,</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><span class="doxyHighlight">                               G&#95;FTANH&#125;)</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><span class="doxyHighlight">      .libcallFor(&#123;s32, s64&#125;)</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s128&#125;);</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><span class="doxyHighlight">  getActionDefinitionsBuilder(&#123;G&#95;FPOWI, G&#95;FLDEXP&#125;)</span></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">      .libcallFor(&#123;&#123;s32, s32&#125;, &#123;s64, s32&#125;&#125;)</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlight">      .libcallFor(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit(), &#123;s128, s32&#125;);</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;VASTART).customFor(&#123;p0&#125;);</span></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// va&#95;list must be a pointer, but most sized types are pretty easy to handle</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// as the destination.</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;VAARG)</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: Implement narrowScalar and widenScalar for G&#95;VAARG for types</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// other than sXLen.</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen)</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">      .lowerForCartesianProduct(&#123;sXLen, p0&#125;, &#123;p0&#125;);</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;VSCALE)</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">      .clampScalar(0, sXLen, sXLen)</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">      .customFor(&#123;sXLen&#125;);</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;SplatActions =</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlight">      getActionDefinitionsBuilder(G&#95;SPLAT&#95;VECTOR)</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlight">          .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlight">                       <a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, sXLen)))</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlight">          .customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST), <a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, s1)));</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle case of s64 element vectors on RV32. If the subtarget does not have</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// f64, then try to lower it to G&#95;SPLAT&#95;VECTOR&#95;SPLIT&#95;64&#95;VL. If the subtarget</span></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// does have f64, then we don&#39;t know whether the type is an f64 or an i64,</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// so mark the G&#95;SPLAT&#95;VECTOR as legal and decide later what to do with it,</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// depending on how the instructions it consumes are legalized. They are not</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// legalized yet since legalization is in reverse postorder, so we cannot</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// make the decision at this moment.</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (XLen == 32) &#123;</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVInstructionsF64() &amp;&amp; <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtD())</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlight">      SplatActions.legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, &#123;nxv1s64, nxv2s64, nxv4s64, nxv8s64&#125;), <a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, s64)));</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVInstructionsI64())</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">      SplatActions.customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, &#123;nxv1s64, nxv2s64, nxv4s64, nxv8s64&#125;), <a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, s64)));</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">  SplatActions.clampScalar(1, sXLen, sXLen);</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> ExtractSubvecBitcastPred = &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> SrcTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;;</span></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DstTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1) &amp;&amp;</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlight">           DstTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() &gt;= 8 &amp;&amp;</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlight">           SrcTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() &gt;= 8;</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;EXTRACT&#95;SUBVECTOR)</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We don&#39;t have the ability to slide mask vectors down indexed by their</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// i1 elements; the smallest we can do is i8. Often we are able to bitcast</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// to equivalent i8 vectors.</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><span class="doxyHighlight">      .bitcastIf(</span></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST),</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">              <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST), ExtractSubvecBitcastPred),</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><span class="doxyHighlight">          &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/llt">LLT</a> CastTy = <a href="/docs/api/classes/llvm/llt/#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">                Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getElementCount().divideCoefficientBy(8), 8);</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, CastTy);</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlight">          &#125;)</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">      .customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a6fef38ab5d0c9c582fe6cae7d8badf5f">LegalityPredicates::any</a>(</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST),</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlight">              <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST)),</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlight">              <a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(1, IntOrFPVecTys, ST))));</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">  getActionDefinitionsBuilder(G&#95;INSERT&#95;SUBVECTOR)</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><span class="doxyHighlight">      .customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(0, BoolVecTys, ST),</span></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><span class="doxyHighlight">                    <a href="#a6b25441e6e04451dbc324440387f0ffb">typeIsLegalBoolVec</a>(1, BoolVecTys, ST)))</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><span class="doxyHighlight">      .customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(0, IntOrFPVecTys, ST),</span></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><span class="doxyHighlight">                    <a href="#a88ce58d5c26dbb6a3a6902c4bef5ed4d">typeIsLegalIntOrFPVec</a>(1, IntOrFPVecTys, ST)));</span></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">  getLegacyLegalizerInfo().computeTables();</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/powerpc/ppcctrloopsverify-cpp/#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(&#42;<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo());</span></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699" lineLink="/docs/api/classes/llvm/riscvlegalizerinfo/#aa97467a5c0d54755f0e725e9310ffaa0"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvlegalizerinfo/#aa97467a5c0d54755f0e725e9310ffaa0">RISCVLegalizerInfo::legalizeIntrinsic</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrinsicID = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>).getIntrinsicID();</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (IntrinsicID) &#123;</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::vacopy: &#123;</span></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// vacopy arguments must be legal because of the intrinsic signature.</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// No need to check here.</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb6d0a9254bc3183046873436fc7c12e">getDataLayout</a>();</span></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp;Ctx = MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> DstLst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstLst);</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Load the source va&#95;list</span></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/align">Align</a> Alignment = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(<a href="/docs/api/namespaces/llvm/#a0a0911ef4a610d70c5104c1932fec0e1">getTypeForLLT</a>(PtrTy, Ctx));</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;LoadMMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a>(), <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, PtrTy, Alignment);</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(PtrTy, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2), &#42;LoadMMO);</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Store the result in the destination va&#95;list</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;StoreMMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a>(), <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a>, PtrTy, Alignment);</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">    MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a87a7405685118d45876c996318829ceb">buildStore</a>(Tmp, DstLst, &#42;StoreMMO);</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeVAStart(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIRBuilder)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Stores the address of the VarArgsFrameIndex slot into the memory location</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;VASTART);</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/riscvmachinefunctioninfo">RISCVMachineFunctionInfo</a> &#42;FuncInfo = MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#ab7feae1932b436c8630e247166ec42b7">getInfo</a>&lt;<a href="/docs/api/classes/llvm/riscvmachinefunctioninfo">RISCVMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> FI = FuncInfo-&gt;getVarArgsFrameIndex();</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> AddrTy = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>()-&gt;<a href="/docs/api/classes/llvm/machineregisterinfo/#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FINAddr = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a92664cdbeb0b24030809439993ac271d">buildFrameIndex</a>(AddrTy, FI);</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.hasOneMemOperand());</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">  MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a87a7405685118d45876c996318829ceb">buildStore</a>(FINAddr, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(),</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">                        &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands()&#91;0&#93;);</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeBRJT(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">                                      <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIRBuilder)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</span></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinejumptableinfo">MachineJumpTableInfo</a> &#42;MJTI = MF.<a href="/docs/api/classes/llvm/machinefunction/#ad828deab7de3b5f4d03fac86e26adae9">getJumpTableInfo</a>();</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EntrySize = MJTI-&gt;<a href="/docs/api/classes/llvm/machinejumptableinfo/#a4d6ef9167ddc2ae5fdf29a41cbaa5202">getEntrySize</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a82dd10b626a629b9bb7d32d53a8e0884">getDataLayout</a>());</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PtrReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(PtrReg);</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> IndexReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> IndexTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(IndexReg);</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(EntrySize))</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ShiftAmt = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(IndexTy, <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(EntrySize));</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">  IndexReg = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(IndexTy, IndexReg, ShiftAmt).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Addr = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a7aae2634e3c0980c4f68983738b90ff7">buildPtrAdd</a>(PtrTy, PtrReg, IndexReg);</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/machinepointerinfo/#a15667eb123c1638704fe9cb7b2ac208b">MachinePointerInfo::getJumpTable</a>(MF), <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>,</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">      EntrySize, <a href="/docs/api/structs/llvm/align">Align</a>(MJTI-&gt;<a href="/docs/api/classes/llvm/machinejumptableinfo/#ab0097819d1d3f4c8eca96c9d9ac4fa0d">getEntryAlignment</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a82dd10b626a629b9bb7d32d53a8e0884">getDataLayout</a>())));</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> TargetReg;</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (MJTI-&gt;<a href="/docs/api/classes/llvm/machinejumptableinfo/#ab63740cb84cbbb0300d8fd6cf987928d">getEntryKind</a>()) &#123;</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3a6e05991949952d4e85600b0868dcd803">MachineJumpTableInfo::EK&#95;LabelDifference32</a>: &#123;</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For PIC, the sequence is:</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// BRIND(load(Jumptable + index) + RelocBase)</span></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// RelocBase can be JumpTable, GOT or some sort of global base.</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LoadOpc =</span></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">        STI.<a href="/docs/api/classes/llvm/riscvsubtarget/#afd9fbb2a5a666589b2843c496f3ae479">is64Bit</a>() ? TargetOpcode::G&#95;SEXTLOAD : TargetOpcode::G&#95;LOAD;</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Load = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(LoadOpc, IndexTy, Addr, &#42;MMO);</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">    TargetReg = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a7aae2634e3c0980c4f68983738b90ff7">buildPtrAdd</a>(PtrTy, PtrReg, Load).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3a9e655fb625d744f96e03aed78ca85707">MachineJumpTableInfo::EK&#95;Custom32</a>: &#123;</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#aeede510b1aaac978daaba60dcc2817de">buildLoadInstr</a>(TargetOpcode::G&#95;SEXTLOAD, IndexTy,</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">                                          Addr, &#42;MMO);</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><span class="doxyHighlight">    TargetReg = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a5986a45c021d42bcc2f1563aa25c4cc8">buildIntToPtr</a>(PtrTy, Load).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3ab0c4687afc1a6858d37711a814f8f5b3">MachineJumpTableInfo::EK&#95;BlockAddress</a>:</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">    TargetReg = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a7962eca94c9f77da448245745fb22f57">buildLoad</a>(PtrTy, Addr, &#42;MMO).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">  MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#aecf67aca8d78d0136244799c4182e52f">buildBrIndirect</a>(TargetReg);</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::shouldBeInConstantPool(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;APImm,</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><span class="doxyHighlight">                                                </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ShouldOptForSize)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APImm.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() == 32 || APImm.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() == 64);</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><span class="doxyHighlight">  int64&#95;t <a href="/docs/api/namespaces/llvm/amdgpu/#a4554b8c1e903115f6d7c75b0cc8900dcae71a5bce3c21304da97e1e5d3dab0ed3">Imm</a> = APImm.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>();</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// All simm32 constants should be handled by isel.</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// NOTE: The getMaxBuildIntsCost call below should return a value &gt;= 2 making</span></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// this check redundant, but small immediates are common so this check</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should have better compile time.</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1a1e51a5952c3afa00875df90e7ae6f8">isInt&lt;32&gt;</a>(Imm))</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We only need to cost the immediate, if constant pool lowering is enabled.</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!STI.useConstantPoolForLargeInts())</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/riscvmatint/#a6fa6ca43d5a47fb0edf6acd28aa85d87">RISCVMatInt::InstSeq</a> Seq = <a href="/docs/api/namespaces/llvm/riscvmatint/#a163e06959afb15ae88efade9bb975e27">RISCVMatInt::generateInstSeq</a>(Imm, STI);</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Seq.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt;= STI.getMaxBuildIntsCost())</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Optimizations below are disabled for opt size. If we&#39;re optimizing for</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// size, use a constant pool.</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ShouldOptForSize)</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Special case. See if we can build the constant as (ADD (SLLI X, C), X) do</span></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// that if it will avoid a constant pool.</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It will require an extra temporary register though.</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have Zba we can use (ADD&#95;UW X, (SLLI X, 32)) to handle cases where</span></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// low and high 32 bits are the same and bit 31 and 63 are set.</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ShiftAmt, AddOpc;</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/riscvmatint/#a6fa6ca43d5a47fb0edf6acd28aa85d87">RISCVMatInt::InstSeq</a> SeqLo =</span></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/riscvmatint/#a6eff34ee491c7f6124b3f21768d8d79f">RISCVMatInt::generateTwoRegInstSeq</a>(Imm, STI, ShiftAmt, AddOpc);</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !(!SeqLo.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>() &amp;&amp; (SeqLo.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() + 2) &lt;= STI.getMaxBuildIntsCost());</span></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeVScale(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> LLT XLenTy(STI.getXLenVT());</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We define our scalable vector types for lmul=1 to use a 64 bit known</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// minimum size. e.g. &lt;vscale x 2 x i32&gt;. VLENB is in bytes so we calculate</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vscale as VLENB / 8</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static&#95;assert</span><span class="doxyHighlight">(<a href="/docs/api/namespaces/llvm/riscv/#ad53ed145f88b1e1c966ff68df9029e7f">RISCV::RVVBitsPerBlock</a> == 64, </span><span class="doxyHighlightStringLiteral">&quot;Unexpected bits per block!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (STI.getRealMinVLen() &lt; <a href="/docs/api/namespaces/llvm/riscv/#ad53ed145f88b1e1c966ff68df9029e7f">RISCV::RVVBitsPerBlock</a>)</span></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Support for VLEN==32 is incomplete.</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We assume VLENB is a multiple of 8 We manually choose the best shift</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// here because SimplifyDemandedBits isn&#39;t always able to simplify it.</span></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlight">  uint64&#95;t Val = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getCImm()-&gt;getZExtValue();</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a434f6a0d80fb13e4326e848a6391f057">isPowerOf2&#95;64</a>(Val)) &#123;</span></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = <a href="/docs/api/namespaces/llvm/#a4f42ed6fd2569fa43f03814a17f9d94a">Log2&#95;64</a>(Val);</span></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> &lt; 3) &#123;</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VLENB = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;READ&#95;VLENB, &#123;XLenTy&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(Dst, VLENB, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, 3 - <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>));</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> &gt; 3) &#123;</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VLENB = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;READ&#95;VLENB, &#123;XLenTy&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8528b8088d41e3b859d4ea0f25e13991">buildShl</a>(Dst, VLENB, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> - 3));</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;READ&#95;VLENB, &#123;<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a>&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((Val % 8) == 0) &#123;</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the multiplier is a multiple of 8, scale it down to avoid needing</span></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// to shift the VLENB value.</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VLENB = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;READ&#95;VLENB, &#123;XLenTy&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(Dst, VLENB, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, Val / 8));</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VLENB = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;READ&#95;VLENB, &#123;XLenTy&#125;, &#123;&#125;);</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VScale = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a3e17399c568f784acb8ebf8be9a558ec">buildLShr</a>(XLenTy, VLENB, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, 3));</span></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a31a4848346777be4c13b39d57c0885d0">buildMul</a>(Dst, VScale, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, Val));</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlightComment">// Custom-lower extensions from mask vectors by using a vselect either with 1</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlightComment">// for zero/any-extension or -1 for sign-extension:</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlightComment">//   (vXiN = (s|z)ext vXi1:vmask) -&gt; (vXiN = vselect vmask, (-1 or 1), 0)</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><span class="doxyHighlightComment">// Note that any-extension is lowered identically to zero-extension.</span></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeExt(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode();</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opc == TargetOpcode::G&#95;ZEXT || Opc == TargetOpcode::G&#95;SEXT ||</span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">         Opc == TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">  MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">  LLT DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">  int64&#95;t ExtTrueVal = Opc == TargetOpcode::G&#95;SEXT ? -1 : 1;</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">  LLT DstEltTy = DstTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SplatZero = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeea5857133a04085b450948e90fdcd1e">buildSplatVector</a>(DstTy, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstEltTy, 0));</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SplatTrue =</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeea5857133a04085b450948e90fdcd1e">buildSplatVector</a>(DstTy, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(DstEltTy, ExtTrueVal));</span></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlight">  MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a23ad1ea55dda3ab7617c7fad52c571ab">buildSelect</a>(Dst, Src, SplatTrue, SplatZero);</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeLoadStore(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GLoad&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GStore&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &amp;&amp;</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Machine instructions must be Load/Store.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><span class="doxyHighlight">  MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">  MachineFunction &#42;MF = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> DataLayout &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb6d0a9254bc3183046873436fc7c12e">getDataLayout</a>();</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><span class="doxyHighlight">  LLVMContext &amp;Ctx = MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</span></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">  LLT DataTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DataTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.hasOneMemOperand())</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">  MachineMemOperand &#42;MMO = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands&#95;begin();</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;TLI = STI.getTargetLowering();</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">  EVT VT = <a href="/docs/api/structs/llvm/evt/#a5db8faf73cf29bcefdb3bdfadf3dc2c1">EVT::getEVT</a>(<a href="/docs/api/namespaces/llvm/#a0a0911ef4a610d70c5104c1932fec0e1">getTypeForLLT</a>(DataTy, Ctx));</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TLI-&gt;allowsMemoryAccessForAlignment(Ctx, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, &#42;MMO))</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSizeBits = DataTy.<a href="/docs/api/classes/llvm/llt/#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>();</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((EltSizeBits == 16 || EltSizeBits == 32 || EltSizeBits == 64) &amp;&amp;</span></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Unexpected unaligned RVV load type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Calculate the new vector type with i8 elements</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElements =</span></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">      DataTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>() &#42; (EltSizeBits / 8);</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">  LLT NewDataTy = <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(NumElements, 8);</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">  Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a6c12dbad109a5d725ce01a9a8363f948">bitcast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, 0, NewDataTy);</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlightComment">/// Return the type of the mask type suitable for masking the provided</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlightComment">/// vector type.  This is simply an i1 element type vector of the same</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlightComment">/// (possibly scalable) length.</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952" lineLink="#ad1f97111fb4c021a0584599e68e93032"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ad1f97111fb4c021a0584599e68e93032">getMaskTypeFor</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy) &#123;</span></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VecTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>());</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/elementcount">ElementCount</a> EC = VecTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>();</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(EC, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1));</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlightComment">/// Creates an all ones mask suitable for masking a vector of type VecTy with</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><span class="doxyHighlightComment">/// vector length VL.</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960" lineLink="#a42b3a4fddf9f295aaafa90d119e4733c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> <a href="#a42b3a4fddf9f295aaafa90d119e4733c">buildAllOnesMask</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;VL,</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB,</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &#123;</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> MaskTy = <a href="#ad1f97111fb4c021a0584599e68e93032">getMaskTypeFor</a>(VecTy);</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;VMSET&#95;VL, &#123;MaskTy&#125;, &#123;VL&#125;);</span></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlightComment">/// Gets the two common &quot;VL&quot; operands: an all-ones mask and the vector length.</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><span class="doxyHighlightComment">/// VecTy is a scalable vector type.</span></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::pair&lt;MachineInstrBuilder, MachineInstrBuilder&gt;</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970" lineLink="#a45e6e22e05efa275135c8ae32f60da40"><span class="doxyHighlight"><a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &#123;</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VecTy.<a href="/docs/api/classes/llvm/llt/#a3016e0f01ad96a198f81f74397b1c0e6">isScalableVector</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Expecting scalable container type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a> &amp;STI = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a9ec04f3692b9601036d2d4477c4c3749">getMF</a>().<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>&lt;<a href="/docs/api/classes/llvm/riscvsubtarget">RISCVSubtarget</a>&gt;();</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> XLenTy(STI.<a href="/docs/api/classes/llvm/riscvsubtarget/#a657dd2086f68037531f461853480fcf7">getXLenVT</a>());</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VL = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(XLenTy, -1);</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mask = <a href="#a42b3a4fddf9f295aaafa90d119e4733c">buildAllOnesMask</a>(VecTy, VL, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;Mask, VL&#125;;</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></span></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980" lineLink="#acf786882a93d0d71ff5e5f39e1d12212"><span class="doxyHighlight"><a href="#acf786882a93d0d71ff5e5f39e1d12212">buildSplatPartsS64WithVL</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dstop">DstOp</a> &amp;Dst, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;Passthru, <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>,</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;VL, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB,</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &#123;</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: If the Hi bits of the splat are undefined, then it&#39;s fine to just</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// splat Lo even if it might be sign extended. I don&#39;t think we have</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// introduced a case where we&#39;re build a s64 where the upper bits are undef</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// yet.</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fall back to a stack store and stride x0 vector load.</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: need to lower G&#95;SPLAT&#95;VECTOR&#95;SPLIT&#95;I64. This is done in</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// preprocessDAG in SDAG.</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;SPLAT&#95;VECTOR&#95;SPLIT&#95;I64&#95;VL, &#123;Dst&#125;,</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlight">                        &#123;Passthru, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, VL&#125;);</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996" lineLink="#a77d3589f9460c3f08bc6afc49a9985c6"><span class="doxyHighlight"><a href="#a77d3589f9460c3f08bc6afc49a9985c6">buildSplatSplitS64WithVL</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dstop">DstOp</a> &amp;Dst, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;Passthru,</span></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><span class="doxyHighlight">                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;Scalar, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/srcop">SrcOp</a> &amp;VL,</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &#123;</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Scalar.getLLTTy(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Unexpected VecTy!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a1e9e055fc19307bc3c7c1be6ccd36812">buildUnmerge</a>(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), Scalar);</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#acf786882a93d0d71ff5e5f39e1d12212">buildSplatPartsS64WithVL</a>(Dst, Passthru, Unmerge.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>(0),</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlight">                                  Unmerge.getReg(1), VL, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlightComment">// Lower splats of s1 types to G&#95;ICMP. For each mask vector type, we have a</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><span class="doxyHighlightComment">// legal equivalently-sized i8 type, so we can use that as a go-between.</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlightComment">// Splats of s1 types that have constant value can be legalized as VMSET&#95;VL or</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlightComment">// VMCLR&#95;VL.</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeSplatVector(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;SPLAT&#95;VECTOR);</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><span class="doxyHighlight">  MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> SplatVal = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlight">  LLT VecTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlight">  LLT XLenTy(STI.getXLenVT());</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle case of s64 element vectors on rv32</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (XLenTy.getSizeInBits() == 32 &amp;&amp;</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><span class="doxyHighlight">      VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64) &#123;</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/lib/target/hexagon/mctargetdesc/hexagonmccodeemitter-cpp/#ae4dfd7b0d66121016d6466d2ff10e8ba">&#95;</a>, VL&#93; = <a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst), MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlight">    <a href="#a77d3589f9460c3f08bc6afc49a9985c6">buildSplatSplitS64WithVL</a>(Dst, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(VecTy), SplatVal, VL, MIB,</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlight">                             <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// All-zeros or all-ones splats are handled specially.</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><span class="doxyHighlight">  MachineInstr &amp;SplatValMI = &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getVRegDef(SplatVal);</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1c01bab26241e422526ad42b90397e89">isAllOnesOrAllOnesSplat</a>(SplatValMI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) &#123;</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VL = <a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(VecTy, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>).second;</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;VMSET&#95;VL, &#123;<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a>&#125;, &#123;VL&#125;);</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4b092db64f93b2bfae42cbd58449adeb">isNullOrNullSplat</a>(SplatValMI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) &#123;</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VL = <a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(VecTy, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>).second;</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;VMCLR&#95;VL, &#123;<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a>&#125;, &#123;VL&#125;);</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle non-constant mask splat (i.e. not sure if it&#39;s all zeros or all</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ones) by promoting it to an s8 splat.</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">  LLT InterEltTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8);</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">  LLT InterTy = VecTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(InterEltTy);</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ZExtSplatVal = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a44a49b5f4dd2932058e3fbe21c098655">buildZExt</a>(InterEltTy, SplatVal);</span></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> =</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(InterEltTy, ZExtSplatVal, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(InterEltTy, 1));</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeea5857133a04085b450948e90fdcd1e">buildSplatVector</a>(InterTy, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>);</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ZeroSplat =</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><span class="doxyHighlight">      MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeea5857133a04085b450948e90fdcd1e">buildSplatVector</a>(InterTy, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(InterEltTy, 0));</span></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">  MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a3a618c7b84d45b5e188f6a7e4305ee39">buildICmp</a>(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::Predicate::ICMP&#95;NE</a>, Dst, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, ZeroSplat);</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061" lineLink="#a2792f75920a3f0a318385a95f8a5702a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> VecTy) &#123;</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt;= 64 &amp;&amp;</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Unexpected vector LLT&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a3c8d482078435a16e34c2cc13caa6f75">LLT::scalable&#95;vector</a>(<a href="/docs/api/namespaces/llvm/riscv/#ad53ed145f88b1e1c966ff68df9029e7f">RISCV::RVVBitsPerBlock</a> /</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><span class="doxyHighlight">                                  VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(),</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">                              VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>());</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeExtractSubvector(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">  GExtractSubvector &amp;ES = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GExtractSubvector&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><span class="doxyHighlight">  MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a> = ES.<a href="/docs/api/classes/llvm/genericmachineinstr/#a2cdf10ff4f5fb865c6a669331aeb5846">getReg</a>(0);</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = ES.<a href="/docs/api/classes/llvm/gextractsubvector/#a46b0ae0d1f1b432d5c49b1e0103cab23">getSrcVec</a>();</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">  uint64&#95;t Idx = ES.<a href="/docs/api/classes/llvm/gextractsubvector/#a4d73c6ddaba313a4f41e0fc1b16bb197">getIndexImm</a>();</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// With an index of 0 this is a cast-like subvector, which can be performed</span></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// with subregister operations.</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Idx == 0)</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">  LLT LitTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><span class="doxyHighlight">  LLT BigTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LitTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1)) &#123;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We can&#39;t slide this mask vector up indexed by its i1 elements.</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This poses a problem when we wish to insert a scalable vector which</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// can&#39;t be re-expressed as a larger type. Just choose the slow path and</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// extend to a larger type, then truncate back down.</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">    LLT ExtBigTy = BigTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8));</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">    LLT ExtLitTy = LitTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8));</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BigZExt = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a44a49b5f4dd2932058e3fbe21c098655">buildZExt</a>(ExtBigTy, Src);</span></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExtractZExt = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb07fff3cb0ad02bf88651e9388777de">buildExtractSubvector</a>(ExtLitTy, BigZExt, Idx);</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SplatZero = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeea5857133a04085b450948e90fdcd1e">buildSplatVector</a>(</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlight">        ExtLitTy, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(ExtLitTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>(), 0));</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a3a618c7b84d45b5e188f6a7e4305ee39">buildICmp</a>(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::Predicate::ICMP&#95;NE</a>, Dst, ExtractZExt, SplatZero);</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// extract&#95;subvector scales the index by vscale if the subvector is scalable,</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and decomposeSubvectorInsertExtractToSubRegs takes this into account.</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> RISCVRegisterInfo &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = STI.getRegisterInfo();</span></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><span class="doxyHighlight">  MVT LitTyMVT = <a href="/docs/api/namespaces/llvm/#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(LitTy);</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Decompose =</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/riscvtargetlowering/#a01ee44fd979fc25e2afe3d23a2079494">RISCVTargetLowering::decomposeSubvectorInsertExtractToSubRegs</a>(</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(BigTy), LitTyMVT, Idx, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RemIdx = Decompose.second;</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the Idx has been completely eliminated then this is a subvector extract</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// which naturally aligns to a vector register. These can easily be handled</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// using subregister manipulation.</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RemIdx == 0)</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Else LitTy is M1 or smaller and may need to be slid down: if LitTy</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// was &gt; M1 then the index would need to be a multiple of VLMAX, and so would</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// divide exactly.</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/riscvvtype/#a5144889af710ec49f5eeff7be79e671d">RISCVVType::decodeVLMUL</a>(<a href="/docs/api/classes/llvm/riscvtargetlowering/#ac27709ca33b27034fb25d6fb83cb5fb1">RISCVTargetLowering::getLMUL</a>(LitTyMVT)).second ||</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/riscvtargetlowering/#ac27709ca33b27034fb25d6fb83cb5fb1">RISCVTargetLowering::getLMUL</a>(LitTyMVT) == <a href="/docs/api/namespaces/llvm/riscvii/#ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451">RISCVII::VLMUL::LMUL&#95;1</a>);</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the vector type is an LMUL-group type, extract a subvector equal to the</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// nearest full vector register type.</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><span class="doxyHighlight">  LLT InterLitTy = BigTy;</span></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> Vec = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>;</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#addaa86bfa4ca26b7f366cbdd868f99bf">TypeSize::isKnownGT</a>(BigTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(),</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><span class="doxyHighlight">                          <a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a>(BigTy).getSizeInBits())) &#123;</span></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If BigTy has an LMUL &gt; 1, then LitTy should have a smaller LMUL, and</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// we should have successfully decomposed the extract into a subregister.</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Decompose.first != RISCV::NoSubRegister);</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><span class="doxyHighlight">    InterLitTy = <a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a>(BigTy);</span></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// SDAG builds a TargetExtractSubreg. We cannot create a a Copy with SubReg</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// specified on the source Register (the equivalent) since generic virtual</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// register does not allow subregister index.</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><span class="doxyHighlight">    Vec = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb07fff3cb0ad02bf88651e9388777de">buildExtractSubvector</a>(InterLitTy, Src, Idx - RemIdx).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Slide this vector register down by the desired number of elements in order</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to place the desired subvector starting at element 0</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> LLT XLenTy(STI.getXLenVT());</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SlidedownAmt = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a50ec87d072ddb08830486e9fb31ca6de">buildVScale</a>(XLenTy, RemIdx);</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;<a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>, VL&#93; = <a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(LitTy, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlight">  uint64&#95;t Policy = <a href="/docs/api/namespaces/llvm/riscvii/#a0223dd30dc4a3c2eabb5bd5ce315e065abdc0a80d5e4b58676f861ffaa296bd1b">RISCVII::TAIL&#95;AGNOSTIC</a> | <a href="/docs/api/namespaces/llvm/riscvii/#a0223dd30dc4a3c2eabb5bd5ce315e065a1d96428e9ed63333f145e92079ab267d">RISCVII::MASK&#95;AGNOSTIC</a>;</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Slidedown = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><span class="doxyHighlight">      RISCV::G&#95;VSLIDEDOWN&#95;VL, &#123;InterLitTy&#125;,</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">      &#123;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(InterLitTy), Vec, SlidedownAmt, <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>, VL, Policy&#125;);</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Now the vector is in the right position, extract our final subvector. This</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should resolve to a COPY.</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlight">  MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb07fff3cb0ad02bf88651e9388777de">buildExtractSubvector</a>(Dst, Slidedown, 0);</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RISCVLegalizerInfo::legalizeInsertSubvector(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIB)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlight">  GInsertSubvector &amp;IS = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GInsertSubvector&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><span class="doxyHighlight">  MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a> = IS.<a href="/docs/api/classes/llvm/genericmachineinstr/#a2cdf10ff4f5fb865c6a669331aeb5846">getReg</a>(0);</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> BigVec = IS.<a href="/docs/api/classes/llvm/ginsertsubvector/#a7f5a93aed60bbe1badb84e5e06f46b31">getBigVec</a>();</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> LitVec = IS.<a href="/docs/api/classes/llvm/ginsertsubvector/#a2045dc53a7fe26b15fca8c2904955fa0">getSubVec</a>();</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">  uint64&#95;t Idx = IS.<a href="/docs/api/classes/llvm/ginsertsubvector/#aa2e5c0f1932c6d84f43c0f2a7ca780eb">getIndexImm</a>();</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlight">  LLT BigTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(BigVec);</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><span class="doxyHighlight">  LLT LitTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(LitVec);</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Idx == 0 ||</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getVRegDef(BigVec)-&gt;getOpcode() == TargetOpcode::G&#95;IMPLICIT&#95;DEF)</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We don&#39;t have the ability to slide mask vectors up indexed by their i1</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// elements; the smallest we can do is i8. Often we are able to bitcast to</span></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// equivalent i8 vectors. Otherwise, we can must zeroextend to equivalent i8</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vectors and truncate down after the insert.</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LitTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1)) &#123;</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> BigTyMinElts = BigTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LitTyMinElts = LitTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BigTyMinElts &gt;= 8 &amp;&amp; LitTyMinElts &gt;= 8)</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a6c12dbad109a5d725ce01a9a8363f948">bitcast</a>(</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><span class="doxyHighlight">          IS, 0,</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/llt/#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(BigTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ae7510a639ca53c1bfa1c90c6dfc7eb2e">divideCoefficientBy</a>(8), 8));</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We can&#39;t slide this mask vector up indexed by its i1 elements.</span></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This poses a problem when we wish to insert a scalable vector which</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// can&#39;t be re-expressed as a larger type. Just choose the slow path and</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// extend to a larger type, then truncate back down.</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">    LLT ExtBigTy = BigTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8));</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aacc36b9bbb74a3cdb987aa8f28b269e3">widenScalar</a>(IS, 0, ExtBigTy);</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> RISCVRegisterInfo &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = STI.getRegisterInfo();</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SubRegIdx, RemIdx;</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><span class="doxyHighlight">  std::tie(SubRegIdx, RemIdx) =</span></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/riscvtargetlowering/#a01ee44fd979fc25e2afe3d23a2079494">RISCVTargetLowering::decomposeSubvectorInsertExtractToSubRegs</a>(</span></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(BigTy), <a href="/docs/api/namespaces/llvm/#a38d317b55a165bcddde7bb58ab7b12f3">getMVTForLLT</a>(LitTy), Idx, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">  TypeSize VecRegSize = <a href="/docs/api/classes/llvm/typesize/#a5fd620f2446d1a4cb0d55a12d182bb34">TypeSize::getScalable</a>(<a href="/docs/api/namespaces/llvm/riscv/#ad53ed145f88b1e1c966ff68df9029e7f">RISCV::RVVBitsPerBlock</a>);</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a434f6a0d80fb13e4326e848a6391f057">isPowerOf2&#95;64</a>(</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><span class="doxyHighlight">      STI.expandVScale(LitTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()).getKnownMinValue()));</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ExactlyVecRegSized =</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">      STI.expandVScale(LitTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>())</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">          .isKnownMultipleOf(STI.expandVScale(VecRegSize));</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the Idx has been completely eliminated and this subvector&#39;s size is a</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vector register or a multiple thereof, or the surrounding elements are</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// undef, then this is a subvector insert which naturally aligns to a vector</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// register. These can easily be handled using subregister manipulation.</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RemIdx == 0 &amp;&amp; ExactlyVecRegSized)</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the subvector is smaller than a vector register, then the insertion</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// must preserve the undisturbed elements of the register. We do this by</span></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// lowering to an EXTRACT&#95;SUBVECTOR grabbing the nearest LMUL=1 vector type</span></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (which resolves to a subregister copy), performing a VSLIDEUP to place the</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// subvector within the vector register, and an INSERT&#95;SUBVECTOR of that</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// LMUL=1 type back into the larger vector (resolving to another subregister</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// operation). See below for how our VSLIDEUP works. We go via a LMUL=1 type</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to avoid allocating a large register group to hold our subvector.</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// VSLIDEUP works by leaving elements 0&lt;i&lt;OFFSET undisturbed, elements</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// OFFSET&lt;=i&lt;VL set to the &quot;subvector&quot; and vl&lt;=i&lt;VLMAX set to the tail policy</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// (in our case undisturbed). This means we can set up a subvector insertion</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// where OFFSET is the insertion offset, and the VL is the OFFSET plus the</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// size of the subvector.</span></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> LLT XLenTy(STI.getXLenVT());</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">  LLT InterLitTy = BigTy;</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> AlignedExtract = BigVec;</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AlignedIdx = Idx - RemIdx;</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#addaa86bfa4ca26b7f366cbdd868f99bf">TypeSize::isKnownGT</a>(BigTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(),</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><span class="doxyHighlight">                          <a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a>(BigTy).getSizeInBits())) &#123;</span></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">    InterLitTy = <a href="#a2792f75920a3f0a318385a95f8a5702a">getLMUL1Ty</a>(BigTy);</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Extract a subvector equal to the nearest full vector register type. This</span></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// should resolve to a G&#95;EXTRACT on a subreg.</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><span class="doxyHighlight">    AlignedExtract =</span></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><span class="doxyHighlight">        MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#aeb07fff3cb0ad02bf88651e9388777de">buildExtractSubvector</a>(InterLitTy, BigVec, AlignedIdx).<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/cfg/#a90f12723ad8d5cff45b6f06408a33da8aa458be0f08b7e4ff3c0f633c100176c0">Insert</a> = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a33a09195e1324b12063bf4d35c646066">buildInsertSubvector</a>(InterLitTy, MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a137bf40e73f82a78b6d2227ff65aeadf">buildUndef</a>(InterLitTy),</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">                                         LitVec, 0);</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;<a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/lib/target/hexagon/mctargetdesc/hexagonmccodeemitter-cpp/#ae4dfd7b0d66121016d6466d2ff10e8ba">&#95;</a>&#93; = <a href="#a45e6e22e05efa275135c8ae32f60da40">buildDefaultVLOps</a>(BigTy, MIB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VL = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a50ec87d072ddb08830486e9fb31ca6de">buildVScale</a>(XLenTy, LitTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>());</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we&#39;re inserting into the lowest elements, use a tail undisturbed</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vmv.v.v.</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">  MachineInstrBuilder <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">Inserted</a>;</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> NeedInsertSubvec =</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#addaa86bfa4ca26b7f366cbdd868f99bf">TypeSize::isKnownGT</a>(BigTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), InterLitTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> InsertedDst =</span></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><span class="doxyHighlight">      NeedInsertSubvec ? <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(InterLitTy) : <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a1448a68418666ed85e07646744af82ef">Dst</a>;</span></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RemIdx == 0) &#123;</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">Inserted</a> = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;VMV&#95;V&#95;V&#95;VL, &#123;InsertedDst&#125;,</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">                              &#123;AlignedExtract, <a href="/docs/api/namespaces/llvm/cfg/#a90f12723ad8d5cff45b6f06408a33da8aa458be0f08b7e4ff3c0f633c100176c0">Insert</a>, VL&#125;);</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SlideupAmt = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a50ec87d072ddb08830486e9fb31ca6de">buildVScale</a>(XLenTy, RemIdx);</span></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Construct the vector length corresponding to RemIdx + length(LitTy).</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">    VL = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a12a128f6b9c963b6fd300cbdf52fba84">buildAdd</a>(XLenTy, SlideupAmt, VL);</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Use tail agnostic policy if we&#39;re inserting over InterLitTy&#39;s tail.</span></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><span class="doxyHighlight">    ElementCount EndIndex =</span></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/elementcount/#a1bddc4949ab247dd1474f79b9bc6e34e">ElementCount::getScalable</a>(RemIdx) + LitTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>();</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">    uint64&#95;t Policy = <a href="/docs/api/namespaces/llvm/riscvii/#a0223dd30dc4a3c2eabb5bd5ce315e065a5a0c4ebefcded6cec1dc493b5fcaf91c">RISCVII::TAIL&#95;UNDISTURBED&#95;MASK&#95;UNDISTURBED</a>;</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (STI.expandVScale(EndIndex) ==</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">        STI.expandVScale(InterLitTy.<a href="/docs/api/classes/llvm/llt/#aa911a7e9e51b7ed20810fc819efe6a26">getElementCount</a>()))</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">      Policy = <a href="/docs/api/namespaces/llvm/riscvii/#a0223dd30dc4a3c2eabb5bd5ce315e065abdc0a80d5e4b58676f861ffaa296bd1b">RISCVII::TAIL&#95;AGNOSTIC</a>;</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">Inserted</a> =</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">        MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;VSLIDEUP&#95;VL, &#123;InsertedDst&#125;,</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">                       &#123;AlignedExtract, <a href="/docs/api/namespaces/llvm/cfg/#a90f12723ad8d5cff45b6f06408a33da8aa458be0f08b7e4ff3c0f633c100176c0">Insert</a>, SlideupAmt, <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>, VL, Policy&#125;);</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If required, insert this subvector back into the correct vector register.</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This should resolve to an INSERT&#95;SUBREG instruction.</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NeedInsertSubvec)</span></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a33a09195e1324b12063bf4d35c646066">buildInsertSubvector</a>(Dst, BigVec, Inserted, AlignedIdx);</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287" lineLink="#afb1c74237caff47455679fae7d90a06c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opcode) &#123;</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Opcode) &#123;</span></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unexpected opcode&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ASHR:</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;SRAW;</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;LSHR:</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;SRLW;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SHL:</span></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;SLLW;</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SDIV:</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;DIVW;</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UDIV:</span></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;DIVUW;</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UREM:</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;REMUW;</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ROTL:</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;ROLW;</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ROTR:</span></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;RORW;</span></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTLZ:</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;CLZW;</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTTZ:</span></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;CTZW;</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOSI:</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;FCVT&#95;W&#95;RV64;</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOUI:</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RISCV::G&#95;FCVT&#95;WU&#95;RV64;</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318" lineLink="/docs/api/classes/llvm/riscvlegalizerinfo/#a1ddebf0db857b4b9fd7004511b7eb393"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/riscvlegalizerinfo/#a1ddebf0db857b4b9fd7004511b7eb393">RISCVLegalizerInfo::legalizeCustom</a>(</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/lostdebuglocobserver">LostDebugLocObserver</a> &amp;LocObserver)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;MIRBuilder = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#ad7322f56c0659b8dc8e55567767b74d6">getMRI</a>();</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent()-&gt;getParent();</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) &#123;</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// No idea what to do.</span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ABS:</span></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a34f7e7a55fa5743fadeef838b7c9ece9">lowerAbsToMaxNeg</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: G&#95;FCONSTANT</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CONSTANT: &#123;</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>();</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: if PSI and BFI are present, add &quot; ||</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// llvm::shouldOptForSize(&#42;CurMBB, PSI, BFI)&quot;.</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ShouldOptForSize = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasOptSize() || <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasMinSize();</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantint">ConstantInt</a> &#42;ConstVal = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getCImm();</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!shouldBeInConstantPool(ConstVal-&gt;<a href="/docs/api/classes/llvm/constantint/#af7e1934ed72a405ef073ea5f9bbe828e">getValue</a>(), ShouldOptForSize))</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aefeacc46707017018d95faf6751da717">lowerConstant</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SUB:</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ADD: &#123;</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 1, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 2, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> DstALU = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(sXLen);</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0);</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">    MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a0df93c0f752428162e14b54f8999172d">setInsertPt</a>(MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#ac8f6c5b9180bd630c92e1126877d0b08">getMBB</a>(), ++MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a430daa77692b7b25f93a72d83e51964f">getInsertPt</a>());</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DstSext = MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#afe73ac7a93f98c40c8fb66fce8fa4400">buildSExtInReg</a>(sXLen, DstALU, 32);</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlight">    MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(TargetOpcode::G&#95;TRUNC, &#123;MO&#125;, &#123;DstSext&#125;);</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">    MO.<a href="/docs/api/classes/llvm/machineoperand/#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstALU);</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SEXT&#95;INREG: &#123;</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><span class="doxyHighlight">    int64&#95;t SizeInBits = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</span></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Source size of 32 is sext.w.</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64 &amp;&amp; SizeInBits == 32)</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (STI.hasStdExtZbb() &amp;&amp; (SizeInBits == 8 || SizeInBits == 16))</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa411af5653e9ed6cd4f664853b61bf0d">lower</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, 0, </span><span class="doxyHighlightComment">/&#42; Unused hint type &#42;/</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a>()) ==</span></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">           <a href="/docs/api/classes/llvm/legalizerhelper/#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ASHR:</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;LSHR:</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SHL: &#123;</span></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) &#123;</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We don&#39;t need a custom node for shift by constant. Just widen the</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// source and the shift amount.</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ExtOpc = TargetOpcode::G&#95;ANYEXT;</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;ASHR)</span></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><span class="doxyHighlight">        ExtOpc = TargetOpcode::G&#95;SEXT;</span></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;LSHR)</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">        ExtOpc = TargetOpcode::G&#95;ZEXT;</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 1, ExtOpc);</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 2, TargetOpcode::G&#95;ZEXT);</span></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen);</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 1, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 2, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen);</span></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a35384c47e5ca9690216b1aa8fed5a8c9">getTII</a>().<a href="/docs/api/classes/llvm/mcinstrinfo/#a176ca2c9108a997dcfd8aadf4c0f0fa0">get</a>(<a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())));</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SDIV:</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UDIV:</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UREM:</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ROTL:</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ROTR: &#123;</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 1, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 2, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen);</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a35384c47e5ca9690216b1aa8fed5a8c9">getTII</a>().<a href="/docs/api/classes/llvm/mcinstrinfo/#a176ca2c9108a997dcfd8aadf4c0f0fa0">get</a>(<a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())));</span></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTLZ:</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTTZ: &#123;</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a1675c68d181eacf6dde19dc7d0cdd20c">widenScalarSrc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen, 1, TargetOpcode::G&#95;ANYEXT);</span></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen);</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a35384c47e5ca9690216b1aa8fed5a8c9">getTII</a>().<a href="/docs/api/classes/llvm/mcinstrinfo/#a176ca2c9108a997dcfd8aadf4c0f0fa0">get</a>(<a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())));</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOSI:</span></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOUI: &#123;</span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, sXLen);</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(MIRBuilder.<a href="/docs/api/classes/llvm/machineirbuilder/#a35384c47e5ca9690216b1aa8fed5a8c9">getTII</a>().<a href="/docs/api/classes/llvm/mcinstrinfo/#a176ca2c9108a997dcfd8aadf4c0f0fa0">get</a>(<a href="#afb1c74237caff47455679fae7d90a06c">getRISCVWOpcode</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())));</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a href="/docs/api/classes/llvm/machineoperand/#ab09679b541a6ba1219b3602569847364">MachineOperand::CreateImm</a>(<a href="/docs/api/namespaces/llvm/riscvfprndmode/#a9214a4f7f7322f485189dd3726776b76a5bdeddce1d5418fc8d89741d396541ad">RISCVFPRndMode::RTZ</a>));</span></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;IS&#95;FPCLASS: &#123;</span></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> GISFPCLASS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;ImmOp = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2);</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> MIB(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Turn LLVM IR&#39;s floating point classes to that in RISC-V,</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// by simply rotating the 10-bit immediate right by two bits.</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/apint">APInt</a> GFpClassImm(10, </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight">uint64&#95;t</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(ImmOp.<a href="/docs/api/classes/llvm/machineoperand/#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>()));</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FClassMask = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(sXLen, GFpClassImm.<a href="/docs/api/classes/llvm/apint/#a7add4efc2976e2d2b52a1e5d427ce616">rotr</a>(2).<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(XLen));</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ConstZero = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#af751c28a69e1d07e19dad11e4e26a70d">buildConstant</a>(sXLen, 0);</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> GFClass = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a8bc92b8a902afb7675480ecc729a66d4">buildInstr</a>(RISCV::G&#95;FCLASS, &#123;sXLen&#125;, &#123;Src&#125;);</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a33eb6083767372c564ea4bcf6c06eaf1">buildAnd</a>(sXLen, GFClass, FClassMask);</span></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineirbuilder/#a3a618c7b84d45b5e188f6a7e4305ee39">buildICmp</a>(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, GISFPCLASS, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, ConstZero);</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;BRJT:</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeBRJT(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;VASTART:</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeVAStart(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;VSCALE:</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeVScale(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ZEXT:</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SEXT:</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ANYEXT:</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeExt(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SPLAT&#95;VECTOR:</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeSplatVector(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;EXTRACT&#95;SUBVECTOR:</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeExtractSubvector(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MIRBuilder);</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;INSERT&#95;SUBVECTOR:</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeInsertSubvector(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, MIRBuilder);</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;LOAD:</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;STORE:</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> legalizeLoadStore(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, MIRBuilder);</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;expected switch to return&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
