---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/tablegen/stringmatcher-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `StringMatcher.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/TableGen/StringMatcher.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/tablegen/stringmatcher-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="map"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="utility"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="vector"
  permalink=""
  isLocal="false" />
</IncludesList>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a764e11263eeeafe0fd53e0d9c0385383">FindFirstNonCommonLetter</a> (const std::vector&lt; const StringMatcher::StringPair &#42; &gt; &amp;Matches)</>}>
FindFirstNonCommonLetter - Find the first character in the keys of the string pairs that is not shared across the whole set of strings. <a href="#a764e11263eeeafe0fd53e0d9c0385383">More...</a>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Functions

### FindFirstNonCommonLetter() {#a764e11263eeeafe0fd53e0d9c0385383}

<MemberDefinition
  prototype={<>static unsigned FindFirstNonCommonLetter (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#ac760e37eba1d852d0a28011a1a0ce05f">std::vector</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/stringmatcher/#afdc3a5a29d174eab8c4aac8cd3d88563">StringMatcher::StringPair</a> &#42; &gt; &amp; Matches)</>}
  labels = {["static"]}>
FindFirstNonCommonLetter - Find the first character in the keys of the string pairs that is not shared across the whole set of strings.

All strings are assumed to have the same length.

Definition at line <a href="#l00029">29</a> of file <a href="/docs/api/files/lib/lib/tablegen/stringmatcher-cpp">StringMatcher.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- StringMatcher.cpp - Generate a matcher for input strings -----------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">// This file implements the StringMatcher class.</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/tablegen/stringmatcher-h">llvm/TableGen/StringMatcher.h</a>&quot;</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightPreprocessor">#include &lt;cassert&gt;</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &lt;map&gt;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &lt;string&gt;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &lt;utility&gt;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &lt;vector&gt;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightComment">/// FindFirstNonCommonLetter - Find the first character in the keys of the</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightComment">/// string pairs that is not shared across the whole set of strings.  All</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightComment">/// strings are assumed to have the same length.</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29" lineLink="#a764e11263eeeafe0fd53e0d9c0385383"><span class="doxyHighlight"><a href="#a764e11263eeeafe0fd53e0d9c0385383">FindFirstNonCommonLetter</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::vector&lt;</span><span class="doxyHighlightKeyword">const</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/stringmatcher/#afdc3a5a29d174eab8c4aac8cd3d88563">StringMatcher::StringPair</a>&#42;&gt; &amp;Matches) &#123;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Matches.empty());</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0, e = Matches&#91;0&#93;-&gt;first.size(); i != e; ++i) &#123;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Check to see if letter i is the same across the set.</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> Letter = Matches&#91;0&#93;-&gt;first&#91;i&#93;;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stringmatcher/#afdc3a5a29d174eab8c4aac8cd3d88563">StringMatcher::StringPair</a> &#42;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a> : Matches)</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>-&gt;first&#91;i&#93; != Letter)</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> i;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Matches&#91;0&#93;-&gt;first.size();</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightComment">/// EmitStringMatcherForChar - Given a set of strings that are known to be the</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightComment">/// same length and whose characters leading up to CharNo are the same, emit</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightComment">/// code to verify that CharNo and later are the same.</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlightComment">/// \\return - True if control can leave the emitted code fragment.</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> StringMatcher::EmitStringMatcherForChar(</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::vector&lt;const StringPair &#42;&gt; &amp;Matches, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CharNo,</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IndentCount, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IgnoreDuplicates)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Matches.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Must have at least one string to match!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlight">  std::string Indent(IndentCount &#42; 2 + 4, </span><span class="doxyHighlightCharLiteral">&#39; &#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have verified that the entire string matches, we&#39;re done: output the</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// matching code.</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CharNo == Matches&#91;0&#93;-&gt;first.size()) &#123;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Matches.size() &gt; 1 &amp;&amp; !IgnoreDuplicates)</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</span><span class="doxyHighlightStringLiteral">&quot;Had duplicate keys to match on&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the to-execute code has \\n&#39;s in it, indent each subsequent line.</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlight">    StringRef <a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a> = Matches&#91;0&#93;-&gt;second;</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlight">    std::pair&lt;StringRef, StringRef&gt; <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a> = <a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a>.split(</span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlight">    OS &lt;&lt; Indent &lt;&lt; <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>.first &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\t // \\&quot;&quot;</span><span class="doxyHighlight"> &lt;&lt; Matches&#91;0&#93;-&gt;first &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a> = <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>.second;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a>.empty()) &#123;</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a> = <a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a>.split(</span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>.first &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/rdf/#ad1b71d7576f4f5ed128dbc3e431f4474">Code</a> = <a href="/docs/api/namespaces/llvm/logicalview/#a032987f23ff952c1def983c6bb120f00a8a9e64d86ed12ad40de129bc7f4683b2">Split</a>.second;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bucket the matches by the character we are comparing.</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlight">  std::map&lt;char, std::vector&lt;const StringPair&#42;&gt;&gt; MatchesByLetter;</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stringmatcher/#afdc3a5a29d174eab8c4aac8cd3d88563">StringPair</a> &#42;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a> : Matches)</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlight">    MatchesByLetter&#91;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>-&gt;first&#91;CharNo&#93;&#93;.push&#95;back(<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>);</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have exactly one bucket to match, see how many characters are common</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// across the whole set and match all of them at once.</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MatchesByLetter.size() == 1) &#123;</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FirstNonCommonLetter = <a href="#a764e11263eeeafe0fd53e0d9c0385383">FindFirstNonCommonLetter</a>(Matches);</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumChars = FirstNonCommonLetter-CharNo;</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Emit code to break out if the prefix doesn&#39;t match.</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumChars == 1) &#123;</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Do the comparison with if (Str&#91;1&#93; != &#39;f&#39;)</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Need to escape general characters.</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;if (&quot;</span><span class="doxyHighlight"> &lt;&lt; StrVariableName &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; CharNo &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93; != &#39;&quot;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlight">      &lt;&lt; Matches&#91;0&#93;-&gt;first&#91;CharNo&#93; &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#39;)\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Do the comparison with if memcmp(Str.data()+1, &quot;foo&quot;, 3).</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Need to escape general strings.</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;if (memcmp(&quot;</span><span class="doxyHighlight"> &lt;&lt; StrVariableName &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;.data()+&quot;</span><span class="doxyHighlight"> &lt;&lt; CharNo</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, \\&quot;&quot;</span><span class="doxyHighlight"> &lt;&lt; Matches&#91;0&#93;-&gt;first.substr(CharNo, NumChars) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\&quot;, &quot;</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlight">         &lt;&lt; NumChars &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) != 0)\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EmitStringMatcherForChar(Matches, FirstNonCommonLetter, IndentCount,</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">                                    IgnoreDuplicates);</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Otherwise, we have multiple possible things, emit a switch on the</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// character.</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlight">  OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;switch (&quot;</span><span class="doxyHighlight"> &lt;&lt; StrVariableName &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; CharNo &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93;) &#123;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">  OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;default: break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;LI : MatchesByLetter) &#123;</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: escape hard stuff (like \\n) if we ever care about it.</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">    OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;case &#39;&quot;</span><span class="doxyHighlight"> &lt;&lt; LI.first &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#39;:\\t // &quot;</span><span class="doxyHighlight"> &lt;&lt; LI.second.size()</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">       &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; string&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LI.second.size() != 1)</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlight">      OS &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;s&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlight">    OS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; to match.\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EmitStringMatcherForChar(LI.second, CharNo + 1, IndentCount + 1,</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlight">                                 IgnoreDuplicates))</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlight">      OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">  OS &lt;&lt; Indent &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#125;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlightComment">/// Emit - Top level entry point.</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131" lineLink="/docs/api/classes/llvm/stringmatcher/#ab750770e04105a20be5de84dacb62a04"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stringmatcher/#ab750770e04105a20be5de84dacb62a04">StringMatcher::Emit</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Indent, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IgnoreDuplicates)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If nothing to match, just fall through.</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Matches.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// First level categorization: group strings by length.</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">  std::map&lt;unsigned, std::vector&lt;const StringPair&#42;&gt;&gt; MatchesByLength;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/stringmatcher/#afdc3a5a29d174eab8c4aac8cd3d88563">StringPair</a> &amp;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a> : Matches)</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">    MatchesByLength&#91;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>.first.size()&#93;.push&#95;back(&amp;<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>);</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Output a switch statement on length and categorize the elements within each</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// bin.</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">  OS.indent(Indent&#42;2+2) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;switch (&quot;</span><span class="doxyHighlight"> &lt;&lt; StrVariableName &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;.size()) &#123;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">  OS.indent(Indent&#42;2+2) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;default: break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;LI : MatchesByLength) &#123;</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlight">    OS.indent(Indent &#42; 2 + 2)</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlight">        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;case &quot;</span><span class="doxyHighlight"> &lt;&lt; LI.first &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:\\t // &quot;</span><span class="doxyHighlight"> &lt;&lt; LI.second.size() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; string&quot;</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><span class="doxyHighlight">        &lt;&lt; (LI.second.size() == 1 ? </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;s&quot;</span><span class="doxyHighlight">) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; to match.\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EmitStringMatcherForChar(LI.second, 0, Indent, IgnoreDuplicates))</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">      OS.indent(Indent&#42;2+4) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;break;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">  OS.indent(Indent&#42;2+2) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#125;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
