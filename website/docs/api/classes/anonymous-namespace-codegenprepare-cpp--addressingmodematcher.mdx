---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-codegenprepare-cpp-/addressingmodematcher
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AddressingModeMatcher` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

A helper class for matching addressing modes. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{CodeGenPrepare.cpp}::AddressingModeMatcher</CodeBlock>

## Private Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a2bb823db523814bd908bc06727231b08">AddressingModeMatcher</a> (SmallVectorImpl&lt; Instruction &#42; &gt; &amp;AMI, const TargetLowering &amp;TLI, const TargetRegisterInfo &amp;TRI, const LoopInfo &amp;LI, const std::function&lt; const DominatorTree &amp;()&gt; getDTFn, Type &#42;AT, unsigned AS, Instruction &#42;MI, ExtAddrMode &amp;AM, const SetOfInstrs &amp;InsertedInsts, InstrToOrigTy &amp;PromotedInsts, TypePromotionTransaction &amp;TPT, std::pair&lt; AssertingVH&lt; GetElementPtrInst &gt;, int64&#95;t &gt; &amp;LargeOffsetGEP, bool OptSize, ProfileSummaryInfo &#42;PSI, BlockFrequencyInfo &#42;BFI)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab16956010f28f7c3884e9924850b02ca">isProfitableToFoldIntoAddressingMode</a> (Instruction &#42;I, ExtAddrMode &amp;AMBefore, ExtAddrMode &amp;AMAfter)</>}>
It is possible for the addressing mode of the machine to fold the specified instruction into a load or store that ultimately uses it. <a href="#ab16956010f28f7c3884e9924850b02ca">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa6573874aabded328ee705e22effb014">isPromotionProfitable</a> (unsigned NewCost, unsigned OldCost, Value &#42;PromotedOperand) const</>}>
Check whether or not promoting an instruction to a wider type is profitable. <a href="#aa6573874aabded328ee705e22effb014">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a26bb3cdbd5f3ac36e41f1098e7023efc">matchAddr</a> (Value &#42;Addr, unsigned Depth)</>}>
If we can, try to add the value of &#39;Addr&#39; into the current addressing mode. <a href="#a26bb3cdbd5f3ac36e41f1098e7023efc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0b83aeacaba3be9b9b9d30384f0022fd">matchOperationAddr</a> (User &#42;AddrInst, unsigned Opcode, unsigned Depth, bool &#42;MovedAway=nullptr)</>}>
Given an instruction or constant expr, see if we can fold the operation into the addressing mode. <a href="#a0b83aeacaba3be9b9b9d30384f0022fd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abd48db079eae8e49332408a9cbe745cf">matchScaledValue</a> (Value &#42;ScaleReg, int64&#95;t Scale, unsigned Depth)</>}>
Try adding ScaleReg&#42;Scale to the current addressing mode. <a href="#abd48db079eae8e49332408a9cbe745cf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a750ec615cdb16dc4c622d5a91b74f291">valueAlreadyLiveAtInst</a> (Value &#42;Val, Value &#42;KnownLive1, Value &#42;KnownLive2)</>}>
Return true if Val is already known to be live at the use site that we&#39;re folding it into. <a href="#a750ec615cdb16dc4c622d5a91b74f291">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/type">Type</a> &#42;</>}
  name={<><a href="#ac64c806ec47f162ed49a833a2f59ddd7">AccessTy</a></>}>
AccessTy/MemoryInst - This is the type for the access (e.g. <a href="#ac64c806ec47f162ed49a833a2f59ddd7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/anonymous-namespace-codegenprepare-cpp-/extaddrmode">ExtAddrMode</a> &amp;</>}
  name={<><a href="#a7c8725fc519e8d9da6546f35dd03cec5">AddrMode</a></>}>
This is the addressing mode that we&#39;re building up. <a href="#a7c8725fc519e8d9da6546f35dd03cec5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp;</>}
  name={<><a href="#a1316b26e7b91042c63155f52cc13ea4b">AddrModeInsts</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#afb9379ea4388700f1f7f54f6b974230e">AddrSpace</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequencyinfo">BlockFrequencyInfo</a> &#42;</>}
  name={<><a href="#ab0b6a5592665b1ed7b3fd580847d1f19">BFI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#adecb7387883d586236f1cc72f7b7d634">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::function&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &amp;()&gt;</>}
  name={<><a href="#a7f18b3885cfc3b708ef5436eeda9e3b4">getDTFn</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a971a22087bde2040323e2c797281f4a9">IgnoreProfitability</a></>}>
This is set to true when we should not do profitability checks. <a href="#a971a22087bde2040323e2c797281f4a9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#af2dad33e47a12a0b01b11d97d390f7ee">SetOfInstrs</a> &amp;</>}
  name={<><a href="#ae5fd735ede73bfb7b96c291d0ace0e3e">InsertedInsts</a></>}>
The instructions inserted by other <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/codegenprepare">CodeGenPrepare</a> optimizations. <a href="#ae5fd735ede73bfb7b96c291d0ace0e3e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/classes/llvm/assertingvh">AssertingVH</a>&lt; <a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &gt;, int64&#95;t &gt; &amp;</>}
  name={<><a href="#a8d52b1f082e79be0b2d338026efeb3ea">LargeOffsetGEP</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &amp;</>}
  name={<><a href="#a50de527a586a5fd5ebdc302f299c7e6a">LI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#a72fdc4d1b4e2760147df46e9f655bf5c">MemoryInst</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1f948ff6ae7b2419806cba6406fe0855">OptSize</a> = false</>}>
True if we are optimizing for size. <a href="#a1f948ff6ae7b2419806cba6406fe0855">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#a71622f7f81af67784beaf8b1420aa76d">InstrToOrigTy</a> &amp;</>}
  name={<><a href="#a299f8eee052c8185969fc01dcc9c9fa4">PromotedInsts</a></>}>
A map from the instructions to their type before promotion. <a href="#a299f8eee052c8185969fc01dcc9c9fa4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42;</>}
  name={<><a href="#a17b1873dd1a9be616e12a01e4263cba3">PSI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;</>}
  name={<><a href="#a06ef2b5c917c90c930e6fc24cfd9a52d">TLI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/typepromotiontransaction">TypePromotionTransaction</a> &amp;</>}
  name={<><a href="#abf6bb746ce0f3c0d4cfe7f07400cb4cc">TPT</a></>}>
The ongoing transaction where every action should be registered. <a href="#abf6bb746ce0f3c0d4cfe7f07400cb4cc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &amp;</>}
  name={<><a href="#a48027822a550886fe2c99da543b18bc0">TRI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/structs/anonymous-namespace-codegenprepare-cpp-/extaddrmode">ExtAddrMode</a></>}
  name={<><a href="#a592ce6f54154b0ca1d672869951cad6b">Match</a> (Value &#42;V, Type &#42;AccessTy, unsigned AS, Instruction &#42;MemoryInst, SmallVectorImpl&lt; Instruction &#42; &gt; &amp;AddrModeInsts, const TargetLowering &amp;TLI, const LoopInfo &amp;LI, const std::function&lt; const DominatorTree &amp;()&gt; getDTFn, const TargetRegisterInfo &amp;TRI, const SetOfInstrs &amp;InsertedInsts, InstrToOrigTy &amp;PromotedInsts, TypePromotionTransaction &amp;TPT, std::pair&lt; AssertingVH&lt; GetElementPtrInst &gt;, int64&#95;t &gt; &amp;LargeOffsetGEP, bool OptSize, ProfileSummaryInfo &#42;PSI, BlockFrequencyInfo &#42;BFI)</>}>
Find the maximal addressing mode that a load/store of V can fold, give an access type of AccessTy. <a href="#a592ce6f54154b0ca1d672869951cad6b">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A helper class for matching addressing modes.

This encapsulates the logic for matching the target-legal addressing modes.

Definition at line 3744 of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.

<SectionDefinition>

## Private Constructors

### AddressingModeMatcher() {#a2bb823db523814bd908bc06727231b08}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::AddressingModeMatcher (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; AMI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &amp; TRI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &amp; LI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::function&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &amp;()&gt; getDTFn, <a href="/docs/api/classes/llvm/type">Type</a> &#42; AT, unsigned AS, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; MI, <a href="/docs/api/structs/anonymous-namespace-codegenprepare-cpp-/extaddrmode">ExtAddrMode</a> &amp; AM, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#af2dad33e47a12a0b01b11d97d390f7ee">SetOfInstrs</a> &amp; InsertedInsts, <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#a71622f7f81af67784beaf8b1420aa76d">InstrToOrigTy</a> &amp; PromotedInsts, <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/typepromotiontransaction">TypePromotionTransaction</a> &amp; TPT, std::pair&lt; <a href="/docs/api/classes/llvm/assertingvh">AssertingVH</a>&lt; <a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &gt;, int64&#95;t &gt; &amp; LargeOffsetGEP, bool OptSize, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI, <a href="/docs/api/classes/llvm/blockfrequencyinfo">BlockFrequencyInfo</a> &#42; BFI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03784">3784</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### isProfitableToFoldIntoAddressingMode() {#ab16956010f28f7c3884e9924850b02ca}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::isProfitableToFoldIntoAddressingMode (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I, <a href="/docs/api/structs/anonymous-namespace-codegenprepare-cpp-/extaddrmode">ExtAddrMode</a> &amp; AMBefore, <a href="/docs/api/structs/anonymous-namespace-codegenprepare-cpp-/extaddrmode">ExtAddrMode</a> &amp; AMAfter)</>}>
It is possible for the addressing mode of the machine to fold the specified instruction into a load or store that ultimately uses it.

However, the specified instruction has multiple uses. Given this, it may actually increase register pressure to fold it into the load. For example, consider this code: <CodeBlock>X = ...
Y = X+1
use(Y)   -&gt; nonload/store
Z = Y+1
load Z
</CodeBlock>

In this case, Y has multiple uses, and can be folded into the load of Z (yielding load &#91;X+2&#93;). However, doing this will cause both &quot;X&quot; and &quot;X+1&quot; to be live at the <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/localizer-cpp/#a428090a453f41a199ef67fc3f2179fbc">use(Y)</a> line. If we don&#39;t fold Y into load Z, we use one fewer register. Since Y can&#39;t be folded into &quot;use(Y)&quot; we don&#39;t increase the number of computations either.

Note that this (like most of <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/codegenprepare">CodeGenPrepare</a>) is just a rough heuristic. If X was live across &#39;load Z&#39; for other reasons, we actually <em>would</em> want to fold the addressing mode in the Z case. This would make Y die earlier.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03835">3835</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### isPromotionProfitable() {#aa6573874aabded328ee705e22effb014}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::isPromotionProfitable (unsigned NewCost, unsigned OldCost, <a href="/docs/api/classes/llvm/value">Value</a> &#42; PromotedOperand) const</>}>
Check whether or not promoting an instruction to a wider type is profitable.

<code>NewCost</code> gives the cost of extension instructions created by the promotion. <code>OldCost</code> gives the cost of extension instructions before the promotion plus the number of instructions that have been matched in the addressing mode the promotion. <code>PromotedOperand</code> is the value that has been promoted. 
<SectionUser title="Returns">
True if the promotion is profitable, false otherwise.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03839">3839</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### matchAddr() {#a26bb3cdbd5f3ac36e41f1098e7023efc}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::matchAddr (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Addr, unsigned Depth)</>}>
If we can, try to add the value of &#39;Addr&#39; into the current addressing mode.

If Addr can&#39;t be added to <a href="/docs/api/files/lib/lib/target/lib/target/msp430/lib/target/msp430/disassembler/msp430disassembler-cpp/#abf132b4ad93f3557cd3956577592ba68">AddrMode</a> this returns false and leaves <a href="/docs/api/files/lib/lib/target/lib/target/msp430/lib/target/msp430/disassembler/msp430disassembler-cpp/#abf132b4ad93f3557cd3956577592ba68">AddrMode</a> unmodified. This assumes that Addr is either a pointer type or intptr&#95;t for the target.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03832">3832</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### matchOperationAddr() {#a0b83aeacaba3be9b9b9d30384f0022fd}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::matchOperationAddr (<a href="/docs/api/classes/llvm/user">User</a> &#42; AddrInst, unsigned Opcode, unsigned Depth, bool &#42; MovedAway=nullptr)</>}>
Given an instruction or constant expr, see if we can fold the operation into the addressing mode.

If so, update the addressing mode and return true, otherwise return false without modifying <a href="/docs/api/files/lib/lib/target/lib/target/msp430/lib/target/msp430/disassembler/msp430disassembler-cpp/#abf132b4ad93f3557cd3956577592ba68">AddrMode</a>. If <code>MovedAway</code> is not NULL, it contains the information of whether or not AddrInst has to be folded into the addressing mode on success. If <code>MovedAway</code> == true, <code>AddrInst</code> will not be part of the addressing because it has been moved away. Thus AddrInst must not be added in the matched instructions. This state can happen when AddrInst is a sext, since it may be moved away. Therefore, AddrInst may not be valid when MovedAway is true and it must not be referenced anymore.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03833">3833</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### matchScaledValue() {#abd48db079eae8e49332408a9cbe745cf}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::matchScaledValue (<a href="/docs/api/classes/llvm/value">Value</a> &#42; ScaleReg, int64&#95;t Scale, unsigned Depth)</>}>
Try adding ScaleReg&#42;Scale to the current addressing mode.

Return true and update <a href="/docs/api/files/lib/lib/target/lib/target/msp430/lib/target/msp430/disassembler/msp430disassembler-cpp/#abf132b4ad93f3557cd3956577592ba68">AddrMode</a> if this addr mode is legal for the target, false if not.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03831">3831</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### valueAlreadyLiveAtInst() {#a750ec615cdb16dc4c622d5a91b74f291}

<MemberDefinition
  prototype={<>bool AddressingModeMatcher::valueAlreadyLiveAtInst (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Val, <a href="/docs/api/classes/llvm/value">Value</a> &#42; KnownLive1, <a href="/docs/api/classes/llvm/value">Value</a> &#42; KnownLive2)</>}>
Return true if Val is already known to be live at the use site that we&#39;re folding it into.

If so, there is no cost to include it in the addressing mode. KnownLive1 and KnownLive2 are two values that we know are live at the instruction already.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03838">3838</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AccessTy {#ac64c806ec47f162ed49a833a2f59ddd7}

<MemberDefinition
  prototype={<>Type&#42; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::AccessTy</>}>
AccessTy/MemoryInst - This is the type for the access (e.g.

double) and the memory instruction that we&#39;re computing this address for.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03754">3754</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### AddrMode {#a7c8725fc519e8d9da6546f35dd03cec5}

<MemberDefinition
  prototype={<>ExtAddrMode&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::AddrMode</>}>
This is the addressing mode that we&#39;re building up.

This is part of the return value of this addressing mode matching stuff.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03760">3760</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### AddrModeInsts {#a1316b26e7b91042c63155f52cc13ea4b}

<MemberDefinition
  prototype={<>SmallVectorImpl&lt;Instruction &#42;&gt;&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::AddrModeInsts</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03745">3745</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### AddrSpace {#afb9379ea4388700f1f7f54f6b974230e}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::AddrSpace</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03755">3755</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### BFI {#ab0b6a5592665b1ed7b3fd580847d1f19}

<MemberDefinition
  prototype={<>BlockFrequencyInfo&#42; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::BFI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03782">3782</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### DL {#adecb7387883d586236f1cc72f7b7d634}

<MemberDefinition
  prototype={<>const DataLayout&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03748">3748</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### getDTFn {#a7f18b3885cfc3b708ef5436eeda9e3b4}

<MemberDefinition
  prototype={<>const std::function&lt;const DominatorTree &amp;()&gt; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::getDTFn</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03750">3750</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### IgnoreProfitability {#a971a22087bde2040323e2c797281f4a9}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::IgnoreProfitability</>}>
This is set to true when we should not do profitability checks.

When true, IsProfitableToFoldIntoAddressingMode always returns true.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03776">3776</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### InsertedInsts {#ae5fd735ede73bfb7b96c291d0ace0e3e}

<MemberDefinition
  prototype={<>const SetOfInstrs&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::InsertedInsts</>}>
The instructions inserted by other <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/codegenprepare">CodeGenPrepare</a> optimizations.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03763">3763</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### LargeOffsetGEP {#a8d52b1f082e79be0b2d338026efeb3ea}

<MemberDefinition
  prototype={<>std::pair&lt;AssertingVH&lt;GetElementPtrInst&gt;, int64&#95;t&gt;&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::LargeOffsetGEP</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03772">3772</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### LI {#a50de527a586a5fd5ebdc302f299c7e6a}

<MemberDefinition
  prototype={<>const LoopInfo&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::LI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03749">3749</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### MemoryInst {#a72fdc4d1b4e2760147df46e9f655bf5c}

<MemberDefinition
  prototype={<>Instruction&#42; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::MemoryInst</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03756">3756</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### OptSize {#a1f948ff6ae7b2419806cba6406fe0855}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::OptSize = false</>}>
True if we are optimizing for size.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03779">3779</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### PromotedInsts {#a299f8eee052c8185969fc01dcc9c9fa4}

<MemberDefinition
  prototype={<>InstrToOrigTy&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::PromotedInsts</>}>
A map from the instructions to their type before promotion.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03766">3766</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### PSI {#a17b1873dd1a9be616e12a01e4263cba3}

<MemberDefinition
  prototype={<>ProfileSummaryInfo&#42; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::PSI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03781">3781</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### TLI {#a06ef2b5c917c90c930e6fc24cfd9a52d}

<MemberDefinition
  prototype={<>const TargetLowering&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::TLI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03746">3746</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### TPT {#abf6bb746ce0f3c0d4cfe7f07400cb4cc}

<MemberDefinition
  prototype={<>TypePromotionTransaction&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::TPT</>}>
The ongoing transaction where every action should be registered.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03769">3769</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

### TRI {#a48027822a550886fe2c99da543b18bc0}

<MemberDefinition
  prototype={<>const TargetRegisterInfo&amp; anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::TRI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03747">3747</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Functions

### Match() {#a592ce6f54154b0ca1d672869951cad6b}

<MemberDefinition
  prototype={<>static ExtAddrMode anonymous&#95;namespace&#123;CodeGenPrepare.cpp&#125;::AddressingModeMatcher::Match (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V, <a href="/docs/api/classes/llvm/type">Type</a> &#42; AccessTy, unsigned AS, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; MemoryInst, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; AddrModeInsts, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &amp; LI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::function&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &amp;()&gt; getDTFn, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &amp; TRI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#af2dad33e47a12a0b01b11d97d390f7ee">SetOfInstrs</a> &amp; InsertedInsts, <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#a71622f7f81af67784beaf8b1420aa76d">InstrToOrigTy</a> &amp; PromotedInsts, <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/typepromotiontransaction">TypePromotionTransaction</a> &amp; TPT, std::pair&lt; <a href="/docs/api/classes/llvm/assertingvh">AssertingVH</a>&lt; <a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &gt;, int64&#95;t &gt; &amp; LargeOffsetGEP, bool OptSize, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI, <a href="/docs/api/classes/llvm/blockfrequencyinfo">BlockFrequencyInfo</a> &#42; BFI)</>}
  labels = {["inline", "static"]}>
Find the maximal addressing mode that a load/store of V can fold, give an access type of AccessTy.

This returns a list of involved instructions in AddrModeInsts. <code>InsertedInsts</code> The instructions inserted by other <a href="/docs/api/classes/anonymous-namespace-codegenprepare-cpp-/codegenprepare">CodeGenPrepare</a> optimizations. <code>PromotedInsts</code> maps the instructions to their type before promotion. <code>The</code> ongoing transaction where every action should be registered.

Definition at line <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp/#l03810">3810</a> of file <a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/codegenprepare-cpp">CodeGenPrepare.cpp</a></li>
</ul>

</DoxygenPage>
