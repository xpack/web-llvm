---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-armconstantislandpass-cpp-/armconstantislands
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `ARMConstantIslands` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

<a href="/docs/api/classes/anonymous-namespace-armconstantislandpass-cpp-/armconstantislands">ARMConstantIslands</a> - Due to limited PC-relative displacements, <a href="/docs/api/namespaces/llvm/arm">ARM</a> requires constant pool entries to be scattered among the instructions inside a function. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{ARMConstantIslandPass.cpp}::ARMConstantIslands</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/machinefunctionpass">MachineFunctionPass</a></>}>
<a href="/docs/api/classes/llvm/machinefunctionpass">MachineFunctionPass</a> - This class adapts the <a href="/docs/api/classes/llvm/functionpass">FunctionPass</a> interface to allow convenient creation of passes that operate on the <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> representation. <a href="/docs/api/classes/llvm/machinefunctionpass/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a87abe235fd0b4caa9549a01f250b10d2">water&#95;iterator</a> = std::vector&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt;<a href="/docs/api/classes/llvm/iplist">::iterator</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a6ab5453e9f3f4ed83c6bb9e4ebd68b20">ARMConstantIslands</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a225e3a366286304012ebb04ca6aee82d">getAnalysisUsage</a> (AnalysisUsage &amp;AU) const override</>}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job. <a href="#a225e3a366286304012ebb04ca6aee82d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/stringref">StringRef</a></>}
  name={<><a href="#aadaa10dcef3fe4481b60ff1fb9c34780">getPassName</a> () const override</>}>
getPassName - Return a nice clean name for a pass. <a href="#aadaa10dcef3fe4481b60ff1fb9c34780">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a></>}
  name={<><a href="#a8e87361befd343a840e87d2ef988269e">getRequiredProperties</a> () const override</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aaf4297850ccff6052205f45bc2ba2f87">runOnMachineFunction</a> (MachineFunction &amp;MF) override</>}>
runOnMachineFunction - This method must be overloaded to perform the desired machine code transformation or analysis. <a href="#aaf4297850ccff6052205f45bc2ba2f87">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a5d6bc8ba7bb705dba758eb13c5c08408">adjustJTTargetBlockForward</a> (unsigned JTI, MachineBasicBlock &#42;BB, MachineBasicBlock &#42;JTBB)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab648cc5da37b64781455162df55dd006">BBHasFallthrough</a> (MachineBasicBlock &#42;MBB)</>}>
BBHasFallthrough - Return true if the specified basic block can fallthrough into the block immediately after it. <a href="#ab648cc5da37b64781455162df55dd006">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9e4d3fe25445806bc4392836a75db579">createNewWater</a> (unsigned CPUserIndex, unsigned UserOffset, MachineBasicBlock &#42;&amp;NewMBB)</>}>
createNewWater - No existing WaterList entry will work for CPUsers&#91;CPUserIndex&#93;, so create a place to put the CPE. <a href="#a9e4d3fe25445806bc4392836a75db579">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1132d26053b7c6b6945d4d05957cca6f">decrementCPEReferenceCount</a> (unsigned CPI, MachineInstr &#42;CPEMI)</>}>
decrementCPEReferenceCount - find the constant pool entry with index CPI and instruction CPEMI, and decrement its refcount. <a href="#a1132d26053b7c6b6945d4d05957cca6f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a472523a060d0c5f613fdaf2edf880f5e">doInitialConstPlacement</a> (std::vector&lt; MachineInstr &#42; &gt; &amp;CPEMIs)</>}>
Perform the initial placement of the regular constant pool entries. <a href="#a472523a060d0c5f613fdaf2edf880f5e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0d08a0032243809d891261111e6c4747">doInitialJumpTablePlacement</a> (std::vector&lt; MachineInstr &#42; &gt; &amp;CPEMIs)</>}>
Do initial placement of the jump tables. <a href="#a0d08a0032243809d891261111e6c4747">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a97f3dc8c8f9649142b128882c6d68554">dumpBBs</a> ()</>}>
print block size and offset information - debugging <a href="#a97f3dc8c8f9649142b128882c6d68554">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a36a35b64e8ecf993c780868342ebc1f8">findAvailableWater</a> (CPUser &amp;U, unsigned UserOffset, water&#95;iterator &amp;WaterIter, bool CloserWater)</>}>
findAvailableWater - Look for an existing entry in the WaterList in which we can place the CPE referenced from U so it&#39;s within range of U&#39;s MI. <a href="#a36a35b64e8ecf993c780868342ebc1f8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>CPEntry &#42;</>}
  name={<><a href="#a7a29aeb2c25d3927e53dbcdec7531fc2">findConstPoolEntry</a> (unsigned CPI, const MachineInstr &#42;CPEMI)</>}>
findConstPoolEntry - Given the constpool index and CONSTPOOL&#95;ENTRY MI, look up the corresponding CPEntry. <a href="#a7a29aeb2c25d3927e53dbcdec7531fc2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="int"
  name={<><a href="#abf0be587caca37c8589d2a60c6e59f24">findInRangeCPEntry</a> (CPUser &amp;U, unsigned UserOffset)</>}>
LookForCPEntryInRange - see if the currently referenced CPE is in range; if not, see if an in-range clone of the CPE is in range, and if so, change the data structures so the user references the clone. <a href="#abf0be587caca37c8589d2a60c6e59f24">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a831aa146b4f1dccd62bcd565a6eaa80f">fixupConditionalBr</a> (ImmBranch &amp;Br)</>}>
fixupConditionalBr - Fix up a conditional branch whose destination is too far away to fit in its displacement field. <a href="#a831aa146b4f1dccd62bcd565a6eaa80f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa5daae5ba9c59db3b92c4311b5d37473">fixupImmediateBr</a> (ImmBranch &amp;Br)</>}>
fixupImmediateBr - Fix up an immediate branch whose destination is too far away to fit in its displacement field. <a href="#aa5daae5ba9c59db3b92c4311b5d37473">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1ecba595e94ff061660c8b22e8716f07">fixupUnconditionalBr</a> (ImmBranch &amp;Br)</>}>
fixupUnconditionalBr - Fix up an unconditional branch whose destination is too far away to fit in its displacement field. <a href="#a1ecba595e94ff061660c8b22e8716f07">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#ab524260c1fdfc45ca8c2b7ade897fafe">getCombinedIndex</a> (const MachineInstr &#42;CPEMI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/align">Align</a></>}
  name={<><a href="#a58eb0c9489392e69edfdab54bb9a2fba">getCPEAlign</a> (const MachineInstr &#42;CPEMI)</>}>
getCPEAlign - Returns the required alignment of the constant pool entry represented by CPEMI. <a href="#a58eb0c9489392e69edfdab54bb9a2fba">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#af7146125ff6a881a6b19fab8690e0091">getUserOffset</a> (CPUser &amp;) const</>}>
getUserOffset - Compute the offset of U.MI as seen by the hardware displacement computation. <a href="#af7146125ff6a881a6b19fab8690e0091">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abdd480ce7b8dd317463fd4c3a73316fb">handleConstantPoolUser</a> (unsigned CPUserIndex, bool CloserWater)</>}>
handleConstantPoolUser - Analyze the specified user, checking to see if it is out-of-range. <a href="#abdd480ce7b8dd317463fd4c3a73316fb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aed78d2699a9d157c7ad08ae78fc48e14">initializeFunctionInfo</a> (const std::vector&lt; MachineInstr &#42; &gt; &amp;CPEMIs)</>}>
initializeFunctionInfo - Do the initial scan of the function, building up information about the sizes of each block, the location of all the water, and finding all of the constant pool users. <a href="#aed78d2699a9d157c7ad08ae78fc48e14">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a015406c9be05ba875b6a6607a7b0d33f">isCPEntryInRange</a> (MachineInstr &#42;MI, unsigned UserOffset, MachineInstr &#42;CPEMI, unsigned Disp, bool NegOk, bool DoDump=false)</>}>
isCPEntryInRange - Returns true if the distance between specific MI and specific ConstPool entry instruction can fit in MI&#39;s displacement field. <a href="#a015406c9be05ba875b6a6607a7b0d33f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9276d20e7ad345d71593d7995720afae">isOffsetInRange</a> (unsigned UserOffset, unsigned TrialOffset, unsigned Disp, bool NegativeOK, bool IsSoImm=false)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a98229bab8b53875bace6cdd43c0525fe">isOffsetInRange</a> (unsigned UserOffset, unsigned TrialOffset, const CPUser &amp;U)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a22a6249ea0ff228890a3b2e326f8fe71">isWaterInRange</a> (unsigned UserOffset, MachineBasicBlock &#42;Water, CPUser &amp;U, unsigned &amp;Growth)</>}>
isWaterInRange - Returns true if a CPE placed after the specified Water (a basic block) will be in range for the specific MI. <a href="#a22a6249ea0ff228890a3b2e326f8fe71">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7dcb1f3b15c4c0e6501c2a28d78908cf">optimizeThumb2Branches</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9beafe176b49d8fd46daab6faca8ef02">optimizeThumb2Instructions</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abad3b14f15be6b5e8dc1b4826f119696">optimizeThumb2JumpTables</a> ()</>}>
optimizeThumb2JumpTables - <a href="/docs/api/classes/llvm/use">Use</a> tbb / tbh instructions to generate smaller jumptables when it&#39;s possible. <a href="#abad3b14f15be6b5e8dc1b4826f119696">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0e5a435a047ef3f277eec100c1ecf031">preserveBaseRegister</a> (MachineInstr &#42;JumpMI, MachineInstr &#42;LEAMI, unsigned &amp;DeadSize, bool &amp;CanDeleteLEA, bool &amp;BaseRegKill)</>}>
While trying to form a TBB/TBH instruction, we may (if the table doesn&#39;t immediately follow the BR&#95;JT) need access to the start of the jump-table. <a href="#a0e5a435a047ef3f277eec100c1ecf031">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aa2fe1bbc38cd8de84461690fab233e9e">removeDeadCPEMI</a> (MachineInstr &#42;CPEMI)</>}>
removeDeadCPEMI - Remove a dead constant pool entry instruction. <a href="#aa2fe1bbc38cd8de84461690fab233e9e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8bda926b4776787d25d7b0a0112f0dfc">removeUnusedCPEntries</a> ()</>}>
removeUnusedCPEntries - Remove constant pool entries whose refcounts are zero. <a href="#a8bda926b4776787d25d7b0a0112f0dfc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a44e9766216f49ba8b940fbb7c91abb78">reorderThumb2JumpTables</a> ()</>}>
reorderThumb2JumpTables - Adjust the function&#39;s block layout to ensure that jump tables always branch forwards, since that&#39;s what tbb and tbh need. <a href="#a44e9766216f49ba8b940fbb7c91abb78">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a4995445c7a400cc68dc2e59587e68b7d">scanFunctionJumpTables</a> ()</>}>
scanFunctionJumpTables - Do a scan of the function, building up information about the sizes of each block and the locations of all the jump tables. <a href="#a4995445c7a400cc68dc2e59587e68b7d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a2d0ff01e9af545b83667a6f3b1a309a3">splitBlockBeforeInstr</a> (MachineInstr &#42;MI)</>}>
Split the basic block containing MI into two blocks, which are joined by an unconditional branch. <a href="#a2d0ff01e9af545b83667a6f3b1a309a3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae9ee57208388fce44d1de2773ba04f75">updateForInsertedWaterBlock</a> (MachineBasicBlock &#42;NewBB)</>}>
updateForInsertedWaterBlock - When a block is newly inserted into the machine function, it upsets all of the block numbers. <a href="#ae9ee57208388fce44d1de2773ba04f75">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#afaf72e81e912fc9c1a2d7913ac48d670">verify</a> ()</>}>
verify - check BBOffsets, BBSizes, alignment of islands <a href="#afaf72e81e912fc9c1a2d7913ac48d670">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/armfunctioninfo">ARMFunctionInfo</a> &#42;</>}
  name={<><a href="#a42aca0a2345c49cd96313d23761c915e">AFI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/armbasicblockutils">ARMBasicBlockUtils</a> &gt;</>}
  name={<><a href="#a9eb99cca93ab051541c42391046d9daf">BBUtils</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, int &gt;</>}
  name={<><a href="#a16ed371a9d5e8b194d6402fe0c699cdc">BlockJumpTableRefCount</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; std::vector&lt; CPEntry &gt; &gt;</>}
  name={<><a href="#a58a03308500573324cb3619b9e8f567d">CPEntries</a></>}>
CPEntries - Keep track of all of the constant pool entry machine instructions. <a href="#a58a03308500573324cb3619b9e8f567d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; CPUser &gt;</>}
  name={<><a href="#a26d4c5e9c9ef1d2abbb92300b5be8c38">CPUsers</a></>}>
CPUsers - Keep track of all of the machine instructions that use various constant pools and their max displacement. <a href="#a26d4c5e9c9ef1d2abbb92300b5be8c38">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinedominatortree">MachineDominatorTree</a> &#42;</>}
  name={<><a href="#a72802551596a33d2c23777777622bbb6">DT</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; ImmBranch &gt;</>}
  name={<><a href="#abd3dee94f255a59ef39503608f99c8a7">ImmBranches</a></>}>
ImmBranches - Keep track of all the immediate branch instructions. <a href="#abd3dee94f255a59ef39503608f99c8a7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aceff4ac3539f2c9850610445e7176758">isPositionIndependentOrROPI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a38178ec34aae8177faa51ec6fcc3fa3c">isThumb</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab5ca62ffd88a506f49d21cbac3f02015">isThumb1</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa7404870660d9bb7680f20e6a9d94313">isThumb2</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; int, int &gt;</>}
  name={<><a href="#a28a2f6500d0e72e0bc875c66ab426533">JumpTableEntryIndices</a></>}>
Maps a JT index to the offset in CPEntries containing copies of that table. <a href="#a28a2f6500d0e72e0bc875c66ab426533">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; int, int &gt;</>}
  name={<><a href="#aae272594f35c002c85edb799023a3245">JumpTableUserIndices</a></>}>
Maps a JT index to the LEA that actually uses the index to calculate its base address. <a href="#aae272594f35c002c85edb799023a3245">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineconstantpool">MachineConstantPool</a> &#42;</>}
  name={<><a href="#ab0dbb8974ac506fa487d4dde50a93a3e">MCP</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;</>}
  name={<><a href="#a7514c1eca73b9986376c81388f147e90">MF</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallset">SmallSet</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 4 &gt;</>}
  name={<><a href="#a5bcaaefb0325dd55841218c2b401a430">NewWaterList</a></>}>
NewWaterList - The subset of WaterList that was created since the previous iteration by inserting unconditional branches. <a href="#a5bcaaefb0325dd55841218c2b401a430">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;, 4 &gt;</>}
  name={<><a href="#aff8d08e657e6ed9c0c3ca1b1c179ac2c">PushPopMIs</a></>}>
PushPopMIs - Keep track of all the Thumb push / pop instructions. <a href="#aff8d08e657e6ed9c0c3ca1b1c179ac2c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/armsubtarget">ARMSubtarget</a> &#42;</>}
  name={<><a href="#a17b3557c0c6fb8199fc5aba0e0c95005">STI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;, 4 &gt;</>}
  name={<><a href="#ab52de6115c0eb43c179e676c824715ac">T2JumpTables</a></>}>
T2JumpTables - Keep track of all the Thumb2 jumptable instructions. <a href="#ab52de6115c0eb43c179e676c824715ac">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/armbaseinstrinfo">ARMBaseInstrInfo</a> &#42;</>}
  name={<><a href="#a3bcf2a90f5b140ee4022487e495223bb">TII</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt;</>}
  name={<><a href="#a610f64f4d5215f773f3604360c5c3639">WaterList</a></>}>
WaterList - A sorted list of basic blocks where islands could be placed (i.e. <a href="#a610f64f4d5215f773f3604360c5c3639">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Static Attributes Index

<MembersIndex>

<MembersIndexItem
  type="char"
  name={<><a href="#a4809f4638bc964aa757bd1b47fff3f2c">ID</a> = 0</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

<a href="/docs/api/classes/anonymous-namespace-armconstantislandpass-cpp-/armconstantislands">ARMConstantIslands</a> - Due to limited PC-relative displacements, <a href="/docs/api/namespaces/llvm/arm">ARM</a> requires constant pool entries to be scattered among the instructions inside a function.

To do this, it completely ignores the normal LLVM constant pool; instead, it places constants wherever it feels like with special instructions.

The terminology used in this pass includes: Islands - Clumps of constants placed in the function. Water - Potential places where an island could be formed. CPE - A constant pool entry that has been placed somewhere, which tracks a list of users.

Definition at line 102 of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.

<SectionDefinition>

## Private Member Typedefs

### water&#95;iterator {#a87abe235fd0b4caa9549a01f250b10d2}

<MemberDefinition
  prototype={<>using anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::water&#95;iterator =  std::vector&lt;MachineBasicBlock &#42;&gt;::iterator</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00114">114</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### ARMConstantIslands() {#a6ab5453e9f3f4ed83c6bb9e4ebd68b20}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::ARMConstantIslands ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00226">226</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### getAnalysisUsage() {#a225e3a366286304012ebb04ca6aee82d}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::getAnalysisUsage (<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;) const</>}
  labels = {["inline", "virtual"]}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job.

If a pass specifies that it uses a particular analysis result to this function, it can then use the <a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AnalysisType&gt;()</a> function, below.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00230">230</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### getPassName() {#aadaa10dcef3fe4481b60ff1fb9c34780}

<MemberDefinition
  prototype={<>StringRef anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::getPassName () const</>}
  labels = {["inline", "virtual"]}>
getPassName - Return a nice clean name for a pass.

This usually implemented in terms of the name that is registered by one of the Registration templates, but can be overloaded directly.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00240">240</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### getRequiredProperties() {#a8e87361befd343a840e87d2ef988269e}

<MemberDefinition
  prototype={<>MachineFunctionProperties anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::getRequiredProperties () const</>}
  labels = {["inline", "virtual"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00235">235</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### runOnMachineFunction() {#aaf4297850ccff6052205f45bc2ba2f87}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::runOnMachineFunction (<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF)</>}
  labels = {["virtual"]}>
runOnMachineFunction - This method must be overloaded to perform the desired machine code transformation or analysis.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00228">228</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### adjustJTTargetBlockForward() {#a5d6bc8ba7bb705dba758eb13c5c08408}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; ARMConstantIslands::adjustJTTargetBlockForward (unsigned JTI, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; JTBB)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00279">279</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### BBHasFallthrough() {#ab648cc5da37b64781455162df55dd006}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::BBHasFallthrough (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
BBHasFallthrough - Return true if the specified basic block can fallthrough into the block immediately after it.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00247">247</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### createNewWater() {#a9e4d3fe25445806bc4392836a75db579}

<MemberDefinition
  prototype={<>void ARMConstantIslands::createNewWater (unsigned CPUserIndex, unsigned UserOffset, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;&amp; NewMBB)</>}>
createNewWater - No existing WaterList entry will work for CPUsers&#91;CPUserIndex&#93;, so create a place to put the CPE.

The end of the block is used if in range, and the conditional branch munged so control flow is correct. Otherwise the block is split to create a hole with an unconditional branch around it. In either case NewMBB is set to a block following which the new island can be inserted (the WaterList is not adjusted).

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00259">259</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### decrementCPEReferenceCount() {#a1132d26053b7c6b6945d4d05957cca6f}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::decrementCPEReferenceCount (unsigned CPI, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI)</>}>
decrementCPEReferenceCount - find the constant pool entry with index CPI and instruction CPEMI, and decrement its refcount.

If the refcount becomes 0 remove the entry and instruction. Returns true if we removed the entry, false if we didn&#39;t.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00254">254</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### doInitialConstPlacement() {#a472523a060d0c5f613fdaf2edf880f5e}

<MemberDefinition
  prototype={<>void ARMConstantIslands::doInitialConstPlacement (std::vector&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; &gt; &amp; CPEMIs)</>}>
Perform the initial placement of the regular constant pool entries.

To start with, we put them all at the end of the function.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00245">245</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### doInitialJumpTablePlacement() {#a0d08a0032243809d891261111e6c4747}

<MemberDefinition
  prototype={<>void ARMConstantIslands::doInitialJumpTablePlacement (std::vector&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; &gt; &amp; CPEMIs)</>}>
Do initial placement of the jump tables.

Because Thumb2&#39;s TBB and TBH instructions can be made more efficient if the jump table immediately follows the instruction, it&#39;s best to place them immediately next to their jumps to begin with. In almost all cases they&#39;ll never be moved from that position.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00246">246</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### dumpBBs() {#a97f3dc8c8f9649142b128882c6d68554}

<MemberDefinition
  prototype={<>LLVM&#95;DUMP&#95;METHOD void ARMConstantIslands::dumpBBs ()</>}>
print block size and offset information - debugging

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00284">284</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### findAvailableWater() {#a36a35b64e8ecf993c780868342ebc1f8}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::findAvailableWater (CPUser &amp; U, unsigned UserOffset, water&#95;iterator &amp; WaterIter, bool CloserWater)</>}>
findAvailableWater - Look for an existing entry in the WaterList in which we can place the CPE referenced from U so it&#39;s within range of U&#39;s MI.

Returns true if found, false if not. If it returns true, WaterIter is set to the WaterList entry. For Thumb, prefer water that will not introduce padding to water that will. To ensure that this pass terminates, the CPE location for a particular CPUser is only allowed to move to a lower address, so search backward from the end of the list and prefer the first water that is in range.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00257">257</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### findConstPoolEntry() {#a7a29aeb2c25d3927e53dbcdec7531fc2}

<MemberDefinition
  prototype={<>ARMConstantIslands::CPEntry &#42; ARMConstantIslands::findConstPoolEntry (unsigned CPI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI)</>}>
findConstPoolEntry - Given the constpool index and CONSTPOOL&#95;ENTRY MI, look up the corresponding CPEntry.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00248">248</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### findInRangeCPEntry() {#abf0be587caca37c8589d2a60c6e59f24}

<MemberDefinition
  prototype={<>int ARMConstantIslands::findInRangeCPEntry (CPUser &amp; U, unsigned UserOffset)</>}>
LookForCPEntryInRange - see if the currently referenced CPE is in range; if not, see if an in-range clone of the CPE is in range, and if so, change the data structures so the user references the clone.

Returns: 0 = no existing entry found 1 = entry found, and there were no code insertions or deletions 2 = entry found, and there were code insertions or deletions

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00256">256</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### fixupConditionalBr() {#a831aa146b4f1dccd62bcd565a6eaa80f}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::fixupConditionalBr (ImmBranch &amp; Br)</>}>
fixupConditionalBr - Fix up a conditional branch whose destination is too far away to fit in its displacement field.

It is converted to an inverse conditional branch + an unconditional branch to the destination.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00270">270</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### fixupImmediateBr() {#aa5daae5ba9c59db3b92c4311b5d37473}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::fixupImmediateBr (ImmBranch &amp; Br)</>}>
fixupImmediateBr - Fix up an immediate branch whose destination is too far away to fit in its displacement field.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00269">269</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### fixupUnconditionalBr() {#a1ecba595e94ff061660c8b22e8716f07}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::fixupUnconditionalBr (ImmBranch &amp; Br)</>}>
fixupUnconditionalBr - Fix up an unconditional branch whose destination is too far away to fit in its displacement field.

If the LR register has been spilled in the epilogue, then we can use BL to implement a far jump. Otherwise, add an intermediate branch instruction to a branch.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00271">271</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### getCombinedIndex() {#ab524260c1fdfc45ca8c2b7ade897fafe}

<MemberDefinition
  prototype={<>unsigned ARMConstantIslands::getCombinedIndex (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00255">255</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### getCPEAlign() {#a58eb0c9489392e69edfdab54bb9a2fba}

<MemberDefinition
  prototype={<>Align ARMConstantIslands::getCPEAlign (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI)</>}>
getCPEAlign - Returns the required alignment of the constant pool entry represented by CPEMI.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00249">249</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### getUserOffset() {#af7146125ff6a881a6b19fab8690e0091}

<MemberDefinition
  prototype={<>unsigned ARMConstantIslands::getUserOffset (CPUser &amp; U) const</>}>
getUserOffset - Compute the offset of U.MI as seen by the hardware displacement computation.

Update U.KnownAlignment to match its current basic block location.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00283">283</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### handleConstantPoolUser() {#abdd480ce7b8dd317463fd4c3a73316fb}

<MemberDefinition
  prototype="bool ARMConstantIslands::handleConstantPoolUser (unsigned CPUserIndex, bool CloserWater)">
handleConstantPoolUser - Analyze the specified user, checking to see if it is out-of-range.

If so, pick up the constant pool value and move it some place in-range. Return true if we changed any addresses (thus must run another pass of branch lengthening), false otherwise.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00261">261</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### initializeFunctionInfo() {#aed78d2699a9d157c7ad08ae78fc48e14}

<MemberDefinition
  prototype={<>void ARMConstantIslands::initializeFunctionInfo (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; &gt; &amp; CPEMIs)</>}>
initializeFunctionInfo - Do the initial scan of the function, building up information about the sizes of each block, the location of all the water, and finding all of the constant pool users.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00251">251</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isCPEntryInRange() {#a015406c9be05ba875b6a6607a7b0d33f}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::isCPEntryInRange (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; MI, unsigned UserOffset, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI, unsigned Disp, bool NegOk, bool DoDump=false)</>}>
isCPEntryInRange - Returns true if the distance between specific MI and specific ConstPool entry instruction can fit in MI&#39;s displacement field.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00264">264</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isOffsetInRange() {#a9276d20e7ad345d71593d7995720afae}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isOffsetInRange (unsigned UserOffset, unsigned TrialOffset, unsigned Disp, bool NegativeOK, bool IsSoImm=false)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00287">287</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isOffsetInRange() {#a98229bab8b53875bace6cdd43c0525fe}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isOffsetInRange (unsigned UserOffset, unsigned TrialOffset, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> CPUser &amp; U)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00289">289</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isWaterInRange() {#a22a6249ea0ff228890a3b2e326f8fe71}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::isWaterInRange (unsigned UserOffset, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Water, CPUser &amp; U, unsigned &amp; Growth)</>}>
isWaterInRange - Returns true if a CPE placed after the specified Water (a basic block) will be in range for the specific MI.

Compute how much the function will grow by inserting a CPE after Water.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00267">267</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### optimizeThumb2Branches() {#a7dcb1f3b15c4c0e6501c2a28d78908cf}

<MemberDefinition
  prototype="bool ARMConstantIslands::optimizeThumb2Branches ()">

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00273">273</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### optimizeThumb2Instructions() {#a9beafe176b49d8fd46daab6faca8ef02}

<MemberDefinition
  prototype="bool ARMConstantIslands::optimizeThumb2Instructions ()">

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00272">272</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### optimizeThumb2JumpTables() {#abad3b14f15be6b5e8dc1b4826f119696}

<MemberDefinition
  prototype="bool ARMConstantIslands::optimizeThumb2JumpTables ()">
optimizeThumb2JumpTables - <a href="/docs/api/classes/llvm/use">Use</a> tbb / tbh instructions to generate smaller jumptables when it&#39;s possible.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00278">278</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### preserveBaseRegister() {#a0e5a435a047ef3f277eec100c1ecf031}

<MemberDefinition
  prototype={<>bool ARMConstantIslands::preserveBaseRegister (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; JumpMI, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; LEAMI, unsigned &amp; DeadSize, bool &amp; CanDeleteLEA, bool &amp; BaseRegKill)</>}>
While trying to form a TBB/TBH instruction, we may (if the table doesn&#39;t immediately follow the BR&#95;JT) need access to the start of the jump-table.

We know one instruction that produces such a register; this function works out whether that definition can be preserved to the BR&#95;JT, possibly by removing an intervening addition (which is usually needed to calculate the actual entry to jump to).

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00275">275</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### removeDeadCPEMI() {#aa2fe1bbc38cd8de84461690fab233e9e}

<MemberDefinition
  prototype={<>void ARMConstantIslands::removeDeadCPEMI (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; CPEMI)</>}>
removeDeadCPEMI - Remove a dead constant pool entry instruction.

Update sizes and offsets of impacted basic blocks.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00262">262</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### removeUnusedCPEntries() {#a8bda926b4776787d25d7b0a0112f0dfc}

<MemberDefinition
  prototype="bool ARMConstantIslands::removeUnusedCPEntries ()">
removeUnusedCPEntries - Remove constant pool entries whose refcounts are zero.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00263">263</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### reorderThumb2JumpTables() {#a44e9766216f49ba8b940fbb7c91abb78}

<MemberDefinition
  prototype="bool ARMConstantIslands::reorderThumb2JumpTables ()">
reorderThumb2JumpTables - Adjust the function&#39;s block layout to ensure that jump tables always branch forwards, since that&#39;s what tbb and tbh need.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00274">274</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### scanFunctionJumpTables() {#a4995445c7a400cc68dc2e59587e68b7d}

<MemberDefinition
  prototype="void ARMConstantIslands::scanFunctionJumpTables ()">
scanFunctionJumpTables - Do a scan of the function, building up information about the sizes of each block and the locations of all the jump tables.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00250">250</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### splitBlockBeforeInstr() {#a2d0ff01e9af545b83667a6f3b1a309a3}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; ARMConstantIslands::splitBlockBeforeInstr (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; MI)</>}>
Split the basic block containing MI into two blocks, which are joined by an unconditional branch.

Update data structures and renumber blocks to account for this change and returns the newly created block.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00252">252</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### updateForInsertedWaterBlock() {#ae9ee57208388fce44d1de2773ba04f75}

<MemberDefinition
  prototype={<>void ARMConstantIslands::updateForInsertedWaterBlock (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; NewBB)</>}>
updateForInsertedWaterBlock - When a block is newly inserted into the machine function, it upsets all of the block numbers.

Renumber the blocks and update the arrays that parallel this numbering.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00253">253</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### verify() {#afaf72e81e912fc9c1a2d7913ac48d670}

<MemberDefinition
  prototype="void ARMConstantIslands::verify ()">
verify - check BBOffsets, BBSizes, alignment of islands

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00285">285</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AFI {#a42aca0a2345c49cd96313d23761c915e}

<MemberDefinition
  prototype={<>ARMFunctionInfo&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::AFI</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00216">216</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### BBUtils {#a9eb99cca93ab051541c42391046d9daf}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;ARMBasicBlockUtils&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::BBUtils = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00103">103</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### BlockJumpTableRefCount {#a16ed371a9d5e8b194d6402fe0c699cdc}

<MemberDefinition
  prototype={<>DenseMap&lt;const MachineBasicBlock &#42;, int&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::BlockJumpTableRefCount</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00187">187</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### CPEntries {#a58a03308500573324cb3619b9e8f567d}

<MemberDefinition
  prototype={<>std::vector&lt;std::vector&lt;CPEntry&gt; &gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::CPEntries</>}>
CPEntries - Keep track of all of the constant pool entry machine instructions.

For each original constpool index (i.e. those that existed upon entry to this pass), it keeps a vector of entries. Original elements are cloned as we go along; the clones are put in the vector of the original element, but have distinct CPIs.

The first half of CPEntries contains generic constants, the second half contains jump tables. <a href="/docs/api/classes/llvm/use">Use</a> getCombinedIndex on a generic CPEMI to look up which vector it will be in here.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00176">176</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### CPUsers {#a26d4c5e9c9ef1d2abbb92300b5be8c38}

<MemberDefinition
  prototype={<>std::vector&lt;CPUser&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::CPUsers</>}>
CPUsers - Keep track of all of the machine instructions that use various constant pools and their max displacement.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00153">153</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### DT {#a72802551596a33d2c23777777622bbb6}

<MemberDefinition
  prototype={<>MachineDominatorTree&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::DT = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00217">217</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### ImmBranches {#abd3dee94f255a59ef39503608f99c8a7}

<MemberDefinition
  prototype={<>std::vector&lt;ImmBranch&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::ImmBranches</>}>
ImmBranches - Keep track of all the immediate branch instructions.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00204">204</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isPositionIndependentOrROPI {#aceff4ac3539f2c9850610445e7176758}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isPositionIndependentOrROPI</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00221">221</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isThumb {#a38178ec34aae8177faa51ec6fcc3fa3c}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isThumb</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00218">218</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isThumb1 {#ab5ca62ffd88a506f49d21cbac3f02015}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isThumb1</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00219">219</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### isThumb2 {#aa7404870660d9bb7680f20e6a9d94313}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::isThumb2</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00220">220</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### JumpTableEntryIndices {#a28a2f6500d0e72e0bc875c66ab426533}

<MemberDefinition
  prototype={<>DenseMap&lt;int, int&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::JumpTableEntryIndices</>}>
Maps a JT index to the offset in CPEntries containing copies of that table.

The equivalent map for a CONSTPOOL&#95;ENTRY is the identity.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00180">180</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### JumpTableUserIndices {#aae272594f35c002c85edb799023a3245}

<MemberDefinition
  prototype={<>DenseMap&lt;int, int&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::JumpTableUserIndices</>}>
Maps a JT index to the LEA that actually uses the index to calculate its base address.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00184">184</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### MCP {#ab0dbb8974ac506fa487d4dde50a93a3e}

<MemberDefinition
  prototype={<>MachineConstantPool&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::MCP</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00213">213</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### MF {#a7514c1eca73b9986376c81388f147e90}

<MemberDefinition
  prototype={<>MachineFunction&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::MF</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00212">212</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### NewWaterList {#a5bcaaefb0325dd55841218c2b401a430}

<MemberDefinition
  prototype={<>SmallSet&lt;MachineBasicBlock&#42;, 4&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::NewWaterList</>}>
NewWaterList - The subset of WaterList that was created since the previous iteration by inserting unconditional branches.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00112">112</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### PushPopMIs {#aff8d08e657e6ed9c0c3ca1b1c179ac2c}

<MemberDefinition
  prototype={<>SmallVector&lt;MachineInstr&#42;, 4&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::PushPopMIs</>}>
PushPopMIs - Keep track of all the Thumb push / pop instructions.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00207">207</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### STI {#a17b3557c0c6fb8199fc5aba0e0c95005}

<MemberDefinition
  prototype={<>const ARMSubtarget&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::STI</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00215">215</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### T2JumpTables {#ab52de6115c0eb43c179e676c824715ac}

<MemberDefinition
  prototype={<>SmallVector&lt;MachineInstr&#42;, 4&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::T2JumpTables</>}>
T2JumpTables - Keep track of all the Thumb2 jumptable instructions.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00210">210</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### TII {#a3bcf2a90f5b140ee4022487e495223bb}

<MemberDefinition
  prototype={<>const ARMBaseInstrInfo&#42; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::TII</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00214">214</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

### WaterList {#a610f64f4d5215f773f3604360c5c3639}

<MemberDefinition
  prototype={<>std::vector&lt;MachineBasicBlock&#42;&gt; anonymous&#95;namespace&#123;ARMConstantIslandPass.cpp&#125;::ARMConstantIslands::WaterList</>}>
WaterList - A sorted list of basic blocks where islands could be placed (i.e.

blocks that don&#39;t fall through to the following block, due to a return, unreachable, or unconditional branch).

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00108">108</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Attributes

### ID {#a4809f4638bc964aa757bd1b47fff3f2c}

<MemberDefinition
  prototype="char ARMConstantIslands::ID = 0"
  labels = {["static"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp/#l00224">224</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/target/lib/target/arm/armconstantislandpass-cpp">ARMConstantIslandPass.cpp</a></li>
</ul>

</DoxygenPage>
