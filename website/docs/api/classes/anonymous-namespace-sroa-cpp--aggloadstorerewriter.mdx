---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-sroa-cpp-/aggloadstorerewriter
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AggLoadStoreRewriter` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Visitor to rewrite aggregate loads and stores as scalar. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{SROA.cpp}::AggLoadStoreRewriter</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/instvisitor">InstVisitor&lt;SubClass, RetTy&gt;</a></>}>
Base class for instruction visitors. <a href="/docs/api/classes/llvm/instvisitor/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="#a784e0c8f27c7cc40d3b741bef27e153d">InstVisitor&lt; AggLoadStoreRewriter, bool &gt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a3a9355e98cbb59191294e139660c5bc6">AggLoadStoreRewriter</a> (const DataLayout &amp;DL, IRBuilderTy &amp;IRB)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a645e9f8a21fc4e44f9bb587edc5f0ad4">rewrite</a> (Instruction &amp;I)</>}>
Rewrite loads and stores through a pointer and all pointers derived from it. <a href="#a645e9f8a21fc4e44f9bb587edc5f0ad4">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a8daa88e8adc431ebead69d072c61f299">enqueueUsers</a> (Instruction &amp;I)</>}>
Enqueue all the users of the given instruction for further processing. <a href="#a8daa88e8adc431ebead69d072c61f299">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a84ec1003a54449307c8ed4c02d285af2">unfoldGEPPhi</a> (GetElementPtrInst &amp;GEPI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a05254ecbdcac17bddd8f653cbedeb89e">unfoldGEPSelect</a> (GetElementPtrInst &amp;GEPI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a638e985ccb572825fea9892a34c43ddf">visitAddrSpaceCastInst</a> (AddrSpaceCastInst &amp;ASC)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8e8d5b04dbcc7eeb702ceae3ebb6641e">visitBitCastInst</a> (BitCastInst &amp;BC)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8d406eddf15bdc7f9f59b70ffd3b8d47">visitGetElementPtrInst</a> (GetElementPtrInst &amp;GEPI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0c191f217bd3f8502bc82041be27e7e3">visitInstruction</a> (Instruction &amp;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a09ae2e56b25af4c7ca65e74feee2f183">visitLoadInst</a> (LoadInst &amp;LI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aeb2cc16146d21d7798be4c89ccd868dc">visitPHINode</a> (PHINode &amp;PN)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1c8529ab59ae6ffc101c9ed525d18e50">visitSelectInst</a> (SelectInst &amp;SI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ae62cc16b538eb6b7b5f3d761967845ee">visitStoreInst</a> (StoreInst &amp;SI)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#a88f0d4e06b47c8e6c443a252b6f67afc">DL</a></>}>
Used to calculate offsets, and hence alignment, of subobjects. <a href="#a88f0d4e06b47c8e6c443a252b6f67afc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/anonymous-sroa-cpp-/#a25b3d08de3386c79fa6533b6bd2485de">IRBuilderTy</a> &amp;</>}
  name={<><a href="#a92a96f35d252fa7f90aae7aa99af20e3">IRB</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/use">Use</a> &#42;, 8 &gt;</>}
  name={<><a href="#ad85ae1cdc3ac6ca0eb80c0f85391effa">Queue</a></>}>
Queue of pointer uses to analyze and potentially rewrite. <a href="#ad85ae1cdc3ac6ca0eb80c0f85391effa">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/use">Use</a> &#42;</>}
  name={<><a href="#a92a80a4949041444b3e580e5c1597018">U</a> = nullptr</>}>
The current pointer use being rewritten. <a href="#a92a80a4949041444b3e580e5c1597018">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/user">User</a> &#42;, 8 &gt;</>}
  name={<><a href="#ae38dc5a215859eaf9c74b78c1291cd72">Visited</a></>}>
Set to prevent us from cycling with phi nodes and loops. <a href="#ae38dc5a215859eaf9c74b78c1291cd72">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Visitor to rewrite aggregate loads and stores as scalar.

This pass aggressively rewrites all aggregate loads and stores on a particular pointer (or any pointer derived from it which we can identify) with scalar loads and stores.

Definition at line 3685 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.

<SectionDefinition>

## Friends

### InstVisitor&lt; AggLoadStoreRewriter, bool &gt; {#a784e0c8f27c7cc40d3b741bef27e153d}

<MemberDefinition
  prototype={<>friend class <a href="/docs/api/classes/llvm/instvisitor">InstVisitor</a>&lt; <a href="/docs/api/classes/anonymous-namespace-sroa-cpp-/aggloadstorerewriter">AggLoadStoreRewriter</a>, bool &gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03652">3652</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### AggLoadStoreRewriter() {#a3a9355e98cbb59191294e139660c5bc6}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::AggLoadStoreRewriter (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; DL, <a href="/docs/api/namespaces/anonymous-sroa-cpp-/#a25b3d08de3386c79fa6533b6bd2485de">IRBuilderTy</a> &amp; IRB)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03705">3705</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### rewrite() {#a645e9f8a21fc4e44f9bb587edc5f0ad4}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::rewrite (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I)</>}
  labels = {["inline"]}>
Rewrite loads and stores through a pointer and all pointers derived from it.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03710">3710</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### enqueueUsers() {#a8daa88e8adc431ebead69d072c61f299}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::enqueueUsers (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I)</>}
  labels = {["inline"]}>
Enqueue all the users of the given instruction for further processing.

This uses a set to de-duplicate users.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03724">3724</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### unfoldGEPPhi() {#a84ec1003a54449307c8ed4c02d285af2}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::unfoldGEPPhi (<a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &amp; GEPI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l04065">4065</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### unfoldGEPSelect() {#a05254ecbdcac17bddd8f653cbedeb89e}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::unfoldGEPSelect (<a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &amp; GEPI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03992">3992</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitAddrSpaceCastInst() {#a638e985ccb572825fea9892a34c43ddf}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitAddrSpaceCastInst (<a href="/docs/api/classes/llvm/addrspacecastinst">AddrSpaceCastInst</a> &amp; ASC)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03983">3983</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitBitCastInst() {#a8e8d5b04dbcc7eeb702ceae3ebb6641e}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitBitCastInst (<a href="/docs/api/classes/llvm/bitcastinst">BitCastInst</a> &amp; BC)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03978">3978</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitGetElementPtrInst() {#a8d406eddf15bdc7f9f59b70ffd3b8d47}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitGetElementPtrInst (<a href="/docs/api/classes/llvm/getelementptrinst">GetElementPtrInst</a> &amp; GEPI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l04157">4157</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitInstruction() {#a0c191f217bd3f8502bc82041be27e7e3}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitInstruction (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03731">3731</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitLoadInst() {#a09ae2e56b25af4c7ca65e74feee2f183}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitLoadInst (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &amp; LI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03885">3885</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitPHINode() {#aeb2cc16146d21d7798be4c89ccd868dc}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitPHINode (<a href="/docs/api/classes/llvm/phinode">PHINode</a> &amp; PN)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l04168">4168</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitSelectInst() {#a1c8529ab59ae6ffc101c9ed525d18e50}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitSelectInst (<a href="/docs/api/classes/llvm/selectinst">SelectInst</a> &amp; SI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l04173">4173</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### visitStoreInst() {#ae62cc16b538eb6b7b5f3d761967845ee}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::visitStoreInst (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &amp; SI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03958">3958</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### DL {#a88f0d4e06b47c8e6c443a252b6f67afc}

<MemberDefinition
  prototype={<>const DataLayout&amp; anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::DL</>}>
Used to calculate offsets, and hence alignment, of subobjects.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03700">3700</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### IRB {#a92a96f35d252fa7f90aae7aa99af20e3}

<MemberDefinition
  prototype={<>IRBuilderTy&amp; anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::IRB</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03702">3702</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### Queue {#ad85ae1cdc3ac6ca0eb80c0f85391effa}

<MemberDefinition
  prototype={<>SmallVector&lt;Use &#42;, 8&gt; anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::Queue</>}>
Queue of pointer uses to analyze and potentially rewrite.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03690">3690</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### U {#a92a80a4949041444b3e580e5c1597018}

<MemberDefinition
  prototype={<>Use&#42; anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::U = nullptr</>}>
The current pointer use being rewritten.

This is used to dig up the used value (as opposed to the user).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03697">3697</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

### Visited {#ae38dc5a215859eaf9c74b78c1291cd72}

<MemberDefinition
  prototype={<>SmallPtrSet&lt;User &#42;, 8&gt; anonymous&#95;namespace&#123;SROA.cpp&#125;::AggLoadStoreRewriter::Visited</>}>
Set to prevent us from cycling with phi nodes and loops.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp/#l03693">3693</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/sroa-cpp">SROA.cpp</a></li>
</ul>

</DoxygenPage>
