---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-loopidiomrecognize-cpp-/loopidiomrecognize
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import Link from '@docusaurus/Link'
import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import EnumerationList from '@xpack/docusaurus-plugin-doxygen/components/EnumerationList'
import EnumerationListItem from '@xpack/docusaurus-plugin-doxygen/components/EnumerationListItem'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `LoopIdiomRecognize` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class anonymous_namespace{LoopIdiomRecognize.cpp}::LoopIdiomRecognize</CodeBlock>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a29b8eff2b3b9b4da3888f13a21513b6c">StoreList</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42;, 8 &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  type="using"
  name={<><a href="#af20b96e4f40186e8f6ef6b3eccbab286">StoreListMap</a> = <a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/smallvector">StoreList</a> &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Enumerations Index

<MembersIndex>

<MembersIndexItem
  type="enum"
  name={<>:  &#123; <a href="#a75361fb99b7841763aa75a4001ec7ab3">...</a> &#125;</>}>
Return code for isLegalStore() <a href="#a75361fb99b7841763aa75a4001ec7ab3">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#afb3715f0d190af3ef4d9d01a3a3301a5">LoopIdiomRecognize</a> (AliasAnalysis &#42;AA, DominatorTree &#42;DT, LoopInfo &#42;LI, ScalarEvolution &#42;SE, TargetLibraryInfo &#42;TLI, const TargetTransformInfo &#42;TTI, MemorySSA &#42;MSSA, const DataLayout &#42;DL, OptimizationRemarkEmitter &amp;ORE)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename MemInst&gt;</>}
  type="bool"
  name={<><a href="#acb7fb9d90a0af01462f9b0ce7b3e6414">processLoopMemIntrinsic</a> (BasicBlock &#42;BB, bool(LoopIdiomRecognize::&#42;Processor)(MemInst &#42;, const SCEV &#42;), const SCEV &#42;BECount)</>}>
processLoopMemIntrinsic - Template function for calling different processor functions based on mem intrinsic type. <a href="#acb7fb9d90a0af01462f9b0ce7b3e6414">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aea65b347936a4be656b8ac3fe1ecd91b">runOnLoop</a> (Loop &#42;L)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#ae457f1cf451ed893666c4a384e58f8e5">AliasAnalysis</a> &#42;</>}
  name={<><a href="#a139bdb47cfd18bdaf70d20ae04c50c49">AA</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2e4c01a95beba5c634af947f6177d22a">ApplyCodeSizeHeuristics</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/loop">Loop</a> &#42;</>}
  name={<><a href="#af69a8f205edd4fffea7f59a20b5c927d">CurLoop</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &#42;</>}
  name={<><a href="#a363323ffbd14afca1411307d32840f65">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42;</>}
  name={<><a href="#aea8e9f104b0126fa829a009a67c7d032">DT</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9b4356a41df5d1829479bf4ce2f75850">HasMemcpy</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ae202e637722ba93c1b412e3bfa47a5ed">HasMemset</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#afa6e12b90c138e3f38c71f25a7d6a79d">HasMemsetPattern</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &#42;</>}
  name={<><a href="#a89edd66e4851263f7c0994dfad7e295c">LI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/memoryssaupdater">MemorySSAUpdater</a> &gt;</>}
  name={<><a href="#ac235b0a4e299b80495d4f06339fea662">MSSAU</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/optimizationremarkemitter">OptimizationRemarkEmitter</a> &amp;</>}
  name={<><a href="#a9a73abbc50f54e8f6d7315f88690656b">ORE</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scalarevolution">ScalarEvolution</a> &#42;</>}
  name={<><a href="#a2026ba5cc749095bd64cfa06f5e2994e">SE</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">StoreList</a></>}
  name={<><a href="#a77c3df7a8aedd956a11227240fe8dd6d">StoreRefsForMemcpy</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/mapvector">StoreListMap</a></>}
  name={<><a href="#afc3d027c16268952e2ac1faddd07d5d4">StoreRefsForMemset</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/mapvector">StoreListMap</a></>}
  name={<><a href="#a412c47aa634d71dab2696acabc11b0c5">StoreRefsForMemsetPattern</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;</>}
  name={<><a href="#a7ee3d6bc9f783b84b34cd7934e410390">TLI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &#42;</>}
  name={<><a href="#aa0857a6b4758b9eada7e8abc8db5fd35">TTI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Countable Loop Idiom Handling Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#adb916bc44ce64a8972df511dd55892e3">avoidLIRForMultiBlockLoop</a> (bool IsMemset=false, bool IsLoopMemset=false)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab3f4cecd3207a5a4d257bb533c31229d">collectStores</a> (BasicBlock &#42;BB)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="enum class"
  name={<>:  &#123; <a href="#a89b7d52d136e60a2fa2d24ec8aaa0dd0">...</a> &#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type="LegalStoreKind"
  name={<><a href="#a28bc2565071ffd4274ed4f89058d5ebe">isLegalStore</a> (StoreInst &#42;SI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2280da390e751288eef1675632d8aacc">processLoopMemCpy</a> (MemCpyInst &#42;MCI, const SCEV &#42;BECount)</>}>
processLoopMemCpy - See if this memcpy can be promoted to a large memcpy <a href="#a2280da390e751288eef1675632d8aacc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename MemInst&gt;</>}
  type="bool"
  name={<><a href="#acb7fb9d90a0af01462f9b0ce7b3e6414">processLoopMemIntrinsic</a> (BasicBlock &#42;BB, bool(LoopIdiomRecognize::&#42;Processor)(MemInst &#42;, const SCEV &#42;), const SCEV &#42;BECount)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7b10f78f41f47468a414f74397615600">processLoopMemSet</a> (MemSetInst &#42;MSI, const SCEV &#42;BECount)</>}>
processLoopMemSet - See if this memset can be promoted to a large memset. <a href="#a7b10f78f41f47468a414f74397615600">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a83b042f743a3dedea0e7f6b82d688dd4">processLoopStoreOfLoopLoad</a> (StoreInst &#42;SI, const SCEV &#42;BECount)</>}>
If the stored value is a strided load in the same loop with the same stride this may be transformable into a memcpy. <a href="#a83b042f743a3dedea0e7f6b82d688dd4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a87a81cc6aeeb1ae620828353728440a0">processLoopStoreOfLoopLoad</a> (Value &#42;DestPtr, Value &#42;SourcePtr, const SCEV &#42;StoreSize, MaybeAlign StoreAlign, MaybeAlign LoadAlign, Instruction &#42;TheStore, Instruction &#42;TheLoad, const SCEVAddRecExpr &#42;StoreEv, const SCEVAddRecExpr &#42;LoadEv, const SCEV &#42;BECount)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4c7d6dddd1e8aee6d463dfa0242c031b">processLoopStores</a> (SmallVectorImpl&lt; StoreInst &#42; &gt; &amp;SL, const SCEV &#42;BECount, ForMemset For)</>}>
See if this store(s) can be promoted to a memset. <a href="#a4c7d6dddd1e8aee6d463dfa0242c031b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ac611614fe5c19a5a2129a6957e24c588">processLoopStridedStore</a> (Value &#42;DestPtr, const SCEV &#42;StoreSizeSCEV, MaybeAlign StoreAlignment, Value &#42;StoredVal, Instruction &#42;TheStore, SmallPtrSetImpl&lt; Instruction &#42; &gt; &amp;Stores, const SCEVAddRecExpr &#42;Ev, const SCEV &#42;BECount, bool IsNegStride, bool IsLoopMemset=false)</>}>
processLoopStridedStore - We see a strided store of some value. <a href="#ac611614fe5c19a5a2129a6957e24c588">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6f92594f9ef6c3ab9d3ca1c3bb695de1">runOnCountableLoop</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a499d9e51f467f032e27f43844eeb54e6">runOnLoopBlock</a> (BasicBlock &#42;BB, const SCEV &#42;BECount, SmallVectorImpl&lt; BasicBlock &#42; &gt; &amp;ExitBlocks)</>}>
runOnLoopBlock - <a href="/docs/api/classes/llvm/sys/process">Process</a> the specified block, which lives in a counted loop with the specified backedge count. <a href="#a499d9e51f467f032e27f43844eeb54e6">More...</a>
</MembersIndexItem>

</MembersIndex>

## Noncountable Loop Idiom Handling Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a29bdcbf31015ece1cb10f6f1be8e0076">insertFFSIfProfitable</a> (Intrinsic::ID IntrinID, Value &#42;InitX, Instruction &#42;DefX, PHINode &#42;CntPhi, Instruction &#42;CntInst)</>}>
Convert CTLZ / CTTZ idiom loop into countable loop. <a href="#a29bdcbf31015ece1cb10f6f1be8e0076">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a37b5618f74ab5d7ef3abd86715294259">isProfitableToInsertFFS</a> (Intrinsic::ID IntrinID, Value &#42;InitX, bool ZeroCheck, size&#95;t CanonicalSize)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9779bd5a777ff9d04623049f17ce9773">recognizeAndInsertFFS</a> ()</>}>
Recognize CTLZ or CTTZ idiom in a non-countable loop and convert the loop to countable (with CTLZ / CTTZ trip count). <a href="#a9779bd5a777ff9d04623049f17ce9773">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7881f680085f56f7de7acd075432c457">recognizePopcount</a> ()</>}>
Recognizes a population count idiom in a non-countable loop. <a href="#a7881f680085f56f7de7acd075432c457">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aba722b2511a0081402bc924560bc0086">recognizeShiftUntilBitTest</a> ()</>}>
Look for the following loop: <a href="#aba722b2511a0081402bc924560bc0086">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#acb83a5d1bd68debe05462abebe7b6773">recognizeShiftUntilLessThan</a> ()</>}>
Find First Set: ctlz or cttz. <a href="#acb83a5d1bd68debe05462abebe7b6773">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a43a946a769670a74f08a5b3238c4af87">recognizeShiftUntilZero</a> ()</>}>
Look for the following loop: <a href="#a43a946a769670a74f08a5b3238c4af87">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa16496dfcbed0f46599d9589ffaac737">runOnNoncountableLoop</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a98b87e9b551ecc3680ca6848beb750c1">transformLoopToCountable</a> (Intrinsic::ID IntrinID, BasicBlock &#42;PreCondBB, Instruction &#42;CntInst, PHINode &#42;CntPhi, Value &#42;Var, Instruction &#42;DefX, const DebugLoc &amp;DL, bool ZeroCheck, bool IsCntPhiUsedOutsideLoop, bool InsertSub=false)</>}>
Transform the following loop (Using CTLZ, CTTZ is similar): loop: CntPhi = PHI &#91;Cnt0, CntInst&#93; PhiX = PHI &#91;InitX, DefX&#93; CntInst = CntPhi + 1 DefX = PhiX &gt;&gt; 1 LOOP&#95;BODY Br: loop if (DefX != 0) Use(CntPhi) or Use(CntInst) <a href="#a98b87e9b551ecc3680ca6848beb750c1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a684b7f3a233729d853dd3e67ef3a1753">transformLoopToPopcount</a> (BasicBlock &#42;PreCondBB, Instruction &#42;CntInst, PHINode &#42;CntPhi, Value &#42;Var)</>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 137 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.

<SectionDefinition>

## Private Member Typedefs

### StoreList {#a29b8eff2b3b9b4da3888f13a21513b6c}

<MemberDefinition
  prototype={<>using anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::StoreList =  SmallVector&lt;StoreInst &#42;, 8&gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00165">165</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### StoreListMap {#af20b96e4f40186e8f6ef6b3eccbab286}

<MemberDefinition
  prototype={<>using anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::StoreListMap =  MapVector&lt;Value &#42;, StoreList&gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00166">166</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Enumerations

### enum  {#a75361fb99b7841763aa75a4001ec7ab3}

<MemberDefinition
  prototype={<>enum anonymous_namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::LegalStoreKind </>}>
Return code for isLegalStore()

<EnumerationList title="Enumeration values">

<Link id="a75361fb99b7841763aa75a4001ec7ab3a59939d4964fc51f6532a0487b3a05d66" />
<EnumerationListItem name="None">
 (= 0)
</EnumerationListItem>

<Link id="a75361fb99b7841763aa75a4001ec7ab3a305e8fa2823c0130773c0a840e76c00d" />
<EnumerationListItem name="Memset">

</EnumerationListItem>

<Link id="a75361fb99b7841763aa75a4001ec7ab3a3cfba7c09bf109fc01f966fb7f972e0b" />
<EnumerationListItem name="MemsetPattern">

</EnumerationListItem>

<Link id="a75361fb99b7841763aa75a4001ec7ab3aa4df2e0ad2e0ef172ef64723835f3172" />
<EnumerationListItem name="Memcpy">

</EnumerationListItem>

<Link id="a75361fb99b7841763aa75a4001ec7ab3a0c0048af29ecc55596c12c3b7cb181dd" />
<EnumerationListItem name="UnorderedAtomicMemcpy">

</EnumerationListItem>

<Link id="a75361fb99b7841763aa75a4001ec7ab3a734ab5c14812c44a590622c1f6092319" />
<EnumerationListItem name="DontUse">

</EnumerationListItem>

</EnumerationList>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00176">176</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### LoopIdiomRecognize() {#afb3715f0d190af3ef4d9d01a3a3301a5}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::LoopIdiomRecognize (<a href="/docs/api/namespaces/llvm/#ae457f1cf451ed893666c4a384e58f8e5">AliasAnalysis</a> &#42; AA, <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42; DT, <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &#42; LI, <a href="/docs/api/classes/llvm/scalarevolution">ScalarEvolution</a> &#42; SE, <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42; TLI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &#42; TTI, <a href="/docs/api/classes/llvm/memoryssa">MemorySSA</a> &#42; MSSA, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &#42; DL, <a href="/docs/api/classes/llvm/optimizationremarkemitter">OptimizationRemarkEmitter</a> &amp; ORE)</>}
  labels = {["inline", "explicit"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00151">151</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### processLoopMemIntrinsic() {#acb7fb9d90a0af01462f9b0ce7b3e6414}

<MemberDefinition
  template={<>template &lt;typename MemInst&gt;</>}
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::processLoopMemIntrinsic (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, bool(LoopIdiomRecognize::&#42;)(MemInst &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42;) Processor, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>
processLoopMemIntrinsic - Template function for calling different processor functions based on mem intrinsic type.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00733">733</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### runOnLoop() {#aea65b347936a4be656b8ac3fe1ecd91b}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::runOnLoop (<a href="/docs/api/classes/llvm/loop">Loop</a> &#42; L)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00162">162</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AA {#a139bdb47cfd18bdaf70d20ae04c50c49}

<MemberDefinition
  prototype={<>AliasAnalysis&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::AA</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00139">139</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### ApplyCodeSizeHeuristics {#a2e4c01a95beba5c634af947f6177d22a}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::ApplyCodeSizeHeuristics</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00147">147</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### CurLoop {#af69a8f205edd4fffea7f59a20b5c927d}

<MemberDefinition
  prototype={<>Loop&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::CurLoop = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00138">138</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### DL {#a363323ffbd14afca1411307d32840f65}

<MemberDefinition
  prototype={<>const DataLayout&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00145">145</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### DT {#aea8e9f104b0126fa829a009a67c7d032}

<MemberDefinition
  prototype={<>DominatorTree&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::DT</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00140">140</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### HasMemcpy {#a9b4356a41df5d1829479bf4ce2f75850}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::HasMemcpy</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00173">173</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### HasMemset {#ae202e637722ba93c1b412e3bfa47a5ed}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::HasMemset</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00171">171</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### HasMemsetPattern {#afa6e12b90c138e3f38c71f25a7d6a79d}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::HasMemsetPattern</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00172">172</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### LI {#a89edd66e4851263f7c0994dfad7e295c}

<MemberDefinition
  prototype={<>LoopInfo&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::LI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00141">141</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### MSSAU {#ac235b0a4e299b80495d4f06339fea662}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;MemorySSAUpdater&gt; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::MSSAU</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00148">148</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### ORE {#a9a73abbc50f54e8f6d7315f88690656b}

<MemberDefinition
  prototype={<>OptimizationRemarkEmitter&amp; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::ORE</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00146">146</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### SE {#a2026ba5cc749095bd64cfa06f5e2994e}

<MemberDefinition
  prototype={<>ScalarEvolution&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::SE</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00142">142</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### StoreRefsForMemcpy {#a77c3df7a8aedd956a11227240fe8dd6d}

<MemberDefinition
  prototype={<>StoreList anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::StoreRefsForMemcpy</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00170">170</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### StoreRefsForMemset {#afc3d027c16268952e2ac1faddd07d5d4}

<MemberDefinition
  prototype={<>StoreListMap anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::StoreRefsForMemset</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00168">168</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### StoreRefsForMemsetPattern {#a412c47aa634d71dab2696acabc11b0c5}

<MemberDefinition
  prototype={<>StoreListMap anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::StoreRefsForMemsetPattern</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00169">169</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### TLI {#a7ee3d6bc9f783b84b34cd7934e410390}

<MemberDefinition
  prototype={<>TargetLibraryInfo&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::TLI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00143">143</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### TTI {#aa0857a6b4758b9eada7e8abc8db5fd35}

<MemberDefinition
  prototype={<>const TargetTransformInfo&#42; anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::TTI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00144">144</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Countable Loop Idiom Handling

### avoidLIRForMultiBlockLoop {#adb916bc44ce64a8972df511dd55892e3}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::avoidLIRForMultiBlockLoop (bool IsMemset=false, bool IsLoopMemset=false)">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00221">221</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### collectStores {#ab3f4cecd3207a5a4d257bb533c31229d}

<MemberDefinition
  prototype={<>void LoopIdiomRecognize::collectStores (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00193">193</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### enum class  {#a89b7d52d136e60a2fa2d24ec8aaa0dd0}

<MemberDefinition
  prototype={<>enum class anonymous_namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::ForMemset </>}
 labels = {["strong"]}>

<EnumerationList title="Enumeration values">

<Link id="a89b7d52d136e60a2fa2d24ec8aaa0dd0abafd7322c6e97d25b6299b5d6fe8920b" />
<EnumerationListItem name="No">

</EnumerationListItem>

<Link id="a89b7d52d136e60a2fa2d24ec8aaa0dd0a93cba07454f06a4a960172bbd6e2a435" />
<EnumerationListItem name="Yes">

</EnumerationListItem>

</EnumerationList>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00195">195</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### isLegalStore {#a28bc2565071ffd4274ed4f89058d5ebe}

<MemberDefinition
  prototype={<>LoopIdiomRecognize::LegalStoreKind LoopIdiomRecognize::isLegalStore (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; SI)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00194">194</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopMemCpy {#a2280da390e751288eef1675632d8aacc}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::processLoopMemCpy (<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; MCI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>
processLoopMemCpy - See if this memcpy can be promoted to a large memcpy

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00204">204</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopMemIntrinsic {#acb7fb9d90a0af01462f9b0ce7b3e6414}

<MemberDefinition
  template={<>template &lt;typename MemInst&gt;</>}
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::processLoopMemIntrinsic (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, bool(LoopIdiomRecognize::&#42;)(MemInst &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42;) Processor, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00200">200</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopMemSet {#a7b10f78f41f47468a414f74397615600}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::processLoopMemSet (<a href="/docs/api/classes/llvm/memsetinst">MemSetInst</a> &#42; MSI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>
processLoopMemSet - See if this memset can be promoted to a large memset.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00205">205</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopStoreOfLoopLoad {#a83b042f743a3dedea0e7f6b82d688dd4}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::processLoopStoreOfLoopLoad (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; SI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>
If the stored value is a strided load in the same loop with the same stride this may be transformable into a memcpy.

This kicks in for stuff like for (i) A&#91;i&#93; = B&#91;i&#93;;

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00213">213</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopStoreOfLoopLoad {#a87a81cc6aeeb1ae620828353728440a0}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopIdiomRecognize.cpp&#125;::LoopIdiomRecognize::processLoopStoreOfLoopLoad (<a href="/docs/api/classes/llvm/value">Value</a> &#42; DestPtr, <a href="/docs/api/classes/llvm/value">Value</a> &#42; SourcePtr, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; StoreSize, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> StoreAlign, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> LoadAlign, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; TheStore, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; TheLoad, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scevaddrecexpr">SCEVAddRecExpr</a> &#42; StoreEv, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scevaddrecexpr">SCEVAddRecExpr</a> &#42; LoadEv, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00214">214</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopStores {#a4c7d6dddd1e8aee6d463dfa0242c031b}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::processLoopStores (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; &gt; &amp; SL, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount, ForMemset For)</>}>
See if this store(s) can be promoted to a memset.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00196">196</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### processLoopStridedStore {#ac611614fe5c19a5a2129a6957e24c588}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::processLoopStridedStore (<a href="/docs/api/classes/llvm/value">Value</a> &#42; DestPtr, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; StoreSizeSCEV, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> StoreAlignment, <a href="/docs/api/classes/llvm/value">Value</a> &#42; StoredVal, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; TheStore, <a href="/docs/api/classes/llvm/smallptrsetimpl">SmallPtrSetImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; Stores, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scevaddrecexpr">SCEVAddRecExpr</a> &#42; Ev, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount, bool IsNegStride, bool IsLoopMemset=false)</>}>
processLoopStridedStore - We see a strided store of some value.

If we can transform this into a memset or memset&#95;pattern in the loop preheader, do so.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00207">207</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### runOnCountableLoop {#a6f92594f9ef6c3ab9d3ca1c3bb695de1}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::runOnCountableLoop ()">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00189">189</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### runOnLoopBlock {#a499d9e51f467f032e27f43844eeb54e6}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::runOnLoopBlock (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/scev">SCEV</a> &#42; BECount, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; &gt; &amp; ExitBlocks)</>}>
runOnLoopBlock - <a href="/docs/api/classes/llvm/sys/process">Process</a> the specified block, which lives in a counted loop with the specified backedge count.

This block is known to be in the current loop and not in any subloops.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00190">190</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Noncountable Loop Idiom Handling

### insertFFSIfProfitable {#a29bdcbf31015ece1cb10f6f1be8e0076}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::insertFFSIfProfitable (<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrinID, <a href="/docs/api/classes/llvm/value">Value</a> &#42; InitX, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; DefX, <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42; CntPhi, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; CntInst)</>}>
Convert CTLZ / CTTZ idiom loop into countable loop.

If CTLZ / CTTZ inserted as a new trip count returns true; otherwise, returns false.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00235">235</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### isProfitableToInsertFFS {#a37b5618f74ab5d7ef3abd86715294259}

<MemberDefinition
  prototype={<>bool LoopIdiomRecognize::isProfitableToInsertFFS (<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrinID, <a href="/docs/api/classes/llvm/value">Value</a> &#42; InitX, bool ZeroCheck, size&#95;t CanonicalSize)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00233">233</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### recognizeAndInsertFFS {#a9779bd5a777ff9d04623049f17ce9773}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::recognizeAndInsertFFS ()">
Recognize CTLZ or CTTZ idiom in a non-countable loop and convert the loop to countable (with CTLZ / CTTZ trip count).

If CTLZ / CTTZ inserted as a new trip count returns true; otherwise, returns false.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00238">238</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### recognizePopcount {#a7881f680085f56f7de7acd075432c457}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::recognizePopcount ()">
Recognizes a population count idiom in a non-countable loop.

If detected, transforms the relevant code to issue the popcount intrinsic function call, and returns true; otherwise, returns false.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00230">230</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### recognizeShiftUntilBitTest {#aba722b2511a0081402bc924560bc0086}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::recognizeShiftUntilBitTest ()">
Look for the following loop:

<ProgramListing>

<CodeLine><Highlight kind="normal">entry:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %bitmask = shl i32 1, %bitpos</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">loop:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>, %entry &#93;, &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next, %loop &#93;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.bitmasked = and i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr, %bitmask</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.isbitunset = icmp eq i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.bitmasked, 0</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next = shl i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr, 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.isbitunset, label %loop, label %<a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>

</ProgramListing>


And transform it into: 
<ProgramListing>

<CodeLine><Highlight kind="normal">entry:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %bitmask = shl i32 1, %bitpos</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %lowbitmask = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %bitmask, -1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/shuffles/#a6abf8a645bd24dfb42085db9672ac39a">mask</a> = or i32 %lowbitmask, %bitmask</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked = and i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>, %<a href="/docs/api/namespaces/shuffles/#a6abf8a645bd24dfb42085db9672ac39a">mask</a></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.numleadingzeros = call i32 @llvm.ctlz.i32(i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">                                                      i1 </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.numactivebits = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i32 32, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.numleadingzeros</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.leadingonepos = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.numactivebits, -1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %backedgetakencount = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i32 %bitpos, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.masked.leadingonepos</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %tripcount = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %backedgetakencount, 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr = shl i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>, %backedgetakencount</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next = shl i32 %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>, %tripcount</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">loop:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.iv = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; 0, %entry &#93;, &#91; %loop.iv.next, %loop &#93;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.iv.next = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> nuw i32 %loop.iv, 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.ivcheck = icmp eq i32 %loop.iv.next, %tripcount</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %loop.ivcheck, label %<a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>, label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.curr, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i32 &#91; %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9dd4e461268c8034f5c8564e155c67a6">x</a>.next, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>

</ProgramListing>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00247">247</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### recognizeShiftUntilLessThan {#acb83a5d1bd68debe05462abebe7b6773}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::recognizeShiftUntilLessThan ()">
Find First Set: ctlz or cttz.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00239">239</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### recognizeShiftUntilZero {#a43a946a769670a74f08a5b3238c4af87}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::recognizeShiftUntilZero ()">
Look for the following loop:

<ProgramListing>

<CodeLine><Highlight kind="normal">entry:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %start = &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %extraoffset = &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br label %</Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal">.cond</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">loop:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %start, %entry &#93;, &#91; %iv.next, %</Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal">.cond &#93;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %nbits = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> nsw i8 %iv, %extraoffset</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.shifted = &#123;&#123;<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea2db95e8e1a9267b7a1188556b2013b33">l</a>,a&#125;shr,shl&#125; i8 %val, %nbits</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.shifted.iszero = icmp eq i8 %val.shifted, 0</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv.next = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i8 %iv, 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %val.shifted.iszero, label %<a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>, label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %iv, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %nbits.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %nbits, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.shifted.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %val.shifted, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.shifted.iszero.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i1 &#91; %val.shifted.iszero, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv.next.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %iv.next, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>

</ProgramListing>


And transform it into: 
<ProgramListing>

<CodeLine><Highlight kind="normal">entry:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %start = &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %extraoffset = &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.numleadingzeros = call i8 @llvm.ct&#123;<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea2db95e8e1a9267b7a1188556b2013b33">l</a>,t&#125;z.i8(i8 %val, i1 0)</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %val.numactivebits = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i8 8, %val.numleadingzeros</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %extraoffset.neg = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i8 0, %extraoffset</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %tmp = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i8 %val.numactivebits, %extraoffset.neg</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv.final = call i8 @llvm.smax.i8(i8 %tmp, i8 %start)</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.tripcount = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i8 %iv.final, %start</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">loop:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.iv = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; 0, %entry &#93;, &#91; %loop.iv.next, %loop &#93;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.iv.next = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i8 %loop.iv, 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %loop.ivcheck = icmp eq i8 %loop.iv.next, %loop.tripcount</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i8 %loop.iv, %start</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %loop.ivcheck, label %<a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>, label %loop</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/sandboxir/#a64ac61287490361f2183faf1d7639ee9">end</a>:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  %iv.res = <a href="/docs/api/namespaces/llvm/numbers/#a9473b507816be4056a158a41cfb86807">phi</a> i8 &#91; %iv.final, %loop &#93; &lt;...&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &lt;...&gt;</Highlight></CodeLine>

</ProgramListing>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00248">248</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### runOnNoncountableLoop {#aa16496dfcbed0f46599d9589ffaac737}

<MemberDefinition
  prototype="bool LoopIdiomRecognize::runOnNoncountableLoop ()">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00228">228</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### transformLoopToCountable {#a98b87e9b551ecc3680ca6848beb750c1}

<MemberDefinition
  prototype={<>void LoopIdiomRecognize::transformLoopToCountable (<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrinID, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; Preheader, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; CntInst, <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42; CntPhi, <a href="/docs/api/classes/llvm/value">Value</a> &#42; InitX, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; DefX, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> &amp; DL, bool ZeroCheck, bool IsCntPhiUsedOutsideLoop, bool InsertSub=false)</>}>
Transform the following loop (Using CTLZ, CTTZ is similar): loop: CntPhi = PHI &#91;Cnt0, CntInst&#93; PhiX = PHI &#91;InitX, DefX&#93; CntInst = CntPhi + 1 DefX = PhiX &gt;&gt; 1 LOOP&#95;BODY Br: loop if (DefX != 0) Use(CntPhi) or Use(CntInst)

Into: If CntPhi used outside the loop: CountPrev = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth(InitX)</a> - CTLZ(InitX &gt;&gt; 1) Count = CountPrev + 1 else Count = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth(InitX)</a> - CTLZ(InitX) loop: CntPhi = PHI &#91;Cnt0, CntInst&#93; PhiX = PHI &#91;InitX, DefX&#93; PhiCount = PHI &#91;Count, Dec&#93; CntInst = CntPhi + 1 DefX = PhiX &gt;&gt; 1 Dec = PhiCount - 1 LOOP&#95;BODY Br: loop if (Dec != 0) <a href="/docs/api/classes/llvm/use">Use</a>(CountPrev + Cnt0) // Use(CntPhi) or <a href="/docs/api/classes/llvm/use">Use</a>(Count + Cnt0) // Use(CntInst)

If LOOP&#95;BODY is empty the loop will be deleted. If CntInst and DefX are not used in LOOP&#95;BODY they will be removed.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00240">240</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

### transformLoopToPopcount {#a684b7f3a233729d853dd3e67ef3a1753}

<MemberDefinition
  prototype={<>void LoopIdiomRecognize::transformLoopToPopcount (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; PreCondBB, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; CntInst, <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42; CntPhi, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Var)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp/#l00231">231</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopidiomrecognize-cpp">LoopIdiomRecognize.cpp</a></li>
</ul>

</DoxygenPage>
