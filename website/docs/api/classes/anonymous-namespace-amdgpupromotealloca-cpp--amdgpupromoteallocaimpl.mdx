---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-amdgpupromotealloca-cpp-/amdgpupromoteallocaimpl
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AMDGPUPromoteAllocaImpl` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class anonymous_namespace{AMDGPUPromoteAlloca.cpp}::AMDGPUPromoteAllocaImpl</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#acf723cfa96d1a5ac99f5c4d539530d15">AMDGPUPromoteAllocaImpl</a> (TargetMachine &amp;TM, LoopInfo &amp;LI)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a17b2c2b9161a29f3fa9a80e1cb5351c1">run</a> (Function &amp;F, bool PromoteToLDS)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a10664cb8d1785ebfd3af59f4e52bfa5a">binaryOpIsDerivedFromSameAlloca</a> (Value &#42;Alloca, Value &#42;Val, Instruction &#42;UseInst, int OpIdx0, int OpIdx1) const</>}>
Val is a derived pointer from Alloca. <a href="#a10664cb8d1785ebfd3af59f4e52bfa5a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5c1949418994d8dfb46888a1d317252d">collectUsesWithPtrTypes</a> (Value &#42;BaseAlloca, Value &#42;Val, std::vector&lt; Value &#42; &gt; &amp;WorkList) const</>}>
BaseAlloca is the alloca root the search started from. <a href="#a5c1949418994d8dfb46888a1d317252d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt;</>}
  name={<><a href="#af500c61b271ceb740ec92db3137c56f5">getLocalSizeYZ</a> (IRBuilder&lt;&gt; &amp;Builder)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a02e84b742926eea60c92f99b56123c13">getWorkitemID</a> (IRBuilder&lt;&gt; &amp;Builder, unsigned N)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7c968f2e3af7de6a0be4d01260ba5f30">hasSufficientLocalMem</a> (const Function &amp;F)</>}>
Check whether we have enough local memory for promotion. <a href="#a7c968f2e3af7de6a0be4d01260ba5f30">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a305ff065b49045b11b2c25968b77c95f">sortAllocasToPromote</a> (SmallVectorImpl&lt; AllocaInst &#42; &gt; &amp;Allocas)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1a62f676cbf4216bd58bae203de8af18">tryPromoteAllocaToLDS</a> (AllocaInst &amp;I, bool SufficientLDS)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a23ddb339370789f1dc2ba3ad253b5b82">tryPromoteAllocaToVector</a> (AllocaInst &amp;I)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a6ce87b4c8a37c9db46060e3b8038b455">CurrentLocalMemUsage</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &#42;</>}
  name={<><a href="#ab120d5d5cc3076f6ae52cb657495d580">DL</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a174da9c6a36ca480d5a349ebe5743297">IsAMDGCN</a> = false</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abda4582bead39492af78b6065988451b">IsAMDHSA</a> = false</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &amp;</>}
  name={<><a href="#a51cddfb0a181a73b947fee77f5a6fb7a">LI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a7e0ee43f23c1e0fa7e8d42d2235acbc7">LocalMemLimit</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a306a2c19a191e970f8e13e7c1e3b0a3e">MaxVGPRs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/module">Module</a> &#42;</>}
  name={<><a href="#a91903db0101c9c682ff613f2c7b285e5">Mod</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetmachine">TargetMachine</a> &amp;</>}
  name={<><a href="#a17bb293c55e1f72a4b2ebead03d88074">TM</a></>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 76 of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.

<SectionDefinition>

## Public Constructors

### AMDGPUPromoteAllocaImpl() {#acf723cfa96d1a5ac99f5c4d539530d15}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::AMDGPUPromoteAllocaImpl (<a href="/docs/api/classes/llvm/targetmachine">TargetMachine</a> &amp; TM, <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &amp; LI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00116">116</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#a17b2c2b9161a29f3fa9a80e1cb5351c1}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::run (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F, bool PromoteToLDS)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00123">123</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### binaryOpIsDerivedFromSameAlloca() {#a10664cb8d1785ebfd3af59f4e52bfa5a}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::binaryOpIsDerivedFromSameAlloca (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Alloca, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Val, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; UseInst, int OpIdx0, int OpIdx1) const</>}>
Val is a derived pointer from Alloca.

OpIdx0/OpIdx1 are the operand indices to an instruction with 2 pointer inputs (e.g. select, icmp). Returns true if both operands are derived from the same alloca. Val should be the same value as one of the input operands of UseInst.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00103">103</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### collectUsesWithPtrTypes() {#a5c1949418994d8dfb46888a1d317252d}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::collectUsesWithPtrTypes (<a href="/docs/api/classes/llvm/value">Value</a> &#42; BaseAlloca, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Val, std::vector&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt; &amp; WorkList) const</>}>
BaseAlloca is the alloca root the search started from.

Val may be that alloca or a recursive user of it.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00096">96</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### getLocalSizeYZ() {#af500c61b271ceb740ec92db3137c56f5}

<MemberDefinition
  prototype={<>std::pair&lt; Value &#42;, Value &#42; &gt; AMDGPUPromoteAllocaImpl::getLocalSizeYZ (<a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00091">91</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### getWorkitemID() {#a02e84b742926eea60c92f99b56123c13}

<MemberDefinition
  prototype={<>Value &#42; AMDGPUPromoteAllocaImpl::getWorkitemID (<a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder, unsigned N)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00092">92</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### hasSufficientLocalMem() {#a7c968f2e3af7de6a0be4d01260ba5f30}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::hasSufficientLocalMem (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/function">Function</a> &amp; F)</>}>
Check whether we have enough local memory for promotion.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00108">108</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### sortAllocasToPromote() {#a305ff065b49045b11b2c25968b77c95f}

<MemberDefinition
  prototype={<>void AMDGPUPromoteAllocaImpl::sortAllocasToPromote (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42; &gt; &amp; Allocas)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00113">113</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### tryPromoteAllocaToLDS() {#a1a62f676cbf4216bd58bae203de8af18}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::tryPromoteAllocaToLDS (<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp; I, bool SufficientLDS)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00111">111</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### tryPromoteAllocaToVector() {#a23ddb339370789f1dc2ba3ad253b5b82}

<MemberDefinition
  prototype={<>bool AMDGPUPromoteAllocaImpl::tryPromoteAllocaToVector (<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp; I)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00110">110</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### CurrentLocalMemUsage {#a6ce87b4c8a37c9db46060e3b8038b455}

<MemberDefinition
  prototype={<>uint32&#95;t anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::CurrentLocalMemUsage = 0</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00085">85</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### DL {#ab120d5d5cc3076f6ae52cb657495d580}

<MemberDefinition
  prototype={<>const DataLayout&#42; anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::DL = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00081">81</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### IsAMDGCN {#a174da9c6a36ca480d5a349ebe5743297}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::IsAMDGCN = false</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00088">88</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### IsAMDHSA {#abda4582bead39492af78b6065988451b}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::IsAMDHSA = false</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00089">89</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### LI {#a51cddfb0a181a73b947fee77f5a6fb7a}

<MemberDefinition
  prototype={<>LoopInfo&amp; anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::LI</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00079">79</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### LocalMemLimit {#a7e0ee43f23c1e0fa7e8d42d2235acbc7}

<MemberDefinition
  prototype={<>uint32&#95;t anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::LocalMemLimit = 0</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00084">84</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### MaxVGPRs {#a306a2c19a191e970f8e13e7c1e3b0a3e}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::MaxVGPRs</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00086">86</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### Mod {#a91903db0101c9c682ff613f2c7b285e5}

<MemberDefinition
  prototype={<>Module&#42; anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::Mod = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00080">80</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

### TM {#a17bb293c55e1f72a4b2ebead03d88074}

<MemberDefinition
  prototype={<>const TargetMachine&amp; anonymous&#95;namespace&#123;AMDGPUPromoteAlloca.cpp&#125;::AMDGPUPromoteAllocaImpl::TM</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp/#l00078">78</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpupromotealloca-cpp">AMDGPUPromoteAlloca.cpp</a></li>
</ul>

</DoxygenPage>
