---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/truncinstcombine
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `TruncInstCombine` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class llvm::TruncInstCombine</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="Transforms/AggressiveInstCombine/AggressiveInstCombineInternal.h"
  permalink="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h"
  isLocal="true" />
</IncludesList>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a523cd3d898d0a01edc76fdb6c0edf2b8">TruncInstCombine</a> (AssumptionCache &amp;AC, TargetLibraryInfo &amp;TLI, const DataLayout &amp;DL, const DominatorTree &amp;DT)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a99c1ed1dae15c10e473d27bf3666c34b">run</a> (Function &amp;F)</>}>
Perform <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> pattern optimization on given function. <a href="#a99c1ed1dae15c10e473d27bf3666c34b">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a89381b32d91c7da8a3dbf5c39261a05b">buildTruncExpressionGraph</a> ()</>}>
Build expression graph dominated by the /p CurrentTruncInst and append it to the InstInfoMap container. <a href="#a89381b32d91c7da8a3dbf5c39261a05b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/knownbits">KnownBits</a></>}
  name={<><a href="#a8fa0ee0fd1531f9532e9953232680ec1">computeKnownBits</a> (const Value &#42;V) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a698ea84c19628141435bed33556d33b4">ComputeNumSignBits</a> (const Value &#42;V) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/type">Type</a> &#42;</>}
  name={<><a href="#acbced67b82a49b48a8a7554b39390529">getBestTruncatedType</a> ()</>}>
Build an expression graph dominated by the current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> and <a href="/docs/api/namespaces/llvm/check">Check</a> if it is eligible to be reduced to a smaller type. <a href="#acbced67b82a49b48a8a7554b39390529">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aacc845177ebee6bfc492dcc4e370d747">getMinBitWidth</a> ()</>}>
Calculate the minimal allowed bit-width of the chain ending with the currently visited truncate&#39;s operand. <a href="#aacc845177ebee6bfc492dcc4e370d747">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a2a085892142be607c01be998c6884d0a">getReducedOperand</a> (Value &#42;V, Type &#42;SclTy)</>}>
Given a <code>V</code> value and a <code>SclTy</code> scalar type return the generated reduced value of <code>V</code> based on the type <code>SclTy</code>. <a href="#a2a085892142be607c01be998c6884d0a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a627196d160746656d303923bed65baeb">ReduceExpressionGraph</a> (Type &#42;SclTy)</>}>
Create a new expression graph using the reduced /p SclTy type and replace the old expression graph with it. <a href="#a627196d160746656d303923bed65baeb">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &amp;</>}
  name={<><a href="#a47c97c3b17b37d73729e383cdbb18abf">AC</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/truncinst">TruncInst</a> &#42;</>}
  name={<><a href="#a933e609175594b3eb74f18137f45ed80">CurrentTruncInst</a> = nullptr</>}>
Current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> instruction. <a href="#a933e609175594b3eb74f18137f45ed80">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#a164e42c52683325fc1b7eabca2bfa0ef">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &amp;</>}
  name={<><a href="#a49883077f961320e2907043757e3a56a">DT</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, Info &gt;</>}
  name={<><a href="#a2dabb760c64f81c8911b2a825dbe159f">InstInfoMap</a></>}>
An ordered map representing expression graph post-dominated by current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a>. <a href="#a2dabb760c64f81c8911b2a825dbe159f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;</>}
  name={<><a href="#a98ce845402e3e93d13237cc40c0ecc31">TLI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> &#42;, 4 &gt;</>}
  name={<><a href="#a6ec79d14ef5910cd1ec59e274c22805d">Worklist</a></>}>
List of all <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> instructions to be processed. <a href="#a6ec79d14ef5910cd1ec59e274c22805d">More...</a>
</MembersIndexItem>

</MembersIndex>


Definition at line 52 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.

<SectionDefinition>

## Public Constructors

### TruncInstCombine() {#a523cd3d898d0a01edc76fdb6c0edf2b8}

<MemberDefinition
  prototype={<>llvm::TruncInstCombine::TruncInstCombine (<a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &amp; AC, <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp; TLI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; DL, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &amp; DT)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00080">80</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#a99c1ed1dae15c10e473d27bf3666c34b}

<MemberDefinition
  prototype={<>bool TruncInstCombine::run (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F)</>}>
Perform <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> pattern optimization on given function.

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00085">85</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00525">525</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### buildTruncExpressionGraph() {#a89381b32d91c7da8a3dbf5c39261a05b}

<MemberDefinition
  prototype="bool TruncInstCombine::buildTruncExpressionGraph ()">
Build expression graph dominated by the /p CurrentTruncInst and append it to the InstInfoMap container.

<SectionUser title="Returns">
true only if succeed to generate an eligible sub expression graph.
</SectionUser>

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00092">92</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00088">88</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

### computeKnownBits() {#a8fa0ee0fd1531f9532e9953232680ec1}

<MemberDefinition
  prototype={<>KnownBits llvm::TruncInstCombine::computeKnownBits (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/value">Value</a> &#42; V) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00109">109</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### ComputeNumSignBits() {#a698ea84c19628141435bed33556d33b4}

<MemberDefinition
  prototype={<>unsigned llvm::TruncInstCombine::ComputeNumSignBits (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/value">Value</a> &#42; V) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00115">115</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### getBestTruncatedType() {#acbced67b82a49b48a8a7554b39390529}

<MemberDefinition
  prototype={<>Type &#42; TruncInstCombine::getBestTruncatedType ()</>}>
Build an expression graph dominated by the current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> and <a href="/docs/api/namespaces/llvm/check">Check</a> if it is eligible to be reduced to a smaller type.

<SectionUser title="Returns">
the scalar version of the new type to be used for the reduced expression graph, or nullptr if the expression graph is not eligible to be reduced.
</SectionUser>

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00107">107</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00266">266</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

### getMinBitWidth() {#aacc845177ebee6bfc492dcc4e370d747}

<MemberDefinition
  prototype="unsigned TruncInstCombine::getMinBitWidth ()">
Calculate the minimal allowed bit-width of the chain ending with the currently visited truncate&#39;s operand.

<SectionUser title="Returns">
minimum number of bits to which the chain ending with the truncate&#39;s operand can be shrunk to.
</SectionUser>

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00099">99</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00175">175</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

### getReducedOperand() {#a2a085892142be607c01be998c6884d0a}

<MemberDefinition
  prototype={<>Value &#42; TruncInstCombine::getReducedOperand (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V, <a href="/docs/api/classes/llvm/type">Type</a> &#42; SclTy)</>}>
Given a <code>V</code> value and a <code>SclTy</code> scalar type return the generated reduced value of <code>V</code> based on the type <code>SclTy</code>.

<ParametersList title="Parameters">
<ParametersListItem name="V">value to be reduced.</ParametersListItem>
<ParametersListItem name="SclTy">scalar version of new type to reduce to.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
the new reduced value.
</SectionUser>

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00127">127</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00366">366</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

### ReduceExpressionGraph() {#a627196d160746656d303923bed65baeb}

<MemberDefinition
  prototype={<>void TruncInstCombine::ReduceExpressionGraph (<a href="/docs/api/classes/llvm/type">Type</a> &#42; SclTy)</>}>
Create a new expression graph using the reduced /p SclTy type and replace the old expression graph with it.

Also erase all instructions in the old graph, except those that are still needed outside the graph.


<ParametersList title="Parameters">
<ParametersListItem name="SclTy">scalar version of new type to reduce expression graph into.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00134">134</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp/#l00380">380</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AC {#a47c97c3b17b37d73729e383cdbb18abf}

<MemberDefinition
  prototype={<>AssumptionCache&amp; llvm::TruncInstCombine::AC</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00053">53</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### CurrentTruncInst {#a933e609175594b3eb74f18137f45ed80}

<MemberDefinition
  prototype={<>TruncInst&#42; llvm::TruncInstCombine::CurrentTruncInst = nullptr</>}>
Current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> instruction.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00062">62</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### DL {#a164e42c52683325fc1b7eabca2bfa0ef}

<MemberDefinition
  prototype={<>const DataLayout&amp; llvm::TruncInstCombine::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00055">55</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### DT {#a49883077f961320e2907043757e3a56a}

<MemberDefinition
  prototype={<>const DominatorTree&amp; llvm::TruncInstCombine::DT</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00056">56</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### InstInfoMap {#a2dabb760c64f81c8911b2a825dbe159f}

<MemberDefinition
  prototype={<>MapVector&lt;Instruction &#42;, Info&gt; llvm::TruncInstCombine::InstInfoMap</>}>
An ordered map representing expression graph post-dominated by current processed <a href="/docs/api/classes/llvm/truncinst">TruncInst</a>.

It maps each instruction in the graph to its Info structure. The map is ordered such that each instruction appears before all other instructions in the graph that uses it.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00077">77</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### TLI {#a98ce845402e3e93d13237cc40c0ecc31}

<MemberDefinition
  prototype={<>TargetLibraryInfo&amp; llvm::TruncInstCombine::TLI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00054">54</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

### Worklist {#a6ec79d14ef5910cd1ec59e274c22805d}

<MemberDefinition
  prototype={<>SmallVector&lt;TruncInst &#42;, 4&gt; llvm::TruncInstCombine::Worklist</>}>
List of all <a href="/docs/api/classes/llvm/truncinst">TruncInst</a> instructions to be processed.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h/#l00059">59</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/aggressiveinstcombineinternal-h">AggressiveInstCombineInternal.h</a></li>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/aggressiveinstcombine/truncinstcombine-cpp">TruncInstCombine.cpp</a></li>
</ul>

</DoxygenPage>
