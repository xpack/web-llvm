---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-flattencfg-cpp-/flattencfgopt
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `FlattenCFGOpt` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class anonymous_namespace{FlattenCFG.cpp}::FlattenCFGOpt</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ae4e871a2e46ee5238f21562d2bf1c73d">FlattenCFGOpt</a> (AliasAnalysis &#42;AA)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a602f2acd35dc9f79595697f2a5296541">run</a> (BasicBlock &#42;BB)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa6497762f15f3955e4f17e95706189cb">CompareIfRegionBlock</a> (BasicBlock &#42;Block1, BasicBlock &#42;Block2, BasicBlock &#42;Head2)</>}>
Compare a pair of blocks: <code>Block1</code> and <code>Block2</code>, which are from two if-regions, where <code>Head2</code> is the entry block of the 2nd if-region. <a href="#aa6497762f15f3955e4f17e95706189cb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a01c4a877405938fc939c1d6a0608a66c">FlattenParallelAndOr</a> (BasicBlock &#42;BB, IRBuilder&lt;&gt; &amp;Builder)</>}>
<a href="/docs/api/classes/llvm/use">Use</a> parallel-and or parallel-or to generate conditions for conditional branches. <a href="#a01c4a877405938fc939c1d6a0608a66c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a65d79d777754e58abf8492a744102e07">MergeIfRegion</a> (BasicBlock &#42;BB, IRBuilder&lt;&gt; &amp;Builder)</>}>
If. <a href="#a65d79d777754e58abf8492a744102e07">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#ae457f1cf451ed893666c4a384e58f8e5">AliasAnalysis</a> &#42;</>}
  name={<><a href="#a58aaa09a6e2d647ecdf2ff5624c5d578">AA</a></>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 35 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.

<SectionDefinition>

## Public Constructors

### FlattenCFGOpt() {#ae4e871a2e46ee5238f21562d2bf1c73d}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;FlattenCFG.cpp&#125;::FlattenCFGOpt::FlattenCFGOpt (<a href="/docs/api/namespaces/llvm/#ae457f1cf451ed893666c4a384e58f8e5">AliasAnalysis</a> &#42; AA)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00056">56</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#a602f2acd35dc9f79595697f2a5296541}

<MemberDefinition
  prototype={<>bool FlattenCFGOpt::run (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00058">58</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### CompareIfRegionBlock() {#aa6497762f15f3955e4f17e95706189cb}

<MemberDefinition
  prototype={<>bool FlattenCFGOpt::CompareIfRegionBlock (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; Block1, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; Block2, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; Head2)</>}>
Compare a pair of blocks: <code>Block1</code> and <code>Block2</code>, which are from two if-regions, where <code>Head2</code> is the entry block of the 2nd if-region.

Compare blocks from two if-regions, where.


<SectionUser title="Returns">
true if <code>Block1</code> and <code>Block2</code> contain identical instructions, and have no memory reference alias with <code>Head2</code>. This is used as a legality check for merging if-regions.
</SectionUser>


<ParametersList title="Parameters">
<ParametersListItem name="Head2">is the entry of the 2nd if-region.</ParametersListItem>
<ParametersListItem name="Block1">is a block in the 1st if-region to compare.</ParametersListItem>
<ParametersListItem name="Block2">is a block in the 2nd if-region to compare.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
true if Block1 and Block2 have identical instructions and do not have memory reference alias with Head2.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00052">52</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

### FlattenParallelAndOr() {#a01c4a877405938fc939c1d6a0608a66c}

<MemberDefinition
  prototype={<>bool FlattenCFGOpt::FlattenParallelAndOr (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}>
<a href="/docs/api/classes/llvm/use">Use</a> parallel-and or parallel-or to generate conditions for conditional branches.

If.


<ParametersList title="Parameters">
<ParametersListItem name="[in] BB">has more than one predecessor that is a conditional branch, attempt to use parallel and/or for the branch condition.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
true on success.
</SectionUser>

Before: ...... cmp10 = fcmp une float tmp1, tmp2 br i1 cmp10, label if.then, label lor.rhs

lor.rhs: ...... cmp11 = fcmp une float tmp3, tmp4 br i1 cmp11, label if.then, label ifend

if.end: // the merge block ......

if.then: // has two predecessors, both of them contains conditional branch. ...... br label if.end;

After: ...... cmp10 = fcmp une float tmp1, tmp2 ...... cmp11 = fcmp une float tmp3, tmp4 cmp12 = or i1 cmp10, cmp11 // parallel-or mode. br i1 cmp12, label if.then, label ifend

if.end: ......

if.then: ...... br label if.end;

Current implementation handles two cases. Case 1: BB is on the else-path. 

<CodeBlock>
    BB1
  /     |
 BB2    |
/   \\   |
</CodeBlock> BB3 \\ | where, BB1, BB2 contain conditional branches. \\ | / BB3 contains unconditional branch. \\ | / BB4 corresponds to BB which is also the merge. BB =&gt; BB4

Corresponding source code:

if (a == b &amp;&amp; c == d) statement; // BB3

Case 2: BB is on the then-path. 

<CodeBlock>
       BB1
    /      |
   |      BB2
   \\    /    |  where BB1, BB2 contain conditional branches.
</CodeBlock> BB =&gt; BB3 | BB3 contains unconditiona branch and corresponds \\ / to BB. BB4 is the merge. BB4

Corresponding source code:

if (a == b || c == d) statement; // BB3

In both cases, BB is the common successor of conditional branches. In Case 1, BB (BB4) has an unconditional branch (BB3) as its predecessor. In Case 2, BB (BB3) only has conditional branches as its predecessors.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00040">40</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

### MergeIfRegion() {#a65d79d777754e58abf8492a744102e07}

<MemberDefinition
  prototype={<>bool FlattenCFGOpt::MergeIfRegion (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}>
If.

Check whether.


<ParametersList title="Parameters">
<ParametersListItem name="BB">is the merge block of an if-region, attempt to merge the if-region with an adjacent if-region upstream if two if-regions contain identical instructions.</ParametersListItem>
<ParametersListItem name="BB">is the merge block of a if-region. If yes, check whether there exists an adjacent if-region upstream, the two if-regions contain identical instructions and can be legally merged.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
true if the two if-regions are merged.
</SectionUser>

From: if (a) statement; if (b) statement;

To: if (a || b) statement;

And from: if (a) ; else statement; if (b) ; else statement;

To: if (a &amp;&amp; b) ; else statement;

We always take the form of the first if-region. This means that if the statement in the first if-region, is in the &quot;then-path&quot;, while in the second if-region it is in the &quot;else-path&quot;, then we convert the second to the first form, by inverting the condition and the branch successors. The same approach goes for the opposite case.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00045">45</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AA {#a58aaa09a6e2d647ecdf2ff5624c5d578}

<MemberDefinition
  prototype={<>AliasAnalysis&#42; anonymous&#95;namespace&#123;FlattenCFG.cpp&#125;::FlattenCFGOpt::AA</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp/#l00036">36</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/flattencfg-cpp">FlattenCFG.cpp</a></li>
</ul>

</DoxygenPage>
