---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-amdgpulatecodegenprepare-cpp-/liveregoptimizer
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `LiveRegOptimizer` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class anonymous_namespace{AMDGPULateCodeGenPrepare.cpp}::LiveRegOptimizer</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a9653facb49118990716581dab9178113">LiveRegOptimizer</a> (Module &amp;Mod, const GCNSubtarget &amp;ST)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/type">Type</a> &#42;</>}
  name={<><a href="#a379666f1f08149bf9e4dabcb430aee93">calculateConvertType</a> (Type &#42;OriginalType)</>}>
Calculate the and <code>return</code> the type to convert to given a problematic <code>OriginalType</code>. <a href="#a379666f1f08149bf9e4dabcb430aee93">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a7587e2867090ef850ef2bda4ac192e48">convertFromOptType</a> (Type &#42;ConvertType, Instruction &#42;V, BasicBlock::iterator &amp;InstPt, BasicBlock &#42;InsertBlock)</>}>
Convert the virtual register defined by <code>V</code> back to the original type <code>ConvertType</code>, stripping away the MSBs in cases where there was an imperfect fit (e.g. <a href="#a7587e2867090ef850ef2bda4ac192e48">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#ac8f832cfa0e0121c6fd066c0f3b25f5f">convertToOptType</a> (Instruction &#42;V, BasicBlock::iterator &amp;InstPt)</>}>
Convert the virtual register defined by <code>V</code> to the compatible vector of legal type. <a href="#ac8f832cfa0e0121c6fd066c0f3b25f5f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa50432deded202fb241ca2c204e8137a">optimizeLiveType</a> (Instruction &#42;I, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts)</>}>
Check for problematic PHI nodes or cross-bb values based on the value defined by <code>I</code>, and coerce to legal types if necessary. <a href="#aa50432deded202fb241ca2c204e8137a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ac8ef0473fe81ed643d4fe2e64c6a5b3e">shouldReplace</a> (Type &#42;ITy)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;, <a href="/docs/api/namespaces/anonymous-amdgpulatecodegenprepare-cpp-/#ac1fa0ca4e558fee27e6605bc3d0cf1e5">ValueToValueMap</a> &gt;</>}
  name={<><a href="#ae40f811fdcbfc69946bc40aa772313d5">BBUseValMap</a></>}>
Map of containing conversions from Optimal <a href="/docs/api/classes/llvm/type">Type</a> -&gt; Original <a href="/docs/api/classes/llvm/type">Type</a> per BB. <a href="#ae40f811fdcbfc69946bc40aa772313d5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a></>}
  name={<><a href="#a2f2a6ddc93879cb7197f2de2825adb0a">ConvertToScalar</a></>}>
The scalar type to convert to. <a href="#a2f2a6ddc93879cb7197f2de2825adb0a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#a6308533b4bba2194380969804801879c">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/module">Module</a> &amp;</>}
  name={<><a href="#a48c1eaa09f1b68c1bb7f7500cc22dd8c">Mod</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;</>}
  name={<><a href="#afbd4e792da2ca6ca7932c09073ccb431">ST</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/anonymous-amdgpulatecodegenprepare-cpp-/#ac1fa0ca4e558fee27e6605bc3d0cf1e5">ValueToValueMap</a></>}
  name={<><a href="#a5627dd13dbb9a34b9c1628792114a764">ValMap</a></>}>
Map of <a href="/docs/api/classes/llvm/value">Value</a> -&gt; Converted <a href="/docs/api/classes/llvm/value">Value</a>. <a href="#a5627dd13dbb9a34b9c1628792114a764">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, 4 &gt;</>}
  name={<><a href="#a104691e82727fe41466046f99f52ed5d">Visited</a></>}>
The set of visited Instructions. <a href="#a104691e82727fe41466046f99f52ed5d">More...</a>
</MembersIndexItem>

</MembersIndex>


Definition at line 73 of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.

<SectionDefinition>

## Public Constructors

### LiveRegOptimizer() {#a9653facb49118990716581dab9178113}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::LiveRegOptimizer (<a href="/docs/api/classes/llvm/module">Module</a> &amp; Mod, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00128">128</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### calculateConvertType() {#a379666f1f08149bf9e4dabcb430aee93}

<MemberDefinition
  prototype={<>Type &#42; LiveRegOptimizer::calculateConvertType (<a href="/docs/api/classes/llvm/type">Type</a> &#42; OriginalType)</>}>
Calculate the and <code>return</code> the type to convert to given a problematic <code>OriginalType</code>.

In some instances, we may widen the type (e.g. v2i8 -&gt; i32).

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00090">90</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### convertFromOptType() {#a7587e2867090ef850ef2bda4ac192e48}

<MemberDefinition
  prototype={<>Value &#42; LiveRegOptimizer::convertFromOptType (<a href="/docs/api/classes/llvm/type">Type</a> &#42; ConvertType, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; V, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; InstPt, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; InsertBlock)</>}>
Convert the virtual register defined by <code>V</code> back to the original type <code>ConvertType</code>, stripping away the MSBs in cases where there was an imperfect fit (e.g.

v2i32 -&gt; v7i8)

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00097">97</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### convertToOptType() {#ac8f832cfa0e0121c6fd066c0f3b25f5f}

<MemberDefinition
  prototype={<>Value &#42; LiveRegOptimizer::convertToOptType (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; V, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; InstPt)</>}>
Convert the virtual register defined by <code>V</code> to the compatible vector of legal type.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00093">93</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### optimizeLiveType() {#aa50432deded202fb241ca2c204e8137a}

<MemberDefinition
  prototype={<>bool LiveRegOptimizer::optimizeLiveType (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/weaktrackingvh">WeakTrackingVH</a> &gt; &amp; DeadInsts)</>}>
Check for problematic PHI nodes or cross-bb values based on the value defined by <code>I</code>, and coerce to legal types if necessary.

For problematic PHI node, we coerce all incoming values in a single invocation.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00103">103</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### shouldReplace() {#ac8ef0473fe81ed643d4fe2e64c6a5b3e}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::shouldReplace (<a href="/docs/api/classes/llvm/type">Type</a> &#42; ITy)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00108">108</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### BBUseValMap {#ae40f811fdcbfc69946bc40aa772313d5}

<MemberDefinition
  prototype={<>DenseMap&lt;BasicBlock &#42;, ValueToValueMap&gt; anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::BBUseValMap</>}>
Map of containing conversions from Optimal <a href="/docs/api/classes/llvm/type">Type</a> -&gt; Original <a href="/docs/api/classes/llvm/type">Type</a> per BB.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00085">85</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### ConvertToScalar {#a2f2a6ddc93879cb7197f2de2825adb0a}

<MemberDefinition
  prototype={<>Type&#42; const anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::ConvertToScalar</>}>
The scalar type to convert to.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00079">79</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### DL {#a6308533b4bba2194380969804801879c}

<MemberDefinition
  prototype={<>const DataLayout&amp; anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00076">76</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### Mod {#a48c1eaa09f1b68c1bb7f7500cc22dd8c}

<MemberDefinition
  prototype={<>Module&amp; anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::Mod</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00075">75</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### ST {#afbd4e792da2ca6ca7932c09073ccb431}

<MemberDefinition
  prototype={<>const GCNSubtarget&amp; anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::ST</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00077">77</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### ValMap {#a5627dd13dbb9a34b9c1628792114a764}

<MemberDefinition
  prototype={<>ValueToValueMap anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::ValMap</>}>
Map of <a href="/docs/api/classes/llvm/value">Value</a> -&gt; Converted <a href="/docs/api/classes/llvm/value">Value</a>.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00083">83</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

### Visited {#a104691e82727fe41466046f99f52ed5d}

<MemberDefinition
  prototype={<>SmallPtrSet&lt;Instruction &#42;, 4&gt; anonymous&#95;namespace&#123;AMDGPULateCodeGenPrepare.cpp&#125;::LiveRegOptimizer::Visited</>}>
The set of visited Instructions.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp/#l00081">81</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulatecodegenprepare-cpp">AMDGPULateCodeGenPrepare.cpp</a></li>
</ul>

</DoxygenPage>
