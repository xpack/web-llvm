---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/sampleprof/sampleprofilereader
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `SampleProfileReader` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Sample-based profile reader. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::sampleprof::SampleProfileReader</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/ProfileData/SampleProfReader.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h"
  isLocal="true" />
</IncludesList>

## Derived Classes

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilereaderbinary">SampleProfileReaderBinary</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilereadergcc">SampleProfileReaderGCC</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilereadertext">SampleProfileReaderText</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a7df3a90aaf7409ace0a2a56f5e539477">SampleProfileReader</a> (std::unique&#95;ptr&lt; MemoryBuffer &gt; B, LLVMContext &amp;C, SampleProfileFormat Format=SPF&#95;None)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a4cc72083ad71103e9d6f2fd0a1b809ce">~SampleProfileReader</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#abfc0f7bf9921713c80c3c67aca32fd05">collectFuncsFromModule</a> ()</>}>
Collect functions with definitions in <a href="/docs/api/classes/llvm/module">Module</a> M. <a href="#abfc0f7bf9921713c80c3c67aca32fd05">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a241493be5796817782fda51d1b3fa61d">dump</a> (raw&#95;ostream &amp;OS=dbgs())</>}>
Print all the profiles on stream <code>OS</code>. <a href="#a241493be5796817782fda51d1b3fa61d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aec68a6075c99a337ba44070108ec9bac">dumpFunctionProfile</a> (const FunctionSamples &amp;FS, raw&#95;ostream &amp;OS=dbgs())</>}>
Print the profile for <code><a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a></code> on stream <code>OS</code>. <a href="#aec68a6075c99a337ba44070108ec9bac">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ad1a3cf9f9ad94831f204a4654a423906">dumpJson</a> (raw&#95;ostream &amp;OS=dbgs())</>}>
Print all the profiles on stream <code>OS</code> in the JSON format. <a href="#ad1a3cf9f9ad94831f204a4654a423906">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9b6bef1d2a846490e4f2a50602b561e5">dumpSectionInfo</a> (raw&#95;ostream &amp;OS=dbgs())</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/memorybuffer">MemoryBuffer</a> &#42;</>}
  name={<><a href="#a43723603831c71999b23415970521f78">getBuffer</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a8c0b29b235366b7d2447ab4dc39398ed">getDiscriminatorMask</a> () const</>}>
Get the bitmask the discriminators: For FS profiles, return the bit mask for this pass. <a href="#a8c0b29b235366b7d2447ab4dc39398ed">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66ec">SampleProfileFormat</a></>}
  name={<><a href="#aa1777c98ca71ef45d5989b2d8bd6ad07">getFormat</a> () const</>}>
Return the profile format. <a href="#aa1777c98ca71ef45d5989b2d8bd6ad07">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; <a href="/docs/api/classes/llvm/sampleprof/functionid">FunctionId</a> &gt; &#42;</>}
  name={<><a href="#aaaf6b062ae315c31461ffdeef36b5c80">getNameTable</a> ()</>}>
It includes all the names that have samples either in outline instance or inline instance. <a href="#aaaf6b062ae315c31461ffdeef36b5c80">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilemap">SampleProfileMap</a> &amp;</>}
  name={<><a href="#a19892ef729b441b25d21f69ea15c9118">getProfiles</a> ()</>}>
Return all the profiles. <a href="#a19892ef729b441b25d21f69ea15c9118">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/sampleprof/profilesymbollist">ProfileSymbolList</a> &gt;</>}
  name={<><a href="#af9976cd2d8ddf787f19d5dbca4530fa6">getProfileSymbolList</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilereaderitaniumremapper">SampleProfileReaderItaniumRemapper</a> &#42;</>}
  name={<><a href="#a530222c3b645acc9170003d046753e94">getRemapper</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42;</>}
  name={<><a href="#a231496cee212bad0c2b9fa7877dc0cb4">getSamplesFor</a> (const Function &amp;F)</>}>
Return the samples collected for function <code>F</code>. <a href="#a231496cee212bad0c2b9fa7877dc0cb4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42;</>}
  name={<><a href="#ac4e1a3ce2a89a49b285c8821f490858d">getSamplesFor</a> (StringRef Fname)</>}>
Return the samples collected for function <code>F</code>. <a href="#ac4e1a3ce2a89a49b285c8821f490858d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/profilesummary">ProfileSummary</a> &amp;</>}
  name={<><a href="#a7870bf43f8e5b80b21caea5ea2e23977">getSummary</a> () const</>}>
Return the profile summary. <a href="#a7870bf43f8e5b80b21caea5ea2e23977">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a85697d878bb59b3f4768560065e708d2">hasUniqSuffix</a> ()</>}>
Return whether any name in the profile contains &quot;.&#95;&#95;uniq.&quot; suffix. <a href="#a85697d878bb59b3f4768560065e708d2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab2258ff0986bd6227697d76e9001406d">profileIsCS</a> () const</>}>
Whether input profile is fully context-sensitive. <a href="#ab2258ff0986bd6227697d76e9001406d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4196c502c66af04d2b595e8d81ef7bef">profileIsFS</a> () const</>}>
Whether input profile is flow-sensitive. <a href="#a4196c502c66af04d2b595e8d81ef7bef">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3b0eeddd296ef6f073c94f1399672dfb">profileIsPreInlined</a> () const</>}>
Whether input profile contains ShouldBeInlined contexts. <a href="#a3b0eeddd296ef6f073c94f1399672dfb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1f372a7784eaec8c761af0ed7c38b1b2">profileIsProbeBased</a> () const</>}>
Whether input profile is based on pseudo probes. <a href="#a1f372a7784eaec8c761af0ed7c38b1b2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::error&#95;code</>}
  name={<><a href="#a3bdbf84fa8e3f0e789653587d5c85515">read</a> ()</>}>
The interface to read sample profiles from the associated file. <a href="#a3bdbf84fa8e3f0e789653587d5c85515">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::error&#95;code</>}
  name={<><a href="#a5401478f3b22021f2cd1a363e0ca63cb">read</a> (const DenseSet&lt; StringRef &gt; &amp;FuncsToUse)</>}>
Read sample profiles for the given functions. <a href="#a5401478f3b22021f2cd1a363e0ca63cb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::error&#95;code</>}
  name={<><a href="#ae5a4501bd06c107c0864feb26f769225">readHeader</a> ()=0</>}>
Read and validate the file header. <a href="#ae5a4501bd06c107c0864feb26f769225">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::error&#95;code</>}
  name={<><a href="#affd9310a980c14646a01fe1960e72575">readImpl</a> ()=0</>}>
The implementaion to read sample profiles from the associated file. <a href="#affd9310a980c14646a01fe1960e72575">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af7db78adf47785867ea84d77ace26cc6">reportError</a> (int64&#95;t LineNumber, const Twine &amp;Msg) const</>}>
Report a parse error message. <a href="#af7db78adf47785867ea84d77ace26cc6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aa462beca1930492cde15612a931fc98a">setDiscriminatorMaskedBitFrom</a> (FSDiscriminatorPass P)</>}>
Set the bits for FS discriminators. <a href="#aa462beca1930492cde15612a931fc98a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aa9734347ce96e871b96518cf49d6c545">setFuncNameToProfNameMap</a> (const HashKeyMap&lt; std::unordered&#95;map, FunctionId, FunctionId &gt; &amp;FPMap)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a55f2425598ac25a3e028f96ac39a56ce">setModule</a> (const Module &#42;Mod)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aa18ef5c27c8814beaf09961918ff6a34">setProfileUseMD5</a> ()</>}>
Force the profile to use <a href="/docs/api/classes/llvm/md5">MD5</a> in Sample contexts, even if function names are present. <a href="#aa18ef5c27c8814beaf09961918ff6a34">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae5cc900a86781c28fb6b6dd00ed94872">setSkipFlatProf</a> (bool Skip)</>}>
Don&#39;t read profile without context if the flag is set. <a href="#ae5cc900a86781c28fb6b6dd00ed94872">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2b5f844964866320a86d8bb53c84e6eb">useMD5</a> () const</>}>
Return whether names in the profile are all <a href="/docs/api/classes/llvm/md5">MD5</a> numbers. <a href="#a2b5f844964866320a86d8bb53c84e6eb">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a862a85fc052e3da0f7109bc54ef4998d">computeSummary</a> ()</>}>
Compute summary for this profile. <a href="#a862a85fc052e3da0f7109bc54ef4998d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::error&#95;code</>}
  name={<><a href="#aa52c8c849b7815a0c717b8048a1af759">read</a> (const DenseSet&lt; StringRef &gt; &amp;FuncsToUse, SampleProfileMap &amp;Profiles)</>}>
Read sample profiles for the given functions and write them to the given profile map. <a href="#aa52c8c849b7815a0c717b8048a1af759">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/memorybuffer">MemoryBuffer</a> &gt;</>}
  name={<><a href="#a317d9b9a39f8213c84429fbf54a7055f">Buffer</a></>}>
<a href="/docs/api/classes/llvm/sys/memory">Memory</a> buffer holding the profile file. <a href="#a317d9b9a39f8213c84429fbf54a7055f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a1bd87b526bf1a09487cf4d75d9e638ef">CSProfileCount</a> = 0</>}>
Number of context-sensitive profiles. <a href="#a1bd87b526bf1a09487cf4d75d9e638ef">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp;</>}
  name={<><a href="#afe19488a2996e10c93bccbe3d332ca93">Ctx</a></>}>
LLVM context used to emit diagnostics. <a href="#afe19488a2996e10c93bccbe3d332ca93">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66ec">SampleProfileFormat</a></>}
  name={<><a href="#a7cddd27e849335a576339995fc8feaa7">Format</a> = <a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66eca71fa511e217d0835567f7d919aab6d02">SPF&#95;None</a></>}>
The format of sample. <a href="#a7cddd27e849335a576339995fc8feaa7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unordered&#95;map&lt; uint64&#95;t, std::pair&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint8&#95;t &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint8&#95;t &#42; &gt; &gt;</>}
  name={<><a href="#a0e2d3f775d9437f33d03a025671010a9">FuncMetadataIndex</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/hashkeymap">HashKeyMap</a>&lt; std::unordered&#95;map, <a href="/docs/api/classes/llvm/sampleprof/functionid">FunctionId</a>, <a href="/docs/api/classes/llvm/sampleprof/functionid">FunctionId</a> &gt; &#42;</>}
  name={<><a href="#a4518eb71be9fbc06834f0e817c1525ff">FuncNameToProfNameMap</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/module">Module</a> &#42;</>}
  name={<><a href="#a2be68a56c1386faa6c75baf21a462df7">M</a> = nullptr</>}>
The current module being compiled if <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> is used by compiler. <a href="#a2be68a56c1386faa6c75baf21a462df7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a01904e1eb14d24c6c8dc095c102815a7">MaskedBitFrom</a> = 31</>}>
Zero out the discriminator bits higher than bit MaskedBitFrom (0 based). <a href="#a01904e1eb14d24c6c8dc095c102815a7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3493b1a9313f04d70a4c843d827d42a9">ProfileHasAttribute</a> = false</>}>
Whether the profile has attribute metadata. <a href="#a3493b1a9313f04d70a4c843d827d42a9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a53cef5334d9e6535928ce4d79e7529e3">ProfileIsCS</a> = false</>}>
Whether function profiles are context-sensitive flat profiles. <a href="#a53cef5334d9e6535928ce4d79e7529e3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab3c8e7a5bebd5fa73b577fdc7677f7a5">ProfileIsFS</a> = false</>}>
Whether the function profiles use FS discriminators. <a href="#ab3c8e7a5bebd5fa73b577fdc7677f7a5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a549796a96109cea2cceae7d708fa5955">ProfileIsMD5</a> = false</>}>
Whether the profile uses <a href="/docs/api/classes/llvm/md5">MD5</a> for Sample Contexts and function names. <a href="#a549796a96109cea2cceae7d708fa5955">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a09599626d454548b75a8508733b742ce">ProfileIsPreInlined</a> = false</>}>
Whether function profile contains ShouldBeInlined contexts. <a href="#a09599626d454548b75a8508733b742ce">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#af3bd0368cb44b2cc97123f03de71efaa">ProfileIsProbeBased</a> = false</>}>
Whether samples are collected based on pseudo probes. <a href="#af3bd0368cb44b2cc97123f03de71efaa">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sampleprof/sampleprofilemap">SampleProfileMap</a></>}
  name={<><a href="#ad31357a0bab13543c1d9e22e22f33ec4">Profiles</a></>}>
Map every function to its associated profile. <a href="#ad31357a0bab13543c1d9e22e22f33ec4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint8&#95;t &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint8&#95;t &#42; &gt;</>}
  name={<><a href="#a03fdd01c4b2069f558380547824c7373">ProfileSecRange</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereaderitaniumremapper">SampleProfileReaderItaniumRemapper</a> &gt;</>}
  name={<><a href="#a31a0b1a6e53cb0a08dbf78fc3cebc224">Remapper</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3a8cd3b6849f62c8ff4b44233374747d">SkipFlatProf</a> = false</>}>
If SkipFlatProf is true, skip functions marked with !Flat in text mode or sections with SecFlagFlat flag in ExtBinary mode. <a href="#a3a8cd3b6849f62c8ff4b44233374747d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/profilesummary">ProfileSummary</a> &gt;</>}
  name={<><a href="#a808d204826972c99cd36562eea139d23">Summary</a></>}>
Profile summary information. <a href="#a808d204826972c99cd36562eea139d23">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/erroror">ErrorOr</a>&lt; std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> &gt; &gt;</>}
  name={<><a href="#a1f2d1c30eab01a2f5ae485d3c3cbf5b4">create</a> (StringRef Filename, LLVMContext &amp;C, vfs::FileSystem &amp;FS, FSDiscriminatorPass P=FSDiscriminatorPass::Base, StringRef RemapFilename=&quot;&quot;)</>}>
Create a sample profile reader appropriate to the file format. <a href="#a1f2d1c30eab01a2f5ae485d3c3cbf5b4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/erroror">ErrorOr</a>&lt; std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> &gt; &gt;</>}
  name={<><a href="#aa13d9a01b470d4ae7e0f1ea117f2e3dc">create</a> (std::unique&#95;ptr&lt; MemoryBuffer &gt; &amp;B, LLVMContext &amp;C, vfs::FileSystem &amp;FS, FSDiscriminatorPass P=FSDiscriminatorPass::Base, StringRef RemapFilename=&quot;&quot;)</>}>
Create a sample profile reader from the supplied memory buffer. <a href="#aa13d9a01b470d4ae7e0f1ea117f2e3dc">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/profilesummary">ProfileSummary</a> &gt;</>}
  name={<><a href="#a721924780859cc437b2316fb29833af1">takeSummary</a> (SampleProfileReader &amp;Reader)</>}>
Take ownership of the summary of this reader. <a href="#a721924780859cc437b2316fb29833af1">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Sample-based profile reader.

Each profile contains sample counts for all the functions executed. Inside each function, statements are annotated with the collected samples on all the instructions associated with that statement.

For this to produce meaningful data, the program needs to be compiled with some debug information (at minimum, line numbers: -gline-tables-only). Otherwise, it will be impossible to match IR instructions to the line numbers collected by the profiler.

From the profile file, we are interested in collecting the following information:


<ul>
<li>A list of functions included in the profile (mangled names).</li>
<li>For each function F:
<ul>
<li>The total number of samples collected in F.</li>
<li>The samples collected at each line in F. To provide some protection against source code shuffling, line numbers should be relative to the start of the function.</li>
</ul></li>
</ul>


The reader supports two file formats: text and binary. The text format is useful for debugging and testing, while the binary format is more compact and I/O efficient. They can both be used interchangeably.

Definition at line 346 of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.

<SectionDefinition>

## Public Constructors

### SampleProfileReader() {#a7df3a90aaf7409ace0a2a56f5e539477}

<MemberDefinition
  prototype={<>llvm::sampleprof::SampleProfileReader::SampleProfileReader (std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/memorybuffer">MemoryBuffer</a> &gt; B, <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp; C, <a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66ec">SampleProfileFormat</a> Format=<a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66eca71fa511e217d0835567f7d919aab6d02">SPF&#95;None</a>)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00348">348</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~SampleProfileReader() {#a4cc72083ad71103e9d6f2fd0a1b809ce}

<MemberDefinition
  prototype="virtual llvm::sampleprof::SampleProfileReader::~SampleProfileReader ()"
  labels = {["virtual", "default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00352">352</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### collectFuncsFromModule() {#abfc0f7bf9921713c80c3c67aca32fd05}

<MemberDefinition
  prototype="virtual bool llvm::sampleprof::SampleProfileReader::collectFuncsFromModule ()"
  labels = {["inline", "virtual"]}>
Collect functions with definitions in <a href="/docs/api/classes/llvm/module">Module</a> M.

For reader which support loading function profiles on demand, return true when the reader has been given a module. Always return false for reader which doesn&#39;t support loading function profiles on demand.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00404">404</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### dump() {#a241493be5796817782fda51d1b3fa61d}

<MemberDefinition
  prototype={<>void SampleProfileReader::dump (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS=<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>())</>}>
Print all the profiles on stream <code>OS</code>.

Dump all the function profiles found on stream <code>OS</code>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00407">407</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l00070">70</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

### dumpFunctionProfile() {#aec68a6075c99a337ba44070108ec9bac}

<MemberDefinition
  prototype={<>void SampleProfileReader::dumpFunctionProfile (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &amp; FS, <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS=<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>())</>}>
Print the profile for <code><a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a></code> on stream <code>OS</code>.

Dump the function profile for <code>FName</code>.


<ParametersList title="Parameters">
<ParametersListItem name="FContext">Name + context of the function to print.</ParametersListItem>
<ParametersListItem name="OS">Stream to emit the output to.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00398">398</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l00064">64</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

### dumpJson() {#ad1a3cf9f9ad94831f204a4654a423906}

<MemberDefinition
  prototype={<>void SampleProfileReader::dumpJson (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS=<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>())</>}>
Print all the profiles on stream <code>OS</code> in the JSON format.

Dump all the function profiles found on stream <code>OS</code> in the JSON format.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00410">410</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l00137">137</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

### dumpSectionInfo() {#a9b6bef1d2a846490e4f2a50602b561e5}

<MemberDefinition
  prototype={<>virtual bool llvm::sampleprof::SampleProfileReader::dumpSectionInfo (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS=<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>())</>}
  labels = {["inline", "virtual"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00499">499</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getBuffer() {#a43723603831c71999b23415970521f78}

<MemberDefinition
  prototype={<>MemoryBuffer &#42; llvm::sampleprof::SampleProfileReader::getBuffer () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00475">475</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getDiscriminatorMask() {#a8c0b29b235366b7d2447ab4dc39398ed}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::sampleprof::SampleProfileReader::getDiscriminatorMask () const</>}
  labels = {["inline"]}>
Get the bitmask the discriminators: For FS profiles, return the bit mask for this pass.

For non FS profiles, return (unsigned) -1.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00366">366</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getFormat() {#aa1777c98ca71ef45d5989b2d8bd6ad07}

<MemberDefinition
  prototype="SampleProfileFormat llvm::sampleprof::SampleProfileReader::getFormat () const"
  labels = {["inline"]}>
Return the profile format.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00478">478</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getNameTable() {#aaaf6b062ae315c31461ffdeef36b5c80}

<MemberDefinition
  prototype={<>virtual std::vector&lt; FunctionId &gt; &#42; llvm::sampleprof::SampleProfileReader::getNameTable ()</>}
  labels = {["inline", "virtual"]}>
It includes all the names that have samples either in outline instance or inline instance.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00498">498</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getProfiles() {#a19892ef729b441b25d21f69ea15c9118}

<MemberDefinition
  prototype={<>SampleProfileMap &amp; llvm::sampleprof::SampleProfileReader::getProfiles ()</>}
  labels = {["inline"]}>
Return all the profiles.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00448">448</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getProfileSymbolList() {#af9976cd2d8ddf787f19d5dbca4530fa6}

<MemberDefinition
  prototype={<>virtual std::unique&#95;ptr&lt; ProfileSymbolList &gt; llvm::sampleprof::SampleProfileReader::getProfileSymbolList ()</>}
  labels = {["inline", "virtual"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00492">492</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getRemapper() {#a530222c3b645acc9170003d046753e94}

<MemberDefinition
  prototype={<>SampleProfileReaderItaniumRemapper &#42; llvm::sampleprof::SampleProfileReader::getRemapper ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00514">514</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getSamplesFor() {#a231496cee212bad0c2b9fa7877dc0cb4}

<MemberDefinition
  prototype={<>FunctionSamples &#42; llvm::sampleprof::SampleProfileReader::getSamplesFor (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/function">Function</a> &amp; F)</>}
  labels = {["inline"]}>
Return the samples collected for function <code>F</code>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00413">413</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getSamplesFor() {#ac4e1a3ce2a89a49b285c8821f490858d}

<MemberDefinition
  prototype={<>FunctionSamples &#42; llvm::sampleprof::SampleProfileReader::getSamplesFor (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Fname)</>}
  labels = {["inline"]}>
Return the samples collected for function <code>F</code>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00422">422</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### getSummary() {#a7870bf43f8e5b80b21caea5ea2e23977}

<MemberDefinition
  prototype={<>ProfileSummary &amp; llvm::sampleprof::SampleProfileReader::getSummary () const</>}
  labels = {["inline"]}>
Return the profile summary.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00473">473</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### hasUniqSuffix() {#a85697d878bb59b3f4768560065e708d2}

<MemberDefinition
  prototype="virtual bool llvm::sampleprof::SampleProfileReader::hasUniqSuffix ()"
  labels = {["inline", "virtual"]}>
Return whether any name in the profile contains &quot;.&#95;&#95;uniq.&quot; suffix.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00512">512</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### profileIsCS() {#ab2258ff0986bd6227697d76e9001406d}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::profileIsCS () const"
  labels = {["inline"]}>
Whether input profile is fully context-sensitive.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00484">484</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### profileIsFS() {#a4196c502c66af04d2b595e8d81ef7bef}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::profileIsFS () const"
  labels = {["inline"]}>
Whether input profile is flow-sensitive.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00490">490</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### profileIsPreInlined() {#a3b0eeddd296ef6f073c94f1399672dfb}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::profileIsPreInlined () const"
  labels = {["inline"]}>
Whether input profile contains ShouldBeInlined contexts.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00487">487</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### profileIsProbeBased() {#a1f372a7784eaec8c761af0ed7c38b1b2}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::profileIsProbeBased () const"
  labels = {["inline"]}>
Whether input profile is based on pseudo probes.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00481">481</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### read() {#a3bdbf84fa8e3f0e789653587d5c85515}

<MemberDefinition
  prototype={<>std::error&#95;code llvm::sampleprof::SampleProfileReader::read ()</>}
  labels = {["inline"]}>
The interface to read sample profiles from the associated file.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00374">374</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### read() {#a5401478f3b22021f2cd1a363e0ca63cb}

<MemberDefinition
  prototype={<>std::error&#95;code llvm::sampleprof::SampleProfileReader::read (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/classes/llvm/stringref">StringRef</a> &gt; &amp; FuncsToUse)</>}
  labels = {["inline"]}>
Read sample profiles for the given functions.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00384">384</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### readHeader() {#ae5a4501bd06c107c0864feb26f769225}

<MemberDefinition
  prototype={<>virtual std::error&#95;code llvm::sampleprof::SampleProfileReader::readHeader ()</>}>
Read and validate the file header.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00355">355</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### readImpl() {#affd9310a980c14646a01fe1960e72575}

<MemberDefinition
  prototype={<>virtual std::error&#95;code llvm::sampleprof::SampleProfileReader::readImpl ()</>}>
The implementaion to read sample profiles from the associated file.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00395">395</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### reportError() {#af7db78adf47785867ea84d77ace26cc6}

<MemberDefinition
  prototype={<>void llvm::sampleprof::SampleProfileReader::reportError (int64&#95;t LineNumber, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp; Msg) const</>}
  labels = {["inline"]}>
Report a parse error message.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00451">451</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### setDiscriminatorMaskedBitFrom() {#aa462beca1930492cde15612a931fc98a}

<MemberDefinition
  prototype={<>void llvm::sampleprof::SampleProfileReader::setDiscriminatorMaskedBitFrom (<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a> P)</>}
  labels = {["inline"]}>
Set the bits for FS discriminators.

Parameter <a href="/docs/api/classes/llvm/pass">Pass</a> specify the sequence number, <a href="/docs/api/classes/llvm/pass">Pass</a> == i is for the i-th round of adding FS discriminators. <a href="/docs/api/classes/llvm/pass">Pass</a> == 0 is for using base discriminators.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00360">360</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### setFuncNameToProfNameMap() {#aa9734347ce96e871b96518cf49d6c545}

<MemberDefinition
  prototype={<>void llvm::sampleprof::SampleProfileReader::setFuncNameToProfNameMap (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/hashkeymap">HashKeyMap</a>&lt; std::unordered&#95;map, <a href="/docs/api/classes/llvm/sampleprof/functionid">FunctionId</a>, <a href="/docs/api/classes/llvm/sampleprof/functionid">FunctionId</a> &gt; &amp; FPMap)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00518">518</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### setModule() {#a55f2425598ac25a3e028f96ac39a56ce}

<MemberDefinition
  prototype={<>void llvm::sampleprof::SampleProfileReader::setModule (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/module">Module</a> &#42; Mod)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00516">516</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### setProfileUseMD5() {#aa18ef5c27c8814beaf09961918ff6a34}

<MemberDefinition
  prototype="virtual void llvm::sampleprof::SampleProfileReader::setProfileUseMD5 ()"
  labels = {["inline", "virtual"]}>
Force the profile to use <a href="/docs/api/classes/llvm/md5">MD5</a> in Sample contexts, even if function names are present.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00506">506</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### setSkipFlatProf() {#ae5cc900a86781c28fb6b6dd00ed94872}

<MemberDefinition
  prototype="void llvm::sampleprof::SampleProfileReader::setSkipFlatProf (bool Skip)"
  labels = {["inline"]}>
Don&#39;t read profile without context if the flag is set.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00509">509</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### useMD5() {#a2b5f844964866320a86d8bb53c84e6eb}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::useMD5 () const"
  labels = {["inline"]}>
Return whether names in the profile are all <a href="/docs/api/classes/llvm/md5">MD5</a> numbers.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00502">502</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Functions

### computeSummary() {#a862a85fc052e3da0f7109bc54ef4998d}

<MemberDefinition
  prototype="void SampleProfileReader::computeSummary ()"
  labels = {["protected"]}>
Compute summary for this profile.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00547">547</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l02013">2013</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

### read() {#aa52c8c849b7815a0c717b8048a1af759}

<MemberDefinition
  prototype={<>virtual std::error&#95;code llvm::sampleprof::SampleProfileReader::read (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/classes/llvm/stringref">StringRef</a> &gt; &amp; FuncsToUse, <a href="/docs/api/classes/llvm/sampleprof/sampleprofilemap">SampleProfileMap</a> &amp; Profiles)</>}
  labels = {["inline", "protected", "virtual"]}>
Read sample profiles for the given functions and write them to the given profile map.

Currently it&#39;s only used for extended binary format to load the profiles on-demand.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00552">552</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### Buffer {#a317d9b9a39f8213c84429fbf54a7055f}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;MemoryBuffer&gt; llvm::sampleprof::SampleProfileReader::Buffer</>}
  labels = {["protected"]}>
<a href="/docs/api/classes/llvm/sys/memory">Memory</a> buffer holding the profile file.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00535">535</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### CSProfileCount {#a1bd87b526bf1a09487cf4d75d9e638ef}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::sampleprof::SampleProfileReader::CSProfileCount = 0</>}
  labels = {["protected"]}>
Number of context-sensitive profiles.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00585">585</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### Ctx {#afe19488a2996e10c93bccbe3d332ca93}

<MemberDefinition
  prototype={<>LLVMContext&amp; llvm::sampleprof::SampleProfileReader::Ctx</>}
  labels = {["protected"]}>
LLVM context used to emit diagnostics.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00532">532</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### Format {#a7cddd27e849335a576339995fc8feaa7}

<MemberDefinition
  prototype={<>SampleProfileFormat llvm::sampleprof::SampleProfileReader::Format = <a href="/docs/api/namespaces/llvm/sampleprof/#a373137ee5de445ffb3a1dbc685cf66eca71fa511e217d0835567f7d919aab6d02">SPF&#95;None</a></>}
  labels = {["protected"]}>
The format of sample.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00591">591</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### FuncMetadataIndex {#a0e2d3f775d9437f33d03a025671010a9}

<MemberDefinition
  prototype={<>std::unordered&#95;map&lt;uint64&#95;t, std::pair&lt;const uint8&#95;t &#42;, const uint8&#95;t &#42;&gt; &gt; llvm::sampleprof::SampleProfileReader::FuncMetadataIndex</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00568">568</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### FuncNameToProfNameMap {#a4518eb71be9fbc06834f0e817c1525ff}

<MemberDefinition
  prototype={<>const HashKeyMap&lt;std::unordered&#95;map, FunctionId, FunctionId&gt;&#42; llvm::sampleprof::SampleProfileReader::FuncNameToProfNameMap = nullptr</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00563">563</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### M {#a2be68a56c1386faa6c75baf21a462df7}

<MemberDefinition
  prototype={<>const Module&#42; llvm::sampleprof::SampleProfileReader::M = nullptr</>}
  labels = {["protected"]}>
The current module being compiled if <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> is used by compiler.

If <a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> is used by other tools which are not compiler, M is usually nullptr.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00596">596</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### MaskedBitFrom {#a01904e1eb14d24c6c8dc095c102815a7}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::sampleprof::SampleProfileReader::MaskedBitFrom = 31</>}
  labels = {["protected"]}>
Zero out the discriminator bits higher than bit MaskedBitFrom (0 based).

The default is to keep all the bits.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00600">600</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileHasAttribute {#a3493b1a9313f04d70a4c843d827d42a9}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileHasAttribute = false"
  labels = {["protected"]}>
Whether the profile has attribute metadata.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00573">573</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileIsCS {#a53cef5334d9e6535928ce4d79e7529e3}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileIsCS = false"
  labels = {["protected"]}>
Whether function profiles are context-sensitive flat profiles.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00579">579</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileIsFS {#ab3c8e7a5bebd5fa73b577fdc7677f7a5}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileIsFS = false"
  labels = {["protected"]}>
Whether the function profiles use FS discriminators.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00588">588</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileIsMD5 {#a549796a96109cea2cceae7d708fa5955}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileIsMD5 = false"
  labels = {["protected"]}>
Whether the profile uses <a href="/docs/api/classes/llvm/md5">MD5</a> for Sample Contexts and function names.

This can be one-way overriden by the user to force use <a href="/docs/api/classes/llvm/md5">MD5</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00604">604</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileIsPreInlined {#a09599626d454548b75a8508733b742ce}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileIsPreInlined = false"
  labels = {["protected"]}>
Whether function profile contains ShouldBeInlined contexts.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00582">582</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileIsProbeBased {#af3bd0368cb44b2cc97123f03de71efaa}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::ProfileIsProbeBased = false"
  labels = {["protected"]}>
Whether samples are collected based on pseudo probes.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00576">576</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### Profiles {#ad31357a0bab13543c1d9e22e22f33ec4}

<MemberDefinition
  prototype="SampleProfileMap llvm::sampleprof::SampleProfileReader::Profiles"
  labels = {["protected"]}>
Map every function to its associated profile.

The profile of every function executed at runtime is collected in the structure <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a>. This maps function objects to their corresponding profiles.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00529">529</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### ProfileSecRange {#a03fdd01c4b2069f558380547824c7373}

<MemberDefinition
  prototype={<>std::pair&lt;const uint8&#95;t &#42;, const uint8&#95;t &#42;&gt; llvm::sampleprof::SampleProfileReader::ProfileSecRange</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00570">570</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### Remapper {#a31a0b1a6e53cb0a08dbf78fc3cebc224}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;SampleProfileReaderItaniumRemapper&gt; llvm::sampleprof::SampleProfileReader::Remapper</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00557">557</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### SkipFlatProf {#a3a8cd3b6849f62c8ff4b44233374747d}

<MemberDefinition
  prototype="bool llvm::sampleprof::SampleProfileReader::SkipFlatProf = false"
  labels = {["protected"]}>
If SkipFlatProf is true, skip functions marked with !Flat in text mode or sections with SecFlagFlat flag in ExtBinary mode.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00608">608</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

### Summary {#a808d204826972c99cd36562eea139d23}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;ProfileSummary&gt; llvm::sampleprof::SampleProfileReader::Summary</>}
  labels = {["protected"]}>
Profile summary information.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00538">538</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Functions

### create() {#a1f2d1c30eab01a2f5ae485d3c3cbf5b4}

<MemberDefinition
  prototype={<>ErrorOr&lt; std::unique&#95;ptr&lt; SampleProfileReader &gt; &gt; SampleProfileReader::create (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Filename, <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp; C, <a href="/docs/api/classes/llvm/vfs/filesystem">vfs::FileSystem</a> &amp; FS, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a> P=<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">FSDiscriminatorPass::Base</a>, <a href="/docs/api/classes/llvm/stringref">StringRef</a> RemapFilename=&quot;&quot;)</>}
  labels = {["static"]}>
Create a sample profile reader appropriate to the file format.

Create a sample profile reader based on the format of the input file.

Create a remapper underlying if RemapFilename is not empty. Parameter P specifies the <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a>.


<ParametersList title="Parameters">
<ParametersListItem name="Filename">The file to open.</ParametersListItem>
<ParametersListItem name="C">The LLVM context to use to emit diagnostics.</ParametersListItem>
<ParametersListItem name="P">The <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a>.</ParametersListItem>
<ParametersListItem name="RemapFilename">The file used for profile remapping.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
an error code indicating the status of the created reader.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00460">460</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l01905">1905</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

### create() {#aa13d9a01b470d4ae7e0f1ea117f2e3dc}

<MemberDefinition
  prototype={<>ErrorOr&lt; std::unique&#95;ptr&lt; SampleProfileReader &gt; &gt; SampleProfileReader::create (std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/memorybuffer">MemoryBuffer</a> &gt; &amp; B, <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp; C, <a href="/docs/api/classes/llvm/vfs/filesystem">vfs::FileSystem</a> &amp; FS, <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a> P=<a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">FSDiscriminatorPass::Base</a>, <a href="/docs/api/classes/llvm/stringref">StringRef</a> RemapFilename=&quot;&quot;)</>}
  labels = {["static"]}>
Create a sample profile reader from the supplied memory buffer.

Create a sample profile reader based on the format of the input data.

Create a remapper underlying if RemapFilename is not empty. Parameter P specifies the <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a>.


<ParametersList title="Parameters">
<ParametersListItem name="B">The memory buffer to create the reader from (assumes ownership).</ParametersListItem>
<ParametersListItem name="C">The LLVM context to use to emit diagnostics.</ParametersListItem>
<ParametersListItem name="P">The <a href="/docs/api/namespaces/llvm/sampleprof/#a702f69807459cc25db5754a5f179d3fc">FSDiscriminatorPass</a>.</ParametersListItem>
<ParametersListItem name="RemapFilename">The file used for profile remapping.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
an error code indicating the status of the created reader.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00468">468</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp/#l01976">1976</a> of file <a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Static Functions

### takeSummary() {#a721924780859cc437b2316fb29833af1}

<MemberDefinition
  prototype={<>static std::unique&#95;ptr&lt; ProfileSummary &gt; llvm::sampleprof::SampleProfileReader::takeSummary (<a href="/docs/api/classes/llvm/sampleprof/sampleprofilereader">SampleProfileReader</a> &amp; Reader)</>}
  labels = {["inline", "protected", "static"]}>
Take ownership of the summary of this reader.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h/#l00542">542</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/sampleprofreader-h">SampleProfReader.h</a></li>
<li><a href="/docs/api/files/lib/lib/profiledata/sampleprofreader-cpp">SampleProfReader.cpp</a></li>
</ul>

</DoxygenPage>
