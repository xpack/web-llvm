---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/blockfrequencyinfoimpl
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `BlockFrequencyInfoImpl` Class Template Reference

<DoxygenPage pluginConfig={pluginConfig}>

Shared implementation for block frequency analysis. <a href="#details">More...</a>

## Declaration

<CodeBlock>template &lt;class BT&gt;
class llvm::BlockFrequencyInfoImpl&lt;BT&gt;</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Analysis/BlockFrequencyInfoImpl.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h"
  isLocal="true" />
</IncludesList>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase">BlockFrequencyInfoImplBase</a></>}>
Base class for <a href="/docs/api/classes/llvm/blockfrequencyinfoimpl">BlockFrequencyInfoImpl</a>. <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#afe64d00f7aecff57516383444c4b3d76">BFICallbackVH</a> = <a href="/docs/api/classes/llvm/bfi-detail/bficallbackvh">bfi&#95;detail::BFICallbackVH</a>&lt; BlockT, <a href="/docs/api/classes/llvm/blockfrequencyinfoimpl">BlockFrequencyInfoImpl</a> &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a060cde1e76aee52201aca1d45df488c9">BlockKeyT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::BlockKeyT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a735f162d26b93b2421512a6d42799a72">BlockT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::BlockT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a0161c9ebedda7198c3b56639cf1ad7d6">BranchProbabilityInfoT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::BranchProbabilityInfoT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#aab46ddca5279cb1581574dec7e411778">FunctionT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::FunctionT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#aa7e020cf0ea233ef36013e4c0291d950">LoopInfoT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::LoopInfoT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#afd9fcb9ed953dbead1038fd3dd7ea74d">LoopT</a> = typename <a href="/docs/api/structs/llvm/bfi-detail/typemap">bfi&#95;detail::TypeMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;::LoopT</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a6d8587d9fd7f456668b6b2760a96b3bf">Predecessor</a> = <a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt; <a href="/docs/api/structs/llvm/inverse">Inverse</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt; &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a51c9f9505fed698b3ee4e67776bb2eb8">ProbMatrixType</a> = std::vector&lt; std::vector&lt; std::pair&lt; size&#95;t, <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a5514a17c0ec3ccae841930a4f8f74f99">Scaled64</a> &gt; &gt; &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#a8d231c4d81102c8bed8a4dea43189153">rpot&#95;iterator</a> = typename std::vector&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt;::const&#95;iterator</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="using"
  name={<><a href="#aacc47d110dc000c7ce21633569fb3e59">Successor</a> = <a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="struct"
  name={<><a href="#ad948898612d08c1b750614d573ce2d92">bfi&#95;detail::BlockEdgesAdder&lt; BT &gt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  name={<><a href="#ac61cd6020768ae1e60dc3040ce5fbd8d">BlockFrequencyInfoImpl</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a90713bef7e4b1c185d5410e823d8f734">calculate</a> (const FunctionT &amp;F, const BranchProbabilityInfoT &amp;BPI, const LoopInfoT &amp;LI)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a0b3608d47dacd2c63e831fee11073c2c">dump</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#ad41feeb3401a872b89169602cbb541a7">forgetBlock</a> (const BlockT &#42;BB)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#ae87d24146ddae3b92a07246e2a63aa8b">getBlockFreq</a> (const BlockT &#42;BB) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="auto "
  name={<><a href="#a31905a32a4b7c89a7485afdf59c134bc">getBlockProfileCount</a> (const Function &amp;F, const BlockT &#42;BB, bool AllowSynthetic=false) const -&gt; std::optional&lt; uint64&#95;t &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BranchProbabilityInfoT &amp;</>}
  name={<><a href="#a462c497f36de3ac17fabf8654a1b9822">getBPI</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a890eb320a0268a610cea6fc12459b1c0">getEntryFreq</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a5514a17c0ec3ccae841930a4f8f74f99">Scaled64</a></>}
  name={<><a href="#a756b682b6d9fd9641480076412b99885">getFloatingBlockFreq</a> (const BlockT &#42;BB) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FunctionT &#42;</>}
  name={<><a href="#a46ebcdc76e05047581d00687517b7a2b">getFunction</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="auto "
  name={<><a href="#a859a919ec3e065977724b317af0611ae">getProfileCountFromFreq</a> (const Function &amp;F, BlockFrequency Freq, bool AllowSynthetic=false) const -&gt; std::optional&lt; uint64&#95;t &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="bool"
  name={<><a href="#a058de37a3c739f4c59a0f238f0741766">isIrrLoopHeader</a> (const BlockT &#42;BB)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;</>}
  name={<><a href="#ad05ed8871c23e9c87114b754bc6098ab">print</a> (raw&#95;ostream &amp;OS) const override</>}>
Print the frequencies for the current function. <a href="#ad05ed8871c23e9c87114b754bc6098ab">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#ab92a33fa61ab3c963e850d2ff5b59063">setBlockFreq</a> (const BlockT &#42;BB, BlockFrequency Freq)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a61a62f8b812123edf5c45e719f43d95b">verifyMatch</a> (BlockFrequencyInfoImpl&lt; BT &gt; &amp;Other) const</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a55efa5ed79424cc2a08555440fcf102b">applyIterativeInference</a> ()</>}>
Apply an iterative post-processing to infer correct counts for irr loops. <a href="#a55efa5ed79424cc2a08555440fcf102b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#abfed064f9311e92066de09b1da0d9dc3">computeIrreducibleMass</a> (LoopData &#42;OuterLoop, std::list&lt; LoopData &gt;::iterator Insert)</>}>
Compute mass in (and package up) irreducible SCCs. <a href="#abfed064f9311e92066de09b1da0d9dc3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#afd407cc4cfb807fd7a9f0d34f6ca7cf3">computeMassInFunction</a> ()</>}>
Compute mass in the top-level function. <a href="#afd407cc4cfb807fd7a9f0d34f6ca7cf3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="bool"
  name={<><a href="#ab71d30c415d508f5307a134b2dc1caa5">computeMassInLoop</a> (LoopData &amp;Loop)</>}>
Compute mass in a particular loop. <a href="#ab71d30c415d508f5307a134b2dc1caa5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a41d61bc22e0b838b765469a441f4060c">computeMassInLoops</a> ()</>}>
Compute mass in all loops. <a href="#a41d61bc22e0b838b765469a441f4060c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a5514a17c0ec3ccae841930a4f8f74f99">Scaled64</a></>}
  name={<><a href="#ace700789d7401dff13c36e01ae935efb">discrepancy</a> (const ProbMatrixType &amp;ProbMatrix, const std::vector&lt; Scaled64 &gt; &amp;Freq) const</>}>
Compute the discrepancy between current block frequencies and the probability matrix. <a href="#ace700789d7401dff13c36e01ae935efb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#afe5c62b76a03032a1b1007326a9f0573">findReachableBlocks</a> (std::vector&lt; const BlockT &#42; &gt; &amp;Blocks) const</>}>
Find all blocks to apply inference on, that is, reachable from the entry and backward reachable from exists along edges with positive probability. <a href="#afe5c62b76a03032a1b1007326a9f0573">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42;</>}
  name={<><a href="#a559b16f4f6454964fb5a76de8578e446">getBlock</a> (const BlockNode &amp;Node) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="std::string"
  name={<><a href="#a5adf1e34042445ba7d34608a99bed4cb">getBlockName</a> (const BlockNode &amp;Node) const override</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<>size&#95;t</>}
  name={<><a href="#ac42c2f437b4bafc1b19dd28bdde0a673">getIndex</a> (const rpot&#95;iterator &amp;I) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a></>}
  name={<><a href="#a9c41a5bdfb856e026d81f250d03d1f36">getNode</a> (const rpot&#95;iterator &amp;I) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a></>}
  name={<><a href="#a64d198c6bda7572cf696df00b8480cf9">getNode</a> (const BlockT &#42;BB) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a75098bc034c0ae157a1a37df681c7b75">initializeLoops</a> ()</>}>
Initialize loop data. <a href="#a75098bc034c0ae157a1a37df681c7b75">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a259150377dc3002214222187d49f177e">initializeRPOT</a> ()</>}>
Run (and save) a post-order traversal. <a href="#a259150377dc3002214222187d49f177e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a8e55a117e16728b8604b633bdfb3e56c">initTransitionProbabilities</a> (const std::vector&lt; const BlockT &#42; &gt; &amp;Blocks, const DenseMap&lt; const BlockT &#42;, size&#95;t &gt; &amp;BlockIndex, ProbMatrixType &amp;ProbMatrix) const</>}>
Build a matrix of probabilities with transitions (edges) between the blocks: ProbMatrix&#91;I&#93; holds pairs (J, P), where Pr&#91;J -&gt; I | J&#93; = P. <a href="#a8e55a117e16728b8604b633bdfb3e56c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="void"
  name={<><a href="#a156910c27011aee74e1b3772871763a5">iterativeInference</a> (const ProbMatrixType &amp;ProbMatrix, std::vector&lt; Scaled64 &gt; &amp;Freq) const</>}>
Run iterative inference for a probability matrix and initial frequencies. <a href="#a156910c27011aee74e1b3772871763a5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="bool"
  name={<><a href="#aeb60f4e5797bfca56175b4e53e17866c">needIterativeInference</a> () const</>}>
The current implementation for computing relative block frequencies does not handle correctly control-flow graphs containing irreducible loops. <a href="#aeb60f4e5797bfca56175b4e53e17866c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="bool"
  name={<><a href="#a15566d562fb0f6fbe2f94b26460527b3">propagateMassToSuccessors</a> (LoopData &#42;OuterLoop, const BlockNode &amp;Node)</>}>
Propagate to a block&#39;s successors. <a href="#a15566d562fb0f6fbe2f94b26460527b3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<>rpot&#95;iterator</>}
  name={<><a href="#aa644f1d80b7adcedc4b62c2d3fdaf4f2">rpot&#95;begin</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<>rpot&#95;iterator</>}
  name={<><a href="#a6a5aac95def8316310f6dcecd9f6c741">rpot&#95;end</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type="bool"
  name={<><a href="#a65b2af989057016a00ad528f8866543e">tryToComputeMassInFunction</a> ()</>}>
Try to compute mass in the top-level function. <a href="#a65b2af989057016a00ad528f8866543e">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BranchProbabilityInfoT &#42;</>}
  name={<><a href="#aea2f00cea13f31334eca44f3d90177b3">BPI</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FunctionT &#42;</>}
  name={<><a href="#a3e8daf9fb6acc35d008f2e778447d0f6">F</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> LoopInfoT &#42;</>}
  name={<><a href="#ab2a06fc5a0564e4672933eae2db17d82">LI</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; BlockKeyT, std::pair&lt; <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a>, <a href="/docs/api/classes/llvm/bfi-detail/bficallbackvh">BFICallbackVH</a> &gt; &gt;</>}
  name={<><a href="#ad9ab26487910ce0714a3c1825df160d4">Nodes</a></>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class BT&gt;</>}
  type={<>std::vector&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt;</>}
  name={<><a href="#a7d3d6da462523a7e1db554b749d445c5">RPOT</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Shared implementation for block frequency analysis.

This is a shared implementation of <a href="/docs/api/classes/llvm/blockfrequencyinfo">BlockFrequencyInfo</a> and <a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a>, and calculates the relative frequencies of blocks.

<a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> defines a loop as a &quot;non-trivial&quot; SCC dominated by a single block, which is called the header. A given loop, L, can have sub-loops, which are loops within the subgraph of L that exclude its header. (A &quot;trivial&quot; SCC consists of a single block that does not have a self-edge.)

In addition to loops, this algorithm has limited support for irreducible SCCs, which are SCCs with multiple entry blocks. Irreducible SCCs are discovered on the fly, and modelled as loops with multiple headers.

The headers of irreducible sub-SCCs consist of its entry blocks and all nodes that are targets of a backedge within it (excluding backedges within true sub-loops). Block frequency calculations act as if a block is inserted that intercepts all the edges to the headers. All backedges and entries point to this block. Its successors are the headers, which split the frequency evenly.

This algorithm leverages <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a6e6da6d64b5e1623157336544dd0e7a2">BlockMass</a> and <a href="/docs/api/classes/llvm/scalednumber">ScaledNumber</a> to maintain precision, separates mass distribution from loop scaling, and dithers to eliminate probability mass loss.

The implementation is split between <a href="/docs/api/classes/llvm/blockfrequencyinfoimpl">BlockFrequencyInfoImpl</a>, which knows the type of graph being modelled (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> vs. <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a>), and <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase">BlockFrequencyInfoImplBase</a>, which doesn&#39;t. The base class uses <em><a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a></em>, a wrapper around a uint32&#95;t. <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a> is numbered from 0 in reverse-post order. This gives two advantages: it&#39;s easy to compare the relative ordering of two nodes, and maps keyed on BlockT can be represented by vectors.

This algorithm is O(V+E), unless there is irreducible control flow, in which case it&#39;s O(V&#42;E) in the worst case.

These are the main stages:


<ul>
<li>Reverse post-order traversal (<em>initializeRPOT()</em>).
Run a single post-order traversal and save it (in reverse) in RPOT. All other stages make use of this ordering. Save a lookup from BlockT to <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a> (the index into RPOT) in Nodes.</li>
<li><a href="/docs/api/classes/llvm/loop">Loop</a> initialization (<em>initializeLoops()</em>).
Translate LoopInfo/MachineLoopInfo into a form suitable for the rest of the algorithm. In particular, store the immediate members of each loop in reverse post-order.</li>
<li>Calculate mass and scale in loops (<em>computeMassInLoops()</em>).
For each loop (bottom-up), distribute mass through the DAG resulting from ignoring backedges and treating sub-loops as a single pseudo-node. Track the backedge mass distributed to the loop header, and use it to calculate the loop scale (number of loop iterations). Immediate members that represent sub-loops will already have been visited and packaged into a pseudo-node.
Distributing mass in a loop is a reverse-post-order traversal through the loop. Start by assigning full mass to the <a href="/docs/api/classes/llvm/loop">Loop</a> header. For each node in the loop: 

<CodeBlock>
- Fetch and categorize the weight distribution for its successors.
  If this is a packaged-subloop, the weight distribution is stored
  in \\a LoopData::Exits.  Otherwise, fetch it from
  BranchProbabilityInfo.

- Each successor is categorized as \\a Weight::Local, a local edge
  within the current loop, \\a Weight::Backedge, a backedge to the
  loop header, or \\a Weight::Exit, any successor outside the loop.
  The weight, the successor, and its category are stored in \\a
  Distribution.  There can be multiple edges to each successor.

- If there&#39;s a backedge to a non-header, there&#39;s an irreducible SCC.
  The usual flow is temporarily aborted.  \\a
  computeIrreducibleMass() finds the irreducible SCCs within the
  loop, packages them up, and restarts the flow.

- Normalize the distribution:  scale weights down so that their sum
  is 32-bits, and coalesce multiple edges to the same node.

- Distribute the mass accordingly, dithering to minimize mass loss,
  as described in \\a distributeMass().
</CodeBlock>
In the case of irreducible loops, instead of a single loop header, there will be several. The computation of backedge masses is similar but instead of having a single backedge mass, there will be one backedge per loop header. In these cases, each backedge will carry a mass proportional to the edge weights along the corresponding path.
At the end of propagation, the full mass assigned to the loop will be distributed among the loop headers proportionally according to the mass flowing through their backedges.
Finally, calculate the loop scale from the accumulated backedge mass.</li>
<li>Distribute mass in the function (<em>computeMassInFunction()</em>).
Finally, distribute mass through the DAG resulting from packaging all loops in the function. This uses the same algorithm as distributing mass in a loop, except that there are no exit or backedge edges.</li>
<li>Unpackage loops (<em><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#ab4e1554fca8ef98622714e55215db4a9">unwrapLoops()</a></em>).
Initialize each block&#39;s frequency to a floating point representation of its mass.
Visit loops top-down, scaling the frequencies of its immediate members by the loop&#39;s pseudo-node&#39;s frequency.</li>
<li>Convert frequencies to a 64-bit range (<em><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a8381abddeccf17690f4533ba6ecce36b">finalizeMetrics()</a></em>).
Using the min and max frequencies as a guide, translate floating point frequencies to an appropriate range in uint64&#95;t.</li>
</ul>


It has some known flaws.


<ul>
<li>The model of irreducible control flow is a rough approximation.
Modelling irreducible control flow exactly involves setting up and solving a group of infinite geometric series. Such precision is unlikely to be worthwhile, since most of our algorithms give up on irreducible control flow anyway.
Nevertheless, we might find that we need to get closer. Here&#39;s a sort of TODO list for the model with diminishing returns, to be completed as necessary.
<ul>
<li>The headers for the <em><a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/loopdata">LoopData</a></em> representing an irreducible SCC include non-entry blocks. When these extra blocks exist, they indicate a self-contained irreducible sub-SCC. We could treat them as sub-loops, rather than arbitrarily shoving the problematic blocks into the headers of the main irreducible SCC.</li>
<li>Entry frequencies are assumed to be evenly split between the headers of a given irreducible SCC, which is the only option if we need to compute mass in the SCC before its parent loop. Instead, we could partially compute mass in the parent loop, and stop when we get to the SCC. Here, we have the correct ratio of entry masses, which we can use to adjust their relative frequencies. Compute mass in the SCC, and then continue propagation in the parent.</li>
<li>We can propagate mass iteratively through the SCC, for some fixed number of iterations. Each iteration starts by assigning the entry blocks their backedge mass from the prior iteration. The final mass for each block (and each exit, and the total backedge mass used for computing loop scale) is the sum of all iterations. (Running this until fixed point would &quot;solve&quot; the geometric series by simulation.)</li>
</ul></li>
</ul>

Definition at line 845 of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.

<SectionDefinition>

## Private Member Typedefs

### BFICallbackVH {#afe64d00f7aecff57516383444c4b3d76}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BFICallbackVH = 
      bfi&#95;detail::BFICallbackVH&lt;BlockT, BlockFrequencyInfoImpl&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00858">858</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### BlockKeyT {#a060cde1e76aee52201aca1d45df488c9}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BlockKeyT =  typename bfi&#95;detail::TypeMap&lt;BT&gt;::BlockKeyT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00850">850</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### BlockT {#a735f162d26b93b2421512a6d42799a72}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BlockT =  typename bfi&#95;detail::TypeMap&lt;BT&gt;::BlockT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00849">849</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### BranchProbabilityInfoT {#a0161c9ebedda7198c3b56639cf1ad7d6}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BranchProbabilityInfoT = 
      typename bfi&#95;detail::TypeMap&lt;BT&gt;::BranchProbabilityInfoT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00852">852</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### FunctionT {#aab46ddca5279cb1581574dec7e411778}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::FunctionT =  typename bfi&#95;detail::TypeMap&lt;BT&gt;::FunctionT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00851">851</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### LoopInfoT {#aa7e020cf0ea233ef36013e4c0291d950}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::LoopInfoT =  typename bfi&#95;detail::TypeMap&lt;BT&gt;::LoopInfoT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00855">855</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### LoopT {#afd9fcb9ed953dbead1038fd3dd7ea74d}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::LoopT =  typename bfi&#95;detail::TypeMap&lt;BT&gt;::LoopT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00854">854</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### Predecessor {#a6d8587d9fd7f456668b6b2760a96b3bf}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::Predecessor =  GraphTraits&lt;Inverse&lt;const BlockT &#42;&gt;&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00857">857</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### ProbMatrixType {#a51c9f9505fed698b3ee4e67776bb2eb8}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::ProbMatrixType =  std::vector&lt;std::vector&lt;std::pair&lt;size&#95;t, Scaled64&gt;&gt;&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00982">982</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### rpot&#95;iterator {#a8d231c4d81102c8bed8a4dea43189153}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::rpot&#95;iterator =  typename std::vector&lt;const BlockT &#42;&gt;::const&#95;iterator</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00869">869</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### Successor {#aacc47d110dc000c7ce21633569fb3e59}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>using llvm::BlockFrequencyInfoImpl&lt; BT &gt;::Successor =  GraphTraits&lt;const BlockT &#42;&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00856">856</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Friends

### bfi&#95;detail::BlockEdgesAdder&lt; BT &gt; {#ad948898612d08c1b750614d573ce2d92}

<MemberDefinition
  prototype={<>friend struct <a href="/docs/api/structs/llvm/bfi-detail/blockedgesadder">bfi&#95;detail::BlockEdgesAdder</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00617">617</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### BlockFrequencyInfoImpl() {#ac61cd6020768ae1e60dc3040ce5fbd8d}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BlockFrequencyInfoImpl ()</>}
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01007">1007</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### calculate() {#a90713bef7e4b1c185d5410e823d8f734}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::calculate (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FunctionT &amp; F, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BranchProbabilityInfoT &amp; BPI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> LoopInfoT &amp; LI)</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01011">1011</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### dump() {#a0b3608d47dacd2c63e831fee11073c2c}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype="void llvm::BlockFrequencyInfoImplBase::dump () const"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01066">1066</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### forgetBlock() {#ad41feeb3401a872b89169602cbb541a7}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::forgetBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01040">1040</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getBlockFreq() {#ae87d24146ddae3b92a07246e2a63aa8b}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>BlockFrequency llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getBlockFreq (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01016">1016</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getBlockProfileCount() {#a31905a32a4b7c89a7485afdf59c134bc}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>std::optional&lt; uint64&#95;t &gt; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getBlockProfileCount (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB, bool AllowSynthetic=false) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01021">1021</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getBPI() {#a462c497f36de3ac17fabf8654a1b9822}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const BranchProbabilityInfoT &amp; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getBPI () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01051">1051</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getEntryFreq() {#a890eb320a0268a610cea6fc12459b1c0}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype="BlockFrequency llvm::BlockFrequencyInfoImplBase::getEntryFreq () const"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01014">1014</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getFloatingBlockFreq() {#a756b682b6d9fd9641480076412b99885}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>Scaled64 llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getFloatingBlockFreq (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01047">1047</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getFunction() {#a46ebcdc76e05047581d00687517b7a2b}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const FunctionT &#42; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getFunction () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01009">1009</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getProfileCountFromFreq() {#a859a919ec3e065977724b317af0611ae}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>std::optional&lt; uint64&#95;t &gt; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getProfileCountFromFreq (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> Freq, bool AllowSynthetic=false) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01028">1028</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### isIrrLoopHeader() {#a058de37a3c739f4c59a0f238f0741766}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>bool llvm::BlockFrequencyInfoImpl&lt; BT &gt;::isIrrLoopHeader (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01034">1034</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### print() {#ad05ed8871c23e9c87114b754bc6098ab}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>raw&#95;ostream &amp; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::print (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS) const</>}
  labels = {["virtual"]}>
Print the frequencies for the current function.

Prints the frequencies for the blocks in the current function.

Blocks are printed in the natural iteration order of the function, rather than reverse post-order. This provides two advantages: writing -analyze tests is easier (since blocks come out in source order), and even unreachable blocks are printed.

<em><a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a80efc92dca9ca54505f0a1399578c244">BlockFrequencyInfoImplBase::print()</a></em> only knows reverse post-order, so we need to override it here.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01064">1064</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### setBlockFreq() {#ab92a33fa61ab3c963e850d2ff5b59063}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::setBlockFreq (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB, <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> Freq)</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01038">1038</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### verifyMatch() {#a61a62f8b812123edf5c45e719f43d95b}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::verifyMatch (<a href="/docs/api/classes/llvm/blockfrequencyinfoimpl">BlockFrequencyInfoImpl</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/bittracker-cpp/#ae3e523a6a11b1e24604b40363978a62a">BT</a> &gt; &amp; Other) const</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01068">1068</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### applyIterativeInference() {#a55efa5ed79424cc2a08555440fcf102b}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::applyIterativeInference ()</>}>
Apply an iterative post-processing to infer correct counts for irr loops.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00980">980</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### computeIrreducibleMass() {#abfed064f9311e92066de09b1da0d9dc3}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::computeIrreducibleMass (<a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/loopdata">LoopData</a> &#42; OuterLoop, std::list&lt; <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/loopdata">LoopData</a> &gt;::iterator Insert)</>}>
Compute mass in (and package up) irreducible SCCs.

Find the irreducible SCCs in <code>OuterLoop</code>, add them to <em>Loops</em> (in front of <code>Insert</code>), and call <em>computeMassInLoop()</em> on each of them.

If <code>OuterLoop</code> is <code>nullptr</code>, it refers to the top-level function.


<SectionUser title="Precondition">
<em>computeMassInLoop()</em> has been called for each subloop of <code>OuterLoop</code>.
</SectionUser>


<SectionUser title="Precondition">
<code>Insert</code> points at the last loop successfully processed by <em>computeMassInLoop()</em>.
</SectionUser>


<SectionUser title="Precondition">
<code>OuterLoop</code> has irreducible SCCs.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00941">941</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### computeMassInFunction() {#afd407cc4cfb807fd7a9f0d34f6ca7cf3}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::computeMassInFunction ()</>}>
Compute mass in the top-level function.

Uses <em>tryToComputeMassInFunction()</em> and <em>computeIrreducibleMass()</em> to compute mass in the top-level function.


<SectionUser title="Postcondition">
<em>tryToComputeMassInFunction()</em> has returned <code>true</code>.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00961">961</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### computeMassInLoop() {#ab71d30c415d508f5307a134b2dc1caa5}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>bool llvm::BlockFrequencyInfoImpl&lt; BT &gt;::computeMassInLoop (<a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/loopdata">LoopData</a> &amp; Loop)</>}>
Compute mass in a particular loop.

Assign mass to <code><a href="/docs/api/classes/llvm/loop">Loop</a>&#39;s</code> header, and then for each block in <code><a href="/docs/api/classes/llvm/loop">Loop</a></code> in reverse post-order, distribute mass to its successors. Only visits nodes that have not been packaged into sub-loops.


<SectionUser title="Precondition">
<em>computeMassInLoop()</em> has been called for each subloop of <code><a href="/docs/api/classes/llvm/loop">Loop</a></code>.
</SectionUser>


<SectionUser title="Returns">
<code>true</code> unless there&#39;s an irreducible backedge.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00917">917</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### computeMassInLoops() {#a41d61bc22e0b838b765469a441f4060c}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::computeMassInLoops ()</>}>
Compute mass in all loops.

For each loop bottom-up, call <em>computeMassInLoop()</em>.

<em>computeMassInLoop()</em> aborts (and returns <code>false</code>) on loops that contain a irreducible sub-SCCs. <a href="/docs/api/classes/llvm/use">Use</a> <em>computeIrreducibleMass()</em> and then re-enter <em>computeMassInLoop()</em>.


<SectionUser title="Postcondition">
<em>computeMassInLoop()</em> has returned <code>true</code> for every loop.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00953">953</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### discrepancy() {#ace700789d7401dff13c36e01ae935efb}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>BlockFrequencyInfoImplBase::Scaled64 llvm::BlockFrequencyInfoImpl&lt; BT &gt;::discrepancy (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> ProbMatrixType &amp; ProbMatrix, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a5514a17c0ec3ccae841930a4f8f74f99">Scaled64</a> &gt; &amp; Freq) const</>}>
Compute the discrepancy between current block frequencies and the probability matrix.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l01002">1002</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### findReachableBlocks() {#afe5c62b76a03032a1b1007326a9f0573}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::findReachableBlocks (std::vector&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt; &amp; Blocks) const</>}>
Find all blocks to apply inference on, that is, reachable from the entry and backward reachable from exists along edges with positive probability.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00990">990</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getBlock() {#a559b16f4f6454964fb5a76de8578e446}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const BlockT &#42; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a> &amp; Node) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00882">882</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getBlockName() {#a5adf1e34042445ba7d34608a99bed4cb}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>std::string llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getBlockName (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a> &amp; Node) const</>}
  labels = {["inline", "virtual"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00963">963</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getIndex() {#ac42c2f437b4bafc1b19dd28bdde0a673}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>size&#95;t llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getIndex (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> rpot&#95;iterator &amp; I) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00874">874</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getNode() {#a9c41a5bdfb856e026d81f250d03d1f36}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>BlockNode llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getNode (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> rpot&#95;iterator &amp; I) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00876">876</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### getNode() {#a64d198c6bda7572cf696df00b8480cf9}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>BlockNode llvm::BlockFrequencyInfoImpl&lt; BT &gt;::getNode (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; BB) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00880">880</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### initializeLoops() {#a75098bc034c0ae157a1a37df681c7b75}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::initializeLoops ()</>}>
Initialize loop data.

Build up <em>Loops</em> using <em><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a></em>. <em><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a></em> gives us a mapping from each block to the deepest loop it&#39;s in, but we need the inverse. For each loop, we store in reverse post-order its &quot;immediate&quot; members, defined as the header, the headers of immediate sub-loops, and all other blocks in the loop that are not in sub-loops.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00899">899</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### initializeRPOT() {#a259150377dc3002214222187d49f177e}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::initializeRPOT ()</>}>
Run (and save) a post-order traversal.

Saves a reverse post-order traversal of all the nodes in <em>F</em>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00890">890</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### initTransitionProbabilities() {#a8e55a117e16728b8604b633bdfb3e56c}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::initTransitionProbabilities (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42; &gt; &amp; Blocks, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> BlockT &#42;, size&#95;t &gt; &amp; BlockIndex, ProbMatrixType &amp; ProbMatrix) const</>}>
Build a matrix of probabilities with transitions (edges) between the blocks: ProbMatrix&#91;I&#93; holds pairs (J, P), where Pr&#91;J -&gt; I | J&#93; = P.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00994">994</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### iterativeInference() {#a156910c27011aee74e1b3772871763a5}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>void llvm::BlockFrequencyInfoImpl&lt; BT &gt;::iterativeInference (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> ProbMatrixType &amp; ProbMatrix, std::vector&lt; <a href="/docs/api/classes/llvm/blockfrequencyinfoimplbase/#a5514a17c0ec3ccae841930a4f8f74f99">Scaled64</a> &gt; &amp; Freq) const</>}>
Run iterative inference for a probability matrix and initial frequencies.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00985">985</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### needIterativeInference() {#aeb60f4e5797bfca56175b4e53e17866c}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>bool llvm::BlockFrequencyInfoImpl&lt; BT &gt;::needIterativeInference () const</>}>
The current implementation for computing relative block frequencies does not handle correctly control-flow graphs containing irreducible loops.

To resolve the problem, we apply a post-processing step, which iteratively updates block frequencies based on the frequencies of their predesessors. This corresponds to finding the stationary point of the Markov chain by an iterative method aka &quot;PageRank computation&quot;. The algorithm takes at most O(|E| &#42; IterativeBFIMaxIterations) steps but typically converges faster.

Decide whether we want to apply iterative inference for a given function.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00977">977</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### propagateMassToSuccessors() {#a15566d562fb0f6fbe2f94b26460527b3}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>bool llvm::BlockFrequencyInfoImpl&lt; BT &gt;::propagateMassToSuccessors (<a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/loopdata">LoopData</a> &#42; OuterLoop, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/blockfrequencyinfoimplbase/blocknode">BlockNode</a> &amp; Node)</>}>
Propagate to a block&#39;s successors.

In the context of distributing mass through <code>OuterLoop</code>, divide the mass currently assigned to <code><a href="/docs/api/classes/node">Node</a></code> between its successors.


<SectionUser title="Returns">
<code>true</code> unless there&#39;s an irreducible backedge.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00907">907</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### rpot&#95;begin() {#aa644f1d80b7adcedc4b62c2d3fdaf4f2}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>rpot&#95;iterator llvm::BlockFrequencyInfoImpl&lt; BT &gt;::rpot&#95;begin () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00871">871</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### rpot&#95;end() {#a6a5aac95def8316310f6dcecd9f6c741}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>rpot&#95;iterator llvm::BlockFrequencyInfoImpl&lt; BT &gt;::rpot&#95;end () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00872">872</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### tryToComputeMassInFunction() {#a65b2af989057016a00ad528f8866543e}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>bool llvm::BlockFrequencyInfoImpl&lt; BT &gt;::tryToComputeMassInFunction ()</>}>
Try to compute mass in the top-level function.

Assign mass to the entry block, and then for each block in reverse post-order, distribute mass to its successors. Skips nodes that have been packaged into loops.


<SectionUser title="Precondition">
<em>computeMassInLoops()</em> has been called.
</SectionUser>


<SectionUser title="Returns">
<code>true</code> unless there&#39;s an irreducible backedge.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00927">927</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### BPI {#aea2f00cea13f31334eca44f3d90177b3}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const BranchProbabilityInfoT&#42; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::BPI = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00861">861</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### F {#a3e8daf9fb6acc35d008f2e778447d0f6}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const FunctionT&#42; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::F = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00863">863</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### LI {#ab2a06fc5a0564e4672933eae2db17d82}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>const LoopInfoT&#42; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::LI = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00862">862</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### Nodes {#ad9ab26487910ce0714a3c1825df160d4}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>DenseMap&lt;BlockKeyT, std::pair&lt;BlockNode, BFICallbackVH&gt; &gt; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::Nodes</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00867">867</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

### RPOT {#a7d3d6da462523a7e1db554b749d445c5}

<MemberDefinition
  template={<>template &lt;class BT&gt;</>}
  prototype={<>std::vector&lt;const BlockT &#42;&gt; llvm::BlockFrequencyInfoImpl&lt; BT &gt;::RPOT</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h/#l00866">866</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/analysis/blockfrequencyinfoimpl-h">BlockFrequencyInfoImpl.h</a></li>
</ul>

</DoxygenPage>
