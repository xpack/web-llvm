---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CopyConstrain` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Post-process the DAG to create weak edges from all uses of a copy to the one use that defines the copy&#39;s source vreg, most likely an induction variable increment. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{MachineScheduler.cpp}::CopyConstrain</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/scheduledagmutation">ScheduleDAGMutation</a></>}>
Mutate the DAG as a postpass after normal DAG building. <a href="/docs/api/classes/llvm/scheduledagmutation/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a42e9bb90b21ba8622406f3337df0c467">CopyConstrain</a> (const TargetInstrInfo &#42;, const TargetRegisterInfo &#42;)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#af6b0c8c54226e0aafa107e5e92c813a2">apply</a> (ScheduleDAGInstrs &#42;DAGInstrs) override</>}>
Callback from DAG postProcessing to create weak edges to encourage copy elimination. <a href="#af6b0c8c54226e0aafa107e5e92c813a2">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#aee8fb987217bee89c0f2059168e834ec">constrainLocalCopy</a> (SUnit &#42;CopySU, ScheduleDAGMILive &#42;DAG)</>}>
constrainLocalCopy handles two possibilities: 1) Local src: I0: = dst I1: src = ... I2: = dst I3: dst = src (copy) (create pred-&gt;succ edges I0-&gt;I1, I2-&gt;I1) <a href="#aee8fb987217bee89c0f2059168e834ec">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/slotindex">SlotIndex</a></>}
  name={<><a href="#a97cd7f528f27ee8132dbc61f1545c0ab">RegionBeginIdx</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/slotindex">SlotIndex</a></>}
  name={<><a href="#a7d2ebcc873d1b831b941b2066e689a6d">RegionEndIdx</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Post-process the DAG to create weak edges from all uses of a copy to the one use that defines the copy&#39;s source vreg, most likely an induction variable increment.

Definition at line 2030 of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.

<SectionDefinition>

## Public Constructors

### CopyConstrain() {#a42e9bb90b21ba8622406f3337df0c467}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;MachineScheduler.cpp&#125;::CopyConstrain::CopyConstrain (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp/#l02039">2039</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### apply() {#af6b0c8c54226e0aafa107e5e92c813a2}

<MemberDefinition
  prototype={<>void CopyConstrain::apply (<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42; DAGInstrs)</>}
  labels = {["virtual"]}>
Callback from DAG postProcessing to create weak edges to encourage copy elimination.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp/#l02041">2041</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Functions

### constrainLocalCopy() {#aee8fb987217bee89c0f2059168e834ec}

<MemberDefinition
  prototype={<>void CopyConstrain::constrainLocalCopy (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42; CopySU, <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42; DAG)</>}
  labels = {["protected"]}>
constrainLocalCopy handles two possibilities: 1) Local src: I0: = dst I1: src = ... I2: = dst I3: dst = src (copy) (create pred-&gt;succ edges I0-&gt;I1, I2-&gt;I1)

2) Local copy: I0: dst = src (copy) I1: = dst I2: src = ... I3: = dst (create pred-&gt;succ edges I1-&gt;I2, I3-&gt;I2)

Although the <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a> is currently constrained to single blocks, this algorithm should handle extended blocks. An EBB is a set of contiguously numbered blocks such that the previous block in the EBB is always the single predecessor.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp/#l02044">2044</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### RegionBeginIdx {#a97cd7f528f27ee8132dbc61f1545c0ab}

<MemberDefinition
  prototype={<>SlotIndex anonymous&#95;namespace&#123;MachineScheduler.cpp&#125;::CopyConstrain::RegionBeginIdx</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp/#l02032">2032</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### RegionEndIdx {#a7d2ebcc873d1b831b941b2066e689a6d}

<MemberDefinition
  prototype={<>SlotIndex anonymous&#95;namespace&#123;MachineScheduler.cpp&#125;::CopyConstrain::RegionEndIdx</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp/#l02036">2036</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a></li>
</ul>

</DoxygenPage>
