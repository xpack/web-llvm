---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetracker
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `ValueTracker` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Helper class to track the possible sources of a value defined by a (chain of) copy related instructions. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{PeepholeOptimizer.cpp}::ValueTracker</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a2b6a1a42542bec9018068ce22e56f1eb">ValueTracker</a> (Register Reg, unsigned DefSubReg, const MachineRegisterInfo &amp;MRI, const TargetInstrInfo &#42;TII=nullptr)</>}>
Create a <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetracker">ValueTracker</a> instance for the value defined by <code>Reg</code>. <a href="#a2b6a1a42542bec9018068ce22e56f1eb">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#a71b7cfbae828b6dc34596c7019ab029f">getNextSource</a> ()</>}>
Following the use-def chain, get the next available source for the tracked value. <a href="#a71b7cfbae828b6dc34596c7019ab029f">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#aeee4bcd237f8d97071714317b6bcbf34">getNextSourceFromBitcast</a> ()</>}>
Specialized version of getNextSource for Bitcast instructions. <a href="#aeee4bcd237f8d97071714317b6bcbf34">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#aa8bb902ce1f23343cb503505a9607e60">getNextSourceFromCopy</a> ()</>}>
Specialized version of getNextSource for Copy instructions. <a href="#aa8bb902ce1f23343cb503505a9607e60">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#a20b816ba163c06d2ff095300170a4fe4">getNextSourceFromExtractSubreg</a> ()</>}>
Specialized version of getNextSource for ExtractSubreg instructions. <a href="#a20b816ba163c06d2ff095300170a4fe4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#a706ad0761ae5f9af29e9eb065f82ced5">getNextSourceFromInsertSubreg</a> ()</>}>
Specialized version of getNextSource for InsertSubreg instructions. <a href="#a706ad0761ae5f9af29e9eb065f82ced5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#aaee57a86cc392b89d8d504333b00edd6">getNextSourceFromPHI</a> ()</>}>
Specialized version of getNextSource for PHI instructions. <a href="#aaee57a86cc392b89d8d504333b00edd6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#a8c75ae2b47fa1bb13ec6b43006ba9652">getNextSourceFromRegSequence</a> ()</>}>
Specialized version of getNextSource for RegSequence instructions. <a href="#a8c75ae2b47fa1bb13ec6b43006ba9652">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#ae79e90e9fef87cda3e4105442c39b141">getNextSourceFromSubregToReg</a> ()</>}>
Specialized version of getNextSource for SubregToReg instructions. <a href="#ae79e90e9fef87cda3e4105442c39b141">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a></>}
  name={<><a href="#a7707f1a359a5e0bb01b4fbbe2e30c5fa">getNextSourceImpl</a> ()</>}>
Dispatcher to the right underlying implementation of getNextSource. <a href="#a7707f1a359a5e0bb01b4fbbe2e30c5fa">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;</>}
  name={<><a href="#a4b62585fe0ffd72b63a6a8603247c6c5">Def</a> = nullptr</>}>
The current point into the use-def chain. <a href="#a4b62585fe0ffd72b63a6a8603247c6c5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a0f20281ecd070dd95a2846006ed63773">DefIdx</a> = 0</>}>
The index of the definition in Def. <a href="#a0f20281ecd070dd95a2846006ed63773">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a1e9953ce80361b9f9575a586c3aea0b5">DefSubReg</a></>}>
The sub register index of the definition. <a href="#a1e9953ce80361b9f9575a586c3aea0b5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;</>}
  name={<><a href="#a452edf2a2696bd774021d366abeb5301">MRI</a></>}>
<a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> used to perform tracking. <a href="#a452edf2a2696bd774021d366abeb5301">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/register">Register</a></>}
  name={<><a href="#af79ccbf65f7656fdee8d7994956a9f7a">Reg</a></>}>
The register where the value can be found. <a href="#af79ccbf65f7656fdee8d7994956a9f7a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;</>}
  name={<><a href="#a393f8c961feb234320d3dcf4e1ffae58">TII</a></>}>
Optional <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> used to perform some complex tracking. <a href="#a393f8c961feb234320d3dcf4e1ffae58">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Helper class to track the possible sources of a value defined by a (chain of) copy related instructions.

Given a definition (instruction and definition index), this class follows the use-def chain to find successive suitable sources. The given source can be used to rewrite the definition into def = COPY src.

For instance, let us consider the following snippet: v0 = v2 = INSERT&#95;SUBREG v1, v0, sub0 def = COPY v2.sub0

Using a <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetracker">ValueTracker</a> for def = COPY v2.sub0 will give the following suitable sources: v2.sub0 and v0. Then, def can be rewritten into def = COPY v0.

Definition at line 703 of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.

<SectionDefinition>

## Public Constructors

### ValueTracker() {#a2b6a1a42542bec9018068ce22e56f1eb}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::ValueTracker (<a href="/docs/api/classes/llvm/register">Register</a> Reg, unsigned DefSubReg, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42; TII=nullptr)</>}
  labels = {["inline"]}>
Create a <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetracker">ValueTracker</a> instance for the value defined by <code>Reg</code>.

<code>DefSubReg</code> represents the sub register index the value tracker will track. It does not need to match the sub register index used in the definition of <code>Reg</code>. If <code>Reg</code> is a physical register, a value tracker constructed with this constructor will not find any alternative source. Indeed, when <code>Reg</code> is a physical register that constructor does not know which definition of <code>Reg</code> it should track. <a href="/docs/api/classes/llvm/use">Use</a> the next constructor to track a physical register.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00757">757</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### getNextSource() {#a71b7cfbae828b6dc34596c7019ab029f}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSource ()">
Following the use-def chain, get the next available source for the tracked value.

<SectionUser title="Returns">
A <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a> containing a set of registers and sub registers with tracked values. A <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/valuetrackerresult">ValueTrackerResult</a> with an empty set of registers means no source was found.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00771">771</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### getNextSourceFromBitcast() {#aeee4bcd237f8d97071714317b6bcbf34}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromBitcast ()">
Specialized version of getNextSource for Bitcast instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00730">730</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromCopy() {#aa8bb902ce1f23343cb503505a9607e60}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromCopy ()">
Specialized version of getNextSource for Copy instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00727">727</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromExtractSubreg() {#a20b816ba163c06d2ff095300170a4fe4}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromExtractSubreg ()">
Specialized version of getNextSource for ExtractSubreg instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00739">739</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromInsertSubreg() {#a706ad0761ae5f9af29e9eb065f82ced5}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromInsertSubreg ()">
Specialized version of getNextSource for InsertSubreg instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00736">736</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromPHI() {#aaee57a86cc392b89d8d504333b00edd6}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromPHI ()">
Specialized version of getNextSource for PHI instructions.

Explore each PHI incoming operand and return its sources.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00745">745</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromRegSequence() {#a8c75ae2b47fa1bb13ec6b43006ba9652}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromRegSequence ()">
Specialized version of getNextSource for RegSequence instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00733">733</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceFromSubregToReg() {#ae79e90e9fef87cda3e4105442c39b141}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceFromSubregToReg ()">
Specialized version of getNextSource for SubregToReg instructions.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00742">742</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### getNextSourceImpl() {#a7707f1a359a5e0bb01b4fbbe2e30c5fa}

<MemberDefinition
  prototype="ValueTrackerResult ValueTracker::getNextSourceImpl ()">
Dispatcher to the right underlying implementation of getNextSource.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00724">724</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Def {#a4b62585fe0ffd72b63a6a8603247c6c5}

<MemberDefinition
  prototype={<>const MachineInstr&#42; anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::Def = nullptr</>}>
The current point into the use-def chain.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00706">706</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### DefIdx {#a0f20281ecd070dd95a2846006ed63773}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::DefIdx = 0</>}>
The index of the definition in Def.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00709">709</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### DefSubReg {#a1e9953ce80361b9f9575a586c3aea0b5}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::DefSubReg</>}>
The sub register index of the definition.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00712">712</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### MRI {#a452edf2a2696bd774021d366abeb5301}

<MemberDefinition
  prototype={<>const MachineRegisterInfo&amp; anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::MRI</>}>
<a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> used to perform tracking.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00718">718</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### Reg {#af79ccbf65f7656fdee8d7994956a9f7a}

<MemberDefinition
  prototype={<>Register anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::Reg</>}>
The register where the value can be found.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00715">715</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### TII {#a393f8c961feb234320d3dcf4e1ffae58}

<MemberDefinition
  prototype={<>const TargetInstrInfo&#42; anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::ValueTracker::TII</>}>
Optional <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> used to perform some complex tracking.

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00721">721</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a></li>
</ul>

</DoxygenPage>
