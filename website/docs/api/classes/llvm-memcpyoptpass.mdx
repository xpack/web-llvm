---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/memcpyoptpass
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MemCpyOptPass` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class llvm::MemCpyOptPass</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Scalar/MemCpyOptimizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h"
  isLocal="true" />
</IncludesList>

## Base class

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/passinfomixin">PassInfoMixin&lt;DerivedT&gt;</a></>}>
A CRTP mix-in to automatically provide informational APIs needed for passes. <a href="/docs/api/structs/llvm/passinfomixin/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a637b931c7ffc01cd1a9bef1ce9ec2c89">MemCpyOptPass</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a></>}
  name={<><a href="#a07c3f5129a977e2f949212878c3042ae">run</a> (Function &amp;F, FunctionAnalysisManager &amp;AM)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a18e40505cff07b625ae84a227804a9f4">runImpl</a> (Function &amp;F, TargetLibraryInfo &#42;TLI, AAResults &#42;AA, AssumptionCache &#42;AC, DominatorTree &#42;DT, PostDominatorTree &#42;PDT, MemorySSA &#42;MSSA)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a478ed71b0d9199ee72f385b6001f5f6b">eraseInstruction</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5fb52c0478bfa2334039fa14c51d6707">isMemMoveMemSetDependency</a> (MemMoveInst &#42;M)</>}>
Memmove calls with overlapping src/dest buffers that come after a memset may be removed. <a href="#a5fb52c0478bfa2334039fa14c51d6707">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5663ca56c2796cdc34d00d82949d1e27">iterateOnFunction</a> (Function &amp;F)</>}>
Executes one iteration of <a href="/docs/api/classes/llvm/memcpyoptpass">MemCpyOptPass</a>. <a href="#a5663ca56c2796cdc34d00d82949d1e27">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6857fd7ecf20f3bb86be775c48ff8be0">moveUp</a> (StoreInst &#42;SI, Instruction &#42;P, const LoadInst &#42;LI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0911b8f99c4833c2760e5e0f2672a2d7">performCallSlotOptzn</a> (Instruction &#42;cpyLoad, Instruction &#42;cpyStore, Value &#42;cpyDst, Value &#42;cpySrc, TypeSize cpyLen, Align cpyAlign, BatchAAResults &amp;BAA, std::function&lt; CallInst &#42;()&gt; GetC)</>}>
Takes a memcpy and a call that it depends on, and checks for the possibility of a call slot optimization by having the call write its result directly into the destination of the memcpy. <a href="#a0911b8f99c4833c2760e5e0f2672a2d7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6a42125d8ee5f5911ce95909b19c4b72">performMemCpyToMemSetOptzn</a> (MemCpyInst &#42;MemCpy, MemSetInst &#42;MemSet, BatchAAResults &amp;BAA)</>}>
Transform memcpy to memset when its source was just memset. <a href="#a6a42125d8ee5f5911ce95909b19c4b72">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab19c55b9b71afdd4b0f773d9496bcb9c">performStackMoveOptzn</a> (Instruction &#42;Load, Instruction &#42;Store, AllocaInst &#42;DestAlloca, AllocaInst &#42;SrcAlloca, TypeSize Size, BatchAAResults &amp;BAA)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#acbc80c28a43766809fe19793606d91f9">processByValArgument</a> (CallBase &amp;CB, unsigned ArgNo)</>}>
This is called on every byval argument in call sites. <a href="#acbc80c28a43766809fe19793606d91f9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aebf01621ed83283f192fd201010415d1">processImmutArgument</a> (CallBase &amp;CB, unsigned ArgNo)</>}>
This is called on memcpy dest pointer arguments attributed as immutable during call. <a href="#aebf01621ed83283f192fd201010415d1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a57f66b9650506719d68c7ac48e493419">processMemCpy</a> (MemCpyInst &#42;M, BasicBlock::iterator &amp;BBI)</>}>
Perform simplification of memcpy&#39;s. <a href="#a57f66b9650506719d68c7ac48e493419">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aacd1e7e2aadfe46851e9e3de0ba871dc">processMemCpyMemCpyDependence</a> (MemCpyInst &#42;M, MemCpyInst &#42;MDep, BatchAAResults &amp;BAA)</>}>
We&#39;ve found that the (upward scanning) memory dependence of memcpy &#39;M&#39; is the memcpy &#39;MDep&#39;. <a href="#aacd1e7e2aadfe46851e9e3de0ba871dc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4c784aa7cdee016822ff12c6a7c7b8cd">processMemMove</a> (MemMoveInst &#42;M, BasicBlock::iterator &amp;BBI)</>}>
Transforms memmove calls to memcpy calls when the src/dst are guaranteed not to alias. <a href="#a4c784aa7cdee016822ff12c6a7c7b8cd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4a1a54da3fd032393e36cd134d0c004d">processMemSet</a> (MemSetInst &#42;SI, BasicBlock::iterator &amp;BBI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a73be05c583396ef6fd0be3ecf2f2d089">processMemSetMemCpyDependence</a> (MemCpyInst &#42;MemCpy, MemSetInst &#42;MemSet, BatchAAResults &amp;BAA)</>}>
We&#39;ve found that the (upward scanning) memory dependence of <code>MemCpy</code> is <code>MemSet</code>. <a href="#a73be05c583396ef6fd0be3ecf2f2d089">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a28a5bc7abd6f755d21e910f6449e3303">processStore</a> (StoreInst &#42;SI, BasicBlock::iterator &amp;BBI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9c8c1bbdef677429e07a9aa7424dc72c">processStoreOfLoad</a> (StoreInst &#42;SI, LoadInst &#42;LI, const DataLayout &amp;DL, BasicBlock::iterator &amp;BBI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#ae6144d8d036202f4e6c4034c7f3d7fb3">tryMergingIntoMemset</a> (Instruction &#42;I, Value &#42;StartPtr, Value &#42;ByteVal)</>}>
When scanning forward over instructions, we look for some other patterns to fold away. <a href="#ae6144d8d036202f4e6c4034c7f3d7fb3">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/aaresults">AAResults</a> &#42;</>}
  name={<><a href="#a1942f604436459d0d79e5f094f0f3167">AA</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &#42;</>}
  name={<><a href="#af86c77bf27ff17616328af5abac0766c">AC</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42;</>}
  name={<><a href="#ac237bb61ccfc540e7fecb97a19503c5c">DT</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/earliestescapeanalysis">EarliestEscapeAnalysis</a> &#42;</>}
  name={<><a href="#a9e22dabe946d2420130bbf0c5a2ce42a">EEA</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/memoryssa">MemorySSA</a> &#42;</>}
  name={<><a href="#af6217dcdf9861c3d22b7728d98ca63e4">MSSA</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/memoryssaupdater">MemorySSAUpdater</a> &#42;</>}
  name={<><a href="#acbc62c464977178f914b1e8088a80724">MSSAU</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/postdominatortree">PostDominatorTree</a> &#42;</>}
  name={<><a href="#a97b580492ad3a29e86d853e4632ed3c8">PDT</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;</>}
  name={<><a href="#aa33bf6884a533653a7fec69f0725ec57">TLI</a> = nullptr</>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 44 of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.

<SectionDefinition>

## Public Constructors

### MemCpyOptPass() {#a637b931c7ffc01cd1a9bef1ce9ec2c89}

<MemberDefinition
  prototype="llvm::MemCpyOptPass::MemCpyOptPass ()"
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00055">55</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#a07c3f5129a977e2f949212878c3042ae}

<MemberDefinition
  prototype={<>PreservedAnalyses MemCpyOptPass::run (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/namespaces/llvm/#adce09a5a0de0e3177eb00e932734af2f">FunctionAnalysisManager</a> &amp; AM)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00057">57</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l02153">2153</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### runImpl() {#a18e40505cff07b625ae84a227804a9f4}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::runImpl (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42; TLI, <a href="/docs/api/classes/llvm/aaresults">AAResults</a> &#42; AA, <a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &#42; AC, <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42; DT, <a href="/docs/api/classes/llvm/postdominatortree">PostDominatorTree</a> &#42; PDT, <a href="/docs/api/classes/llvm/memoryssa">MemorySSA</a> &#42; MSSA)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00060">60</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l02171">2171</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### eraseInstruction() {#a478ed71b0d9199ee72f385b6001f5f6b}

<MemberDefinition
  prototype={<>void MemCpyOptPass::eraseInstruction (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00092">92</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00285">285</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### isMemMoveMemSetDependency() {#a5fb52c0478bfa2334039fa14c51d6707}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::isMemMoveMemSetDependency (<a href="/docs/api/classes/llvm/memmoveinst">MemMoveInst</a> &#42; M)</>}>
Memmove calls with overlapping src/dest buffers that come after a memset may be removed.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00090">90</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01847">1847</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### iterateOnFunction() {#a5663ca56c2796cdc34d00d82949d1e27}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::iterateOnFunction (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F)</>}>
Executes one iteration of <a href="/docs/api/classes/llvm/memcpyoptpass">MemCpyOptPass</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00093">93</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l02106">2106</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### moveUp() {#a6857fd7ecf20f3bb86be775c48ff8be0}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::moveUp (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; SI, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; P, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; LI)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00086">86</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00501">501</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### performCallSlotOptzn() {#a0911b8f99c4833c2760e5e0f2672a2d7}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::performCallSlotOptzn (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; cpyLoad, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; cpyStore, <a href="/docs/api/classes/llvm/value">Value</a> &#42; cpyDst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; cpySrc, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> cpyLen, <a href="/docs/api/structs/llvm/align">Align</a> cpyAlign, <a href="/docs/api/classes/llvm/batchaaresults">BatchAAResults</a> &amp; BAA, std::function&lt; <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;()&gt; GetC)</>}>
Takes a memcpy and a call that it depends on, and checks for the possibility of a call slot optimization by having the call write its result directly into the destination of the memcpy.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00072">72</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00839">839</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### performMemCpyToMemSetOptzn() {#a6a42125d8ee5f5911ce95909b19c4b72}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::performMemCpyToMemSetOptzn (<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; MemCpy, <a href="/docs/api/classes/llvm/memsetinst">MemSetInst</a> &#42; MemSet, <a href="/docs/api/classes/llvm/batchaaresults">BatchAAResults</a> &amp; BAA)</>}>
Transform memcpy to memset when its source was just memset.

In other words, turn: 
<ProgramListing>

<CodeLine><Highlight kind="normal">memset(dst1, c, dst1&#95;size);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">memcpy(dst2, dst1, dst2&#95;size);</Highlight></CodeLine>

</ProgramListing> into: 
<ProgramListing>

<CodeLine><Highlight kind="normal">memset(dst1, c, dst1&#95;size);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">memset(dst2, c, dst2&#95;size);</Highlight></CodeLine>

</ProgramListing> When dst2&#95;size &lt;= dst1&#95;size.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00080">80</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01419">1419</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### performStackMoveOptzn() {#ab19c55b9b71afdd4b0f773d9496bcb9c}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::performStackMoveOptzn (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Load, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Store, <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42; DestAlloca, <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42; SrcAlloca, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> Size, <a href="/docs/api/classes/llvm/batchaaresults">BatchAAResults</a> &amp; BAA)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00087">87</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01486">1486</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processByValArgument() {#acbc80c28a43766809fe19793606d91f9}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processByValArgument (<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp; CB, unsigned ArgNo)</>}>
This is called on every byval argument in call sites.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00082">82</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01932">1932</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processImmutArgument() {#aebf01621ed83283f192fd201010415d1}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processImmutArgument (<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp; CB, unsigned ArgNo)</>}>
This is called on memcpy dest pointer arguments attributed as immutable during call.

Try to use memcpy source directly if all of the following conditions are satisfied.
<ul>
<li>The memcpy dst is neither modified during the call nor captured by the call.</li>
<li>The memcpy dst is an alloca with known alignment &amp; size. 2-1. The memcpy length == the alloca size which ensures that the new pointer is dereferenceable for the required range 2-2. The src pointer has alignment &gt;= the alloca alignment or can be enforced so.</li>
<li>The memcpy dst and src is not modified between the memcpy and the call. (if MSSA clobber check is safe.)</li>
<li>The memcpy src is not modified during the call. (ModRef check shows no Mod.)</li>
</ul>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00083">83</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l02015">2015</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processMemCpy() {#a57f66b9650506719d68c7ac48e493419}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processMemCpy (<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; M, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; BBI)</>}>
Perform simplification of memcpy&#39;s.

If we have memcpy A which copies X to Y, and memcpy B which copies Y to Z, then we can rewrite B to be a memcpy from X to Z (or potentially a memmove, depending on circumstances). This allows later passes to remove the first memcpy altogether.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00070">70</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01713">1713</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processMemCpyMemCpyDependence() {#aacd1e7e2aadfe46851e9e3de0ba871dc}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processMemCpyMemCpyDependence (<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; M, <a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; MDep, <a href="/docs/api/classes/llvm/batchaaresults">BatchAAResults</a> &amp; BAA)</>}>
We&#39;ve found that the (upward scanning) memory dependence of memcpy &#39;M&#39; is the memcpy &#39;MDep&#39;.

Try to simplify M to copy from MDep&#39;s input if we can.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00076">76</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01106">1106</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processMemMove() {#a4c784aa7cdee016822ff12c6a7c7b8cd}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processMemMove (<a href="/docs/api/classes/llvm/memmoveinst">MemMoveInst</a> &#42; M, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; BBI)</>}>
Transforms memmove calls to memcpy calls when the src/dst are guaranteed not to alias.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00071">71</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01900">1900</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processMemSet() {#a4a1a54da3fd032393e36cd134d0c004d}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processMemSet (<a href="/docs/api/classes/llvm/memsetinst">MemSetInst</a> &#42; SI, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; BBI)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00069">69</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00824">824</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processMemSetMemCpyDependence() {#a73be05c583396ef6fd0be3ecf2f2d089}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processMemSetMemCpyDependence (<a href="/docs/api/classes/llvm/memcpyinst">MemCpyInst</a> &#42; MemCpy, <a href="/docs/api/classes/llvm/memsetinst">MemSetInst</a> &#42; MemSet, <a href="/docs/api/classes/llvm/batchaaresults">BatchAAResults</a> &amp; BAA)</>}>
We&#39;ve found that the (upward scanning) memory dependence of <code>MemCpy</code> is <code>MemSet</code>.

Try to simplify <code>MemSet</code> to only set the trailing bytes that weren&#39;t copied over by <code>MemCpy</code>.

In other words, transform: 
<ProgramListing>

<CodeLine><Highlight kind="normal">memset(dst, c, dst&#95;size);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">...</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">memcpy(dst, src, src&#95;size);</Highlight></CodeLine>

</ProgramListing> into: 
<ProgramListing>

<CodeLine><Highlight kind="normal">...</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">memset(dst + src&#95;size, c, dst&#95;size &lt;= src&#95;size ? 0 : dst&#95;size - src&#95;size);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">memcpy(dst, src, src&#95;size);</Highlight></CodeLine>

</ProgramListing>

The memset is sunk to just before the memcpy to ensure that src&#95;size is present when emitting the simplified memset.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00078">78</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l01277">1277</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processStore() {#a28a5bc7abd6f755d21e910f6449e3303}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processStore (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; SI, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; BBI)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00066">66</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00742">742</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### processStoreOfLoad() {#a9c8c1bbdef677429e07a9aa7424dc72c}

<MemberDefinition
  prototype={<>bool MemCpyOptPass::processStoreOfLoad (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; SI, <a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; LI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; DL, <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; BBI)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00067">67</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00625">625</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

### tryMergingIntoMemset() {#ae6144d8d036202f4e6c4034c7f3d7fb3}

<MemberDefinition
  prototype={<>Instruction &#42; MemCpyOptPass::tryMergingIntoMemset (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; StartInst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; StartPtr, <a href="/docs/api/classes/llvm/value">Value</a> &#42; ByteVal)</>}>
When scanning forward over instructions, we look for some other patterns to fold away.

In particular, this looks for stores to neighboring locations of memory. If it sees enough consecutive ones, it attempts to merge them together into a memcpy/memset.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00084">84</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp/#l00348">348</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AA {#a1942f604436459d0d79e5f094f0f3167}

<MemberDefinition
  prototype={<>AAResults&#42; llvm::MemCpyOptPass::AA = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00046">46</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### AC {#af86c77bf27ff17616328af5abac0766c}

<MemberDefinition
  prototype={<>AssumptionCache&#42; llvm::MemCpyOptPass::AC = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00047">47</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### DT {#ac237bb61ccfc540e7fecb97a19503c5c}

<MemberDefinition
  prototype={<>DominatorTree&#42; llvm::MemCpyOptPass::DT = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00048">48</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### EEA {#a9e22dabe946d2420130bbf0c5a2ce42a}

<MemberDefinition
  prototype={<>EarliestEscapeAnalysis&#42; llvm::MemCpyOptPass::EEA = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00052">52</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### MSSA {#af6217dcdf9861c3d22b7728d98ca63e4}

<MemberDefinition
  prototype={<>MemorySSA&#42; llvm::MemCpyOptPass::MSSA = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00050">50</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### MSSAU {#acbc62c464977178f914b1e8088a80724}

<MemberDefinition
  prototype={<>MemorySSAUpdater&#42; llvm::MemCpyOptPass::MSSAU = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00051">51</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### PDT {#a97b580492ad3a29e86d853e4632ed3c8}

<MemberDefinition
  prototype={<>PostDominatorTree&#42; llvm::MemCpyOptPass::PDT = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00049">49</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

### TLI {#aa33bf6884a533653a7fec69f0725ec57}

<MemberDefinition
  prototype={<>TargetLibraryInfo&#42; llvm::MemCpyOptPass::TLI = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h/#l00045">45</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/scalar/memcpyoptimizer-h">MemCpyOptimizer.h</a></li>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/memcpyoptimizer-cpp">MemCpyOptimizer.cpp</a></li>
</ul>

</DoxygenPage>
