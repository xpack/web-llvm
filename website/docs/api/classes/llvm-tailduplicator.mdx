---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/tailduplicator
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `TailDuplicator` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Utility class to perform tail duplication. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::TailDuplicator</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/TailDuplicator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h"
  isLocal="true" />
</IncludesList>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a533d2f6b8e63f0dc5d94c348038db804">AvailableValsTy</a> = std::vector&lt; std::pair&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, <a href="/docs/api/classes/llvm/register">Register</a> &gt; &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  type="using"
  name={<><a href="#a0d68f8587f29b4e8c0f2c57c70bd3eed">RegSubRegPair</a> = <a href="/docs/api/structs/llvm/targetinstrinfo/regsubregpair">TargetInstrInfo::RegSubRegPair</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8fffb36a3e1523ff3d26521f27c02df8">canTailDuplicate</a> (MachineBasicBlock &#42;TailBB, MachineBasicBlock &#42;PredBB)</>}>
Returns true if TailBB can successfully be duplicated into PredBB. <a href="#a8fffb36a3e1523ff3d26521f27c02df8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a1974019840857f5ae10aa6b4edc5317d">initMF</a> (MachineFunction &amp;MF, bool PreRegAlloc, const MachineBranchProbabilityInfo &#42;MBPI, MBFIWrapper &#42;MBFI, ProfileSummaryInfo &#42;PSI, bool LayoutMode, unsigned TailDupSize=0)</>}>
Prepare to run on a specific machine function. <a href="#a1974019840857f5ae10aa6b4edc5317d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa7dba30d4d9162f00367404e06085391">shouldTailDuplicate</a> (bool IsSimple, MachineBasicBlock &amp;TailBB)</>}>
Determine if it is profitable to duplicate this block. <a href="#aa7dba30d4d9162f00367404e06085391">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1c0f17f40e0399c6d151a50e99797e58">tailDuplicateAndUpdate</a> (bool IsSimple, MachineBasicBlock &#42;MBB, MachineBasicBlock &#42;ForcedLayoutPred, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &#42;DuplicatedPreds=nullptr, function&#95;ref&lt; void(MachineBasicBlock &#42;)&gt; &#42;RemovalCallback=nullptr, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &#42;CandidatePtr=nullptr)</>}>
Tail duplicate a single basic block into its predecessors, and then clean up. <a href="#a1c0f17f40e0399c6d151a50e99797e58">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1b957210a6d62c3fe19410e746fc6ab4">tailDuplicateBlocks</a> ()</>}>
Look for small blocks that are unconditionally branched to and do not fall through. <a href="#a1b957210a6d62c3fe19410e746fc6ab4">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#aaf6dfbbe064199ada8872db93fafbb25">addSSAUpdateEntry</a> (Register OrigReg, Register NewReg, MachineBasicBlock &#42;BB)</>}>
Add a definition and source virtual registers pair for SSA update. <a href="#aaf6dfbbe064199ada8872db93fafbb25">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3bfd8f34c99bf181bac920ff0c30199a">appendCopies</a> (MachineBasicBlock &#42;MBB, SmallVectorImpl&lt; std::pair&lt; Register, RegSubRegPair &gt; &gt; &amp;CopyInfos, SmallVectorImpl&lt; MachineInstr &#42; &gt; &amp;Copies)</>}>
At the end of the block <code>MBB</code> generate COPY instructions between registers described by <code>CopyInfos</code>. <a href="#a3bfd8f34c99bf181bac920ff0c30199a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad648e4cb2b934e2ed534acf4bd9cd9a9">canCompletelyDuplicateBB</a> (MachineBasicBlock &amp;BB)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aac6f4630f1dddc1ccaff27bec9832b05">duplicateInstruction</a> (MachineInstr &#42;MI, MachineBasicBlock &#42;TailBB, MachineBasicBlock &#42;PredBB, DenseMap&lt; Register, RegSubRegPair &gt; &amp;LocalVRMap, const DenseSet&lt; Register &gt; &amp;UsedByPhi)</>}>
Duplicate a TailBB instruction to PredBB and update the source operands due to earlier PHI translation. <a href="#aac6f4630f1dddc1ccaff27bec9832b05">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5a38ade9c743d4adbd125d61dbfbb0c7">duplicateSimpleBB</a> (MachineBasicBlock &#42;TailBB, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;TDBBs, const DenseSet&lt; Register &gt; &amp;RegsUsedByPhi)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a6a91bb965d2e38538eda198752daabc1">processPHI</a> (MachineInstr &#42;MI, MachineBasicBlock &#42;TailBB, MachineBasicBlock &#42;PredBB, DenseMap&lt; Register, RegSubRegPair &gt; &amp;LocalVRMap, SmallVectorImpl&lt; std::pair&lt; Register, RegSubRegPair &gt; &gt; &amp;Copies, const DenseSet&lt; Register &gt; &amp;UsedByPhi, bool Remove)</>}>
<a href="/docs/api/classes/llvm/sys/process">Process</a> PHI node in TailBB by turning it into a copy in PredBB. <a href="#a6a91bb965d2e38538eda198752daabc1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a324991efafa19205d6c8283b1ab9c4bc">removeDeadBlock</a> (MachineBasicBlock &#42;MBB, function&#95;ref&lt; void(MachineBasicBlock &#42;)&gt; &#42;RemovalCallback=nullptr)</>}>
Remove the specified dead machine basic block from the function, updating the CFG. <a href="#a324991efafa19205d6c8283b1ab9c4bc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a278a085c332aad0e60b81642569c0e8e">tailDuplicate</a> (bool IsSimple, MachineBasicBlock &#42;TailBB, MachineBasicBlock &#42;ForcedLayoutPred, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;TDBBs, SmallVectorImpl&lt; MachineInstr &#42; &gt; &amp;Copies, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &#42;CandidatePtr)</>}>
If it is profitable, duplicate TailBB&#39;s contents in each of its predecessors. <a href="#a278a085c332aad0e60b81642569c0e8e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a5d30319cb163f5dc38f7fe70eccfcaf5">updateSuccessorsPHIs</a> (MachineBasicBlock &#42;FromBB, bool isDead, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;TDBBs, SmallSetVector&lt; MachineBasicBlock &#42;, 8 &gt; &amp;Succs)</>}>
After FromBB is tail duplicated into its predecessor blocks, the successors have gained new predecessors. <a href="#a5d30319cb163f5dc38f7fe70eccfcaf5">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2c5b896064c23b061b98044e8e3e3ec5">LayoutMode</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/mbfiwrapper">MBFIWrapper</a> &#42;</>}
  name={<><a href="#a1020208f4f90094513954e36892ff85d">MBFI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebranchprobabilityinfo">MachineBranchProbabilityInfo</a> &#42;</>}
  name={<><a href="#acd356af0446d3fa19540b5ad26243caa">MBPI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;</>}
  name={<><a href="#aa1fe58b450f75c4a6aabb2291fbdad49">MF</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &#42;</>}
  name={<><a href="#a35111feec198f000577347f0e6f75615">MRI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a085622ba45fe7a89c5eaa07587b20dc8">PreRegAlloc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42;</>}
  name={<><a href="#afebb03d86e2838d1b608c7d47f3341b9">PSI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/files/lib/lib/codegen/machinessaupdater-cpp/#aa013f33662c4ef2476f6e6f54f819abe">AvailableValsTy</a> &gt;</>}
  name={<><a href="#a555c49a3d8b085dd48862452554d5c39">SSAUpdateVals</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a>, 16 &gt;</>}
  name={<><a href="#a8b9ac8f8f0b3c9aad99a7d0443cde336">SSAUpdateVRs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aa8f69d5416f1ae6d7583dd5a003fe05f">TailDupSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;</>}
  name={<><a href="#aa192941648d3c556a2f28d1f01584b19">TII</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;</>}
  name={<><a href="#ad4ea8918349745eed50700e9c1b41664">TRI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Static Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a22b5f49c33bc7b11d150556b0ee1ca0a">isSimpleBB</a> (MachineBasicBlock &#42;TailBB)</>}>
True if this BB has only one unconditional jump. <a href="#a22b5f49c33bc7b11d150556b0ee1ca0a">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Utility class to perform tail duplication.

Definition at line 39 of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.

<SectionDefinition>

## Private Member Typedefs

### AvailableValsTy {#a533d2f6b8e63f0dc5d94c348038db804}

<MemberDefinition
  prototype={<>using llvm::TailDuplicator::AvailableValsTy =  std::vector&lt;std::pair&lt;MachineBasicBlock &#42;, Register&gt;&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00056">56</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### RegSubRegPair {#a0d68f8587f29b4e8c0f2c57c70bd3eed}

<MemberDefinition
  prototype="using llvm::TailDuplicator::RegSubRegPair =  TargetInstrInfo::RegSubRegPair">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00098">98</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### canTailDuplicate() {#a8fffb36a3e1523ff3d26521f27c02df8}

<MemberDefinition
  prototype={<>bool TailDuplicator::canTailDuplicate (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; PredBB)</>}>
Returns true if TailBB can successfully be duplicated into PredBB.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00081">81</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00823">823</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### initMF() {#a1974019840857f5ae10aa6b4edc5317d}

<MemberDefinition
  prototype={<>void TailDuplicator::initMF (<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF, bool PreRegAlloc, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebranchprobabilityinfo">MachineBranchProbabilityInfo</a> &#42; MBPI, <a href="/docs/api/classes/llvm/mbfiwrapper">MBFIWrapper</a> &#42; MBFI, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI, bool LayoutMode, unsigned TailDupSize=0)</>}>
Prepare to run on a specific machine function.

<ParametersList title="Parameters">
<ParametersListItem name="MF">- <a href="/docs/api/classes/llvm/function">Function</a> that will be processed</ParametersListItem>
<ParametersListItem name="PreRegAlloc">- true if used before register allocation</ParametersListItem>
<ParametersListItem name="MBPI">- Branch Probability Info. Used to propagate correct probabilities when modifying the CFG.</ParametersListItem>
<ParametersListItem name="LayoutMode">- When true, don&#39;t use the existing layout to make decisions.</ParametersListItem>
<ParametersListItem name="TailDupSize">- Maxmimum size of blocks to tail-duplicate. Zero default implies using the command line value TailDupSize.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00070">70</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00090">90</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### shouldTailDuplicate() {#aa7dba30d4d9162f00367404e06085391}

<MemberDefinition
  prototype={<>bool TailDuplicator::shouldTailDuplicate (bool IsSimple, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp; TailBB)</>}>
Determine if it is profitable to duplicate this block.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00078">78</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00564">564</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### tailDuplicateAndUpdate() {#a1c0f17f40e0399c6d151a50e99797e58}

<MemberDefinition
  prototype={<>bool TailDuplicator::tailDuplicateAndUpdate (bool IsSimple, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; ForcedLayoutPred, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &#42; DuplicatedPreds=nullptr, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt; void(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;)&gt; &#42; RemovalCallback=nullptr, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &#42; CandidatePtr=nullptr)</>}>
Tail duplicate a single basic block into its predecessors, and then clean up.

Tail duplicate the block and cleanup.

If <code>DuplicatePreds</code> is not null, it will be updated to contain the list of predecessors that received a copy of <code>MBB</code>. If <code>RemovalCallback</code> is non-null. It will be called before MBB is deleted. If <code>CandidatePtr</code> is not null, duplicate into these blocks only.

<code>IsSimple</code> - return value of isSimpleBB <code>MBB</code> - block to be duplicated <code>ForcedLayoutPred</code> - If non-null, treat this block as the layout predecessor, instead of using the ordering in MF <code>DuplicatedPreds</code> - if non-null, <code>DuplicatedPreds</code> will contain a list of all Preds that received a copy of <code>MBB</code>. <code>RemovalCallback</code> - if non-null, called just before MBB is deleted.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00090">90</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00165">165</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### tailDuplicateBlocks() {#a1b957210a6d62c3fe19410e746fc6ab4}

<MemberDefinition
  prototype="bool TailDuplicator::tailDuplicateBlocks ()">
Look for small blocks that are unconditionally branched to and do not fall through.

Tail-duplicate their instructions into their predecessors to eliminate (dynamic) branches.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00076">76</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00278">278</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### addSSAUpdateEntry() {#aaf6dfbbe064199ada8872db93fafbb25}

<MemberDefinition
  prototype={<>void TailDuplicator::addSSAUpdateEntry (<a href="/docs/api/classes/llvm/register">Register</a> OrigReg, <a href="/docs/api/classes/llvm/register">Register</a> NewReg, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB)</>}>
Add a definition and source virtual registers pair for SSA update.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00100">100</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00339">339</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### appendCopies() {#a3bfd8f34c99bf181bac920ff0c30199a}

<MemberDefinition
  prototype={<>void TailDuplicator::appendCopies (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; std::pair&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/structs/llvm/targetinstrinfo/regsubregpair">RegSubRegPair</a> &gt; &gt; &amp; CopyInfos, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; &gt; &amp; Copies)</>}>
At the end of the block <code>MBB</code> generate COPY instructions between registers described by <code>CopyInfos</code>.

Append resulting instructions to <code>Copies</code>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00124">124</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l01065">1065</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### canCompletelyDuplicateBB() {#ad648e4cb2b934e2ed534acf4bd9cd9a9}

<MemberDefinition
  prototype={<>bool TailDuplicator::canCompletelyDuplicateBB (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp; BB)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00114">114</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00735">735</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### duplicateInstruction() {#aac6f4630f1dddc1ccaff27bec9832b05}

<MemberDefinition
  prototype={<>void TailDuplicator::duplicateInstruction (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; MI, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; PredBB, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/structs/llvm/targetinstrinfo/regsubregpair">RegSubRegPair</a> &gt; &amp; LocalVRMap, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a> &gt; &amp; UsedByPhi)</>}>
Duplicate a TailBB instruction to PredBB and update the source operands due to earlier PHI translation.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00107">107</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00389">389</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### duplicateSimpleBB() {#a5a38ade9c743d4adbd125d61dbfbb0c7}

<MemberDefinition
  prototype={<>bool TailDuplicator::duplicateSimpleBB (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; TDBBs, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a> &gt; &amp; RegsUsedByPhi)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00115">115</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00751">751</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### processPHI() {#a6a91bb965d2e38538eda198752daabc1}

<MemberDefinition
  prototype={<>void TailDuplicator::processPHI (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; MI, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; PredBB, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/structs/llvm/targetinstrinfo/regsubregpair">RegSubRegPair</a> &gt; &amp; LocalVRMap, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; std::pair&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/structs/llvm/targetinstrinfo/regsubregpair">RegSubRegPair</a> &gt; &gt; &amp; Copies, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a> &gt; &amp; RegsUsedByPhi, bool Remove)</>}>
<a href="/docs/api/classes/llvm/sys/process">Process</a> PHI node in TailBB by turning it into a copy in PredBB.

Remember the source register that&#39;s contributed by PredBB and update SSA update map.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00102">102</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00355">355</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### removeDeadBlock() {#a324991efafa19205d6c8283b1ab9c4bc}

<MemberDefinition
  prototype={<>void TailDuplicator::removeDeadBlock (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt; void(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;)&gt; &#42; RemovalCallback=nullptr)</>}>
Remove the specified dead machine basic block from the function, updating the CFG.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00128">128</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l01079">1079</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### tailDuplicate() {#a278a085c332aad0e60b81642569c0e8e}

<MemberDefinition
  prototype={<>bool TailDuplicator::tailDuplicate (bool IsSimple, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; ForcedLayoutPred, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; TDBBs, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; &gt; &amp; Copies, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &#42; CandidatePtr)</>}>
If it is profitable, duplicate TailBB&#39;s contents in each of its predecessors.

<code>IsSimple</code> result of isSimpleBB <code>TailBB</code> Block to be duplicated. <code>ForcedLayoutPred</code> When non-null, use this block as the layout predecessor instead of the previous block in MF&#39;s order. <code>TDBBs</code> A vector to keep track of all blocks tail-duplicated into. <code>Copies</code> A vector of copy instructions inserted. Used later to walk all the inserted copies and remove redundant ones.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00118">118</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00857">857</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

### updateSuccessorsPHIs() {#a5d30319cb163f5dc38f7fe70eccfcaf5}

<MemberDefinition
  prototype={<>void TailDuplicator::updateSuccessorsPHIs (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; FromBB, bool isDead, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; TDBBs, <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 8 &gt; &amp; Succs)</>}>
After FromBB is tail duplicated into its predecessor blocks, the successors have gained new predecessors.

Update the PHI instructions in them accordingly.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00111">111</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00483">483</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### LayoutMode {#a2c5b896064c23b061b98044e8e3e3ec5}

<MemberDefinition
  prototype="bool llvm::TailDuplicator::LayoutMode">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00048">48</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### MBFI {#a1020208f4f90094513954e36892ff85d}

<MemberDefinition
  prototype={<>MBFIWrapper&#42; llvm::TailDuplicator::MBFI</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00045">45</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### MBPI {#acd356af0446d3fa19540b5ad26243caa}

<MemberDefinition
  prototype={<>const MachineBranchProbabilityInfo&#42; llvm::TailDuplicator::MBPI</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00042">42</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### MF {#aa1fe58b450f75c4a6aabb2291fbdad49}

<MemberDefinition
  prototype={<>MachineFunction&#42; llvm::TailDuplicator::MF</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00044">44</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### MRI {#a35111feec198f000577347f0e6f75615}

<MemberDefinition
  prototype={<>MachineRegisterInfo&#42; llvm::TailDuplicator::MRI</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00043">43</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### PreRegAlloc {#a085622ba45fe7a89c5eaa07587b20dc8}

<MemberDefinition
  prototype="bool llvm::TailDuplicator::PreRegAlloc">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00047">47</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### PSI {#afebb03d86e2838d1b608c7d47f3341b9}

<MemberDefinition
  prototype={<>ProfileSummaryInfo&#42; llvm::TailDuplicator::PSI</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00046">46</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### SSAUpdateVals {#a555c49a3d8b085dd48862452554d5c39}

<MemberDefinition
  prototype={<>DenseMap&lt;Register, AvailableValsTy&gt; llvm::TailDuplicator::SSAUpdateVals</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00058">58</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### SSAUpdateVRs {#a8b9ac8f8f0b3c9aad99a7d0443cde336}

<MemberDefinition
  prototype={<>SmallVector&lt;Register, 16&gt; llvm::TailDuplicator::SSAUpdateVRs</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00052">52</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### TailDupSize {#aa8f69d5416f1ae6d7583dd5a003fe05f}

<MemberDefinition
  prototype="unsigned llvm::TailDuplicator::TailDupSize">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00049">49</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### TII {#aa192941648d3c556a2f28d1f01584b19}

<MemberDefinition
  prototype={<>const TargetInstrInfo&#42; llvm::TailDuplicator::TII</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00040">40</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

### TRI {#ad4ea8918349745eed50700e9c1b41664}

<MemberDefinition
  prototype={<>const TargetRegisterInfo&#42; llvm::TailDuplicator::TRI</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00041">41</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Functions

### isSimpleBB() {#a22b5f49c33bc7b11d150556b0ee1ca0a}

<MemberDefinition
  prototype={<>bool TailDuplicator::isSimpleBB (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; TailBB)</>}
  labels = {["static"]}>
True if this BB has only one unconditional jump.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h/#l00077">77</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp/#l00715">715</a> of file <a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/codegen/tailduplicator-h">TailDuplicator.h</a></li>
<li><a href="/docs/api/files/lib/lib/codegen/tailduplicator-cpp">TailDuplicator.cpp</a></li>
</ul>

</DoxygenPage>
