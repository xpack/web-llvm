---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/canonicalloopinfo
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CanonicalLoopInfo` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Class to represented the control flow structure of an OpenMP canonical loop. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::CanonicalLoopInfo</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Frontend/OpenMP/OMPIRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h"
  isLocal="true" />
</IncludesList>

## Friends Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="#a1ce8ab76394bc6773081e7634cd20625">OpenMPIRBuilder</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a32ff799dcb39887a8d21322020f305ba">assertOK</a> () const</>}>
Consistency self-check. <a href="#a32ff799dcb39887a8d21322020f305ba">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a92d8bce979891dc43b6573e8cca2e58c">getAfter</a> () const</>}>
The after block is intended for clean-up code such as lifetime end markers. <a href="#a92d8bce979891dc43b6573e8cca2e58c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/openmpirbuilder/#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></>}
  name={<><a href="#a578dd7d619d0ccfc6ace07aa380022cc">getAfterIP</a> () const</>}>
Return the insertion point for user code after the loop. <a href="#a578dd7d619d0ccfc6ace07aa380022cc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a47521ec347ef7b522745bf89e2e2d19a">getBody</a> () const</>}>
The body block is the single entry for a loop iteration and not controlled by <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>. <a href="#a47521ec347ef7b522745bf89e2e2d19a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/openmpirbuilder/#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></>}
  name={<><a href="#a8031442528bff99473596a0de4aa0422">getBodyIP</a> () const</>}>
Return the insertion point for user code in the body. <a href="#a8031442528bff99473596a0de4aa0422">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#acb5b5b136597312e0d5df6b746a7e6db">getCond</a> () const</>}>
The condition block computes whether there is another loop iteration. <a href="#acb5b5b136597312e0d5df6b746a7e6db">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#ad3bf46daef8ce8176a68bcec0320dfd3">getExit</a> () const</>}>
Reaching the exit indicates no more iterations are being executed. <a href="#ad3bf46daef8ce8176a68bcec0320dfd3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/function">Function</a> &#42;</>}
  name={<><a href="#a9592feb460b27d417f42a41aabfe253a">getFunction</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a01c4471afa921c4962d7138cfcef4942">getHeader</a> () const</>}>
The header is the entry for each iteration. <a href="#a01c4471afa921c4962d7138cfcef4942">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#af4131f5f461f1138483addfd7cd7f579">getIndVar</a> () const</>}>
Returns the instruction representing the current logical induction variable. <a href="#af4131f5f461f1138483addfd7cd7f579">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/type">Type</a> &#42;</>}
  name={<><a href="#a46b5cd2a0881c8be5183d70a32eef90d">getIndVarType</a> () const</>}>
Return the type of the induction variable (and the trip count). <a href="#a46b5cd2a0881c8be5183d70a32eef90d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#ac37a6cf77f6f82b6bb28af4d9c8626d0">getLatch</a> () const</>}>
Reaching the latch indicates the end of the loop body code. <a href="#ac37a6cf77f6f82b6bb28af4d9c8626d0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a> () const</>}>
The preheader ensures that there is only a single edge entering the loop. <a href="#ad50eb30e70ff2a9ea7f220547e2b6f6d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/openmpirbuilder/#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></>}
  name={<><a href="#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a> () const</>}>
Return the insertion point for user code before the loop. <a href="#ac72ebc430ef7dcf1791c66080ddedd9d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a01560f4a4ff7bfc8a96bd406b6f17ea2">getTripCount</a> () const</>}>
Returns the <a href="/docs/api/classes/llvm/value">llvm::Value</a> containing the number of loop iterations. <a href="#a01560f4a4ff7bfc8a96bd406b6f17ea2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9ce55b05f8ad85126fc92eeeb35457c7">invalidate</a> ()</>}>
Invalidate this loop. <a href="#a9ce55b05f8ad85126fc92eeeb35457c7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4b2b7074e300c251f7cb8913620b1d80">isValid</a> () const</>}>
Returns whether this object currently represents the IR of a loop. <a href="#a4b2b7074e300c251f7cb8913620b1d80">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#acc965de7b820b3a86dae34b15b4eae02">collectControlBlocks</a> (SmallVectorImpl&lt; BasicBlock &#42; &gt; &amp;BBs)</>}>
Add the control blocks of this loop to <code>BBs</code>. <a href="#acc965de7b820b3a86dae34b15b4eae02">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#acd8accd2da5cd306a89efb53c1e0f7bc">mapIndVar</a> (llvm::function&#95;ref&lt; Value &#42;(Instruction &#42;)&gt; Updater)</>}>
Replace all uses of the canonical induction variable in the loop body with a new one. <a href="#acd8accd2da5cd306a89efb53c1e0f7bc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a588e5d2b299d0090847ce7f3df2749ba">setTripCount</a> (Value &#42;TripCount)</>}>
Sets the number of loop iterations to the given value. <a href="#a588e5d2b299d0090847ce7f3df2749ba">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#add606e5b781dc64d0ba4820809e8d88a">Cond</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a2c2f33e4aac8c213794cb9fac93f8a6d">Exit</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a7a071723c44daf28c5226d0e270a9734">Header</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;</>}
  name={<><a href="#a8ae42f9b63c65fda9fc05a85c37d470b">Latch</a> = nullptr</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Class to represented the control flow structure of an OpenMP canonical loop.

The control-flow structure is standardized for easy consumption by directives associated with loops. For instance, the worksharing-loop construct may change this control flow such that each loop iteration is executed on only one thread. The constraints of a canonical loop in brief are:


<ul>
<li>The number of loop iterations must have been computed before entering the loop.</li>
<li>Has an (unsigned) logical induction variable that starts at zero and increments by one.</li>
<li>The loop&#39;s CFG itself has no side-effects. The OpenMP specification itself allows side-effects, but the order in which they happen, including how often or whether at all, is unspecified. We expect that the frontend will emit those side-effect instructions somewhere (e.g. before the loop) such that the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> itself can be side-effect free.</li>
</ul>


Keep in mind that <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> is meant to only describe a repeated execution of a loop body that satifies these constraints. It does NOT represent arbitrary SESE regions that happen to contain a loop. Do not use <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> for such purposes.

The control flow can be described as follows: <CodeBlock>Preheader
   |
</CodeBlock> /-&gt; Header | | | Cond—\\ | | | | Body | | | | | | &lt;...&gt; | | | | | --Latch | | Exit | After

The loop is thought to start at PreheaderIP (at the Preheader&#39;s terminator, including) and end at AfterIP (at the After&#39;s first instruction, excluding). That is, instructions in the Preheader and After blocks (except the Preheader&#39;s terminator) are out of <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>&#39;s control and may have side-effects. Typically, the Preheader is used to compute the loop&#39;s trip count. The instructions from BodyIP (at the Body block&#39;s first instruction, excluding) until the Latch are also considered outside <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>&#39;s control and thus can have side-effects. The body block is the single entry point into the loop body, which may contain arbitrary control flow as long as all control paths eventually branch to the Latch block.

TODO: Consider adding another standardized <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> between Body CFG and Latch to guarantee that there is only a single edge to the latch. It would make loop transformations easier to not needing to consider multiple predecessors of the latch (See redirectAllPredecessorsTo) and would give us an equivalant to PreheaderIP, AfterIP and BodyIP for inserting code that executes after each body iteration.

There must be no loop-carried dependencies through llvm::Values. This is equivalant to that the Latch has no <a href="/docs/api/classes/llvm/phinode">PHINode</a> and the Header&#39;s only <a href="/docs/api/classes/llvm/phinode">PHINode</a> is for the induction variable.

All code in Header, Cond, Latch and Exit (plus the terminator of the Preheader) are <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>&#39;s responsibility and their build-up checked by <a href="#a32ff799dcb39887a8d21322020f305ba">assertOK()</a>. They are expected to not be modified unless explicitly modifying the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> through a methods that applies a OpenMP loop-associated construct such as applyWorkshareLoop, tileLoops, unrollLoop, etc. These methods usually invalidate the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> and re-use its basic blocks. After invalidation, the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> must not be used anymore as its underlying control flow may not exist anymore. Loop-transformation methods such as tileLoops, collapseLoops and unrollLoop may also return a new <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> that can be passed to other loop-associated construct implementing methods. These loop-transforming methods may either create a new <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> usually using createLoopSkeleton and invalidate the input <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>, or reuse and modify one of the input <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> and return it as representing the modified loop. What is done is an implementation detail of transformation-implementing method and callers should always assume that the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> passed to it is invalidated and a new object is returned. Returned <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> have the same structure and guarantees as the one created by createCanonicalLoop, such that transforming methods do not have to special case where the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> originated from.

Generally, methods consuming <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> do not need an <a href="/docs/api/classes/llvm/openmpirbuilder/#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> as argument, but use the locations of the <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> to insert new or modify existing instructions. Unless documented otherwise, methods consuming <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a> do not invalidate any <a href="/docs/api/classes/llvm/irbuilder">InsertPoint</a> that is outside <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>&#39;s control. Specifically, any <a href="/docs/api/classes/llvm/irbuilder">InsertPoint</a> in the Preheader, After or Block can still be used after calling such a method.

TODO: Provide mechanisms for exception handling and cancellation points.

Defined outside <a href="/docs/api/classes/llvm/openmpirbuilder">OpenMPIRBuilder</a> because nested classes cannot be forward-declared, e.g. to avoid having to include the entire <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.

Definition at line 3512 of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.

<SectionDefinition>

## Friends

### OpenMPIRBuilder {#a1ce8ab76394bc6773081e7634cd20625}

<MemberDefinition
  prototype={<>friend class <a href="/docs/api/classes/llvm/openmpirbuilder">OpenMPIRBuilder</a></>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03513">3513</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### assertOK() {#a32ff799dcb39887a8d21322020f305ba}

<MemberDefinition
  prototype="void CanonicalLoopInfo::assertOK () const">
Consistency self-check.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03662">3662</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09892">9892</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

### getAfter() {#a92d8bce979891dc43b6573e8cca2e58c}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getAfter () const</>}
  labels = {["inline"]}>
The after block is intended for clean-up code such as lifetime end markers.

It is separate from the exit block to ensure, analogous to the preheader, it having just a single entry edge and being free from PHI nodes should there be multiple loop exits (such as from break statements/cancellations).

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03605">3605</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getAfterIP() {#a578dd7d619d0ccfc6ace07aa380022cc}

<MemberDefinition
  prototype="OpenMPIRBuilder::InsertPointTy llvm::CanonicalLoopInfo::getAfterIP () const"
  labels = {["inline"]}>
Return the insertion point for user code after the loop.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03650">3650</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getBody() {#a47521ec347ef7b522745bf89e2e2d19a}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getBody () const</>}
  labels = {["inline"]}>
The body block is the single entry for a loop iteration and not controlled by <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>.

It can contain arbitrary control flow but must eventually branch to the <code>Latch</code> block.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03581">3581</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getBodyIP() {#a8031442528bff99473596a0de4aa0422}

<MemberDefinition
  prototype="OpenMPIRBuilder::InsertPointTy llvm::CanonicalLoopInfo::getBodyIP () const"
  labels = {["inline"]}>
Return the insertion point for user code in the body.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03643">3643</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getCond() {#acb5b5b136597312e0d5df6b746a7e6db}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getCond () const</>}
  labels = {["inline"]}>
The condition block computes whether there is another loop iteration.

If yes, branches to the body; otherwise to the exit block.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03573">3573</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getExit() {#ad3bf46daef8ce8176a68bcec0320dfd3}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getExit () const</>}
  labels = {["inline"]}>
Reaching the exit indicates no more iterations are being executed.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03595">3595</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getFunction() {#a9592feb460b27d417f42a41aabfe253a}

<MemberDefinition
  prototype={<>Function &#42; llvm::CanonicalLoopInfo::getFunction () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03656">3656</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getHeader() {#a01c4471afa921c4962d7138cfcef4942}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getHeader () const</>}
  labels = {["inline"]}>
The header is the entry for each iteration.

In the canonical control flow, it only contains the <a href="/docs/api/classes/llvm/phinode">PHINode</a> for the induction variable.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03566">3566</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getIndVar() {#af4131f5f461f1138483addfd7cd7f579}

<MemberDefinition
  prototype={<>Instruction &#42; llvm::CanonicalLoopInfo::getIndVar () const</>}
  labels = {["inline"]}>
Returns the instruction representing the current logical induction variable.

Always unsigned, always starting at 0 with an increment of one.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03622">3622</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getIndVarType() {#a46b5cd2a0881c8be5183d70a32eef90d}

<MemberDefinition
  prototype={<>Type &#42; llvm::CanonicalLoopInfo::getIndVarType () const</>}
  labels = {["inline"]}>
Return the type of the induction variable (and the trip count).

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03630">3630</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getLatch() {#ac37a6cf77f6f82b6bb28af4d9c8626d0}

<MemberDefinition
  prototype={<>BasicBlock &#42; llvm::CanonicalLoopInfo::getLatch () const</>}
  labels = {["inline"]}>
Reaching the latch indicates the end of the loop body code.

In the canonical control flow, it only contains the increment of the induction variable.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03589">3589</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getPreheader() {#ad50eb30e70ff2a9ea7f220547e2b6f6d}

<MemberDefinition
  prototype={<>BasicBlock &#42; CanonicalLoopInfo::getPreheader () const</>}>
The preheader ensures that there is only a single edge entering the loop.

Code that must be execute before any loop iteration can be emitted here, such as computing the loop trip count and begin lifetime markers. Code in the preheader is not considered part of the canonical loop.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03562">3562</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09838">9838</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

### getPreheaderIP() {#ac72ebc430ef7dcf1791c66080ddedd9d}

<MemberDefinition
  prototype="OpenMPIRBuilder::InsertPointTy llvm::CanonicalLoopInfo::getPreheaderIP () const"
  labels = {["inline"]}>
Return the insertion point for user code before the loop.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03636">3636</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### getTripCount() {#a01560f4a4ff7bfc8a96bd406b6f17ea2}

<MemberDefinition
  prototype={<>Value &#42; llvm::CanonicalLoopInfo::getTripCount () const</>}
  labels = {["inline"]}>
Returns the <a href="/docs/api/classes/llvm/value">llvm::Value</a> containing the number of loop iterations.

It must be valid in the preheader and always interpreted as an unsigned integer of any bit-width.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03613">3613</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### invalidate() {#a9ce55b05f8ad85126fc92eeeb35457c7}

<MemberDefinition
  prototype="void CanonicalLoopInfo::invalidate ()">
Invalidate this loop.

That is, the underlying IR does not fulfill the requirements of an OpenMP canonical loop anymore.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03666">3666</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09986">9986</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

### isValid() {#a4b2b7074e300c251f7cb8913620b1d80}

<MemberDefinition
  prototype="bool llvm::CanonicalLoopInfo::isValid () const"
  labels = {["inline"]}>
Returns whether this object currently represents the IR of a loop.

If returning false, it may have been consumed by a loop transformation or not been intialized. Do not use in this case;

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03556">3556</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### collectControlBlocks() {#acc965de7b820b3a86dae34b15b4eae02}

<MemberDefinition
  prototype={<>void CanonicalLoopInfo::collectControlBlocks (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42; &gt; &amp; BBs)</>}>
Add the control blocks of this loop to <code>BBs</code>.

This does not include any block from the body, including the one returned by <a href="#a47521ec347ef7b522745bf89e2e2d19a">getBody()</a>.

FIXME: This currently includes the Preheader and After blocks even though their content is (mostly) not under <a href="/docs/api/classes/llvm/canonicalloopinfo">CanonicalLoopInfo</a>&#39;s control. Re-evaluated whether this makes sense.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03529">3529</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09828">9828</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

### mapIndVar() {#acd8accd2da5cd306a89efb53c1e0f7bc}

<MemberDefinition
  prototype={<>void CanonicalLoopInfo::mapIndVar (<a href="/docs/api/classes/llvm/function-ref">llvm::function&#95;ref</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;)&gt; Updater)</>}>
Replace all uses of the canonical induction variable in the loop body with a new one.

The intended use case is to update the induction variable for an updated iteration space such that it can stay normalized in the 0...tripcount-1 range.

The <code>Updater</code> is called with the (presumable updated) current normalized induction variable and is expected to return the value that uses of the pre-updated induction values should use instead, typically dependent on the new induction variable. This is a lambda (instead of e.g. just passing the new value) to be able to distinguish the uses of the pre-updated induction variable and uses of the induction varible to compute the updated induction variable value.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03550">3550</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09859">9859</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

### setTripCount() {#a588e5d2b299d0090847ce7f3df2749ba}

<MemberDefinition
  prototype={<>void CanonicalLoopInfo::setTripCount (<a href="/docs/api/classes/llvm/value">Value</a> &#42; TripCount)</>}>
Sets the number of loop iterations to the given value.

This value must be valid in the condition block (i.e., defined in the preheader) and is interpreted as an unsigned integer.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03534">3534</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp/#l09847">9847</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Cond {#add606e5b781dc64d0ba4820809e8d88a}

<MemberDefinition
  prototype={<>BasicBlock&#42; llvm::CanonicalLoopInfo::Cond = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03517">3517</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### Exit {#a2c2f33e4aac8c213794cb9fac93f8a6d}

<MemberDefinition
  prototype={<>BasicBlock&#42; llvm::CanonicalLoopInfo::Exit = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03519">3519</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### Header {#a7a071723c44daf28c5226d0e270a9734}

<MemberDefinition
  prototype={<>BasicBlock&#42; llvm::CanonicalLoopInfo::Header = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03516">3516</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

### Latch {#a8ae42f9b63c65fda9fc05a85c37d470b}

<MemberDefinition
  prototype={<>BasicBlock&#42; llvm::CanonicalLoopInfo::Latch = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h/#l03518">3518</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/frontend/include/llvm/frontend/openmp/ompirbuilder-h">OMPIRBuilder.h</a></li>
<li><a href="/docs/api/files/lib/lib/frontend/lib/frontend/openmp/ompirbuilder-cpp">OMPIRBuilder.cpp</a></li>
</ul>

</DoxygenPage>
