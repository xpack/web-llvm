---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-lowermatrixintrinsics-cpp-/lowermatrixintrinsics
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `LowerMatrixIntrinsics` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

<a href="/docs/api/classes/anonymous-namespace-lowermatrixintrinsics-cpp-/lowermatrixintrinsics">LowerMatrixIntrinsics</a> contains the methods used to lower matrix intrinsics. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{LowerMatrixIntrinsics.cpp}::LowerMatrixIntrinsics</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#aecb18b3bdad8c28a5e4b0dcf73c17211">LowerMatrixIntrinsics</a> (Function &amp;F, TargetTransformInfo &amp;TTI, FunctionAnalysisManager &#42;AM)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a573504490eecc9679fda893af5bc01fb">createMulAdd</a> (Value &#42;Sum, Value &#42;A, Value &#42;B, bool UseFPOp, IRBuilder&lt;&gt; &amp;Builder, bool AllowContraction, unsigned &amp;NumComputeOps)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a1fb67d47830d47e72144d7456dbb7fa0">createTiledLoops</a> (CallInst &#42;MatMul, Value &#42;LPtr, ShapeInfo LShape, Value &#42;RPtr, ShapeInfo RShape, StoreInst &#42;Store)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#a47ed1ed3cecee1de815ef53eace647b1">distributeTransposes</a> (Value &#42;Op0, ShapeInfo Shape0, Value &#42;Op1, ShapeInfo Shape1, MatrixBuilder &amp;Builder, function&#95;ref&lt; Instruction &#42;(Value &#42;, ShapeInfo, Value &#42;, ShapeInfo)&gt; Operation)</>}>
(Op0 op Op1)^T -&gt; Op0^T op Op1^T Transpose <code>Op0</code> and <code>Op1</code> of shape <code>Shape0</code> and <code>Shape1</code>, then use them on both sides of <code>Operation</code>. <a href="#a47ed1ed3cecee1de815ef53eace647b1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab04f9a9acf8cd97627dc9b522188b0e8">emitMatrixMultiply</a> (MatrixTy &amp;Result, const MatrixTy &amp;A, const MatrixTy &amp;B, IRBuilder&lt;&gt; &amp;Builder, bool IsTiled, bool IsScalarMatrixTransposed, FastMathFlags FMF)</>}>
Compute <code>Result</code> += <code>A</code> &#42; <code>B</code> for input matrices with left-associating addition. <a href="#ab04f9a9acf8cd97627dc9b522188b0e8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a133fc35b714b7fc4b5a0935c811ed37a">emitSIMDTiling</a> (CallInst &#42;MatMul, LoadInst &#42;LoadOp0, LoadInst &#42;LoadOp1, StoreInst &#42;Store, SmallPtrSetImpl&lt; Instruction &#42; &gt; &amp;FusedInsts)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a410a078c88ab7a1e5a4ce7362adc3efa">eraseFromParentAndMove</a> (Value &#42;V, BasicBlock::reverse&#95;iterator &amp;II, BasicBlock &amp;BB)</>}>
Erase <code>V</code> from <code>BB</code> and move \\II forward to avoid invalidating iterators. <a href="#a410a078c88ab7a1e5a4ce7362adc3efa">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7b46fe24407e1a38fdf96093359165c1">eraseFromParentAndRemoveFromShapeMap</a> (Instruction &#42;Inst)</>}>
Erase <code>Inst</code> from both ShapeMap (if an entry exists) and erase <code>Inst</code> itself. <a href="#a7b46fe24407e1a38fdf96093359165c1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7f5b1f0925dc2dbb62f05681772ca912">finalizeLowering</a> (Instruction &#42;Inst, MatrixTy Matrix, IRBuilder&lt;&gt; &amp;Builder)</>}>
Cache <code>Matrix</code> as result of <code>Inst</code> and update the uses of <code>Inst</code>. <a href="#a7f5b1f0925dc2dbb62f05681772ca912">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/align">Align</a></>}
  name={<><a href="#afbbb137bc7dc3b49d14cd4fd73a75dcf">getAlignForIndex</a> (unsigned Idx, Value &#42;Stride, Type &#42;ElementTy, MaybeAlign A) const</>}>
Compute the alignment for a column/row <code>Idx</code> with <code>Stride</code> between them. <a href="#afbbb137bc7dc3b49d14cd4fd73a75dcf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="MatrixTy"
  name={<><a href="#aad5def33faf75944be159808071d9698">getMatrix</a> (Value &#42;MatrixVal, const ShapeInfo &amp;SI, IRBuilder&lt;&gt; &amp;Builder)</>}>
Return the set of vectors that a matrix value is lowered to. <a href="#aad5def33faf75944be159808071d9698">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a7d8410ca3fc6fb227416067d3c2535d2">getNonAliasingPointer</a> (LoadInst &#42;Load, StoreInst &#42;Store, CallInst &#42;MatMul)</>}>
Ensure that the memory in <code>Load</code> does not alias <code>Store</code> by potentially copying it to a new location. <a href="#a7d8410ca3fc6fb227416067d3c2535d2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#af44a0d4c944c50fe30fad03d97e9f66f">getNumOps</a> (Type &#42;VT)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a0a0644b7c29287b0ea96ec3524e092e4">getNumOps</a> (Type &#42;ST, unsigned N)</>}>
Return the estimated number of vector ops required for an operation on <code>VT</code> &#42; N. <a href="#a0a0644b7c29287b0ea96ec3524e092e4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="MatrixTy"
  name={<><a href="#a897ffb621380e9230778c792ca27d9c4">getZeroMatrix</a> (Type &#42;EltType, unsigned R, unsigned C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a1fa9a9154ccdb8775496f8b47315515e">insertVector</a> (Value &#42;Col, unsigned I, Value &#42;Block, IRBuilder&lt;&gt; &amp;Builder)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#acdf2ba7931aca786fe764e4361610d3e">isFusionProfitable</a> (CallInst &#42;MatMul)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a34a9fad9290819f56c761e0a17ca7058">isMinimal</a> () const</>}>
Is this the minimal version executed in the backend pipelines. <a href="#a34a9fad9290819f56c761e0a17ca7058">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a6e4c82e1d5800196765f95dbf8b48e6e">liftTranspose</a> (Instruction &amp;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="MatrixTy"
  name={<><a href="#a5d31f8dc135425bc0f938f13bcca4a0a">loadMatrix</a> (Type &#42;Ty, Value &#42;Ptr, MaybeAlign MAlign, Value &#42;Stride, bool IsVolatile, ShapeInfo Shape, IRBuilder&lt;&gt; &amp;Builder)</>}>
Load a matrix with <code>Shape</code> starting at <code>Ptr</code> and using <code>Stride</code> between vectors. <a href="#a5d31f8dc135425bc0f938f13bcca4a0a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="MatrixTy"
  name={<><a href="#aa8322b8934ca2ae69762c7056c3bf358">loadMatrix</a> (Value &#42;MatrixPtr, MaybeAlign Align, bool IsVolatile, ShapeInfo MatrixShape, Value &#42;I, Value &#42;J, ShapeInfo ResultShape, Type &#42;EltTy, IRBuilder&lt;&gt; &amp;Builder)</>}>
Loads a sub-matrix with shape <code>ResultShape</code> from a <code>R</code> x <code>C</code> matrix, starting at <code>MatrixPtr</code>&#91;I&#93;&#91;J&#93;. <a href="#aa8322b8934ca2ae69762c7056c3bf358">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a237ac9d59f45a0b7c18296704e005a6c">LowerColumnMajorLoad</a> (CallInst &#42;Inst)</>}>
Lowers llvm.matrix.column.major.load. <a href="#a237ac9d59f45a0b7c18296704e005a6c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a4c72146be47366faa66bbe3fa93abf2a">LowerColumnMajorStore</a> (CallInst &#42;Inst)</>}>
Lowers llvm.matrix.column.major.store. <a href="#a4c72146be47366faa66bbe3fa93abf2a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab3118e33ed28deca370645b8b909fa5a">lowerDotProduct</a> (CallInst &#42;MatMul, SmallPtrSet&lt; Instruction &#42;, 16 &gt; &amp;FusedInsts, FastMathFlags FMF)</>}>
Special case for MatMul lowering. <a href="#ab3118e33ed28deca370645b8b909fa5a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a1b51a567be126f7919bef1c351d859e2">LowerLoad</a> (Instruction &#42;Inst, Value &#42;Ptr, MaybeAlign Align, Value &#42;Stride, bool IsVolatile, ShapeInfo Shape)</>}>
Lower a load instruction with shape information. <a href="#a1b51a567be126f7919bef1c351d859e2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7ae0da674977e2cd46d8df703e7dbab1">LowerMatrixMultiplyFused</a> (CallInst &#42;MatMul, SmallPtrSetImpl&lt; Instruction &#42; &gt; &amp;FusedInsts, SmallVector&lt; IntrinsicInst &#42;, 16 &gt; &amp;LifetimeEnds)</>}>
Try to lower matrix multiply chains by fusing operations. <a href="#a7ae0da674977e2cd46d8df703e7dbab1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a6d7b7ecce18021429495c1db66a025ee">LowerMultiply</a> (CallInst &#42;MatMul)</>}>
Lowers llvm.matrix.multiply. <a href="#a6d7b7ecce18021429495c1db66a025ee">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a6fb1dea3dcd9b6517ad7c8a6a7269366">LowerStore</a> (Instruction &#42;Inst, Value &#42;Matrix, Value &#42;Ptr, MaybeAlign A, Value &#42;Stride, bool IsVolatile, ShapeInfo Shape)</>}>
Lower a store instruction with shape information. <a href="#a6fb1dea3dcd9b6517ad7c8a6a7269366">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aadb2a52a94fd7cf1e3f1643e0f5e2934">LowerTranspose</a> (CallInst &#42;Inst)</>}>
Lowers llvm.matrix.transpose. <a href="#aadb2a52a94fd7cf1e3f1643e0f5e2934">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab02410035de7d54b1abc168a9d48e809">optimizeTransposes</a> ()</>}>
Try moving transposes in order to fold them away or into multiplies. <a href="#ab02410035de7d54b1abc168a9d48e809">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, 32 &gt;</>}
  name={<><a href="#a611115d09f3dd3ef310f70c87a8ba402">propagateShapeBackward</a> (SmallVectorImpl&lt; Instruction &#42; &gt; &amp;WorkList)</>}>
Propagate the shape to operands of instructions with shape information. <a href="#a611115d09f3dd3ef310f70c87a8ba402">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, 32 &gt;</>}
  name={<><a href="#adf1371d869d3a7468c48401a2a321b26">propagateShapeForward</a> (SmallVectorImpl&lt; Instruction &#42; &gt; &amp;WorkList)</>}>
Propagate the shape information of instructions to their users. <a href="#adf1371d869d3a7468c48401a2a321b26">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ae165cb587ec7f72cf62df6623eba91e7">setShapeInfo</a> (Value &#42;V, ShapeInfo Shape)</>}>
If <code>V</code> already has a known shape return false. <a href="#ae165cb587ec7f72cf62df6623eba91e7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#a911ac5931b86191e44f407ef00132dd2">sinkTranspose</a> (Instruction &amp;I, BasicBlock::reverse&#95;iterator &amp;II)</>}>
Sink a top-level transpose inside matmuls and adds. <a href="#a911ac5931b86191e44f407ef00132dd2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af928743a3a7070559bd992164e601a19">storeMatrix</a> (const MatrixTy &amp;StoreVal, Value &#42;MatrixPtr, MaybeAlign MAlign, bool IsVolatile, ShapeInfo MatrixShape, Value &#42;I, Value &#42;J, Type &#42;EltTy, IRBuilder&lt;&gt; &amp;Builder)</>}>
Stores a sub-matrix <code>StoreVal</code> into the <code>R</code> x <code>C</code> matrix starting at <code>MatrixPtr</code>&#91;I&#93;&#91;J&#93;. <a href="#af928743a3a7070559bd992164e601a19">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="MatrixTy"
  name={<><a href="#ac9fae87b41835eff9f16de8aa6b11239">storeMatrix</a> (Type &#42;Ty, MatrixTy StoreVal, Value &#42;Ptr, MaybeAlign MAlign, Value &#42;Stride, bool IsVolatile, IRBuilder&lt;&gt; &amp;Builder)</>}>
Store matrix <code>StoreVal</code> starting at <code>Ptr</code> and using <code>Stride</code> between vectors. <a href="#ac9fae87b41835eff9f16de8aa6b11239">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad5033b68f601a44246af550c825892a5">supportsShapeInfo</a> (Value &#42;V)</>}>
Returns true if shape information can be used for <code>V</code>. <a href="#ad5033b68f601a44246af550c825892a5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a90987ac6a5075492b12b46acd6e9814c">updateShapeAndReplaceAllUsesWith</a> (Instruction &amp;Old, Value &#42;New)</>}>
Add a new entry to ShapeMap for <code>New</code> with <code>Old&#39;s</code> shape info, erase the entry for <code>Old</code> and replace all uses of <code>Old</code> with <code>New</code>. <a href="#a90987ac6a5075492b12b46acd6e9814c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a49a46654ca2c32ce99be52de089052f8">Visit</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa6977569e4724e3cb0b65e13d0e2a8eb">VisitBinaryOperator</a> (BinaryOperator &#42;Inst)</>}>
Lower binary operators, if shape information is available. <a href="#aa6977569e4724e3cb0b65e13d0e2a8eb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4abe522bf135a7628b059cf5fc0be127">VisitCallInst</a> (CallInst &#42;Inst)</>}>
Replace intrinsic calls. <a href="#a4abe522bf135a7628b059cf5fc0be127">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a49e11eb7774b75fb97d50d78ed1de951">VisitLoad</a> (LoadInst &#42;Inst, Value &#42;Ptr, IRBuilder&lt;&gt; &amp;Builder)</>}>
Lower load instructions, if shape information is available. <a href="#a49e11eb7774b75fb97d50d78ed1de951">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ae35d90f9a44c556c4a984b1fd6fae199">VisitStore</a> (StoreInst &#42;Inst, Value &#42;StoredVal, Value &#42;Ptr, IRBuilder&lt;&gt; &amp;Builder)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a851ca1290a8ae078a9e084871aa2e9d7">VisitUnaryOperator</a> (UnaryOperator &#42;Inst)</>}>
Lower unary operators, if shape information is available. <a href="#a851ca1290a8ae078a9e084871aa2e9d7">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#ae457f1cf451ed893666c4a384e58f8e5">AliasAnalysis</a> &#42;</>}
  name={<><a href="#a87f782c71abaeba81e931fe09f0f1e75">AA</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#adce09a5a0de0e3177eb00e932734af2f">FunctionAnalysisManager</a> &#42;</>}
  name={<><a href="#a2f1ed500d85d49ed48bc749ae9ad2ee2">AM</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#aeea840b9eda5b2219baff5a17d112507">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42;</>}
  name={<><a href="#a9e392a8f54c9ac71adec3ef9081444a1">DT</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/function">Function</a> &amp;</>}
  name={<><a href="#ad6dacd24677f234d2f1849a8ae1de0ba">Func</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, MatrixTy &gt;</>}
  name={<><a href="#a9a9c27b7faf686491eaeeb56c5f9cce7">Inst2ColumnMatrix</a></>}>
Map from instructions to their produced column matrix. <a href="#a9a9c27b7faf686491eaeeb56c5f9cce7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &#42;</>}
  name={<><a href="#ae52578f9fcc9152060dd884fc8482d17">LI</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/optimizationremarkemitter">OptimizationRemarkEmitter</a> &#42;</>}
  name={<><a href="#accf064712b3ba2991d1fc9790bf3eba2">ORE</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, ShapeInfo &gt;</>}
  name={<><a href="#a6a8d00ede246fcdc5c5b4d89489ef960">ShapeMap</a></>}>
Maps instructions to their shape information. <a href="#a6a8d00ede246fcdc5c5b4d89489ef960">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, 16 &gt;</>}
  name={<><a href="#a56f516dfbddab41939051b0bc1e244d4">ToRemove</a></>}>
List of instructions to remove. <a href="#a56f516dfbddab41939051b0bc1e244d4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &amp;</>}
  name={<><a href="#a756f227274ae71540b93f77e12bcef9e">TTI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Private Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/fastmathflags">FastMathFlags</a></>}
  name={<><a href="#af90d0cc1bdb2afda617c972591f1e7d6">getFastMathFlags</a> (Instruction &#42;Inst)</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

<a href="/docs/api/classes/anonymous-namespace-lowermatrixintrinsics-cpp-/lowermatrixintrinsics">LowerMatrixIntrinsics</a> contains the methods used to lower matrix intrinsics.

Currently, the lowering for each matrix intrinsic is done as follows:
<ul>
<li>Propagate the shape information from intrinsics to connected instructions.</li>
<li>Lower instructions with shape information (assuming column-major layout). The lowering works similarly using row-major layout. 2.1. Get column vectors for each argument. If we already lowered the definition of an argument, use the produced column vectors directly. If not, split the operand vector containing an embedded matrix into a set of column vectors, 2.2. Lower the instruction in terms of column major operations, which yields a set of column vectors containing result matrix. Note that we lower all instructions that have shape information. Besides the intrinsics, this includes stores for example. 2.3. Update uses of the lowered instruction. If we have shape information for a user, there is nothing to do, as we will look up the result column matrix when lowering the user. For other uses, we embed the result matrix in a flat vector and update the use. 2.4. Cache the result column matrix for the instruction we lowered</li>
<li>After we lowered all instructions in a function, remove the now obsolete instructions.</li>
</ul>

Definition at line 309 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.

<SectionDefinition>

## Public Constructors

### LowerMatrixIntrinsics() {#aecb18b3bdad8c28a5e4b0dcf73c17211}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerMatrixIntrinsics (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &amp; TTI, <a href="/docs/api/namespaces/llvm/#adce09a5a0de0e3177eb00e932734af2f">FunctionAnalysisManager</a> &#42; AM)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00515">515</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### createMulAdd() {#a573504490eecc9679fda893af5bc01fb}

<MemberDefinition
  prototype={<>Value &#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::createMulAdd (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Sum, <a href="/docs/api/classes/llvm/value">Value</a> &#42; A, <a href="/docs/api/classes/llvm/value">Value</a> &#42; B, bool UseFPOp, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder, bool AllowContraction, unsigned &amp; NumComputeOps)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01309">1309</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### createTiledLoops() {#a1fb67d47830d47e72144d7456dbb7fa0}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::createTiledLoops (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul, <a href="/docs/api/classes/llvm/value">Value</a> &#42; LPtr, ShapeInfo LShape, <a href="/docs/api/classes/llvm/value">Value</a> &#42; RPtr, ShapeInfo RShape, <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; Store)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01765">1765</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### distributeTransposes() {#a47ed1ed3cecee1de815ef53eace647b1}

<MemberDefinition
  prototype={<>Instruction &#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::distributeTransposes (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Op0, ShapeInfo Shape0, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Op1, ShapeInfo Shape1, <a href="/docs/api/classes/llvm/matrixbuilder">MatrixBuilder</a> &amp; Builder, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;(<a href="/docs/api/classes/llvm/value">Value</a> &#42;, ShapeInfo, <a href="/docs/api/classes/llvm/value">Value</a> &#42;, ShapeInfo)&gt; Operation)</>}
  labels = {["inline"]}>
(Op0 op Op1)^T -&gt; Op0^T op Op1^T Transpose <code>Op0</code> and <code>Op1</code> of shape <code>Shape0</code> and <code>Shape1</code>, then use them on both sides of <code>Operation</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00738">738</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### emitMatrixMultiply() {#ab04f9a9acf8cd97627dc9b522188b0e8}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::emitMatrixMultiply (MatrixTy &amp; Result, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MatrixTy &amp; A, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MatrixTy &amp; B, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder, bool IsTiled, bool IsScalarMatrixTransposed, <a href="/docs/api/classes/llvm/fastmathflags">FastMathFlags</a> FMF)</>}
  labels = {["inline"]}>
Compute <code>Result</code> += <code>A</code> &#42; <code>B</code> for input matrices with left-associating addition.

We can fold a transpose into the operand that is used to extract scalars. This is the first operands with row-major and the second with column-major. If <code>IsScalarMatrixTransposed</code> we assume the appropriate operand is transposed.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01552">1552</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### emitSIMDTiling() {#a133fc35b714b7fc4b5a0935c811ed37a}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::emitSIMDTiling (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul, <a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; LoadOp0, <a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; LoadOp1, <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; Store, <a href="/docs/api/classes/llvm/smallptrsetimpl">SmallPtrSetImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; FusedInsts)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01824">1824</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### eraseFromParentAndMove() {#a410a078c88ab7a1e5a4ce7362adc3efa}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::eraseFromParentAndMove (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V, <a href="/docs/api/classes/llvm/basicblock/#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse&#95;iterator</a> &amp; II, <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp; BB)</>}
  labels = {["inline"]}>
Erase <code>V</code> from <code>BB</code> and move \\II forward to avoid invalidating iterators.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00765">765</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### eraseFromParentAndRemoveFromShapeMap() {#a7b46fe24407e1a38fdf96093359165c1}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::eraseFromParentAndRemoveFromShapeMap (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst)</>}
  labels = {["inline"]}>
Erase <code>Inst</code> from both ShapeMap (if an entry exists) and erase <code>Inst</code> itself.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00756">756</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### finalizeLowering() {#a7f5b1f0925dc2dbb62f05681772ca912}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::finalizeLowering (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst, MatrixTy Matrix, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Cache <code>Matrix</code> as result of <code>Inst</code> and update the uses of <code>Inst</code>.

For users with shape information, there&#39;s nothing to do: they will use the cached value when they are lowered. For other users, <code>Matrix</code> is flattened and the uses are updated to use it. Also marks <code>Inst</code> for deletion.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01338">1338</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getAlignForIndex() {#afbbb137bc7dc3b49d14cd4fd73a75dcf}

<MemberDefinition
  prototype={<>Align anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getAlignForIndex (unsigned Idx, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Stride, <a href="/docs/api/classes/llvm/type">Type</a> &#42; ElementTy, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> A) const</>}
  labels = {["inline"]}>
Compute the alignment for a column/row <code>Idx</code> with <code>Stride</code> between them.

The address at <code>Idx</code> == 0 has alignment <code>A</code>. If <code>Stride</code> is a <a href="/docs/api/classes/llvm/constantint">ConstantInt</a>, reduce the initial alignment based on the byte offset. For non-ConstantInt strides, return the common alignment of the initial alignment and the element size in bytes.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01134">1134</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getMatrix() {#aad5def33faf75944be159808071d9698}

<MemberDefinition
  prototype={<>MatrixTy anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getMatrix (<a href="/docs/api/classes/llvm/value">Value</a> &#42; MatrixVal, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> ShapeInfo &amp; SI, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Return the set of vectors that a matrix value is lowered to.

If we lowered <code>MatrixVal</code>, just return the cache result matrix. Otherwise split the flat vector <code>MatrixVal</code> containing a matrix with shape <code><a href="/docs/api/namespaces/llvm/si">SI</a></code> into vectors.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00544">544</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getNonAliasingPointer() {#a7d8410ca3fc6fb227416067d3c2535d2}

<MemberDefinition
  prototype={<>Value &#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getNonAliasingPointer (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; Load, <a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; Store, <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul)</>}
  labels = {["inline"]}>
Ensure that the memory in <code>Load</code> does not alias <code>Store</code> by potentially copying it to a new location.

This new or otherwise the original location is returned.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01636">1636</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getNumOps() {#af44a0d4c944c50fe30fad03d97e9f66f}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getNumOps (<a href="/docs/api/classes/llvm/type">Type</a> &#42; VT)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00519">519</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getNumOps() {#a0a0644b7c29287b0ea96ec3524e092e4}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getNumOps (<a href="/docs/api/classes/llvm/type">Type</a> &#42; ST, unsigned N)</>}
  labels = {["inline"]}>
Return the estimated number of vector ops required for an operation on <code>VT</code> &#42; N.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00532">532</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getZeroMatrix() {#a897ffb621380e9230778c792ca27d9c4}

<MemberDefinition
  prototype={<>MatrixTy anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getZeroMatrix (<a href="/docs/api/classes/llvm/type">Type</a> &#42; EltType, unsigned R, unsigned C)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01757">1757</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### insertVector() {#a1fa9a9154ccdb8775496f8b47315515e}

<MemberDefinition
  prototype={<>Value &#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::insertVector (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Col, unsigned I, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Block, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01279">1279</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### isFusionProfitable() {#acdf2ba7931aca786fe764e4361610d3e}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::isFusionProfitable (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01721">1721</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### isMinimal() {#a34a9fad9290819f56c761e0a17ca7058}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::isMinimal () const</>}
  labels = {["inline"]}>
Is this the minimal version executed in the backend pipelines.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00526">526</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### liftTranspose() {#a6e4c82e1d5800196765f95dbf8b48e6e}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::liftTranspose (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00889">889</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### loadMatrix() {#a5d31f8dc135425bc0f938f13bcca4a0a}

<MemberDefinition
  prototype={<>MatrixTy anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::loadMatrix (<a href="/docs/api/classes/llvm/type">Type</a> &#42; Ty, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> MAlign, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Stride, bool IsVolatile, ShapeInfo Shape, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Load a matrix with <code>Shape</code> starting at <code>Ptr</code> and using <code>Stride</code> between vectors.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01151">1151</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### loadMatrix() {#aa8322b8934ca2ae69762c7056c3bf358}

<MemberDefinition
  prototype={<>MatrixTy anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::loadMatrix (<a href="/docs/api/classes/llvm/value">Value</a> &#42; MatrixPtr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Align, bool IsVolatile, ShapeInfo MatrixShape, <a href="/docs/api/classes/llvm/value">Value</a> &#42; I, <a href="/docs/api/classes/llvm/value">Value</a> &#42; J, ShapeInfo ResultShape, <a href="/docs/api/classes/llvm/type">Type</a> &#42; EltTy, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Loads a sub-matrix with shape <code>ResultShape</code> from a <code>R</code> x <code>C</code> matrix, starting at <code>MatrixPtr</code>&#91;I&#93;&#91;J&#93;.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01174">1174</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerColumnMajorLoad() {#a237ac9d59f45a0b7c18296704e005a6c}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerColumnMajorLoad (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; Inst)</>}
  labels = {["inline"]}>
Lowers llvm.matrix.column.major.load.

The intrinsic loads a matrix from memory using a stride between columns.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01204">1204</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerColumnMajorStore() {#a4c72146be47366faa66bbe3fa93abf2a}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerColumnMajorStore (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; Inst)</>}
  labels = {["inline"]}>
Lowers llvm.matrix.column.major.store.

The intrinsic store a matrix back memory using a stride between columns.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01267">1267</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### lowerDotProduct() {#ab3118e33ed28deca370645b8b909fa5a}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::lowerDotProduct (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul, <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;, 16 &gt; &amp; FusedInsts, <a href="/docs/api/classes/llvm/fastmathflags">FastMathFlags</a> FMF)</>}
  labels = {["inline"]}>
Special case for MatMul lowering.

Prevents scalar loads of row-major vectors Lowers to vector reduction add instead of sequential add if reassocation is enabled.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01358">1358</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerLoad() {#a1b51a567be126f7919bef1c351d859e2}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerLoad (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Align, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Stride, bool IsVolatile, ShapeInfo Shape)</>}
  labels = {["inline"]}>
Lower a load instruction with shape information.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01192">1192</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerMatrixMultiplyFused() {#a7ae0da674977e2cd46d8df703e7dbab1}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerMatrixMultiplyFused (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul, <a href="/docs/api/classes/llvm/smallptrsetimpl">SmallPtrSetImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; FusedInsts, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;, 16 &gt; &amp; LifetimeEnds)</>}
  labels = {["inline"]}>
Try to lower matrix multiply chains by fusing operations.

Call finalizeLowering on lowered instructions. Instructions that are completely eliminated by fusion are added to <code>FusedInsts</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01893">1893</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerMultiply() {#a6d7b7ecce18021429495c1db66a025ee}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerMultiply (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; MatMul)</>}
  labels = {["inline"]}>
Lowers llvm.matrix.multiply.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02039">2039</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerStore() {#a6fb1dea3dcd9b6517ad7c8a6a7269366}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerStore (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Matrix, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> A, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Stride, bool IsVolatile, ShapeInfo Shape)</>}
  labels = {["inline"]}>
Lower a store instruction with shape information.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01254">1254</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LowerTranspose() {#aadb2a52a94fd7cf1e3f1643e0f5e2934}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LowerTranspose (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; Inst)</>}
  labels = {["inline"]}>
Lowers llvm.matrix.transpose.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02065">2065</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### optimizeTransposes() {#ab02410035de7d54b1abc168a9d48e809}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::optimizeTransposes ()</>}
  labels = {["inline"]}>
Try moving transposes in order to fold them away or into multiplies.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00947">947</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### propagateShapeBackward() {#a611115d09f3dd3ef310f70c87a8ba402}

<MemberDefinition
  prototype={<>SmallVector&lt; Instruction &#42;, 32 &gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::propagateShapeBackward (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; WorkList)</>}
  labels = {["inline"]}>
Propagate the shape to operands of instructions with shape information.

<code>Worklist</code> contains the instruction for which we already know the shape.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00665">665</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### propagateShapeForward() {#adf1371d869d3a7468c48401a2a321b26}

<MemberDefinition
  prototype={<>SmallVector&lt; Instruction &#42;, 32 &gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::propagateShapeForward (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; WorkList)</>}
  labels = {["inline"]}>
Propagate the shape information of instructions to their users.

The work list contains instructions for which we can compute the shape, either based on the information provided by matrix intrinsics or known shapes of operands.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00637">637</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### setShapeInfo() {#ae165cb587ec7f72cf62df6623eba91e7}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::setShapeInfo (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V, ShapeInfo Shape)</>}
  labels = {["inline"]}>
If <code>V</code> already has a known shape return false.

Otherwise set the shape for instructions that support it.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00583">583</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### sinkTranspose() {#a911ac5931b86191e44f407ef00132dd2}

<MemberDefinition
  prototype={<>Instruction &#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::sinkTranspose (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I, <a href="/docs/api/classes/llvm/basicblock/#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse&#95;iterator</a> &amp; II)</>}
  labels = {["inline"]}>
Sink a top-level transpose inside matmuls and adds.

This creates and erases instructions as needed, and returns the newly created instruction while updating the iterator to avoid invalidation. If this returns nullptr, no new instruction was created.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00795">795</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### storeMatrix() {#af928743a3a7070559bd992164e601a19}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::storeMatrix (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> MatrixTy &amp; StoreVal, <a href="/docs/api/classes/llvm/value">Value</a> &#42; MatrixPtr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> MAlign, bool IsVolatile, ShapeInfo MatrixShape, <a href="/docs/api/classes/llvm/value">Value</a> &#42; I, <a href="/docs/api/classes/llvm/value">Value</a> &#42; J, <a href="/docs/api/classes/llvm/type">Type</a> &#42; EltTy, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Stores a sub-matrix <code>StoreVal</code> into the <code>R</code> x <code>C</code> matrix starting at <code>MatrixPtr</code>&#91;I&#93;&#91;J&#93;.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01216">1216</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### storeMatrix() {#ac9fae87b41835eff9f16de8aa6b11239}

<MemberDefinition
  prototype={<>MatrixTy anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::storeMatrix (<a href="/docs/api/classes/llvm/type">Type</a> &#42; Ty, MatrixTy StoreVal, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> MAlign, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Stride, bool IsVolatile, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Store matrix <code>StoreVal</code> starting at <code>Ptr</code> and using <code>Stride</code> between vectors.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01232">1232</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### supportsShapeInfo() {#ad5033b68f601a44246af550c825892a5}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::supportsShapeInfo (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V)</>}
  labels = {["inline"]}>
Returns true if shape information can be used for <code>V</code>.

The supported instructions must match the instructions that can be lowered by this pass.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00613">613</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### updateShapeAndReplaceAllUsesWith() {#a90987ac6a5075492b12b46acd6e9814c}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::updateShapeAndReplaceAllUsesWith (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; Old, <a href="/docs/api/classes/llvm/value">Value</a> &#42; New)</>}
  labels = {["inline"]}>
Add a new entry to ShapeMap for <code>New</code> with <code>Old&#39;s</code> shape info, erase the entry for <code>Old</code> and replace all uses of <code>Old</code> with <code>New</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00778">778</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### Visit() {#a49a46654ca2c32ce99be52de089052f8}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::Visit ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00969">969</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### VisitBinaryOperator() {#aa6977569e4724e3cb0b65e13d0e2a8eb}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::VisitBinaryOperator (<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &#42; Inst)</>}
  labels = {["inline"]}>
Lower binary operators, if shape information is available.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02127">2127</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### VisitCallInst() {#a4abe522bf135a7628b059cf5fc0be127}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::VisitCallInst (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42; Inst)</>}
  labels = {["inline"]}>
Replace intrinsic calls.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l01106">1106</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### VisitLoad() {#a49e11eb7774b75fb97d50d78ed1de951}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::VisitLoad (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>
Lower load instructions, if shape information is available.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02103">2103</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### VisitStore() {#ae35d90f9a44c556c4a984b1fd6fae199}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::VisitStore (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42; Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42; StoredVal, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Ptr, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a>&lt;&gt; &amp; Builder)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02114">2114</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### VisitUnaryOperator() {#a851ca1290a8ae078a9e084871aa2e9d7}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::VisitUnaryOperator (<a href="/docs/api/classes/llvm/unaryoperator">UnaryOperator</a> &#42; Inst)</>}
  labels = {["inline"]}>
Lower unary operators, if shape information is available.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02178">2178</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AA {#a87f782c71abaeba81e931fe09f0f1e75}

<MemberDefinition
  prototype={<>AliasAnalysis&#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::AA = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00314">314</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### AM {#a2f1ed500d85d49ed48bc749ae9ad2ee2}

<MemberDefinition
  prototype={<>FunctionAnalysisManager&#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::AM</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00313">313</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### DL {#aeea840b9eda5b2219baff5a17d112507}

<MemberDefinition
  prototype={<>const DataLayout&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00311">311</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### DT {#a9e392a8f54c9ac71adec3ef9081444a1}

<MemberDefinition
  prototype={<>DominatorTree&#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::DT = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00315">315</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### Func {#ad6dacd24677f234d2f1849a8ae1de0ba}

<MemberDefinition
  prototype={<>Function&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::Func</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00310">310</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### Inst2ColumnMatrix {#a9a9c27b7faf686491eaeeb56c5f9cce7}

<MemberDefinition
  prototype={<>MapVector&lt;Value &#42;, MatrixTy&gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::Inst2ColumnMatrix</>}>
Map from instructions to their produced column matrix.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00500">500</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### LI {#ae52578f9fcc9152060dd884fc8482d17}

<MemberDefinition
  prototype={<>LoopInfo&#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::LI = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00316">316</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### ORE {#accf064712b3ba2991d1fc9790bf3eba2}

<MemberDefinition
  prototype={<>OptimizationRemarkEmitter&#42; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::ORE = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00317">317</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### ShapeMap {#a6a8d00ede246fcdc5c5b4d89489ef960}

<MemberDefinition
  prototype={<>DenseMap&lt;Value &#42;, ShapeInfo&gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::ShapeMap</>}>
Maps instructions to their shape information.

The shape information describes the shape to be used while lowering. This matches the shape of the result value of the instruction, with the only exceptions being store instructions and the matrix&#95;column&#95;major&#95;store intrinsics. For those, the shape information indicates that those instructions should be lowered using shape information as well. Note that extra care is needed when erasing or RAUW&#39;ing a value that is present in ShapeMap. If the replacement is also a matrix operation, use updateShapeAndReplaceAllUsesWith to make sure the replacement is added to ShapeMap. We don&#39;t use <a href="/docs/api/classes/llvm/valuemap">ValueMap</a>, as there are also cases where we do not want to add shape information for a replacement instruction. When directly erasing a value with an entry in ShapeMap, use eraseFromParentAndRemoveFromShapeMap to make sure ShapeMap is also updated accordingly.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00492">492</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### ToRemove {#a56f516dfbddab41939051b0bc1e244d4}

<MemberDefinition
  prototype={<>SmallVector&lt;Instruction &#42;, 16&gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::ToRemove</>}>
List of instructions to remove.

While lowering, we are not replacing all users of a lowered instruction, if shape information is available and those need to be removed after we finished lowering.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00497">497</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### TTI {#a756f227274ae71540b93f77e12bcef9e}

<MemberDefinition
  prototype={<>const TargetTransformInfo&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::TTI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00312">312</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Static Functions

### getFastMathFlags() {#af90d0cc1bdb2afda617c972591f1e7d6}

<MemberDefinition
  prototype={<>static FastMathFlags anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::getFastMathFlags (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; Inst)</>}
  labels = {["inline", "static"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l00503">503</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a></li>
</ul>

</DoxygenPage>
