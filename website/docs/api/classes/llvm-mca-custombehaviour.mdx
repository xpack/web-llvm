---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/mca/custombehaviour
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CustomBehaviour` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Class which can be overriden by targets to enforce instruction dependencies and behaviours that aren&#39;t expressed well enough within the scheduling model for mca to automatically simulate them properly. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::mca::CustomBehaviour</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/MCA/CustomBehaviour.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h"
  isLocal="true" />
</IncludesList>

## Derived Classes

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/mca/amdgpucustombehaviour">AMDGPUCustomBehaviour</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ad9c2ca3f16c7d9d1c6cd4a20269ba729">CustomBehaviour</a> (const MCSubtargetInfo &amp;STI, const mca::SourceMgr &amp;SrcMgr, const MCInstrInfo &amp;MCII)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a62666ccd5a13e55da4d4b03c80a4c75f">~CustomBehaviour</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a1733693fc63741279331007c38453223">checkCustomHazard</a> (ArrayRef&lt; InstRef &gt; IssuedInst, const InstRef &amp;IR)</>}>
Before the llvm-mca pipeline dispatches an instruction, it first checks for any register or resource dependencies / hazards. <a href="#a1733693fc63741279331007c38453223">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/mca/view">View</a> &gt; &gt;</>}
  name={<><a href="#a0a73f42bda40682efac9f25123e4e8bd">getEndViews</a> (llvm::MCInstPrinter &amp;IP, llvm::ArrayRef&lt; llvm::MCInst &gt; Insts)</>}>
Return a vector of Views that will be added after all other Views. <a href="#a0a73f42bda40682efac9f25123e4e8bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/mca/view">View</a> &gt; &gt;</>}
  name={<><a href="#a6d04044329947a112b3194db8b15a49e">getPostInstrInfoViews</a> (llvm::MCInstPrinter &amp;IP, llvm::ArrayRef&lt; llvm::MCInst &gt; Insts)</>}>
Return a vector of Views that will be added after the InstructionInfoView. <a href="#a6d04044329947a112b3194db8b15a49e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/mca/view">View</a> &gt; &gt;</>}
  name={<><a href="#ad9342f37242dde1bc862f0441a82fd5e">getStartViews</a> (llvm::MCInstPrinter &amp;IP, llvm::ArrayRef&lt; llvm::MCInst &gt; Insts)</>}>
Return a vector of Views that will be added before all other Views. <a href="#ad9342f37242dde1bc862f0441a82fd5e">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mcinstrinfo">MCInstrInfo</a> &amp;</>}
  name={<><a href="#a15a50057bc7184990fc2b2885321821b">MCII</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/mca/sourcemgr">mca::SourceMgr</a> &amp;</>}
  name={<><a href="#a818762e038ef7ffa0d5c2bc9822961c5">SrcMgr</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mcsubtargetinfo">MCSubtargetInfo</a> &amp;</>}
  name={<><a href="#a8f327d1084786084e10242b9868cdf74">STI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Class which can be overriden by targets to enforce instruction dependencies and behaviours that aren&#39;t expressed well enough within the scheduling model for mca to automatically simulate them properly.

If you implement this class for your target, make sure to also implement a target specific <a href="/docs/api/classes/llvm/mca/instrpostprocess">InstrPostProcess</a> class as well.

Definition at line 66 of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.

<SectionDefinition>

## Public Constructors

### CustomBehaviour() {#ad9c2ca3f16c7d9d1c6cd4a20269ba729}

<MemberDefinition
  prototype={<>llvm::mca::CustomBehaviour::CustomBehaviour (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mcsubtargetinfo">MCSubtargetInfo</a> &amp; STI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/mca/sourcemgr">mca::SourceMgr</a> &amp; SrcMgr, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mcinstrinfo">MCInstrInfo</a> &amp; MCII)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00073">73</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~CustomBehaviour() {#a62666ccd5a13e55da4d4b03c80a4c75f}

<MemberDefinition
  prototype="llvm::mca::CustomBehaviour::~CustomBehaviour ()"
  labels = {["virtual"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00077">77</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### checkCustomHazard() {#a1733693fc63741279331007c38453223}

<MemberDefinition
  prototype={<>unsigned llvm::mca::CustomBehaviour::checkCustomHazard (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/mca/instref">InstRef</a> &gt; IssuedInst, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mca/instref">InstRef</a> &amp; IR)</>}
  labels = {["virtual"]}>
Before the llvm-mca pipeline dispatches an instruction, it first checks for any register or resource dependencies / hazards.

If it doesn&#39;t find any, this method will be invoked to determine if there are any custom hazards that the instruction needs to wait for. The return value of this method is the number of cycles that the instruction needs to wait for. It&#39;s safe to underestimate the number of cycles to wait for since these checks will be invoked again before the intruction gets dispatched. However, it&#39;s not safe (accurate) to overestimate the number of cycles to wait for since the instruction will wait for AT LEAST that number of cycles before attempting to be dispatched again.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00090">90</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp/#l00021">21</a> of file <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp">CustomBehaviour.cpp</a>.
</MemberDefinition>

### getEndViews() {#a0a73f42bda40682efac9f25123e4e8bd}

<MemberDefinition
  prototype={<>std::vector&lt; std::unique&#95;ptr&lt; View &gt; &gt; llvm::mca::CustomBehaviour::getEndViews (<a href="/docs/api/classes/llvm/mcinstprinter">llvm::MCInstPrinter</a> &amp; IP, <a href="/docs/api/classes/llvm/arrayref">llvm::ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/mcinst">llvm::MCInst</a> &gt; Insts)</>}
  labels = {["virtual"]}>
Return a vector of Views that will be added after all other Views.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00115">115</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp/#l00040">40</a> of file <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp">CustomBehaviour.cpp</a>.
</MemberDefinition>

### getPostInstrInfoViews() {#a6d04044329947a112b3194db8b15a49e}

<MemberDefinition
  prototype={<>std::vector&lt; std::unique&#95;ptr&lt; View &gt; &gt; llvm::mca::CustomBehaviour::getPostInstrInfoViews (<a href="/docs/api/classes/llvm/mcinstprinter">llvm::MCInstPrinter</a> &amp; IP, <a href="/docs/api/classes/llvm/arrayref">llvm::ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/mcinst">llvm::MCInst</a> &gt; Insts)</>}
  labels = {["virtual"]}>
Return a vector of Views that will be added after the InstructionInfoView.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00111">111</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp/#l00034">34</a> of file <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp">CustomBehaviour.cpp</a>.
</MemberDefinition>

### getStartViews() {#ad9342f37242dde1bc862f0441a82fd5e}

<MemberDefinition
  prototype={<>std::vector&lt; std::unique&#95;ptr&lt; View &gt; &gt; llvm::mca::CustomBehaviour::getStartViews (<a href="/docs/api/classes/llvm/mcinstprinter">llvm::MCInstPrinter</a> &amp; IP, <a href="/docs/api/classes/llvm/arrayref">llvm::ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/mcinst">llvm::MCInst</a> &gt; Insts)</>}
  labels = {["virtual"]}>
Return a vector of Views that will be added before all other Views.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00108">108</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp/#l00028">28</a> of file <a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp">CustomBehaviour.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### MCII {#a15a50057bc7184990fc2b2885321821b}

<MemberDefinition
  prototype={<>const MCInstrInfo&amp; llvm::mca::CustomBehaviour::MCII</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00070">70</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.
</MemberDefinition>

### SrcMgr {#a818762e038ef7ffa0d5c2bc9822961c5}

<MemberDefinition
  prototype={<>const mca::SourceMgr&amp; llvm::mca::CustomBehaviour::SrcMgr</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00069">69</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.
</MemberDefinition>

### STI {#a8f327d1084786084e10242b9868cdf74}

<MemberDefinition
  prototype={<>const MCSubtargetInfo&amp; llvm::mca::CustomBehaviour::STI</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h/#l00068">68</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/mca/custombehaviour-h">CustomBehaviour.h</a></li>
<li><a href="/docs/api/files/lib/lib/mca/custombehaviour-cpp">CustomBehaviour.cpp</a></li>
</ul>

</DoxygenPage>
