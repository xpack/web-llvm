---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CallsiteContextGraph` Class Template Reference

<DoxygenPage pluginConfig={pluginConfig}>

CRTP base for graphs built from either IR or ThinLTO summary index. <a href="#details">More...</a>

## Declaration

<CodeBlock>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;
class anonymous_namespace{MemProfContextDisambiguation.cpp}::CallsiteContextGraph&lt;DerivedCCG, FuncTy, CallTy&gt;</CodeBlock>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="using"
  name={<><a href="#ac533932253580a11deeb9414654910aa">EdgeIter</a> = typename std::vector&lt; std::shared&#95;ptr&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> &gt; &gt;<a href="/docs/api/classes/llvm/iplist">::iterator</a></>}>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="struct"
  name={<><a href="#acbfb3d954ea87d753abdcf53da9b2931">DOTGraphTraits&lt; const CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="struct"
  name={<><a href="#a99a93c3c92863b0f779dc91de9c463dd">GraphTraits&lt; const CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;</>}
  name={<><a href="#a7e3629b9531f0e5bae3ecce592301d78">operator&lt;&lt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  name={<><a href="#a24a25f8f197ec2041fd2a9efcd4160b1">CallsiteContextGraph</a> ()=default</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  name={<><a href="#abedaf92f4f8a7e776d7eaffc9128d5c0">CallsiteContextGraph</a> (const CallsiteContextGraph &amp;)=default</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  name={<><a href="#a936cde44d743c355f2492c732396dd80">CallsiteContextGraph</a> (CallsiteContextGraph &amp;&amp;)=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  type="void"
  name={<><a href="#a3c04d483e66e81efc4812a2d38b93a8d">addStackNodesForMIB</a> (ContextNode &#42;AllocNode, CallStack&lt; NodeT, IteratorT &gt; &amp;StackContext, CallStack&lt; NodeT, IteratorT &gt; &amp;CallsiteContext, AllocationType AllocType, ArrayRef&lt; ContextTotalSize &gt; ContextSizeInfo)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#af222e51d6efae0aeb9ea76cac1b46300">assignFunctions</a> ()</>}>
Assign callsite clones to functions, cloning functions as needed to accommodate the combinations of their callsite clones reached by callers. <a href="#af222e51d6efae0aeb9ea76cac1b46300">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#aa59e482dfde65bd15ecf6621e9ffaf48">dump</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#ae120eda05be009e7e1124ac882412cad">exportToDot</a> (std::string Label) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  type="auto "
  name={<><a href="#afa50d8bf14e4945e56c0cd33548c25ff">getStackIdsWithContextNodes</a> (CallStack&lt; NodeT, IteratorT &gt; &amp;CallsiteContext) -&gt; std::vector&lt; uint64&#95;t &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a35fd3a36d7623912363f7bc2550aef0b">identifyClones</a> ()</>}>
Perform cloning on the graph necessary to uniquely identify the allocation behavior of an allocation based on its context. <a href="#a35fd3a36d7623912363f7bc2550aef0b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a9b182ff5e447c562a7d45505c4b5a63a">print</a> (raw&#95;ostream &amp;OS) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#aaa295e87dfe1eb5dff19dbbe08e8f464">printTotalSizes</a> (raw&#95;ostream &amp;OS) const</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#a4652a942c3bcd94d6540e3fb0238d356">process</a> ()</>}>
Main entry point to perform analysis and transformations on graph. <a href="#a4652a942c3bcd94d6540e3fb0238d356">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#ab7ab368586256d87584451074a8956f3">recursivelyRemoveNoneTypeCalleeEdges</a> (ContextNode &#42;Node, DenseSet&lt; const ContextNode &#42; &gt; &amp;Visited)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a5dde305bd14a5c36d35bd957840a1f95">removeNoneTypeCalleeEdges</a> (ContextNode &#42;Node)</>}>
Helpers to remove edges that have allocation type None (due to not carrying any context ids) after transformations. <a href="#a5dde305bd14a5c36d35bd957840a1f95">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a43cb53754d087a71a26425013204ade4">removeNoneTypeCallerEdges</a> (ContextNode &#42;Node)</>}>
</MembersIndexItem>

</MembersIndex>

## Protected Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#adf8f8ad14c08099e793ca64a0768c96a">addAllocNode</a> (CallInfo Call, const FuncTy &#42;F)</>}>
Adds nodes for the given allocation and any stack ids on its memprof MIB metadata (or summary). <a href="#adf8f8ad14c08099e793ca64a0768c96a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  type="void"
  name={<><a href="#a3c04d483e66e81efc4812a2d38b93a8d">addStackNodesForMIB</a> (ContextNode &#42;AllocNode, CallStack&lt; NodeT, IteratorT &gt; &amp;StackContext, CallStack&lt; NodeT, IteratorT &gt; &amp;CallsiteContext, AllocationType AllocType, ArrayRef&lt; ContextTotalSize &gt; ContextSizeInfo)</>}>
Adds nodes for the given MIB stack ids. <a href="#a3c04d483e66e81efc4812a2d38b93a8d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  type="auto "
  name={<><a href="#afa50d8bf14e4945e56c0cd33548c25ff">getStackIdsWithContextNodes</a> (CallStack&lt; NodeT, IteratorT &gt; &amp;CallsiteContext) -&gt; std::vector&lt; uint64&#95;t &gt;</>}>
Get a list of nodes corresponding to the stack ids in the given callsite context. <a href="#afa50d8bf14e4945e56c0cd33548c25ff">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a9f3bc3cacc5c440fc83d37726a3af8aa">handleCallsitesWithMultipleTargets</a> ()</>}>
Update graph to conservatively handle any callsite stack nodes that target multiple different callee target functions. <a href="#a9f3bc3cacc5c440fc83d37726a3af8aa">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#aa262bc6616e27d0c699be16373b96b60">partitionCallsByCallee</a> (ContextNode &#42;Node, ArrayRef&lt; CallInfo &gt; AllCalls, std::vector&lt; std::pair&lt; CallInfo, ContextNode &#42; &gt; &gt; &amp;NewCallToNode)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a6e0e5a23aea2cd0d2bc271342e6e5c34">updateStackNodes</a> ()</>}>
Matches all callsite metadata (or summary) to the nodes created for allocation memprof MIB metadata, synthesizing new nodes to reflect any inlining performed on those callsite instructions. <a href="#a6e0e5a23aea2cd0d2bc271342e6e5c34">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a3cc1c4cac072b9ce1d6c79f67ef43e28">assignStackNodesPostOrder</a> (ContextNode &#42;Node, DenseSet&lt; const ContextNode &#42; &gt; &amp;Visited, DenseMap&lt; uint64&#95;t, std::vector&lt; CallContextInfo &gt; &gt; &amp;StackIdToMatchingCalls, DenseMap&lt; CallInfo, CallInfo &gt; &amp;CallToMatchingCall)</>}>
Assigns the given <a href="/docs/api/classes/node">Node</a> to calls at or inlined into the location with the <a href="/docs/api/classes/node">Node</a>&#39;s stack id, after post order traversing and processing its caller nodes. <a href="#a3cc1c4cac072b9ce1d6c79f67ef43e28">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#a62201839051ee83b40ba20f56fa10ea9">calleeMatchesFunc</a> (CallTy Call, const FuncTy &#42;Func, const FuncTy &#42;CallerFunc, std::vector&lt; std::pair&lt; CallTy, FuncTy &#42; &gt; &gt; &amp;FoundCalleeChain)</>}>
Returns true if the given call targets the given function, or if we were able to identify the call chain through intermediate tail calls (in which case FoundCalleeChain will be populated). <a href="#a62201839051ee83b40ba20f56fa10ea9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#a969677b7f4458b91551562a2753e92dc">calleesMatch</a> (CallTy Call, EdgeIter &amp;EI, MapVector&lt; CallInfo, ContextNode &#42; &gt; &amp;TailCallToContextNodeMap)</>}>
Returns true if the given call targets the callee of the given edge, or if we were able to identify the call chain through intermediate tail calls. <a href="#a969677b7f4458b91551562a2753e92dc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a8c30254400cf964764267b34458a24e2">check</a> () const</>}>
Perform sanity checks on graph when requested. <a href="#a8c30254400cf964764267b34458a24e2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/funcinfo">FuncInfo</a></>}
  name={<><a href="#ae77a8a5f4ff5dd895df0b2a2e5808a28">cloneFunctionForCallsite</a> (FuncInfo &amp;Func, CallInfo &amp;Call, std::map&lt; CallInfo, CallInfo &gt; &amp;CallMap, std::vector&lt; CallInfo &gt; &amp;CallsWithMetadataInFunc, unsigned CloneNo)</>}>
Clone the given function for the given callsite, recording mapping of all of the functions tracked calls to their new versions in the CallMap. <a href="#ae77a8a5f4ff5dd895df0b2a2e5808a28">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>uint8&#95;t</>}
  name={<><a href="#adc48b29f5e4ecf2536eab361040355af">computeAllocType</a> (DenseSet&lt; uint32&#95;t &gt; &amp;ContextIds)</>}>
Computes the alloc type corresponding to the given context ids, by unioning their recorded alloc types. <a href="#adc48b29f5e4ecf2536eab361040355af">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a8adace7955ca256257de26a58df7f00c">connectNewNode</a> (ContextNode &#42;NewNode, ContextNode &#42;OrigNode, bool TowardsCallee, DenseSet&lt; uint32&#95;t &gt; RemainingContextIds)</>}>
Connect the NewNode to OrigNode&#39;s callees if TowardsCallee is true, else to its callers. <a href="#a8adace7955ca256257de26a58df7f00c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#a16b574cb6107f8227477a7a041263d8a">createNewNode</a> (bool IsAllocation, const FuncTy &#42;F=nullptr, CallInfo C=CallInfo())</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="auto "
  name={<><a href="#a4a2af362f4ae5b5d2852e63f52dbe2bd">duplicateContextIds</a> (const DenseSet&lt; uint32&#95;t &gt; &amp;StackSequenceContextIds, DenseMap&lt; uint32&#95;t, DenseSet&lt; uint32&#95;t &gt; &gt; &amp;OldToNewContextIds) -&gt; <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt;</>}>
Duplicates the given set of context ids, updating the provided map from each original id with the newly generated context ids, and returning the new duplicated id set. <a href="#a4a2af362f4ae5b5d2852e63f52dbe2bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a></>}
  name={<><a href="#a24622e13e7c21ec4f423f7bb03256499">getAllocationCallType</a> (const CallInfo &amp;Call) const</>}>
Get the <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> assigned to the given allocation instruction clone. <a href="#a24622e13e7c21ec4f423f7bb03256499">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42;</>}
  name={<><a href="#a569d913cca671ac5b2e655aee53d4a41">getCalleeFunc</a> (CallTy Call)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="std::string"
  name={<><a href="#a3dd2335b3998bacdd9bc225312b4eb76">getLabel</a> (const FuncTy &#42;Func, const CallTy Call, unsigned CloneNo) const</>}>
Gets a label to use in the dot graph for the given call clone in the given function. <a href="#a3dd2335b3998bacdd9bc225312b4eb76">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>uint64&#95;t</>}
  name={<><a href="#ae424a749ecf27d9c15e69d6be3cb276f">getLastStackId</a> (CallTy Call)</>}>
Get the last stack id in the context for callsite. <a href="#ae424a749ecf27d9c15e69d6be3cb276f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#a7ee77ad870abd263f7b58c02127374c0">getNodeForAlloc</a> (const CallInfo &amp;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#aabee1b7480b1c587a1563385af84237d">getNodeForInst</a> (const CallInfo &amp;C)</>}>
Helpers to find the node corresponding to the given call or stackid. <a href="#aabee1b7480b1c587a1563385af84237d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#a04e61c75e7deb8f99dc08bec3a1db412">getNodeForStackId</a> (uint64&#95;t StackId)</>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>uint64&#95;t</>}
  name={<><a href="#a95c50766a3bdb199b6d4b99a3a5de523">getStackId</a> (uint64&#95;t IdOrIndex) const</>}>
Get the stack id corresponding to the given Id or Index (for IR this will return itself, for a summary index this will return the id recorded in the index for that stack id index value). <a href="#a95c50766a3bdb199b6d4b99a3a5de523">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="auto "
  name={<><a href="#af278458be7bedb58014c6e1e491efcd6">getStackIdsWithContextNodesForCall</a> (CallTy Call) -&gt; std::vector&lt; uint64&#95;t &gt;</>}>
Get a list of nodes corresponding to the stack ids in the given callsite&#39;s context. <a href="#af278458be7bedb58014c6e1e491efcd6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a49817ed3e2ef162d4f365cdaa5a43837">identifyClones</a> (ContextNode &#42;Node, DenseSet&lt; const ContextNode &#42; &gt; &amp;Visited, const DenseSet&lt; uint32&#95;t &gt; &amp;AllocContextIds)</>}>
Recursively perform cloning on the graph for the given <a href="/docs/api/classes/node">Node</a> and its callers, in order to uniquely identify the allocation behavior of an allocation given its context. <a href="#a49817ed3e2ef162d4f365cdaa5a43837">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>uint8&#95;t</>}
  name={<><a href="#a2c2356b9ad9fdc8410a5fba26c47a0a3">intersectAllocTypes</a> (const DenseSet&lt; uint32&#95;t &gt; &amp;Node1Ids, const DenseSet&lt; uint32&#95;t &gt; &amp;Node2Ids)</>}>
Returns the allocation type of the intersection of the contexts of two nodes (based on their provided context id sets). <a href="#a2c2356b9ad9fdc8410a5fba26c47a0a3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>uint8&#95;t</>}
  name={<><a href="#ae43ce096237287ba9a1d990fa5e34639">intersectAllocTypesImpl</a> (const DenseSet&lt; uint32&#95;t &gt; &amp;Node1Ids, const DenseSet&lt; uint32&#95;t &gt; &amp;Node2Ids)</>}>
Returns the allocation type of the intersection of the contexts of two nodes (based on their provided context id sets), optimized for the case when Node1Ids is smaller than Node2Ids. <a href="#ae43ce096237287ba9a1d990fa5e34639">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a0694d8f9165217e5ca8e3c4eddec5db3">moveCalleeEdgeToNewCaller</a> (const std::shared&#95;ptr&lt; ContextEdge &gt; &amp;Edge, ContextNode &#42;NewCaller)</>}>
Change the caller of the edge at the given callee edge iterator to be NewCaller, performing the necessary context id and allocation type updates. <a href="#a0694d8f9165217e5ca8e3c4eddec5db3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#ad57247d61c2f6c1ae4f2db10d216cdf5">moveEdgeToExistingCalleeClone</a> (const std::shared&#95;ptr&lt; ContextEdge &gt; &amp;Edge, ContextNode &#42;NewCallee, bool NewClone=false, DenseSet&lt; uint32&#95;t &gt; ContextIdsToMove=&#123;&#125;)</>}>
Change the callee of Edge to existing callee clone NewCallee, performing the necessary context id and allocation type updates. <a href="#ad57247d61c2f6c1ae4f2db10d216cdf5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;</>}
  name={<><a href="#ae34504725352592044ab30d9f4de5cf5">moveEdgeToNewCalleeClone</a> (const std::shared&#95;ptr&lt; ContextEdge &gt; &amp;Edge, DenseSet&lt; uint32&#95;t &gt; ContextIdsToMove=&#123;&#125;)</>}>
Create a clone of Edge&#39;s callee and move Edge to that new callee node, performing the necessary context id and allocation type updates. <a href="#ae34504725352592044ab30d9f4de5cf5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#ae14599e9efb3555b1fdcae80df618d5c">propagateDuplicateContextIds</a> (const DenseMap&lt; uint32&#95;t, DenseSet&lt; uint32&#95;t &gt; &gt; &amp;OldToNewContextIds)</>}>
Propagates all duplicated context ids across the graph. <a href="#ae14599e9efb3555b1fdcae80df618d5c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#ad73d64678c87dadc606598bbd5fa3a5b">removeEdgeFromGraph</a> (ContextEdge &#42;Edge, EdgeIter &#42;EI=nullptr, bool CalleeIter=true)</>}>
Helper to remove edge from graph, updating edge iterator if it is provided (in which case CalleeIter indicates which edge list is being iterated). <a href="#ad73d64678c87dadc606598bbd5fa3a5b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="bool"
  name={<><a href="#a6555dee9d1c5f9159b12aedacb3ca033">sameCallee</a> (CallTy Call1, CallTy Call2)</>}>
Returns true if both call instructions have the same callee. <a href="#a6555dee9d1c5f9159b12aedacb3ca033">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a75a2f26d9acccb65a6de28e6085f6389">updateAllocationCall</a> (CallInfo &amp;Call, AllocationType AllocType)</>}>
Update the allocation call to record type of allocated memory. <a href="#a75a2f26d9acccb65a6de28e6085f6389">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="void"
  name={<><a href="#a30785569ce64e11d87b7e2133275e4b8">updateCall</a> (CallInfo &amp;CallerCall, FuncInfo CalleeFunc)</>}>
Update non-allocation call to invoke (possibly cloned) function CalleeFunc. <a href="#a30785569ce64e11d87b7e2133275e4b8">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; FuncTy &#42;, std::vector&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &gt; &gt;</>}
  name={<><a href="#a19492f5e9a4b13d1b78b56c75b1f58a8">FuncToCallsWithMetadata</a></>}>
Save lists of calls with MemProf metadata in each function, for faster iteration. <a href="#a19492f5e9a4b13d1b78b56c75b1f58a8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>std::map&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42;, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; &gt;</>}
  name={<><a href="#abf9d501260ea6a430e980b52e0c940f0">NodeToCallingFunc</a></>}>
Map from callsite node to the enclosing caller function. <a href="#abf9d501260ea6a430e980b52e0c940f0">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt;</>}
  name={<><a href="#a2f23511ae6bb5a1f9118a69bc251423d">AllocationCallToContextNodeMap</a></>}>
Maps to track the calls to their corresponding nodes in the graph. <a href="#a2f23511ae6bb5a1f9118a69bc251423d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint32&#95;t, <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> &gt;</>}
  name={<><a href="#a529c3fa1373c4ea7c038b9824a4a3652">ContextIdToAllocationType</a></>}>
Map from each context <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> to the <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> assigned to that context. <a href="#a529c3fa1373c4ea7c038b9824a4a3652">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint32&#95;t, std::vector&lt; <a href="/docs/api/structs/llvm/contexttotalsize">ContextTotalSize</a> &gt; &gt;</>}
  name={<><a href="#a424a2d841e289fc09e5418c0a2f5b1ff">ContextIdToContextSizeInfos</a></>}>
Map from each contextID to the profiled full contexts and their total sizes (there may be more than one due to context trimming), optionally populated when requested (via MemProfReportHintedSizes or MinClonedColdBytePercent). <a href="#a424a2d841e289fc09e5418c0a2f5b1ff">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type="unsigned int"
  name={<><a href="#a1f0b5f2fd1a54a09bb304edafca0d02c">LastContextId</a> = 0</>}>
Keeps track of the last unique context id assigned. <a href="#a1f0b5f2fd1a54a09bb304edafca0d02c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<>std::vector&lt; std::unique&#95;ptr&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &gt; &gt;</>}
  name={<><a href="#a534d96be94f956b05deab39082114c29">NodeOwner</a></>}>
Owner of all <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> unique&#95;ptrs. <a href="#a534d96be94f956b05deab39082114c29">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt;</>}
  name={<><a href="#abe820c56129b3e3cf5046aa3677f9125">NonAllocationCallToContextNodeMap</a></>}>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint64&#95;t, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt;</>}
  name={<><a href="#a7a1ac7395640b7c8d401d4571857a652">StackEntryIdToContextNodeMap</a></>}>
Identifies the context node created for a stack id when adding the MIB contexts to the graph. <a href="#a7a1ac7395640b7c8d401d4571857a652">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

CRTP base for graphs built from either IR or ThinLTO summary index.

The graph represents the call contexts in all memprof metadata on allocation calls, with nodes for the allocations themselves, as well as for the calls in each context. The graph is initially built from the allocation memprof metadata (or summary) MIBs. It is then updated to match calls with callsite metadata onto the nodes, updating it to reflect any inlining performed on those calls.

Each MIB (representing an allocation&#39;s call context with allocation behavior) is assigned a unique context id during the graph build. The edges and nodes in the graph are decorated with the context ids they carry. This is used to correctly update the graph when cloning is performed so that we can uniquify the context for a single (possibly cloned) allocation.

Definition at line 175 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.

<SectionDefinition>

## Private Member Typedefs

### EdgeIter {#ac533932253580a11deeb9414654910aa}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>using anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::EdgeIter =  typename std::vector&lt;std::shared&#95;ptr&lt;ContextEdge&gt;&gt;::iterator</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00524">524</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Friends

### DOTGraphTraits&lt; const CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt; {#acbfb3d954ea87d753abdcf53da9b2931}

<MemberDefinition
  prototype={<>friend struct <a href="/docs/api/structs/llvm/dotgraphtraits">DOTGraphTraits</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph">CallsiteContextGraph</a>&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00199">199</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### GraphTraits&lt; const CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt; {#a99a93c3c92863b0f779dc91de9c463dd}

<MemberDefinition
  prototype={<>friend struct <a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph">CallsiteContextGraph</a>&lt; DerivedCCG, FuncTy, CallTy &gt; &#42; &gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00199">199</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### operator&lt;&lt; {#a7e3629b9531f0e5bae3ecce592301d78}

<MemberDefinition
  prototype={<>friend <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph">CallsiteContextGraph</a> &amp; CCG</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00199">199</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### CallsiteContextGraph() {#a24a25f8f197ec2041fd2a9efcd4160b1}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::CallsiteContextGraph ()</>}
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00177">177</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### CallsiteContextGraph() {#abedaf92f4f8a7e776d7eaffc9128d5c0}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::CallsiteContextGraph (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph">CallsiteContextGraph</a> &amp;)</>}
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00178">178</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### CallsiteContextGraph() {#a936cde44d743c355f2492c732396dd80}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::CallsiteContextGraph (<a href="/docs/api/classes/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph">CallsiteContextGraph</a> &amp;&amp;)</>}
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00179">179</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### addStackNodesForMIB() {#a3c04d483e66e81efc4812a2d38b93a8d}

<MemberDefinition
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  prototype={<>void anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::addStackNodesForMIB (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; AllocNode, <a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; StackContext, <a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; CallsiteContext, <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> AllocType, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/contexttotalsize">ContextTotalSize</a> &gt; ContextSizeInfo)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l01224">1224</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### assignFunctions() {#af222e51d6efae0aeb9ea76cac1b46300}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="bool CallsiteContextGraph::assignFunctions ()">
Assign callsite clones to functions, cloning functions as needed to accommodate the combinations of their callsite clones reached by callers.

For regular LTO this clones functions and callsites in the IR, but for ThinLTO the cloning decisions are noted in the summaries and later applied in applyImport.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00193">193</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### dump() {#aa59e482dfde65bd15ecf6621e9ffaf48}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::dump () const">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00195">195</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### exportToDot() {#ae120eda05be009e7e1124ac882412cad}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::exportToDot (std::string Label) const">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00210">210</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getStackIdsWithContextNodes() {#afa50d8bf14e4945e56c0cd33548c25ff}

<MemberDefinition
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  prototype={<>std::vector&lt; uint64&#95;t &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getStackIdsWithContextNodes (<a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; CallsiteContext)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l01955">1955</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### identifyClones() {#a35fd3a36d7623912363f7bc2550aef0b}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::identifyClones ()">
Perform cloning on the graph necessary to uniquely identify the allocation behavior of an allocation based on its context.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00186">186</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### print() {#a9b182ff5e447c562a7d45505c4b5a63a}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::print (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS) const</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00196">196</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### printTotalSizes() {#aaa295e87dfe1eb5dff19dbbe08e8f464}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::printTotalSizes (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS) const</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00197">197</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### process() {#a4652a942c3bcd94d6540e3fb0238d356}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="bool CallsiteContextGraph::process ()">
Main entry point to perform analysis and transformations on graph.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00182">182</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### recursivelyRemoveNoneTypeCalleeEdges() {#ab7ab368586256d87584451074a8956f3}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::recursivelyRemoveNoneTypeCalleeEdges (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt; &amp; Visited)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00477">477</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### removeNoneTypeCalleeEdges() {#a5dde305bd14a5c36d35bd957840a1f95}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::removeNoneTypeCalleeEdges (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node)</>}>
Helpers to remove edges that have allocation type None (due to not carrying any context ids) after transformations.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00474">474</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### removeNoneTypeCallerEdges() {#a43cb53754d087a71a26425013204ade4}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::removeNoneTypeCallerEdges (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00475">475</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Functions

### addAllocNode() {#adf8f8ad14c08099e793ca64a0768c96a}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextNode &#42; CallsiteContextGraph::addAllocNode (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> Call, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; F)</>}
  labels = {["protected"]}>
Adds nodes for the given allocation and any stack ids on its memprof MIB metadata (or summary).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00489">489</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### addStackNodesForMIB() {#a3c04d483e66e81efc4812a2d38b93a8d}

<MemberDefinition
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  prototype={<>void anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::addStackNodesForMIB (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; AllocNode, <a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; StackContext, <a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; CallsiteContext, <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> AllocType, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/contexttotalsize">ContextTotalSize</a> &gt; ContextSizeInfo)</>}
  labels = {["protected"]}>
Adds nodes for the given MIB stack ids.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00493">493</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getStackIdsWithContextNodes() {#afa50d8bf14e4945e56c0cd33548c25ff}

<MemberDefinition
  template={<>template &lt;class NodeT, class IteratorT&gt;</>}
  prototype={<>std::vector&lt; uint64&#95;t &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getStackIdsWithContextNodes (<a href="/docs/api/classes/llvm/memprof/callstack">CallStack</a>&lt; NodeT, IteratorT &gt; &amp; CallsiteContext)</>}
  labels = {["protected"]}>
Get a list of nodes corresponding to the stack ids in the given callsite context.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00485">485</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### handleCallsitesWithMultipleTargets() {#a9f3bc3cacc5c440fc83d37726a3af8aa}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::handleCallsitesWithMultipleTargets ()"
  labels = {["protected"]}>
Update graph to conservatively handle any callsite stack nodes that target multiple different callee target functions.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00506">506</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### partitionCallsByCallee() {#aa262bc6616e27d0c699be16373b96b60}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>bool CallsiteContextGraph::partitionCallsByCallee (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &gt; AllCalls, std::vector&lt; std::pair&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt; &gt; &amp; NewCallToNode)</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00512">512</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### updateStackNodes() {#a6e0e5a23aea2cd0d2bc271342e6e5c34}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::updateStackNodes ()"
  labels = {["protected"]}>
Matches all callsite metadata (or summary) to the nodes created for allocation memprof MIB metadata, synthesizing new nodes to reflect any inlining performed on those callsite instructions.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00502">502</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### assignStackNodesPostOrder() {#a3cc1c4cac072b9ce1d6c79f67ef43e28}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::assignStackNodesPostOrder (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt; &amp; Visited, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint64&#95;t, std::vector&lt; CallContextInfo &gt; &gt; &amp; StackIdToMatchingCalls, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &gt; &amp; CallToMatchingCall)</>}>
Assigns the given <a href="/docs/api/classes/node">Node</a> to calls at or inlined into the location with the <a href="/docs/api/classes/node">Node</a>&#39;s stack id, after post order traversing and processing its caller nodes.

Uses the call information recorded in the given StackIdToMatchingCalls map, and creates new nodes for inlined sequences as needed. Called by updateStackNodes which sets up the given StackIdToMatchingCalls map.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00556">556</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### calleeMatchesFunc() {#a62201839051ee83b40ba20f56fa10ea9}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>bool anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::calleeMatchesFunc (CallTy Call, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; Func, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; CallerFunc, std::vector&lt; std::pair&lt; CallTy, FuncTy &#42; &gt; &gt; &amp; FoundCalleeChain)</>}
  labels = {["inline"]}>
Returns true if the given call targets the given function, or if we were able to identify the call chain through intermediate tail calls (in which case FoundCalleeChain will be populated).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00605">605</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### calleesMatch() {#a969677b7f4458b91551562a2753e92dc}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>bool CallsiteContextGraph::calleesMatch (CallTy Call, EdgeIter &amp; EI, <a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt; &amp; TailCallToContextNodeMap)</>}>
Returns true if the given call targets the callee of the given edge, or if we were able to identify the call chain through intermediate tail calls.

In the latter case new context nodes are added to the graph for the identified tail calls, and their synthesized nodes are added to TailCallToContextNodeMap. The EdgeIter is updated in the latter case for the updated edges and to prepare it for an increment in the caller.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00593">593</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### check() {#a8c30254400cf964764267b34458a24e2}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype="void CallsiteContextGraph::check () const">
Perform sanity checks on graph when requested.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00748">748</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### cloneFunctionForCallsite() {#ae77a8a5f4ff5dd895df0b2a2e5808a28}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>FuncInfo anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::cloneFunctionForCallsite (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/funcinfo">FuncInfo</a> &amp; Func, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; Call, std::map&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &gt; &amp; CallMap, std::vector&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &gt; &amp; CallsWithMetadataInFunc, unsigned CloneNo)</>}
  labels = {["inline"]}>
Clone the given function for the given callsite, recording mapping of all of the functions tracked calls to their new versions in the CallMap.

Assigns new clones to clone number CloneNo.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00649">649</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### computeAllocType() {#adc48b29f5e4ecf2536eab361040355af}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>uint8&#95;t CallsiteContextGraph::computeAllocType (<a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; ContextIds)</>}>
Computes the alloc type corresponding to the given context ids, by unioning their recorded alloc types.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00680">680</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### connectNewNode() {#a8adace7955ca256257de26a58df7f00c}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::connectNewNode (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; NewNode, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; OrigNode, bool TowardsCallee, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; RemainingContextIds)</>}>
Connect the NewNode to OrigNode&#39;s callees if TowardsCallee is true, else to its callers.

Also updates OrigNode&#39;s edges to remove any context ids moved to the newly created edge.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00575">575</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### createNewNode() {#a16b574cb6107f8227477a7a041263d8a}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>ContextNode &#42; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::createNewNode (bool IsAllocation, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; F=nullptr, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> C=<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a>())</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00664">664</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### duplicateContextIds() {#a4a2af362f4ae5b5d2852e63f52dbe2bd}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>DenseSet&lt; uint32&#95;t &gt; CallsiteContextGraph::duplicateContextIds (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; StackSequenceContextIds, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint32&#95;t, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &gt; &amp; OldToNewContextIds)</>}>
Duplicates the given set of context ids, updating the provided map from each original id with the newly generated context ids, and returning the new duplicated id set.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00564">564</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getAllocationCallType() {#a24622e13e7c21ec4f423f7bb03256499}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>AllocationType anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getAllocationCallType (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; Call) const</>}
  labels = {["inline"]}>
Get the <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> assigned to the given allocation instruction clone.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00636">636</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getCalleeFunc() {#a569d913cca671ac5b2e655aee53d4a41}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>const FuncTy &#42; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getCalleeFunc (CallTy Call)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00598">598</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getLabel() {#a3dd2335b3998bacdd9bc225312b4eb76}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>std::string anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getLabel (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> FuncTy &#42; Func, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> CallTy Call, unsigned CloneNo) const</>}
  labels = {["inline"]}>
Gets a label to use in the dot graph for the given call clone in the given function.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00658">658</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getLastStackId() {#ae424a749ecf27d9c15e69d6be3cb276f}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getLastStackId (CallTy Call)</>}
  labels = {["inline"]}>
Get the last stack id in the context for callsite.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00625">625</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getNodeForAlloc() {#a7ee77ad870abd263f7b58c02127374c0}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextNode &#42; CallsiteContextGraph::getNodeForAlloc (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; C)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00675">675</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getNodeForInst() {#aabee1b7480b1c587a1563385af84237d}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextNode &#42; CallsiteContextGraph::getNodeForInst (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; C)</>}>
Helpers to find the node corresponding to the given call or stackid.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00674">674</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getNodeForStackId() {#a04e61c75e7deb8f99dc08bec3a1db412}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextNode &#42; CallsiteContextGraph::getNodeForStackId (uint64&#95;t StackId)</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00676">676</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getStackId() {#a95c50766a3bdb199b6d4b99a3a5de523}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getStackId (uint64&#95;t IdOrIndex) const</>}
  labels = {["inline"]}>
Get the stack id corresponding to the given Id or Index (for IR this will return itself, for a summary index this will return the id recorded in the index for that stack id index value).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00582">582</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### getStackIdsWithContextNodesForCall() {#af278458be7bedb58014c6e1e491efcd6}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>std::vector&lt; uint64&#95;t &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::getStackIdsWithContextNodesForCall (CallTy Call)</>}
  labels = {["inline"]}>
Get a list of nodes corresponding to the stack ids in the given callsite&#39;s context.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00619">619</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### identifyClones() {#a49817ed3e2ef162d4f365cdaa5a43837}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::identifyClones (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; Node, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; &gt; &amp; Visited, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; AllocContextIds)</>}>
Recursively perform cloning on the graph for the given <a href="/docs/api/classes/node">Node</a> and its callers, in order to uniquely identify the allocation behavior of an allocation given its context.

The context ids of the allocation being processed are given in AllocContextIds.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00722">722</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### intersectAllocTypes() {#a2c2356b9ad9fdc8410a5fba26c47a0a3}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>uint8&#95;t CallsiteContextGraph::intersectAllocTypes (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; Node1Ids, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; Node2Ids)</>}>
Returns the allocation type of the intersection of the contexts of two nodes (based on their provided context id sets).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00690">690</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### intersectAllocTypesImpl() {#ae43ce096237287ba9a1d990fa5e34639}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>uint8&#95;t CallsiteContextGraph::intersectAllocTypesImpl (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; Node1Ids, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &amp; Node2Ids)</>}>
Returns the allocation type of the intersection of the contexts of two nodes (based on their provided context id sets), optimized for the case when Node1Ids is smaller than Node2Ids.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00685">685</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### moveCalleeEdgeToNewCaller() {#a0694d8f9165217e5ca8e3c4eddec5db3}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::moveCalleeEdgeToNewCaller (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::shared&#95;ptr&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> &gt; &amp; Edge, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; NewCaller)</>}>
Change the caller of the edge at the given callee edge iterator to be NewCaller, performing the necessary context id and allocation type updates.

This is similar to the above moveEdgeToExistingCalleeClone, but a simplified version of it as we always move the given edge and all of its context ids.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00715">715</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### moveEdgeToExistingCalleeClone() {#ad57247d61c2f6c1ae4f2db10d216cdf5}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::moveEdgeToExistingCalleeClone (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::shared&#95;ptr&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> &gt; &amp; Edge, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> &#42; NewCallee, bool NewClone=false, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; ContextIdsToMove=&#123;&#125;)</>}>
Change the callee of Edge to existing callee clone NewCallee, performing the necessary context id and allocation type updates.

If ContextIdsToMove is non-empty, only that subset of Edge&#39;s ids are moved to an edge to the new callee.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00705">705</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### moveEdgeToNewCalleeClone() {#ae34504725352592044ab30d9f4de5cf5}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextNode &#42; CallsiteContextGraph::moveEdgeToNewCalleeClone (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::shared&#95;ptr&lt; <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> &gt; &amp; Edge, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; ContextIdsToMove=&#123;&#125;)</>}>
Create a clone of Edge&#39;s callee and move Edge to that new callee node, performing the necessary context id and allocation type updates.

If ContextIdsToMove is non-empty, only that subset of Edge&#39;s ids are moved to an edge to the new callee.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00698">698</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### propagateDuplicateContextIds() {#ae14599e9efb3555b1fdcae80df618d5c}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::propagateDuplicateContextIds (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; uint32&#95;t, <a href="/docs/api/classes/llvm/denseset">DenseSet</a>&lt; uint32&#95;t &gt; &gt; &amp; OldToNewContextIds)</>}>
Propagates all duplicated context ids across the graph.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00569">569</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### removeEdgeFromGraph() {#ad73d64678c87dadc606598bbd5fa3a5b}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void CallsiteContextGraph::removeEdgeFromGraph (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> &#42; Edge, EdgeIter &#42; EI=nullptr, bool CalleeIter=<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</>}>
Helper to remove edge from graph, updating edge iterator if it is provided (in which case CalleeIter indicates which edge list is being iterated).

This will also perform the necessary clearing of the <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextedge">ContextEdge</a> members to enable later checking if the edge has been removed (since we may have other copies of the shared&#95;ptr in existence, and in fact rely on this to enable removal while iterating over a copy of a node&#39;s edge list).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00547">547</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### sameCallee() {#a6555dee9d1c5f9159b12aedacb3ca033}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>bool anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::sameCallee (CallTy Call1, CallTy Call2)</>}
  labels = {["inline"]}>
Returns true if both call instructions have the same callee.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00613">613</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### updateAllocationCall() {#a75a2f26d9acccb65a6de28e6085f6389}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::updateAllocationCall (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; Call, <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> AllocType)</>}
  labels = {["inline"]}>
Update the allocation call to record type of allocated memory.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00630">630</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### updateCall() {#a30785569ce64e11d87b7e2133275e4b8}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>void anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::updateCall (<a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/callinfo">CallInfo</a> &amp; CallerCall, <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/funcinfo">FuncInfo</a> CalleeFunc)</>}
  labels = {["inline"]}>
Update non-allocation call to invoke (possibly cloned) function CalleeFunc.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00642">642</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### FuncToCallsWithMetadata {#a19492f5e9a4b13d1b78b56c75b1f58a8}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>MapVector&lt;FuncTy &#42;, std::vector&lt;CallInfo&gt; &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::FuncToCallsWithMetadata</>}
  labels = {["protected"]}>
Save lists of calls with MemProf metadata in each function, for faster iteration.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00518">518</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### NodeToCallingFunc {#abf9d501260ea6a430e980b52e0c940f0}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>std::map&lt;const ContextNode &#42;, const FuncTy &#42;&gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::NodeToCallingFunc</>}
  labels = {["protected"]}>
Map from callsite node to the enclosing caller function.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00521">521</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AllocationCallToContextNodeMap {#a2f23511ae6bb5a1f9118a69bc251423d}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>MapVector&lt;CallInfo, ContextNode &#42;&gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::AllocationCallToContextNodeMap</>}>
Maps to track the calls to their corresponding nodes in the graph.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00741">741</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### ContextIdToAllocationType {#a529c3fa1373c4ea7c038b9824a4a3652}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>DenseMap&lt;uint32&#95;t, AllocationType&gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextIdToAllocationType</>}>
Map from each context <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> to the <a href="/docs/api/namespaces/llvm/#a230980cf62b697d22ffdda32f6118e27">AllocationType</a> assigned to that context.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00726">726</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### ContextIdToContextSizeInfos {#a424a2d841e289fc09e5418c0a2f5b1ff}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>DenseMap&lt;uint32&#95;t, std::vector&lt;ContextTotalSize&gt; &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::ContextIdToContextSizeInfos</>}>
Map from each contextID to the profiled full contexts and their total sizes (there may be more than one due to context trimming), optionally populated when requested (via MemProfReportHintedSizes or MinClonedColdBytePercent).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00732">732</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### LastContextId {#a1f0b5f2fd1a54a09bb304edafca0d02c}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>unsigned int anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::LastContextId = 0</>}>
Keeps track of the last unique context id assigned.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00751">751</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### NodeOwner {#a534d96be94f956b05deab39082114c29}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>std::vector&lt;std::unique&#95;ptr&lt;ContextNode&gt; &gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::NodeOwner</>}>
Owner of all <a href="/docs/api/structs/anonymous-namespace-memprofcontextdisambiguation-cpp-/callsitecontextgraph/contextnode">ContextNode</a> unique&#95;ptrs.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00745">745</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### NonAllocationCallToContextNodeMap {#abe820c56129b3e3cf5046aa3677f9125}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>MapVector&lt;CallInfo, ContextNode &#42;&gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::NonAllocationCallToContextNodeMap</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00742">742</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

### StackEntryIdToContextNodeMap {#a7a1ac7395640b7c8d401d4571857a652}

<MemberDefinition
  template={<>template &lt;typename DerivedCCG, typename FuncTy, typename CallTy&gt;</>}
  prototype={<>DenseMap&lt;uint64&#95;t, ContextNode &#42;&gt; anonymous&#95;namespace&#123;MemProfContextDisambiguation.cpp&#125;::CallsiteContextGraph&lt; DerivedCCG, FuncTy, CallTy &gt;::StackEntryIdToContextNodeMap</>}>
Identifies the context node created for a stack id when adding the MIB contexts to the graph.

This is used to locate the context nodes when trying to assign the corresponding callsites with those stack ids to these nodes.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp/#l00738">738</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/ipo/memprofcontextdisambiguation-cpp">MemProfContextDisambiguation.cpp</a></li>
</ul>

</DoxygenPage>
