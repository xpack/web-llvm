---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/balancedpartitioning
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `BalancedPartitioning` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class llvm::BalancedPartitioning</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Support/BalancedPartitioning.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h"
  isLocal="true" />
</IncludesList>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a87aa436baf733e7a0624b54d8e7cdded">FunctionNodeRange</a> = <a href="/docs/api/classes/llvm/iterator-range">iterator&#95;range</a>&lt; std::vector&lt; <a href="/docs/api/classes/llvm/bpfunctionnode">BPFunctionNode</a> &gt;::iterator &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  type="using"
  name={<><a href="#af9d508a5461701463a77e7ce2313708a">SignaturesT</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; UtilitySignature, 4 &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="#ac6a935fd76f6365678890bdc8ddd40d9">BalancedPartitioningTest&#95;MoveGain&#95;Test</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ae696c5201cce93195993231c207665e2">BalancedPartitioning</a> (const BalancedPartitioningConfig &amp;Config)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a279d13f4cbd5c771960ef6aadd6b4cda">run</a> (std::vector&lt; BPFunctionNode &gt; &amp;Nodes) const</>}>
Run recursive graph partitioning that optimizes a given objective. <a href="#a279d13f4cbd5c771960ef6aadd6b4cda">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a7fd9f511d48e4a4b5e6a80d1a7e56b1e">bisect</a> (const FunctionNodeRange Nodes, unsigned RecDepth, unsigned RootBucket, unsigned Offset, std::optional&lt; BPThreadPool &gt; &amp;TP) const</>}>
Run a recursive bisection of a given list of FunctionNodes. <a href="#a7fd9f511d48e4a4b5e6a80d1a7e56b1e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="float"
  name={<><a href="#a60956068f1ad101aad2b00653471eb13">log2Cached</a> (unsigned i) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="float"
  name={<><a href="#a57b12eace88b5740631cec25e75e3429">logCost</a> (unsigned X, unsigned Y) const</>}>
The cost of the uniform log-gap cost, assuming a utility node has <code>X</code> FunctionNodes in the left bucket and <code>Y</code> FunctionNodes in the right one. <a href="#a57b12eace88b5740631cec25e75e3429">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a05415d0f2b45e5ce7a63eba9f9faca10">moveFunctionNode</a> (BPFunctionNode &amp;N, unsigned LeftBucket, unsigned RightBucket, SignaturesT &amp;Signatures, std::mt19937 &amp;RNG) const</>}>
Try to move <code>N</code> from one bucket to another. <a href="#a05415d0f2b45e5ce7a63eba9f9faca10">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a04b0611cb9de840153820a97de472f37">runIteration</a> (const FunctionNodeRange Nodes, unsigned LeftBucket, unsigned RightBucket, SignaturesT &amp;Signatures, std::mt19937 &amp;RNG) const</>}>
Run a bisection iteration to improve the optimization goal. <a href="#a04b0611cb9de840153820a97de472f37">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#afa3cb0f8ea12af62256544c89df0a712">runIterations</a> (const FunctionNodeRange Nodes, unsigned LeftBucket, unsigned RightBucket, std::mt19937 &amp;RNG) const</>}>
Run bisection iterations. <a href="#afa3cb0f8ea12af62256544c89df0a712">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a24285085fa8055cca8f921a371cfd84c">split</a> (const FunctionNodeRange Nodes, unsigned StartBucket) const</>}>
Split all the FunctionNodes into 2 buckets, StartBucket and StartBucket + 1 The method is used for an initial assignment before a bisection step. <a href="#a24285085fa8055cca8f921a371cfd84c">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/balancedpartitioningconfig">BalancedPartitioningConfig</a> &amp;</>}
  name={<><a href="#af9d9d9a4b59dbd54e5b5967e4b489057">Config</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="float"
  name={<><a href="#a24f4d3e499978bcdfa784f2453cd7f79">Log2Cache</a></>}>
</MembersIndexItem>

</MembersIndex>

## Protected Static Functions Index

<MembersIndex>

<MembersIndexItem
  type="float"
  name={<><a href="#a238d245e46593cc4a4f912a2bc53984f">moveGain</a> (const BPFunctionNode &amp;N, bool FromLeftToRight, const SignaturesT &amp;Signatures)</>}>
Compute the move gain for uniform log-gap cost. <a href="#a238d245e46593cc4a4f912a2bc53984f">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Static Attributes Index

<MembersIndex>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a44d10fda47fb6f7b1d9f38472ab41b6a">LOG&#95;CACHE&#95;SIZE</a> = 16384</>}>
Precomputed values of log2(x). Table size is small enough to fit in cache. <a href="#a44d10fda47fb6f7b1d9f38472ab41b6a">More...</a>
</MembersIndexItem>

</MembersIndex>


Definition at line 100 of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.

<SectionDefinition>

## Private Member Typedefs

### FunctionNodeRange {#a87aa436baf733e7a0624b54d8e7cdded}

<MemberDefinition
  prototype={<>using llvm::BalancedPartitioning::FunctionNodeRange = 
      iterator&#95;range&lt;std::vector&lt;BPFunctionNode&gt;::iterator&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00110">110</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### SignaturesT {#af9d508a5461701463a77e7ce2313708a}

<MemberDefinition
  prototype={<>using llvm::BalancedPartitioning::SignaturesT =  SmallVector&lt;UtilitySignature, 4&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00109">109</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Friends

### BalancedPartitioningTest&#95;MoveGain&#95;Test {#ac6a935fd76f6365678890bdc8ddd40d9}

<MemberDefinition
  prototype={<>friend class BalancedPartitioningTest&#95;MoveGain&#95;Test</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00197">197</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### BalancedPartitioning() {#ae696c5201cce93195993231c207665e2}

<MemberDefinition
  prototype={<>BalancedPartitioning::BalancedPartitioning (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/balancedpartitioningconfig">BalancedPartitioningConfig</a> &amp; Config)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00102">102</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00070">70</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#a279d13f4cbd5c771960ef6aadd6b4cda}

<MemberDefinition
  prototype={<>void BalancedPartitioning::run (std::vector&lt; <a href="/docs/api/classes/llvm/bpfunctionnode">BPFunctionNode</a> &gt; &amp; Nodes) const</>}>
Run recursive graph partitioning that optimizes a given objective.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00105">105</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00079">79</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### bisect() {#a7fd9f511d48e4a4b5e6a80d1a7e56b1e}

<MemberDefinition
  prototype={<>void BalancedPartitioning::bisect (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/iterator-range">FunctionNodeRange</a> Nodes, unsigned RecDepth, unsigned RootBucket, unsigned Offset, std::optional&lt; BPThreadPool &gt; &amp; TP) const</>}>
Run a recursive bisection of a given list of FunctionNodes.

<ParametersList title="Parameters">
<ParametersListItem name="RecDepth">the current depth of recursion</ParametersListItem>
<ParametersListItem name="RootBucket">the initial bucket of the dataVertices</ParametersListItem>
<ParametersListItem name="Offset">the assigned buckets are the range &#91;Offset, Offset + Nodes.size()&#93;</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00140">140</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00113">113</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### log2Cached() {#a60956068f1ad101aad2b00653471eb13}

<MemberDefinition
  prototype="float BalancedPartitioning::log2Cached (unsigned i) const">

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00168">168</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00332">332</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### logCost() {#a57b12eace88b5740631cec25e75e3429}

<MemberDefinition
  prototype="float BalancedPartitioning::logCost (unsigned X, unsigned Y) const">
The cost of the uniform log-gap cost, assuming a utility node has <code>X</code> FunctionNodes in the left bucket and <code>Y</code> FunctionNodes in the right one.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00166">166</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00328">328</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### moveFunctionNode() {#a05415d0f2b45e5ce7a63eba9f9faca10}

<MemberDefinition
  prototype={<>bool BalancedPartitioning::moveFunctionNode (<a href="/docs/api/classes/llvm/bpfunctionnode">BPFunctionNode</a> &amp; N, unsigned LeftBucket, unsigned RightBucket, <a href="/docs/api/classes/llvm/smallvector">SignaturesT</a> &amp; Signatures, std::mt19937 &amp; RNG) const</>}>
Try to move <code>N</code> from one bucket to another.

<SectionUser title="Returns">
true iff <code>N</code> is moved
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00156">156</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00270">270</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### runIteration() {#a04b0611cb9de840153820a97de472f37}

<MemberDefinition
  prototype={<>unsigned BalancedPartitioning::runIteration (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/iterator-range">FunctionNodeRange</a> Nodes, unsigned LeftBucket, unsigned RightBucket, <a href="/docs/api/classes/llvm/smallvector">SignaturesT</a> &amp; Signatures, std::mt19937 &amp; RNG) const</>}>
Run a bisection iteration to improve the optimization goal.

<SectionUser title="Returns">
the total number of moved FunctionNodes
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00150">150</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00210">210</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### runIterations() {#afa3cb0f8ea12af62256544c89df0a712}

<MemberDefinition
  prototype={<>void BalancedPartitioning::runIterations (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/iterator-range">FunctionNodeRange</a> Nodes, unsigned LeftBucket, unsigned RightBucket, std::mt19937 &amp; RNG) const</>}>
Run bisection iterations.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00145">145</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00167">167</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### split() {#a24285085fa8055cca8f921a371cfd84c}

<MemberDefinition
  prototype={<>void BalancedPartitioning::split (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/iterator-range">FunctionNodeRange</a> Nodes, unsigned StartBucket) const</>}>
Split all the FunctionNodes into 2 buckets, StartBucket and StartBucket + 1 The method is used for an initial assignment before a bisection step.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00162">162</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00303">303</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Config {#af9d9d9a4b59dbd54e5b5967e4b489057}

<MemberDefinition
  prototype={<>const BalancedPartitioningConfig&amp; llvm::BalancedPartitioning::Config</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00170">170</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### Log2Cache {#a24f4d3e499978bcdfa784f2453cd7f79}

<MemberDefinition
  prototype={<>float llvm::BalancedPartitioning::Log2Cache&#91;LOG&#95;CACHE&#95;SIZE&#93;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00174">174</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Static Functions

### moveGain() {#a238d245e46593cc4a4f912a2bc53984f}

<MemberDefinition
  prototype={<>float BalancedPartitioning::moveGain (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/bpfunctionnode">BPFunctionNode</a> &amp; N, bool FromLeftToRight, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallvector">SignaturesT</a> &amp; Signatures)</>}
  labels = {["protected", "static"]}>
Compute the move gain for uniform log-gap cost.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00195">195</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00318">318</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Static Attributes

### LOG&#95;CACHE&#95;SIZE {#a44d10fda47fb6f7b1d9f38472ab41b6a}

<MemberDefinition
  prototype={<>unsigned llvm::BalancedPartitioning::LOG&#95;CACHE&#95;SIZE = 16384</>}
  labels = {["constexpr", "static"]}>
Precomputed values of log2(x). Table size is small enough to fit in cache.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00173">173</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a></li>
<li><a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a></li>
</ul>

</DoxygenPage>
