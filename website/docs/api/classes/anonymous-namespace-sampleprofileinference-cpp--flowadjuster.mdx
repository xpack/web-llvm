---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-sampleprofileinference-cpp-/flowadjuster
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `FlowAdjuster` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

A post-processing adjustment of the control flow. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{SampleProfileInference.cpp}::FlowAdjuster</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ad04ad58c6ccb8efe2be143e1bf61dd3c">FlowAdjuster</a> (const ProfiParams &amp;Params, FlowFunction &amp;Func)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#aea8a2f7647fe57cd4d7e265585c4806e">run</a> ()</>}>
Apply the post-processing. <a href="#aea8a2f7647fe57cd4d7e265585c4806e">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6af7f9d8e6d4993f551e48c19f1a9955">canRebalanceAtRoot</a> (const FlowBlock &#42;SrcBlock)</>}>
Verify if rebalancing rooted at a given block is possible. <a href="#a6af7f9d8e6d4993f551e48c19f1a9955">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a60be1e5c861157c00eea96d24dce9057">canRebalanceSubgraph</a> (const FlowBlock &#42;SrcBlock, const std::vector&lt; FlowBlock &#42; &gt; &amp;KnownDstBlocks, const std::vector&lt; FlowBlock &#42; &gt; &amp;UnknownBlocks, FlowBlock &#42;&amp;DstBlock)</>}>
Verify if rebalancing of the subgraph is feasible. <a href="#a60be1e5c861157c00eea96d24dce9057">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a09efba6c4c63a662771f8e8793c8fbb0">findReachable</a> (uint64&#95;t Src, BitVector &amp;Visited)</>}>
Run BFS from a given block along the jumps with a positive flow and mark all reachable blocks. <a href="#a09efba6c4c63a662771f8e8793c8fbb0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; <a href="/docs/api/structs/llvm/flowjump">FlowJump</a> &#42; &gt;</>}
  name={<><a href="#a7821f8a10d57bc91cb1958d1b48cbcdb">findShortestPath</a> (uint64&#95;t BlockIdx)</>}>
Find the shortest path from the entry block to an exit block passing through a given block. <a href="#a7821f8a10d57bc91cb1958d1b48cbcdb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; <a href="/docs/api/structs/llvm/flowjump">FlowJump</a> &#42; &gt;</>}
  name={<><a href="#a9dfd969153f2665c12707fd5f3a2e335">findShortestPath</a> (uint64&#95;t Source, uint64&#95;t Target)</>}>
Apply the Dijkstra algorithm to find the shortest path from a given Source to a given <a href="/docs/api/classes/llvm/target">Target</a> block. <a href="#a9dfd969153f2665c12707fd5f3a2e335">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a257b63aad7f99156ddcb630dbd834594">findUnknownSubgraph</a> (const FlowBlock &#42;SrcBlock, std::vector&lt; FlowBlock &#42; &gt; &amp;KnownDstBlocks, std::vector&lt; FlowBlock &#42; &gt; &amp;UnknownBlocks)</>}>
Find an unknown subgraph starting at block SrcBlock. <a href="#a257b63aad7f99156ddcb630dbd834594">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a79cceb462357992730ee0a0bc717ccc0">ignoreJump</a> (const FlowBlock &#42;SrcBlock, const FlowBlock &#42;DstBlock, const FlowJump &#42;Jump)</>}>
Decide whether the Jump is ignored while processing an unknown subgraphs rooted at basic block SrcBlock with the destination block, DstBlock. <a href="#a79cceb462357992730ee0a0bc717ccc0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#af1379218f994037ee122b59e8c0b76ae">isAcyclicSubgraph</a> (const FlowBlock &#42;SrcBlock, const FlowBlock &#42;DstBlock, std::vector&lt; FlowBlock &#42; &gt; &amp;UnknownBlocks)</>}>
Verify if the given unknown subgraph is acyclic, and if yes, reorder UnknownBlocks in the topological order (so that all jumps are &quot;forward&quot;). <a href="#af1379218f994037ee122b59e8c0b76ae">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a8a5a87760e40c8c87b1f6885778e9dd8">joinIsolatedComponents</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>int64&#95;t</>}
  name={<><a href="#a046c87b91022769fa8fd1256e4062b21">jumpDistance</a> (FlowJump &#42;Jump) const</>}>
A distance of a path for a given jump. <a href="#a046c87b91022769fa8fd1256e4062b21">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a6b67a09bd75d5f077dc2b100f17d7c41">NumBlocks</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a484db023b05eaee3c86ea96ce0bbfb87">rebalanceBlock</a> (const FlowBlock &#42;SrcBlock, const FlowBlock &#42;DstBlock, const FlowBlock &#42;Block, uint64&#95;t BlockFlow)</>}>
Redistribute flow for a block in a subgraph rooted at SrcBlock, and ending at DstBlock. <a href="#a484db023b05eaee3c86ea96ce0bbfb87">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a333769a6f8a70e4369c7178a6e45efe1">rebalanceUnknownSubgraph</a> (const FlowBlock &#42;SrcBlock, const FlowBlock &#42;DstBlock, const std::vector&lt; FlowBlock &#42; &gt; &amp;UnknownBlocks)</>}>
Rebalance a given subgraph rooted at SrcBlock, ending at DstBlock and having UnknownBlocks intermediate blocks. <a href="#a333769a6f8a70e4369c7178a6e45efe1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a35c34d6fe6945150c4d7d0fdb1a4f39d">rebalanceUnknownSubgraphs</a> ()</>}>
Rebalance unknown subgraphs so that the flow is split evenly across the outgoing branches of every block of the subgraph. <a href="#a35c34d6fe6945150c4d7d0fdb1a4f39d">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/flowfunction">FlowFunction</a> &amp;</>}
  name={<><a href="#a9f6823cb871f4430b22fcdcd52aeda47">Func</a></>}>
The function. <a href="#a9f6823cb871f4430b22fcdcd52aeda47">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/profiparams">ProfiParams</a> &amp;</>}
  name={<><a href="#a0d39f91cdd1d976a4b5843b5aa3caae4">Params</a></>}>
Params for flow computation. <a href="#a0d39f91cdd1d976a4b5843b5aa3caae4">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Static Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#ad4485f64d2aae44204ed36457eec0a10">AnyExitBlock</a> = uint64&#95;t(-1)</>}>
A constant indicating an arbitrary exit block of a function. <a href="#ad4485f64d2aae44204ed36457eec0a10">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#ad0f5da7fc22ec9e9a2801b3de37bc9bd">MinBaseDistance</a> = 10000</>}>
Minimum BaseDistance for the jump distance values in island joining. <a href="#ad0f5da7fc22ec9e9a2801b3de37bc9bd">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A post-processing adjustment of the control flow.

It applies two steps by rerouting some flow and making it more realistic:


<ul>
<li>First, it removes all isolated components (&quot;islands&quot;) with a positive flow that are unreachable from the entry block. For every such component, we find the shortest from the entry to an exit passing through the component, and increase the flow by one unit along the path.</li>
<li>Second, it identifies all &quot;unknown subgraphs&quot; consisting of basic blocks with no sampled counts. Then it rebalnces the flow that goes through such a subgraph so that each branch is taken with probability 50%. An unknown subgraph is such that for every two nodes u and v:
<ul>
<li>u dominates v and u is not unknown;</li>
<li>v post-dominates u; and</li>
<li>all inner-nodes of all (u,v)-paths are unknown.</li>
</ul></li>
</ul>

Definition at line 600 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.

<SectionDefinition>

## Public Constructors

### FlowAdjuster() {#ad04ad58c6ccb8efe2be143e1bf61dd3c}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::FlowAdjuster (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/profiparams">ProfiParams</a> &amp; Params, <a href="/docs/api/structs/llvm/flowfunction">FlowFunction</a> &amp; Func)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00602">602</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### run() {#aea8a2f7647fe57cd4d7e265585c4806e}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::run ()</>}
  labels = {["inline"]}>
Apply the post-processing.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00606">606</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### canRebalanceAtRoot() {#a6af7f9d8e6d4993f551e48c19f1a9955}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::canRebalanceAtRoot (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock)</>}
  labels = {["inline"]}>
Verify if rebalancing rooted at a given block is possible.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00801">801</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### canRebalanceSubgraph() {#a60be1e5c861157c00eea96d24dce9057}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::canRebalanceSubgraph (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; KnownDstBlocks, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; UnknownBlocks, <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42;&amp; DstBlock)</>}
  labels = {["inline"]}>
Verify if rebalancing of the subgraph is feasible.

If the checks are successful, set the unique destination block, DstBlock (can be null).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00860">860</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### findReachable() {#a09efba6c4c63a662771f8e8793c8fbb0}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::findReachable (uint64&#95;t Src, <a href="/docs/api/classes/llvm/bitvector">BitVector</a> &amp; Visited)</>}
  labels = {["inline"]}>
Run BFS from a given block along the jumps with a positive flow and mark all reachable blocks.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00646">646</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### findShortestPath() {#a7821f8a10d57bc91cb1958d1b48cbcdb}

<MemberDefinition
  prototype={<>std::vector&lt; FlowJump &#42; &gt; anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::findShortestPath (uint64&#95;t BlockIdx)</>}
  labels = {["inline"]}>
Find the shortest path from the entry block to an exit block passing through a given block.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00667">667</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### findShortestPath() {#a9dfd969153f2665c12707fd5f3a2e335}

<MemberDefinition
  prototype={<>std::vector&lt; FlowJump &#42; &gt; anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::findShortestPath (uint64&#95;t Source, uint64&#95;t Target)</>}
  labels = {["inline"]}>
Apply the Dijkstra algorithm to find the shortest path from a given Source to a given <a href="/docs/api/classes/llvm/target">Target</a> block.

If <a href="/docs/api/classes/llvm/target">Target</a> == -1, then the path ends at an exit block.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00683">683</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### findUnknownSubgraph() {#a257b63aad7f99156ddcb630dbd834594}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::findUnknownSubgraph (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; KnownDstBlocks, std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; UnknownBlocks)</>}
  labels = {["inline"]}>
Find an unknown subgraph starting at block SrcBlock.

The method sets identified destinations, KnownDstBlocks, and intermediate UnknownBlocks.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00823">823</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### ignoreJump() {#a79cceb462357992730ee0a0bc717ccc0}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::ignoreJump (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; DstBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowjump">FlowJump</a> &#42; Jump)</>}
  labels = {["inline"]}>
Decide whether the Jump is ignored while processing an unknown subgraphs rooted at basic block SrcBlock with the destination block, DstBlock.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00897">897</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### isAcyclicSubgraph() {#af1379218f994037ee122b59e8c0b76ae}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::isAcyclicSubgraph (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; DstBlock, std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; UnknownBlocks)</>}
  labels = {["inline"]}>
Verify if the given unknown subgraph is acyclic, and if yes, reorder UnknownBlocks in the topological order (so that all jumps are &quot;forward&quot;).

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00923">923</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### joinIsolatedComponents() {#a8a5a87760e40c8c87b1f6885778e9dd8}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::joinIsolatedComponents ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00619">619</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### jumpDistance() {#a046c87b91022769fa8fd1256e4062b21}

<MemberDefinition
  prototype={<>int64&#95;t anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::jumpDistance (<a href="/docs/api/structs/llvm/flowjump">FlowJump</a> &#42; Jump) const</>}
  labels = {["inline"]}>
A distance of a path for a given jump.

In order to incite the path to use blocks/jumps with large positive flow, and avoid changing branch probability of outgoing edges drastically, set the jump distance so as:
<ul>
<li>to minimize the number of unlikely jumps used and subject to that,</li>
<li>to minimize the number of Flow == 0 jumps used and subject to that,</li>
<li>minimizes total multiplicative Flow increase for the remaining edges. To capture this objective with integer distances, we round off fractional parts to a multiple of 1 / BaseDistance.</li>
</ul>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00753">753</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### NumBlocks() {#a6b67a09bd75d5f077dc2b100f17d7c41}

<MemberDefinition
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::NumBlocks () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00765">765</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### rebalanceBlock() {#a484db023b05eaee3c86ea96ce0bbfb87}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::rebalanceBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; DstBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; Block, uint64&#95;t BlockFlow)</>}
  labels = {["inline"]}>
Redistribute flow for a block in a subgraph rooted at SrcBlock, and ending at DstBlock.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l01008">1008</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### rebalanceUnknownSubgraph() {#a333769a6f8a70e4369c7178a6e45efe1}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::rebalanceUnknownSubgraph (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; SrcBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; DstBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/structs/llvm/flowblock">FlowBlock</a> &#42; &gt; &amp; UnknownBlocks)</>}
  labels = {["inline"]}>
Rebalance a given subgraph rooted at SrcBlock, ending at DstBlock and having UnknownBlocks intermediate blocks.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00978">978</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### rebalanceUnknownSubgraphs() {#a35c34d6fe6945150c4d7d0fdb1a4f39d}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::rebalanceUnknownSubgraphs ()</>}
  labels = {["inline"]}>
Rebalance unknown subgraphs so that the flow is split evenly across the outgoing branches of every block of the subgraph.

The method iterates over blocks with known weight and identifies unknown subgraphs rooted at the blocks. Then it verifies if flow rebalancing is feasible and applies it.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l00771">771</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Func {#a9f6823cb871f4430b22fcdcd52aeda47}

<MemberDefinition
  prototype={<>FlowFunction&amp; anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::Func</>}>
The function.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l01043">1043</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### Params {#a0d39f91cdd1d976a4b5843b5aa3caae4}

<MemberDefinition
  prototype={<>const ProfiParams&amp; anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::Params</>}>
Params for flow computation.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l01041">1041</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Static Attributes

### AnyExitBlock {#ad4485f64d2aae44204ed36457eec0a10}

<MemberDefinition
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::AnyExitBlock = uint64&#95;t(-1)</>}
  labels = {["constexpr", "static"]}>
A constant indicating an arbitrary exit block of a function.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l01036">1036</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

### MinBaseDistance {#ad0f5da7fc22ec9e9a2801b3de37bc9bd}

<MemberDefinition
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;SampleProfileInference.cpp&#125;::FlowAdjuster::MinBaseDistance = 10000</>}
  labels = {["constexpr", "static"]}>
Minimum BaseDistance for the jump distance values in island joining.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp/#l01038">1038</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileinference-cpp">SampleProfileInference.cpp</a></li>
</ul>

</DoxygenPage>
