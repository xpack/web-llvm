---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/machinetracemetrics/ensemble
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `Ensemble` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

A trace ensemble is a collection of traces selected using the same strategy, for example &#39;minimum resource height&#39;. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::MachineTraceMetrics::Ensemble</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/MachineTraceMetrics.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h"
  isLocal="true" />
</IncludesList>

## Derived Classes

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinetracemetrics-cpp-/localensemble">LocalEnsemble</a></>}>
Pick only the current basic block for the trace and do not choose any predecessors/successors. <a href="/docs/api/classes/anonymous-namespace-machinetracemetrics-cpp-/localensemble/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinetracemetrics-cpp-/mininstrcountensemble">MinInstrCountEnsemble</a></>}>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="#a9a7aa541dbcfdac34b25b49217ec39d7">Trace</a></>}>
</MembersIndexItem>

</MembersIndex>

## Protected Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a94c7f4353dd7cd3169ab1f8309a6ebbc">Ensemble</a> (MachineTraceMetrics &#42;)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a375a21e590d51aec3ad8da2f2bbb895f">~Ensemble</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a3948a6d2974da9cf17fe8c6226f9b569">dump</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char &#42;</>}
  name={<><a href="#a89fcf2278835c9221e4586b7f9698fed">getName</a> () const =0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinetracemetrics/trace">Trace</a></>}
  name={<><a href="#ae48d29e7657ecdb05f44195870226d9a">getTrace</a> (const MachineBasicBlock &#42;MBB)</>}>
Get the trace that passes through MBB. <a href="#ae48d29e7657ecdb05f44195870226d9a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a063217bcbb8b81adfdc88feb1a52ddcb">invalidate</a> (const MachineBasicBlock &#42;MBB)</>}>
Invalidate traces through BadMBB. <a href="#a063217bcbb8b81adfdc88feb1a52ddcb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ac7672297acdaf5409f8e9c116fb4b207">print</a> (raw&#95;ostream &amp;) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3118fc82938c92f70453a0ccf9e7fc70">updateDepth</a> (TraceBlockInfo &amp;TBI, const MachineInstr &amp;, SparseSet&lt; LiveRegUnit &gt; &amp;RegUnits)</>}>
Updates the depth of an machine instruction, given RegUnits. <a href="#a3118fc82938c92f70453a0ccf9e7fc70">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a804ccee98d777a9a0e3b342bd850688d">updateDepth</a> (const MachineBasicBlock &#42;, const MachineInstr &amp;, SparseSet&lt; LiveRegUnit &gt; &amp;RegUnits)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7a38150d8200741f700cac286154bab3">updateDepths</a> (MachineBasicBlock::iterator Start, MachineBasicBlock::iterator End, SparseSet&lt; LiveRegUnit &gt; &amp;RegUnits)</>}>
Updates the depth of the instructions from Start to End. <a href="#a7a38150d8200741f700cac286154bab3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0a23768d13b961c25d4bb19c3f42824c">verify</a> () const</>}>
</MembersIndexItem>

</MembersIndex>

## Protected Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo">TraceBlockInfo</a> &#42;</>}
  name={<><a href="#a8653801cc578cc48ccbe3e63704b46c2">getDepthResources</a> (const MachineBasicBlock &#42;) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo">TraceBlockInfo</a> &#42;</>}
  name={<><a href="#a77eb2f55afeb56b75868b912d924418e">getHeightResources</a> (const MachineBasicBlock &#42;) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &#42;</>}
  name={<><a href="#a5046473e61a645cfdec00f76cfc3df7c">getLoopFor</a> (const MachineBasicBlock &#42;) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; unsigned &gt;</>}
  name={<><a href="#a8a2f482cc1f32a8cf3193f34f051064e">getProcResourceDepths</a> (unsigned MBBNum) const</>}>
Get an array of processor resource depths for MBB. <a href="#a8a2f482cc1f32a8cf3193f34f051064e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; unsigned &gt;</>}
  name={<><a href="#a0ec4ed0a00f77f3225c7e200021c2da2">getProcResourceHeights</a> (unsigned MBBNum) const</>}>
Get an array of processor resource heights for MBB. <a href="#a0ec4ed0a00f77f3225c7e200021c2da2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a16fd3ddeca4f89318c9d449e0d9b8335">pickTracePred</a> (const MachineBasicBlock &#42;)=0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#aa8b8b17f58253fbeda5d2daa13c916a4">pickTraceSucc</a> (const MachineBasicBlock &#42;)=0</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a3bcbe8947ce0b352e843e2f201fc3338">addLiveIns</a> (const MachineInstr &#42;DefMI, unsigned DefOp, ArrayRef&lt; const MachineBasicBlock &#42; &gt; Trace)</>}>
Assuming that the virtual register defined by DefMI:DefOp was used by Trace.back(), add it to the live-in lists of all the blocks in <a href="/docs/api/classes/llvm/machinetracemetrics/trace">Trace</a>. <a href="#a3bcbe8947ce0b352e843e2f201fc3338">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a40c03f81eaf866eeb818cbf2ddeb1ad5">computeCrossBlockCriticalPath</a> (const TraceBlockInfo &amp;)</>}>
The length of the critical path through a trace is the maximum of two path lengths: <a href="#a40c03f81eaf866eeb818cbf2ddeb1ad5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aa3998744046fbc495d9fc57d1e71ec82">computeDepthResources</a> (const MachineBasicBlock &#42;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9fe8df9259772d1b40b4be970772d1d2">computeHeightResources</a> (const MachineBasicBlock &#42;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a1bb52a15415430cd95c4da167a9d14b6">computeInstrDepths</a> (const MachineBasicBlock &#42;)</>}>
Compute instruction depths for all instructions above or in MBB in its trace. <a href="#a1bb52a15415430cd95c4da167a9d14b6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ad93e240b9069128294e6e38df21cf7d8">computeInstrHeights</a> (const MachineBasicBlock &#42;)</>}>
Compute instruction heights in the trace through MBB. <a href="#ad93e240b9069128294e6e38df21cf7d8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab075e868be7eb6b477441f21d34ea2b8">computeTrace</a> (const MachineBasicBlock &#42;)</>}>
Compute the trace through MBB. <a href="#ab075e868be7eb6b477441f21d34ea2b8">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinetracemetrics">MachineTraceMetrics</a> &amp;</>}
  name={<><a href="#aa60016dad618cf77f24d57fdd3e33112">MTM</a></>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo">TraceBlockInfo</a>, 4 &gt;</>}
  name={<><a href="#a3cd2bbd553ab66b2cab32b981cde5df7">BlockInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;, <a href="/docs/api/structs/llvm/machinetracemetrics/instrcycles">InstrCycles</a> &gt;</>}
  name={<><a href="#aa15ddfc64482e923393197cd39256676">Cycles</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; unsigned, 0 &gt;</>}
  name={<><a href="#a44e089a094ba750d7a5742532937ddb5">ProcResourceDepths</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; unsigned, 0 &gt;</>}
  name={<><a href="#ae8b2e10feb5d6a59d9d5e614861035b9">ProcResourceHeights</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A trace ensemble is a collection of traces selected using the same strategy, for example &#39;minimum resource height&#39;.

There is one trace for every block in the function.

Definition at line 339 of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.

<SectionDefinition>

## Friends

### Trace {#a9a7aa541dbcfdac34b25b49217ec39d7}

<MemberDefinition
  prototype={<>friend class <a href="/docs/api/classes/llvm/machinetracemetrics/trace">Trace</a></>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00340">340</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Constructors

### Ensemble() {#a94c7f4353dd7cd3169ab1f8309a6ebbc}

<MemberDefinition
  prototype={<>MachineTraceMetrics::Ensemble::Ensemble (<a href="/docs/api/classes/llvm/machinetracemetrics">MachineTraceMetrics</a> &#42; ct)</>}
  labels = {["explicit", "protected"]}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00359">359</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00170">170</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~Ensemble() {#a375a21e590d51aec3ad8da2f2bbb895f}

<MemberDefinition
  prototype="MachineTraceMetrics::Ensemble::~Ensemble ()"
  labels = {["virtual"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00370">370</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### dump() {#a3948a6d2974da9cf17fe8c6226f9b569}

<MemberDefinition
  prototype="void llvm::MachineTraceMetrics::Ensemble::dump () const"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00374">374</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### getName() {#a89fcf2278835c9221e4586b7f9698fed}

<MemberDefinition
  prototype={<>virtual const char &#42; llvm::MachineTraceMetrics::Ensemble::getName () const</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00372">372</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### getTrace() {#ae48d29e7657ecdb05f44195870226d9a}

<MemberDefinition
  prototype={<>MachineTraceMetrics::Trace MachineTraceMetrics::Ensemble::getTrace (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
Get the trace that passes through MBB.

The trace is computed on demand.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00380">380</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l01192">1192</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### invalidate() {#a063217bcbb8b81adfdc88feb1a52ddcb}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::invalidate (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
Invalidate traces through BadMBB.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00375">375</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00570">570</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### print() {#ac7672297acdaf5409f8e9c116fb4b207}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::print (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS) const</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00373">373</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l01321">1321</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### updateDepth() {#a3118fc82938c92f70453a0ccf9e7fc70}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::updateDepth (<a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo">TraceBlockInfo</a> &amp; TBI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; UseMI, <a href="/docs/api/classes/llvm/sparseset">SparseSet</a>&lt; <a href="/docs/api/structs/llvm/liveregunit">LiveRegUnit</a> &gt; &amp; RegUnits)</>}>
Updates the depth of an machine instruction, given RegUnits.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00383">383</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00823">823</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### updateDepth() {#a804ccee98d777a9a0e3b342bd850688d}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::updateDepth (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; UseMI, <a href="/docs/api/classes/llvm/sparseset">SparseSet</a>&lt; <a href="/docs/api/structs/llvm/liveregunit">LiveRegUnit</a> &gt; &amp; RegUnits)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00385">385</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00862">862</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### updateDepths() {#a7a38150d8200741f700cac286154bab3}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::updateDepths (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Start, <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> End, <a href="/docs/api/classes/llvm/sparseset">SparseSet</a>&lt; <a href="/docs/api/structs/llvm/liveregunit">LiveRegUnit</a> &gt; &amp; RegUnits)</>}>
Updates the depth of the instructions from Start to End.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00389">389</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00868">868</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### verify() {#a0a23768d13b961c25d4bb19c3f42824c}

<MemberDefinition
  prototype="void MachineTraceMetrics::Ensemble::verify () const">

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00376">376</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00633">633</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Functions

### getDepthResources() {#a8653801cc578cc48ccbe3e63704b46c2}

<MemberDefinition
  prototype={<>const MachineTraceMetrics::TraceBlockInfo &#42; MachineTraceMetrics::Ensemble::getDepthResources (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB) const</>}
  labels = {["protected"]}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00364">364</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00256">256</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### getHeightResources() {#a77eb2f55afeb56b75868b912d924418e}

<MemberDefinition
  prototype={<>const MachineTraceMetrics::TraceBlockInfo &#42; MachineTraceMetrics::Ensemble::getHeightResources (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB) const</>}
  labels = {["protected"]}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00365">365</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00265">265</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### getLoopFor() {#a5046473e61a645cfdec00f76cfc3df7c}

<MemberDefinition
  prototype={<>const MachineLoop &#42; MachineTraceMetrics::Ensemble::getLoopFor (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB) const</>}
  labels = {["protected"]}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00363">363</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00182">182</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### getProcResourceDepths() {#a8a2f482cc1f32a8cf3193f34f051064e}

<MemberDefinition
  prototype={<>ArrayRef&lt; unsigned &gt; MachineTraceMetrics::Ensemble::getProcResourceDepths (unsigned MBBNum) const</>}
  labels = {["protected"]}>
Get an array of processor resource depths for MBB.

Indexed by processor resource kind, this array contains the scaled processor resources consumed by all blocks preceding MBB in its trace. It does not include instructions in MBB.

Compare <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo/#a05783617bfead544a66a41fb304756f2">TraceBlockInfo::InstrDepth</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00366">366</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00278">278</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### getProcResourceHeights() {#a0ec4ed0a00f77f3225c7e200021c2da2}

<MemberDefinition
  prototype={<>ArrayRef&lt; unsigned &gt; MachineTraceMetrics::Ensemble::getProcResourceHeights (unsigned MBBNum) const</>}
  labels = {["protected"]}>
Get an array of processor resource heights for MBB.

Indexed by processor resource kind, this array contains the scaled processor resources consumed by this block and all blocks following it in its trace.

Compare <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo/#a2bee15b953c70ea17198d4d8b60aefed">TraceBlockInfo::InstrHeight</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00367">367</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00291">291</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### pickTracePred() {#a16fd3ddeca4f89318c9d449e0d9b8335}

<MemberDefinition
  prototype={<>virtual const MachineBasicBlock &#42; llvm::MachineTraceMetrics::Ensemble::pickTracePred (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;)</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00361">361</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### pickTraceSucc() {#aa8b8b17f58253fbeda5d2daa13c916a4}

<MemberDefinition
  prototype={<>virtual const MachineBasicBlock &#42; llvm::MachineTraceMetrics::Ensemble::pickTraceSucc (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;)</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00362">362</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### addLiveIns() {#a3bcbe8947ce0b352e843e2f201fc3338}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::addLiveIns (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42; DefMI, unsigned DefOp, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; Trace)</>}>
Assuming that the virtual register defined by DefMI:DefOp was used by Trace.back(), add it to the live-in lists of all the blocks in <a href="/docs/api/classes/llvm/machinetracemetrics/trace">Trace</a>.

Stop when reaching the block that contains DefMI.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00353">353</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l01016">1016</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeCrossBlockCriticalPath() {#a40c03f81eaf866eeb818cbf2ddeb1ad5}

<MemberDefinition
  prototype={<>unsigned MachineTraceMetrics::Ensemble::computeCrossBlockCriticalPath (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/machinetracemetrics/traceblockinfo">TraceBlockInfo</a> &amp; TBI)</>}>
The length of the critical path through a trace is the maximum of two path lengths:

<ul>
<li>The maximum height+depth over all instructions in the trace center block.</li>
<li>The longest cross-block dependency chain. For small blocks, it is possible that the critical path through the trace doesn&#39;t include any instructions in the block.</li>
</ul>


This function computes the second number from the live-in list of the center block.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00350">350</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00804">804</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeDepthResources() {#aa3998744046fbc495d9fc57d1e71ec82}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::computeDepthResources (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00348">348</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00189">189</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeHeightResources() {#a9fe8df9259772d1b40b4be970772d1d2}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::computeHeightResources (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00349">349</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00222">222</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeInstrDepths() {#a1bb52a15415430cd95c4da167a9d14b6}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::computeInstrDepths (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
Compute instruction depths for all instructions above or in MBB in its trace.

This assumes that the trace through MBB has already been computed.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00351">351</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00878">878</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeInstrHeights() {#ad93e240b9069128294e6e38df21cf7d8}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::computeInstrHeights (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
Compute instruction heights in the trace through MBB.

This updates MBB and the blocks below it in the trace. It is assumed that the trace has already been computed.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00352">352</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l01037">1037</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

### computeTrace() {#ab075e868be7eb6b477441f21d34ea2b8}

<MemberDefinition
  prototype={<>void MachineTraceMetrics::Ensemble::computeTrace (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB)</>}>
Compute the trace through MBB.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00347">347</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp/#l00525">525</a> of file <a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### MTM {#aa60016dad618cf77f24d57fdd3e33112}

<MemberDefinition
  prototype={<>MachineTraceMetrics&amp; llvm::MachineTraceMetrics::Ensemble::MTM</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00357">357</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### BlockInfo {#a3cd2bbd553ab66b2cab32b981cde5df7}

<MemberDefinition
  prototype={<>SmallVector&lt;TraceBlockInfo, 4&gt; llvm::MachineTraceMetrics::Ensemble::BlockInfo</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00342">342</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### Cycles {#aa15ddfc64482e923393197cd39256676}

<MemberDefinition
  prototype={<>DenseMap&lt;const MachineInstr&#42;, InstrCycles&gt; llvm::MachineTraceMetrics::Ensemble::Cycles</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00343">343</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### ProcResourceDepths {#a44e089a094ba750d7a5742532937ddb5}

<MemberDefinition
  prototype={<>SmallVector&lt;unsigned, 0&gt; llvm::MachineTraceMetrics::Ensemble::ProcResourceDepths</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00344">344</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

### ProcResourceHeights {#ae8b2e10feb5d6a59d9d5e614861035b9}

<MemberDefinition
  prototype={<>SmallVector&lt;unsigned, 0&gt; llvm::MachineTraceMetrics::Ensemble::ProcResourceHeights</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h/#l00345">345</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinetracemetrics-h">MachineTraceMetrics.h</a></li>
<li><a href="/docs/api/files/lib/lib/codegen/machinetracemetrics-cpp">MachineTraceMetrics.cpp</a></li>
</ul>

</DoxygenPage>
