---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/boupslp/shuffleinstructionbuilder
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `ShuffleInstructionBuilder` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Merges shuffle masks and emits final shuffle instruction, if required. <a href="#details">More...</a>

## Declaration

<CodeBlock>class BoUpSLP::ShuffleInstructionBuilder</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/baseshuffleanalysis">BaseShuffleAnalysis</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ab191e4dcc36fced04070c777d9787496">ShuffleInstructionBuilder</a> (Type &#42;ScalarTy, IRBuilderBase &amp;Builder, BoUpSLP &amp;R)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#aed02f405909dc40a81d537066ae87f4e">~ShuffleInstructionBuilder</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#ac9d11e9f66eb3617827801cb7f0f6619">add</a> (const TreeEntry &amp;E1, const TreeEntry &amp;E2, ArrayRef&lt; int &gt; Mask)</>}>
Adds 2 input vectors (in form of tree entries) and the mask for their shuffling. <a href="#ac9d11e9f66eb3617827801cb7f0f6619">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a42662469b6d20c41b3ed64e9f215b041">add</a> (const TreeEntry &amp;E1, ArrayRef&lt; int &gt; Mask)</>}>
Adds single input vector (in form of tree entry) and the mask for its shuffling. <a href="#a42662469b6d20c41b3ed64e9f215b041">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a71ce471fff7e2bde83cdbdeb6bd506d8">add</a> (Value &#42;V1, Value &#42;V2, ArrayRef&lt; int &gt; Mask)</>}>
Adds 2 input vectors and the mask for their shuffling. <a href="#a71ce471fff7e2bde83cdbdeb6bd506d8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a10d4c86d6600a1727f3d3bd9e8f39314">add</a> (Value &#42;V1, ArrayRef&lt; int &gt; Mask, bool=false)</>}>
Adds another one input vector and the mask for the shuffling. <a href="#a10d4c86d6600a1727f3d3bd9e8f39314">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a34c3ba98fb3849595c565342c8c3b78b">addOrdered</a> (Value &#42;V1, ArrayRef&lt; unsigned &gt; Order)</>}>
Adds another one input vector and the mask for the shuffling. <a href="#a34c3ba98fb3849595c565342c8c3b78b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#ad60d13f7863772bd84f52feda244e894">adjustExtracts</a> (const TreeEntry &#42;E, MutableArrayRef&lt; int &gt; Mask, ArrayRef&lt; std::optional&lt; TTI::ShuffleKind &gt; &gt; ShuffleKinds, unsigned NumParts, bool &amp;UseVecBaseAsInput)</>}>
Adjusts extractelements after reusing them. <a href="#ad60d13f7863772bd84f52feda244e894">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a9a4f4eb21e4820281bd94386fe524395">createFreeze</a> (Value &#42;V)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#adedeebdfb49d04e53d9c73abfa8a429f">finalize</a> (ArrayRef&lt; int &gt; ExtMask, ArrayRef&lt; std::pair&lt; const TreeEntry &#42;, unsigned &gt; &gt; SubVectors, ArrayRef&lt; int &gt; SubVectorsMask, unsigned VF=0, function&#95;ref&lt; void(Value &#42;&amp;, SmallVectorImpl&lt; int &gt; &amp;)&gt; Action=&#123;&#125;)</>}>
Finalize emission of the shuffles. <a href="#adedeebdfb49d04e53d9c73abfa8a429f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a5db3e3478b2d1b08f12c1960f1a92af1">gather</a> (ArrayRef&lt; Value &#42; &gt; VL, unsigned MaskVF=0, Value &#42;Root=nullptr)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt;</>}
  name={<><a href="#a4055f1bab55c76c243c3bf42c1a7e45a">needToDelay</a> (const TreeEntry &#42;E, ArrayRef&lt; SmallVector&lt; const TreeEntry &#42; &gt; &gt; Deps) const</>}>
Checks if the specified entry <code>E</code> needs to be delayed because of its dependency nodes. <a href="#a4055f1bab55c76c243c3bf42c1a7e45a">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a233dc20c2458649e53eb35ad1b51f11d">castToScalarTyElem</a> (Value &#42;V, std::optional&lt; bool &gt; IsSigned=std::nullopt)</>}>
Cast value <code>V</code> to the vector type with the same number of elements, but the base type <code>ScalarTy</code>. <a href="#a233dc20c2458649e53eb35ad1b51f11d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a905fbdd0d791cb14829c7abe26e5d5ea">createShuffle</a> (Value &#42;V1, Value &#42;V2, ArrayRef&lt; int &gt; Mask)</>}>
Smart shuffle instruction emission, walks through shuffles trees and tries to find the best matching vector for the actual shuffle instruction. <a href="#a905fbdd0d791cb14829c7abe26e5d5ea">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/irbuilderbase">IRBuilderBase</a> &amp;</>}
  name={<><a href="#a80c9422bf06b37c1231bae1a84dd8262">Builder</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; int &gt;</>}
  name={<><a href="#a7547c8ede0840500ac317ec2d7c1cb18">CommonMask</a></>}>
Combined mask for all applied operands and masks. <a href="#a7547c8ede0840500ac317ec2d7c1cb18">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 2 &gt;</>}
  name={<><a href="#af958e11397dedffa2c10fb88a4c02464">InVectors</a></>}>
List of operands for the shuffle vector instruction. <a href="#af958e11397dedffa2c10fb88a4c02464">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a87e85e68d0f5adefad3fcbb04002d026">IsFinalized</a> = false</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/slpvectorizer/boupslp">BoUpSLP</a> &amp;</>}
  name={<><a href="#a95c272552b1cec0e5e3642f7170b5c45">R</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Merges shuffle masks and emits final shuffle instruction, if required.

It supports shuffling of 2 input vectors. It implements lazy shuffles emission, when the actual shuffle instruction is generated only if this is actually required. Otherwise, the shuffle instruction emission is delayed till the end of the process, to reduce the number of emitted instructions and further analysis/transformations. The class also will look through the previously emitted shuffle instructions and properly mark indices in mask as undef. For example, given the code 
<ProgramListing>

<CodeLine><Highlight kind="normal">%s1 = shufflevector &lt;2 x ty&gt; %0, poison, &lt;1, 0&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%s2 = shufflevector &lt;2 x ty&gt; %1, poison, &lt;1, 0&gt;</Highlight></CodeLine>

</ProgramListing> and if need to emit shuffle of s1 and s2 with mask &lt;1, 0, 3, 2&gt;, it will look through s1 and s2 and emit 
<ProgramListing>

<CodeLine><Highlight kind="normal">%res = shufflevector &lt;2 x ty&gt; %0, %1, &lt;0, 1, 2, 3&gt;</Highlight></CodeLine>

</ProgramListing> instead. If 2 operands are of different size, the smallest one will be resized and the mask recalculated properly. For example, given the code 
<ProgramListing>

<CodeLine><Highlight kind="normal">%s1 = shufflevector &lt;2 x ty&gt; %0, poison, &lt;1, 0, 1, 0&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%s2 = shufflevector &lt;2 x ty&gt; %1, poison, &lt;1, 0, 1, 0&gt;</Highlight></CodeLine>

</ProgramListing> and if need to emit shuffle of s1 and s2 with mask &lt;1, 0, 5, 4&gt;, it will look through s1 and s2 and emit 
<ProgramListing>

<CodeLine><Highlight kind="normal">%res = shufflevector &lt;2 x ty&gt; %0, %1, &lt;0, 1, 2, 3&gt;</Highlight></CodeLine>

</ProgramListing> instead.

Definition at line 14110 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.

<SectionDefinition>

## Public Constructors

### ShuffleInstructionBuilder() {#ab191e4dcc36fced04070c777d9787496}

<MemberDefinition
  prototype={<>llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::ShuffleInstructionBuilder (<a href="/docs/api/classes/llvm/type">Type</a> &#42; ScalarTy, <a href="/docs/api/classes/llvm/irbuilderbase">IRBuilderBase</a> &amp; Builder, <a href="/docs/api/classes/llvm/slpvectorizer/boupslp">BoUpSLP</a> &amp; R)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14236">14236</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~ShuffleInstructionBuilder() {#aed02f405909dc40a81d537066ae87f4e}

<MemberDefinition
  prototype="llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::~ShuffleInstructionBuilder ()"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14632">14632</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### add() {#ac9d11e9f66eb3617827801cb7f0f6619}

<MemberDefinition
  prototype={<>void llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::add (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &amp; E1, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &amp; E2, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; Mask)</>}
  labels = {["inline"]}>
Adds 2 input vectors (in form of tree entries) and the mask for their shuffling.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14394">14394</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### add() {#a42662469b6d20c41b3ed64e9f215b041}

<MemberDefinition
  prototype={<>void llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::add (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &amp; E1, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; Mask)</>}
  labels = {["inline"]}>
Adds single input vector (in form of tree entry) and the mask for its shuffling.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14415">14415</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### add() {#a71ce471fff7e2bde83cdbdeb6bd506d8}

<MemberDefinition
  prototype={<>void llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::add (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V1, <a href="/docs/api/classes/llvm/value">Value</a> &#42; V2, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; Mask)</>}
  labels = {["inline"]}>
Adds 2 input vectors and the mask for their shuffling.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14427">14427</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### add() {#a10d4c86d6600a1727f3d3bd9e8f39314}

<MemberDefinition
  prototype={<>void llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::add (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V1, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; Mask, bool)</>}
  labels = {["inline"]}>
Adds another one input vector and the mask for the shuffling.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14461">14461</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### addOrdered() {#a34c3ba98fb3849595c565342c8c3b78b}

<MemberDefinition
  prototype={<>void llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::addOrdered (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V1, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; unsigned &gt; Order)</>}
  labels = {["inline"]}>
Adds another one input vector and the mask for the shuffling.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14516">14516</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### adjustExtracts() {#ad60d13f7863772bd84f52feda244e894}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::adjustExtracts (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &#42; E, <a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef</a>&lt; int &gt; Mask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; std::optional&lt; <a href="/docs/api/classes/llvm/targettransforminfo/#af46433d0e36d3f80afc3a8c67b5c53ec">TTI::ShuffleKind</a> &gt; &gt; ShuffleKinds, unsigned NumParts, bool &amp; UseVecBaseAsInput)</>}
  labels = {["inline"]}>
Adjusts extractelements after reusing them.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14240">14240</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### createFreeze() {#a9a4f4eb21e4820281bd94386fe524395}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::createFreeze (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14528">14528</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### finalize() {#adedeebdfb49d04e53d9c73abfa8a429f}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::finalize (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; ExtMask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; std::pair&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &#42;, unsigned &gt; &gt; SubVectors, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; SubVectorsMask, unsigned VF=0, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt; void(<a href="/docs/api/classes/llvm/value">Value</a> &#42;&amp;, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; int &gt; &amp;)&gt; Action=&#123;&#125;)</>}
  labels = {["inline"]}>
Finalize emission of the shuffles.

<ParametersList title="Parameters">
<ParametersListItem name="Action">the action (if any) to be performed before final applying of the <code>ExtMask</code> mask.</ParametersListItem>
</ParametersList>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14533">14533</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### gather() {#a5db3e3478b2d1b08f12c1960f1a92af1}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::gather (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt; VL, unsigned MaskVF=0, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Root=nullptr)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14521">14521</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### needToDelay() {#a4055f1bab55c76c243c3bf42c1a7e45a}

<MemberDefinition
  prototype={<>std::optional&lt; Value &#42; &gt; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::needToDelay (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &#42; E, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> TreeEntry &#42; &gt; &gt; Deps) const</>}
  labels = {["inline"]}>
Checks if the specified entry <code>E</code> needs to be delayed because of its dependency nodes.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14376">14376</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### castToScalarTyElem() {#a233dc20c2458649e53eb35ad1b51f11d}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::castToScalarTyElem (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V, std::optional&lt; bool &gt; IsSigned=std::nullopt)</>}
  labels = {["inline"]}>
Cast value <code>V</code> to the vector type with the same number of elements, but the base type <code>ScalarTy</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14224">14224</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### createShuffle() {#a905fbdd0d791cb14829c7abe26e5d5ea}

<MemberDefinition
  prototype={<>Value &#42; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::createShuffle (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V1, <a href="/docs/api/classes/llvm/value">Value</a> &#42; V2, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; int &gt; Mask)</>}
  labels = {["inline"]}>
Smart shuffle instruction emission, walks through shuffles trees and tries to find the best matching vector for the actual shuffle instruction.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14214">14214</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Builder {#a80c9422bf06b37c1231bae1a84dd8262}

<MemberDefinition
  prototype={<>IRBuilderBase&amp; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::Builder</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14121">14121</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### CommonMask {#a7547c8ede0840500ac317ec2d7c1cb18}

<MemberDefinition
  prototype={<>SmallVector&lt;int&gt; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::CommonMask</>}>
Combined mask for all applied operands and masks.

It is built during analysis and actual emission of shuffle vector instructions.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14114">14114</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### InVectors {#af958e11397dedffa2c10fb88a4c02464}

<MemberDefinition
  prototype={<>SmallVector&lt;Value &#42;, 2&gt; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::InVectors</>}>
List of operands for the shuffle vector instruction.

It hold at max 2 operands, if the 3rd is going to be added, the first 2 are combined into shuffle with <code>CommonMask</code> mask, the first operand sets to be the resulting shuffle and the second operand sets to be the newly added operand. The <code>CommonMask</code> is transformed in the proper way after that.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14120">14120</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### IsFinalized {#a87e85e68d0f5adefad3fcbb04002d026}

<MemberDefinition
  prototype="bool llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::IsFinalized = false">

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14111">14111</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

### R {#a95c272552b1cec0e5e3642f7170b5c45}

<MemberDefinition
  prototype={<>BoUpSLP&amp; llvm::slpvectorizer::BoUpSLP::ShuffleInstructionBuilder::R</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp/#l14122">14122</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/vectorize/slpvectorizer-cpp">SLPVectorizer.cpp</a></li>
</ul>

</DoxygenPage>
