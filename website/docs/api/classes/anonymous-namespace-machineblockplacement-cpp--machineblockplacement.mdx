---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-machineblockplacement-cpp-/machineblockplacement
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MachineBlockPlacement` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class anonymous_namespace{MachineBlockPlacement.cpp}::MachineBlockPlacement</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/machinefunctionpass">MachineFunctionPass</a></>}>
<a href="/docs/api/classes/llvm/machinefunctionpass">MachineFunctionPass</a> - This class adapts the <a href="/docs/api/classes/llvm/functionpass">FunctionPass</a> interface to allow convenient creation of passes that operate on the <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> representation. <a href="/docs/api/classes/llvm/machinefunctionpass/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a2c69f46915104b4b42bad5b16926896b">BlockFilterSet</a> = <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 16 &gt;</>}>
A type for a block filter set. <a href="#a2c69f46915104b4b42bad5b16926896b">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ad7175334e09f55bf7b5fb08d9522449e">MachineBlockPlacement</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad65badde897b7d4f51fc7c545538a388">allowTailDupPlacement</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a237eea84de9a4035f23734cb04d32389">getAnalysisUsage</a> (AnalysisUsage &amp;AU) const override</>}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job. <a href="#a237eea84de9a4035f23734cb04d32389">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1f0291b83febf5c94491d76bf5236799">runOnMachineFunction</a> (MachineFunction &amp;F) override</>}>
runOnMachineFunction - This method must be overloaded to perform the desired machine code transformation or analysis. <a href="#a1f0291b83febf5c94491d76bf5236799">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a0b76bc8d639056cba8c0deaa82dab8ba">alignBlocks</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a74729b845cbd9fa6bc1ad1e004e725eb">applyExtTsp</a> (bool OptForSize)</>}>
Apply a post-processing step optimizing block placement. <a href="#a74729b845cbd9fa6bc1ad1e004e725eb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9da2ef31296d894b5114536904af573b">assignBlockOrder</a> (const std::vector&lt; const MachineBasicBlock &#42; &gt; &amp;NewOrder)</>}>
Modify the existing block placement in the function and adjust all jumps. <a href="#a9da2ef31296d894b5114536904af573b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0f22114b14e9ddeab55355f3c27acc58">buildCFGChains</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a66ed2f04dbeb423f8b2b05d83fe373c0">buildChain</a> (const MachineBasicBlock &#42;BB, BlockChain &amp;Chain, BlockFilterSet &#42;BlockFilter=nullptr)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a752789a7a68c3b05cf9c6a697457c0f6">buildLoopChains</a> (const MachineLoop &amp;L)</>}>
Forms basic block chains from the natural loop structures. <a href="#a752789a7a68c3b05cf9c6a697457c0f6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a94c706ea3bc7f05bb86d36f275569739">canMoveBottomBlockToTop</a> (const MachineBasicBlock &#42;BottomBlock, const MachineBasicBlock &#42;OldTop)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ac0a79faa1efd30a5da08320dfb6844e4">canTailDuplicateUnplacedPreds</a> (const MachineBasicBlock &#42;BB, MachineBasicBlock &#42;Succ, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Returns true if a block can tail duplicate into all unplaced predecessors. <a href="#ac0a79faa1efd30a5da08320dfb6844e4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a></>}
  name={<><a href="#a1acc167ff314bcf89aa2028e25ffaaf2">collectLoopBlockSet</a> (const MachineLoop &amp;L)</>}>
Collect blocks in the given loop that are to be placed. <a href="#a1acc167ff314bcf89aa2028e25ffaaf2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/branchprobability">BranchProbability</a></>}
  name={<><a href="#af4f747b70337f75406dd9c17e20c2903">collectViableSuccessors</a> (const MachineBasicBlock &#42;BB, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter, SmallVector&lt; MachineBasicBlock &#42;, 4 &gt; &amp;Successors)</>}>
This helper function collects the set of successors of block <code>BB</code> that are allowed to be its layout successors, and return the total branch probability of edges from <code>BB</code> to those blocks. <a href="#af4f747b70337f75406dd9c17e20c2903">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a2b9d27f22cbc9e88e6fd93b4cbb0c67f">createCFGChainExtTsp</a> ()</>}>
Create a single CFG chain from the current block order. <a href="#a2b9d27f22cbc9e88e6fd93b4cbb0c67f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a48d9afd96859e481b29ccc73e1b7501c">FallThroughGains</a> (const MachineBasicBlock &#42;NewTop, const MachineBasicBlock &#42;OldTop, const MachineBasicBlock &#42;ExitBB, const BlockFilterSet &amp;LoopBlockSet)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#acb4f20302361dca3c6ad9c7a0a23a254">fillWorkLists</a> (const MachineBasicBlock &#42;MBB, SmallPtrSetImpl&lt; BlockChain &#42; &gt; &amp;UpdatedPreds, const BlockFilterSet &#42;BlockFilter)</>}>
Add a basic block to the work list if it is appropriate. <a href="#acb4f20302361dca3c6ad9c7a0a23a254">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#afa49006361b1edf655176b7b8f4d974d">findBestLoopExit</a> (const MachineLoop &amp;L, const BlockFilterSet &amp;LoopBlockSet, BlockFrequency &amp;ExitFreq)</>}>
Find the best loop exiting block for layout. <a href="#afa49006361b1edf655176b7b8f4d974d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a700f6c4424f435cc11b5afabd9c115a4">findBestLoopTop</a> (const MachineLoop &amp;L, const BlockFilterSet &amp;LoopBlockSet)</>}>
Find the best loop top block for layout. <a href="#a700f6c4424f435cc11b5afabd9c115a4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a52cc0da9270fd9c0b3429a269a01bb08">findBestLoopTopHelper</a> (MachineBasicBlock &#42;OldTop, const MachineLoop &amp;L, const BlockFilterSet &amp;LoopBlockSet)</>}>
Helper function of findBestLoopTop. <a href="#a52cc0da9270fd9c0b3429a269a01bb08">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae7b682f772067f17b5b2a9fd6450053e">findDuplicateCandidates</a> (SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;Candidates, MachineBasicBlock &#42;BB, BlockFilterSet &#42;BlockFilter)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="BlockAndTailDupResult"
  name={<><a href="#a5d4e1f1116322b2fae38b312ea5604f8">getBestTrellisSuccessor</a> (const MachineBasicBlock &#42;BB, const SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;ViableSuccs, BranchProbability AdjustedSumProb, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Get the best successor given a trellis layout. <a href="#a5d4e1f1116322b2fae38b312ea5604f8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#aadb8826c90dd0b335005ad4bcec6a319">getBlockCountOrFrequency</a> (const MachineBasicBlock &#42;BB)</>}>
Get block profile count or frequency according to UseProfileCount. <a href="#aadb8826c90dd0b335005ad4bcec6a319">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a4fc423946a994d1c522af1f0cdd78842">getFirstUnplacedBlock</a> (const BlockChain &amp;PlacedChain, MachineFunction::iterator &amp;PrevUnplacedBlockIt)</>}>
Retrieve the first unplaced basic block in the entire function. <a href="#a4fc423946a994d1c522af1f0cdd78842">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a05bb0192a595fdd2777b79e53dda7699">getFirstUnplacedBlock</a> (const BlockChain &amp;PlacedChain, BlockFilterSet::iterator &amp;PrevUnplacedBlockInFilterIt, const BlockFilterSet &#42;BlockFilter)</>}>
Retrieve the first unplaced basic block among the blocks in BlockFilter. <a href="#a05bb0192a595fdd2777b79e53dda7699">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3a68e0308163acb4ff57c35fda2d4c0b">hasBetterLayoutPredecessor</a> (const MachineBasicBlock &#42;BB, const MachineBasicBlock &#42;Succ, const BlockChain &amp;SuccChain, BranchProbability SuccProb, BranchProbability RealSuccProb, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Checks to see if the layout candidate block <code>Succ</code> has a better layout predecessor than <code>BB</code>. <a href="#a3a68e0308163acb4ff57c35fda2d4c0b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2ff12fe20ff61e8bf79201ab31679c39">hasViableTopFallthrough</a> (const MachineBasicBlock &#42;Top, const BlockFilterSet &amp;LoopBlockSet)</>}>
Check if there is a fallthrough to loop header Top. <a href="#a2ff12fe20ff61e8bf79201ab31679c39">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a332bfc8fa4bd863bb875ec26f28764c9">initTailDupThreshold</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abd05f1814cdb465e33bbd1f8ad3acc9c">isBestSuccessor</a> (MachineBasicBlock &#42;BB, MachineBasicBlock &#42;Pred, BlockFilterSet &#42;BlockFilter)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aeb5410d1504b3e2a7a4a0685d8bba226">isProfitableToTailDup</a> (const MachineBasicBlock &#42;BB, const MachineBasicBlock &#42;Succ, BranchProbability QProb, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Check the edge frequencies to see if tail duplication will increase fallthroughs. <a href="#aeb5410d1504b3e2a7a4a0685d8bba226">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a314cc0aa7d21a01c59621f195b117be7">isTrellis</a> (const MachineBasicBlock &#42;BB, const SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;ViableSuccs, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Check for a trellis layout. <a href="#a314cc0aa7d21a01c59621f195b117be7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7fa0e67ba11ea993bd3f047cb851220a">markBlockSuccessors</a> (const BlockChain &amp;Chain, const MachineBasicBlock &#42;BB, const MachineBasicBlock &#42;LoopHeaderBB, const BlockFilterSet &#42;BlockFilter=nullptr)</>}>
Decrease the UnscheduledPredecessors count for a single block, and if the count goes to 0, add them to the appropriate work list. <a href="#a7fa0e67ba11ea993bd3f047cb851220a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a8609559711967b7ec0af133d7979c4d9">markChainSuccessors</a> (const BlockChain &amp;Chain, const MachineBasicBlock &#42;LoopHeaderBB, const BlockFilterSet &#42;BlockFilter=nullptr)</>}>
Decrease the UnscheduledPredecessors count for all blocks in chain, and if the count goes to 0, add them to the appropriate work list. <a href="#a8609559711967b7ec0af133d7979c4d9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7e211e03c3ab0d21b495345984eb1b63">maybeTailDuplicateBlock</a> (MachineBasicBlock &#42;BB, MachineBasicBlock &#42;LPred, BlockChain &amp;Chain, BlockFilterSet &#42;BlockFilter, MachineFunction::iterator &amp;PrevUnplacedBlockIt, BlockFilterSet::iterator &amp;PrevUnplacedBlockInFilterIt, bool &amp;DuplicatedToLPred)</>}>
Tail duplicate <code>BB</code> into (some) predecessors if profitable. <a href="#a7e211e03c3ab0d21b495345984eb1b63">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a45f862faa7617594bcb965034bbf4c39">optimizeBranches</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9f9503d0622e93edb0a6ba39a1a83bc9">precomputeTriangleChains</a> ()</>}>
Find chains of triangles to tail-duplicate where a global analysis works, but a local analysis would not find them. <a href="#a9f9503d0622e93edb0a6ba39a1a83bc9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a65ae9e4e255c09f00874e3defceaaf75">repeatedlyTailDuplicateBlock</a> (MachineBasicBlock &#42;BB, MachineBasicBlock &#42;&amp;LPred, const MachineBasicBlock &#42;LoopHeaderBB, BlockChain &amp;Chain, BlockFilterSet &#42;BlockFilter, MachineFunction::iterator &amp;PrevUnplacedBlockIt, BlockFilterSet::iterator &amp;PrevUnplacedBlockInFilterIt)</>}>
Tail duplicate <code>BB</code> into (some) predecessors if profitable, repeating if it was duplicated into its chain predecessor and removed. <a href="#a65ae9e4e255c09f00874e3defceaaf75">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9447fbcd903da1f7bca306c626f7b3da">rotateLoop</a> (BlockChain &amp;LoopChain, const MachineBasicBlock &#42;ExitingBB, BlockFrequency ExitFreq, const BlockFilterSet &amp;LoopBlockSet)</>}>
Attempt to rotate an exiting block to the bottom of the loop. <a href="#a9447fbcd903da1f7bca306c626f7b3da">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a48fba9be30449ffa8970bb8aa4edb2b9">rotateLoopWithProfile</a> (BlockChain &amp;LoopChain, const MachineLoop &amp;L, const BlockFilterSet &amp;LoopBlockSet)</>}>
Attempt to rotate a loop based on profile data to reduce branch cost. <a href="#a48fba9be30449ffa8970bb8aa4edb2b9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a009bd7be185b0d28640c95a65d3015cd">scaleThreshold</a> (MachineBasicBlock &#42;BB)</>}>
Scale the DupThreshold according to basic block size. <a href="#a009bd7be185b0d28640c95a65d3015cd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a3dbe168d7c61f38f4c3c8e68ddc68bc0">selectBestCandidateBlock</a> (const BlockChain &amp;Chain, SmallVectorImpl&lt; MachineBasicBlock &#42; &gt; &amp;WorkList)</>}>
Select the best block from a worklist. <a href="#a3dbe168d7c61f38f4c3c8e68ddc68bc0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="BlockAndTailDupResult"
  name={<><a href="#a3ed68a87de5a4e312f928382ee2d8a39">selectBestSuccessor</a> (const MachineBasicBlock &#42;BB, const BlockChain &amp;Chain, const BlockFilterSet &#42;BlockFilter)</>}>
Select the best successor for a block. <a href="#a3ed68a87de5a4e312f928382ee2d8a39">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7d6e3b50fb30841d4a19f267d7ba413a">shouldTailDuplicate</a> (MachineBasicBlock &#42;BB)</>}>
Returns true if a block should be tail-duplicated to increase fallthrough opportunities. <a href="#a7d6e3b50fb30841d4a19f267d7ba413a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#acea1eb87358ab0ae882000fdfa36feb9">TopFallThroughFreq</a> (const MachineBasicBlock &#42;Top, const BlockFilterSet &amp;LoopBlockSet)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 4 &gt;</>}
  name={<><a href="#ad3fc59ca71bf4817ece50eb678512a81">BlocksWithUnanalyzableExits</a></>}>
The set of basic blocks that have terminators that cannot be fully analyzed. <a href="#ad3fc59ca71bf4817ece50eb678512a81">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &#42; &gt;</>}
  name={<><a href="#a73f0109902ee879fc0f2fb344a40ec60">BlockToChain</a></>}>
<a href="/docs/api/classes/llvm/function">Function</a> wide <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> to <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> mapping. <a href="#a73f0109902ee879fc0f2fb344a40ec60">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 16 &gt;</>}
  name={<><a href="#aae3cba63507b6bbbb2a0132e16880431">BlockWorkList</a></>}>
work lists of blocks that are ready to be laid out <a href="#aae3cba63507b6bbbb2a0132e16880431">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/specificbumpptrallocator">SpecificBumpPtrAllocator</a>&lt; <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &gt;</>}
  name={<><a href="#a409c5b3292089d63a3a8afc797f7853d">ChainAllocator</a></>}>
Allocator and owner of <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> structures. <a href="#a409c5b3292089d63a3a8afc797f7853d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, BlockAndTailDupResult &gt;</>}
  name={<><a href="#a787183229d5c3229b5084e4577e3083d">ComputedEdges</a></>}>
Edges that have already been computed as optimal. <a href="#a787183229d5c3229b5084e4577e3083d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#ae11922d600fffe2c8358b1ab5746328d">DupThreshold</a></>}>
Partial tail duplication threshold. <a href="#ae11922d600fffe2c8358b1ab5746328d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 16 &gt;</>}
  name={<><a href="#a78e15aacb3f480ea24dcef7ee9bf2942">EHPadWorkList</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;</>}
  name={<><a href="#a441346b8c3a351fc729ba5322d76f650">F</a> = nullptr</>}>
Machine <a href="/docs/api/classes/llvm/function">Function</a>. <a href="#a441346b8c3a351fc729ba5322d76f650">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::unique&#95;ptr&lt; <a href="/docs/api/classes/llvm/mbfiwrapper">MBFIWrapper</a> &gt;</>}
  name={<><a href="#ae4d3256c15bed44ceb54bd6d1e98eeac">MBFI</a></>}>
A handle to the function-wide block frequency pass. <a href="#ae4d3256c15bed44ceb54bd6d1e98eeac">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebranchprobabilityinfo">MachineBranchProbabilityInfo</a> &#42;</>}
  name={<><a href="#a1cafd878b0393094413d5314b7f5433f">MBPI</a> = nullptr</>}>
A handle to the branch probability pass. <a href="#a1cafd878b0393094413d5314b7f5433f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineloopinfo">MachineLoopInfo</a> &#42;</>}
  name={<><a href="#a9043c382d0cd4a27bb67f8d04f51f0bd">MLI</a> = nullptr</>}>
A handle to the loop info. <a href="#a9043c382d0cd4a27bb67f8d04f51f0bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinepostdominatortree">MachinePostDominatorTree</a> &#42;</>}
  name={<><a href="#aebd727768855e8c4d0aec1e56ef0276d">MPDT</a> = nullptr</>}>
A handle to the post dominator tree. <a href="#aebd727768855e8c4d0aec1e56ef0276d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a> &#42;</>}
  name={<><a href="#a657470178bb8e218eff04adbf577e575">PassConfig</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;</>}
  name={<><a href="#a2a50cdc995bbaf9976f47390525c799b">PreferredLoopExit</a> = nullptr</>}>
Preferred loop exit. <a href="#a2a50cdc995bbaf9976f47390525c799b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42;</>}
  name={<><a href="#a0bf36e76dddb06c1e1ffa7510b32f1e5">PSI</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/tailduplicator">TailDuplicator</a></>}
  name={<><a href="#a70a3df2e6483c164757dceb156788a11">TailDup</a></>}>
Duplicator used to duplicate tails during placement. <a href="#a70a3df2e6483c164757dceb156788a11">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#ace8891a946fba735052f70421f420e8d">TailDupSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;</>}
  name={<><a href="#a6be7707838427e4d20b01d1888fd1950">TII</a> = nullptr</>}>
A handle to the target&#39;s instruction info. <a href="#a6be7707838427e4d20b01d1888fd1950">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetloweringbase">TargetLoweringBase</a> &#42;</>}
  name={<><a href="#aff48bdcbafede2c75e4d99a4b8a62cb0">TLI</a> = nullptr</>}>
A handle to the target&#39;s lowering info. <a href="#aff48bdcbafede2c75e4d99a4b8a62cb0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a581affb9c081f5fb1826892f66531871">UseProfileCount</a> = false</>}>
True: use block profile count to compute tail duplication cost. <a href="#a581affb9c081f5fb1826892f66531871">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<>std::pair&lt; WeightedEdge, WeightedEdge &gt;</>}
  name={<><a href="#a984864f0c5f4ecf52a87268c077969ee">getBestNonConflictingEdges</a> (const MachineBasicBlock &#42;BB, MutableArrayRef&lt; SmallVector&lt; WeightedEdge, 8 &gt; &gt; Edges)</>}>
Get the best pair of non-conflicting edges. <a href="#a984864f0c5f4ecf52a87268c077969ee">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Static Attributes Index

<MembersIndex>

<MembersIndexItem
  type="char"
  name={<><a href="#a4944db6b12999ee0713352c27e8125e4">ID</a> = 0</>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 360 of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.

<SectionDefinition>

## Private Member Typedefs

### BlockFilterSet {#a2c69f46915104b4b42bad5b16926896b}

<MemberDefinition
  prototype={<>using anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::BlockFilterSet =  SmallSetVector&lt;const MachineBasicBlock &#42;, 16&gt;</>}>
A type for a block filter set.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00362">362</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### MachineBlockPlacement() {#ad7175334e09f55bf7b5fb08d9522449e}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::MachineBlockPlacement ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00614">614</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### allowTailDupPlacement() {#ad65badde897b7d4f51fc7c545538a388}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::allowTailDupPlacement () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00620">620</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### getAnalysisUsage() {#a237eea84de9a4035f23734cb04d32389}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::getAnalysisUsage (<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;) const</>}
  labels = {["inline", "virtual"]}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job.

If a pass specifies that it uses a particular analysis result to this function, it can then use the <a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AnalysisType&gt;()</a> function, below.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00625">625</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### runOnMachineFunction() {#a1f0291b83febf5c94491d76bf5236799}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::runOnMachineFunction (<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF)</>}
  labels = {["virtual"]}>
runOnMachineFunction - This method must be overloaded to perform the desired machine code transformation or analysis.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00618">618</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### alignBlocks() {#a0b76bc8d639056cba8c0deaa82dab8ba}

<MemberDefinition
  prototype="void MachineBlockPlacement::alignBlocks ()">

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00563">563</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### applyExtTsp() {#a74729b845cbd9fa6bc1ad1e004e725eb}

<MemberDefinition
  prototype="void MachineBlockPlacement::applyExtTsp (bool OptForSize)">
Apply a post-processing step optimizing block placement.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00603">603</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### assignBlockOrder() {#a9da2ef31296d894b5114536904af573b}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::assignBlockOrder (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> std::vector&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; NewOrder)</>}>
Modify the existing block placement in the function and adjust all jumps.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00606">606</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### buildCFGChains() {#a0f22114b14e9ddeab55355f3c27acc58}

<MemberDefinition
  prototype="void MachineBlockPlacement::buildCFGChains ()">

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00561">561</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### buildChain() {#a66ed2f04dbeb423f8b2b05d83fe373c0}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::buildChain (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter=nullptr)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00535">535</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### buildLoopChains() {#a752789a7a68c3b05cf9c6a697457c0f6}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::buildLoopChains (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L)</>}>
Forms basic block chains from the natural loop structures.

These chains are designed to preserve the existing <em>structure</em> of the code as much as possible. We can then stitch the chains together in a way which both preserves the topological structure and minimizes taken conditional branches.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00556">556</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### canMoveBottomBlockToTop() {#a94c706ea3bc7f05bb86d36f275569739}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::canMoveBottomBlockToTop (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BottomBlock, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; OldTop)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00537">537</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### canTailDuplicateUnplacedPreds() {#ac0a79faa1efd30a5da08320dfb6844e4}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::canTailDuplicateUnplacedPreds (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Succ, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Returns true if a block can tail duplicate into all unplaced predecessors.

When the option <a href="#ad65badde897b7d4f51fc7c545538a388">allowTailDupPlacement()</a> is on, this method checks if the fallthrough candidate block <code>Succ</code> (of block <code>BB</code>) can be tail-duplicated into all of its unplaced, unfiltered predecessors, that are not BB.

Filters based on loop.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00593">593</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### collectLoopBlockSet() {#a1acc167ff314bcf89aa2028e25ffaaf2}

<MemberDefinition
  prototype={<>MachineBlockPlacement::BlockFilterSet MachineBlockPlacement::collectLoopBlockSet (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L)</>}>
Collect blocks in the given loop that are to be placed.

When profile data is available, exclude cold blocks from the returned set; otherwise, collect all blocks in the loop.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00555">555</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### collectViableSuccessors() {#af4f747b70337f75406dd9c17e20c2903}

<MemberDefinition
  prototype={<>BranchProbability MachineBlockPlacement::collectViableSuccessors (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, 4 &gt; &amp; Successors)</>}>
This helper function collects the set of successors of block <code>BB</code> that are allowed to be its layout successors, and return the total branch probability of edges from <code>BB</code> to those blocks.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00485">485</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### createCFGChainExtTsp() {#a2b9d27f22cbc9e88e6fd93b4cbb0c67f}

<MemberDefinition
  prototype="void MachineBlockPlacement::createCFGChainExtTsp ()">
Create a single CFG chain from the current block order.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00609">609</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### FallThroughGains() {#a48d9afd96859e481b29ccc73e1b7501c}

<MemberDefinition
  prototype={<>BlockFrequency MachineBlockPlacement::FallThroughGains (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; NewTop, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; OldTop, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; ExitBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00543">543</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### fillWorkLists() {#acb4f20302361dca3c6ad9c7a0a23a254}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::fillWorkLists (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/smallptrsetimpl">SmallPtrSetImpl</a>&lt; <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &#42; &gt; &amp; UpdatedPreds, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Add a basic block to the work list if it is appropriate.

If the optional parameter BlockFilter is provided, only MBB present in the set will be added to the worklist. If nullptr is provided, no filtering occurs.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00531">531</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### findBestLoopExit() {#afa49006361b1edf655176b7b8f4d974d}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::findBestLoopExit (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet, <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> &amp; ExitFreq)</>}>
Find the best loop exiting block for layout.

This routine implements the logic to analyze the loop looking for the best block to layout at the top of the loop. Typically this is done to maximize fallthrough opportunities.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00552">552</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### findBestLoopTop() {#a700f6c4424f435cc11b5afabd9c115a4}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::findBestLoopTop (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>
Find the best loop top block for layout.

This function iteratively calls findBestLoopTopHelper, until no new better BB can be found.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00550">550</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### findBestLoopTopHelper() {#a52cc0da9270fd9c0b3429a269a01bb08}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::findBestLoopTopHelper (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; OldTop, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>
Helper function of findBestLoopTop.

Find the best loop top block from predecessors of old top.

Look for a block which is strictly better than the old top for laying out before the old top of the loop. This looks for only two patterns: <CodeBlock>1. a block has only one successor, the old loop top

   Because such a block will always result in an unconditional jump,
   rotating it in front of the old top is always profitable.

2. a block has two successors, one is old top, another is exit
   and it has more than one predecessors

   If it is below one of its predecessors P, only P can fall through to
   it, all other predecessors need a jump to it, and another conditional
   jump to loop header. If it is moved before loop header, all its
   predecessors jump to it, then fall through to loop header. So all its
   predecessors except P can reduce one taken branch.
   At the same time, move it before old top increases the taken branch
   to loop exit block, so the reduced taken branch will be compared with
   the increased taken branch to the loop exit block. 
</CodeBlock>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00547">547</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### findDuplicateCandidates() {#ae7b682f772067f17b5b2a9fd6450053e}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::findDuplicateCandidates (<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; Candidates, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00490">490</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### getBestTrellisSuccessor() {#a5d4e1f1116322b2fae38b312ea5604f8}

<MemberDefinition
  prototype={<>MachineBlockPlacement::BlockAndTailDupResult MachineBlockPlacement::getBestTrellisSuccessor (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; ViableSuccs, <a href="/docs/api/classes/llvm/branchprobability">BranchProbability</a> AdjustedSumProb, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Get the best successor given a trellis layout.

Get the best successor from <code>BB</code> based on <code>BB</code> being part of a trellis.

We only handle trellises with 2 successors, so the algorithm is straightforward: Find the best pair of edges that don&#39;t conflict. We find the best incoming edge for each successor in the trellis. If those conflict, we consider which of them should be replaced with the second best. Upon return the two best edges will be in <code>BestEdges</code>. If one of the edges comes from <code>BB</code>, it will be in <code>BestEdges</code>&#91;0&#93;

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00580">580</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### getBlockCountOrFrequency() {#aadb8826c90dd0b335005ad4bcec6a319}

<MemberDefinition
  prototype={<>BlockFrequency anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::getBlockCountOrFrequency (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB)</>}
  labels = {["inline"]}>
Get block profile count or frequency according to UseProfileCount.

The return value is used to model tail duplication cost.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00457">457</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### getFirstUnplacedBlock() {#a4fc423946a994d1c522af1f0cdd78842}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::getFirstUnplacedBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; PlacedChain, <a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> &amp; PrevUnplacedBlockIt)</>}>
Retrieve the first unplaced basic block in the entire function.

This routine is called when we are unable to use the CFG to walk through all of the basic blocks and form a chain due to unnatural loops in the CFG. We walk through the function&#39;s blocks in order, starting from the LastUnplacedBlockIt. We update this iterator on each call to avoid re-scanning the entire sequence on repeated calls to this routine.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00519">519</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### getFirstUnplacedBlock() {#a05bb0192a595fdd2777b79e53dda7699}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::getFirstUnplacedBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; PlacedChain, <a href="/docs/api/classes/llvm/setvector/#a813fd00ac7e5e3261ffe67f9322a5480">BlockFilterSet::iterator</a> &amp; PrevUnplacedBlockInFilterIt, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Retrieve the first unplaced basic block among the blocks in BlockFilter.

This is similar to getFirstUnplacedBlock for the entire function, but since the size of BlockFilter is typically far less than the number of blocks in the entire function, iterating through the BlockFilter is more efficient. When processing the entire funciton, using the version without BlockFilter has a complexity of #(loops in function) &#42; #(blocks in function), while this version has a complexity of sum(#(loops in block) foreach block in function) which is always smaller. For long function mostly sequential in structure, the complexity is amortized to 1 &#42; #(blocks in function).

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00522">522</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### hasBetterLayoutPredecessor() {#a3a68e0308163acb4ff57c35fda2d4c0b}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::hasBetterLayoutPredecessor (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Succ, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; SuccChain, <a href="/docs/api/classes/llvm/branchprobability">BranchProbability</a> SuccProb, <a href="/docs/api/classes/llvm/branchprobability">BranchProbability</a> RealSuccProb, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Checks to see if the layout candidate block <code>Succ</code> has a better layout predecessor than <code>BB</code>.

If yes, returns true. <code>SuccProb:</code> The probability adjusted for only remaining blocks. Only used for logging <code>RealSuccProb:</code> The un-adjusted probability. <code>Chain:</code> The chain that BB belongs to and Succ is being considered for. <code>BlockFilter:</code> if non-null, the set of blocks that make up the loop being considered

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00505">505</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### hasViableTopFallthrough() {#a2ff12fe20ff61e8bf79201ab31679c39}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::hasViableTopFallthrough (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Top, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>
Check if there is a fallthrough to loop header Top.

<ul>
<li>Look for a Pred that can be layout before Top.</li>
<li>Check if Top is the most possible successor of Pred.</li>
</ul>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00539">539</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### initTailDupThreshold() {#a332bfc8fa4bd863bb875ec26f28764c9}

<MemberDefinition
  prototype="void MachineBlockPlacement::initTailDupThreshold ()">

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00470">470</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### isBestSuccessor() {#abd05f1814cdb465e33bbd1f8ad3acc9c}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::isBestSuccessor (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Pred, <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00488">488</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### isProfitableToTailDup() {#aeb5410d1504b3e2a7a4a0685d8bba226}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::isProfitableToTailDup (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Succ, <a href="/docs/api/classes/llvm/branchprobability">BranchProbability</a> QProb, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Check the edge frequencies to see if tail duplication will increase fallthroughs.

It only makes sense to call this function when <code>Succ</code> would not be chosen otherwise. Tail duplication of <code>Succ</code> is always locally profitable if we would have picked <code>Succ</code> without considering duplication.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00569">569</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### isTrellis() {#a314cc0aa7d21a01c59621f195b117be7}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::isTrellis (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; ViableSuccs, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Check for a trellis layout.

<code>BB</code> is the upper part of a trellis if its successors form the lower part of a trellis. A successor set S forms the lower part of a trellis if all of the predecessors of S are either in S or have all of S as successors. We ignore trellises where BB doesn&#39;t have 2 successors because for fewer than 2, it&#39;s trivial, and for 3 or greater they are very uncommon and complex to compute optimally. Allowing edges within S is not strictly a trellis, but the same algorithm works, so we allow it.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00575">575</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### markBlockSuccessors() {#a7fa0e67ba11ea993bd3f047cb851220a}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::markBlockSuccessors (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; LoopHeaderBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter=nullptr)</>}>
Decrease the UnscheduledPredecessors count for a single block, and if the count goes to 0, add them to the appropriate work list.

Mark a single block&#39;s successors as having one fewer preds.

Under normal circumstances, this is only called by markChainSuccessors, but if a block that was to be placed is completely tail-duplicated away, and was duplicated into the chain end, we need to redo markBlockSuccessors for just that block.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00480">480</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### markChainSuccessors() {#a8609559711967b7ec0af133d7979c4d9}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::markChainSuccessors (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; LoopHeaderBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter=nullptr)</>}>
Decrease the UnscheduledPredecessors count for all blocks in chain, and if the count goes to 0, add them to the appropriate work list.

Mark a chain&#39;s successors as having one fewer preds.

When a chain is being merged into the &quot;placed&quot; chain, this routine will quickly walk the successors of each block in the chain and mark them as having one fewer active predecessor. It also adds any successors of this chain which reach the zero-predecessor state to the appropriate worklist.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00474">474</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### maybeTailDuplicateBlock() {#a7e211e03c3ab0d21b495345984eb1b63}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::maybeTailDuplicateBlock (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; LPred, <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter, <a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> &amp; PrevUnplacedBlockIt, <a href="/docs/api/classes/llvm/setvector/#a813fd00ac7e5e3261ffe67f9322a5480">BlockFilterSet::iterator</a> &amp; PrevUnplacedBlockInFilterIt, bool &amp; DuplicatedToLPred)</>}>
Tail duplicate <code>BB</code> into (some) predecessors if profitable.

<code>BB</code> - Basic block that may be duplicated <code>LPred</code> - Chosen layout predecessor of <code>BB</code> <code>Chain</code> - Chain to which <code>LPred</code> belongs, and <code>BB</code> will belong. <code>BlockFilter</code> - Set of blocks that belong to the loop being laid out. Used to identify which blocks to update predecessor counts. <code>PrevUnplacedBlockIt</code> - Iterator pointing to the last block that was chosen in the given order due to unnatural CFG only needed if <code>BB</code> is removed and <code>PrevUnplacedBlockIt</code> pointed to <code>BB</code>. <code>DuplicatedToLPred</code> - True if the block was duplicated into LPred. 
<SectionUser title="Returns">
- True if the block was duplicated into all preds and removed.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00500">500</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### optimizeBranches() {#a45f862faa7617594bcb965034bbf4c39}

<MemberDefinition
  prototype="void MachineBlockPlacement::optimizeBranches ()">

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00562">562</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### precomputeTriangleChains() {#a9f9503d0622e93edb0a6ba39a1a83bc9}

<MemberDefinition
  prototype="void MachineBlockPlacement::precomputeTriangleChains ()">
Find chains of triangles to tail-duplicate where a global analysis works, but a local analysis would not find them.

Find chains of triangles where we believe it would be profitable to tail-duplicate them all, but a local analysis would not find them.

There are 3 ways this can be profitable: 1) The post-dominators marked 50% are actually taken 55% (This shrinks with longer chains) 2) The chains are statically correlated. Branch probabilities have a very U-shaped distribution. &#91;<a href="http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805">http://nrs.harvard.edu/urn-3:HUL.InstRepos:24015805</a>&#93; If the branches in a chain are likely to be from the same side of the distribution as their predecessor, but are independent at runtime, this transformation is profitable. (Because the cost of being wrong is a small fixed cost, unlike the standard triangle layout where the cost of being wrong scales with the # of triangles.) 3) The chains are dynamically correlated. If the probability that a previous branch was taken positively influences whether the next branch will be taken We believe that 2 and 3 are common enough to justify the small margin in 1.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00600">600</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### repeatedlyTailDuplicateBlock() {#a65ae9e4e255c09f00874e3defceaaf75}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::repeatedlyTailDuplicateBlock (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;&amp; LPred, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; LoopHeaderBB, <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter, <a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> &amp; PrevUnplacedBlockIt, <a href="/docs/api/classes/llvm/setvector/#a813fd00ac7e5e3261ffe67f9322a5480">BlockFilterSet::iterator</a> &amp; PrevUnplacedBlockInFilterIt)</>}>
Tail duplicate <code>BB</code> into (some) predecessors if profitable, repeating if it was duplicated into its chain predecessor and removed.

<code>BB</code> - Basic block that may be duplicated.

<code>LPred</code> - Chosen layout predecessor of <code>BB</code>. Updated to be the chain end if LPred is removed. <code>Chain</code> - Chain to which <code>LPred</code> belongs, and <code>BB</code> will belong. <code>BlockFilter</code> - Set of blocks that belong to the loop being laid out. Used to identify which blocks to update predecessor counts. <code>PrevUnplacedBlockIt</code> - Iterator pointing to the last block that was chosen in the given order due to unnatural CFG only needed if <code>BB</code> is removed and <code>PrevUnplacedBlockIt</code> pointed to <code>BB</code>. 
<SectionUser title="Returns">
true if <code>BB</code> was removed.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00493">493</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### rotateLoop() {#a9447fbcd903da1f7bca306c626f7b3da}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::rotateLoop (<a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; LoopChain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; ExitingBB, <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> ExitFreq, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>
Attempt to rotate an exiting block to the bottom of the loop.

Once we have built a chain, try to rotate it to line up the hot exit block with fallthrough out of the loop if doing so doesn&#39;t introduce unnecessary branches. For example, if the loop has fallthrough into its header and out of its bottom already, don&#39;t rotate it.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00557">557</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### rotateLoopWithProfile() {#a48fba9be30449ffa8970bb8aa4edb2b9}

<MemberDefinition
  prototype={<>void MachineBlockPlacement::rotateLoopWithProfile (<a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; LoopChain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineloop">MachineLoop</a> &amp; L, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>
Attempt to rotate a loop based on profile data to reduce branch cost.

With profile data, we can determine the cost in terms of missed fall through opportunities when rotating a loop chain and select the best rotation. Basically, there are three kinds of cost to consider for each rotation:
<ul>
<li>The possibly missed fall through edge (if it exists) from BB out of the loop to the loop header.</li>
<li>The possibly missed fall through edges (if they exist) from the loop exits to BB out of the loop.</li>
<li>The missed fall through edge (if it exists) from the last BB to the first BB in the loop chain. Therefore, the cost for a given rotation is the sum of costs listed above. We select the best rotation with the smallest cost.</li>
</ul>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00559">559</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### scaleThreshold() {#a009bd7be185b0d28640c95a65d3015cd}

<MemberDefinition
  prototype={<>BlockFrequency MachineBlockPlacement::scaleThreshold (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB)</>}>
Scale the DupThreshold according to basic block size.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00469">469</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### selectBestCandidateBlock() {#a3dbe168d7c61f38f4c3c8e68ddc68bc0}

<MemberDefinition
  prototype={<>MachineBasicBlock &#42; MachineBlockPlacement::selectBestCandidateBlock (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; &gt; &amp; WorkList)</>}>
Select the best block from a worklist.

This looks through the provided worklist as a list of candidate basic blocks and select the most profitable one to place. The definition of profitable only really makes sense in the context of a loop. This returns the most frequently visited block in the worklist, which in the case of a loop, is the one most desirable to be physically close to the rest of the loop body in order to improve i-cache behavior.


<SectionUser title="Returns">
The best block found, or null if none are viable.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00516">516</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### selectBestSuccessor() {#a3ed68a87de5a4e312f928382ee2d8a39}

<MemberDefinition
  prototype={<>MachineBlockPlacement::BlockAndTailDupResult MachineBlockPlacement::selectBestSuccessor (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> &amp; Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &#42; BlockFilter)</>}>
Select the best successor for a block.

This looks across all successors of a particular block and attempts to select the &quot;best&quot; one to be the layout successor. It only considers direct successors which also pass the block filter. It will attempt to avoid breaking CFG structure, but cave and break such structures in the case of very hot successor edges.


<SectionUser title="Returns">
The best successor block found, or null if none are viable, along with a boolean indicating if tail duplication is necessary.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00512">512</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### shouldTailDuplicate() {#a7d6e3b50fb30841d4a19f267d7ba413a}

<MemberDefinition
  prototype={<>bool MachineBlockPlacement::shouldTailDuplicate (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB)</>}>
Returns true if a block should be tail-duplicated to increase fallthrough opportunities.

Check if a block should be tail duplicated to increase fallthrough opportunities.

<code>BB</code> Block to check.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00566">566</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### TopFallThroughFreq() {#acea1eb87358ab0ae882000fdfa36feb9}

<MemberDefinition
  prototype={<>BlockFrequency MachineBlockPlacement::TopFallThroughFreq (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; Top, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">BlockFilterSet</a> &amp; LoopBlockSet)</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00541">541</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### BlocksWithUnanalyzableExits {#ad3fc59ca71bf4817ece50eb678512a81}

<MemberDefinition
  prototype={<>SmallPtrSet&lt;MachineBasicBlock &#42;, 4&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::BlocksWithUnanalyzableExits</>}>
The set of basic blocks that have terminators that cannot be fully analyzed.

These basic blocks cannot be re-ordered safely by <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/machineblockplacement">MachineBlockPlacement</a>, and we must preserve physical layout of these blocks and their successors through the pass.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00452">452</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### BlockToChain {#a73f0109902ee879fc0f2fb344a40ec60}

<MemberDefinition
  prototype={<>DenseMap&lt;const MachineBasicBlock &#42;, BlockChain &#42;&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::BlockToChain</>}>
<a href="/docs/api/classes/llvm/function">Function</a> wide <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> to <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> mapping.

This mapping allows efficiently moving from any given basic block to the <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> it participates in, if any. We use it to, among other things, allow implicitly defining edges between chains as the existing edges between basic blocks.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00445">445</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### BlockWorkList {#aae3cba63507b6bbbb2a0132e16880431}

<MemberDefinition
  prototype={<>SmallVector&lt;MachineBasicBlock &#42;, 16&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::BlockWorkList</>}>
work lists of blocks that are ready to be laid out

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00378">378</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### ChainAllocator {#a409c5b3292089d63a3a8afc797f7853d}

<MemberDefinition
  prototype={<>SpecificBumpPtrAllocator&lt;BlockChain&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::ChainAllocator</>}>
Allocator and owner of <a href="/docs/api/classes/anonymous-namespace-machineblockplacement-cpp-/blockchain">BlockChain</a> structures.

We build BlockChains lazily while processing the loop structure of a function. To reduce malloc traffic, we allocate them using this slab-like allocator, and destroy them after the pass completes. An important guarantee is that this allocator produces stable pointers to the chains.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00437">437</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### ComputedEdges {#a787183229d5c3229b5084e4577e3083d}

<MemberDefinition
  prototype={<>DenseMap&lt;const MachineBasicBlock &#42;, BlockAndTailDupResult&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::ComputedEdges</>}>
Edges that have already been computed as optimal.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00382">382</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### DupThreshold {#ae11922d600fffe2c8358b1ab5746328d}

<MemberDefinition
  prototype={<>BlockFrequency anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::DupThreshold</>}>
Partial tail duplication threshold.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00422">422</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### EHPadWorkList {#a78e15aacb3f480ea24dcef7ee9bf2942}

<MemberDefinition
  prototype={<>SmallVector&lt;MachineBasicBlock &#42;, 16&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::EHPadWorkList</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00379">379</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### F {#a441346b8c3a351fc729ba5322d76f650}

<MemberDefinition
  prototype={<>MachineFunction&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::F = nullptr</>}>
Machine <a href="/docs/api/classes/llvm/function">Function</a>.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00385">385</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### MBFI {#ae4d3256c15bed44ceb54bd6d1e98eeac}

<MemberDefinition
  prototype={<>std::unique&#95;ptr&lt;MBFIWrapper&gt; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::MBFI</>}>
A handle to the function-wide block frequency pass.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00391">391</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### MBPI {#a1cafd878b0393094413d5314b7f5433f}

<MemberDefinition
  prototype={<>const MachineBranchProbabilityInfo&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::MBPI = nullptr</>}>
A handle to the branch probability pass.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00388">388</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### MLI {#a9043c382d0cd4a27bb67f8d04f51f0bd}

<MemberDefinition
  prototype={<>MachineLoopInfo&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::MLI = nullptr</>}>
A handle to the loop info.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00394">394</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### MPDT {#aebd727768855e8c4d0aec1e56ef0276d}

<MemberDefinition
  prototype={<>MachinePostDominatorTree&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::MPDT = nullptr</>}>
A handle to the post dominator tree.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00408">408</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### PassConfig {#a657470178bb8e218eff04adbf577e575}

<MemberDefinition
  prototype={<>TargetPassConfig&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::PassConfig = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00412">412</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### PreferredLoopExit {#a2a50cdc995bbaf9976f47390525c799b}

<MemberDefinition
  prototype={<>MachineBasicBlock&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::PreferredLoopExit = nullptr</>}>
Preferred loop exit.

Member variable for convenience. It may be removed by duplication deep in the call stack.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00399">399</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### PSI {#a0bf36e76dddb06c1e1ffa7510b32f1e5}

<MemberDefinition
  prototype={<>ProfileSummaryInfo&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::PSI = nullptr</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00410">410</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### TailDup {#a70a3df2e6483c164757dceb156788a11}

<MemberDefinition
  prototype={<>TailDuplicator anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::TailDup</>}>
Duplicator used to duplicate tails during placement.

Placement decisions can open up new tail duplication opportunities, but since tail duplication affects placement decisions of later blocks, it must be done inline.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00419">419</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### TailDupSize {#ace8891a946fba735052f70421f420e8d}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::TailDupSize</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00424">424</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### TII {#a6be7707838427e4d20b01d1888fd1950}

<MemberDefinition
  prototype={<>const TargetInstrInfo&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::TII = nullptr</>}>
A handle to the target&#39;s instruction info.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00402">402</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### TLI {#aff48bdcbafede2c75e4d99a4b8a62cb0}

<MemberDefinition
  prototype={<>const TargetLoweringBase&#42; anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::TLI = nullptr</>}>
A handle to the target&#39;s lowering info.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00405">405</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

### UseProfileCount {#a581affb9c081f5fb1826892f66531871}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;MachineBlockPlacement.cpp&#125;::MachineBlockPlacement::UseProfileCount = false</>}>
True: use block profile count to compute tail duplication cost.

False: use block frequency to compute tail duplication cost.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00428">428</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Static Functions

### getBestNonConflictingEdges() {#a984864f0c5f4ecf52a87268c077969ee}

<MemberDefinition
  prototype={<>std::pair&lt; MachineBlockPlacement::WeightedEdge, MachineBlockPlacement::WeightedEdge &gt; MachineBlockPlacement::getBestNonConflictingEdges (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; BB, <a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef</a>&lt; <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; WeightedEdge, 8 &gt; &gt; Edges)</>}
  labels = {["static"]}>
Get the best pair of non-conflicting edges.

Pick the highest total weight pair of edges that can both be laid out.

The edges in <code>Edges</code>&#91;0&#93; are assumed to have a different destination than the edges in <code>Edges</code>&#91;1&#93;. Simple counting shows that the best pair is either the individual highest weight edges to the 2 different destinations, or in case of a conflict, one of them should be replaced with a 2nd best edge.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00587">587</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Attributes

### ID {#a4944db6b12999ee0713352c27e8125e4}

<MemberDefinition
  prototype="char MachineBlockPlacement::ID = 0"
  labels = {["static"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp/#l00612">612</a> of file <a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/machineblockplacement-cpp">MachineBlockPlacement.cpp</a></li>
</ul>

</DoxygenPage>
