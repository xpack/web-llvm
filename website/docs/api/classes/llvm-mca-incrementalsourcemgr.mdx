---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/mca/incrementalsourcemgr
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `IncrementalSourceMgr` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

An implementation of <em><a href="/docs/api/structs/llvm/mca/sourcemgr">SourceMgr</a></em> that allows users to add new instructions incrementally / dynamically. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::mca::IncrementalSourceMgr</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/MCA/IncrementalSourceMgr.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h"
  isLocal="true" />
</IncludesList>

## Base class

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/mca/sourcemgr">SourceMgr</a></>}>
Abstracting the input code sequence (a sequence of <a href="/docs/api/classes/llvm/mcinst">MCInst</a>) and assigning unique identifiers to every instruction in the sequence. <a href="/docs/api/structs/llvm/mca/sourcemgr/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a56f6f6cee3110562acdf6b7c4302809a">InstFreedCallback</a> = std::function&lt; void(<a href="/docs/api/classes/llvm/mca/instruction">Instruction</a> &#42;)&gt;</>}>
Called when an instruction is no longer needed. <a href="#a56f6f6cee3110562acdf6b7c4302809a">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#aa90e9baa09e3b21a90ea3df2b802749e">IncrementalSourceMgr</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a5a79fdf47b12f2543c93039662106caf">addInst</a> (UniqueInst &amp;&amp;Inst)</>}>
Add a new instruction. <a href="#a5a79fdf47b12f2543c93039662106caf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3145b940234a234e7ce649909952500a">addRecycledInst</a> (Instruction &#42;Inst)</>}>
Add a recycled instruction. <a href="#a3145b940234a234e7ce649909952500a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aac1bf46c1b8d46f2675e857ff328b2e1">clear</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a95676d1de997484e03ec6f0ce79d1331">endOfStream</a> ()</>}>
Mark the end of instruction stream. <a href="#a95676d1de997484e03ec6f0ce79d1331">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a> &gt;</>}
  name={<><a href="#a5bc6c0a4359b9969b36c14eb243cbfe0">getInstructions</a> () const override</>}>
Provides a fixed range of <em><a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a></em> to iterate. <a href="#a5bc6c0a4359b9969b36c14eb243cbfe0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a7ab6fe3fb026ff48265f9836f282d5b3">hasNext</a> () const override</>}>
Whether there is any <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em> to inspect / peek next. <a href="#a7ab6fe3fb026ff48265f9836f282d5b3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a4ba19dadd2449aab5779bf9677d35604">isEnd</a> () const override</>}>
Whether the instruction stream has eneded. <a href="#a4ba19dadd2449aab5779bf9677d35604">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></>}
  name={<><a href="#a6c1ccc01d5bce4605ec868529a91bc5f">peekNext</a> () const override</>}>
The next <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em>. <a href="#a6c1ccc01d5bce4605ec868529a91bc5f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a55086232b62ba76e882e380ca1e4576a">printStatistic</a> (raw&#95;ostream &amp;OS)</>}>
Print statistic about instruction recycling stats. <a href="#a55086232b62ba76e882e380ca1e4576a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0f4a2d708bc5d5a3f9c139948ae3c2e2">setOnInstFreedCallback</a> (InstFreedCallback CB)</>}>
Set a callback that is invoked when a <a href="/docs/api/classes/llvm/mca/instruction">mca::Instruction</a> is no longer needed. <a href="#a0f4a2d708bc5d5a3f9c139948ae3c2e2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae7e7a65dca58ec0969862ae9fe6ba64e">updateNext</a> () override</>}>
Advance to the next <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em>. <a href="#ae7e7a65dca58ec0969862ae9fe6ba64e">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2444704e623564b0785065d57ef0e4db">EOS</a> = false</>}>
End-of-stream flag. <a href="#a2444704e623564b0785065d57ef0e4db">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="InstFreedCallback"
  name={<><a href="#abbcd36a4378ebe614b46a1a4ec91943a">InstFreedCB</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::deque&lt; <a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a> &gt;</>}
  name={<><a href="#a874a1818f5ba4817157d0b9984c48709">InstStorage</a></>}>
Owner of all <a href="/docs/api/classes/llvm/mca/instruction">mca::Instruction</a> instances. <a href="#a874a1818f5ba4817157d0b9984c48709">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::deque&lt; <a href="/docs/api/classes/llvm/mca/instruction">Instruction</a> &#42; &gt;</>}
  name={<><a href="#a8cfc9c04f70a48fff31cc9e7c83051c5">Staging</a></>}>
Instructions that are ready to be used. <a href="#a8cfc9c04f70a48fff31cc9e7c83051c5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a2d888c0488860f2071c07dcf4aad16ae">TotalCounter</a> = 0U</>}>
Current instruction index. <a href="#a2d888c0488860f2071c07dcf4aad16ae">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

An implementation of <em><a href="/docs/api/structs/llvm/mca/sourcemgr">SourceMgr</a></em> that allows users to add new instructions incrementally / dynamically.

Note that this <a href="/docs/api/structs/llvm/mca/sourcemgr">SourceMgr</a> takes ownership of all <em><a href="/docs/api/classes/llvm/mca/instruction">mca::Instruction</a></em>.

Definition at line 26 of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.

<SectionDefinition>

## Private Member Typedefs

### InstFreedCallback {#a56f6f6cee3110562acdf6b7c4302809a}

<MemberDefinition
  prototype={<>using llvm::mca::IncrementalSourceMgr::InstFreedCallback =  std::function&lt;void(Instruction &#42;)&gt;</>}>
Called when an instruction is no longer needed.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00044">44</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### IncrementalSourceMgr() {#aa90e9baa09e3b21a90ea3df2b802749e}

<MemberDefinition
  prototype="llvm::mca::IncrementalSourceMgr::IncrementalSourceMgr ()"
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00048">48</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### addInst() {#a5a79fdf47b12f2543c93039662106caf}

<MemberDefinition
  prototype={<>void llvm::mca::IncrementalSourceMgr::addInst (<a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a> &amp;&amp; Inst)</>}
  labels = {["inline"]}>
Add a new instruction.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00070">70</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### addRecycledInst() {#a3145b940234a234e7ce649909952500a}

<MemberDefinition
  prototype={<>void llvm::mca::IncrementalSourceMgr::addRecycledInst (<a href="/docs/api/classes/llvm/mca/instruction">Instruction</a> &#42; Inst)</>}
  labels = {["inline"]}>
Add a recycled instruction.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00076">76</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### clear() {#aac1bf46c1b8d46f2675e857ff328b2e1}

<MemberDefinition
  prototype="void IncrementalSourceMgr::clear ()">

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00050">50</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp/#l00022">22</a> of file <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp">IncrementalSourceMgr.cpp</a>.
</MemberDefinition>

### endOfStream() {#a95676d1de997484e03ec6f0ce79d1331}

<MemberDefinition
  prototype="void llvm::mca::IncrementalSourceMgr::endOfStream ()"
  labels = {["inline"]}>
Mark the end of instruction stream.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00081">81</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### getInstructions() {#a5bc6c0a4359b9969b36c14eb243cbfe0}

<MemberDefinition
  prototype={<>ArrayRef&lt; UniqueInst &gt; llvm::mca::IncrementalSourceMgr::getInstructions () const</>}
  labels = {["inline", "virtual"]}>
Provides a fixed range of <em><a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a></em> to iterate.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00057">57</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### hasNext() {#a7ab6fe3fb026ff48265f9836f282d5b3}

<MemberDefinition
  prototype="bool llvm::mca::IncrementalSourceMgr::hasNext () const"
  labels = {["inline", "virtual"]}>
Whether there is any <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em> to inspect / peek next.

Note that returning false from this doesn&#39;t mean the instruction stream has ended.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00061">61</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### isEnd() {#a4ba19dadd2449aab5779bf9677d35604}

<MemberDefinition
  prototype="bool llvm::mca::IncrementalSourceMgr::isEnd () const"
  labels = {["inline", "virtual"]}>
Whether the instruction stream has eneded.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00062">62</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### peekNext() {#a6c1ccc01d5bce4605ec868529a91bc5f}

<MemberDefinition
  prototype="SourceRef llvm::mca::IncrementalSourceMgr::peekNext () const"
  labels = {["inline", "virtual"]}>
The next <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00064">64</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### printStatistic() {#a55086232b62ba76e882e380ca1e4576a}

<MemberDefinition
  prototype={<>void IncrementalSourceMgr::printStatistic (<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp; OS)</>}>
Print statistic about instruction recycling stats.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00085">85</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp/#l00040">40</a> of file <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp">IncrementalSourceMgr.cpp</a>.
</MemberDefinition>

### setOnInstFreedCallback() {#a0f4a2d708bc5d5a3f9c139948ae3c2e2}

<MemberDefinition
  prototype="void llvm::mca::IncrementalSourceMgr::setOnInstFreedCallback (InstFreedCallback CB)"
  labels = {["inline"]}>
Set a callback that is invoked when a <a href="/docs/api/classes/llvm/mca/instruction">mca::Instruction</a> is no longer needed.

This is usually used for recycling the instruction.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00055">55</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### updateNext() {#ae7e7a65dca58ec0969862ae9fe6ba64e}

<MemberDefinition
  prototype="void IncrementalSourceMgr::updateNext ()"
  labels = {["virtual"]}>
Advance to the next <em><a href="/docs/api/namespaces/llvm/mca/#a6194ec8d4ff9d0552963291008b31ee7">SourceRef</a></em>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00078">78</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp/#l00029">29</a> of file <a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp">IncrementalSourceMgr.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### EOS {#a2444704e623564b0785065d57ef0e4db}

<MemberDefinition
  prototype="bool llvm::mca::IncrementalSourceMgr::EOS = false">
End-of-stream flag.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00041">41</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### InstFreedCB {#abbcd36a4378ebe614b46a1a4ec91943a}

<MemberDefinition
  prototype="InstFreedCallback llvm::mca::IncrementalSourceMgr::InstFreedCB">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00045">45</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### InstStorage {#a874a1818f5ba4817157d0b9984c48709}

<MemberDefinition
  prototype={<>std::deque&lt;UniqueInst&gt; llvm::mca::IncrementalSourceMgr::InstStorage</>}>
Owner of all <a href="/docs/api/classes/llvm/mca/instruction">mca::Instruction</a> instances.

Note that we use std::deque here to have a better throughput, in comparison to std::vector or <a href="/docs/api/classes/llvm/smallvector">llvm::SmallVector</a>, as they usually pay a higher re-allocation cost when there is a large number of instructions.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00031">31</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### Staging {#a8cfc9c04f70a48fff31cc9e7c83051c5}

<MemberDefinition
  prototype={<>std::deque&lt;Instruction &#42;&gt; llvm::mca::IncrementalSourceMgr::Staging</>}>
Instructions that are ready to be used.

Each of them is a pointer of an <em><a href="/docs/api/structs/llvm/mca/sourcemgr/#ac81a93288d7e85027cbd1ec07d5d8432">UniqueInst</a></em> inside InstStorage.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00035">35</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

### TotalCounter {#a2d888c0488860f2071c07dcf4aad16ae}

<MemberDefinition
  prototype="unsigned llvm::mca::IncrementalSourceMgr::TotalCounter = 0U">
Current instruction index.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h/#l00038">38</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/mca/incrementalsourcemgr-h">IncrementalSourceMgr.h</a></li>
<li><a href="/docs/api/files/lib/lib/mca/incrementalsourcemgr-cpp">IncrementalSourceMgr.cpp</a></li>
</ul>

</DoxygenPage>
