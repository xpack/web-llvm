---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/machineoptimizationremarkemitter
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MachineOptimizationRemarkEmitter` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

The optimization diagnostic interface. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::MachineOptimizationRemarkEmitter</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/MachineOptimizationRemarkEmitter.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h"
  isLocal="true" />
</IncludesList>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#aade146f3320cbbdbe3ae7685946fdb1d">MachineOptimizationRemarkEmitter</a> (MachineFunction &amp;MF, MachineBlockFrequencyInfo &#42;MBFI)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#ae5b08634fb986e7b20b72986961f7f08">MachineOptimizationRemarkEmitter</a> (MachineOptimizationRemarkEmitter &amp;&amp;)=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6a43a7e6e9af2d21b402eb6a76b25799">allowExtraAnalysis</a> (StringRef PassName) const</>}>
Whether we allow for extra compile-time budget to perform more analysis to be more informative. <a href="#a6a43a7e6e9af2d21b402eb6a76b25799">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a22cabb597d4f9e140fa9184491f7a33f">emit</a> (DiagnosticInfoOptimizationBase &amp;OptDiag)</>}>
Emit an optimization remark. <a href="#a22cabb597d4f9e140fa9184491f7a33f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  template={<>template &lt;typename T&gt;</>}
  type="void"
  name={<><a href="#a5bf90a559dddc169bb7546f9f51105a3">emit</a> (T RemarkBuilder, decltype(RemarkBuilder()) &#42;=nullptr)</>}>
Take a lambda that returns a remark which will be emitted. <a href="#a5bf90a559dddc169bb7546f9f51105a3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a> &#42;</>}
  name={<><a href="#ac40291891b8a51589bf9c843f89e7fa0">getBFI</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad0e3e5abe47d2f27021bed7885f66623">invalidate</a> (MachineFunction &amp;MF, const PreservedAnalyses &amp;PA, MachineFunctionAnalysisManager::Invalidator &amp;Inv)</>}>
Handle invalidation events in the new pass manager. <a href="#ad0e3e5abe47d2f27021bed7885f66623">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<>std::optional&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a29ea6cd75f2f8475204b89269cef769c">computeHotness</a> (const MachineBasicBlock &amp;MBB)</>}>
Compute hotness from IR value (currently assumed to be a block) if PGO is available. <a href="#a29ea6cd75f2f8475204b89269cef769c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#adff969811a23eb2bf58c456f903be7b9">computeHotness</a> (DiagnosticInfoMIROptimization &amp;Remark)</>}>
Similar but use value from <code>OptDiag</code> and update hotness there. <a href="#adff969811a23eb2bf58c456f903be7b9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a755ce4ade503f7ae2af94c00894587e6">shouldEmitVerbose</a> ()</>}>
Only allow verbose messages if we know we&#39;re filtering by hotness (BFI is only set in this case). <a href="#a755ce4ade503f7ae2af94c00894587e6">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a> &#42;</>}
  name={<><a href="#afe55b1bc48535172e2bc27ceb6aa35e4">MBFI</a></>}>
MBFI is only set if hotness is requested. <a href="#afe55b1bc48535172e2bc27ceb6aa35e4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;</>}
  name={<><a href="#a3a15c65a015d77927c1b79b14e28c015">MF</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

The optimization diagnostic interface.

It allows reporting when optimizations are performed and when they are not along with the reasons for it. Hotness information of the corresponding code region can be included in the remark if DiagnosticsHotnessRequested is enabled in the LLVM context.

Definition at line 153 of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.

<SectionDefinition>

## Public Constructors

### MachineOptimizationRemarkEmitter() {#aade146f3320cbbdbe3ae7685946fdb1d}

<MemberDefinition
  prototype={<>llvm::MachineOptimizationRemarkEmitter::MachineOptimizationRemarkEmitter (<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF, <a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a> &#42; MBFI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00155">155</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

### MachineOptimizationRemarkEmitter() {#ae5b08634fb986e7b20b72986961f7f08}

<MemberDefinition
  prototype={<>llvm::MachineOptimizationRemarkEmitter::MachineOptimizationRemarkEmitter (<a href="/docs/api/classes/llvm/machineoptimizationremarkemitter">MachineOptimizationRemarkEmitter</a> &amp;&amp;)</>}
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00159">159</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### allowExtraAnalysis() {#a6a43a7e6e9af2d21b402eb6a76b25799}

<MemberDefinition
  prototype={<>bool llvm::MachineOptimizationRemarkEmitter::allowExtraAnalysis (<a href="/docs/api/classes/llvm/stringref">StringRef</a> PassName) const</>}
  labels = {["inline"]}>
Whether we allow for extra compile-time budget to perform more analysis to be more informative.

This is useful to enable additional missed optimizations to be reported that are normally too noisy. In this mode, we can use the extra analysis (1) to filter trivial false positives or (2) to provide more context so that non-trivial false positives can be quickly detected by the user.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00176">176</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

### emit() {#a22cabb597d4f9e140fa9184491f7a33f}

<MemberDefinition
  prototype={<>void MachineOptimizationRemarkEmitter::emit (<a href="/docs/api/classes/llvm/diagnosticinfooptimizationbase">DiagnosticInfoOptimizationBase</a> &amp; OptDiag)</>}>
Emit an optimization remark.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00167">167</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp/#l00057">57</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp">MachineOptimizationRemarkEmitter.cpp</a>.
</MemberDefinition>

### emit() {#a5bf90a559dddc169bb7546f9f51105a3}

<MemberDefinition
  template={<>template &lt;typename T&gt;</>}
  prototype={<>void llvm::MachineOptimizationRemarkEmitter::emit (T RemarkBuilder, decltype(RemarkBuilder()) &#42;)</>}
  labels = {["inline"]}>
Take a lambda that returns a remark which will be emitted.

Second argument is only used to restrict this to functions.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00186">186</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

### getBFI() {#ac40291891b8a51589bf9c843f89e7fa0}

<MemberDefinition
  prototype={<>MachineBlockFrequencyInfo &#42; llvm::MachineOptimizationRemarkEmitter::getBFI ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00201">201</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

### invalidate() {#ad0e3e5abe47d2f27021bed7885f66623}

<MemberDefinition
  prototype={<>bool MachineOptimizationRemarkEmitter::invalidate (<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> &amp; PA, MachineFunctionAnalysisManager::Invalidator &amp; Inv)</>}>
Handle invalidation events in the new pass manager.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00163">163</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp/#l00034">34</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp">MachineOptimizationRemarkEmitter.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### computeHotness() {#a29ea6cd75f2f8475204b89269cef769c}

<MemberDefinition
  prototype={<>std::optional&lt; uint64&#95;t &gt; MachineOptimizationRemarkEmitter::computeHotness (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp; MBB)</>}>
Compute hotness from IR value (currently assumed to be a block) if PGO is available.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00213">213</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp/#l00043">43</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp">MachineOptimizationRemarkEmitter.cpp</a>.
</MemberDefinition>

### computeHotness() {#adff969811a23eb2bf58c456f903be7b9}

<MemberDefinition
  prototype={<>void MachineOptimizationRemarkEmitter::computeHotness (<a href="/docs/api/classes/llvm/diagnosticinfomiroptimization">DiagnosticInfoMIROptimization</a> &amp; Remark)</>}>
Similar but use value from <code>OptDiag</code> and update hotness there.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00216">216</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp/#l00050">50</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp">MachineOptimizationRemarkEmitter.cpp</a>.
</MemberDefinition>

### shouldEmitVerbose() {#a755ce4ade503f7ae2af94c00894587e6}

<MemberDefinition
  prototype="bool llvm::MachineOptimizationRemarkEmitter::shouldEmitVerbose ()"
  labels = {["inline"]}>
Only allow verbose messages if we know we&#39;re filtering by hotness (BFI is only set in this case).

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00220">220</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### MBFI {#afe55b1bc48535172e2bc27ceb6aa35e4}

<MemberDefinition
  prototype={<>MachineBlockFrequencyInfo&#42; llvm::MachineOptimizationRemarkEmitter::MBFI</>}>
MBFI is only set if hotness is requested.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00209">209</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

### MF {#a3a15c65a015d77927c1b79b14e28c015}

<MemberDefinition
  prototype={<>MachineFunction&amp; llvm::MachineOptimizationRemarkEmitter::MF</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h/#l00206">206</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">MachineOptimizationRemarkEmitter.h</a></li>
<li><a href="/docs/api/files/lib/lib/codegen/machineoptimizationremarkemitter-cpp">MachineOptimizationRemarkEmitter.cpp</a></li>
</ul>

</DoxygenPage>
