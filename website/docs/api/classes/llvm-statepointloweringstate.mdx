---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/statepointloweringstate
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `StatepointLoweringState` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

This class tracks both per-statepoint and per-selectiondag information. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::StatepointLoweringState</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="CodeGen/SelectionDAG/StatepointLowering.h"
  permalink="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h"
  isLocal="true" />
</IncludesList>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ad3c0b60902d9e4efd8a83fd806c1bb5e">StatepointLoweringState</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a4841be2489ba10321338a1874b53f249">allocateStackSlot</a> (EVT ValueType, SelectionDAGBuilder &amp;Builder)</>}>
Get a stack slot we can use to store an value of type <a href="/docs/api/namespaces/llvm/#ad18871060ac1b051c7322cc6ad71e11c">ValueType</a>. <a href="#a4841be2489ba10321338a1874b53f249">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a2651c31aeb22030422cc4e9ef6c21e22">clear</a> ()</>}>
Clear the memory usage of this object. <a href="#a2651c31aeb22030422cc4e9ef6c21e22">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a2e2d4007205a6b163daaf00e3aba04bd">getLocation</a> (SDValue Val)</>}>
Returns the spill location of a value incoming to the current statepoint. <a href="#a2e2d4007205a6b163daaf00e3aba04bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a6cdb26e5268cc05eb7f9726a140f1ae2">isStackSlotAllocated</a> (int Offset)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#adc17801011bc699f45494d07c83a2ddd">relocCallVisited</a> (const GCRelocateInst &amp;RelocCall)</>}>
Remove this gc&#95;relocate from the list we&#39;re expecting to see before the next statepoint. <a href="#adc17801011bc699f45494d07c83a2ddd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af93bbb466651e3e6abdf9e35c0a34b30">reserveStackSlot</a> (int Offset)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a619173b034be1462e5179788c6656c0e">scheduleRelocCall</a> (const GCRelocateInst &amp;RelocCall)</>}>
<a href="/docs/api/classes/llvm/record">Record</a> the fact that we expect to encounter a given gc&#95;relocate before the next statepoint. <a href="#a619173b034be1462e5179788c6656c0e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a83f9edf0427d9c6d437318242326e331">setLocation</a> (SDValue Val, SDValue Location)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aeb4b5a7ad5a49f17f8a34890eb6efefe">startNewStatepoint</a> (SelectionDAGBuilder &amp;Builder)</>}>
Reset all state tracking for a newly encountered safepoint. <a href="#aeb4b5a7ad5a49f17f8a34890eb6efefe">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallbitvector">SmallBitVector</a></>}
  name={<><a href="#adca0c79e524599f46eab04985c5b7d4b">AllocatedStackSlots</a></>}>
A boolean indicator for each slot listed in the FunctionInfo as to whether it has been used in the current statepoint. <a href="#adca0c79e524599f46eab04985c5b7d4b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/sdvalue">SDValue</a>, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> &gt;</>}
  name={<><a href="#a97d73a8a957ed8696abd0efb0577e8a0">Locations</a></>}>
Maps pre-relocation value (gc pointer directly incoming into statepoint) into it&#39;s location (currently only stack slots) <a href="#a97d73a8a957ed8696abd0efb0577e8a0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a9a47c85c320f0cccd6a55df9be2a4073">NextSlotToAllocate</a> = 0</>}>
Points just beyond the last slot known to have been allocated. <a href="#a9a47c85c320f0cccd6a55df9be2a4073">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcrelocateinst">GCRelocateInst</a> &#42;, 10 &gt;</>}
  name={<><a href="#a30715955ec04d3c70b96ec7298e28e79">PendingGCRelocateCalls</a></>}>
Keep track of pending gcrelocate calls for consistency check. <a href="#a30715955ec04d3c70b96ec7298e28e79">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This class tracks both per-statepoint and per-selectiondag information.

For each statepoint it tracks locations of it&#39;s gc valuess (incoming and relocated) and list of gcreloc calls scheduled for visiting (this is used for a debug mode consistency check only). The spill slot tracking works in concert with information in <a href="/docs/api/classes/llvm/functionloweringinfo">FunctionLoweringInfo</a>.

Definition at line 33 of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.

<SectionDefinition>

## Public Constructors

### StatepointLoweringState() {#ad3c0b60902d9e4efd8a83fd806c1bb5e}

<MemberDefinition
  prototype="llvm::StatepointLoweringState::StatepointLoweringState ()"
  labels = {["default"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00035">35</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### allocateStackSlot() {#a4841be2489ba10321338a1874b53f249}

<MemberDefinition
  prototype={<>SDValue StatepointLoweringState::allocateStackSlot (<a href="/docs/api/structs/llvm/evt">EVT</a> ValueType, <a href="/docs/api/classes/llvm/selectiondagbuilder">SelectionDAGBuilder</a> &amp; Builder)</>}>
Get a stack slot we can use to store an value of type <a href="/docs/api/namespaces/llvm/#ad18871060ac1b051c7322cc6ad71e11c">ValueType</a>.

This will hopefully be a recylced slot from another statepoint.

Declaration at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00090">90</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp/#l00107">107</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp">StatepointLowering.cpp</a>.
</MemberDefinition>

### clear() {#a2651c31aeb22030422cc4e9ef6c21e22}

<MemberDefinition
  prototype="void StatepointLoweringState::clear ()">
Clear the memory usage of this object.

This is called from <a href="/docs/api/classes/llvm/selectiondagbuilder/#a2c224fcb5175ab1e842dd2a1371eb3d8">SelectionDAGBuilder::clear</a>. We require this is never called in the midst of processing a statepoint sequence.

Declaration at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00044">44</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp/#l00099">99</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp">StatepointLowering.cpp</a>.
</MemberDefinition>

### getLocation() {#a2e2d4007205a6b163daaf00e3aba04bd}

<MemberDefinition
  prototype={<>SDValue llvm::StatepointLoweringState::getLocation (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Val)</>}
  labels = {["inline"]}>
Returns the spill location of a value incoming to the current statepoint.

Will return <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue()</a> if this value hasn&#39;t been spilled. Otherwise, the value has already been spilled and no further action is required by the caller.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00050">50</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### isStackSlotAllocated() {#a6cdb26e5268cc05eb7f9726a140f1ae2}

<MemberDefinition
  prototype="bool llvm::StatepointLoweringState::isStackSlotAllocated (int Offset)"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00100">100</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### relocCallVisited() {#adc17801011bc699f45494d07c83a2ddd}

<MemberDefinition
  prototype={<>void llvm::StatepointLoweringState::relocCallVisited (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcrelocateinst">GCRelocateInst</a> &amp; RelocCall)</>}
  labels = {["inline"]}>
Remove this gc&#95;relocate from the list we&#39;re expecting to see before the next statepoint.

If we weren&#39;t expecting to see it, we&#39;ll report an assertion.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00075">75</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### reserveStackSlot() {#af93bbb466651e3e6abdf9e35c0a34b30}

<MemberDefinition
  prototype="void llvm::StatepointLoweringState::reserveStackSlot (int Offset)"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00092">92</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### scheduleRelocCall() {#a619173b034be1462e5179788c6656c0e}

<MemberDefinition
  prototype={<>void llvm::StatepointLoweringState::scheduleRelocCall (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcrelocateinst">GCRelocateInst</a> &amp; RelocCall)</>}
  labels = {["inline"]}>
<a href="/docs/api/classes/llvm/record">Record</a> the fact that we expect to encounter a given gc&#95;relocate before the next statepoint.

If we don&#39;t see it, we&#39;ll report an assertion.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00066">66</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### setLocation() {#a83f9edf0427d9c6d437318242326e331}

<MemberDefinition
  prototype={<>void llvm::StatepointLoweringState::setLocation (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Val, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Location)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00057">57</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### startNewStatepoint() {#aeb4b5a7ad5a49f17f8a34890eb6efefe}

<MemberDefinition
  prototype={<>void StatepointLoweringState::startNewStatepoint (<a href="/docs/api/classes/llvm/selectiondagbuilder">SelectionDAGBuilder</a> &amp; Builder)</>}>
Reset all state tracking for a newly encountered safepoint.

Also performs some consistency checking.

Declaration at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00039">39</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>, definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp/#l00086">86</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp">StatepointLowering.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AllocatedStackSlots {#adca0c79e524599f46eab04985c5b7d4b}

<MemberDefinition
  prototype="SmallBitVector llvm::StatepointLoweringState::AllocatedStackSlots">
A boolean indicator for each slot listed in the FunctionInfo as to whether it has been used in the current statepoint.

Since we try to preserve stack slots across safepoints, there can be gaps in which slots have been allocated.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00115">115</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### Locations {#a97d73a8a957ed8696abd0efb0577e8a0}

<MemberDefinition
  prototype={<>DenseMap&lt;SDValue, SDValue&gt; llvm::StatepointLoweringState::Locations</>}>
Maps pre-relocation value (gc pointer directly incoming into statepoint) into it&#39;s location (currently only stack slots)

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00109">109</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### NextSlotToAllocate {#a9a47c85c320f0cccd6a55df9be2a4073}

<MemberDefinition
  prototype="unsigned llvm::StatepointLoweringState::NextSlotToAllocate = 0">
Points just beyond the last slot known to have been allocated.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00118">118</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

### PendingGCRelocateCalls {#a30715955ec04d3c70b96ec7298e28e79}

<MemberDefinition
  prototype={<>SmallVector&lt;const GCRelocateInst &#42;, 10&gt; llvm::StatepointLoweringState::PendingGCRelocateCalls</>}>
Keep track of pending gcrelocate calls for consistency check.

Definition at line <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h/#l00121">121</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-cpp">StatepointLowering.cpp</a></li>
<li><a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/statepointlowering-h">StatepointLowering.h</a></li>
</ul>

</DoxygenPage>
