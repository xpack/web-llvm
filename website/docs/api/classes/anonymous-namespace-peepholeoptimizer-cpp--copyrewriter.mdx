---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-peepholeoptimizer-cpp-/copyrewriter
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CopyRewriter` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

<a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/rewriter">Rewriter</a> for COPY instructions. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{PeepholeOptimizer.cpp}::CopyRewriter</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/rewriter">Rewriter</a></>}>
Interface to query instructions amenable to copy rewriting. <a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/rewriter/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#aad38fdd50746fc9bc7e8f08e886415d5">CopyRewriter</a> (MachineInstr &amp;MI)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a1010de8183acda10ae33d13c5168dd19">~CopyRewriter</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#af6a7bff7d1f79439d9cef76fd17c6688">getNextRewritableSource</a> (RegSubRegPair &amp;Src, RegSubRegPair &amp;Dst) override</>}>
Get the next rewritable source (SrcReg, SrcSubReg) and the related value that it affects (DstReg, DstSubReg). <a href="#af6a7bff7d1f79439d9cef76fd17c6688">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a50cda2940b3e3a92753c912202296de4">RewriteCurrentSource</a> (Register NewReg, unsigned NewSubReg) override</>}>
Rewrite the current source with <code>NewReg</code> and <code>NewSubReg</code> if possible. <a href="#a50cda2940b3e3a92753c912202296de4">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

<a href="/docs/api/classes/anonymous-namespace-peepholeoptimizer-cpp-/rewriter">Rewriter</a> for COPY instructions.

Definition at line 195 of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.

<SectionDefinition>

## Public Constructors

### CopyRewriter() {#aad38fdd50746fc9bc7e8f08e886415d5}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::CopyRewriter::CopyRewriter (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00197">197</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~CopyRewriter() {#a1010de8183acda10ae33d13c5168dd19}

<MemberDefinition
  prototype={<>virtual anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::CopyRewriter::~CopyRewriter ()</>}
  labels = {["virtual", "default"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00200">200</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### getNextRewritableSource() {#af6a7bff7d1f79439d9cef76fd17c6688}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::CopyRewriter::getNextRewritableSource (<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a16005492b382a6a76abae848b4af2b83">RegSubRegPair</a> &amp; Src, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a16005492b382a6a76abae848b4af2b83">RegSubRegPair</a> &amp; Dst)</>}
  labels = {["inline", "virtual"]}>
Get the next rewritable source (SrcReg, SrcSubReg) and the related value that it affects (DstReg, DstSubReg).

A source is considered rewritable if its register class and the register class of the related DstReg may not be register coalescer friendly. In other words, given a copy-like instruction not all the arguments may be returned at rewritable source, since some arguments are none to be register coalescer friendly.

Each call of this method moves the current source to the next rewritable source. For instance, let CopyLike be the instruction to rewrite. CopyLike has one definition and one source: dst.dstSubIdx = CopyLike src.srcSubIdx.

The first call will give the first rewritable source, i.e., the only source this instruction has: (SrcReg, SrcSubReg) = (src, srcSubIdx). This source defines the whole definition, i.e., (DstReg, DstSubReg) = (dst, dstSubIdx).

The second and subsequent calls will return false, as there is only one rewritable source.


<SectionUser title="Returns">
True if a rewritable source has been found, false otherwise. The output arguments are valid if and only if true is returned.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00202">202</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

### RewriteCurrentSource() {#a50cda2940b3e3a92753c912202296de4}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;PeepholeOptimizer.cpp&#125;::CopyRewriter::RewriteCurrentSource (<a href="/docs/api/classes/llvm/register">Register</a> NewReg, unsigned NewSubReg)</>}
  labels = {["inline", "virtual"]}>
Rewrite the current source with <code>NewReg</code> and <code>NewSubReg</code> if possible.

<SectionUser title="Returns">
True if the rewriting was possible, false otherwise.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp/#l00219">219</a> of file <a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/peepholeoptimizer-cpp">PeepholeOptimizer.cpp</a></li>
</ul>

</DoxygenPage>
