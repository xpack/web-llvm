---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-looprotationutils-cpp-/looprotate
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `LoopRotate` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

A simple loop rotation transformation. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{LoopRotationUtils.cpp}::LoopRotate</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a6458617345354f31e0642b0fa1c096cf">LoopRotate</a> (unsigned MaxHeaderSize, LoopInfo &#42;LI, const TargetTransformInfo &#42;TTI, AssumptionCache &#42;AC, DominatorTree &#42;DT, ScalarEvolution &#42;SE, MemorySSAUpdater &#42;MSSAU, const SimplifyQuery &amp;SQ, bool RotationOnly, bool IsUtilMode, bool PrepareForLTO)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a11d33a961545f41b26d338ee61c8ce42">processLoop</a> (Loop &#42;L)</>}>
Rotate <code>L</code>, and return true if any modification was made. <a href="#a11d33a961545f41b26d338ee61c8ce42">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa723a0fcc42b59d1705177f6005ca2a3">rotateLoop</a> (Loop &#42;L, bool SimplifiedLatch)</>}>
Rotate loop LP. <a href="#aa723a0fcc42b59d1705177f6005ca2a3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aec33f13b1b5e13149070798324e9808c">simplifyLoopLatch</a> (Loop &#42;L)</>}>
Fold the loop tail into the loop exit by speculating the loop tail instructions. <a href="#aec33f13b1b5e13149070798324e9808c">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &#42;</>}
  name={<><a href="#a5b8849acd34c7ebeb4ee6e8aa40b9d13">AC</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42;</>}
  name={<><a href="#a2fc209a94025899c2da2d8a31b453631">DT</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a140e752b822c6efdf601ca5a97f99531">IsUtilMode</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &#42;</>}
  name={<><a href="#a383e72558f9456d19a63918ff3b37566">LI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#ac8c07984426d67ba6330a8c08699f292">MaxHeaderSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/memoryssaupdater">MemorySSAUpdater</a> &#42;</>}
  name={<><a href="#afeee03f3d1ed9f15aea2806dcb300071">MSSAU</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a199f5d8763cf2c35a07715f143e3ad0c">PrepareForLTO</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#adae8846456f89615a4b4e1ff84321457">RotationOnly</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scalarevolution">ScalarEvolution</a> &#42;</>}
  name={<><a href="#a3c8d2b4849529f697263a4f585a3fdd5">SE</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/simplifyquery">SimplifyQuery</a> &amp;</>}
  name={<><a href="#a1f360ffca892fda6645fcf0aff4dd37a">SQ</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &#42;</>}
  name={<><a href="#a41a9dd31393e46a31a550498d064d19b">TTI</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A simple loop rotation transformation.

Definition at line 60 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.

<SectionDefinition>

## Public Constructors

### LoopRotate() {#a6458617345354f31e0642b0fa1c096cf}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::LoopRotate (unsigned MaxHeaderSize, <a href="/docs/api/classes/llvm/loopinfo">LoopInfo</a> &#42; LI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targettransforminfo">TargetTransformInfo</a> &#42; TTI, <a href="/docs/api/classes/llvm/assumptioncache">AssumptionCache</a> &#42; AC, <a href="/docs/api/classes/llvm/dominatortree">DominatorTree</a> &#42; DT, <a href="/docs/api/classes/llvm/scalarevolution">ScalarEvolution</a> &#42; SE, <a href="/docs/api/classes/llvm/memoryssaupdater">MemorySSAUpdater</a> &#42; MSSAU, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/simplifyquery">SimplifyQuery</a> &amp; SQ, bool RotationOnly, bool IsUtilMode, bool PrepareForLTO)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00074">74</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### processLoop() {#a11d33a961545f41b26d338ee61c8ce42}

<MemberDefinition
  prototype={<>bool LoopRotate::processLoop (<a href="/docs/api/classes/llvm/loop">Loop</a> &#42; L)</>}>
Rotate <code>L</code>, and return true if any modification was made.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00082">82</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### rotateLoop() {#aa723a0fcc42b59d1705177f6005ca2a3}

<MemberDefinition
  prototype={<>bool LoopRotate::rotateLoop (<a href="/docs/api/classes/llvm/loop">Loop</a> &#42; L, bool SimplifiedLatch)</>}>
Rotate loop LP.

Return true if the loop is rotated.


<ParametersList title="Parameters">
<ParametersListItem name="SimplifiedLatch">is true if the latch was just folded into the final loop exit. In this case we may want to rotate even though the new latch is now an exiting branch. This rotation would have happened had the latch not been simplified. However, if SimplifiedLatch is false, then we avoid rotating loops in which the latch exits to avoid excessive or endless rotation. <a href="/docs/api/classes/anonymous-namespace-looprotationutils-cpp-/looprotate">LoopRotate</a> should be repeatable and converge to a canonical form. This property is satisfied because simplifying the loop latch can only happen once across multiple invocations of the <a href="/docs/api/classes/anonymous-namespace-looprotationutils-cpp-/looprotate">LoopRotate</a> pass.</ParametersListItem>
</ParametersList>
If -loop-rotate-multi is enabled we can do multiple rotations in one go so to reach a suitable (non-deoptimizing) exit.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00085">85</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### simplifyLoopLatch() {#aec33f13b1b5e13149070798324e9808c}

<MemberDefinition
  prototype={<>bool LoopRotate::simplifyLoopLatch (<a href="/docs/api/classes/llvm/loop">Loop</a> &#42; L)</>}>
Fold the loop tail into the loop exit by speculating the loop tail instructions.

Typically, this is a single post-increment. In the case of a simple 2-block loop, hoisting the increment can be much better than duplicating the entire loop header. In the case of loops with early exits, rotation will not work anyway, but simplifyLoopLatch will put the loop in canonical form so downstream passes can handle it.

I don&#39;t believe this invalidates <a href="/docs/api/classes/llvm/scev">SCEV</a>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00086">86</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### AC {#a5b8849acd34c7ebeb4ee6e8aa40b9d13}

<MemberDefinition
  prototype={<>AssumptionCache&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::AC</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00064">64</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### DT {#a2fc209a94025899c2da2d8a31b453631}

<MemberDefinition
  prototype={<>DominatorTree&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::DT</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00065">65</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### IsUtilMode {#a140e752b822c6efdf601ca5a97f99531}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::IsUtilMode</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00070">70</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### LI {#a383e72558f9456d19a63918ff3b37566}

<MemberDefinition
  prototype={<>LoopInfo&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::LI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00062">62</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### MaxHeaderSize {#ac8c07984426d67ba6330a8c08699f292}

<MemberDefinition
  prototype={<>const unsigned anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::MaxHeaderSize</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00061">61</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### MSSAU {#afeee03f3d1ed9f15aea2806dcb300071}

<MemberDefinition
  prototype={<>MemorySSAUpdater&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::MSSAU</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00067">67</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### PrepareForLTO {#a199f5d8763cf2c35a07715f143e3ad0c}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::PrepareForLTO</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00071">71</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### RotationOnly {#adae8846456f89615a4b4e1ff84321457}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::RotationOnly</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00069">69</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### SE {#a3c8d2b4849529f697263a4f585a3fdd5}

<MemberDefinition
  prototype={<>ScalarEvolution&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::SE</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00066">66</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### SQ {#a1f360ffca892fda6645fcf0aff4dd37a}

<MemberDefinition
  prototype={<>const SimplifyQuery&amp; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::SQ</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00068">68</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

### TTI {#a41a9dd31393e46a31a550498d064d19b}

<MemberDefinition
  prototype={<>const TargetTransformInfo&#42; anonymous&#95;namespace&#123;LoopRotationUtils.cpp&#125;::LoopRotate::TTI</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp/#l00063">63</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/looprotationutils-cpp">LoopRotationUtils.cpp</a></li>
</ul>

</DoxygenPage>
