---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/loadandstorepromoter
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `LoadAndStorePromoter` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Helper class for promoting a collection of loads and stores into SSA Form using the <a href="/docs/api/classes/llvm/ssaupdater">SSAUpdater</a>. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::LoadAndStorePromoter</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Utils/SSAUpdater.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h"
  isLocal="true" />
</IncludesList>

## Derived Classes

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/basicloadandstorepromoter">BasicLoadAndStorePromoter</a></>}>
A basic LoadAndStorePromoter that does not remove store nodes. <a href="/docs/api/classes/basicloadandstorepromoter/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-instrprofiling-cpp-/pgocounterpromoterhelper">PGOCounterPromoterHelper</a></>}>
A helper class to promote one counter RMW operation in the loop into register update. <a href="/docs/api/classes/anonymous-namespace-instrprofiling-cpp-/pgocounterpromoterhelper/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-licm-cpp-/looppromoter">LoopPromoter</a></>}>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a5a4040326a09f994f2b5481cf5c8da82">LoadAndStorePromoter</a> (ArrayRef&lt; const Instruction &#42; &gt; Insts, SSAUpdater &amp;S, StringRef Name=StringRef())</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#acd2784430c58fb232b79f7d2db18beaf">~LoadAndStorePromoter</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a0559a676152aa1421ed8ff6a4dfde66b">doExtraRewritesBeforeFinalDeletion</a> ()</>}>
This hook is invoked after all the stores are found and inserted as available values. <a href="#a0559a676152aa1421ed8ff6a4dfde66b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/value">Value</a> &#42;</>}
  name={<><a href="#a00281405f1913aecc88b8aee6b79205b">getValueToUseForAlloca</a> (Instruction &#42;AI) const</>}>
Return the value to use for the point in the code that the alloca is positioned. <a href="#a00281405f1913aecc88b8aee6b79205b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a012fcb5ec538c2210ad15e8afcf061ed">instructionDeleted</a> (Instruction &#42;I) const</>}>
Called before each instruction is deleted. <a href="#a012fcb5ec538c2210ad15e8afcf061ed">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a8323f250fbb2b45a78080ae308a15977">replaceLoadWithValue</a> (LoadInst &#42;LI, Value &#42;V) const</>}>
Clients can choose to implement this to get notified right before a load is RAUW&#39;d another value. <a href="#a8323f250fbb2b45a78080ae308a15977">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ac1da68baf80229b2d8af34499eb1c73f">run</a> (const SmallVectorImpl&lt; Instruction &#42; &gt; &amp;Insts)</>}>
This does the promotion. <a href="#ac1da68baf80229b2d8af34499eb1c73f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aee1b74c8b9813e189733f6c5a63495e6">shouldDelete</a> (Instruction &#42;I) const</>}>
Return false if a sub-class wants to keep one of the loads/stores after the SSA construction. <a href="#aee1b74c8b9813e189733f6c5a63495e6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aded1d51669c3499f8333ad933f68ec23">updateDebugInfo</a> (Instruction &#42;I) const</>}>
Called to update debug info associated with the instruction. <a href="#aded1d51669c3499f8333ad933f68ec23">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/ssaupdater">SSAUpdater</a> &amp;</>}
  name={<><a href="#adbfdd1721b153d96672de12d3ec06637">SSA</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Helper class for promoting a collection of loads and stores into SSA Form using the <a href="/docs/api/classes/llvm/ssaupdater">SSAUpdater</a>.

This handles complexities that <a href="/docs/api/classes/llvm/ssaupdater">SSAUpdater</a> doesn&#39;t, such as multiple loads and stores in one block.

Clients of this class are expected to subclass this and implement the virtual methods.

Definition at line 151 of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.

<SectionDefinition>

## Public Constructors

### LoadAndStorePromoter() {#a5a4040326a09f994f2b5481cf5c8da82}

<MemberDefinition
  prototype={<>LoadAndStorePromoter::LoadAndStorePromoter (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; Insts, <a href="/docs/api/classes/llvm/ssaupdater">SSAUpdater</a> &amp; S, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Name=<a href="/docs/api/classes/llvm/stringref">StringRef</a>())</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00156">156</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/ssaupdater-cpp/#l00371">371</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/ssaupdater-cpp">SSAUpdater.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~LoadAndStorePromoter() {#acd2784430c58fb232b79f7d2db18beaf}

<MemberDefinition
  prototype="virtual llvm::LoadAndStorePromoter::~LoadAndStorePromoter ()"
  labels = {["virtual", "default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00158">158</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### doExtraRewritesBeforeFinalDeletion() {#a0559a676152aa1421ed8ff6a4dfde66b}

<MemberDefinition
  prototype="virtual void llvm::LoadAndStorePromoter::doExtraRewritesBeforeFinalDeletion ()"
  labels = {["inline", "virtual"]}>
This hook is invoked after all the stores are found and inserted as available values.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00169">169</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

### getValueToUseForAlloca() {#a00281405f1913aecc88b8aee6b79205b}

<MemberDefinition
  prototype={<>virtual Value &#42; llvm::LoadAndStorePromoter::getValueToUseForAlloca (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; AI) const</>}
  labels = {["inline", "virtual"]}>
Return the value to use for the point in the code that the alloca is positioned.

This will only be used if an Alloca is included in Insts, otherwise the value of a uninitialized load will be assumed to be poison.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00188">188</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

### instructionDeleted() {#a012fcb5ec538c2210ad15e8afcf061ed}

<MemberDefinition
  prototype={<>virtual void llvm::LoadAndStorePromoter::instructionDeleted (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I) const</>}
  labels = {["inline", "virtual"]}>
Called before each instruction is deleted.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00176">176</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

### replaceLoadWithValue() {#a8323f250fbb2b45a78080ae308a15977}

<MemberDefinition
  prototype={<>virtual void llvm::LoadAndStorePromoter::replaceLoadWithValue (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42; LI, <a href="/docs/api/classes/llvm/value">Value</a> &#42; V) const</>}
  labels = {["inline", "virtual"]}>
Clients can choose to implement this to get notified right before a load is RAUW&#39;d another value.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00173">173</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

### run() {#ac1da68baf80229b2d8af34499eb1c73f}

<MemberDefinition
  prototype={<>void LoadAndStorePromoter::run (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; Insts)</>}>
This does the promotion.

Insts is a list of loads and stores to promote, and Name is the basename for the PHIs to insert. After this is complete, the loads and stores are removed from the code.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00165">165</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/ssaupdater-cpp/#l00386">386</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/ssaupdater-cpp">SSAUpdater.cpp</a>.
</MemberDefinition>

### shouldDelete() {#aee1b74c8b9813e189733f6c5a63495e6}

<MemberDefinition
  prototype={<>virtual bool llvm::LoadAndStorePromoter::shouldDelete (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I) const</>}
  labels = {["inline", "virtual"]}>
Return false if a sub-class wants to keep one of the loads/stores after the SSA construction.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00183">183</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

### updateDebugInfo() {#aded1d51669c3499f8333ad933f68ec23}

<MemberDefinition
  prototype={<>virtual void llvm::LoadAndStorePromoter::updateDebugInfo (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I) const</>}
  labels = {["inline", "virtual"]}>
Called to update debug info associated with the instruction.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00179">179</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### SSA {#adbfdd1721b153d96672de12d3ec06637}

<MemberDefinition
  prototype={<>SSAUpdater&amp; llvm::LoadAndStorePromoter::SSA</>}
  labels = {["protected"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h/#l00153">153</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/ssaupdater-h">SSAUpdater.h</a></li>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/ssaupdater-cpp">SSAUpdater.cpp</a></li>
</ul>

</DoxygenPage>
