---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriterbase
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `ModuleBitcodeWriterBase` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Base class to manage the module bitcode writing, currently subclassed for <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriter">ModuleBitcodeWriter</a> and <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/thinlinkbitcodewriter">ThinLinkBitcodeWriter</a>. <a href="#details">More...</a>

## Declaration

<CodeBlock>class anonymous_namespace{BitcodeWriter.cpp}::ModuleBitcodeWriterBase</CodeBlock>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/bitcodewriterbase">BitcodeWriterBase</a></>}>
Abstract class to manage the bitcode writing, subclassed for each bitcode file type. <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/bitcodewriterbase/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Derived Classes

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriter">ModuleBitcodeWriter</a></>}>
Class to manage the bitcode writing for a module. <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriter/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/thinlinkbitcodewriter">ThinLinkBitcodeWriter</a></>}>
Class to manage the bitcode writing for a thin link bitcode file. <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/thinlinkbitcodewriter/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a75538db633297fb9c0b91ea5a16c5b72">ModuleBitcodeWriterBase</a> (const Module &amp;M, StringTableBuilder &amp;StrtabBuilder, BitstreamWriter &amp;Stream, bool ShouldPreserveUseListOrder, const ModuleSummaryIndex &#42;Index)</>}>
Constructs a <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriterbase">ModuleBitcodeWriterBase</a> object for the given <a href="/docs/api/classes/llvm/module">Module</a>, writing to the provided <code>Buffer</code>. <a href="#a75538db633297fb9c0b91ea5a16c5b72">More...</a>
</MembersIndexItem>

</MembersIndex>

## Protected Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#ad8b12ebb23f57815dfdaa7a14562aa5f">writePerModuleGlobalValueSummary</a> ()</>}>
Emit the per-module summary section alongside the rest of the module&#39;s bitcode. <a href="#ad8b12ebb23f57815dfdaa7a14562aa5f">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a238937e71288a10ee4ce9cd5fecbff50">assignValueId</a> (GlobalValue::GUID ValGUID)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a763ac36f8ca200aa7aa9e4a23450d920">getValueId</a> (GlobalValue::GUID ValGUID)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aea144f2e1e59d658c6bc375c1ebb6db3">getValueId</a> (ValueInfo VI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::map&lt; <a href="/docs/api/classes/llvm/globalvalue/#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a>, unsigned &gt; &amp;</>}
  name={<><a href="#ac37ccb28c7f65a60cd8d81f613140cb3">valueIds</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a2e19c6ac1ef16447809aad3812761237">writeModuleLevelReferences</a> (const GlobalVariable &amp;V, SmallVector&lt; uint64&#95;t, 64 &gt; &amp;NameVals, unsigned FSModRefsAbbrev, unsigned FSModVTableRefsAbbrev)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af6a8decac21a63b246518180d05d1646">writePerModuleFunctionSummaryRecord</a> (SmallVector&lt; uint64&#95;t, 64 &gt; &amp;NameVals, GlobalValueSummary &#42;Summary, unsigned ValueID, unsigned FSCallsAbbrev, unsigned FSCallsProfileAbbrev, unsigned CallsiteAbbrev, unsigned AllocAbbrev, unsigned ContextIdAbbvId, const Function &amp;F, DenseMap&lt; CallStackId, LinearCallStackId &gt; &amp;CallStackPos, CallStackId &amp;CallStackCount)</>}>
</MembersIndexItem>

</MembersIndex>

## Protected Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aa0f7a3f136aadcb92281250f8f2a9b40">GlobalValueId</a></>}>
Tracks the last value id recorded in the GUIDToValueMap. <a href="#aa0f7a3f136aadcb92281250f8f2a9b40">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::map&lt; <a href="/docs/api/classes/llvm/globalvalue/#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a>, unsigned &gt;</>}
  name={<><a href="#a86e62ef5b9ef1b72a2e6547a65cf2e30">GUIDToValueIdMap</a></>}>
Map that holds the correspondence between GUIDs in the summary index, that came from indirect call profiles, and a value id generated by this class to use in the VST and summary block records. <a href="#a86e62ef5b9ef1b72a2e6547a65cf2e30">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/modulesummaryindex">ModuleSummaryIndex</a> &#42;</>}
  name={<><a href="#aa544254679c186f7ec1b8a75c13bc30a">Index</a></>}>
Optional per-module index to write for ThinLTO. <a href="#aa544254679c186f7ec1b8a75c13bc30a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/module">Module</a> &amp;</>}
  name={<><a href="#a8bef003929632eb31a4722c4dab0e372">M</a></>}>
The <a href="/docs/api/classes/llvm/module">Module</a> to write to bitcode. <a href="#a8bef003929632eb31a4722c4dab0e372">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/valueenumerator">ValueEnumerator</a></>}
  name={<><a href="#ad06babe1d15aa19778741cb5ce634dd7">VE</a></>}>
Enumerates ids for all values in the module. <a href="#ad06babe1d15aa19778741cb5ce634dd7">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a067e0380d8c4ebb24000dcb4bfe919fd">VSTOffsetPlaceholder</a> = 0</>}>
Saves the offset of the VSTOffset record that must eventually be backpatched with the offset of the actual VST. <a href="#a067e0380d8c4ebb24000dcb4bfe919fd">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Base class to manage the module bitcode writing, currently subclassed for <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriter">ModuleBitcodeWriter</a> and <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/thinlinkbitcodewriter">ThinLinkBitcodeWriter</a>.

Definition at line 166 of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.

<SectionDefinition>

## Public Constructors

### ModuleBitcodeWriterBase() {#a75538db633297fb9c0b91ea5a16c5b72}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::ModuleBitcodeWriterBase (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/stringtablebuilder">StringTableBuilder</a> &amp; StrtabBuilder, <a href="/docs/api/classes/llvm/bitstreamwriter">BitstreamWriter</a> &amp; Stream, bool ShouldPreserveUseListOrder, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/modulesummaryindex">ModuleSummaryIndex</a> &#42; Index)</>}
  labels = {["inline"]}>
Constructs a <a href="/docs/api/classes/anonymous-namespace-bitcodewriter-cpp-/modulebitcodewriterbase">ModuleBitcodeWriterBase</a> object for the given <a href="/docs/api/classes/llvm/module">Module</a>, writing to the provided <code>Buffer</code>.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00192">192</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Functions

### writePerModuleGlobalValueSummary() {#ad8b12ebb23f57815dfdaa7a14562aa5f}

<MemberDefinition
  prototype="void ModuleBitcodeWriterBase::writePerModuleGlobalValueSummary ()"
  labels = {["protected"]}>
Emit the per-module summary section alongside the rest of the module&#39;s bitcode.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00229">229</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### assignValueId() {#a238937e71288a10ee4ce9cd5fecbff50}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::assignValueId (<a href="/docs/api/classes/llvm/globalvalue/#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a> ValGUID)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00243">243</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### getValueId() {#a763ac36f8ca200aa7aa9e4a23450d920}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::getValueId (<a href="/docs/api/classes/llvm/globalvalue/#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a> ValGUID)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00247">247</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### getValueId() {#aea144f2e1e59d658c6bc375c1ebb6db3}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::getValueId (<a href="/docs/api/structs/llvm/valueinfo">ValueInfo</a> VI)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00257">257</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### valueIds() {#ac37ccb28c7f65a60cd8d81f613140cb3}

<MemberDefinition
  prototype={<>std::map&lt; GlobalValue::GUID, unsigned &gt; &amp; anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::valueIds ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00263">263</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### writeModuleLevelReferences() {#a2e19c6ac1ef16447809aad3812761237}

<MemberDefinition
  prototype={<>void ModuleBitcodeWriterBase::writeModuleLevelReferences (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &amp; V, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; uint64&#95;t, 64 &gt; &amp; NameVals, unsigned FSModRefsAbbrev, unsigned FSModVTableRefsAbbrev)</>}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00238">238</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### writePerModuleFunctionSummaryRecord() {#af6a8decac21a63b246518180d05d1646}

<MemberDefinition
  prototype={<>void ModuleBitcodeWriterBase::writePerModuleFunctionSummaryRecord (<a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; uint64&#95;t, 64 &gt; &amp; NameVals, <a href="/docs/api/classes/llvm/globalvaluesummary">GlobalValueSummary</a> &#42; Summary, unsigned ValueID, unsigned FSCallsAbbrev, unsigned FSCallsProfileAbbrev, unsigned CallsiteAbbrev, unsigned AllocAbbrev, unsigned ContextIdAbbvId, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/function">Function</a> &amp; F, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/namespaces/llvm/memprof/#acccd58d8f1e260d41aec72e4ce5e847f">CallStackId</a>, <a href="/docs/api/namespaces/llvm/memprof/#a271f954222d61bd5dc7f5cb5dd836b52">LinearCallStackId</a> &gt; &amp; CallStackPos, <a href="/docs/api/namespaces/llvm/memprof/#acccd58d8f1e260d41aec72e4ce5e847f">CallStackId</a> &amp; CallStackCount)</>}>

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00232">232</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Protected Member Attributes

### GlobalValueId {#aa0f7a3f136aadcb92281250f8f2a9b40}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::GlobalValueId</>}
  labels = {["protected"]}>
Tracks the last value id recorded in the GUIDToValueMap.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00183">183</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### GUIDToValueIdMap {#a86e62ef5b9ef1b72a2e6547a65cf2e30}

<MemberDefinition
  prototype={<>std::map&lt;GlobalValue::GUID, unsigned&gt; anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::GUIDToValueIdMap</>}
  labels = {["protected"]}>
Map that holds the correspondence between GUIDs in the summary index, that came from indirect call profiles, and a value id generated by this class to use in the VST and summary block records.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00180">180</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### Index {#aa544254679c186f7ec1b8a75c13bc30a}

<MemberDefinition
  prototype={<>const ModuleSummaryIndex&#42; anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::Index</>}
  labels = {["protected"]}>
Optional per-module index to write for ThinLTO.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00175">175</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### M {#a8bef003929632eb31a4722c4dab0e372}

<MemberDefinition
  prototype={<>const Module&amp; anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::M</>}
  labels = {["protected"]}>
The <a href="/docs/api/classes/llvm/module">Module</a> to write to bitcode.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00169">169</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### VE {#ad06babe1d15aa19778741cb5ce634dd7}

<MemberDefinition
  prototype={<>ValueEnumerator anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::VE</>}
  labels = {["protected"]}>
Enumerates ids for all values in the module.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00172">172</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

### VSTOffsetPlaceholder {#a067e0380d8c4ebb24000dcb4bfe919fd}

<MemberDefinition
  prototype={<>uint64&#95;t anonymous&#95;namespace&#123;BitcodeWriter.cpp&#125;::ModuleBitcodeWriterBase::VSTOffsetPlaceholder = 0</>}
  labels = {["protected"]}>
Saves the offset of the VSTOffset record that must eventually be backpatched with the offset of the actual VST.

Definition at line <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp/#l00187">187</a> of file <a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/bitcode/lib/bitcode/writer/bitcodewriter-cpp">BitcodeWriter.cpp</a></li>
</ul>

</DoxygenPage>
