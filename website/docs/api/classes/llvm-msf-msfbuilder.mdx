---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/msf/msfbuilder
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MSFBuilder` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class llvm::msf::MSFBuilder</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/DebugInfo/MSF/MSFBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h"
  isLocal="true" />
</IncludesList>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#aff191f1bd9f63d366e1f83f695ad3443">BlockList</a> = std::vector&lt; uint32&#95;t &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Private Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a093cb5c774dd6ce97c1a03dc942506c5">MSFBuilder</a> (uint32&#95;t BlockSize, uint32&#95;t MinBlockCount, bool CanGrow, BumpPtrAllocator &amp;Allocator)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/expected">Expected</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#af4a2024c4c2cee5d75b2146a5bc544d4">addStream</a> (uint32&#95;t Size, ArrayRef&lt; uint32&#95;t &gt; Blocks)</>}>
Add a stream to the MSF file with the given size, occupying the given list of blocks. <a href="#af4a2024c4c2cee5d75b2146a5bc544d4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/expected">Expected</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#acf419bcec077ae6a195e0dcb3f14e255">addStream</a> (uint32&#95;t Size)</>}>
Add a stream to the MSF file with the given size, occupying any available blocks that the builder decides to use. <a href="#acf419bcec077ae6a195e0dcb3f14e255">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/expected">Expected</a>&lt; <a href="/docs/api/classes/llvm/filebufferbytestream">FileBufferByteStream</a> &gt;</>}
  name={<><a href="#a6c98d361786661879be283e8abc78dbf">commit</a> (StringRef Path, MSFLayout &amp;Layout)</>}>
Write the MSF layout to the underlying file. <a href="#a6c98d361786661879be283e8abc78dbf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/expected">Expected</a>&lt; <a href="/docs/api/structs/llvm/msf/msflayout">MSFLayout</a> &gt;</>}
  name={<><a href="#a6fc9c4f6f23dfa2eb0a1b8feb680ac92">generateLayout</a> ()</>}>
Finalize the layout and build the headers and structures that describe the MSF layout and can be written directly to the MSF file. <a href="#a6fc9c4f6f23dfa2eb0a1b8feb680ac92">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a8e612822d4ba7bb36c9c79582a567108">BumpPtrAllocator</a> &amp;</>}
  name={<><a href="#a625ab5cfc095eb1bd884cd6191373d89">getAllocator</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a56ce626295d844880a5a783965f03b0c">getNumFreeBlocks</a> () const</>}>
Get the total number of blocks that exist in the MSF file but are not allocated to any valid data. <a href="#a56ce626295d844880a5a783965f03b0c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a1a4c287c2a21d1b468046e9a1c2c65e9">getNumStreams</a> () const</>}>
Get the total number of streams in the MSF layout. <a href="#a1a4c287c2a21d1b468046e9a1c2c65e9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#adeea8e76793f05963e0e39ce7302eac0">getNumUsedBlocks</a> () const</>}>
Get the total number of blocks that will be allocated to actual data in this MSF file. <a href="#adeea8e76793f05963e0e39ce7302eac0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a2cb0641d54f97a3c059cf843833efdd9">getStreamBlocks</a> (uint32&#95;t StreamIdx) const</>}>
Get the list of blocks allocated to a particular stream. <a href="#a2cb0641d54f97a3c059cf843833efdd9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a83b60b1263dc7b45aa324789cea86b2e">getStreamSize</a> (uint32&#95;t StreamIdx) const</>}>
Get the size of a stream by index. <a href="#a83b60b1263dc7b45aa324789cea86b2e">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a51f60aa0d067106219360c6b42b2607f">getTotalBlockCount</a> () const</>}>
Get the total number of blocks in the MSF file. <a href="#a51f60aa0d067106219360c6b42b2607f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a742ea3d26a3604448c76c64f7a9341ab">isBlockFree</a> (uint32&#95;t Idx) const</>}>
<a href="/docs/api/namespaces/llvm/check">Check</a> whether a particular block is allocated or free. <a href="#a742ea3d26a3604448c76c64f7a9341ab">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/error">Error</a></>}
  name={<><a href="#a1af64821af285e06f73d4f9bae60b68a">setBlockMapAddr</a> (uint32&#95;t Addr)</>}>
Request the block map to be at a specific block address. <a href="#a1af64821af285e06f73d4f9bae60b68a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/error">Error</a></>}
  name={<><a href="#a3da93abaa67b0e96193734c8084fd3ce">setDirectoryBlocksHint</a> (ArrayRef&lt; uint32&#95;t &gt; DirBlocks)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a81dc1a77bc37730b480a4156fd73acbf">setFreePageMap</a> (uint32&#95;t Fpm)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/error">Error</a></>}
  name={<><a href="#a66e6af17e700be6707740c63b7a6a63a">setStreamSize</a> (uint32&#95;t Idx, uint32&#95;t Size)</>}>
Update the size of an existing stream. <a href="#a66e6af17e700be6707740c63b7a6a63a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af49f1e6ad306896b15614ee4c85dae63">setUnknown1</a> (uint32&#95;t Unk1)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/error">Error</a></>}
  name={<><a href="#a95a12b018905ec7f7b7a99999e8bab62">allocateBlocks</a> (uint32&#95;t NumBlocks, MutableArrayRef&lt; uint32&#95;t &gt; Blocks)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a979cc426963344f7b841af01301d0ed2">computeDirectoryByteSize</a> () const</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a8e612822d4ba7bb36c9c79582a567108">BumpPtrAllocator</a> &amp;</>}
  name={<><a href="#a258ef180d477640b7804c6ca0bb1b60c">Allocator</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a80101416f0cc7f88de50d1977d82cbcd">BlockMapAddr</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#abe07639f7d9f837040bc5858d818c22c">BlockSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a423efaf47dc3c07eb4b2aec17c6f5d84">DirectoryBlocks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/bitvector">BitVector</a></>}
  name={<><a href="#a364b2cb46885ac1b86fe2bf51407cc7a">FreeBlocks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#a7ad8f0024a1f06e67770315af7f0d751">FreePageMap</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0cda01cfa9f65576a8de8e3f194f792f">IsGrowable</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; std::pair&lt; uint32&#95;t, BlockList &gt; &gt;</>}
  name={<><a href="#ad6e7c56e1a1f9a34f586546ee8ea4c46">StreamData</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint32&#95;t</>}
  name={<><a href="#ab3736b1b32cca074d0f89f43c99b9f05">Unknown1</a> = 0</>}>
</MembersIndexItem>

</MembersIndex>

## Public Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/expected">Expected</a>&lt; <a href="/docs/api/classes/llvm/msf/msfbuilder">MSFBuilder</a> &gt;</>}
  name={<><a href="#a8c21485958080726f29f691b4cbfcf00">create</a> (BumpPtrAllocator &amp;Allocator, uint32&#95;t BlockSize, uint32&#95;t MinBlockCount=0, bool CanGrow=true)</>}>
Create a new <code><a href="/docs/api/classes/llvm/msf/msfbuilder">MSFBuilder</a></code>. <a href="#a8c21485958080726f29f691b4cbfcf00">More...</a>
</MembersIndexItem>

</MembersIndex>


Definition at line 27 of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.

<SectionDefinition>

## Private Member Typedefs

### BlockList {#aff191f1bd9f63d366e1f83f695ad3443}

<MemberDefinition
  prototype={<>using llvm::msf::MSFBuilder::BlockList =  std::vector&lt;uint32&#95;t&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00128">128</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Constructors

### MSFBuilder() {#a093cb5c774dd6ce97c1a03dc942506c5}

<MemberDefinition
  prototype={<>MSFBuilder::MSFBuilder (uint32&#95;t BlockSize, uint32&#95;t MinBlockCount, bool CanGrow, <a href="/docs/api/namespaces/llvm/#a8e612822d4ba7bb36c9c79582a567108">BumpPtrAllocator</a> &amp; Allocator)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00122">122</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00040">40</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### addStream() {#af4a2024c4c2cee5d75b2146a5bc544d4}

<MemberDefinition
  prototype={<>Expected&lt; uint32&#95;t &gt; MSFBuilder::addStream (uint32&#95;t Size, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint32&#95;t &gt; Blocks)</>}>
Add a stream to the MSF file with the given size, occupying the given list of blocks.

This is useful when reading a MSF file and you want a particular stream to occupy the original set of blocks. If the given blocks are already allocated, or if the number of blocks specified is incorrect for the given stream size, this function will return an <a href="/docs/api/classes/llvm/error">Error</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00074">74</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00156">156</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### addStream() {#acf419bcec077ae6a195e0dcb3f14e255}

<MemberDefinition
  prototype={<>Expected&lt; uint32&#95;t &gt; MSFBuilder::addStream (uint32&#95;t Size)</>}>
Add a stream to the MSF file with the given size, occupying any available blocks that the builder decides to use.

This is useful when building a new PDB file from scratch and you don&#39;t care what blocks a stream occupies but you just want it to work.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00080">80</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00183">183</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### commit() {#a6c98d361786661879be283e8abc78dbf}

<MemberDefinition
  prototype={<>Expected&lt; FileBufferByteStream &gt; MSFBuilder::commit (<a href="/docs/api/classes/llvm/stringref">StringRef</a> Path, <a href="/docs/api/structs/llvm/msf/msflayout">MSFLayout</a> &amp; Layout)</>}>
Write the MSF layout to the underlying file.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00117">117</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00340">340</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### generateLayout() {#a6fc9c4f6f23dfa2eb0a1b8feb680ac92}

<MemberDefinition
  prototype={<>Expected&lt; MSFLayout &gt; MSFBuilder::generateLayout ()</>}>
Finalize the layout and build the headers and structures that describe the MSF layout and can be written directly to the MSF file.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00114">114</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00251">251</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getAllocator() {#a625ab5cfc095eb1bd884cd6191373d89}

<MemberDefinition
  prototype={<>BumpPtrAllocator &amp; llvm::msf::MSFBuilder::getAllocator ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00119">119</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### getNumFreeBlocks() {#a56ce626295d844880a5a783965f03b0c}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::getNumFreeBlocks () const</>}>
Get the total number of blocks that exist in the MSF file but are not allocated to any valid data.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00103">103</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00150">150</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getNumStreams() {#a1a4c287c2a21d1b468046e9a1c2c65e9}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::getNumStreams () const</>}>
Get the total number of streams in the MSF layout.

This should return 1 for every call to <code>addStream</code>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00089">89</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00225">225</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getNumUsedBlocks() {#adeea8e76793f05963e0e39ce7302eac0}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::getNumUsedBlocks () const</>}>
Get the total number of blocks that will be allocated to actual data in this MSF file.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00099">99</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00146">146</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getStreamBlocks() {#a2cb0641d54f97a3c059cf843833efdd9}

<MemberDefinition
  prototype={<>ArrayRef&lt; uint32&#95;t &gt; MSFBuilder::getStreamBlocks (uint32&#95;t StreamIdx) const</>}>
Get the list of blocks allocated to a particular stream.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00095">95</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00231">231</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getStreamSize() {#a83b60b1263dc7b45aa324789cea86b2e}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::getStreamSize (uint32&#95;t StreamIdx) const</>}>
Get the size of a stream by index.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00092">92</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00227">227</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### getTotalBlockCount() {#a51f60aa0d067106219360c6b42b2607f}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::getTotalBlockCount () const</>}>
Get the total number of blocks in the MSF file.

In practice this is equal to <code><a href="#adeea8e76793f05963e0e39ce7302eac0">getNumUsedBlocks()</a> + <a href="#a56ce626295d844880a5a783965f03b0c">getNumFreeBlocks()</a></code>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00107">107</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00152">152</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### isBlockFree() {#a742ea3d26a3604448c76c64f7a9341ab}

<MemberDefinition
  prototype={<>bool MSFBuilder::isBlockFree (uint32&#95;t Idx) const</>}>
<a href="/docs/api/namespaces/llvm/check">Check</a> whether a particular block is allocated or free.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00110">110</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00154">154</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### setBlockMapAddr() {#a1af64821af285e06f73d4f9bae60b68a}

<MemberDefinition
  prototype={<>Error MSFBuilder::setBlockMapAddr (uint32&#95;t Addr)</>}>
Request the block map to be at a specific block address.

This is useful when editing a MSF and you want the layout to be as stable as possible.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00064">64</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00063">63</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### setDirectoryBlocksHint() {#a3da93abaa67b0e96193734c8084fd3ce}

<MemberDefinition
  prototype={<>Error MSFBuilder::setDirectoryBlocksHint (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint32&#95;t &gt; DirBlocks)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00065">65</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00088">88</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### setFreePageMap() {#a81dc1a77bc37730b480a4156fd73acbf}

<MemberDefinition
  prototype={<>void MSFBuilder::setFreePageMap (uint32&#95;t Fpm)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00066">66</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00084">84</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### setStreamSize() {#a66e6af17e700be6707740c63b7a6a63a}

<MemberDefinition
  prototype={<>Error MSFBuilder::setStreamSize (uint32&#95;t Idx, uint32&#95;t Size)</>}>
Update the size of an existing stream.

This will allocate or deallocate blocks as needed to match the requested size. This can fail if <code>CanGrow</code> was set to false when initializing the <code><a href="/docs/api/classes/llvm/msf/msfbuilder">MSFBuilder</a></code>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00085">85</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00193">193</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### setUnknown1() {#af49f1e6ad306896b15614ee4c85dae63}

<MemberDefinition
  prototype={<>void MSFBuilder::setUnknown1 (uint32&#95;t Unk1)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00067">67</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00086">86</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### allocateBlocks() {#a95a12b018905ec7f7b7a99999e8bab62}

<MemberDefinition
  prototype={<>Error MSFBuilder::allocateBlocks (uint32&#95;t NumBlocks, <a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef</a>&lt; uint32&#95;t &gt; Blocks)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00125">125</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00103">103</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

### computeDirectoryByteSize() {#a979cc426963344f7b841af01301d0ed2}

<MemberDefinition
  prototype={<>uint32&#95;t MSFBuilder::computeDirectoryByteSize () const</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00126">126</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00235">235</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### Allocator {#a258ef180d477640b7804c6ca0bb1b60c}

<MemberDefinition
  prototype={<>BumpPtrAllocator&amp; llvm::msf::MSFBuilder::Allocator</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00130">130</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### BlockMapAddr {#a80101416f0cc7f88de50d1977d82cbcd}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::msf::MSFBuilder::BlockMapAddr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00136">136</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### BlockSize {#abe07639f7d9f837040bc5858d818c22c}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::msf::MSFBuilder::BlockSize</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00135">135</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### DirectoryBlocks {#a423efaf47dc3c07eb4b2aec17c6f5d84}

<MemberDefinition
  prototype={<>std::vector&lt;uint32&#95;t&gt; llvm::msf::MSFBuilder::DirectoryBlocks</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00138">138</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### FreeBlocks {#a364b2cb46885ac1b86fe2bf51407cc7a}

<MemberDefinition
  prototype="BitVector llvm::msf::MSFBuilder::FreeBlocks">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00137">137</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### FreePageMap {#a7ad8f0024a1f06e67770315af7f0d751}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::msf::MSFBuilder::FreePageMap</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00133">133</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### IsGrowable {#a0cda01cfa9f65576a8de8e3f194f792f}

<MemberDefinition
  prototype="bool llvm::msf::MSFBuilder::IsGrowable">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00132">132</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### StreamData {#ad6e7c56e1a1f9a34f586546ee8ea4c46}

<MemberDefinition
  prototype={<>std::vector&lt;std::pair&lt;uint32&#95;t, BlockList&gt; &gt; llvm::msf::MSFBuilder::StreamData</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00139">139</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

### Unknown1 {#ab3736b1b32cca074d0f89f43c99b9f05}

<MemberDefinition
  prototype={<>uint32&#95;t llvm::msf::MSFBuilder::Unknown1 = 0</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00134">134</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Functions

### create() {#a8c21485958080726f29f691b4cbfcf00}

<MemberDefinition
  prototype={<>Expected&lt; MSFBuilder &gt; MSFBuilder::create (<a href="/docs/api/namespaces/llvm/#a8e612822d4ba7bb36c9c79582a567108">BumpPtrAllocator</a> &amp; Allocator, uint32&#95;t BlockSize, uint32&#95;t MinBlockCount=0, bool CanGrow=<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</>}
  labels = {["static"]}>
Create a new <code><a href="/docs/api/classes/llvm/msf/msfbuilder">MSFBuilder</a></code>.

<ParametersList title="Parameters">
<ParametersListItem name="BlockSize">The internal block size used by the PDB file. See <a href="/docs/api/namespaces/llvm/msf/#a44e810a6a219aa5149a2830a83068175">isValidBlockSize()</a> for a list of valid block sizes.</ParametersListItem>
<ParametersListItem name="MinBlockCount">Causes the builder to reserve up front space for at least <code>MinBlockCount</code> blocks. This is useful when using <code><a href="/docs/api/classes/llvm/msf/msfbuilder">MSFBuilder</a></code> to read an existing MSF that you want to write back out later. The original MSF file&#39;s <a href="/docs/api/structs/llvm/msf/superblock">SuperBlock</a> contains the exact number of blocks used by the file, so is a good hint as to how many blocks the new MSF file will contain. Furthermore, it is actually necessary in this case. To preserve stability of the file&#39;s layout, it is helpful to try to keep all streams mapped to their original block numbers. To ensure that this is possible, space for all blocks must be allocated beforehand so that streams can be assigned to them.</ParametersListItem>
<ParametersListItem name="CanGrow">If true, any operation which results in an attempt to locate a free block when all available blocks have been exhausted will allocate a new block, thereby growing the size of the final MSF file. When false, any such attempt will result in an error. This is especially useful in testing scenarios when you know your test isn&#39;t going to do anything to increase the size of the file, so having an <a href="/docs/api/classes/llvm/error">Error</a> returned if it were to happen would catch a programming error</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
an <a href="/docs/api/classes/llvm/error">llvm::Error</a> representing whether the operation succeeded or failed. Currently the only way this can fail is if an invalid block size is specified, or <code>MinBlockCount</code> does not leave enough room for the mandatory reserved blocks required by an MSF file.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h/#l00057">57</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a>, definition at line <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp/#l00051">51</a> of file <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/debuginfo/include/llvm/debuginfo/msf/msfbuilder-h">MSFBuilder.h</a></li>
<li><a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/msfbuilder-cpp">MSFBuilder.cpp</a></li>
</ul>

</DoxygenPage>
