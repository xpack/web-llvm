---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/coverage/counterexpressionbuilder
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CounterExpressionBuilder` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

A <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> expression builder is used to construct the counter expressions. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::coverage::CounterExpressionBuilder</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/ProfileData/Coverage/CoverageMapping.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h"
  isLocal="true" />
</IncludesList>

## Public Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#aefccee22c1710a19b5024c9014ce9346">SubstMap</a> = std::map&lt; <a href="/docs/api/structs/llvm/coverage/counter">Counter</a>, <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> &gt;</>}>
K to V map. <a href="#aefccee22c1710a19b5024c9014ce9346">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/coverage/counter">Counter</a></>}
  name={<><a href="#a1e96efec662a56b7381c06e6dbaa37af">add</a> (Counter LHS, Counter RHS, bool Simplify=true)</>}>
Return a counter that represents the expression that adds LHS and RHS. <a href="#a1e96efec662a56b7381c06e6dbaa37af">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/coverage/counterexpression">CounterExpression</a> &gt;</>}
  name={<><a href="#a02117cb1da8fb0e1b98d8dfea9d0c985">getExpressions</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/coverage/counter">Counter</a></>}
  name={<><a href="#a4300f33f9daba299f3b3912e07770317">subst</a> (Counter C, const SubstMap &amp;Map)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/coverage/counter">Counter</a></>}
  name={<><a href="#a0da55ae07a066d293e807a99458755f0">subtract</a> (Counter LHS, Counter RHS, bool Simplify=true)</>}>
Return a counter that represents the expression that subtracts RHS from LHS. <a href="#a0da55ae07a066d293e807a99458755f0">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a2f4fd46b17bee67fd8413662759037e3">extractTerms</a> (Counter C, int Sign, SmallVectorImpl&lt; Term &gt; &amp;Terms)</>}>
Gather the terms of the expression tree for processing. <a href="#a2f4fd46b17bee67fd8413662759037e3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/coverage/counter">Counter</a></>}
  name={<><a href="#a693b36d83f032a35706bdb491298286a">get</a> (const CounterExpression &amp;E)</>}>
Return the counter which corresponds to the given expression. <a href="#a693b36d83f032a35706bdb491298286a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/coverage/counter">Counter</a></>}
  name={<><a href="#ac1f6add151f50b27c674fc136d94cd0e">simplify</a> (Counter ExpressionTree)</>}>
Simplifies the given expression tree by getting rid of algebraically redundant operations. <a href="#ac1f6add151f50b27c674fc136d94cd0e">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/structs/llvm/coverage/counterexpression">CounterExpression</a>, unsigned &gt;</>}
  name={<><a href="#a07143366ff7741af19bacbc686bbebc3">ExpressionIndices</a></>}>
A lookup table for the index of a given expression. <a href="#a07143366ff7741af19bacbc686bbebc3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; <a href="/docs/api/structs/llvm/coverage/counterexpression">CounterExpression</a> &gt;</>}
  name={<><a href="#a2c99b3252a46805693259277e6e20868">Expressions</a></>}>
A list of all the counter expressions. <a href="#a2c99b3252a46805693259277e6e20868">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> expression builder is used to construct the counter expressions.

It avoids unnecessary duplication and simplifies algebraic expressions.

Definition at line 175 of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>.

<SectionDefinition>

## Public Member Typedefs

### SubstMap {#aefccee22c1710a19b5024c9014ce9346}

<MemberDefinition
  prototype={<>using llvm::coverage::CounterExpressionBuilder::SubstMap =  std::map&lt;Counter, Counter&gt;</>}>
K to V map.

K will be <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> in most cases. V may be <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> or <a href="/docs/api/classes/llvm/expression">Expression</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00221">221</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### add() {#a1e96efec662a56b7381c06e6dbaa37af}

<MemberDefinition
  prototype={<>Counter CounterExpressionBuilder::add (<a href="/docs/api/structs/llvm/coverage/counter">Counter</a> LHS, <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> RHS, bool Simplify=<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</>}>
Return a counter that represents the expression that adds LHS and RHS.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00213">213</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00127">127</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

### getExpressions() {#a02117cb1da8fb0e1b98d8dfea9d0c985}

<MemberDefinition
  prototype={<>ArrayRef&lt; CounterExpression &gt; llvm::coverage::CounterExpressionBuilder::getExpressions () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00210">210</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>.
</MemberDefinition>

### subst() {#a4300f33f9daba299f3b3912e07770317}

<MemberDefinition
  prototype={<>Counter CounterExpressionBuilder::subst (<a href="/docs/api/structs/llvm/coverage/counter">Counter</a> C, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="#aefccee22c1710a19b5024c9014ce9346">SubstMap</a> &amp; Map)</>}>

<SectionUser title="Returns">
A counter equivalent to \\C, with each term in its expression replaced with term from <code>Map</code>.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00225">225</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00138">138</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

### subtract() {#a0da55ae07a066d293e807a99458755f0}

<MemberDefinition
  prototype={<>Counter CounterExpressionBuilder::subtract (<a href="/docs/api/structs/llvm/coverage/counter">Counter</a> LHS, <a href="/docs/api/structs/llvm/coverage/counter">Counter</a> RHS, bool Simplify=<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</>}>
Return a counter that represents the expression that subtracts RHS from LHS.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00217">217</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00132">132</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### extractTerms() {#a2f4fd46b17bee67fd8413662759037e3}

<MemberDefinition
  prototype={<>void CounterExpressionBuilder::extractTerms (<a href="/docs/api/structs/llvm/coverage/counter">Counter</a> C, int Sign, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; Term &gt; &amp; Terms)</>}>
Gather the terms of the expression tree for processing.

This collects each addition and subtraction referenced by the counter into a sequence that can be sorted and combined to build a simplified counter expression.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00203">203</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00058">58</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

### get() {#a693b36d83f032a35706bdb491298286a}

<MemberDefinition
  prototype={<>Counter CounterExpressionBuilder::get (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/coverage/counterexpression">CounterExpression</a> &amp; E)</>}>
Return the counter which corresponds to the given expression.

If the given expression is already stored in the builder, a counter that references that expression is returned. Otherwise, the given expression is added to the builder&#39;s collection of expressions.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00187">187</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00051">51</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

### simplify() {#ac1f6add151f50b27c674fc136d94cd0e}

<MemberDefinition
  prototype={<>Counter CounterExpressionBuilder::simplify (<a href="/docs/api/structs/llvm/coverage/counter">Counter</a> ExpressionTree)</>}>
Simplifies the given expression tree by getting rid of algebraically redundant operations.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00207">207</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>, definition at line <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp/#l00075">75</a> of file <a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### ExpressionIndices {#a07143366ff7741af19bacbc686bbebc3}

<MemberDefinition
  prototype={<>DenseMap&lt;CounterExpression, unsigned&gt; llvm::coverage::CounterExpressionBuilder::ExpressionIndices</>}>
A lookup table for the index of a given expression.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00180">180</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>.
</MemberDefinition>

### Expressions {#a2c99b3252a46805693259277e6e20868}

<MemberDefinition
  prototype={<>std::vector&lt;CounterExpression&gt; llvm::coverage::CounterExpressionBuilder::Expressions</>}>
A list of all the counter expressions.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h/#l00177">177</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/profiledata/include/llvm/profiledata/coverage/coveragemapping-h">CoverageMapping.h</a></li>
<li><a href="/docs/api/files/lib/lib/profiledata/lib/profiledata/coverage/coveragemapping-cpp">CoverageMapping.cpp</a></li>
</ul>

</DoxygenPage>
