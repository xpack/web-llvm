---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/sampleprofutil/samplecoveragetracker
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `SampleCoverageTracker` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>class llvm::sampleprofutil::SampleCoverageTracker</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Utils/SampleProfileLoaderBaseUtil.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h"
  isLocal="true" />
</IncludesList>

## Private Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#ada2e5c1756c734b14655435629546d54">BodySampleCoverageMap</a> = std::map&lt; <a href="/docs/api/structs/llvm/sampleprof/linelocation">LineLocation</a>, unsigned &gt;</>}>
</MembersIndexItem>

<MembersIndexItem
  type="using"
  name={<><a href="#a275c12b6d9409c5d92e8fa4a6d99f026">FunctionSamplesCoverageMap</a> = <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42;, BodySampleCoverageMap &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#aba883bb7e12f0e55cc6739a33ade0044">clear</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a794d2f372a7bc1e5f5f90bd2bc5ca8d3">computeCoverage</a> (unsigned Used, unsigned Total) const</>}>
Return the fraction of sample records used in this profile. <a href="#a794d2f372a7bc1e5f5f90bd2bc5ca8d3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a115955d2509b80c7c2c435899404b086">countBodyRecords</a> (const FunctionSamples &#42;FS, ProfileSummaryInfo &#42;PSI) const</>}>
Return the number of sample records in the body of this profile. <a href="#a115955d2509b80c7c2c435899404b086">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a982cd37395d6c62bb2030d3e1b09b4d0">countBodySamples</a> (const FunctionSamples &#42;FS, ProfileSummaryInfo &#42;PSI) const</>}>
Return the number of samples collected in the body of this profile. <a href="#a982cd37395d6c62bb2030d3e1b09b4d0">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a3dd722b8bbc4b043fd9a360f68aead04">countUsedRecords</a> (const FunctionSamples &#42;FS, ProfileSummaryInfo &#42;PSI) const</>}>
Return the number of sample records that were applied from this profile. <a href="#a3dd722b8bbc4b043fd9a360f68aead04">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a87f6aca2c16e499ae62a681c9afe9ad8">getTotalUsedSamples</a> () const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#adb303c9c849d1db014aac9dc66d344c8">markSamplesUsed</a> (const FunctionSamples &#42;FS, uint32&#95;t LineOffset, uint32&#95;t Discriminator, uint64&#95;t Samples)</>}>
Mark as used the sample record for the given function samples at (LineOffset, Discriminator). <a href="#adb303c9c849d1db014aac9dc66d344c8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aaed3f5a638013e8a62cf5e15d4770133">setProfAccForSymsInList</a> (bool V)</>}>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#aab4339f8a6226476034e6477007648e6">ProfAccForSymsInList</a> = false</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">FunctionSamplesCoverageMap</a></>}
  name={<><a href="#ac33a61e71320f900a0e25e05fb51821d">SampleCoverage</a></>}>
Coverage map for sampling records. <a href="#ac33a61e71320f900a0e25e05fb51821d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a3920b32e680c8d6b70bfabe0d80bae6c">TotalUsedSamples</a> = 0</>}>
Number of samples used from the profile. <a href="#a3920b32e680c8d6b70bfabe0d80bae6c">More...</a>
</MembersIndexItem>

</MembersIndex>


Definition at line 35 of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.

<SectionDefinition>

## Private Member Typedefs

### BodySampleCoverageMap {#ada2e5c1756c734b14655435629546d54}

<MemberDefinition
  prototype={<>using llvm::sampleprofutil::SampleCoverageTracker::BodySampleCoverageMap =  std::map&lt;LineLocation, unsigned&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00055">55</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

### FunctionSamplesCoverageMap {#a275c12b6d9409c5d92e8fa4a6d99f026}

<MemberDefinition
  prototype={<>using llvm::sampleprofutil::SampleCoverageTracker::FunctionSamplesCoverageMap = 
      DenseMap&lt;const FunctionSamples &#42;, BodySampleCoverageMap&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00056">56</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### clear() {#aba883bb7e12f0e55cc6739a33ade0044}

<MemberDefinition
  prototype="void llvm::sampleprofutil::SampleCoverageTracker::clear ()"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00048">48</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

### computeCoverage() {#a794d2f372a7bc1e5f5f90bd2bc5ca8d3}

<MemberDefinition
  prototype="unsigned llvm::sampleprofutil::SampleCoverageTracker::computeCoverage (unsigned Used, unsigned Total) const">
Return the fraction of sample records used in this profile.

The returned value is an unsigned integer in the range 0-100 indicating the percentage of sample records that were used while applying this profile to the associated function.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00039">39</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp/#l00163">163</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a>.
</MemberDefinition>

### countBodyRecords() {#a115955d2509b80c7c2c435899404b086}

<MemberDefinition
  prototype={<>unsigned llvm::sampleprofutil::SampleCoverageTracker::countBodyRecords (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42; FS, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI) const</>}>
Return the number of sample records in the body of this profile.

This count does not include records from cold inlined callsites.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00042">42</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp/#l00122">122</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a>.
</MemberDefinition>

### countBodySamples() {#a982cd37395d6c62bb2030d3e1b09b4d0}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::sampleprofutil::SampleCoverageTracker::countBodySamples (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42; FS, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI) const</>}>
Return the number of samples collected in the body of this profile.

This count does not include samples from cold inlined callsites.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00045">45</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp/#l00141">141</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a>.
</MemberDefinition>

### countUsedRecords() {#a3dd722b8bbc4b043fd9a360f68aead04}

<MemberDefinition
  prototype={<>unsigned llvm::sampleprofutil::SampleCoverageTracker::countUsedRecords (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42; FS, <a href="/docs/api/classes/llvm/profilesummaryinfo">ProfileSummaryInfo</a> &#42; PSI) const</>}>
Return the number of sample records that were applied from this profile.

This count does not include records from cold inlined callsites.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00040">40</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp/#l00097">97</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a>.
</MemberDefinition>

### getTotalUsedSamples() {#a87f6aca2c16e499ae62a681c9afe9ad8}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::sampleprofutil::SampleCoverageTracker::getTotalUsedSamples () const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00044">44</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

### markSamplesUsed() {#adb303c9c849d1db014aac9dc66d344c8}

<MemberDefinition
  prototype={<>bool llvm::sampleprofutil::SampleCoverageTracker::markSamplesUsed (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> &#42; FS, uint32&#95;t LineOffset, uint32&#95;t Discriminator, uint64&#95;t Samples)</>}>
Mark as used the sample record for the given function samples at (LineOffset, Discriminator).

<SectionUser title="Returns">
true if this is the first time we mark the given record.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00037">37</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp/#l00081">81</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a>.
</MemberDefinition>

### setProfAccForSymsInList() {#aaed3f5a638013e8a62cf5e15d4770133}

<MemberDefinition
  prototype="void llvm::sampleprofutil::SampleCoverageTracker::setProfAccForSymsInList (bool V)"
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00052">52</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### ProfAccForSymsInList {#aab4339f8a6226476034e6477007648e6}

<MemberDefinition
  prototype="bool llvm::sampleprofutil::SampleCoverageTracker::ProfAccForSymsInList = false">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00085">85</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

### SampleCoverage {#ac33a61e71320f900a0e25e05fb51821d}

<MemberDefinition
  prototype="FunctionSamplesCoverageMap llvm::sampleprofutil::SampleCoverageTracker::SampleCoverage">
Coverage map for sampling records.

This map keeps a record of sampling records that have been matched to an IR instruction. This is used to detect some form of staleness in profiles (see flag -sample-profile-check-coverage).

Each entry in the map corresponds to a <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> instance. This is another map that counts how many times the sample record at the given location has been used.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00068">68</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

### TotalUsedSamples {#a3920b32e680c8d6b70bfabe0d80bae6c}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::sampleprofutil::SampleCoverageTracker::TotalUsedSamples = 0</>}>
Number of samples used from the profile.

When a sampling record is used for the first time, the samples from that record are added to this accumulator. Coverage is later computed based on the total number of samples available in this function and its callsites.

Note that this accumulator tracks samples used from a single function and all the inlined callsites. Strictly, we should have a map of counters keyed by <a href="/docs/api/classes/llvm/sampleprof/functionsamples">FunctionSamples</a> pointers, but these stats are cleared after every function, so we just need to keep a single counter.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h/#l00081">81</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/sampleprofileloaderbaseutil-h">SampleProfileLoaderBaseUtil.h</a></li>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/sampleprofileloaderbaseutil-cpp">SampleProfileLoaderBaseUtil.cpp</a></li>
</ul>

</DoxygenPage>
