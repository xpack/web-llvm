---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/classes/llvm/mca/defaultresourcestrategy
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - class
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `DefaultResourceStrategy` Class Reference

<DoxygenPage pluginConfig={pluginConfig}>

Default resource allocation strategy used by processor resource groups and processor resources with multiple units. <a href="#details">More...</a>

## Declaration

<CodeBlock>class llvm::mca::DefaultResourceStrategy</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/MCA/HardwareUnits/ResourceManager.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h"
  isLocal="true" />
</IncludesList>

## Base class

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/mca/resourcestrategy">ResourceStrategy</a></>}>
Resource allocation strategy used by hardware scheduler resources. <a href="/docs/api/classes/llvm/mca/resourcestrategy/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a10cdf68ba23d403b70dd95f8d0f2023b">DefaultResourceStrategy</a> (uint64&#95;t UnitMask)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Destructor Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ae738360dc7fe17f32f3602264628f2dd">~DefaultResourceStrategy</a> ()=default</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#ae98cd9a61040a0208a29df6238b7aa08">select</a> (uint64&#95;t ReadyMask) override</>}>
Selects a processor resource unit from a ReadyMask. <a href="#ae98cd9a61040a0208a29df6238b7aa08">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a37c31dd9225bfb63fd296560b380c2bd">used</a> (uint64&#95;t Mask) override</>}>
Called by the <a href="/docs/api/classes/llvm/resourcemanager">ResourceManager</a> when a processor resource group, or a processor resource with multiple units has become unavailable. <a href="#a37c31dd9225bfb63fd296560b380c2bd">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a2ff2007f601aa66c1c73c400d5c73902">NextInSequenceMask</a></>}>
A simple round-robin selector for processor resource units. <a href="#a2ff2007f601aa66c1c73c400d5c73902">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a875fe6d657ee4e85a66e79d33f65c696">RemovedFromNextInSequence</a></>}>
This field is used to track resource units that are used (i.e. <a href="#a875fe6d657ee4e85a66e79d33f65c696">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a1367398974ada69c45d2f8ab0120c981">ResourceUnitMask</a></>}>
A Mask of resource unit identifiers. <a href="#a1367398974ada69c45d2f8ab0120c981">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Default resource allocation strategy used by processor resource groups and processor resources with multiple units.

Definition at line 67 of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.

<SectionDefinition>

## Public Constructors

### DefaultResourceStrategy() {#a10cdf68ba23d403b70dd95f8d0f2023b}

<MemberDefinition
  prototype={<>llvm::mca::DefaultResourceStrategy::DefaultResourceStrategy (uint64&#95;t UnitMask)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00120">120</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Destructor

### ~DefaultResourceStrategy() {#ae738360dc7fe17f32f3602264628f2dd}

<MemberDefinition
  prototype="virtual llvm::mca::DefaultResourceStrategy::~DefaultResourceStrategy ()"
  labels = {["virtual", "default"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00123">123</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### select() {#ae98cd9a61040a0208a29df6238b7aa08}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::mca::DefaultResourceStrategy::select (uint64&#95;t ReadyMask)</>}
  labels = {["virtual"]}>
Selects a processor resource unit from a ReadyMask.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00125">125</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/lib/mca/hardwareunits/resourcemanager-cpp/#l00034">34</a> of file <a href="/docs/api/files/lib/lib/mca/lib/mca/hardwareunits/resourcemanager-cpp">ResourceManager.cpp</a>.
</MemberDefinition>

### used() {#a37c31dd9225bfb63fd296560b380c2bd}

<MemberDefinition
  prototype={<>void llvm::mca::DefaultResourceStrategy::used (uint64&#95;t ResourceMask)</>}
  labels = {["virtual"]}>
Called by the <a href="/docs/api/classes/llvm/resourcemanager">ResourceManager</a> when a processor resource group, or a processor resource with multiple units has become unavailable.

The default strategy uses this information to bias its selection logic.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00126">126</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>, definition at line <a href="/docs/api/files/lib/lib/mca/lib/mca/hardwareunits/resourcemanager-cpp/#l00051">51</a> of file <a href="/docs/api/files/lib/lib/mca/lib/mca/hardwareunits/resourcemanager-cpp">ResourceManager.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Attributes

### NextInSequenceMask {#a2ff2007f601aa66c1c73c400d5c73902}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::mca::DefaultResourceStrategy::NextInSequenceMask</>}>
A simple round-robin selector for processor resource units.

Each bit of this mask identifies a sub resource within a group.

As an example, lets assume that this is a default policy for a processor resource group composed by the following three units: ResourceA – 0b001 ResourceB – 0b010 ResourceC – 0b100

<a href="/docs/api/files/lib/lib/support/optimizedstructlayout-cpp/#a5208f2b0568d811c542f8d8097dbc035">Field</a> NextInSequenceMask is used to select the next unit from the set of resource units. It defaults to the value of field <code>ResourceUnitMasks</code> (in this example, it defaults to mask &#39;0b111&#39;).

The round-robin selector would firstly select &#39;ResourceC&#39;, then &#39;ResourceB&#39;, and eventually &#39;ResourceA&#39;. When a resource R is used, the corresponding bit in NextInSequenceMask is cleared. For example, if &#39;ResourceC&#39; is selected, then the new value of NextInSequenceMask becomes 0xb011.

When NextInSequenceMask becomes zero, it is automatically reset to the default value (i.e. ResourceUnitMask).

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00095">95</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.
</MemberDefinition>

### RemovedFromNextInSequence {#a875fe6d657ee4e85a66e79d33f65c696}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::mca::DefaultResourceStrategy::RemovedFromNextInSequence</>}>
This field is used to track resource units that are used (i.e.

selected) by other groups other than the one associated with this strategy object.

In LLVM processor resource groups are allowed to partially (or fully) overlap. That means, a same unit may be visible to multiple groups. This field keeps track of uses that have originated from outside of this group. The idea is to bias the selection strategy, so that resources that haven&#39;t been used by other groups get prioritized.

The end goal is to (try to) keep the resource distribution as much uniform as possible. By construction, this mask only tracks one-level of resource usage. Therefore, this strategy is expected to be less accurate when same units are used multiple times by other groups within a single round of select.

Note: an LRU selector would have a better accuracy at the cost of being slightly more expensive (mostly in terms of runtime cost). Methods &#39;select&#39; and &#39;used&#39;, are always in the hot execution path of llvm-mca. Therefore, a slow implementation of &#39;select&#39; would have a negative impact on the overall performance of the tool.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00117">117</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.
</MemberDefinition>

### ResourceUnitMask {#a1367398974ada69c45d2f8ab0120c981}

<MemberDefinition
  prototype={<>const uint64&#95;t llvm::mca::DefaultResourceStrategy::ResourceUnitMask</>}>
A Mask of resource unit identifiers.

There is one bit set for every available resource unit. It defaults to the value of field ResourceSizeMask in <a href="/docs/api/classes/llvm/mca/resourcestate">ResourceState</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h/#l00072">72</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this class was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/mca/include/llvm/mca/hardwareunits/resourcemanager-h">ResourceManager.h</a></li>
<li><a href="/docs/api/files/lib/lib/mca/lib/mca/hardwareunits/resourcemanager-cpp">ResourceManager.cpp</a></li>
</ul>

</DoxygenPage>
