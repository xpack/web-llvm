---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/anonymous-namespace-lowermatrixintrinsics-cpp-/lowermatrixintrinsics/remarkgenerator
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `RemarkGenerator` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

Generate remarks for matrix operations in a function. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct anonymous_namespace{LowerMatrixIntrinsics.cpp}::LowerMatrixIntrinsics::RemarkGenerator</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a73de135507c562022c3d7eecb0699894">RemarkGenerator</a> (const MapVector&lt; Value &#42;, MatrixTy &gt; &amp;Inst2Matrix, OptimizationRemarkEmitter &amp;ORE, Function &amp;Func)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#aede10d0506e306b2e999635ebeeeb5f2">collectSharedInfo</a> (Value &#42;Leaf, Value &#42;V, const SmallSetVector&lt; Value &#42;, 32 &gt; &amp;ExprsInSubprogram, DenseMap&lt; Value &#42;, SmallPtrSet&lt; Value &#42;, 2 &gt; &gt; &amp;Shared)</>}>
Recursively traverse expression <code>V</code> starting at <code>Leaf</code> and add <code>Leaf</code> to all visited expressions in <code>Shared</code>. <a href="#aede10d0506e306b2e999635ebeeeb5f2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#afa50ad465c63aba4cc83c1e37248a860">emitRemarks</a> ()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 4 &gt;</>}
  name={<><a href="#a53d241b242a10e4f387b39e4497054db">getExpressionLeaves</a> (const SmallSetVector&lt; Value &#42;, 32 &gt; &amp;ExprsInSubprogram)</>}>
Return all leaves of the expressions in <code>ExprsInSubprogram</code>. <a href="#a53d241b242a10e4f387b39e4497054db">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="std::string"
  name={<><a href="#a35015ea3908e8d728e49b498130c835c">linearize</a> (Value &#42;L, const DenseMap&lt; Value &#42;, SmallPtrSet&lt; Value &#42;, 2 &gt; &gt; &amp;Shared, const SmallSetVector&lt; Value &#42;, 32 &gt; &amp;ExprsInSubprogram, const DataLayout &amp;DL)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; OpInfoTy, OpInfoTy &gt;</>}
  name={<><a href="#aec127cef6ea0cd9c8caf001e24d4abed">sumOpInfos</a> (Value &#42;Root, SmallPtrSetImpl&lt; Value &#42; &gt; &amp;ReusedExprs, const SmallSetVector&lt; Value &#42;, 32 &gt; &amp;ExprsInSubprogram, DenseMap&lt; Value &#42;, SmallPtrSet&lt; Value &#42;, 2 &gt; &gt; &amp;Shared) const</>}>
Calculate the number of exclusive and shared op counts for expression starting at <code>V</code>. <a href="#aec127cef6ea0cd9c8caf001e24d4abed">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;</>}
  name={<><a href="#a4ef49bb5322c89feceb7a78f5e01a179">DL</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/function">Function</a> &amp;</>}
  name={<><a href="#a45704943fab88f965bfc21f58cc25281">Func</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, MatrixTy &gt; &amp;</>}
  name={<><a href="#abea0b15956ed54d0552ea2e189d8b19b">Inst2Matrix</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/optimizationremarkemitter">OptimizationRemarkEmitter</a> &amp;</>}
  name={<><a href="#a7cd071961c14e58b4dd2e0469e643856">ORE</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Generate remarks for matrix operations in a function.

To generate remarks for matrix expressions, the following approach is used:
<ul>
<li><a href="/docs/api/classes/llvm/use">Use</a> the inlined-at debug information to group matrix operations to the DISubprograms they are contained in.</li>
<li>Collect leaves of matrix expressions (done in <a href="#a53d241b242a10e4f387b39e4497054db">RemarkGenerator::getExpressionLeaves</a>) for each subprogram - expression</li>
<li>For each leaf, create a remark containing a linearizied version of the matrix expression. The expression is linearized by a recursive bottom-up traversal of the matrix operands, starting at a leaf. Note that multiple leaves can share sub-expressions. Shared subexpressions are explicitly marked as shared().</li>
</ul>

Definition at line 2482 of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.

<SectionDefinition>

## Public Constructors

### RemarkGenerator() {#a73de135507c562022c3d7eecb0699894}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::RemarkGenerator (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/mapvector">MapVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, MatrixTy &gt; &amp; Inst2Matrix, <a href="/docs/api/classes/llvm/optimizationremarkemitter">OptimizationRemarkEmitter</a> &amp; ORE, <a href="/docs/api/classes/llvm/function">Function</a> &amp; Func)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02488">2488</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### collectSharedInfo() {#aede10d0506e306b2e999635ebeeeb5f2}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::collectSharedInfo (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Leaf, <a href="/docs/api/classes/llvm/value">Value</a> &#42; V, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 32 &gt; &amp; ExprsInSubprogram, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 2 &gt; &gt; &amp; Shared)</>}
  labels = {["inline"]}>
Recursively traverse expression <code>V</code> starting at <code>Leaf</code> and add <code>Leaf</code> to all visited expressions in <code>Shared</code>.

Limit the matrix operations to the ones in <code>ExprsInSubprogram</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02511">2511</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### emitRemarks() {#afa50ad465c63aba4cc83c1e37248a860}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::emitRemarks ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02556">2556</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### getExpressionLeaves() {#a53d241b242a10e4f387b39e4497054db}

<MemberDefinition
  prototype={<>SmallVector&lt; Value &#42;, 4 &gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::getExpressionLeaves (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 32 &gt; &amp; ExprsInSubprogram)</>}
  labels = {["inline"]}>
Return all leaves of the expressions in <code>ExprsInSubprogram</code>.

Those are instructions in Inst2Matrix returning void or without any users in <code>ExprsInSubprogram</code>. Currently that should only include stores.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02497">2497</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### linearize() {#a35015ea3908e8d728e49b498130c835c}

<MemberDefinition
  prototype={<>std::string anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::linearize (<a href="/docs/api/classes/llvm/value">Value</a> &#42; L, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 2 &gt; &gt; &amp; Shared, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 32 &gt; &amp; ExprsInSubprogram, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp; DL)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02632">2632</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### sumOpInfos() {#aec127cef6ea0cd9c8caf001e24d4abed}

<MemberDefinition
  prototype={<>std::pair&lt; OpInfoTy, OpInfoTy &gt; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::sumOpInfos (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Root, <a href="/docs/api/classes/llvm/smallptrsetimpl">SmallPtrSetImpl</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt; &amp; ReusedExprs, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 32 &gt; &amp; ExprsInSubprogram, <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 2 &gt; &gt; &amp; Shared) const</>}
  labels = {["inline"]}>
Calculate the number of exclusive and shared op counts for expression starting at <code>V</code>.

Expressions used multiple times are counted once. Limit the matrix operations to the ones in <code>ExprsInSubprogram</code>.

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02528">2528</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### DL {#a4ef49bb5322c89feceb7a78f5e01a179}

<MemberDefinition
  prototype={<>const DataLayout&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::DL</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02486">2486</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### Func {#a45704943fab88f965bfc21f58cc25281}

<MemberDefinition
  prototype={<>Function&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::Func</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02485">2485</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### Inst2Matrix {#abea0b15956ed54d0552ea2e189d8b19b}

<MemberDefinition
  prototype={<>const MapVector&lt;Value &#42;, MatrixTy&gt;&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::Inst2Matrix</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02483">2483</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

### ORE {#a7cd071961c14e58b4dd2e0469e643856}

<MemberDefinition
  prototype={<>OptimizationRemarkEmitter&amp; anonymous&#95;namespace&#123;LowerMatrixIntrinsics.cpp&#125;::LowerMatrixIntrinsics::RemarkGenerator::ORE</>}>

Definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp/#l02484">2484</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/lowermatrixintrinsics-cpp">LowerMatrixIntrinsics.cpp</a></li>
</ul>

</DoxygenPage>
