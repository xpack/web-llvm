---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/anonymous-namespace-sveintrinsicopts-cpp-/sveintrinsicopts
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `SVEIntrinsicOpts` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Declaration

<CodeBlock>struct anonymous_namespace{SVEIntrinsicOpts.cpp}::SVEIntrinsicOpts</CodeBlock>

## Base struct

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/modulepass">ModulePass</a></>}>
<a href="/docs/api/classes/llvm/modulepass">ModulePass</a> class - This class is used to implement unstructured interprocedural optimizations and analyses. <a href="/docs/api/classes/llvm/modulepass/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ab1097f33cee9c890c85be6409d5cee3f">SVEIntrinsicOpts</a> ()</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#ab1126ddaa19fe6e6ab65392b3e517bc8">getAnalysisUsage</a> (AnalysisUsage &amp;AU) const override</>}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job. <a href="#ab1126ddaa19fe6e6ab65392b3e517bc8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1584a357cf468cd0c59715c6ea92a37f">runOnModule</a> (Module &amp;M) override</>}>
runOnModule - Virtual method overriden by subclasses to process the module being operated on. <a href="#a1584a357cf468cd0c59715c6ea92a37f">More...</a>
</MembersIndexItem>

</MembersIndex>

## Private Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5921da9ad9a6d5c7bd951f83777bbe69">coalescePTrueIntrinsicCalls</a> (BasicBlock &amp;BB, SmallSetVector&lt; IntrinsicInst &#42;, 4 &gt; &amp;PTrues)</>}>
Attempts to coalesce ptrues in a basic block. <a href="#a5921da9ad9a6d5c7bd951f83777bbe69">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a95905a16dcf5db9c0294f869ef493b57">optimizeFunctions</a> (SmallSetVector&lt; Function &#42;, 4 &gt; &amp;Functions)</>}>
Operates at the function-scope. <a href="#a95905a16dcf5db9c0294f869ef493b57">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5308e79c34517ba3f721e76f83cf3884">optimizeInstructions</a> (SmallSetVector&lt; Function &#42;, 4 &gt; &amp;Functions)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a813c610cc6b4871d8f0ba338b4d70bc4">optimizePredicateLoad</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a302612b8670d3e8c3c4ead8f4dba99cb">optimizePredicateStore</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#adc70ec43a859c0a385d0a8ec92002db1">optimizePTrueIntrinsicCalls</a> (SmallSetVector&lt; Function &#42;, 4 &gt; &amp;Functions)</>}>
The goal of this function is to remove redundant calls to the SVE ptrue intrinsic in each basic block within the given functions. <a href="#adc70ec43a859c0a385d0a8ec92002db1">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Static Attributes Index

<MembersIndex>

<MembersIndexItem
  type="char"
  name={<><a href="#ab71b1c029f703ce097f887d555bcf1fd">ID</a> = 0</>}>
</MembersIndexItem>

</MembersIndex>


Definition at line 45 of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.

<SectionDefinition>

## Public Constructors

### SVEIntrinsicOpts() {#ab1097f33cee9c890c85be6409d5cee3f}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;SVEIntrinsicOpts.cpp&#125;::SVEIntrinsicOpts::SVEIntrinsicOpts ()</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00047">47</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### getAnalysisUsage() {#ab1126ddaa19fe6e6ab65392b3e517bc8}

<MemberDefinition
  prototype={<>void SVEIntrinsicOpts::getAnalysisUsage (<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;) const</>}
  labels = {["virtual"]}>
getAnalysisUsage - This function should be overriden by passes that need analysis information to do their job.

If a pass specifies that it uses a particular analysis result to this function, it can then use the <a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AnalysisType&gt;()</a> function, below.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00052">52</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### runOnModule() {#a1584a357cf468cd0c59715c6ea92a37f}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::runOnModule (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}
  labels = {["virtual"]}>
runOnModule - Virtual method overriden by subclasses to process the module being operated on.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00051">51</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Private Member Functions

### coalescePTrueIntrinsicCalls() {#a5921da9ad9a6d5c7bd951f83777bbe69}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::coalescePTrueIntrinsicCalls (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp; BB, <a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;, 4 &gt; &amp; PTrues)</>}>
Attempts to coalesce ptrues in a basic block.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00055">55</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### optimizeFunctions() {#a95905a16dcf5db9c0294f869ef493b57}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::optimizeFunctions (<a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/function">Function</a> &#42;, 4 &gt; &amp; Functions)</>}>
Operates at the function-scope.

I.e., optimizations are applied local to the functions themselves.

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00065">65</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### optimizeInstructions() {#a5308e79c34517ba3f721e76f83cf3884}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::optimizeInstructions (<a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/function">Function</a> &#42;, 4 &gt; &amp; Functions)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00061">61</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### optimizePredicateLoad() {#a813c610cc6b4871d8f0ba338b4d70bc4}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::optimizePredicateLoad (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00059">59</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### optimizePredicateStore() {#a302612b8670d3e8c3c4ead8f4dba99cb}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::optimizePredicateStore (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00058">58</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

### optimizePTrueIntrinsicCalls() {#adc70ec43a859c0a385d0a8ec92002db1}

<MemberDefinition
  prototype={<>bool SVEIntrinsicOpts::optimizePTrueIntrinsicCalls (<a href="/docs/api/classes/llvm/smallsetvector">SmallSetVector</a>&lt; <a href="/docs/api/classes/llvm/function">Function</a> &#42;, 4 &gt; &amp; Functions)</>}>
The goal of this function is to remove redundant calls to the SVE ptrue intrinsic in each basic block within the given functions.

SVE ptrues have two representations in LLVM IR:
<ul>
<li>a logical representation – an arbitrary-width scalable vector of i1s, i.e. &lt;vscale x N x i1&gt;.</li>
<li>a physical representation (svbool, &lt;vscale x 16 x i1&gt;) – a 16-element scalable vector of i1s, i.e. &lt;vscale x 16 x i1&gt;.</li>
</ul>


The SVE ptrue intrinsic is used to create a logical representation of an SVE predicate. Suppose that we have two SVE ptrue intrinsic calls: P1 and P2. If P1 creates a logical SVE predicate that is at least as wide as the logical SVE predicate created by P2, then all of the bits that are true in the physical representation of P2 are necessarily also true in the physical representation of P1. P1 &#39;encompasses&#39; P2, therefore, the intrinsic call to P2 is redundant and can be replaced by an SVE reinterpret of P1 via convert.&#123;to,from&#125;.svbool.

Currently, this pass only coalesces calls to SVE ptrue intrinsics if they match the following conditions:


<ul>
<li>the call to the intrinsic uses either the SV&#95;ALL or SV&#95;POW2 patterns. SV&#95;ALL indicates that all bits of the predicate vector are to be set to true. SV&#95;POW2 indicates that all bits of the predicate vector up to the largest power-of-two are to be set to true.</li>
<li>the result of the call to the intrinsic is not promoted to a wider predicate. In this case, keeping the extra ptrue leads to better codegen – coalescing here would create an irreducible chain of SVE reinterprets via convert.&#123;to,from&#125;.svbool.</li>
</ul>


EXAMPLE: <CodeBlock>%1 = &lt;vscale x 8 x i1&gt; ptrue(i32 SV&#95;ALL)
; Logical:  &lt;1, 1, 1, 1, 1, 1, 1, 1&gt;
; Physical: &lt;1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0&gt;
...

%2 = &lt;vscale x 4 x i1&gt; ptrue(i32 SV&#95;ALL)
; Logical:  &lt;1, 1, 1, 1&gt;
; Physical: &lt;1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0&gt;
...
</CodeBlock>

Here, %2 can be replaced by an SVE reinterpret of %1, giving, for instance: <CodeBlock>%1 = &lt;vscale x 8 x i1&gt; ptrue(i32 i31)
%2 = &lt;vscale x 16 x i1&gt; convert.to.svbool(&lt;vscale x 8 x i1&gt; %1)
%3 = &lt;vscale x 4 x i1&gt; convert.from.svbool(&lt;vscale x 16 x i1&gt; %2)
</CodeBlock>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00057">57</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Attributes

### ID {#ab71b1c029f703ce097f887d555bcf1fd}

<MemberDefinition
  prototype="char SVEIntrinsicOpts::ID = 0"
  labels = {["static"]}>

Definition at line <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp/#l00046">46</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/sveintrinsicopts-cpp">SVEIntrinsicOpts.cpp</a></li>
</ul>

</DoxygenPage>
