---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/llvm/irsimilarity/irinstructiondata
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `IRInstructionData` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

This provides the utilities for hashing an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to an unsigned integer. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct llvm::IRSimilarity::IRInstructionData</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Analysis/IRSimilarityIdentifier.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h"
  isLocal="true" />
</IncludesList>

## Base struct

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/ilist-node">ilist&#95;node&lt;T, Options&gt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Friends Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/hash-code">hash&#95;code</a></>}
  name={<><a href="#ac3fdb189d1625b937b2aedcf1de64f09">hash&#95;value</a></>}>
Hashes <code><a href="/docs/api/classes/llvm/value">Value</a></code> based on its opcode, types, and operand types. <a href="#ac3fdb189d1625b937b2aedcf1de64f09">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a31d26022f657b77aa802a9190611e87b">IRInstructionData</a> (Instruction &amp;I, bool Legality, IRInstructionDataList &amp;IDL)</>}>
Gather the information that is difficult to gather for an <a href="/docs/api/classes/llvm/instruction">Instruction</a>, or is changed. <a href="#a31d26022f657b77aa802a9190611e87b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a5e5e827e16f5593372018118eb77460d">IRInstructionData</a> (IRInstructionDataList &amp;IDL)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42; &gt;</>}
  name={<><a href="#a39ea8bd6480d74c1dab6eb54eae61d27">getBlockOperVals</a> ()</>}>
Get the <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> based operands for PHINodes and BranchInsts. <a href="#a39ea8bd6480d74c1dab6eb54eae61d27">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/stringref">StringRef</a></>}
  name={<><a href="#a0bab19cf37f51e4f51c8b9118e0f41bf">getCalleeName</a> () const</>}>
Get the callee name that the call instruction is using for hashing the instruction. <a href="#a0bab19cf37f51e4f51c8b9118e0f41bf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a></>}
  name={<><a href="#aec8cb8d34e83a9cfee265a5f8c9ca313">getPredicate</a> () const</>}>
Get the predicate that the compare instruction is using for hashing the instruction. <a href="#aec8cb8d34e83a9cfee265a5f8c9ca313">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a11f86f876fc26e82aaa048a2215da380">initializeInstruction</a> ()</>}>
Fills data stuctures for <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> when it is constructed from a. <a href="#a11f86f876fc26e82aaa048a2215da380">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ac69ce6b6aa6400d488d250ce4998691b">setBranchSuccessors</a> (DenseMap&lt; BasicBlock &#42;, unsigned &gt; &amp;BasicBlockToInteger)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a branch, finds the relative distances from the source basic block to the target by taking the difference of the number assigned to the current basic block and the target basic block of the branch. <a href="#ac69ce6b6aa6400d488d250ce4998691b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae0683ad49b9a0ccca8bd1c97987a8cf9">setCalleeName</a> (bool MatchByName=true)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a <a href="/docs/api/classes/llvm/callinst">CallInst</a>, set the function name appropriately. <a href="#ae0683ad49b9a0ccca8bd1c97987a8cf9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ab11b9d6834e7a409b18c71e0b19876f5">setPHIPredecessors</a> (DenseMap&lt; BasicBlock &#42;, unsigned &gt; &amp;BasicBlockToInteger)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a <a href="/docs/api/classes/llvm/phinode">PHINode</a>, finds the relative distances from the incoming basic block to the current block by taking the difference of the number assigned to the current basic block and the incoming basic block of the branch. <a href="#ab11b9d6834e7a409b18c71e0b19876f5">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>std::optional&lt; std::string &gt;</>}
  name={<><a href="#a292aaa1e14576c8e38a2aad65d44f833">CalleeName</a></>}>
This is only relevant if we are wrapping a <a href="/docs/api/classes/llvm/callinst">CallInst</a>. <a href="#a292aaa1e14576c8e38a2aad65d44f833">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &#42;</>}
  name={<><a href="#aa685872100ad969dfd871803e3d7e0b9">IDL</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;</>}
  name={<><a href="#a8f280453f9963266308cb61e428f5268">Inst</a> = nullptr</>}>
The source <a href="/docs/api/classes/llvm/instruction">Instruction</a> that is being wrapped. <a href="#a8f280453f9963266308cb61e428f5268">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad05fd093f3eb994c056a4d353684aaf8">Legal</a> = false</>}>
The legality of the wrapped instruction. <a href="#ad05fd093f3eb994c056a4d353684aaf8">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/value">Value</a> &#42;, 4 &gt;</>}
  name={<><a href="#ab39a288c69393c860063b5d0348dc05a">OperVals</a></>}>
The values of the operands in the <a href="/docs/api/classes/llvm/instruction">Instruction</a>. <a href="#ab39a288c69393c860063b5d0348dc05a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; int, 4 &gt;</>}
  name={<><a href="#a2606c92d4c122037d9065123c3db3093">RelativeBlockLocations</a></>}>
This structure holds the distances of how far &quot;ahead of&quot; or &quot;behind&quot; the target blocks of a branch, or the incoming blocks of a phi nodes are. <a href="#a2606c92d4c122037d9065123c3db3093">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; <a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> &gt;</>}
  name={<><a href="#aed3027a8796d2aa6a899077856e14da4">RevisedPredicate</a></>}>
This is only relevant if we are wrapping a <a href="/docs/api/classes/llvm/cmpinst">CmpInst</a> where we needed to change the predicate of a compare instruction from a greater than form to a less than form. <a href="#aed3027a8796d2aa6a899077856e14da4">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Static Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a></>}
  name={<><a href="#aa7aa1c92fb184b145e4841fc114e790b">predicateForConsistency</a> (CmpInst &#42;CI)</>}>
A function that swaps the predicates to their less than form if they are in a greater than form. <a href="#aa7aa1c92fb184b145e4841fc114e790b">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This provides the utilities for hashing an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to an unsigned integer.

Two IRInstructionDatas produce the same hash value when their underlying Instructions perform the same operation (even if they don&#39;t have the same input operands.) As a more concrete example, consider the following:


<ProgramListing>

<CodeLine><Highlight kind="normal">%add1 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %a, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea92eb5ffee6ae2fec3ad71c777531578f">b</a></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add2 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %c, %d</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add3 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i64 %<a href="/docs/api/namespaces/llvm/numbers/#a92f4283d4e0e2ea1776894b3ae93640f">e</a>, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea8fa14cdd754f91cc6554c9e71929cce7">f</a></Highlight></CodeLine>

</ProgramListing>
 so:


<ProgramListing>

<CodeLine><Highlight kind="normal">; These two adds have the same types and operand types, so they <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a6bd941efdf0dfa54d3abdb829ac86ae4">hash</a> to the</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">; same <a href="/docs/api/namespaces/llvm/xray/anonymous-blockverifier-cpp-/#a08f237df2d000ae6ee9be82263c9292d">number</a>.</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add1 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %a, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea92eb5ffee6ae2fec3ad71c777531578f">b</a> ; Hash: 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add2 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %c, %d ; Hash: 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">; <a href="/docs/api/namespaces/llvm/codeview/#a7c84cffd04a037f3e087b309bf176929a77631ca4f0e08419b70726a447333ab6">This</a> <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> produces an i64. <a href="/docs/api/namespaces/llvm/codeview/#a7c84cffd04a037f3e087b309bf176929a77631ca4f0e08419b70726a447333ab6">This</a> differentiates it from %add1 and %add2. So,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">; it hashes to a different <a href="/docs/api/namespaces/llvm/xray/anonymous-blockverifier-cpp-/#a08f237df2d000ae6ee9be82263c9292d">number</a>.</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add3 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i64 %<a href="/docs/api/namespaces/llvm/numbers/#a92f4283d4e0e2ea1776894b3ae93640f">e</a>, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea8fa14cdd754f91cc6554c9e71929cce7">f</a>; Hash: 2</Highlight></CodeLine>

</ProgramListing>


This hashing scheme will be used to represent the program as a very long string. This string can then be placed in a data structure which can be used for similarity queries.

TODO: Handle types of Instructions which can be equal even with different operands. (E.g. comparisons with swapped predicates.) TODO: Handle CallInsts, which are only checked for function type by isSameOperationAs. TODO: Handle GetElementPtrInsts, as some of the operands have to be the exact same, and some do not.

Definition at line 114 of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.

<SectionDefinition>

## Friends

### hash&#95;value {#ac3fdb189d1625b937b2aedcf1de64f09}

<MemberDefinition
  prototype={<>friend <a href="/docs/api/classes/llvm/hash-code">hash&#95;code</a> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &amp; ID</>}
  labels = {["inline"]}>
Hashes <code><a href="/docs/api/classes/llvm/value">Value</a></code> based on its opcode, types, and operand types.

Two <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> instances produce the same hash when they perform the same operation.

As a simple example, consider the following instructions.


<ProgramListing>

<CodeLine><Highlight kind="normal">%add1 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %x1, %y1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add2 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %x2, %y2</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%<a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i32 %x1, %y1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add&#95;i64 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i64 %x2, %y2</Highlight></CodeLine>

</ProgramListing>


Because the first two adds operate the same types, and are performing the same action, they will be hashed to the same value.

However, the subtraction instruction is not the same as an addition, and will be hashed to a different value.

Finally, the last add has a different type compared to the first two add instructions, so it will also be hashed to a different value that any of the previous instructions.


<ParametersList title="Parameters">
<ParametersListItem name="<a href=&quot;/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed&quot;>ID</a>">- The <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> instance to be hashed.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
A hash&#95;value of the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a>.
</SectionUser>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00260">260</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Constructors

### IRInstructionData() {#a31d26022f657b77aa802a9190611e87b}

<MemberDefinition
  prototype={<>IRInstructionData::IRInstructionData (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I, bool Legality, <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &amp; IDL)</>}>
Gather the information that is difficult to gather for an <a href="/docs/api/classes/llvm/instruction">Instruction</a>, or is changed.

i.e. the operands of an <a href="/docs/api/classes/llvm/instruction">Instruction</a> and the Types of those operands. This extra information allows for similarity matching to make assertions that allow for more flexibility when checking for whether an <a href="/docs/api/classes/llvm/instruction">Instruction</a> performs the same operation.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00171">171</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00049">49</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### IRInstructionData() {#a5e5e827e16f5593372018118eb77460d}

<MemberDefinition
  prototype={<>IRInstructionData::IRInstructionData (<a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &amp; IDL)</>}>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00172">172</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00085">85</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### getBlockOperVals() {#a39ea8bd6480d74c1dab6eb54eae61d27}

<MemberDefinition
  prototype={<>ArrayRef&lt; Value &#42; &gt; IRInstructionData::getBlockOperVals ()</>}>
Get the <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> based operands for PHINodes and BranchInsts.

<SectionUser title="Returns">
A list of relevant BasicBlocks.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00231">231</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00113">113</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### getCalleeName() {#a0bab19cf37f51e4f51c8b9118e0f41bf}

<MemberDefinition
  prototype="StringRef IRInstructionData::getCalleeName () const">
Get the callee name that the call instruction is using for hashing the instruction.

The <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> must be wrapping a <a href="/docs/api/classes/llvm/callinst">CallInst</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00184">184</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00212">212</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### getPredicate() {#aec8cb8d34e83a9cfee265a5f8c9ca313}

<MemberDefinition
  prototype="CmpInst::Predicate IRInstructionData::getPredicate () const">
Get the predicate that the compare instruction is using for hashing the instruction.

the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> must be wrapping a <a href="/docs/api/classes/llvm/cmpinst">CmpInst</a>.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00180">180</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00202">202</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### initializeInstruction() {#a11f86f876fc26e82aaa048a2215da380}

<MemberDefinition
  prototype="void IRInstructionData::initializeInstruction ()">
Fills data stuctures for <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> when it is constructed from a.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00176">176</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00055">55</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### setBranchSuccessors() {#ac69ce6b6aa6400d488d250ce4998691b}

<MemberDefinition
  prototype={<>void IRInstructionData::setBranchSuccessors (<a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;, unsigned &gt; &amp; BasicBlockToInteger)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a branch, finds the relative distances from the source basic block to the target by taking the difference of the number assigned to the current basic block and the target basic block of the branch.

<ParametersList title="Parameters">
<ParametersListItem name="BasicBlockToInteger">- The mapping of basic blocks to their location in the module.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00201">201</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00088">88</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### setCalleeName() {#ae0683ad49b9a0ccca8bd1c97987a8cf9}

<MemberDefinition
  prototype={<>void IRInstructionData::setCalleeName (bool MatchByName=<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a <a href="/docs/api/classes/llvm/callinst">CallInst</a>, set the function name appropriately.

This will be an empty string if it is an indirect call, or we are not matching by name of the called function. It will be the name of the function if <code>MatchByName</code> is true and it is not an indirect call. We may decide not to match by name in order to expand the size of the regions we can match. If a function name has the same type signature, but the different name, the region of code is still almost the same. Since function names can be treated as constants, the name itself could be extrapolated away. However, matching by name provides a specificity and more &quot;identical&quot; code than not matching by name.


<ParametersList title="Parameters">
<ParametersListItem name="MatchByName">- A flag to mark whether we are using the called function name as a differentiating parameter.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00216">216</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00132">132</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### setPHIPredecessors() {#ab11b9d6834e7a409b18c71e0b19876f5}

<MemberDefinition
  prototype={<>void IRInstructionData::setPHIPredecessors (<a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;, unsigned &gt; &amp; BasicBlockToInteger)</>}>
For an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> containing a <a href="/docs/api/classes/llvm/phinode">PHINode</a>, finds the relative distances from the incoming basic block to the current block by taking the difference of the number assigned to the current basic block and the incoming basic block of the branch.

<ParametersList title="Parameters">
<ParametersListItem name="BasicBlockToInteger">- The mapping of basic blocks to their location in the module.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00226">226</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00159">159</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### CalleeName {#a292aaa1e14576c8e38a2aad65d44f833}

<MemberDefinition
  prototype={<>std::optional&lt;std::string&gt; llvm::IRSimilarity::IRInstructionData::CalleeName</>}>
This is only relevant if we are wrapping a <a href="/docs/api/classes/llvm/callinst">CallInst</a>.

If we are requiring that the function calls have matching names as well as types, and the call is not an indirect call, this will hold the name of the function. If it is an indirect string, it will be the empty string. However, if this requirement is not in place it will be the empty string regardless of the function call type. The value held here is used to create the hash of the instruction, and check to make sure two instructions are close to one another.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00140">140</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### IDL {#aa685872100ad969dfd871803e3d7e0b9}

<MemberDefinition
  prototype={<>IRInstructionDataList&#42; llvm::IRSimilarity::IRInstructionData::IDL = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00299">299</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### Inst {#a8f280453f9963266308cb61e428f5268}

<MemberDefinition
  prototype={<>Instruction&#42; llvm::IRSimilarity::IRInstructionData::Inst = nullptr</>}>
The source <a href="/docs/api/classes/llvm/instruction">Instruction</a> that is being wrapped.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00118">118</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### Legal {#ad05fd093f3eb994c056a4d353684aaf8}

<MemberDefinition
  prototype="bool llvm::IRSimilarity::IRInstructionData::Legal = false">
The legality of the wrapped instruction.

This is informed by <a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a>, and is used when checking when two instructions are considered similar. If either instruction is not legal, the instructions are automatically not considered similar.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00125">125</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### OperVals {#ab39a288c69393c860063b5d0348dc05a}

<MemberDefinition
  prototype={<>SmallVector&lt;Value &#42;, 4&gt; llvm::IRSimilarity::IRInstructionData::OperVals</>}>
The values of the operands in the <a href="/docs/api/classes/llvm/instruction">Instruction</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00120">120</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### RelativeBlockLocations {#a2606c92d4c122037d9065123c3db3093}

<MemberDefinition
  prototype={<>SmallVector&lt;int, 4&gt; llvm::IRSimilarity::IRInstructionData::RelativeBlockLocations</>}>
This structure holds the distances of how far &quot;ahead of&quot; or &quot;behind&quot; the target blocks of a branch, or the incoming blocks of a phi nodes are.

If the value is negative, it means that the block was registered before the block of this instruction in terms of blocks in the function. Code Example: 
<ProgramListing>

<CodeLine><Highlight kind="normal">block&#95;1:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %0, label %block&#95;2, label %block&#95;3</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">block&#95;2:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %1, label %block&#95;1, label %block&#95;2</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">block&#95;3:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %2, label %block&#95;2, label %block&#95;1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">; Replacing the labels with relative <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">values</a>, </Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal"> becomes:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">block&#95;1:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %0, distance 1, distance 2</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">block&#95;2:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %1, distance -1, distance 0</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">block&#95;3:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  br i1 %2, distance -1, distance -2</Highlight></CodeLine>

</ProgramListing>
 Taking block&#95;2 as our example, block&#95;1 is &quot;behind&quot; block&#95;2, and block&#95;2 is &quot;ahead&quot; of block&#95;2.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00164">164</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### RevisedPredicate {#aed3027a8796d2aa6a899077856e14da4}

<MemberDefinition
  prototype={<>std::optional&lt;CmpInst::Predicate&gt; llvm::IRSimilarity::IRInstructionData::RevisedPredicate</>}>
This is only relevant if we are wrapping a <a href="/docs/api/classes/llvm/cmpinst">CmpInst</a> where we needed to change the predicate of a compare instruction from a greater than form to a less than form.

It is std::nullopt otherwise.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00130">130</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Static Functions

### predicateForConsistency() {#aa7aa1c92fb184b145e4841fc114e790b}

<MemberDefinition
  prototype={<>CmpInst::Predicate IRInstructionData::predicateForConsistency (<a href="/docs/api/classes/llvm/cmpinst">CmpInst</a> &#42; CI)</>}
  labels = {["static"]}>
A function that swaps the predicates to their less than form if they are in a greater than form.

Otherwise, the predicate is unchanged.


<ParametersList title="Parameters">
<ParametersListItem name="CI">- The comparison operation to find a consistent preidcate for.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
the consistent comparison predicate.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00191">191</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00186">186</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a></li>
<li><a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a></li>
</ul>

</DoxygenPage>
