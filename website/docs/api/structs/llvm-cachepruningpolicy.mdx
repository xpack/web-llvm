---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/llvm/cachepruningpolicy
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `CachePruningPolicy` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

Policy for the <a href="/docs/api/namespaces/llvm/#aabba6d27907082520ad2eb977c8e406b">pruneCache()</a> function. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct llvm::CachePruningPolicy</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Support/CachePruning.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h"
  isLocal="true" />
</IncludesList>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="std::chrono::seconds"
  name={<><a href="#a4e4e128e83c615ca4ed425980b41e64f">Expiration</a> = std::chrono::hours(7 &#42; 24)</>}>
The expiration for a file. <a href="#a4e4e128e83c615ca4ed425980b41e64f">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; std::chrono::seconds &gt;</>}
  name={<><a href="#a26f65d4efd088dd6f035a970ef350628">Interval</a> = std::chrono::seconds(1200)</>}>
The pruning interval. <a href="#a26f65d4efd088dd6f035a970ef350628">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a8c514fa2ef23ee2f092cedf2691886dd">MaxSizeBytes</a> = 0</>}>
The maximum size for the cache directory in bytes. <a href="#a8c514fa2ef23ee2f092cedf2691886dd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a0b73cd4206ae3e5edc07c24afb2057ac">MaxSizeFiles</a> = 1000000</>}>
The maximum number of files in the cache directory. <a href="#a0b73cd4206ae3e5edc07c24afb2057ac">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#ac13a6c169c6b44529d9f6bae76c8b4ed">MaxSizePercentageOfAvailableSpace</a> = 75</>}>
The maximum size for the cache directory, in terms of percentage of the available space on the disk. <a href="#ac13a6c169c6b44529d9f6bae76c8b4ed">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Policy for the <a href="/docs/api/namespaces/llvm/#aabba6d27907082520ad2eb977c8e406b">pruneCache()</a> function.

A default constructed <a href="/docs/api/structs/llvm/cachepruningpolicy">CachePruningPolicy</a> provides a reasonable default policy.

Definition at line 28 of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.

<SectionDefinition>

## Public Member Attributes

### Expiration {#a4e4e128e83c615ca4ed425980b41e64f}

<MemberDefinition
  prototype={<>std::chrono::seconds llvm::CachePruningPolicy::Expiration = std::chrono::hours(7 &#42; 24)</>}>
The expiration for a file.

When a file hasn&#39;t been accessed for Expiration seconds, it is removed from the cache. A value of 0 disables the expiration-based pruning.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h/#l00038">38</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.
</MemberDefinition>

### Interval {#a26f65d4efd088dd6f035a970ef350628}

<MemberDefinition
  prototype={<>std::optional&lt;std::chrono::seconds&gt; llvm::CachePruningPolicy::Interval = std::chrono::seconds(1200)</>}>
The pruning interval.

This is intended to be used to avoid scanning the directory too often. It does not impact the decision of which file to prune. A value of 0 forces the scan to occur. A value of std::nullopt disables pruning.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h/#l00033">33</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.
</MemberDefinition>

### MaxSizeBytes {#a8c514fa2ef23ee2f092cedf2691886dd}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::CachePruningPolicy::MaxSizeBytes = 0</>}>
The maximum size for the cache directory in bytes.

A value over the amount of available space on the disk will be reduced to the amount of available space. A value of 0 disables the absolute size-based pruning.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h/#l00050">50</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.
</MemberDefinition>

### MaxSizeFiles {#a0b73cd4206ae3e5edc07c24afb2057ac}

<MemberDefinition
  prototype={<>uint64&#95;t llvm::CachePruningPolicy::MaxSizeFiles = 1000000</>}>
The maximum number of files in the cache directory.

A value of 0 disables the number of files based pruning.

This defaults to 1000000 because with that many files there are diminishing returns on the effectiveness of the cache. Some systems have a limit on total number of files, and some also limit the number of files per directory, such as Linux ext4, with the default setting (block size is 4096 and large&#95;dir disabled), there is a per-directory entry limit of 508&#42;510&#42;floor(4096/(40+8))~=20M for average filename length of 40.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h/#l00061">61</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.
</MemberDefinition>

### MaxSizePercentageOfAvailableSpace {#ac13a6c169c6b44529d9f6bae76c8b4ed}

<MemberDefinition
  prototype="unsigned llvm::CachePruningPolicy::MaxSizePercentageOfAvailableSpace = 75">
The maximum size for the cache directory, in terms of percentage of the available space on the disk.

Set to 100 to indicate no limit, 50 to indicate that the cache size will not be left over half the available disk space. A value over 100 will be reduced to 100. A value of 0 disables the percentage size-based pruning.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h/#l00045">45</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following file:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/support/cachepruning-h">CachePruning.h</a></li>
</ul>

</DoxygenPage>
