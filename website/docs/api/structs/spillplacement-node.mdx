---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/spillplacement/node
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `Node` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

<a href="/docs/api/classes/node">Node</a> - Each edge bundle corresponds to a Hopfield node. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct SpillPlacement::Node</CodeBlock>

## Public Member Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#aa492038a47765ed217bf484825fa0fc8">LinkVector</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; std::pair&lt; <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a>, unsigned &gt;, 4 &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a03bf04c760f4e0dc8f8673a6dbbc1f37">addBias</a> (BlockFrequency freq, BorderConstraint direction)</>}>
addBias - Bias this node. <a href="#a03bf04c760f4e0dc8f8673a6dbbc1f37">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a414c03213909b5fd790e6f1b505b7099">addLink</a> (unsigned b, BlockFrequency w)</>}>
addLink - Add a link to bundle b with weight w. <a href="#a414c03213909b5fd790e6f1b505b7099">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ac905ce5783c59de0655d9733cd1f6b83">clear</a> (BlockFrequency Threshold)</>}>
clear - Reset per-query data, but preserve frequencies that only depend on the CFG. <a href="#ac905ce5783c59de0655d9733cd1f6b83">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#af1f662c46e92ef73f72533ef32887586">getDissentingNeighbors</a> (SparseSet&lt; unsigned &gt; &amp;List, const Node nodes&#91;&#93;) const</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ae39aa56454ff85c86ddd1aca307354bd">mustSpill</a> () const</>}>
mustSpill - Return True if this node is so biased that it must spill. <a href="#ae39aa56454ff85c86ddd1aca307354bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a15e88c2cf83e7164d2d0d85ed00f9b31">preferReg</a> () const</>}>
preferReg - Return true when this node prefers to be in a register. <a href="#a15e88c2cf83e7164d2d0d85ed00f9b31">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a25feab88416725ad9114fbb86af5dfc1">update</a> (const Node nodes&#91;&#93;, BlockFrequency Threshold)</>}>
update - Recompute <a href="/docs/api/classes/llvm/value">Value</a> from Bias and Links. <a href="#a25feab88416725ad9114fbb86af5dfc1">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a370ae71068f6725ac2c6b61cf66a05b4">BiasN</a></>}>
BiasN - Sum of blocks that prefer a spill. <a href="#a370ae71068f6725ac2c6b61cf66a05b4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a67abf92d6eabc03f37e9a2bd422e290a">BiasP</a></>}>
BiasP - Sum of blocks that prefer a register. <a href="#a67abf92d6eabc03f37e9a2bd422e290a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="#aa492038a47765ed217bf484825fa0fc8">LinkVector</a></>}
  name={<><a href="#a5a13362b22c15eb1235eacd5f8440ed4">Links</a></>}>
Links - (Weight, BundleNo) for all transparent blocks connecting to other bundles. <a href="#a5a13362b22c15eb1235eacd5f8440ed4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a></>}
  name={<><a href="#a2b91674cb12c7e0eb5bddcd71213e4c6">SumLinkWeights</a></>}>
SumLinkWeights - Cached sum of the weights of all links + ThresHold. <a href="#a2b91674cb12c7e0eb5bddcd71213e4c6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="int"
  name={<><a href="#a6155db02c64ef3abd03259a7dba04ea9">Value</a></>}>
<a href="/docs/api/classes/llvm/value">Value</a> - Output value of this node computed from the Bias and links. <a href="#a6155db02c64ef3abd03259a7dba04ea9">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

<a href="/docs/api/classes/node">Node</a> - Each edge bundle corresponds to a Hopfield node.

The node contains precomputed frequency data that only depends on the CFG, but Bias and Links are computed each time placeSpills is called.

The node <a href="/docs/api/classes/llvm/value">Value</a> is positive when the variable should be in a register. The value can change when linked nodes change, but convergence is very fast because all weights are positive.

Definition at line 72 of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.

<SectionDefinition>

## Public Member Typedefs

### LinkVector {#aa492038a47765ed217bf484825fa0fc8}

<MemberDefinition
  prototype={<>using llvm::SpillPlacement::Node::LinkVector =  SmallVector&lt;std::pair&lt;BlockFrequency, unsigned&gt;, 4&gt;</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00084">84</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### addBias() {#a03bf04c760f4e0dc8f8673a6dbbc1f37}

<MemberDefinition
  prototype={<>void llvm::SpillPlacement::Node::addBias (<a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> freq, <a href="/docs/api/classes/llvm/spillplacement/#ab09623fee8a653165a7cc624b8eaaa8c">BorderConstraint</a> direction)</>}
  labels = {["inline"]}>
addBias - Bias this node.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00133">133</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### addLink() {#a414c03213909b5fd790e6f1b505b7099}

<MemberDefinition
  prototype={<>void llvm::SpillPlacement::Node::addLink (unsigned b, <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> w)</>}
  labels = {["inline"]}>
addLink - Add a link to bundle b with weight w.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00118">118</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### clear() {#ac905ce5783c59de0655d9733cd1f6b83}

<MemberDefinition
  prototype={<>void llvm::SpillPlacement::Node::clear (<a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> Threshold)</>}
  labels = {["inline"]}>
clear - Reset per-query data, but preserve frequencies that only depend on the CFG.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00109">109</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### getDissentingNeighbors() {#af1f662c46e92ef73f72533ef32887586}

<MemberDefinition
  prototype={<>void llvm::SpillPlacement::Node::getDissentingNeighbors (<a href="/docs/api/classes/llvm/sparseset">SparseSet</a>&lt; unsigned &gt; &amp; List, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/spillplacement/node">Node</a> nodes=[]) const</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00180">180</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### mustSpill() {#ae39aa56454ff85c86ddd1aca307354bd}

<MemberDefinition
  prototype="bool llvm::SpillPlacement::Node::mustSpill () const"
  labels = {["inline"]}>
mustSpill - Return True if this node is so biased that it must spill.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00100">100</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### preferReg() {#a15e88c2cf83e7164d2d0d85ed00f9b31}

<MemberDefinition
  prototype="bool llvm::SpillPlacement::Node::preferReg () const"
  labels = {["inline"]}>
preferReg - Return true when this node prefers to be in a register.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00094">94</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### update() {#a25feab88416725ad9114fbb86af5dfc1}

<MemberDefinition
  prototype={<>bool llvm::SpillPlacement::Node::update (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/spillplacement/node">Node</a> nodes=[], <a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> Threshold)</>}
  labels = {["inline"]}>
update - Recompute <a href="/docs/api/classes/llvm/value">Value</a> from Bias and Links.

Return true when node preference changes.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00151">151</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### BiasN {#a370ae71068f6725ac2c6b61cf66a05b4}

<MemberDefinition
  prototype="BlockFrequency llvm::SpillPlacement::Node::BiasN">
BiasN - Sum of blocks that prefer a spill.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00074">74</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### BiasP {#a67abf92d6eabc03f37e9a2bd422e290a}

<MemberDefinition
  prototype="BlockFrequency llvm::SpillPlacement::Node::BiasP">
BiasP - Sum of blocks that prefer a register.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00077">77</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### Links {#a5a13362b22c15eb1235eacd5f8440ed4}

<MemberDefinition
  prototype="LinkVector llvm::SpillPlacement::Node::Links">
Links - (Weight, BundleNo) for all transparent blocks connecting to other bundles.

The weights are all positive block frequencies.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00088">88</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### SumLinkWeights {#a2b91674cb12c7e0eb5bddcd71213e4c6}

<MemberDefinition
  prototype="BlockFrequency llvm::SpillPlacement::Node::SumLinkWeights">
SumLinkWeights - Cached sum of the weights of all links + ThresHold.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00091">91</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

### Value {#a6155db02c64ef3abd03259a7dba04ea9}

<MemberDefinition
  prototype="int llvm::SpillPlacement::Node::Value">
<a href="/docs/api/classes/llvm/value">Value</a> - Output value of this node computed from the Bias and links.

This is always on of the values &#123;-1, 0, 1&#125;. A positive number means the variable should go in a register through this bundle.

Definition at line <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp/#l00082">82</a> of file <a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/spillplacement-cpp">SpillPlacement.cpp</a></li>
</ul>

</DoxygenPage>
