---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/llvm/irsimilarity/irinstructionmapper
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `IRInstructionMapper` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

Helper struct for converting the Instructions in a <a href="/docs/api/classes/llvm/module">Module</a> into a vector of unsigned integers. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct llvm::IRSimilarity::IRInstructionMapper</CodeBlock>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Analysis/IRSimilarityIdentifier.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h"
  isLocal="true" />
</IncludesList>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ab074cefd064d3c9f84f7207dbee71724">IRInstructionMapper</a> (SpecificBumpPtrAllocator&lt; IRInstructionData &gt; &#42;IDA, SpecificBumpPtrAllocator&lt; IRInstructionDataList &gt; &#42;IDLA)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42;</>}
  name={<><a href="#aac95ccee9d5cbc582a1bab1d1e9e854d">allocateIRInstructionData</a> (Instruction &amp;I, bool Legality, IRInstructionDataList &amp;IDL)</>}>
Get an allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct using the InstDataAllocator. <a href="#aac95ccee9d5cbc582a1bab1d1e9e854d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42;</>}
  name={<><a href="#a0a81ca571e91f33e3a9e433e8bb075b3">allocateIRInstructionData</a> (IRInstructionDataList &amp;IDL)</>}>
Get an empty allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct using the InstDataAllocator. <a href="#a0a81ca571e91f33e3a9e433e8bb075b3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &#42;</>}
  name={<><a href="#accaaf76a12845e506563d51d9617773d">allocateIRInstructionDataList</a> ()</>}>
Get an allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> object using the IDLAllocator. <a href="#accaaf76a12845e506563d51d9617773d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae3af188e096e8a1152a33285a1c83c33">convertToUnsignedVec</a> (BasicBlock &amp;BB, std::vector&lt; IRInstructionData &#42; &gt; &amp;InstrList, std::vector&lt; unsigned &gt; &amp;IntegerMapping)</>}>
Maps the Instructions in a <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> <code>BB</code> to legal or illegal integers determined by <code><a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a></code>. <a href="#ae3af188e096e8a1152a33285a1c83c33">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a7c35c00b1125706d72f31c37b442fdc2">initializeForBBs</a> (Function &amp;F, unsigned &amp;BBNumber)</>}>
Assigns values to all the basic blocks in function <code>F</code> starting from integer <code>BBNumber</code>. <a href="#a7c35c00b1125706d72f31c37b442fdc2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aac04bc0ac4b1620a9c9aa65c761b3344">initializeForBBs</a> (Module &amp;M)</>}>
Assigns values to all the basic blocks in <a href="/docs/api/classes/llvm/module">Module</a> <code>M</code>. <a href="#aac04bc0ac4b1620a9c9aa65c761b3344">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aee2e5f8ff22ce6063643fea5c5b282d5">mapToIllegalUnsigned</a> (BasicBlock::iterator &amp;It, std::vector&lt; unsigned &gt; &amp;IntegerMappingForBB, std::vector&lt; IRInstructionData &#42; &gt; &amp;InstrListForBB, bool End=false)</>}>
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to an illegal integer. <a href="#aee2e5f8ff22ce6063643fea5c5b282d5">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#ae392ae2bd47b6a65a6d70f61ad7225a3">mapToLegalUnsigned</a> (BasicBlock::iterator &amp;It, std::vector&lt; unsigned &gt; &amp;IntegerMappingForBB, std::vector&lt; IRInstructionData &#42; &gt; &amp;InstrListForBB)</>}>
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to a legal integer. <a href="#ae392ae2bd47b6a65a6d70f61ad7225a3">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#aed7023ae0be840bc273712a9905e3c06">AddedIllegalLastTime</a> = false</>}>
Set if we added an illegal number in the previous step. <a href="#aed7023ae0be840bc273712a9905e3c06">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;, unsigned &gt;</>}
  name={<><a href="#ac340be8c899d6572628a6944b17110bc">BasicBlockToInteger</a></>}>
A mapping for a basic block in a module to its assigned number/location in the module. <a href="#ac340be8c899d6572628a6944b17110bc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab943fd711b08ed084ecf2ed90abf1832">CanCombineWithPrevInstr</a> = false</>}>
Marks whether we found a illegal instruction in the previous step. <a href="#ab943fd711b08ed084ecf2ed90abf1832">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3ab651a0029c43f8639d98cbe3a4bc0c">EnableMatchCallsByName</a> = false</>}>
Marks whether we should use exact function names, as well as types to find similarity between calls. <a href="#a3ab651a0029c43f8639d98cbe3a4bc0c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aa21c1493313104ffa2d57c0379c4d145">HaveLegalRange</a> = false</>}>
Marks whether we have found a set of instructions that is long enough to be considered for similarity. <a href="#aa21c1493313104ffa2d57c0379c4d145">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &#42;</>}
  name={<><a href="#aba61492b976936c3faf96a7713e175d9">IDL</a> = nullptr</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/specificbumpptrallocator">SpecificBumpPtrAllocator</a>&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &gt; &#42;</>}
  name={<><a href="#a2fdad6185139f685b846369c634a04cf">IDLAllocator</a> = nullptr</>}>
This allocator pointer is in charge of creating the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> so it is not deallocated until whatever external tool is using it is done with the information. <a href="#a2fdad6185139f685b846369c634a04cf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a60e5af3b7e239b6fdad88efbe1e861bd">IllegalInstrNumber</a> = static&#95;cast&lt;unsigned&gt;(-3)</>}>
The starting illegal instruction number to map to. <a href="#a60e5af3b7e239b6fdad88efbe1e861bd">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/structs/llvm/irsimilarity/irinstructionmapper/instructionclassification">InstructionClassification</a></>}
  name={<><a href="#a7a0011906a29aacd3db06d94b41193e2">InstClassifier</a></>}>
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to a member of <a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a>. <a href="#a7a0011906a29aacd3db06d94b41193e2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/specificbumpptrallocator">SpecificBumpPtrAllocator</a>&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &gt; &#42;</>}
  name={<><a href="#a300223e253d8cc149948becb9ef98378">InstDataAllocator</a> = nullptr</>}>
This allocator pointer is in charge of holding on to the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> so it is not deallocated until whatever external tool is using it is done with the information. <a href="#a300223e253d8cc149948becb9ef98378">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42;, unsigned, <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatatraits">IRInstructionDataTraits</a> &gt;</>}
  name={<><a href="#a0f22f1cd41d211cd1c0f3ada0f43d576">InstructionIntegerMap</a></>}>
Correspondence from <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> to unsigned integers. <a href="#a0f22f1cd41d211cd1c0f3ada0f43d576">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a586d66c347a83ddac2d4552c720d3511">LegalInstrNumber</a> = 0</>}>
The next available integer to assign to a legal <a href="/docs/api/classes/llvm/instruction">Instruction</a> to. <a href="#a586d66c347a83ddac2d4552c720d3511">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Helper struct for converting the Instructions in a <a href="/docs/api/classes/llvm/module">Module</a> into a vector of unsigned integers.

This vector of unsigned integers can be thought of as a &quot;numeric string&quot;. This numeric string can then be queried by, for example, data structures that find repeated substrings.

This hashing is done per <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> in the module. To hash Instructions based off of their operations, each <a href="/docs/api/classes/llvm/instruction">Instruction</a> is wrapped in an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct. The unsigned integer for an <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> depends on:
<ul>
<li>The hash provided by the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a>.</li>
<li>Which member of <a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a> the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> is classified as. The numeric string for an individual <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> is terminated by an unique unsigned integer. This prevents data structures which rely on repetition from matching across BasicBlocks. (For example, the <a href="/docs/api/classes/llvm/suffixtree">SuffixTree</a>.) As a concrete example, if we have the following two BasicBlocks: 
<ProgramListing>

<CodeLine><Highlight kind="normal">bb0:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add1 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %a, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea92eb5ffee6ae2fec3ad71c777531578f">b</a></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add2 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %c, %d</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add3 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i64 %<a href="/docs/api/namespaces/llvm/numbers/#a92f4283d4e0e2ea1776894b3ae93640f">e</a>, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea8fa14cdd754f91cc6554c9e71929cce7">f</a></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">bb1:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%<a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i32 %c, %d</Highlight></CodeLine>

</ProgramListing>
 We may hash the Instructions like this (via <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a>): 
<ProgramListing>

<CodeLine><Highlight kind="normal">bb0:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add1 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %a, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea92eb5ffee6ae2fec3ad71c777531578f">b</a> ; Hash: 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add2 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %c, %d; Hash: 1</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add3 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i64 %<a href="/docs/api/namespaces/llvm/numbers/#a92f4283d4e0e2ea1776894b3ae93640f">e</a>, %<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea8fa14cdd754f91cc6554c9e71929cce7">f</a>; Hash: 2</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">bb1:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%<a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cda41a13f3ce88ed84e63003e32b18c1235">sub</a> i32 %c, %d; Hash: 3</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">%add4 = <a href="/docs/api/namespaces/llvm/arm-am/#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a> i32 %c, %d ; Hash: 1</Highlight></CodeLine>

</ProgramListing>
 And produce a &quot;numeric string representation&quot; like so: 1, 1, 2, unique&#95;integer&#95;1, 3, 1, unique&#95;integer&#95;2</li>
</ul>


TODO: This is very similar to the MachineOutliner, and should be consolidated into the same interface.

Definition at line 380 of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.

<SectionDefinition>

## Public Constructors

### IRInstructionMapper() {#ab074cefd064d3c9f84f7207dbee71724}

<MemberDefinition
  prototype={<>llvm::IRSimilarity::IRInstructionMapper::IRInstructionMapper (<a href="/docs/api/classes/llvm/specificbumpptrallocator">SpecificBumpPtrAllocator</a>&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &gt; &#42; IDA, <a href="/docs/api/classes/llvm/specificbumpptrallocator">SpecificBumpPtrAllocator</a>&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &gt; &#42; IDLA)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00503">503</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### allocateIRInstructionData() {#aac95ccee9d5cbc582a1bab1d1e9e854d}

<MemberDefinition
  prototype={<>IRInstructionData &#42; IRInstructionMapper::allocateIRInstructionData (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; I, bool Legality, <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &amp; IDL)</>}>
Get an allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct using the InstDataAllocator.

<ParametersList title="Parameters">
<ParametersListItem name="I">- The <a href="/docs/api/classes/llvm/instruction">Instruction</a> to wrap with <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a>.</ParametersListItem>
<ParametersListItem name="Legality">- A boolean value that is true if the instruction is to be considered for similarity, and false if not.</ParametersListItem>
<ParametersListItem name="IDL">- The InstructionDataList that the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> is inserted into.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
An allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00432">432</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00376">376</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### allocateIRInstructionData() {#a0a81ca571e91f33e3a9e433e8bb075b3}

<MemberDefinition
  prototype={<>IRInstructionData &#42; IRInstructionMapper::allocateIRInstructionData (<a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> &amp; IDL)</>}>
Get an empty allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct using the InstDataAllocator.

<ParametersList title="Parameters">
<ParametersListItem name="IDL">- The InstructionDataList that the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> is inserted into.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
An allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> struct.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00441">441</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00382">382</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### allocateIRInstructionDataList() {#accaaf76a12845e506563d51d9617773d}

<MemberDefinition
  prototype={<>IRInstructionDataList &#42; IRInstructionMapper::allocateIRInstructionDataList ()</>}>
Get an allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> object using the IDLAllocator.

<SectionUser title="Returns">
An allocated <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> object.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00446">446</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00387">387</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### convertToUnsignedVec() {#ae3af188e096e8a1152a33285a1c83c33}

<MemberDefinition
  prototype={<>void IRInstructionMapper::convertToUnsignedVec (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp; BB, std::vector&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42; &gt; &amp; InstrList, std::vector&lt; unsigned &gt; &amp; IntegerMapping)</>}>
Maps the Instructions in a <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> <code>BB</code> to legal or illegal integers determined by <code><a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a></code>.

Two Instructions are mapped to the same value if they are close as defined by the InstructionData class above.


<ParametersList title="Parameters">
<ParametersListItem name="[in] BB">- The <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> to be mapped to integers.</ParametersListItem>
<ParametersListItem name="[inout] InstrList">- Vector of <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> to append to.</ParametersListItem>
<ParametersListItem name="[inout] IntegerMapping">- Vector of unsigned integers to append to.</ParametersListItem>
</ParametersList>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00475">475</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00290">290</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### initializeForBBs() {#a7c35c00b1125706d72f31c37b442fdc2}

<MemberDefinition
  prototype={<>void llvm::IRSimilarity::IRInstructionMapper::initializeForBBs (<a href="/docs/api/classes/llvm/function">Function</a> &amp; F, unsigned &amp; BBNumber)</>}
  labels = {["inline"]}>
Assigns values to all the basic blocks in function <code>F</code> starting from integer <code>BBNumber</code>.

<ParametersList title="Parameters">
<ParametersListItem name="F">- The function containing the basic blocks to assign numbers to.</ParametersListItem>
<ParametersListItem name="BBNumber">- The number to start from.</ParametersListItem>
</ParametersList>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00455">455</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### initializeForBBs() {#aac04bc0ac4b1620a9c9aa65c761b3344}

<MemberDefinition
  prototype={<>void llvm::IRSimilarity::IRInstructionMapper::initializeForBBs (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}
  labels = {["inline"]}>
Assigns values to all the basic blocks in <a href="/docs/api/classes/llvm/module">Module</a> <code>M</code>.

<ParametersList title="Parameters">
<ParametersListItem name="M">- The module containing the basic blocks to assign numbers to.</ParametersListItem>
</ParametersList>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00462">462</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### mapToIllegalUnsigned() {#aee2e5f8ff22ce6063643fea5c5b282d5}

<MemberDefinition
  prototype={<>unsigned IRInstructionMapper::mapToIllegalUnsigned (<a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; It, std::vector&lt; unsigned &gt; &amp; IntegerMappingForBB, std::vector&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42; &gt; &amp; InstrListForBB, bool End=false)</>}>
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to an illegal integer.

<ParametersList title="Parameters">
<ParametersListItem name="[in] It">- The <code><a href="/docs/api/classes/llvm/instruction">Instruction</a></code> to be mapped to an integer.</ParametersListItem>
<ParametersListItem name="[inout] IntegerMappingForBB">- Vector of unsigned integers to append to.</ParametersListItem>
<ParametersListItem name="[inout] InstrListForBB">- Vector of <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> to append to.</ParametersListItem>
<ParametersListItem name="End">- true if creating a dummy <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> at the end of a basic block.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
The integer <code>It</code> was mapped to.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00499">499</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00393">393</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

### mapToLegalUnsigned() {#ae392ae2bd47b6a65a6d70f61ad7225a3}

<MemberDefinition
  prototype={<>unsigned IRInstructionMapper::mapToLegalUnsigned (<a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> &amp; It, std::vector&lt; unsigned &gt; &amp; IntegerMappingForBB, std::vector&lt; <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> &#42; &gt; &amp; InstrListForBB)</>}>
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to a legal integer.

<ParametersList title="Parameters">
<ParametersListItem name="[in] It">- The <a href="/docs/api/classes/llvm/instruction">Instruction</a> to be mapped to an integer.</ParametersListItem>
<ParametersListItem name="[inout] IntegerMappingForBB">- Vector of unsigned integers to append to.</ParametersListItem>
<ParametersListItem name="[inout] InstrListForBB">- Vector of InstructionData to append to.</ParametersListItem>
</ParametersList>

<SectionUser title="Returns">
The integer <code>It</code> was mapped to.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00486">486</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>, definition at line <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp/#l00322">322</a> of file <a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### AddedIllegalLastTime {#aed7023ae0be840bc273712a9905e3c06}

<MemberDefinition
  prototype="bool llvm::IRSimilarity::IRInstructionMapper::AddedIllegalLastTime = false">
Set if we added an illegal number in the previous step.

Since each illegal number is unique, we only need one of them between each range of legal numbers. This lets us make sure we don&#39;t add more than one illegal number per range.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00401">401</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### BasicBlockToInteger {#ac340be8c899d6572628a6944b17110bc}

<MemberDefinition
  prototype={<>DenseMap&lt;BasicBlock &#42;, unsigned&gt; llvm::IRSimilarity::IRInstructionMapper::BasicBlockToInteger</>}>
A mapping for a basic block in a module to its assigned number/location in the module.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00395">395</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### CanCombineWithPrevInstr {#ab943fd711b08ed084ecf2ed90abf1832}

<MemberDefinition
  prototype="bool llvm::IRSimilarity::IRInstructionMapper::CanCombineWithPrevInstr = false">
Marks whether we found a illegal instruction in the previous step.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00404">404</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### EnableMatchCallsByName {#a3ab651a0029c43f8639d98cbe3a4bc0c}

<MemberDefinition
  prototype="bool llvm::IRSimilarity::IRInstructionMapper::EnableMatchCallsByName = false">
Marks whether we should use exact function names, as well as types to find similarity between calls.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00412">412</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### HaveLegalRange {#aa21c1493313104ffa2d57c0379c4d145}

<MemberDefinition
  prototype="bool llvm::IRSimilarity::IRInstructionMapper::HaveLegalRange = false">
Marks whether we have found a set of instructions that is long enough to be considered for similarity.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00408">408</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### IDL {#aba61492b976936c3faf96a7713e175d9}

<MemberDefinition
  prototype={<>IRInstructionDataList&#42; llvm::IRSimilarity::IRInstructionMapper::IDL = nullptr</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00448">448</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### IDLAllocator {#a2fdad6185139f685b846369c634a04cf}

<MemberDefinition
  prototype={<>SpecificBumpPtrAllocator&lt;IRInstructionDataList&gt;&#42; llvm::IRSimilarity::IRInstructionMapper::IDLAllocator = nullptr</>}>
This allocator pointer is in charge of creating the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondatalist">IRInstructionDataList</a> so it is not deallocated until whatever external tool is using it is done with the information.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00422">422</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### IllegalInstrNumber {#a60e5af3b7e239b6fdad88efbe1e861bd}

<MemberDefinition
  prototype={<>unsigned llvm::IRSimilarity::IRInstructionMapper::IllegalInstrNumber = static&#95;cast&lt;unsigned&gt;(-3)</>}>
The starting illegal instruction number to map to.

Set to -3 for compatibility with <a href="/docs/api/structs/llvm/densemapinfo">DenseMapInfo&lt;unsigned&gt;</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00384">384</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### InstClassifier {#a7a0011906a29aacd3db06d94b41193e2}

<MemberDefinition
  prototype="InstructionClassification llvm::IRSimilarity::IRInstructionMapper::InstClassifier">
Maps an <a href="/docs/api/classes/llvm/instruction">Instruction</a> to a member of <a href="/docs/api/namespaces/llvm/irsimilarity/#af46430106334db52bfa7a4107e53a0bd">InstrType</a>.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00608">608</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### InstDataAllocator {#a300223e253d8cc149948becb9ef98378}

<MemberDefinition
  prototype={<>SpecificBumpPtrAllocator&lt;IRInstructionData&gt;&#42; llvm::IRSimilarity::IRInstructionMapper::InstDataAllocator = nullptr</>}>
This allocator pointer is in charge of holding on to the <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> so it is not deallocated until whatever external tool is using it is done with the information.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00417">417</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### InstructionIntegerMap {#a0f22f1cd41d211cd1c0f3ada0f43d576}

<MemberDefinition
  prototype={<>DenseMap&lt;IRInstructionData &#42;, unsigned, IRInstructionDataTraits&gt; llvm::IRSimilarity::IRInstructionMapper::InstructionIntegerMap</>}>
Correspondence from <a href="/docs/api/structs/llvm/irsimilarity/irinstructiondata">IRInstructionData</a> to unsigned integers.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00391">391</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

### LegalInstrNumber {#a586d66c347a83ddac2d4552c720d3511}

<MemberDefinition
  prototype="unsigned llvm::IRSimilarity::IRInstructionMapper::LegalInstrNumber = 0">
The next available integer to assign to a legal <a href="/docs/api/classes/llvm/instruction">Instruction</a> to.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h/#l00387">387</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/analysis/irsimilarityidentifier-h">IRSimilarityIdentifier.h</a></li>
<li><a href="/docs/api/files/lib/lib/analysis/irsimilarityidentifier-cpp">IRSimilarityIdentifier.cpp</a></li>
</ul>

</DoxygenPage>
