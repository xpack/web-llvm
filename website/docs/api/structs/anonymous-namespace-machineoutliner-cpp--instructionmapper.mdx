---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/anonymous-namespace-machineoutliner-cpp-/instructionmapper
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ParametersList from '@xpack/docusaurus-plugin-doxygen/components/ParametersList'
import ParametersListItem from '@xpack/docusaurus-plugin-doxygen/components/ParametersListItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `InstructionMapper` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

Maps <code>MachineInstrs</code> to unsigned integers and stores the mappings. <a href="#details">More...</a>

## Declaration

<CodeBlock>struct anonymous_namespace{MachineOutliner.cpp}::InstructionMapper</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#a76ed047b551aad831e63f153678d6d85">InstructionMapper</a> (const MachineModuleInfo &amp;MMI&#95;)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#ab972a0bf71717b582043380f067148dc">convertToUnsignedVec</a> (MachineBasicBlock &amp;MBB, const TargetInstrInfo &amp;TII)</>}>
Transforms a <code><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a></code> into a <code>vector</code> of <code>unsigneds</code> and appends it to <code>UnsignedVec</code> and <code>InstrList</code>. <a href="#ab972a0bf71717b582043380f067148dc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a4f2bae254fbc6babdf14612c7b20b512">mapToIllegalUnsigned</a> (MachineBasicBlock::iterator &amp;It, bool &amp;CanOutlineWithPrevInstr, SmallVector&lt; unsigned &gt; &amp;UnsignedVecForMBB, SmallVector&lt; MachineBasicBlock::iterator &gt; &amp;InstrListForMBB)</>}>
Maps <code>&#42;It</code> to an illegal integer. <a href="#a4f2bae254fbc6babdf14612c7b20b512">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a0ad5905b935c2e08e68fa162f6950233">mapToLegalUnsigned</a> (MachineBasicBlock::iterator &amp;It, bool &amp;CanOutlineWithPrevInstr, bool &amp;HaveLegalRange, unsigned &amp;NumLegalInBlock, SmallVector&lt; unsigned &gt; &amp;UnsignedVecForMBB, SmallVector&lt; MachineBasicBlock::iterator &gt; &amp;InstrListForMBB)</>}>
Maps <code>&#42;It</code> to a legal integer. <a href="#a0ad5905b935c2e08e68fa162f6950233">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#afa673286927fc074a3e5b5fc52939b54">AddedIllegalLastTime</a> = false</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a0e198f7621f46197f997f4cf42109b77">IllegalInstrNumber</a> = -3</>}>
The next available integer to assign to a <code><a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a></code> that cannot be outlined. <a href="#a0e198f7621f46197f997f4cf42109b77">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> &gt;</>}
  name={<><a href="#a55ee9a3bf5f8e61cb90c7ff4ad0aef7c">InstrList</a></>}>
Stores the location of the instruction associated with the integer at index i in <code>UnsignedVec</code> for each index i. <a href="#a55ee9a3bf5f8e61cb90c7ff4ad0aef7c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;, unsigned, <a href="/docs/api/structs/llvm/machineinstrexpressiontrait">MachineInstrExpressionTrait</a> &gt;</>}
  name={<><a href="#a1216dbec7ee83bf1056d1b76da88c573">InstructionIntegerMap</a></>}>
Correspondence from <code>MachineInstrs</code> to unsigned integers. <a href="#a1216dbec7ee83bf1056d1b76da88c573">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#ad9a7ba9ac7797fd4e187259cb8c3a52d">LegalInstrNumber</a> = 0</>}>
The next available integer to assign to a <code><a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a></code> that can be outlined. <a href="#ad9a7ba9ac7797fd4e187259cb8c3a52d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;, unsigned &gt;</>}
  name={<><a href="#aca781b005b26b74870c3aa3fb6e11624">MBBFlagsMap</a></>}>
Correspondence between <code>MachineBasicBlocks</code> and target-defined flags. <a href="#aca781b005b26b74870c3aa3fb6e11624">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinemoduleinfo">MachineModuleInfo</a> &amp;</>}
  name={<><a href="#a03d801e5580d7a721d94609f72b6c5cc">MMI</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; unsigned &gt;</>}
  name={<><a href="#a5ffe546b4199ea1edd45cc4f0f08e64d">UnsignedVec</a></>}>
The vector of unsigned integers that the module is mapped to. <a href="#a5ffe546b4199ea1edd45cc4f0f08e64d">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Maps <code>MachineInstrs</code> to unsigned integers and stores the mappings.

Definition at line 153 of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.

<SectionDefinition>

## Public Constructors

### InstructionMapper() {#a76ed047b551aad831e63f153678d6d85}

<MemberDefinition
  prototype={<>anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::InstructionMapper (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinemoduleinfo">MachineModuleInfo</a> &amp; MMI_)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00405">405</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### convertToUnsignedVec() {#ab972a0bf71717b582043380f067148dc}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::convertToUnsignedVec (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp; MBB, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &amp; TII)</>}
  labels = {["inline"]}>
Transforms a <code><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a></code> into a <code>vector</code> of <code>unsigneds</code> and appends it to <code>UnsignedVec</code> and <code>InstrList</code>.

Two instructions are assigned the same integer if they are identical. If an instruction is deemed unsafe to outline, then it will be assigned an unique integer. The resulting mapping is placed into a suffix tree and queried for candidates.


<ParametersList title="Parameters">
<ParametersListItem name="MBB">The <code><a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a></code> to be translated into integers.</ParametersListItem>
<ParametersListItem name="TII"><code><a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a></code> for the function.</ParametersListItem>
</ParametersList>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00290">290</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### mapToIllegalUnsigned() {#a4f2bae254fbc6babdf14612c7b20b512}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::mapToIllegalUnsigned (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> &amp; It, bool &amp; CanOutlineWithPrevInstr, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; unsigned &gt; &amp; UnsignedVecForMBB, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> &gt; &amp; InstrListForMBB)</>}
  labels = {["inline"]}>
Maps <code>&#42;It</code> to an illegal integer.

Updates <code>InstrListForMBB</code>, <code>UnsignedVecForMBB</code>, and <code>IllegalInstrNumber</code>.


<SectionUser title="Returns">
The integer that <code>&#42;It</code> was mapped to.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00247">247</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### mapToLegalUnsigned() {#a0ad5905b935c2e08e68fa162f6950233}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::mapToLegalUnsigned (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> &amp; It, bool &amp; CanOutlineWithPrevInstr, bool &amp; HaveLegalRange, unsigned &amp; NumLegalInBlock, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; unsigned &gt; &amp; UnsignedVecForMBB, <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> &gt; &amp; InstrListForMBB)</>}
  labels = {["inline"]}>
Maps <code>&#42;It</code> to a legal integer.

Updates <code>CanOutlineWithPrevInstr</code>, <code>HaveLegalRange</code>, <code>InstrListForMBB</code>, <code>UnsignedVecForMBB</code>, <code>InstructionIntegerMap</code>, and <code>LegalInstrNumber</code>.


<SectionUser title="Returns">
The integer that <code>&#42;It</code> was mapped to.
</SectionUser>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00192">192</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### AddedIllegalLastTime {#afa673286927fc074a3e5b5fc52939b54}

<MemberDefinition
  prototype={<>bool anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::AddedIllegalLastTime = false</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00184">184</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### IllegalInstrNumber {#a0e198f7621f46197f997f4cf42109b77}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::IllegalInstrNumber = -3</>}>
The next available integer to assign to a <code><a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a></code> that cannot be outlined.

Set to -3 for compatability with <code>DenseMapInfo&lt;unsigned&gt;</code>.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00160">160</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### InstrList {#a55ee9a3bf5f8e61cb90c7ff4ad0aef7c}

<MemberDefinition
  prototype={<>SmallVector&lt;MachineBasicBlock::iterator&gt; anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::InstrList</>}>
Stores the location of the instruction associated with the integer at index i in <code>UnsignedVec</code> for each index i.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00178">178</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### InstructionIntegerMap {#a1216dbec7ee83bf1056d1b76da88c573}

<MemberDefinition
  prototype={<>DenseMap&lt;MachineInstr &#42;, unsigned, MachineInstrExpressionTrait&gt; anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::InstructionIntegerMap</>}>
Correspondence from <code>MachineInstrs</code> to unsigned integers.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00168">168</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### LegalInstrNumber {#ad9a7ba9ac7797fd4e187259cb8c3a52d}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::LegalInstrNumber = 0</>}>
The next available integer to assign to a <code><a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a></code> that can be outlined.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00164">164</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### MBBFlagsMap {#aca781b005b26b74870c3aa3fb6e11624}

<MemberDefinition
  prototype={<>DenseMap&lt;MachineBasicBlock &#42;, unsigned&gt; anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::MBBFlagsMap</>}>
Correspondence between <code>MachineBasicBlocks</code> and target-defined flags.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00171">171</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### MMI {#a03d801e5580d7a721d94609f72b6c5cc}

<MemberDefinition
  prototype={<>const MachineModuleInfo&amp; anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::MMI</>}>

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00154">154</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

### UnsignedVec {#a5ffe546b4199ea1edd45cc4f0f08e64d}

<MemberDefinition
  prototype={<>SmallVector&lt;unsigned&gt; anonymous&#95;namespace&#123;MachineOutliner.cpp&#125;::InstructionMapper::UnsignedVec</>}>
The vector of unsigned integers that the module is mapped to.

Definition at line <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp/#l00174">174</a> of file <a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/codegen/machineoutliner-cpp">MachineOutliner.cpp</a></li>
</ul>

</DoxygenPage>
