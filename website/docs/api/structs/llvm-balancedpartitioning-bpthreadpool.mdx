---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/structs/llvm/balancedpartitioning/bpthreadpool
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - struct
toc_max_heading_level: 3

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `BPThreadPool` Struct Reference

<DoxygenPage pluginConfig={pluginConfig}>

A special ThreadPool that allows for spawning new tasks after blocking on wait(). <a href="#details">More...</a>

## Declaration

<CodeBlock>struct llvm::BalancedPartitioning::BPThreadPool</CodeBlock>

## Public Constructors Index

<MembersIndex>

<MembersIndexItem
  name={<><a href="#ac998b052c1023f58bc050762aadcd96a">BPThreadPool</a> (ThreadPoolInterface &amp;TheThreadPool)</>}>
</MembersIndexItem>

</MembersIndex>

## Public Member Functions Index

<MembersIndex>

<MembersIndexItem
  template={<>template &lt;typename Func&gt;</>}
  type="void"
  name={<><a href="#aeb27f1d96e107361b46a9e76df2b748d">async</a> (Func &amp;&amp;F)</>}>
Asynchronous submission of the task to the pool. <a href="#aeb27f1d96e107361b46a9e76df2b748d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3ae8940403707f6eb671dd34e23365e2">wait</a> ()</>}>
Blocking wait for all threads to complete. <a href="#a3ae8940403707f6eb671dd34e23365e2">More...</a>
</MembersIndexItem>

</MembersIndex>

## Public Member Attributes Index

<MembersIndex>

<MembersIndexItem
  type={<>std::condition&#95;variable</>}
  name={<><a href="#a29b1b0c6b5faebd6e9c5f7efd1094dbc">cv</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ab60ed5291d7d3a35f6cb12fd6755c9dc">IsFinishedSpawning</a> = false</>}>
Only true when all threads are down spawning new threads. <a href="#ab60ed5291d7d3a35f6cb12fd6755c9dc">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="std::mutex"
  name={<><a href="#a37d209eed7729d6358c6bdbd208dee88">mtx</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::atomic&lt; int &gt;</>}
  name={<><a href="#a450052d8436f0b93cd0a9f7450705981">NumActiveThreads</a> = 0</>}>
The number of threads that could spawn more threads. <a href="#a450052d8436f0b93cd0a9f7450705981">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/threadpoolinterface">ThreadPoolInterface</a> &amp;</>}
  name={<><a href="#af835d5701989eff2f80099981615cf59">TheThreadPool</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

A special ThreadPool that allows for spawning new tasks after blocking on wait().

<a href="/docs/api/classes/llvm/balancedpartitioning">BalancedPartitioning</a> recursively spawns new threads inside other threads, so we need to track how many active threads that could spawn more threads.

Definition at line 117 of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.

<SectionDefinition>

## Public Constructors

### BPThreadPool() {#ac998b052c1023f58bc050762aadcd96a}

<MemberDefinition
  prototype={<>llvm::BalancedPartitioning::BPThreadPool::BPThreadPool (<a href="/docs/api/classes/llvm/threadpoolinterface">ThreadPoolInterface</a> &amp; TheThreadPool)</>}
  labels = {["inline"]}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00131">131</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Functions

### async() {#aeb27f1d96e107361b46a9e76df2b748d}

<MemberDefinition
  template={<>template &lt;typename Func&gt;</>}
  prototype={<>void BalancedPartitioning::BPThreadPool::async (Func &amp;&amp; F)</>}>
Asynchronous submission of the task to the pool.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00126">126</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00030">30</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

### wait() {#a3ae8940403707f6eb671dd34e23365e2}

<MemberDefinition
  prototype="void BalancedPartitioning::BPThreadPool::wait ()">
Blocking wait for all threads to complete.

Unlike ThreadPool, it is acceptable for other threads to add more tasks while blocking on this call.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00130">130</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>, definition at line <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp/#l00054">54</a> of file <a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Public Member Attributes

### cv {#a29b1b0c6b5faebd6e9c5f7efd1094dbc}

<MemberDefinition
  prototype={<>std::condition&#95;variable llvm::BalancedPartitioning::BPThreadPool::cv</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00120">120</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### IsFinishedSpawning {#ab60ed5291d7d3a35f6cb12fd6755c9dc}

<MemberDefinition
  prototype="bool llvm::BalancedPartitioning::BPThreadPool::IsFinishedSpawning = false">
Only true when all threads are down spawning new threads.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00124">124</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### mtx {#a37d209eed7729d6358c6bdbd208dee88}

<MemberDefinition
  prototype="std::mutex llvm::BalancedPartitioning::BPThreadPool::mtx">

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00119">119</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### NumActiveThreads {#a450052d8436f0b93cd0a9f7450705981}

<MemberDefinition
  prototype={<>std::atomic&lt;int&gt; llvm::BalancedPartitioning::BPThreadPool::NumActiveThreads = 0</>}>
The number of threads that could spawn more threads.

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00122">122</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

### TheThreadPool {#af835d5701989eff2f80099981615cf59}

<MemberDefinition
  prototype={<>ThreadPoolInterface&amp; llvm::BalancedPartitioning::BPThreadPool::TheThreadPool</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h/#l00118">118</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this struct was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/support/balancedpartitioning-h">BalancedPartitioning.h</a></li>
<li><a href="/docs/api/files/lib/lib/support/balancedpartitioning-cpp">BalancedPartitioning.cpp</a></li>
</ul>

</DoxygenPage>
